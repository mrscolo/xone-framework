{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/propComponents/Breadcrumb.vue?6bb7","webpack:///./src/components/uiComponents/Offline.vue?5f44","webpack:///../../../src/scripts/Exceptions/Exception.ts","webpack:///./src/components/uiComponents/Camera.vue?ef48","webpack:///./src/components/dragAndDrop/DragControl.vue?041d","webpack:///../../../src/scripts/Utils/StringBuilder.ts","webpack:///./src/components/propComponents/Button.vue?dcc8","webpack:///./src/components/uiComponents/Loader.vue?e4a5","webpack:///./src/components/propComponents/contentsComponents/PictureMap.vue?cd43","webpack:///./src/components/Row.vue?61df","webpack:///../../../src/scripts/Connection/JSONConnection/XoneJSONConnectionData.ts","webpack:///../../../src/scripts/XoneScripts/ScriptContext.ts","webpack:///./src/App.vue?eb84","webpack:///./src/components/propComponents/contentsComponents/ContentsRow.vue?04fc","webpack:///../../../src/scripts/Connection/WebCore/XoneWebCoreResulset.ts","webpack:///../../../src/scripts/Connection/WebCore/XoneWebCoreConnection.ts","webpack:///../../../src/scripts/Connection/WebCore/XoneWebCoreConnectionData.ts","webpack:///./src/components/propComponents/LinkedSearchInline.vue?2373","webpack:///../../../src/scripts/Collections/HashMap/Hashtable.ts","webpack:///../../../src/scripts/Utils/NumberUtils.ts","webpack:///./src/components/uiComponents/Toast.vue?6f5b","webpack:///../../../src/scripts/Utils/CXoneNameValuePair.ts","webpack:///./src/composables/XoneAppHandler.js","webpack:///../../../src/scripts/Utils/TextUtils.ts","webpack:///./src/components/propComponents/inputComponents/Checkbox.vue?13ef","webpack:///../../../src/scripts/Utils/ConnectionStringUtils.ts","webpack:///../../../src/scripts/Utils/ObjectDeveloper.ts","webpack:///../../../src/scripts/Collections/Vector.ts","webpack:///../../../src/scripts/core/Localization/XoneMessageHolder.ts","webpack:///../../../src/scripts/Xml/SAXImpl/SaxDocument.ts","webpack:///../../../src/scripts/Xml/JSONImpl/XmlDocument.ts","webpack:///./src/composables/XoneUI.js","webpack:///../../../src/scripts/Utils/ObjUtils.ts","webpack:///../../../src/scripts/Exceptions/IllegalArgumentException.ts","webpack:///../../../src/scripts/Exceptions/NullPointerException.ts","webpack:///./src/App.vue","webpack:///./src/components/uiComponents/Toast.vue","webpack:///./src/components/uiComponents/Toast.vue?ffcc","webpack:///./src/components/uiComponents/SnackBar.vue","webpack:///./src/components/uiComponents/SnackBar.vue?7616","webpack:///./src/components/uiComponents/Loader.vue","webpack:///./src/components/uiComponents/Loader.vue?1521","webpack:///./src/components/uiComponents/MsgBox.vue","webpack:///./src/components/uiComponents/MsgBox.vue?b551","webpack:///./src/components/uiComponents/Camera.vue","webpack:///./src/components/uiComponents/Camera.vue?1b3d","webpack:///./src/components/uiComponents/Url.vue","webpack:///./src/components/propComponents/Button.vue","webpack:///./src/composables/DragAndDrop.js","webpack:///./src/components/propComponents/Button.vue?a692","webpack:///./src/components/uiComponents/Url.vue?1e64","webpack:///./src/components/uiComponents/Offline.vue","webpack:///./src/components/uiComponents/Offline.vue?e255","webpack:///./src/components/dragAndDrop/SelectedControl.vue","webpack:///./src/components/dragAndDrop/SelectedControl.vue?9966","webpack:///./src/components/dragAndDrop/OverControl.vue","webpack:///./src/components/dragAndDrop/OverControl.vue?9ecf","webpack:///./src/components/dragAndDrop/DragControl.vue","webpack:///./src/components/dragAndDrop/DragControl.vue?ff3b","webpack:///./src/composables/XoneAnimation.js","webpack:///./src/composables/helperFunctions/FontsHelper.js","webpack:///./src/App.vue?5299","webpack:///./src/router/index.js","webpack:///./src/components/Container.vue","webpack:///./src/components/Row.vue","webpack:///./src/components/Row.vue?7426","webpack:///./src/components/Column.vue","webpack:///./src/components/Column.vue?6652","webpack:///./src/components/Prop.vue","webpack:///./src/components/propComponents/Input.vue","webpack:///./src/components/propComponents/LinkedSearchInline.vue","webpack:///./src/components/propComponents/LinkedSearchInline.vue?d028","webpack:///./src/components/propComponents/inputComponents/Checkbox.vue","webpack:///./src/components/propComponents/inputComponents/Checkbox.vue?c3fd","webpack:///./src/components/propComponents/Input.vue?ae01","webpack:///./src/components/propComponents/Image.vue","webpack:///./src/components/propComponents/Image.vue?3485","webpack:///./src/components/propComponents/Contents.vue","webpack:///./src/components/propComponents/contentsComponents/ContentsRow.vue","webpack:///./src/components/propComponents/contentsComponents/ContentsRow.vue?e543","webpack:///./src/components/propComponents/contentsComponents/Map.vue","webpack:///./src/composables/helperFunctions/MapHelper.js","webpack:///./src/composables/helperFunctions/ColorHelper.js","webpack:///./src/components/propComponents/contentsComponents/Map.vue?3ac0","webpack:///./src/components/propComponents/contentsComponents/Calendar.vue","webpack:///./src/composables/helperFunctions/DateHelper.js","webpack:///./src/components/propComponents/contentsComponents/Calendar.vue?3933","webpack:///./src/components/propComponents/contentsComponents/ChartBar.vue","webpack:///./src/composables/helperFunctions/ChartsHelper.js","webpack:///./src/composables/helperFunctions/ChartHelper.js","webpack:///./src/components/propComponents/contentsComponents/ChartBar.vue?e0c9","webpack:///./src/components/propComponents/contentsComponents/ChartPie.vue","webpack:///./src/components/propComponents/contentsComponents/ChartPie.vue?9783","webpack:///./src/components/propComponents/contentsComponents/PictureMap.vue","webpack:///./src/components/propComponents/contentsComponents/PictureMap.vue?2d2f","webpack:///./src/components/propComponents/Contents.vue?9500","webpack:///./src/components/propComponents/Web.vue","webpack:///./src/components/propComponents/Web.vue?d23e","webpack:///./src/components/propComponents/Video.vue","webpack:///./src/components/propComponents/Video.vue?def9","webpack:///./src/components/propComponents/Breadcrumb.vue","webpack:///./src/components/propComponents/Breadcrumb.vue?6ca5","webpack:///./src/components/Prop.vue?160b","webpack:///./src/components/Container.vue?60d7","webpack:///./src/composables/XoneFileManager.js","webpack:///./src/composables/XonePDF.js","webpack:///./src/composables/XoneClipboard.js","webpack:///./src/composables/XoneSystemSettings.js","webpack:///./src/composables/XoneDebugTools.js","webpack:///./src/composables/ScriptGlobalObjects.js","webpack:///./src/main.js","webpack:///../../../src/scripts/Utils/StringUtils.ts","webpack:///./src/composables/helperFunctions/StringHelper.js","webpack:///./src/composables/SwipeHandler.js","webpack:///./src/composables/appData/Manager/FileManager.js","webpack:///./src/composables/ContentsLoaderHandler.js","webpack:///./src/components/uiComponents/MsgBox.vue?29e7","webpack:///./src/components/Prop.vue?1c37","webpack:///../../../src/scripts/Parsers/SQL/QueryTable.ts","webpack:///../../../src/scripts/Parsers/SQL/QueryField.ts","webpack:///../../../src/scripts/Parsers/SQL/SqlParser.ts","webpack:///../../../src/scripts/core/CSS/XoneCssParser.ts","webpack:///../../../src/scripts/Helpers/BufferedReader.ts","webpack:///../../../src/scripts/core/CSS/CssParseException.ts","webpack:///../../../src/scripts/core/CSS/XoneCssRule.ts","webpack:///./src/components/Coll.vue?b7a6","webpack:///./src/components/propComponents/Image.vue?6b08","webpack:///../../../src/scripts/Utils/Calendar.ts","webpack:///./src/composables/appData/Manager/FileLoaderBrowser.js","webpack:///./src/components/Coll.vue","webpack:///./src/components/Groups.vue","webpack:///./src/components/Groups.vue?3380","webpack:///./src/composables/helperFunctions/GroupsHelper.js","webpack:///./src/components/Coll.vue?6242","webpack:///../../../src/scripts/Connection/XoneConnDataFlags.ts","webpack:///../../../src/scripts/Utils/Guid.ts","webpack:///../../../src/scripts/Connection/XoneConnectionData.ts","webpack:///./src/components/Groups.vue?9aca","webpack:///../../../src/scripts/Utils/SqlType.ts","webpack:///./src/components/uiComponents/SnackBar.vue?18e8","webpack:///./src/composables/appData/Manager/FileLoaderNodeJS.js","webpack:///./src/components/propComponents/Web.vue?3e08","webpack:///./src/composables/Firebase.js","webpack:///./src/composables/AppDataHandler.js","webpack:///../../../src/scripts/Xml/JSONImpl/XmlAttributes.ts","webpack:///../../../src/scripts/Utils/XmlUtils.ts","webpack:///./src/components/propComponents/contentsComponents/Map.vue?0420","webpack:///./src/components/uiComponents/Url.vue?903a","webpack:///./src/components/dragAndDrop/OverControl.vue?077b","webpack:///../../../src/scripts/Exceptions/XoneGenericException.ts","webpack:///../../../src/scripts/Exceptions/IllegalStateException.ts","webpack:///./src/components/propComponents/Contents.vue?6b6a","webpack:///../../../src/scripts/Connection/JSONConnection/XoneJSONResulset.ts","webpack:///../../../src/scripts/Connection/JSONConnection/XoneJSONConnection.ts","webpack:///./src/composables/XoneAttributesHandler.js","webpack:///../../../src/scripts/Extensions/Extensions.ts","webpack:///./src/components/propComponents/contentsComponents/Calendar.vue?fb9a","webpack:///./src/components/Column.vue?9e00","webpack:///./src/components/propComponents/contentsComponents/ChartBar.vue?7240","webpack:///../../../src/scripts/Xml/JSONImpl/XmlNodeList.ts","webpack:///../../../src/scripts/Xml/JSONImpl/XmlNode.ts","webpack:///./src/composables/helperFunctions/MobileBrowserHelper.js","webpack:///../../../src/scripts/Exceptions/XoneValidationException.ts","webpack:///../../../src/scripts/core/XoneDataObject.ts","webpack:///../../../src/scripts/Connection/Test/XoneTestResulset.ts","webpack:///./src/composables/helperFunctions/DeviceHelper.js","webpack:///../../../src/scripts/core/XoneError.ts","webpack:///../../../src/scripts/Exceptions/XoneMessageKeys.ts","webpack:///../../../src/scripts/core/XoneBrowseData.ts","webpack:///../../../src/scripts/Utils/DataUtils.ts","webpack:///../../../src/scripts/core/Macros/MacrosEvaluator.ts","webpack:///../../../src/scripts/core/XoneCompany.ts","webpack:///../../../src/scripts/Utils/Base64.ts","webpack:///../../../src/scripts/Utils/HashUtils.ts","webpack:///../../../src/scripts/core/XoneUser.ts","webpack:///../../../src/scripts/core/XoneLookupObject.ts","webpack:///../../../src/scripts/Utils/ScriptUtils.ts","webpack:///../../../src/scripts/core/XoneDataCollection.ts","webpack:///./src/components/propComponents/Video.vue?0cf1","webpack:///./src/composables/helperFunctions/ImageHelper.js","webpack:///./src/composables/appData/xone/source/scripts/__SCRIPT_WRAPPER__.js","webpack:///./src/composables/XoneViewsHandler.js","webpack:///./src/components/dragAndDrop/SelectedControl.vue?6c20","webpack:///./src/components/propComponents/Input.vue?6312","webpack:///../../../src/scripts/Connection/GPSConnection/XoneGPSResulset.ts","webpack:///../../../src/scripts/Connection/GPSConnection/XoneGPSConnection.ts","webpack:///../../../src/scripts/Connection/GPSConnection/XoneGPSConnectionData.ts","webpack:///../../../src/scripts/Transform/UIAttributes.ts","webpack:///../../../src/scripts/Transform/UITransform.ts","webpack:///../../../src/scripts/Utils/Utils.ts","webpack:///../../../src/scripts/core/XoneApplication.ts","webpack:///../../../src/scripts/XoneScripts/XOneJavascript.ts","webpack:///./src/components/propComponents/contentsComponents/ChartPie.vue?cfb9","webpack:///./src/components/Container.vue?54b1"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","Exception","this","m_message","getSimpleName","StringBuilder","text","m_data","Array","from","SafeToString","join","index","item","add","toString","position","charAt","XoneJSONConnectionData","context","Name","Owner","m_context","m_connection","getConnString","getName","ReadOnly","GetNewConnection","Connection","cn","GetCurrentConnection","args","executeQueryAsync","countAsync","Sentence","Replicate","executeAsync","Collection","OperName","Rows","FieldName","Value","startsWith","TableName","KeyName","RowIdFieldName","RowId","tableName","RowID","ScriptContext","HostCollection","m_object","m_coll","getOwnerCollection","m_lstLocalIncludes","ParamName","ParamValue","m_lstParams","IsEmptyString","put","delete","ActionNode","xna","SelectNodes","forEach","strName","isArray","ExtractArguments","count","xarg","getAttrValue","PROP_ATTR_NAME","String","format","SetParam","connection","options","m_stringData","m_maxRows","m_keys","isResultset","m_nIterate","m_options","fetchDataAsync","hasError","keys","fld","ordinal","nType","NumberUtils","SafeToInt","resolverField","SafeToDouble","ObjUtils","SafeToDate","StringUtils","getValue","page","cache","sConnectionString","m_token","m_idsUrl","sUrlAddress","parseConnectionString","readBearerTokenAsync","token","TextUtils","isEmpty","fetch","method","headers","Authorization","body","JSON","stringify","response","json","parser","GetFields","toJSON","entries","collName","GetSqlType","SqlType","SQLTYPE_SELECT","coll","action","where","GetWhereSentence","SQLTYPE_UPDATE","SQLTYPE_INSERT","getDataFromParser","getKeys","SQLTYPE_DELETE","MaxRows","tmp","SqlParser","ParseSqlString","executeNonQuery","formatOnlineData","bld","append","sUsername","sPassword","expires_in","Date","access_token","getAuthData","expire","setSeconds","getSeconds","rs","populate","sConnection","parameters","ConnectionStringUtils","bIsLoginCall","ParseBoolValue","bIsJWTCall","sToken","Utils","EMPTY_STRING","nFlags","XoneJSONConnection","FLAG_XONEJSONODATA","FLAG_XONEJSONSQL","FLAG_XONEJSONCUSTOM","nTimeout","nSecurityLevel","trim","endsWith","substring","sMethod","sEndpoint","sAction","DEFAULT_ACTION_NAME","sAuthAction","DEFAULT_AUTHACTION_NAME","sContentType","DEFAULT_CONTENT_TYPE","bIsSqlQuery","bPostUrlEncode","bIsCertificatePinningEnabled","sLocalCertPath","bAuthenticate","sAuthenticationUsername","sAuthenticationPassword","bUseRemoteBroker","sRemoteMapped","sRemoteDest","bAllowUnsafeCertificates","parameter","OperType","values","whereClause","flags","cryptoData","login","pass","m_strConnString","XoneTestResulset","XoneConnectionData","Hashtable","_map","Map","_pointer","size","done","obj","substr","has","set","clear","iterator","str","Number","parseFloat","nDefault","IsNothing","retValue","parseInt","isInteger","CXoneNameValuePair","AppHandler","_instance","_version","appData","_appData","setAppNode","_orientation","_sizeConditions","_appNode","getAppNode","width","height","isNaN","setGlobalMacro","setVisualConditions","deviceId","localStorage","getItem","setItem","generateUniqueDeviceId","attributes","attrs","getDeviceId","Intl","DateTimeFormat","resolvedOptions","locale","split","language","countryCode","navigator","platform","vendor","getAppValueWithConditions","version","isMobile","autoLogon","attr","attribute","app","attributeNode","childs","find","items","map","filter","conditions","includes","filteredItems","sizeConditions","ex","arg0","arg1","localeCompare","keyValuePair","sParameter","toLowerCase","ObjectDeveloper","strDateSep","strAMPM","dtTime","Datemask","ForceNulls","strMask","vt","GetTypeTag","OBJ_TYPE_DATE","OBJ_TYPE_CALENDAR","SafeToCalendar","equals","MONTH","DAY_OF_MONTH","YEAR","HOUR_OF_DAY","MINUTE","SECOND","contains","Replace","HOUR","NATIVE_TYPE_INT","NATIVE_TYPE_LONG","NATIVE_TYPE_BOOL","SafeToBool","OBJ_TYPE_NULL","NATIVE_TYPE_DOUBLE","NATIVE_TYPE_FLOAT","OBJ_TYPE_STRING","ONESECOND","ONEMINUTE","ONEHOUR","ONEDAY","ONEWEEK","ONEMONTH","ONEYEAR","Vector","objLru","indexOf","remove","XoneMessageHolder","LangName","m_strLangName","m_lstMessages","Key","sDefault","containsKey","Source","isr","printStackTrace","closeSafely","Line","x","strKey","strValue","closeable","close","xml","SaxParser","cb","lastNode","sText","onStartDocument","onEndDocument","onStartElementNS","localName","prefix","uri","namespaces","bIndex","bFirstNode","XmlAttributes","getIndex","XmlNode","rootNode","onEndElementNS","elem","setText","getParentNode","onCharacters","chars","onCdata","cdata","log","onComment","msg","onWarning","onError","sPath","useTranslation","parseString","m_hndDoc","m_rootNode","node","_doLogin","_msgBoxCallback","_customMsgBoxCallback","_hideLoaderCallback","_showGroupCallback","_showLoaderCallback","_showToastCallback","_showSnackbarCallback","_startCameraCallback","_xoneDataObject","_lastGpsPosition","setDoLogin","callback","setOpenUrlCallback","openUrlCallback","setMsgBoxCallback","msgBoxCallback","setCustomMsgBoxCallback","customMsgBoxCallback","setHideLoaderCallback","hideLoaderCallback","setShowGroupCallback","showGroupCallback","setShowLoaderCallback","showLoaderCallback","setShowToastCallback","showToastCallback","setShowSnackbarCallback","showSnackbarCallback","setStartCameraCallback","startCameraCallback","setXoneDataObject","xoneDataObject","_mapNotifications","XoneUI","title","description","location","dtStart","dtEnd","PropName","CaptureObjectName","xoneView","getView","clearDrawing","id","notification","DestinationLatitude","DestinationLongitude","SourceLatitude","SourceLongitude","Mode","StrokeColor","Prop","NodeName","delay","AppDataHandler","deletelastBreadcrumb","history","back","clearBreadcrumbs","coords","latitude","longitude","accuracy","altitude","heading","timestamp","speed","DataObject","groupId","hideLoader","WebViewPropName","ScriptText","packageName","PackageName","ExtrasParam","isOnlyWebLayout","webLayout","xoneAppHandler","getWebLayout","addNewXoneDataObject","nextTick","entryPoint","getAppData","getEntryPointCollection","getCurrentVisualConditions","Lines","userName","getVariables","password","PhoneNumber","res","XoneDataObject","Message","Title","Sound","Vibrate","NumberRepeat","playSoundAndVibrate","msgBox","param","pushXoneDataObject","openEditView","filePath","replace","element","style","display","click","Mask","Url","open","Extensions","inputElement","fileTypes","accept","onchange","uploadFile","files","fileName","targetProperty","finally","sound","Sounds","vibrate","ContinuePlaying","Audio","play","Data","Size","Level","Type","Width","Height","Path","Align","Dither","PageNumber","exitApp","webkitSpeechRecognition","SpeechRecognition","isXoneDataObject","isObject","onRecognize","recognition","continuous","interimResults","maxAlternatives","onresult","results","transcript","onspeechend","stop","start","Props","props","refresh","ContentName","Row","refreshRow","refreshSelectedRow","FileName","To","Cc","Subject","Attachments","Phone","Text","FeedMode","Language","Max","LedColor","LedOn","LedOff","Position","image","JSONObject","animationIn","animationInDuration","animationOut","animationOutDuration","Orientation","TextStatusBar","doNotification","Notification","permission","dismissNotification","icon","onclick","Function","requestPermission","params","showLoader","Seconds","speechSynthesis","speechSynthesisUtterance","SpeechSynthesisUtterance","lang","speak","TimeOut","Interval","Flags","geolocation","stopGps","getCurrentPosition","enableHighAccuracy","maximumAge","pos","_startGpsTimeout","startGps","PrinterType","NativeObject","Codes","Target","BackgroundImage","ScreenOrientation","file","generateUniqueId","formData","FormData","processData","contentType","catch","True","xoneUI","IsNumeric","oldVal","dt","getTime","setHours","setMinutes","setMilliseconds","SafeToComplexDate","toDateString","getHours","padStart","getMinutes","getOnlyTime","sep","sDate","regex","getInstance","sSeparator","getDateSeparator","parse","Boolean","NOT_NATIVE_TYPE","IllegalArgumentException","NullPointerException","class","containerWidth","containerHeight","webLayoutBreadcrumb","breadcrumb","isLayout","toastElements","to","toast","setup","duration","__exports__","snackBarElements","snackBar","actionTextColor","onSnackBarActionPressed","actionText","color","textColor","actionMethod","hideSnackBar","isLoaderVisible","state","visible","isCustomMsgbox","ref","onClick","btn1","btn2","msgboxBreadcrumb","objectInfo","components","Coll","btnOkElement","focus","isAccepted","layout","getBreadcrumbs","isMsgbox","isContents","isMsgBox","onMsgBoxOptionSelected","removeBreadcrumb","dataObject","isCameraVisible","isNotSupported","isVideoRecorded","isPhotoTook","autoplay","controls","isRecording","isTypePhoto","takePhoto","isTypeVideo","recordVideo","stream","videoElement","photoPreviewElement","videoPreviewElement","newValue","mediaDevices","enumerateDevices","getUserMedia","audio","video","srcObject","getTracks","track","videoTimeout","mediaRecorder","chunks","blobValue","imageWidth","offsetWidth","imageHeight","offsetHeight","canvas","overflow","getContext","drawImage","toBlob","blob","newImg","Image","URL","createObjectURL","revokeObjectURL","innerHTML","MediaRecorder","mimeType","isTypeSupported","ondataavailable","onstop","Blob","url","loading","disabled","isExecutingOnClick","editInRow","isDisableEdit","noEditInRow","onTouchStart","onTouchEnd","onFocus","labelWidth","DragAndDrop","_isDesigner","_isDragging","_dragControl","parentElement","_designPadding","_selectedControl","_overControl","_overControls","pushOverControl","setOverControl","addOverControl","removeOverControl","preventDefault","stopPropagation","setSelectedControl","required","default","paddings","btnElement","fitSizeToContainer","isResized","doFit","fitHeightToContainer","fitWidthToContainer","xoneControl","addControl","lastBreadcrumb","breadcrumbId","activeGroup","imgPath","resolveImage","lastOpacity","hasPadding","top","right","bottom","left","opacity","animate","Button","isOnline","addEventListener","setOnline","setOffline","removeEventListener","onLine","isDesigner","isGroup","onMouseLeave","controlName","onParentButtonClick","onDragStart","onDragEnd","selectedControl","getSelectedControl","getBoundingClientRect","classList","setIsDragging","cursor","getIsDesigner","border","getBorderSelected","appPath","onMouseClick","overControl","getOverControl","vue","getBorderOver","isDragging","containerSelected","moveCursorTo","cursorCoordinates","containersInfo","containerInfo","onMouseEnter","getIsDragging","dragControl","getDragControl","isContainer","control","y","positionY","positionX","containerAux","aux","lastElementChild","firstElementChild","selectorSize","_widthFactor","_heightFactor","setWidthFactor","setHeightFactor","XoneAnimation","_animate","_target","_callback","_options","_keyframes","fill","initAnimate","querySelector","scale","transform","setRelativeScaleX","setRelativeScaleY","setRelativeX","setRelativeY","alpha","iterations","setRotation","easing","addFontFaces","newStyle","getAppPath","createTextNode","origin","Toast","SnackBar","Loader","MsgBox","Camera","Offline","SelectedControl","OverControl","DragControl","XoneAppHandler","getVersion","router","route","isWebLayout","routeBreadcrumbs","isContentsRow","appWidth","appHeight","resizeTimeout","isInputFocused","onResize","allowZoom","zoom","devicePixelRatio","innerWidth","innerHeight","setVisualConditionsMacros","orientation","widthFactor","heightFactor","displayScreenThresholds","showBreadcrumbs","XoneApplication","setAppData","setUserInterface","getConfig","config","path","debugging","sourcePath","IniciarApp","sWA","FileManager","apiUrl","clientId","clientSecret","idsUrl","appSize","getAppSize","isScaleFontsize","webFontFactor","getWebFontFactor","setInmutableMacros","getAutoLogon","doLogin","onErrorFunc","paramsObj","search","decodeURIComponent","ignoreEntryPoint","user","launchEntryPoint","getCollection","dataCollection","ExecuteCollAction","getLoginCollectionName","routeTo","render","createWebHashHistory","process","routes","component","createRouter","group","keepAspectRatio","framebox","xone-name","onScroll","$event","onMouseDown","onDragOver","isDisableVisible","rows","row","iRow","xone-parent","column","iColumn","controlHeight","controlGrowHeight","controlWidth","controlGrowWidth","isActive","viewMode","model","attrKey","isInput","inputType","checkboxSize","isButton","isImage","isWeb","isVideo","isBreadcrumb","isDisabled","locked","isLinked","floatingTooltip","multiLine","onInput","propValue","maxlength","fixedText","onChange","onFocusChanged","onKeyPress","step","numberStep","onLinkedSearchButtonClick","onAttachButtonClick","isLinkedSearchVisible","onSelectedItem","linkedSearchPosition","tooltip","for","isMouseOnInput","onHide","filterModel","onBlur","onFilterSelected","filteredRows","rowItem","iRows","iColumns","textAlign","emits","emit","mapColValues","getFieldPropertyValue","linkedTo","mapCol","mapFld","mapFilter","mapLinkFilter","setPosition","mapValue","xoneDataCollection","getControlProps","propAttributes","getPropAttributes","getLayout","setLinkFilter","setFilter","startBrowse","getCurrentItem","moveNext","divElement","rightPosition","topPosition","maxWidthPosition","heightPosition","elementHasScroll","scrollWidth","client","scrollHeight","clientHeight","imgChecked","imgUnchecked","onCheckboxCheckedChange","isRadio","radioGroup","objectIndex","prop","checked","onRadioCheckedChange","checkboxElement","radioElement","recordIndex","autosave","save","showSnackbar","changeModelValue","querySelectorAll","imageSize","getScaledSize","imgWidth","imgHeight","backgroundImageChecked","backgroundImageUnchecked","backgroundImageCheckedDisabled","imgCheckedDisabled","backgroundImageUncheckedDisabled","imgUncheckedDisabled","changeOpacity","Checkbox","LinkedSearchInline","linkedField","onChangeModelValue","textAreaElement","fitGrowTextArea","toXoneDate","atob","keyPressed","isExecutingAction","onEditorAction","executeMethod","executeBindedEvent","oldValue","btoa","onTextChanged","DoRunScriptAsync","newText","oldText","isFocused","floatingTooltipTransform","linkedSearchElement","calculateLinkedSearchButtonPosition","pickFile","allowedExtensions","onLabelClick","readOnly","draggable","alt","clearCanvas","imgElement","signaturePad","signElement","isGridView","isSlideView","isRouterView","isMapView","fitHeight","isCalendarView","isPictureMapView","isChartView","isChartBar","isChartPie","contentsRowsInfo","rowInfo","galleryColumns","isExpanView","rowsLength","isLoading","isRowLoaded","visibilityBit","onContentsRowClick","onDataObjectChange","expanControl","isExpanded","contents","containerAttributes","getContainerAttributes","fixed","drawerOrientation","selectedItem","isOnContentsRowClickExecuting","ExecuteNode","onExpanItemSelected","doLoadAsync","isFirstLoad","recordId","setRecordId","ID","loadedRowsLength","setCloneOnPush","getLayoutAsync","expanLayout","setLayout","colorView","cellEvenColor","cellOddColor","cellSelectedBgColor","setRefresh","m_xmlNode","backgroundColor","showLayers","onMouseWheel","showMarkerButton","onMarkerButtonClick","keyLayers","layer","checkIsLayerSelected","changeMapLayer","apiThunderforest","getMapLayers","L","streets","tileLayer","maxZoom","subdomains","hybrid","terrain","satellite","standard","attribution","bright","dark","worldImagery","noLabel","humanitary","smooth","outdoors","openTopoMap","cyclist","transport","neighbourhood","carto","watercolor","minZoom","ext","worldTopoMap","terrainLabels","onlyLabel","darkMatterOnlyLabels","positronOnlyLabels","cartoDVoyagerOnlyLabels","replaceLayerName","getDefaultMapLayer","loadLeaflet","lCssElement","lJsElement","lrmCssElement","lrmJsElement","Icon","Default","imagePath","normalizeWebColor","HEX2RGB","hex","shorthandRegex","g","b","exec","Color","Math","round","clamp","angle","PI","sin","cos","multiply","matrix","newR","newG","newB","linear","slope","intercept","h","max","min","Solver","baseColor","targetHSL","hsl","reusedColor","solveNarrow","solveWide","sort","a","loss","css","A","best","Infinity","initial","spsa","wide","A1","iters","gamma","bestLoss","deltas","highArgs","lowArgs","k","ck","pow","random","lossDiff","ak","fix","idx","filters","invert","sepia","saturate","hueRotate","brightness","contrast","colorHSL","abs","fmt","multiplier","currentMapTileLayer","mapLayers","markers","polyLines","polygons","Set","drawLine","lineStyle","points","LatLng","dashArray","firstpolyline","Polyline","weight","smoothFactor","addTo","drawArea","fillcolor","pattern","dataCoords","polygon","fillColor","drawRoute","Args","Routing","waypoints","latLng","sourceLatitude","sourceLongitude","destinationLatitude","destinationLongitude","routeWhileDragging","showAlternatives","clearLines","removeLayer","clearAreas","loadMap","getContents","loadAll","rowDataObject","drawMarkers","withFitBounds","bounds","LATITUD","LONGITUD","iconUrl","shadowUrl","iconSize","iconAnchor","marker","on","fitBounds","clearLayers","_layers","clearRoutes","removeControl","currentMapLayerName","_zoom","setZoom","setView","clearArea","clearAllAreas","clearLine","clearAllLines","clearAllRoutes","clearRoute","removeArea","area","zoomTo","flyTo","setMapType","zoomToBounds","flyToBounds","weekDays","day","dateItems","onDateSelected","pad","number","getFullYear","getMonth","getDate","monthDays","firstWeekDayOfMonth","getDay","lastWeekDayOfMonth","previusMonth","year","month","nextMonth","isSameDate","date","weekStart","region","regionSat","match","regionSun","languageSat","languageSun","weekStartLocale","parts","addDays","days","setDate","getWeekDays","isLongFormat","weekdayDateMap","weekday","dateFrom","dateTo","calendarElement","contentsItems","changeMonth","executeCollAction","currentDate","moveTo","setVariables","drawMonth","loadDataAsync","swipeHandler","SwipeHandler","init","previusMonthDate","previusMonthDay","isCurrentMonth","weekEnd","nextMonthDay","nextMonthDate","currentContentsFilter","getFilter","contentsItem","contentsDate","itemIndex","currentMonth","weekdaysLongname","hexToRgbA","test","loadChart","ctx","refreshTimeOut","myChart","updateChartTimeout","gridLines","refreshTime","labels","datasets","categoryNames","categoryTitles","categoryColors","barThickness","chartSerieTitle","dataset","label","borderColor","borderWidth","createChart","update","Chart","responsive","maintainAspectRatio","legend","elements","point","radius","scales","xAxes","stacked","yAxes","ticks","beginAtZero","animation","getElementById","updateChart","serieColor","chartName","chartTitle","cutoutPercentage","modifyZoom","hideRange","orient","containerElementSize","scaledX","scaledY","onItemSelected","contentsImage","calculateContainerAspectRatioSize","scaleFactorX","scaleFactorY","contentsElement","scrollTo","scrollLeft","scrollTop","behavior","dragAllowedTimeout","picturemapElement","isGrabbing","mouseDownHandler","clientX","clientY","clearInterval","mouseMoveHandler","mouseUpHandler","buttons","dx","dy","mouseLeaveHandler","mouseWheel","deltaY","xCoord","yCoord","iconOff","iconOn","iconWidth","iconHeigth","iconText","iconTextColor","iconMarkColor","iconTouchColor","contentsImgSize","imgSize","scaleFactor","scaleItems","dataValue","valueOff","imgWidthOff","imgHeightOff","valueOn","imgWidthOn","imgHeightOn","rgb","solver","solve","filterOff","warn","filterOn","zIndex","getItemFactorX","zoomFactor","scaledWidth","getItemFactorY","scaledHeight","scaleItem","scaledImgWidthOff","scaledImgHeightOff","selected","ContentsRow","ChartBar","Calendar","ChartPie","PictureMap","isSpecial","offsetTop","observerHeight","ResizeObserver","observe","disconnect","contentsLoaderHelper","rowsPerPage","setPaginationSize","paginationSize","getIsLoading","bindOnScrollEvent","firstGroup","lastRefreshActionId","refreshActionId","loadRows","loadRowsInfo","isBeforeEditExecuted","getContentsRowsInfo","scrollBy","scrollToTop","scrollToBottom","isInGroup","gridTemplateColumns","pointerEvents","autoslideInterval","currentSlideIndex","autoslideDelay","setInterval","getRowsLength","offsetLeft","scrollTimeout","onScrollEvent","isUrl","srcdoc","breadcrumbFontSize","onBreadcrumbClick","query","getBreadcrumbColor","breadcrumbSelectedForeColor","breadcrumbForeColor","getBreadcrumbFontSize","breadcrumbSelectedFontSize","ButtonProp","InputProp","Input","ImageProp","Contents","WebProp","Web","VideoProp","Video","Breadcrumb","propElement","attributesModel","watchAttributes","disableVisible","evalFormula","calculateImgSize","imgPathSize","finalImgSize","margins","floatingTop","getScaledPosition","floating","floatingLeft","disableEdit","postOnchange","mouseEnter","mouseLeave","mouseDown","mouseMove","isDesignerPropSelected","borderDesignSelected","borderDesignOver","getBorderPropOver","Column","newObj","clone","doModelReactive","contentsRowbreadcrumbId","newXoneView","validNodes","rowsArr","controlAttributes","newLine","clearEmptyContainers","parent","isMouseOver","setIsLoaded","containerElement","flexGrow","flexShrink","fixJustifyCenter","align","observerWidth","clientWidth","doFix","justifyContent","getBorderContainerOver","XoneFileManager","http","XMLHttpRequest","send","status","download","XonePDF","clearPDF","_template","lastChild","newWindow","write","_name","container","flexDirection","alignItems","_templateAbsolute","outerHTML","print","_width","_height","elementAbsolute","cloneNode","margin","prepend","font","_font","fontStyle","_fontStyle","alignment","_alignment","fontSize","_fontSize","fontColor","_fontColor","columns","_currentTableNewLine","_currentTableColumns","tableElement","_currentTable","createRow","createColumns","_cellBorder","rowElement","_divs","columnElement","lineSize","background","html","minWidth","widths","cellBorder","borderStyle","borderTop","borderRight","borderBottom","borderLeft","firstChild","childNodes","setCellBorder","createText","createImage","imageElement","textElement","marginLeft","checkElement","innerText","addText","fontWeight","clipboard","XoneClipboard","readText","writeText","XoneSystemSettings","deviceIdCount","deviceId0","androidId","XoneDebugTools","createObject","$http","dataFunction","errorFunction","_","fetchOptions","post","XOneOCR","fingerprintManager","replica","Animation","systemSettings","xoneSystemSettings","createBookmark","browser","bookmarks","dragAndDrop","setIsDesigner","createApp","App","use","Container","mount","serviceWorker","register","obsolete","replaceState","pushState","viewportmeta","content","XoneApp","HTMLElement","customElements","define","ch","strSQL","bDefault","equalsIgnoreCase","text1","text2","XONE_EMPTY_STRING","XONE_METHOD_DEFAULT","callbackFunction","isSwipeable","touchobj","changedTouches","dist","startX","pageX","startY","pageY","startTime","elapsedTime","_allowedTime","_xThreshhold","_yThreshhold","touchElement","touchStart","passive","touchEnd","FileManagerOnline","xmlhttp","setRequestHeader","readyState","responseText","encoding","st","arrayBuffer","buffer","decoder","TextDecoder","decode","readFileSync","ContentsLoaderHelper","elementName","rowsPerPageByObjectId","checkLoadScroll","reset","computed","isLoadingRowsInfo","lockLoadRowsInfo","mapDivElements","allRecordsLoaded","isCheckingRowsVisibility","timeoutOnScroll","checkScrollElementsVisibility","checkLoadRowsInfo","scrollElementsVisibilityTimeout","outerHeight","isFluidLoad","fluidLoad","isLock","rowsPerLoad","loadByObjectId","newRowsNumber","end","resetLoadRows","iData","isLoaded","hasScroll","some","eJoinType","AliasName","m_strField","m_strAlias","Alias","m_bUseParrentisisAtJoins","m_strTableName","m_strTableAlias","m_bUsePrefix","m_joinType","eLeftJoin","m_secondTable","m_bTranslateJoins","setTranslateJoins","m_strJoinCondition","strTmp","TranslatedJoinTableName","openParent","closeParent","getTableName","getJoinCondition","getAlias","strJoin","eRightJoin","eInnerJoin","strOut","getTranslatedJoinConditions","PARSER_KEYWORD","PARSER_COMPLETE","PARSER_DELETE_EXPECTING_FROM","PARSER_DELETE_EXPECTING_TABLE","PARSER_DELETE_EXPECTING_WHERE","PARSER_DELETE_WHERE","PARSER_INSERT_EXPECTING_INTO","PARSER_INSERT_EXPECTING_TABLE","PARSER_INSERT_EXPECTING_FIELDS_BEGIN","PARSER_INSERT_EXPECTING_FIELD_NAME","PARSER_INSERT_EXPECTING_FIELD_SEPARATOR","PARSER_INSERT_EXPECTING_VALUES","PARSER_INSERT_EXPECTING_VALUES_BEGIN","PARSER_INSERT_EXPECTING_VALUE","PARSER_INSERT_EXPECTING_VALUE_SEPARATOR","PARSER_UPDATE_EXPECTING_TABLE","PARSER_UPDATE_EXPECTING_SET","PARSER_UPDATE_EXPECTING_FIELD_NAME","PARSER_UPDATE_EXPECTING_EQUAL_SIGN","PARSER_UPDATE_EXPECTING_FIELD_VALUE","PARSER_UPDATE_EXPECTING_SEPARATOR","PARSER_UPDATE_EXPECTING_WHERE","PARSER_UPDATE_WHERE","Messages","m_strReservedWords","m_bSurroundUnions","SqlParserFromParser","m_strRowIdFieldName","m_sqlType","SQLTYPE_UNKNOWN","m_lstFields","m_lstFieldsType","m_lstSelectFields","m_messages","getMessageHolder","GetRowIdFieldName","m_strTable","GetTableName","m_strWhere","entrySet","entry","m_strSentence","GetSentence","strRID","m_strRowId","removeChars","m_bIsUnionQuery","Force","SetFieldValue","m_nParserIndex","m_strCurrentToken","Field","strToken","GetNextToken","bStringToken","GetMessage","XoneMessageKeys","SYS_MSG_SQL_SYNTAXERROR","IsSeparator","SYS_MSG_SQL_INCOMPLETETOKEN","nParOpen","GetNextSpacedToken","compareTo","m_status","strTmpToken","PeekNextSpacedToken","IsReservedWord","Token","compareToIgnoreCase","nTmpParserIndex","PeekNextToken","Index","cStringToken","bNormalize","strSrcFld","strDstFld","strVal","EMPTY","GetRowId","SetWhereSentence","lstFields","lstValues","GetNextValueToken","strField","NULL_VALUE","bRowIdField","bNextValueIsRowId","strKeyword","bIsPar","bParseOk","nOpenPars","BeginParse","ParseInsertStatement","ParseUpdateStatement","ParserDeleteStatement","SQLTYPE_ERROR","ParseSelectStatement","strSql","strFields","strValues","nStep","nOpenPar","nInitPar","bAddTable","bField","bAlias","bTable","strAlias","strTable","nTableStep","nJoinOpenPar","nTableOpenPar","strPrevToken","bOpenJoinFormula","jt","nLen","GetNextSqlToken","getIsUnionQuery","AddUnionQuery","AddField","m_bDistinct","AddTable","m_strGroupBy","m_strOrderBy","m_strHaving","m_lstUnionQueries","newQuery","SetSqlType","CopyData","Clear","bTextStart","nTokIdxTo","RegenerateInsert","RegenerateDelete","RegenerateUpdate","RegenerateSelect","strQuery","RegenerateUnionQuery","m_tableFrom","GetFieldList","getSecondTable","RegenerateSql","FieldValue","FieldType","PriorityMap","nRemaining","IsFormula","GetFieldValue","table","getQueryFields","field","getTableFrom","CopyTable","getDistinct","getGroupBySentence","getOrderBySentence","getHavingSentence","Table","next","getActualName","getJoinType","TableAlias","JoinCondition","JoinType","tbl","bPrefix","setSecondTable","setJoinCondition","setUsePrefix","ClearUnions","FieldAlias","f","strOpers","clean","ParseStates","m_pointer","m_lines","nLine","sLine","sSelectorName","m_strName","m_bundleRules","sRuleKey","sRuleValue","sName","is","sEncoding","bStrictMode","m_bStrictMode","line","br","startPos","readLine","strLine","parseState","ExpectingSelector","states","strSelector","strRuleKey","strRuleValue","cssRule","nPosition","nLineLength","sCurrentCharacter","XoneCssParser","m_strValidChars","GettingSelector","ExpectingCommentOpenComplete","GettingComment","ExpectingCommentClose","pop","ExpectingOpenBrace","ExpectingRuleKey","GettingRuleKey","moveToNextToken","ExpectingRuleValue","GettingRuleValue","addRule","sNextCharacter","sbMessage","PARCELABLE_VERSION","BUNDLE_KEY_DATA","BUNDLE_KEY_CRC","setTime","m_date","ALL_STYLES","AM","AM_PM","APRIL","AUGUST","DATE","DAY_OF_WEEK","DAY_OF_WEEK_IN_MONTH","DAY_OF_YEAR","DECEMBER","DST_OFFSET","ERA","FEBRUARY","FIELD_COUNT","FRIDAY","JANUARY","JULY","JUNE","LONG","LONG_FORMAT","LONG_STANDALONE","MARCH","MAY","MILLISECOND","MONDAY","NARROW_FORMAT","NARROW_STANDALONE","NOVEMBER","OCTOBER","PM","SATURDAY","SEPTEMBER","SHORT","SHORT_FORMAT","SHORT_STANDALONE","SUNDAY","THURSDAY","TUESDAY","UNDECIMBER","WEDNESDAY","WEEK_OF_MONTH","WEEK_OF_YEAR","ZONE_OFFSET","fs","fileManagerOnline","FileLoaderBrowser","bIsCryptoFile","existsSync","groups","fixedTop","noTab","tabs","onGroupsHeaderHeightChanged","groupAnimation","contentElementHeight","groupsHeaderHeight","drawers","showLeft","showRight","closeDrawers","drawerLeft","drawerRight","fixedBottom","changeGroup","groupsElement","getCollGroups","xoneAttributesHandler","showGroup","isToggle","isHide","tabGroup","scroll","leftDrawerGroup","rightDrawerGroup","slideGroup","currentGroup","groupIndex","newGroup","getDrawersWidth","drawerLeftElement","drawerRightElement","setDrawersWidth","leftWidth","rightWidth","watchEffect","currentWindowWidth","watchContentElementSize","contentsElementHeight","fixedTopElement","fixedBottomElement","resize","resizeContentElementSize","onMounted","watch","inject","Groups","getDataObject","hideGroup","toggleGroup","contentElement","groupSwipe","PREFIX_MODIFIED","CONNSTRING_MODIFIED","ROWIDFIELD_MODIFIED","SQLFIELD_MODIFIED","ROWIDLEN_MODIFIED","OPERIDLEN_MODIFIED","DATEMASK_MODIFIED","TABLEQUOTE_MODIFIED","FIELDQUOTE_MODIFIED","SUBQUERIES_MODIFIED","guid","TypeError","Guid","isGuid","other","validator","gen","out","RegExp","m_strPrefix","m_strTableQuoteOpen","m_strTableQuoteClose","m_strFieldQuoteOpen","m_strFieldQuoteClose","MAIN_CONNECTION","m_owner","m_developer","m_strSqlFieldName","m_nOperIdLength","m_nRowIdLength","m_lstInitStrings","m_extendedProperties","m_nFlags","m_xmlNodeData","m_bSupportsTransactions","m_strPlatform","m_platform","SelectSingleNode","GetNodeValue","setPrefix","setTableQuoteOpen","setTableQuoteClose","setFieldQuoteOpen","setFieldQuoteClose","setDatemask","m_bIsReplicating","m_nMid","m_nDbId","m_strDatemask","m_bSubqueries","RetryCount","ChkGroup","Prefiltered","mn","ent","usr","getCompany","GetObjectIdString","getEntIdColl","getEntIdLevel","getEntIdOwner","getCurrency","getUser","getUserIdColl","GenerateRowId","getDevelopedPrefix","DevelopObjectValue","ZeroCalendarTime","ObjectName","str1","strPrefix","Prefix","ExecuteParsedSql","Platform","FileLoaderNodeJS","pushToken","getFirebaseConfig","worker","postMessage","initFirebase","firebaseConfig","vapidKey","firebase","initializeApp","messaging","getToken","firebaseToken","onPushRegisteredFunctions","onPushRegisteredFunction","onMessage","payload","notification_id","notification_title","notification_message","onClickFunction","showNotification","onPushReceivedFunctions","onPushReceivedFunction","onPushRegistrationFailureFunctions","registerPush","onPushRegistrationFailureFunction","setOnPushRegisteredFunction","setOnPushRegistrationFailureFunction","setOnPushReceivedFunction","propName","getObjectIndex","isReactive","getCloneOnPush","getHashId","createIfNull","getParent","getOwnerObject","exit","logout","pushValueAndExit","arg","openEditViewAndExit","_breadcrumbs","_dataObjectsMap","keepLayout","cleardataObjectsMap","reverse","xoneHashId","objectType","addObject","CreateObject","getProperties","addItem","addDataObject","expiration","expires","toUTCString","cookie","cookies","seen","WeakSet","_attributes","AttrName","sAttrName","attrName","XmlUtils","getNodeAttr","defaultValue","getChildNodes","MACRO_DEFAULT","XoneGenericException","extra","m_code","m_extra","IllegalStateException","m_sentence","sAppName","sExecutionPath","m_clientId","m_clientSecret","m_url","_isScaleFontsize","_webFontFactor","setIsScaleFontsize","setWebFontFactor","XoneAttributesHandler","htmlElement","maxHeight","maxWidth","isLine","num","convertUnits","tPadding","rPadding","bPadding","lPadding","tabTPadding","tabRPadding","tabBPadding","tabLPadding","tMargin","rMargin","bMargin","lMargin","textBorder","textBorderTop","textBorderRight","textBorderBottom","textBorderLeft","attributeSize","containerSize","u","mask","img","getContainerAlign","getPropAlign","bgColor","textForeColor","foreColor","borderCornerRadius","borders","getBorders","getFontSize","buttonOption","calendarViewMode","cellBgColor","cellBorderColor","cellForeColor","cellOtherMonthBgColor","cellSelectedBorderColor","cellSelectedForeColor","elevation","fieldSize","getFloating","fontBold","getImage","checkType","isVisible","isNodeVisible","labelAlign","getLabelAlign","labelBox","labelwidth","lines","getMargins","minHeight","getPaddings","showInline","showInlineKeyboard","textBgColor","textBgColorDisabled","textFontSize","textForeColorDisabled","tooltipColor","tooltipForeColor","getPropType","wrap","getAnimationIn","scrollOrientation","tabBgColor","tabFontSize","tabForecolor","tabPaddings","getTabPaddings","tabSelectedForecolor","lowerCaseMethod","formula","dataModel","fFunction","_mapFormulaFunctions","operators","replacedOperators","replaceOperator","operator","oper","order","stFinal","resolveAttr","foreignKey","newAttrs","dMKey","resolveMapModels","attrValue","objView","bindedEvents","fieldName","eventName","objItem","toLocaleLowerCase","nodes","setPrototypeOf","nodeName","bFound","areEquals","attrExists","defaultAttr","defaultAttrValue","events","serialVersionUID","m_children","m_childrenNodes","m_parent","m_attrs","addChild","lstEvents","COLL_COLL","addFastChild","AddPropToRoot","PROP_ATTR_GROUP","PROP_NAME","PROP_ATTR_FRAME","PROP_ATTR_CONTENTNAME","formatKey","m_cachePropNodes","m_cacheContainersNodes","m_cacheOtherNodes","m_strText","mergeObj","nodename","attrname","child","obj1","obj2","attr1","findNodeAttr","attr2","nums","getChildren","curobj","isEquNode","setValue","isequ","mergeAttrs","hasChildNodes","nums2","childs2","obj1child","findSameChild","sValue","deleteAttribute","cacheNames","sKey","m_allChildren","addNode","NewChild","Before","addToCache","After","Original","NewNode","nIndex","Remove","objResult","AttrValue","Exist","SelectNodesInt3","CheckCacheConditions","SelectNodesHashExist","list","strAttr","SelectNodesHash2","nodeList","SelectNodesHash4","SelectSingleNodeInt1","SelectSingleNodeIntExist","SelectSingleNodeInt3","CheckIfCacheExists","SelectSingleNodeHash4","Exists","SelectSingleNodeHashExist","nodesName","userAgent","OwnerCollection","m_nSetValDepth","m_model","UNIQUE_ID","m_bIsLoading","m_bNewObject","m_lstNormalProperties","m_lstOldValues","m_lstDirtyProperties","m_lstXlatProperties","m_lstDevelopedXlatProperties","m_bPropagateDirty","m_lstLinkItems","m_lstVariables","m_lstContents","m_lstDevelopingFields","getOwnerApp","m_lstCachedAttributes","m_lstOverridenFieldPropertyValueAttributes","mMapSysOrder","m_reactLayout","m_formulaLocker","addObjectProperties","v","_this","getNormalValue","getMultipleKey","getIdFieldName","addSingleProperty","getNodeList","m_bDirty","rule","CreateNew","m_bIsCreating","getSpecial","CollPropertyValue","FieldExists","m_bUseTimestamp","m_bForceCurrChanges","m_bXlatExist","nCount","createNode","getNode","getParentCollection","bAlways","EvaluateNodeRules","ExecuteNodeAction","m_bDependent","sb","SYS_MSG_GENERALFAIL","sExtraMessage","concat","Arguments","ExecuteNodeActions","Node","Scopes","Action","DoSetVal","Parameters","scopesList","prepareContext","scripts","RunScriptAsync","funcNames","slang","argsName","argsValue","strType","vl","GetNodeAttr","SYS_MSG_OBJ_SETVALFAIL","FieldPropertyValue","GetValueFromString","unlock","MACRO_TAG","properties","nd","PROP_ATTR_INDEX","isIndexed","ClearContents","getColumnCount","strFieldName","resolveFieldName","getColumnName","objVal","getTypeFromXml","PropType","LoadObjectContents","getStringKey","m_strObjectId","m_lObjectId","m_bReadOnly","GetMultipleKeyString","setDirty","OnLoad","ContentsName","cnt","ContentsFromProp","RegisterError","nobj","getError","getNumber","Load","setFull","actions","OnChange","loadNode","sDetails","onchangeNode","strOldChgField","m_strChangeField","cnode","SearchCollName","strCollName","objId","strId","m_bContentsLoaded","LoadContents","FunctionName","exist","contNode","appColl","SYS_MSG_OBJ_LOADCONTENTFAIL_01","newColl","CreateClone","SYS_MSG_OBJ_LOADCONTENTFAIL_02","AddContentsColl","setSort","sMessage","setOwnerObject","getObjectName","bRemoveQuotes","ReplaceFieldValueMacros","PrepareSqlString","GetClientIdColl","owner","IsInt","SuppressQuotes","SYS_MSG_OBJ_REPLFLDVALUEMACROFAIL","strRpl","bEvaluate","sVal","Develop","m_bIsCurrentItem","bOldVal","GetRawPropertyValue","SafeToLong","ClearAllVariables","getKeyFields","PutItem","strProtect","bMask","bUpdate","bForce","bUpdated","m_bChangesMade","PutBitmappedProperty","AdjustDate","AdjustMonthYear","FormatAcc","toUpperCase","FormatCCC","AdjustAccNumber","ParseDateString","currentContext","ProtectString","m_bIsCloning","setNormalValue","bCheck","EqualObj","m_dtTimeStamp","PreprocessValue","SetPropertyValue","RestoreMappedFields","SYS_MSG_OBJ_PUTITEMFAIL","reason","postNewValue","GetBitmappedProperty","GetFormulaProperty","IsFormulaProperty","IsBitProperty","v1","v2","PropertyTitle","GetNormalProperty","str2","getDeferredLoad","GetCurrentItemValue","strLinkedTo","getConnection","IsOuterJoinSupported","AdjustNullValue","ProcessValue","linked","bit","PROP_ATTR_TITLE","strLinkedField","DevelopXlatProperties","SYS_MSG_OBJ_PROCESSVALFAIL","GetWeekDayName","UnprotectString","IsFloat","dbl","ownerCollection","GetItem","getRowIdFieldName","visibility","UITransform","ItemName","NodePropertyValue","QualifyField","MapField","DatabaseField","strFieldFrom","strFieldTo","fieldValue","mapfld","SYS_MSG_OBJ_RESTOREMAPFLDFAIL_03","getData","setUseObjectsInRestore","mapcolValues","GetPropertyValue","strSrch","bSearchDB","bXlatExist","RestoreMapColValues","vl2","nullObj","bRetain","bClearColl","DoRestoreMapValues","strtmp","ownercoll","getUseObjectsInRestore","getObject","GetResultSet","SYS_MSG_OBJ_RESTOREMAPFLDFAIL_01","RestoreTranslatedValues","getFull","m_bIsRestoring","SYS_MSG_OBJ_RESTOREMAPFLDFAIL_02","SYS_MSG_OBJ_NOXLATTARGET","SYS_MSG_OBJ_XLATMISSINGFLD","TargetField","strCnt","strCmpType","bUseThis","xlrNode","contList","xrnode","propNode","GetNode","vl1","getClass","StringValue","UseDatemask","strSysDateMask","strDay","strMonth","strYear","nFormat","EvaluateAllMacros","strDatemask","getDatemask","strComponents","getSysDatemask","setLayoutFieldPropertyValue","propiedad","atributo","addToEvaluated","addEvaluatedAttributesList","postNewFieldProperty","sID","valor","sVariableName","getVariable","SafeGetVariableList","setVariable","bNew","IsNew","jsonObject","loadFromJsonObject","sPropertyName","propertyValue","contentCollection","loadFromJsonArray","collection","jsonArray","itemDataObject","Evento","Funcion","indice","getFixedUpdateObjectName","getFixedObjectName","strCmd","strChkID","strPK","strRowID","strIDString","lPossibleKey","bNeedRowID","bTransacted","conn","bNoId","sentence","SetTableName","bStringKey","bMultipleKey","bIncremental","HasEscapeChars","EscapeString","reverseResolveFieldName","PROP_ATTR_EMBED","SetFieldType","getId","addkey","getIsDebugging","isDebugMode","DebugLog","TAG_DATABASE_LOG","ExecuteSqlStringAsync","getRowId","getIsReplicating","IsUniqueRowId","idval","writeConsoleString","bReplicate","supportsTransactions","beginTrans","acceptsParsedSentences","ExecuteParsedSqlAsync","rollBack","save_result","pushValue","retrievesAutonumericKeys","sRowIDQuoted","RetrieveNumericKey","e2","CreateRecordset","ExecuteSqlString","SYS_MSG_OBJ_SAVEFAIL","getIdFieldType","SYS_MSG_OBJ_SAVEFAIL_02","bResult","se","bDelete","bDeleteActions","m_bFollowRules","CanDelete","ExecuteDeleteActions","SYS_MSG_OBJ_DELETEOBJFAIL_01","sRowidName","SYS_MSG_OBJ_DELETEOBJFAIL_02","deleteNode","EvaluateRule","SYS_MSG_OBJ_CANNOTDELETE","AfterActions","PARSE_NODE_NAME","PARSE_EXPECTING_OPEN_PAR","PARSE_PARAM_VALUE","PARSE_EXPECTING_COMMA","m_parsed","getResolvedName","floor","check","opera","XoneError","m_description","m_failedSql","failedSql","SYS_MSG_DATASRCFAIL","SYS_MSG_FILENOTFOUND","SYS_MSG_FILENOTFOUND_01","SYS_MSG_FORMULAERROR","SYS_MSG_COLL_CIRCULARCOLLDEF","SYS_MSG_COLL_UNDEFINEDFIELD","SYS_MSG_COLL_NONAME","SYS_MSG_COLL_CANNOTCREATEOBJ","SYS_MSG_COLL_SQLPARSEERROR","SYS_MSG_COLL_SQLPARSEERROR_01","SYS_MSG_COLL_CANNOTQUALIFY","SYS_MSG_COLL_XPROPVALUEFAIL","SYS_MSG_COLL_PREPARESQLFAIL","SYS_MSG_COLL_COLLCONNOPENERR","SYS_MSG_COLL_LOADALLFAIL_02","SYS_MSG_COLL_LOADALLFAIL_03","SYS_MSG_COLL_CREATECLONEFAIL","SYS_MSG_COLL_GETROWCOUNTFAIL","SYS_MSG_COLL_EXECUTENODEFAIL","SYS_MSG_COLL_EMBEDFILTERFAIL","SYS_MSG_COLL_LOOKUPOBJFAIL_02","SYS_MSG_COLL_LOOKUPOBJFAIL_03","SYS_MSG_COLL_EVALMACROFAIL_01","SYS_MSG_COLL_EVALMACROFAIL_02","SYS_MSG_COLL_FIELDEXISTSFAIL","SYS_MSG_COLL_LOADCURRITEMFAIL_01","SYS_MSG_OBJ_GENERATEFLDFAIL","SYS_MSG_OBJ_CREATEFAIL_01","SYS_MSG_OBJ_CREATEFAIL_02","SYS_MSG_OBJ_CREATEFAIL_03","SYS_MSG_OBJ_COPYPROPFAIL","SYS_MSG_OBJ_LINKFAIL_01","SYS_MSG_OBJ_LINKFAIL_02","SYS_MSG_OBJ_GETNORMALPROPFAIL","SYS_MSG_OBJ_EXECUTEMETHODFAIL_01","SYS_MSG_OBJ_EXECUTEMETHODFAIL_02","SYS_MSG_OBJ_GETFORMULAPROPFAIL_01","SYS_MSG_OBJ_GETFORMULAPROPFAIL_02","SYS_MSG_OBJ_GETEXTFORMULAFAIL","SYS_MSG_OBJ_CHKUNIQFLDFAIL_01","SYS_MSG_OBJ_CHKUNIQFLDFAIL_02","SYS_MSG_OBJ_UPDDEPTHFAIL_01","SYS_MSG_OBJ_UPDDEPTHFAIL_02","SYS_MSG_OBJ_UPDATECNTFAIL","SYS_MSG_OBJ_DOLINKFAIL","SYS_MSG_OBJ_SETFLDVALFAIL","SYS_MSG_OBJ_MAPVALFAIL","SYS_MSG_OBJ_EXECCOMPSQLFAIL_01","SYS_MSG_OBJ_EXECCOMPSQLFAIL_02","SYS_MSG_OBJ_RULEFAIL","SYS_MSG_OBJ_RULEFAIL_02","SYS_MSG_OBJ_FAILIFNULLFAIL","SYS_MSG_OBJ_EOFRULEFAIL","SYS_MSG_OBJ_COMPARENUMBERFAIL","SYS_MSG_OBJ_INCORRECTVALUE","SYS_MSG_CONN_CONNFACTORY","SYS_MSG_CONN_LOADERROR","SYS_MSG_CONN_RPLLOADERROR","SYS_MSG_CONN_INCORRECVALUE","SYS_MSG_CONN_INNERCMDNULL","SYS_MSG_CONN_INVALIDACTION","SYS_MSG_CONN_CMDNOTINITIALIZED","SYS_MSG_CONN_CONNNOTINITIALIZED","SYS_MSG_CONN_CLIENTFILENOTFOUND","SYS_MSG_CONN_SQLSYNTAXERROR","SYS_MSG_CONN_SQLPARSEERROR","SYS_MSG_CONN_INVALIDPARAMVAL","SYS_MSG_CONN_QUEUEINSERTERROR_01","SYS_MSG_CONN_QUEUEINSERTERROR_02","SYS_MSG_CONN_INCORRECTPARAM_01","SYS_MSG_CONN_INCORRECTPARAM_02","SYS_MSG_CONN_INVALIDCONNSTRING","SYS_MSG_APP_CANNOTCREATEMAINCONN","SYS_MSG_APP_OPENCONNERROR","SYS_MSG_APP_LOGONNOUSERCOLL","SYS_MSG_APP_LOGONUSERNOTFOUND","SYS_MSG_APP_UNKNOWNSYSMACRO","SYS_MSG_APP_ONLOGONFAILED","SYS_MSG_APP_ENTIDLEVELFAILED_01","SYS_MSG_APP_NOCOMPANYCOLL","SYS_MSG_APP_NOCOMPANY","SYS_MSG_XERR_UNKNOWNMETHOD","SYS_MSG_CTX_STAKUNDERFLOW","SYS_MSG_USR_READONLYFIELD","SYS_MSG_SQL_STRIPFIELDERROR","SYS_MSG_SQL_ADDFIELDERROR","SYS_MSG_SQL_EMPTYBUFFERERROR","SYS_MSG_DBG_LINKDISCONNECTED","SYS_MSG_VBS_BADPARAMCOUNT","MovePtrType","DataSource","getInt","RsReadLong","getString","ownerApp","ownerColl","m_lstMacros","m_parsedMacros","m_ownerApp","m_ownerColl","MacroName","m_evaluatedMacros","toObject","accessString","n2","macroName","MacroValue","parsedAccessString","BrowseData","getParsedAccessString","clearParsedAccessString","DestColl","setMacro","EvalLookupMacro","strLookupMacroName","getLookupMacroName","k1","k2","strMacro","bEval","EvaluateMacro","bIsFilter","PrepareFilter","getCurrentCompany","CreateRecordsetAsync","ReplaceCustomOper","rules","strScope","Base64","encode","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","output","_utf8_encode","charCodeAt","_keyStr","fromCharCode","_utf8_decode","string","utftext","c2","c3","algorithm","encodeBytes","digest","buff","m_strHashType","m_strEncode","UserData","strPwd","strObjPwd","createHash","KeySearch","val1","getAccessString","ResolveFilters","swhere","sSort","getSort","ParseMacros","macros","getMacros","loadall","strPk","Options","nPkType","bStringPk","ObjectList","bNewObject","bLoadOk","bVolatile","objFind","dataColl","m_dataColl","m_lookupObject","m_lstObjectList","m_lstOrderedList","m_lstObjectLru","m_lstFieldMappings","m_currentStart","m_currentLength","m_nCurrentIndex","m_bIsFetchDataRunning","DataColl","m_strConnectionName","aProps","getOwnPropertyNames","bProps","Item","bAdd","m_lstCopyList","old","isEquivalent","removeElement","nThreshold","m_bIsSpecial","m_nBrowseLength","GetObject","GetObjectInt","SearchDb","GetObjectSring","GenerateKeySearch","strKeySearch","GenerateSearchSql","IsSqlPrefiltered","LookupObject","arg2","SearchCriteria","CountAsync","CountRecords","bIsSpecial","PrepareSpecialCollection","LoadCurrentItem","EndBrowse","m_nCurrentRow","ClearCurrentItem","acceptsEmptyQueries","bDebug","m_rs","MoveFirst","AddOpenColl","strAccString","prefiltered","getCount","m_bSingleObject","bUseRaw","ApplyFilters","tmpSql","m_parsedAccessString","ParseAccessString","lparser","clearQueryFields","EmbedFilters","getUnionQueries","m_nMaxRows","m_nBrowseOrder","MovePtr","MOVE_PTR_FIRST","MOVE_PTR_NEXT","MOVE_PTR_LAST","MOVE_PTR_PREV","bClear","m_bHasTopRow","m_pTopRowItem","bHasNext","RemoveOpenColl","getConnectionName","cancelProcesses","getMessage","nOrder","bPrefiltered","bCheckOwner","bParseSQL","bSingleObject","PrepareSort","AddItem","Sort","strFldName","QuoteFieldName","getLinkFilter","GenerateRowID","cd","strSrcFilter","strColl","strUserIDColl","strFilter","getIdColl","getMID","FormatKeyValue","IsLinkedField","strFilters","sql","Filter","uq","strWhere","bGroup","strPrevFilter","setHavingSentence","IncludeWhere","Subquery","DevelopCollFilters","DevelopFilterMacros","keySearch","bIsField","bFieldComplete","bIsTextToken","IsClosingToken","strInvalid","IsNotFieldName","GetQualifyCache","BitProps","FormulaProps","strQualifier","queryFields","bReturn","m_pCurrentItem","m_bDeferredLoad","EOF","setIsCurrentItem","xmlNode","strNodeName","parentList","insert","source","m_version","m_strPk","m_nPkType","m_bLocked","m_macrosEvaluator","m_lstKeyFields","m_lstFormulaProps","m_lstBitProps","m_cachePlatformNodes","m_browserData","xprop","GetCollPropValueCache","getPlatform","platNode","CheckIfEvaluated","strAttrVal","hasStylesheets","strClass","FindStylesheetByClassName","clsArr","cls","getRuleValue","strParentCollection","strMsg","getHierarchyXml","merge","BaseNode","sbCacheTag","NodePropertyValueBase","PLATFORM_NAME","GroupId","GroupPropertyValue","ncache","GetCollPropUndefinedValues","getDbmsTag","strPlatform","ee","xl","xn","LoadConnection","parentCollection","ExtractConnections","TAG_FRAMEWORK","bLoadLayouts","bisIndexed","bObjLoadAll","bDeferredLoad","getSubqueries","m_strLinkFilter","m_strSort","strAccessString","strProgId","strClassName","getFirstParentCollection","nMaxRows","strObjectName","strUpdateObject","bHasXlatProps","lst","GetLocalObject","UseFilters","findObject","isUniqueRowID","FixObjectName","AccessString","getMacro","initialize","addToColl","GetClassName","CheckClassName","OnCreate","m_bUseObjectsInRestore","strProp","getText","bButton","ObjectIndex","sTypeName","XoneDataCollection","PROP_TYPE_STRING","PROP_TYPE_INTEGER","PROP_TYPE_DATE","PROP_TYPE_RESULTSET","sTypeFirstLetter","PROP_TYPE_DOUBLE","ClearCollection","m_bIsClearing","m_bFull","m_strFilter","m_pOwnerObject","CopyMacros","CopyVariables","loadAllAsync","MoveNext","isFull","browseLength","ActionName","doRunScript","scope","strScript","strLang","strFunctionName","aScripts","aFunctionsName","xs","getDefaultLanguage","GetParams","GenerateFunctionName","FunctionParams","WrapGetItem","setFollowRules","deleteObject","removeItem","CheckNullParameters","CheckIncorrectParamRange","jsParams","loadFromJson","setAppPath","mapPaths","getImagePath","initialPath","checkNumber","mapPathName","finalPath","getImagePathAndSize","self","ui","selfDataColl","__SCRIPT_WRAPPER","appDataVal","uiVal","selfVal","functionString","eval","__SCRIPT_WRAPPERASYNC","selfDataCollVal","GetPosGPS","tipo","auxcollobj","latitud","longitud","distinta","collGPS","STATUS","HGPS","getCurrentEnterprise","colltracking","objtracking","PosicionamientoGPS","coordenadas","setMaxWaitDialog","updateWaitDialog","veces","objGPS","ComprobarConexion","conexion","RESULTADO","endBrowse","bBreakUpdateGpsLoop","allMarkers","startUpdateGpsLoop","myPromise","bien","mal","ventana","actualizarGps","showToast","refreshValue","stopUpdateGpsLoop","startGpsCallback","timeBetweenUpdates","minimumMetersDistanceRange","foreground","startGpsInterval","comprobarEstadoGps","sDeviceOs","getGlobalMacro","nStatus","checkGpsStatus","askUserForGpsPermission","collGps","objCollGps","MAP_LONGITUD","MAP_LATITUD","MAP_ALTITUD","ALTITUD","MAP_VELOCIDAD","VELOCIDAD","MAP_RUMBO","RUMBO","MAP_FGPS","FGPS","MAP_HGPS","MAP_STATUS","MAP_SATELITES","SATELITES","MAP_FUENTE","FUENTE","MAP_PRECISION","PRECISION","onMapClicked","evento","mapControl","getControl","addMarker","onMapLongClicked","onMarkerDraggedEnd","nResult","onMapReady","onLocationReady","onLocationChanged","onDistanceMeter","distance","showMarkers","nLength","setVisible","hideMarkers","setMarkersDraggable","bDraggable","setDraggable","removeMarkers","doChangeMapPois","sMapControl","mapContent","lock","doRefresh","sControl","getUserLocation","userLocation","isUserLocationEnabled","enableUserLocation","disableUserLocation","drawLine2","strokeColor","locations","strokeWidth","drawEncodeArea","toEncoded","showPoisMenu","hidePoisMenu","togglePoisMenu","zoomToEncodeData","zoomToMyLocation","restrictMapToBounds","startDistanceMeter","startMarkerIcon","endMarkerIcon","stopDistanceMeter","testInexistente","newObject","NOMBRE","DIRECCION","distanceTo","nMeters","GpsTools","getAddressFromPosition","locality","subLocality","adminArea","subAdminArea","features","country","street","address","postal","containsLocation","getLastKnownLocation","bearing","time","encoded","sEncoded","lstCoords","doFollowUserLocation","bFollow","setFollowUserLocation","doSetMapType","sMapType","AddTableCellText","pdf","cellText","leftBorder","topBorder","rightBorder","bottomBorder","addCellText","GeneratePDFDocument","pdf01","setFont","setFontSize","setFontStyle","setFontColor","createTable","setTableCellWidths","setAlignment","addTable","MAP_PDFSERIE","MAP_PDFFECHA","MAP_PDFNUMERO","cstr","MAP_PDFTEXT","addImageSetXY","flattenPdf","launchPDF","stdate","VBScriptSupport","safeToString","now","len","cint","replacement","escapeRegularExpression","mDate","safeToDate","iLen","mid","iEnd","inStr","strSearch","charSearchFor","lcase","isString","ucase","delimiter","dateDiff","sPeriod","mDate1","mDate2","nDiff","dateAdd","nNumber","setYear","getYear","setMonth","vbSupport","isNothing","isSomething","getClassName","constructor","isFloatNumber","isIntegerNumber","isNumber","isFinite","isEmptyString","isDate","replaceAll","sSource","sSearch","sReplacement","ponerCallbackNfc","nfc","XOneNFC","setOnTagDiscoveredCallback","tagNfcEncontrado","getHexId","isTechnologyAvailable","setType","ndefMessage","getNdefMessage","allRecords","getAllRecords","record","sMimeType","getMimeType","MAP_DATA","connect","readNfcV","enableDnieReader","MAP_CAN_NUMBER","readProfileData","readUserImage","readSignatureImage","canNumber","onDnieRead","dnieReadResult","MAP_TEXT","getDniNumber","getDocumentType","getSurname","getDateOfBirth","getDateOfExpiry","getNationality","getIssuer","getOptionalData","getSex","getBirthPlace","getAddress","getCustodyInfo","getIcaoName","getOtherInfo","getProfession","getPhone","getTitle","getSummary","MAP_USER_IMAGE","getUserImage","getFilesPath","MAP_SIGNATURE_IMAGE","getSignatureImage","onDnieReadError","sReadError","onProgressUpdated","nProgress","disableDnieReader","generatePdfDemo","permissions","fromHtml","signPdfDemo","fm","fileExists","MAP_PIN","readSignatureCertificate","pin","sSourcePdf","sSignedPdf","signPdfWithKey","getSignatureKey","getSignatureCertificateChain","sendSignedPdf","sendMail","inicializarCal","cCal","fecha","objCalendario","stDia","Right","FECHA","HORAINI","HORAFIN","TIPO","DESCRIPCION","ShowMessageDebug","stmsg","appdata","lockContents","listContents","inicializeChats","MAP_GRUPOSEL","MAP_VERFLOTANTE","MAP_RECORDON","MAP_PHONE","MAP_USERLOGIN","LOGIN","MAP_FOTO_FONDO","createChat","userFrom","userTo","USUARIO","USUARIO2","openChat","mSelf","MAP_INDICESEL","MAP_IDCHATSEL","MAP_IMGTIPO","MAP_IMAGEN","MAP_CHATTITULO","MAP_TITULO","MAP_CCUSUARIO","executeNode","openListUser","createSearchIndex","refreshAll","closeListUser","salir","failWithMessage","irGrupo","setTimeRecording","sTime","executeActionAfterDelay","AccionesChatEspecial","parametro","makePhoneCall","MAP_TIPO","startCamera","MAP_SHOWADDTEXT","MAP_TIMERECORD","startAudioRecord","stopAudioRecord","w","setFieldPropertyValue","MAP_TITLE","sendMessage","doSearch","AccionesChat","openFile","MAP_FOTO","MAP_VOZ","colMUser","isFromUser","CollCV","ObjCV","USUARIOTO","USUARIOFROM","MENSAJE","IDCHAT","startReplica","addUserMessage","ROWID","fillMessagesContent","cant","colMsg","sRowid","omuser","msgVoz","lastIndexOf","MAP_ADJUNTO","MAP_FECHAHORA","MAP_COLORVIEW","MAP_FORECOLOR","MAP_FORECOLORFECHA","MAP_ESPACIO","MAP_IMAGE","grupo","literales","iniciarLiterales","stVersionLog","stScreensRework","stNewSup","stMustIndicateWarehouse","repeat","MAP_OBJETO_HIJO","pdfGlobal","addZero","doAuthLogout","OAuth2","withOptions","authority","clientID","persistenceKey","responseType","redirectUri","doAuthLogin","authenticate","onSuccess","doLoginNew","MAP_USER","MAP_PASSWORD","onLoginSuccessful","onLoginFailed","doLogout","funcionesFecha","diasSemana","anio","mes","diames","ms","getMilliseconds","GMTminutes","getTimezoneOffset","mensaje","dUTC","anioUTC","getUTCFullYear","mesUTC","getUTCMonth","diamesUTC","getUTCDate","diasemanaUTC","getUTCDay","hUTC","getUTCHours","mUTC","getUTCMinutes","sUTC","getUTCSeconds","msUTC","getUTCMilliseconds","tUTC","UTC","mensajeUTC","strUTC","strDate","strLocaleDate","toLocaleString","strLocaleDateOnly","toLocaleDateString","strTime","toTimeString","strLocaleTime","toLocaleTimeString","strIso","toISOString","sJson","mensajeString","userMsgBox","collMsgBox","createClone","objMsgBox","MAP_MENSAJE","frameScroll","MAP_SHOWOVERSCROLL","EscanearMatricula","RutaImagen","ocr","scanLicensePlate","EscanearTexto","scanText","prev","execNode","MAP_GROUP","goPage","MAP_TOTAL_PAGES","val","formatDateTime","hours","minutes","ampm","Left","testClick","scanAvailableNetworks","MAP_LOADING","wifiManager","WifiManager","isWifiAdapterEnabled","onWifiNetworksFound","OBJETO","wifiNetworks","orden","wifi","isOpen","getSsid","getNetworkSecurity","saberSiWifiGuardada","MAP_ESTADO","MAP_ORDEN","MAP_IDESTADO","wifiInfo","getActiveWifiInfo","MAP_SSID","MAP_SECURITY","doSort","lstSaved","listSavedNetworks","GenerarPDFBasico","nameFile","createGrid","setEncryption","showGridDebug","getVerticalPosition","setTableWidth","addTableSetXY","addRectangle","AddCellTexttable","Pdf01","nColumT","nColum","isFinLine","textLine","addNewLine","CreatePDF","getEmptyFromNull","GenerarPDF1","addCellImage","CrearPdf_Factura","beginHeader","endHeader","beginFooter","pagina","getCurrentPage","endFooter","newPage","addTextLine","addTextSetX","getStrFill","stProp","stRelleno","nChar","stCad","getBoolStr","GenerarPDFChecks","CODSERVICIO","MAP_USUARIO","HORA","posY","interlineado","addCheckboxSetXY","FECHAUR4","FECHAUR5","texto","fieldPropertyValue","FIRMA1","FIRMA2","FIRMA3","setTextStyle","stfont","ststyle","stalign","stsize","stcolor","GenerarPDF3","margenIzq","margenSup","GenerarPDF3Apaisado","setLanguage","DevolverIframeVideoYoutube","sUrlYoutube","objeto","urlIndice","urlIndiceSiguenteParametro","doRegisterNewFingerprint","sPublicKey","getPublicKey","PUBLICKEY","onFailure","nError","sErrorMessage","launchFingerprintSettings","setCallback","listen","doRegisterNewFingerprintIOS","launch","doFingerprintAuth","getUserByPublicKey","stopListening","hacerLogin","PWD","doFingerprintAuthIOS","usuario","contrasenna","collUser","objUser","getOS","collUsuarios","testReplica","sResult","testConnection","testAuthentication","doDRCamera","imgFile","onCancelled","jstestClick","handleError","eventoOnTextChanged","FiltraMarcados","MAP_BUSCAR_TEXT","eventoOnFocusChanged","MAP_DESCRIPCIONEVENTO","eventoOnFocusChanged3","MAP_DESCRIPCIONEVENTO3","jstestClickNode","scrollArrow","miparam","MAP_VALORVER","MAP_ATTSHOWOVERSCROLL","sysMessage","codigo","processReplicatorQueue","liveResponse","EnviarMail","adjunto","men","MAP_CORREO","MAP_ASUNTO","MAP_CUERPO","ok","MAP_VISIBLE","MAP_TEXTAT","CodigoBarras","MAP_TIPOCB","MAP_CHECKBOX1","MAP_CHECKBOX2","startScanner","takePicture","filename","saveToGallery","onFinished","sFileName","quality","MAP_CAMERA_QUALITY","maxDuration","withMicAudio","MAP_RECORDING","stopRecording","startPreview","stopPreview","isOpened","bOpened","isCameraOpened","isAutoFocus","bAutoFocus","getSupportedAspectRatios","allAspectRatios","doSetOnCodeScanned","setOnCodeScanned","doSetFlashMode","sFlashMode","setFlashMode","doToggleFlashMode","getFlashMode","doToggleCamera","sCamera","getCamera","setCamera","doToggleAutoFocus","setAutoFocus","XoneViewsHandler","viewsMap","getXoneDataObject","xoneHashIds","xoneViewsHandler","cleanRemovedViews","XoneView","addView","_bindedEvents","bindedEvent","clearBreadcrumbsFromXoneHashId","XoneControl","SafeToHours","getTestResult","executeQuery","UI_ATTRIBUTES","frame","original","PROP_ATTR_VISIBLE","isPropNode","developValue","normailzeWebAttribute","retDefault","evaluateMacro","getArrayValue","COLOR_ATTRIBUTES","macro","companycolor","DEFAULT_BGCOLOR","forecolor","DEFAULT_FORECOLOR","FAST_ATTR_RESOLVER","attrXoneName","resolvedAttrName","m_fastResolver","sFunctionName","nExpectedCount","nMinimumParameterCount","nMaximumParameterCount","sUserName","sExceptionMessage","FAIL_EXITAPP","FAIL_EXIT","FAIL_LOGIN","MACRO_LOGIN_START","MACRO_LOGIN_USERCOLL","MACRO_LOGIN_NEWUSER","MACRO_LOGIN_NEWPASS","MACRO_LOGIN_COLL_OBJECT_INDEX","MACRO_STARTREPLICA","PROP_DEFAULT_FIELDSIZE","PROP_DEFAULT_LABELWIDTH","PROP_DEFAULT_CONTENTLINES","TRUE_VALUE","FALSE_VALUE","DEFAUT_FILES_PATH","DATE_SEPARATOR","HOUR_SEPARATOR","DANISH_HOUR_SEPARATOR","LAST_EXECUTED_APP_FILE_NAME","LAST_EXECUTED_APP_FIELD_NAME","LAST_EXECUTED_USER_FIELD_NAME","LICENSE_FIELD_NAME","SERVER_FIELD_NAME","TAG_MAPPINGFILE","TAG_APPNODE","PROP_ATTR_TYPE","MASK_EDIT_VISIBLE","MASK_LIST_VISIBLE","MASK_CONTENT_VISIBLE","MASK_DROPDOWN_VISIBLE","COLL_COLLPROPS","COLL_LOGIN_COLL","COLL_LOGOFF_COLL","m_lstCollections","m_lstCollPropValueCaches","m_bCacheAttrValues","_objectID","m_PushExit","m_strAppName","m_lstConnections","m_lstSysCollNames","m_lstQualifyCaches","m_objectDeveloper","m_strConsole","m_lstParamStack","m_lstGlobalMacros","m_nDebugPort","m_dbgLocker","m_lstCssList","m_lstCollPropUndefinedValues","m_lstConditionCssList","m_strFixedVisualCondition","m_strVisualConditions","m_lstOpenColls","bIsCharWidthCompatibility","bIsImageValuePriorized","m_lstVisualCondDescriptors","m_lstCachedScripts","m_globalItems","m_bLoadLayouts","m_lstCollExceptions","getCollExceptions","m_lstPropExceptions","getPropExceptions","m_error","m_isBrowser","global","isBrowser","m_loader","sCollectionName","m_lstEvaluatedAttributes","m_ui","getObjectHost","getCollectionHost","__proto__","m_strUserIdColl","m_user","m_currency","m_strEntIdLevel","m_strEntIdColl","m_strEntIdOwner","NodeData","setOperIdLength","setRowIdLength","strConnString","parsedConnectionString","strProvider","strProgID","GPSConnectionData","JSONConnectionData","addExtendedProperty","GetRawStringField","sDateMask","sRowidFieldName","setRowIdFieldName","sSqlFieldName","setSqlFieldName","SetPlatform","setNodeData","setIsReplicating","m_nMasterMid","setMID","setDBID","CreateConnection","AddConnection","ConnectionName","CheckIncorrectParamCount","jsObject","bIsGoogleSignOn","sEntryPointCollection","dataCollEntryPoint","setOverridenEntryPoint","logonUser","loggedUser","loginException","getXOneScriptObjects","mapRuntimeObjects","setLastAppExecutedField","run","getThrowableMessage","runAsync","scriptContext","injectJavaObject","getUserInterface","paramsNames","UserName","Password","errorMessage","silentMode","getSysCollection","usercol","objuser","removeExtendedProperty","objparams","ValidateUserCredentials","strUserPwd","ObjectItem","objcomp","LoadCompanyData","SysName","CollName","GetSysCollName","loginCollection","loginCollectionDefault","mapLoginCollections","getValuesByConditions","condition","getCurrentVisualConditionsDescriptors","sLoginColl","loginCollNode","getConfigFile","entryPointCollection","entryPointDefault","mapEntryPointCollections","sCondition","sOverridenEntryPointCollection","lstVisualConditions","sVisualCondition","userCollection","clearCompanyData","codePath","scriptWrapper","fileManager","connString","m_fileManager","readFileAsync","m_strAppPath","appXml","m_jsonConfigFile","LoadConfigFile","Initialize","ConnString","mainConn","setConnString","m_strObjectPrefix","m_bIsReady","executionPath","appSource","m_nVersionMapping","doc","Deserialize","m_xmlConfigFile","getRootNode","LoadAppFile","LoadAppNode","xmlDocument","m_xmlAppNode","xapp","m_strDefaultLanguage","m_bDebug","m_bSqlProfilerMode","m_bLogMemoryUsage","sScriptOptimizationLevel","isDebuggable","m_nScriptOptimizationLevel","xcns","xc","strSysName","strCharsetEncoding","strCondition","LoadAndSaveNewCssFile","m_bHasStylesheets","addEntryPointCollection","selectSingleNode","addLoginCollection","LoadNewCssFile","LoadFile","getSourcePath","mIsEncryptFiles","hashCode","LoadCollection","collProps","LoadExternalCollection","second","first","m_company","collCache","nodeTypeCache","nodeNameCache","NodeType","nStart","nEnd","lstCombinations","CreateVisualCombinations","Parts","StartIndex","EndIndex","Destination","sTmp","IsFixed","ClearCaches","ParseVisualConditions","m_strFilesPath","updateVisualConditionsFromMacro","mapCopy","Company","m_bExternalEntIdColl","m_bExternalEntIdLevel","m_bExternalEntIdOwner","m_strEntTable","m_strEntPk","m_nEntPkType","GenerateEntIdColl","GenerateEntIdLevel","GenerateEntIdOwner","PrepareUserMacrosSqlString","ClassName","lstCssParsers","cssParser","FindStylesheetByClassNameList","lstDescriptors","sDescriptor","FindStylesheetByClassAttrList","listCss","getRuleBySelector","strBase","base","CssList","Code","Description","setNumber","setDescription","setFailedSql","SourceNode","oldNode","replaceChild","m_bSelectiveReplication","sClassId","objData","param0","booleano","XOneJavascript"],"mappings":"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ACA,MACAR,SAAA,WACAv0C,SAAA,W,MACA,Q,KACA,QAED+E,KAAA,C,MACC,QACA,kBAAU,qBACV,oBACA,eAAS,kBACT,kBACA,kBACA,2BACA,mBAAa,uBACb,2BACA,oBACA,0BAAuB,uBAAQ,uBAC/B,mDAAsC,wBACtC,kCAA+B,gCAAQ,gCACvC,4BAAc,OAAe,kEAC7B,6BACA,iBAAW,oBACX,2BACA,oCACA,gCACA,+BACA,8BACA,iDACA,4CACA,qDACA,sBAAW,0BACX,uBACA,oBACA,0BACA,eAAS,iBACT,uBACA,sBACA,sBACA,uBACAyhB,SAAA,WACA,gBAAW,mBACX,uBACA,oBACA,oBACA,sBACA,eAAQ,kB,OACR,S,KACA,O,MACA,OAAU,OAAE,QAAa,iBACzB/hB,WAAA,cACA,mBAAW,uBACX,uBACAC,aAAA,gBACA,qBAAU,yBACV,qBACA,gBAAU,oBACV,oBACA,WAAM,a,KACN,O,MACA,QACA,0BACA,oBACA,kB,OACA,SACA,SAAI,W,KACJ,O,OACA,SACA,uBACA,qB,KACA,OACA,kBACA,kBACA,gCACA,gCACA,oBACA,8BACA,eAAU,kBACV,aAAO,eACP,yBACA,oBACA,kBACA,4BACA,SAAI,WACJ,wBACA,mBAAa,sB,KACb,OACA,uBACA,2BACA,oBAAc,wBACdywC,WAAA,cACA,sCACA,kCACA,oCACA,gCACA,aAAO,gBACP,cAAS,OAAS,qCAClB,sBAAS,0B,MACT,gBAAgB,YAChB,kBACA,QAAG,UACH,aAAQ,CAAE,6BAAU,2BACpB,iBAAY,oB,IACZ,MACA,oB,KACA,OACA,oBACA,kBACA,qCACA,cACF,KAAO,UAGN,EAAa,CACb,cACA,UACA,cACA,kBACA,gBACA,wBACA,sBACA,0BACA,wBACA,YACA,cACA,sBACD,gBACC,yBAEK,EAAsB,W,MAA8B,GACxD,EAAmB,YAA+B,0BAA1B,EAA0B,KAAd0nD,EAAc,K,GAAkB,WAAhB,mBAAsB,EAAgB,QAAM,EAAe,EAAC,UAChG,WAAhB,eAAIA,IAAuB,6DAC5B,EAAE,MAKF,OAHAl+H,OAAA,QAAO,EAAQ,MA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","file":"js/app.02a89bf7.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"about\":\"about\",\"coll\":\"coll\"}[chunkId]||chunkId) + \".\" + {\"about\":\"38781937\",\"coll\":\"9b7161f8\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"coll\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({\"about\":\"about\",\"coll\":\"coll\"}[chunkId]||chunkId) + \".\" + {\"about\":\"31d6cfe0\",\"coll\":\"06c9389b\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/administracion/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Breadcrumb.vue?vue&type=style&index=0&id=54d926b6&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Offline.vue?vue&type=style&index=0&id=375b8507&scoped=true&lang=css\"","export class Exception {\n    getClass(): any {\n        return {getSimpleName:()=>\"Exception\"};\n    }\n\n    getMessage():string {\n        return this.m_message;\n    }\n    m_message: string;\n    /**\n     *\n     */\n    constructor(message: string) {\n        this.m_message=message;\n        \n    }\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Camera.vue?vue&type=style&index=0&id=71a77362&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DragControl.vue?vue&type=style&index=0&id=49901515&scoped=true&lang=css\"","import StringUtils from \"./StringUtils\";\n\nexport default class StringBuilder {\n    \n    \n    \n    private m_data: string[]\n    /**\n     *\n     */\n    constructor(text:string=\"\") {\n        this.m_data=Array.from(text);\n    }\n\n    public append(value:any):StringBuilder {\n        let text=StringUtils.SafeToString(value);\n        this.m_data.push(text);\n        return this;\n    }\n\n    public toString(): string {\n        return this.m_data.join(\"\");\n    }\n\n    public insert(index: number, item: string) {\n        this.m_data.add(index,item);\n    }\n\n    public length():number {\n        return this.toString().length;\n    }\n\n    public isEmpty(): boolean {\n        return this.m_data.length===0;\n    }\n\n    public charAt(position: number):string {\n        return this.toString().charAt(position);\n    }\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Button.vue?vue&type=style&index=0&id=931f494c&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Loader.vue?vue&type=style&index=0&id=2873404c&scoped=true&lang=css\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PictureMap.vue?vue&type=style&index=0&id=4a338f92&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Row.vue?vue&type=style&index=0&id=86b0c20e&scoped=true&lang=css\"","import IConnection from \"../../Interfaces/IConnection\";\nimport IFieldProperties from \"../../Interfaces/IField\";\nimport IResultSet from \"../../Interfaces/IResultSet\";\nimport IXoneApp from \"../../Interfaces/IXoneApp\";\nimport { SqlParser } from \"../../Parsers/SQL/SqlParser\";\nimport { Guid } from \"../../Utils/Guid\";\nimport XoneTestResulset from \"../Test/XoneTestResulset\";\nimport XoneConnectionData from \"../XoneConnectionData\";\nimport XoneJSONConnection from \"./XoneJSONConnection\";\nimport XoneJSONResulset from \"./XoneJSONResulset\";\n\nexport default class XoneJSONConnectionData extends XoneConnectionData {\n    private m_context: any;\n    private m_nSessionIdCounter: any;\n    private m_nLastInsertedId: any;\n    private m_nLastRecordsAffected: any;\n    private m_strLastInsertedTable: any;\n    private m_stmt: {};\n    m_connection: XoneJSONConnection;\n    /**\n     * Crea una conexin a base de datos\n     *\n     * @param Name  Nombre de la conexin.\n     * @param Owner Aplicacin a la cual pertenece esta conexin.\n     */\n    constructor(context: any, Name: string, Owner: IXoneApp) {\n        super(Name, Owner);\n        this.m_context = context;\n        // K11101001: Utilizar SESSIONID numrico para mejorar el rendimiento de la maquinaria.\n        // this.m_nSessionIdCounter = new AtomicLong(0);\n        // // A14011501: Optimizaciones para obtener claves numricas de conexiones sqlite y dems.\n        // this.m_nLastInsertedId = new ThreadLocal<>();\n        // this.m_nLastRecordsAffected = new ThreadLocal<>();\n        // this.m_strLastInsertedTable = new ThreadLocal<>();\n        // // TODO ADD TAG\n        // // Nos creamos el holder para el statement...\n        // this.m_stmt = {}; // new ThreadLocal<>();\n    }\n\n    /**\n     * TRUE si el DBMS soporta la sintaxis TOP x\n     *\n     * @return Esta funcin posiblemente no se redefina en esta plataforma.\n     */\n    public TopAllowed(): boolean {\n        return false;\n    }\n\n    /**\n     * TRUE si el DBMS soporta la sintaxis LIMIT x\n     *\n     * @return Mirar arriba plis.\n     */\n    public LimitAllowed(): boolean {\n        return false;\n    }\n\n    /**\n     * TRUE si la conexin tiene caracteres para escapear cadenas de caracteres.\n     *\n     * @return Devuelve TRUE si hay caracteres en la lista para sustituir.\n     */\n    public HasEscapeChars(): boolean {\n        return false;\n    }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Devuelve TRUE si la conexin acepta sentencias SQL parseadas para su ejecucin o para queries.\n     *\n     * @return\n     */\n    public acceptsParsedSentences(): boolean {\n        return true;\n    }\n\n    public acceptsEmptyQueries(): boolean {\n        return false;\n    }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Devuelve TRUE si la conexin permite recuperar un ID autonumrico dado un ROWID.\n     *\n     * @return\n     */\n    public retrievesAutonumericKeys(): boolean {\n        return false;\n    }\n\n\n    /**\n     * Obtiene una conexin fsica a la fuente de datos que encapsula esta clase. Es de obligatoria redefinicin por los derivados de esta clase.\n     *\n     * @return Devuelve una nueva conexin de datos (o la misma si solo se emplea una)\n     * @throws Exception\n     */\n    public GetNewConnection(ReadOnly: boolean = false): IConnection {\n        return this.m_connection = new XoneJSONConnection(this.getConnString(), this.getName());\n    }\n\n    public GetCurrentConnection(ReadOnly: boolean = false): IConnection {\n        if (this.m_connection)\n            return this.m_connection;\n        return this.GetNewConnection(ReadOnly);\n    }\n\n    /**\n     * Crea un conjunto de datos sin conexin original. Para ello crea una local y la devuelve como\n     * parte del conjunto que la cierra cuando lo cierran a l\n     *\n     * @param Sentence Sentencia SQL que se ejecuta para obtener el conjunto de datos.\n     * @return Devuelve un conjunto de datos o NULL si algo falla.\n     * @throws Exception\n     */\n    /// public CreateRecordset(Sentence:string): IResultSet {\n    //     return this.CreateRecordset(null, Sentence);\n    // }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Ejecuta una sentencia SQL parseada que devuelve datos.\n     *\n     * @param Sentence\n     * @return\n     * @throws Exception\n     */\n    /// public CreateRecordset(Sentence:any): IResultSet{\n    //     return this.CreateRecordset(null, Sentence);\n    // }\n\n    /**\n     * Crea un objeto de acceso a datos (recordset) para leer los datos de un objeto\n     *\n     * @param Connection Conexin que se quiere usar para abrir la fuente de datos. NULL para crear una local y usarla solamente para esta funcin.\n     * @param Sentence   Setencia SQL (SELECT) que se quiere ejecutar para abrir la fuente de datos.\n     * @param MaxRows    Mximo de registros para no usar el que tiene por defecto la clase.\n     * @return Devuelve el conjunto de datos creado o NULL si algo falla.\n     * @throws Exception\n     */\n    /// public abstract CreateRecordset(Connection Connection, String Sentence, int MaxRows): IResultSet;\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Esta implementacin permite la ejecucin de sentencias SQL parseadas con anterioridad.\n     *\n     * @param Connection\n     * @param Sentence\n     * @param MaxRows\n     * @return\n     * @throws Exception\n     */\n    /// public abstract ResultSet CreateRecordset(Connection: IConnection | string, ...args?:any) throws Exception;\n\n    /*\n     * TODO ADD TAG 17042014: Luis Un recordset a partir de la clase de parametros\n     */\n    public CreateRecordset(Connection: IConnection | string, ...args: any): IResultSet {\n        return new XoneTestResulset(Connection as string);\n        // if (typeof Connection == 'string' ) {\n        //     return this.GetCurrentConnection().executeQuery(Connection as string);\n        // }\n        // return null;\n    }\n\n    /*\n     * TODO ADD TAG 17042014: Luis Un recordset a partir de la clase de parametros\n     */\n    public async CreateRecordsetAsync(Connection: IConnection | string, ...args: any): Promise<IResultSet> {\n        if (typeof Connection == 'string') {\n            let cn = this.GetCurrentConnection();\n            return await cn.executeQueryAsync(Connection as string, ...args);\n        }\n        return null;\n    }\n\n    /*\n     * TODO ADD TAG 17042014: Luis Un recordset a partir de la clase de parametros\n     */\n    public async CountAsync(Connection: IConnection | string, ...args: any): Promise<IResultSet> {\n        if (typeof Connection == 'string') {\n            return await this.GetCurrentConnection().countAsync(Connection as string, ...args);\n        }\n        return null;\n    }\n\n    /**\n     * Crea un objeto de acceso a datos (recordset) para leer los datos de un objeto\n     *\n     * @param Connection Conexin que se quiere usar para abrir la fuente de datos. NULL para crear una local y usarla solamente para esta funcin.\n     * @param Sentence   Setencia SQL (SELECT) que se quiere ejecutar para abrir la fuente de datos.\n     * @return Devuelve el conjunto de datos creado o NULL si algo falla.\n     * @throws Exception\n     */\n    //public abstract ResultSet CreateRecordset(Connection Connection, String Sentence) throws Exception;\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Ejecuta una sentencia SQL parseada que devuelve datos.\n     *\n     * @param conn\n     * @param Sentence\n     * @return\n     * @throws Exception\n     */\n    /// public abstract ResultSet CreateRecordset(Connection conn, SqlParser Sentence) throws Exception;\n\n    /**\n     * Ejecuta una sentencia SQL dentro de la conexin que manipula este objeto. No lleva conexin fsica como parmetro porque crea una temporal, trabaja con ella y la cierra.\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado.\n     *\n     * @param Sentence Sentencia SQL que se quiere ejecutar.\n     * @return Devuelve TRUE si la ejecucin de la sentencia SQL es correcta.\n     * @throws Exception\n     */\n    // public ExecuteSqlString(Sentence: string): any {\n    //     return ExecuteSqlString(null, Sentence, true);\n    // }\n\n    /**\n     * A10090601:\tIncluir el mecanismo de rplica selectiva por colecciones a la maquinaria.\n     * Ejecuta un SQL sin replicar\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado.\n     */\n    // public Object ExecuteLocalSqlString(String Sentence) throws Exception {\n    //     return ExecuteSqlString(null, Sentence, false);\n    // }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Ejecuta una sentencia SQL parseada con rplica.\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado.\n     *\n     * @param Sentence\n     * @return\n     * @throws Exception\n     */\n    // public Object ExecuteParsedSql(SqlParser Sentence) throws Exception {\n    //     return ExecuteParsedSql(null, Sentence, true);\n    // }\n\n    /**\n     * Ejecuta una sentencia SQL dentro de la conexin que manipula este objeto.\n     * A10090601:\tIncluir el mecanismo de rplica selectiva por colecciones a la maquinaria.\n     * Un parmetro para decir si replica.\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado\n     *\n     * @param Connection Conexin de datos que se quiere usar para ejecutar la sentencia. NULL para crear una temporal, ejecutar la sentencia y cerrarla.\n     * @param Sentence   Sentencia SQL que se va a ejecutar.\n     * @param Replicate  TRUE si replica.\n     * @return Devuelve TRUE si la sentencia se ejecuta correctamente.\n     * @throws SQLException\n     * @throws Exception\n     */\n    public ExecuteSqlString(Connection: IConnection | string, Sentence?: SqlParser | string, Replicate?: boolean, ...args): any {\n        return 0;\n    }\n\n    public async ExecuteSqlStringAsync(Connection: IConnection | string, Sentence?: SqlParser | string, Replicate?: boolean, ...args): Promise<any> {\n        return await this.GetCurrentConnection().executeAsync(Sentence, 100, ...args);\n    }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Esta implementacin opcional permite ejecutar una sentencia SQL parseada en vez de una cadena SQL.\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado.\n     *\n     * @param Connection\n     * @param Sentence\n     * @param Replicate\n     * @return\n     * @throws SQLException\n     * @throws Exception\n     */\n    public ExecuteParsedSql(Connection: IConnection | string, Sentence?: SqlParser | string, Replicate?: boolean, ...args): any {\n        return 0;\n    }\n\n    public async ExecuteParsedSqlAsync(Connection: IConnection | string, Sentence?: SqlParser | string, Replicate?: boolean, ...args): Promise<any> {\n        return await this.GetCurrentConnection().executeAsync(Sentence, 100, ...args);\n    }\n\n\n\n    /**\n     * Reemplaza el valor del operador especfico dentro de la cadena SQL que se pasa como parmetro.\n     *\n     * @param Collection Coleccin con la que se est trabajando.\n     * @param Sentence   Sentencia SQL o cadena en la cual se quiere sustituir el operador.\n     * @param OperName   Nombre del operador que se quiere sustituir.\n     * @return Devuelve la sentencia original con el operador sustituido.\n     * @throws Exception\n     */\n    public ReplaceCustomOper(Collection: IFieldProperties, Sentence: string, OperName: string): string {\n        return Sentence;\n    }\n\n    /**\n     * Inserta una sentencia TOP dentro del SQL que se pasa como parmetro. Colocada aqu para mantener compatibilidad de interfaces\n     * pero no se implementar en esta plataforma.\n     *\n     * @param Sentence Sentencia SQL que se quiere modificar.\n     * @param Rows     Cantidad de filas que se quiere limitar en el TOP x o LIMIT x\n     * @return La misma sentencia pasada como parmetro.\n     */\n    public InsertTop(Sentence: string, Rows: number): string {\n        return Sentence;\n    }\n\n    /**\n     * Dado un nombre de campo lo formatea usando los caracteres de inicio y fin de campo.\n     *\n     * @param FieldName Nombre del campo a formatear.\n     * @return Devuelve el nombre del campo encerrado en sus secuencias de inicio y fin de campo.\n     */\n    public QuoteFieldName(FieldName: string): string {\n        return FieldName;\n    }\n\n    /**\n     * Dado un nombre de tabla u otro tipo de objeto de base de datos, lo devuelve formateado con su prefijo si este est definido.\n     *\n     * @param ObjectName Nombre de tabla u objeto en general de la base de datos para arreglar con el prefijo.\n     * @return Devuelve el nombre de objeto ya desarrollado con su prefijo si aplica.\n     */\n    // public String FixObjectName(String ObjectName):string {\n    //     return FixObjectName(ObjectName, null);\n    // }\n\n\n\n    /**\n     * Dada una cadena sustituye los caracteres para los cuales se hayan definido secuencias de escape por dichas secuencias.\n     *\n     * @param Value Cadena en la cual se van a sustituir los caracteres por secuencias de escape.\n     * @return Devuelve la cadena original con los caracteres sustituidos por sus secuencias de escape.\n     */\n    public EscapeString(Value: string): string {\n        if (Value.startsWith('\\''))\n            return Value;\n        return `\\'${Value}\\'`;\n    }\n\n    /**\n     * Genera un ROWID para la conexin actual. Emplea los criterios de nmero de tabla, MID, DBID, etc.\n     *\n     * @param TableName Nombre de la tabla para la cual se quiere generar el ROWID.\n     * @return Devuelve un ROWID respetando los valores de rplica y el tamao del campo ROWID.\n     */\n    //public GenerateRowId(TableName:string):string {return Guid.create().toString();}\n\n    /**\n     * Desarrolla el valor de un objeto y lo devuelve como cadena lista para insertar en un SQL o un filtro\n     *\n     * @param Value Valor que se quiere desarrollar. Se usar la mscara de fecha de la conexin.\n     * @return CAdena representando el valor del objeto para escribir en una sentencia SQL o un filtro de datos.\n     */\n    // public DevelopObjectValue(Value:any):string {\n    //     return DevelopObjectValue(Value, true);\n    // }\n\n    /**\n     * Esta funcin se emplea para cerrar conexiones locales si es que las tiene. No necesariamente tiene por qu\n     * usarse para terminar la clase, simplemente cuando se quiera cerrar o destruir los objetos locales.\n     */\n    public Terminate(): void { }\n\n    /**\n     * Si el DBMS soporta left outer joins\n     */\n    public IsOuterJoinSupported(): boolean { return false; }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Devuelve una clave numrica dada una tabla y un ROWID. Permite abstraer la obtencin de la clave autonumrica\n     * en conexiones que no son offline.\n     *\n     * @param TableName\n     * @param RowIdFieldName\n     * @return\n     * @throws Exception\n     */\n    public RetrieveNumericKey(TableName: string, KeyName: string, RowIdFieldName: string, RowId: string): number { return 0; }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Esta funcin permite calcular si un ROWID es nico dentro de la conexin de datos.\n     *\n     * @param tableName\n     * @param RowID\n     * @return\n     * @throws Exception\n     */\n    public isUniqueRowID(tableName: string, RowID: string): boolean { return true; }\n\n    // A11120701: Mecanismo para exponer el DBMS de una conexin.\n    // Expone el tipo de DBMS que tiene debajo esta conexin. Obligatorio implementar.\n    public getDbmsTag(): string { return \"OnlineJSON\" };\n}","import Hashtable from \"../Collections/HashMap/Hashtable\";\nimport { XoneDataCollection } from \"../core/XoneDataCollection\";\nimport { XoneDataObject } from \"../core/XoneDataObject\";\nimport IXmlNode from \"../Interfaces/IXmlNode\";\nimport IXmlNodeList from \"../Interfaces/IXmlNodeList\";\nimport CXoneNameValuePair from \"../Utils/CXoneNameValuePair\";\nimport StringUtils from \"../Utils/StringUtils\";\nimport { Utils } from \"../Utils/Utils\";\n\nexport default class ScriptContext {\n    /**\n     *  Objeto en cuyo contexto se ejecuta el script\n     */\n    private m_object: XoneDataObject=null;\n    /**\n     *  Coleccin en cuyo contexto se ejecuta el script\n     */\n    private m_coll: XoneDataCollection=null;\n    /**\n     * A12081701: Mecanismo para pasar parmetros a un nodo de accin.\n     * Los parmetros que lleva un script para ponerlos como argumentos en el scope general.\n     * \n     */\n    private m_lstParams: Hashtable<String, Object>;\n\n    // K10090801:\tCarga de includes locales en los nodos de acciones.\n    // En esta lista se almacenan los scripts locales del nodo <action> en cuestin\n    private m_lstLocalIncludes: Array<any>;\n\n    /**\n     * Construye un contexto de coleccin.\n     * @param HostCollection\t\tColeccin en cuyo contexto se ejecuta el script.\n     */\n    constructor(HostCollection: XoneDataCollection | XoneDataObject) {\n        if (HostCollection instanceof XoneDataObject) {\n            this.m_object = HostCollection\n            this.m_coll = (HostCollection as XoneDataObject).getOwnerCollection();\n        } else\n            this.m_coll = HostCollection;\n        // K10090801:\tCarga de includes locales en los nodos de acciones.\n        this.m_lstLocalIncludes = new Array<any>();\n    }\n\n    /**\n     * @return\t\tDevuelve el objeto en el cual se ejecuta el script al que se refiere este contexto.\n     */\n    public getObjectHost(): any {\n        return this.m_object;\n    }\n\n    /**\n     * @return\t\tDevuelve la coleccin en la cual se ejecuta el script al que se refiere este contexto.\n     */\n    public getCollectionHost(): XoneDataCollection {\n        return this.m_coll;\n    }\n\n    // Lista con los nombres de ficheros include de este contexto\n    // Devuelve la lista de includes locales.\n    // K10090801:\tCarga de includes locales en los nodos de acciones.\n    // La lista no es de cadenas\n    public getLocalIncludes() {\n        return this.m_lstLocalIncludes;\n    }\n\n    /**\n     * A12081701: Mecanismo para pasar parmetros a un nodo de accin.\n     * Setea un parmetro para el script cuyo contexto tenemos. Los parmetros se podrn usar dentro del script\n     * como variables dentro del scope global.\n     * \n     * @param ParamName\t\t\tNombre del parmetro. No puede coincidir con ningn valor reservado.\n     * @param ParamValue\t\tValor del parmetro. Cualquier cosa.\n     */\n    public SetParam(ParamName: string, ParamValue: Object) {\n        if (this.m_lstParams == null)\n            this.m_lstParams = new Hashtable<String, Object>();\n        if (StringUtils.IsEmptyString(ParamName))\n            return;\n        if (ParamValue != null)\n            this.m_lstParams.put(ParamName, ParamValue);\n        else\n            this.m_lstParams.delete(ParamName);\n    }\n\n    /**\n     * A12081701: Mecanismo para pasar parmetros a un nodo de accin.\n     * Expone la lista de parmetros para poder sacarlos y meterlos en el contexto.\n     * \n     * @return La lista de parmetros o NULL si no hay parmetros.\n     */\n    public GetParams() {\n        return this.m_lstParams;\n    }\n\n    /**\n     * L02102015: Sobrecargar ExtracArguments para poder usar Actionode null\n     * K13080701: La ejecucin de scripts con argumentos a nivel de coleccin falta en algunos casos.\n     * Dado un contexto de script y una lista de argumentos saca los nombres de parmetros del nodo y\n     * coloca los argumentos en el contexto...\n     *\n     * @param Arguments\n     */\n    // public void ExtractArguments(Object[] Arguments) {\n    //     ExtractArguments(null,Arguments);\n    // }\n\n    public ExtractArguments(ActionNode: IXmlNode, ...args): void {\n        if (!args)\n            return;\n        let xna: IXmlNodeList = null;\n        if (ActionNode != null)\n            xna = ActionNode.SelectNodes(\"param\");\n        args.forEach((value, i) => {// Puede haber ms parmetros que valores\n            let strName = null;\n            if (Array.isArray(value)) {\n                this.ExtractArguments(ActionNode, ...value);\n            } else {\n                if (value instanceof CXoneNameValuePair) {// Vienen los dos\n                    //let nvp = (CXoneNameValuePair)value;\n                    strName = value.Name;\n                    value = value.Value;\n                }// Vienen los dos\n                else {// Sacar del XML\n                    if (xna != null && i < xna.count()) {// Tenemos valor\n                        let xarg: IXmlNode = xna.get(i);\n                        // Sacar el nombre\n                        strName = xarg.getAttrValue(Utils.PROP_ATTR_NAME);\n                    }// Tenemos valor\n                    if (StringUtils.IsEmptyString(strName))\n                        strName = String.format(\"Param%d\", i + 1);\n                }// Sacar del XML\t\n                this.SetParam(strName, value);\n            }\n        });// Puede haber ms parmetros que valores\n    }\n\n}","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=07ebe724&lang=css\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ContentsRow.vue?vue&type=style&index=0&id=512f3888&lang=css\"","import { type } from \"os\";\nimport { Exception } from \"../../Exceptions/Exception\";\nimport IDataOptions from \"../../Interfaces/IDataOptions\";\nimport IResultSet from \"../../Interfaces/IResultSet\";\nimport { SqlParser } from \"../../Parsers/SQL/SqlParser\";\nimport NumberUtils from \"../../Utils/NumberUtils\";\nimport ObjUtils from \"../../Utils/ObjUtils\";\nimport StringUtils from \"../../Utils/StringUtils\";\nimport TextUtils from \"../../Utils/TextUtils\";\nimport XoneWebCoreConnection from \"./XoneWebCoreConnection\";\n\nexport default class XoneWebCoreResulset implements IResultSet {\n\tprivate m_stringData = [\"Valor prueba texto\", \"Texto corto\", \"0002346\", \"Otro texto\", \"Un texto mas largo de prueba\", \"Mas texto\"];\n\tprivate m_nIterate: number;\n\tprivate m_parsed: SqlParser;\n\tprivate m_maxRows = 100;\n\tprivate m_data: any;\n\tprivate m_options: IDataOptions;\n\tprivate m_keys = [];\n\tprivate m_connection: XoneWebCoreConnection;\n\t/**\n\t *\n\t */\n\tconstructor(connection?: XoneWebCoreConnection, options?: IDataOptions) {\n\t\tthis.m_connection = connection;\n\t\tthis.m_nIterate = -1;\n\t\tthis.m_options = options;\n\t\tthis.m_data = [];\n\t\tthis.m_maxRows = this.m_data.length;\n\t\tthis.m_keys = [];\n\t\t// this.m_parsed=new SqlParser(\"ROWID\");\n\t\t// this.m_parsed.ParseSqlString(strCmd)\n\t}\n\n\tpublic async populate(options?: IDataOptions): Promise<IResultSet> {\n\t\tvar result = await this.m_connection.fetchDataAsync(options || this.m_options);\n\t\tif (result.hasError == true) {\n\t\t\tthrow new Exception(result.err);\n\t\t}\n\t\tthis.m_data = Array.isArray(result.data) ? result.data : [];\n\t\tthis.m_maxRows = this.m_data.length;\n\t\tthis.m_keys = this.m_maxRows == 0 ? [] : Object.keys(this.m_data[0]);\n\t\treturn this;\n\t}\n\n\tisResultset: boolean = true;\n\n\tgetBytes(fld: string): number[] {\n\t\treturn null;\n\t}\n\tgetColumnCount(): number {\n\t\treturn this.m_maxRows == 0 ? 0 : this.m_keys.length;\n\t}\n\tgetColumnTypes(): number[] {\n\t\treturn [1, 2, 3, 4, 5, 6, 7, 8];\n\t}\n\tgetColumnName(ordinal: number): string {\n\t\treturn this.m_maxRows == 0 ? 0 : this.m_keys[ordinal];\n\t}\n\tgetData() {\n\t\treturn this.m_data;\n\t}\n\tclose(): void {\n\t\tthis.m_nIterate = -1;\n\t\tthis.m_data = null;\n\t\tthis.m_maxRows = 0;\n\t}\n\n\tprivate resolverField(fld: string | number): string {\n\t\tif (typeof fld == \"number\") return this.m_keys[fld as number];\n\t\treturn fld as string;\n\t}\n\n\tgetValue(fld: string | number, nType: number) {\n\t\tswitch (nType) {\n\t\t\tcase 0: // Numero\n\t\t\t\treturn NumberUtils.SafeToInt(this.m_data[this.m_nIterate][this.resolverField(fld)]);\n\t\t\tcase 2:\n\t\t\t\treturn NumberUtils.SafeToDouble(this.m_data[this.m_nIterate][this.resolverField(fld)]);\n\t\t\tcase 3:\n\t\t\t\treturn ObjUtils.SafeToDate(this.m_data[this.m_nIterate][this.resolverField(fld)]);\n\t\t\tdefault:\n\t\t\t\treturn StringUtils.SafeToString(this.m_data[this.m_nIterate][this.resolverField(fld)]);\n\t\t}\n\t}\n\tgetString(fld: string | number): string {\n\t\treturn this.getValue(fld, 1) as string;\n\t}\n\tgetInt(fld: string): number {\n\t\treturn this.getValue(fld, 0) as number;\n\t}\n\tgetDate(fld: string): Date {\n\t\treturn this.getValue(fld, 3) as Date;\n\t}\n\n\tprivate get PageLen() {\n\t\treturn this.m_options?.page?.length || -1;\n\t}\n\n\tprivate get PageCache() {\n\t\treturn this.m_options?.page?.cache || -1;\n\t}\n\n\tpublic async next(): Promise<boolean> {\n\t\t// if (this.PageLen > 0) {\n\t\t//     if (this.PageCache > 0) {\n\n\t\t//     } else {\n\t\t//         await this.populate();\n\t\t//     }\n\t\t// }\n\t\treturn ++this.m_nIterate < this.m_maxRows;\n\t}\n\n\tpublic async EOF(): Promise<boolean> {\n\t\treturn this.m_nIterate >= this.m_maxRows;\n\t}\n\tpublic async moveTo(position: number): Promise<boolean> {\n\t\treturn position == this.m_maxRows || (this.m_nIterate = position) == this.m_maxRows;\n\t}\n}\n","import { parse, resolve } from \"path\";\nimport Hashtable from \"../../Collections/HashMap/Hashtable\";\nimport { Exception } from \"../../Exceptions/Exception\";\nimport IConnection from \"../../Interfaces/IConnection\";\nimport IDataOptions from \"../../Interfaces/IDataOptions\";\nimport IResultSet from \"../../Interfaces/IResultSet\";\nimport { SqlParser } from \"../../Parsers/SQL/SqlParser\";\nimport ConnectionStringUtils from \"../../Utils/ConnectionStringUtils\";\nimport NumberUtils from \"../../Utils/NumberUtils\";\nimport SqlType from \"../../Utils/SqlType\";\nimport StringBuilder from \"../../Utils/StringBuilder\";\nimport StringUtils from \"../../Utils/StringUtils\";\nimport TextUtils from \"../../Utils/TextUtils\";\nimport { Utils } from \"../../Utils/Utils\";\nimport XoneJSONConnection from \"../JSONConnection/XoneJSONConnection\";\nimport XoneWebCoreConnectionData from \"./XoneWebCoreConnectionData\";\nimport XoneWebCoreResulset from \"./XoneWebCoreResulset\";\n//import fetch from \"node-fetch\";\n\ninterface Token {\n\taccess_token: string;\n\texpires_in: Date;\n\ttoken_type: string;\n\tscope: string;\n}\n\nexport default class XoneWebCoreConnection implements IConnection {\n\t// Cliente para conectar con LogonTest\n\t// private m_clientId = \"XIdsAPIdUQMB9bzf5\";\n\t// private m_clientSecret = \"q5d007Ma19GM1jN0IMhl6uqjKt7PoO\";\n\n\t// Cliente para conectar con AllByxone\n\t// private m_clientId = \"XIdsAPIXmITgixqqj\";\n\t// private m_clientSecret = \"5M3c9Oae5A7ewzTDU2Z3xh1B9P0Z79\";\n\n\t// // Prod\n\t// private m_url = \"https://web.xonedev.cloud/api/itf/DoAction\";\n\t// local\n\t//private m_url = \"http://localhost:1854/api/itf/DoAction\";\n\n\tprivate m_idsUrl;\n\n\tprivate m_token: Token;\n\tprivate m_data: any;\n\tprivate m_resulset: XoneWebCoreResulset;\n\tprivate bIsLoginCall: boolean;\n\tprivate bIsJWTCall: boolean;\n\tprivate sToken: string;\n\tprivate nFlags: number;\n\tprivate nTimeout: number;\n\tprivate nSecurityLevel: number;\n\tprivate sUrlAddress: string;\n\tprivate sMethod: string;\n\tprivate sUsername: string;\n\tprivate sPassword: string;\n\tprivate sEndpoint: string;\n\tprivate sAction: string;\n\tprivate sAuthAction: string;\n\tprivate sContentType: string;\n\tprivate bIsSqlQuery: boolean;\n\tprivate bPostUrlEncode: boolean;\n\tprivate bIsCertificatePinningEnabled: boolean;\n\tprivate sLocalCertPath: string;\n\tprivate bAuthenticate: boolean;\n\tprivate sAuthenticationUsername: string;\n\tprivate sAuthenticationPassword: string;\n\tprivate bUseRemoteBroker: boolean;\n\tprivate sRemoteMapped: string;\n\tprivate sRemoteDest: string;\n\tprivate bAllowUnsafeCertificates: boolean;\n\n\t/**\n\t *\n\t */\n\tconstructor(sConnectionString: string) {\n\t\tthis.m_token = null;\n\t\t// Unos valore por defecto\n\t\tthis.m_idsUrl = \"https://ids.xonedev.cloud/connect/token\";\n\t\tthis.sUrlAddress = \"https://web.xonedev.cloud/api/itf/DoAction\";\n\t\tthis.parseConnectionString(sConnectionString);\n\t}\n\n\texecuteUpdateAsync(Sentence: any): Promise<number> {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tasync executeNonQuery(data: any): Promise<any> {\n\t\tvar token = await this.readBearerTokenAsync();\n\t\tif (TextUtils.isEmpty(token)) throw new Exception(\"No Auth\");\n\t\t// var parser=new SqlParser(\"ROWID\");\n\t\t// parser.ParseSqlString(Sentence as string);\n\t\t// var data= {\n\t\t//     coll: args[0],\n\t\t//     action: \"select\",\n\t\t//     where: parser.GetWhereSentence()\n\t\t// };\n\t\tconst response = await fetch(this.sUrlAddress, {\n\t\t\tmethod: \"POST\", // *GET, POST, PUT, DELETE, etc.\n\t\t\t//mode: 'no-cors', // no-cors, *cors, same-origin\n\t\t\t// cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n\t\t\t//credentials: 'omit', // include, *same-origin, omit\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\tAuthorization: \"Bearer \" + token,\n\t\t\t\t// 'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t},\n\t\t\t//redirect: 'follow', // manual, *follow, error\n\t\t\t// referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n\t\t\tbody: JSON.stringify(data), // body data type must match \"Content-Type\" header\n\t\t});\n\t\tconst result = await response.json();\n\t\tif (result.hasError === true) throw new Exception(result.err);\n\t\treturn 1;\n\t}\n\n\tprivate getDataFromParser(parser: SqlParser): any {\n\t\t// amiyares 20/08/2021: reemplazo el valor \"NULL\" por null\n\t\tconst data = parser.GetFields().toJSON();\n\t\tObject.entries(data).forEach(([key, value]) => {\n\t\t\tif (value === \"NULL\") data[key] = null;\n\t\t});\n\t\treturn data;\n\t}\n\n\tprivate formatOnlineData(parser: SqlParser, collName: string, keys: any) {\n\t\tif (parser.GetSqlType() == SqlType.SQLTYPE_SELECT) {\n\t\t\treturn {\n\t\t\t\tcoll: collName,\n\t\t\t\taction: \"select\",\n\t\t\t\twhere: parser.GetWhereSentence(),\n\t\t\t};\n\t\t}\n\t\tif (parser.GetSqlType() == SqlType.SQLTYPE_UPDATE || parser.GetSqlType() == SqlType.SQLTYPE_INSERT) {\n\t\t\treturn {\n\t\t\t\tcoll: collName,\n\t\t\t\taction: \"write\",\n\t\t\t\tdata: this.getDataFromParser(parser),\n\t\t\t\tkeys: parser.getKeys(),\n\t\t\t\twhere: parser.GetWhereSentence(),\n\t\t\t};\n\t\t}\n\t\tif (parser.GetSqlType() == SqlType.SQLTYPE_DELETE) {\n\t\t\treturn {\n\t\t\t\tcoll: collName,\n\t\t\t\taction: \"drop\",\n\t\t\t\tdata: this.getDataFromParser(parser),\n\t\t\t\tkeys: parser.getKeys(),\n\t\t\t\twhere: null, // SqlParser.getWhereOnlyFields(parser.GetWhereSentence())\n\t\t\t};\n\t\t}\n\t\treturn {};\n\t\t// if (parser.GetSqlType() == SqlType.SQLTYPE_INSERT) {\n\t\t//     return {\n\t\t//         coll: collName,\n\t\t//         action: \"write\",\n\t\t//         data: this.getDataFromParser(parser),\n\t\t//         keys: parser.getKeys(),\n\t\t//         data: this.getDataFromParser(parser)\n\t\t//     };\n\t\t// }\n\t}\n\n\tasync executeAsync(Sentence: any, MaxRows: number, ...args): Promise<any> {\n\t\tif (typeof Sentence == \"string\") {\n\t\t\tlet tmp = new SqlParser(\"ROWID\");\n\t\t\ttmp.ParseSqlString(Sentence);\n\t\t\tSentence = tmp;\n\t\t}\n\t\treturn await this.executeNonQuery(this.formatOnlineData(Sentence, args[0], args[1]));\n\t}\n\n\tprivate getAuthData(): string {\n\t\tlet bld = new StringBuilder(\"client_id=\");\n\t\tbld.append(this.sUsername);\n\t\tbld.append(\"&client_secret=\");\n\t\tbld.append(this.sPassword);\n\t\tbld.append(\"&grant_type=client_credentials\");\n\t\treturn bld.toString();\n\t}\n\n\tprivate async readBearerTokenAsync(): Promise<string> {\n\t\tif (this.m_token != null) {\n\t\t\tif (this.m_token.expires_in > new Date()) return this.m_token.access_token;\n\t\t}\n\t\t// if (this.sUrlAddress.indexOf('localhost') > 0)\n\t\t//     return 'FORTEST';\n\t\tconst response = await fetch(this.m_idsUrl, {\n\t\t\tmethod: \"POST\", // *GET, POST, PUT, DELETE, etc.\n\t\t\t//mode: \"no-cors\",\n\t\t\t// cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n\t\t\t// credentials: 'same-origin', // include, *same-origin, omit\n\t\t\theaders: {\n\t\t\t\t//'Content-Type': 'application/json',\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t},\n\t\t\t//redirect: 'follow', // manual, *follow, error\n\t\t\t//referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n\t\t\tbody: this.getAuthData(), // body data type must match \"Content-Type\" header\n\t\t});\n\t\tlet token = await response.json();\n\t\tif (token.error) {\n\t\t\tconsole.error(token.error);\n\t\t\treturn (this.m_token = null);\n\t\t}\n\t\tvar expire = new Date();\n\t\texpire.setSeconds(expire.getSeconds() + token.expires_in);\n\t\tthis.m_token = token;\n\t\tthis.m_token.expires_in = expire;\n\t\treturn token.access_token;\n\n\t\t//   return response.then((value)=> {\n\t\t//     return value.json().then((token)=> {\n\t\t//         if (token.error) {\n\t\t//             console.error(token.error);\n\t\t//             return this.m_token=null;\n\t\t//         }\n\t\t//         var expire=new Date();\n\t\t//         expire.setSeconds(expire.getSeconds()+token.expires_in);\n\t\t//         this.m_token=token;\n\t\t//         this.m_token.expires_in=expire;\n\t\t//         return token.access_token;\n\t\t//     })\n\t\t//     .catch((reason)=>{\n\t\t//         console.error(reason);\n\t\t//         return null;\n\t\t//     }); // parses JSON response into native JavaScript objects\n\t\t//   })\n\t\t//   .catch((reason)=> {\n\t\t//       console.error(reason);\n\t\t//       throw new Exception(reason);\n\t\t//   })\n\t}\n\n\texecuteQuery(): IResultSet {\n\t\treturn new XoneWebCoreResulset();\n\t}\n\n\tasync fetchDataAsync(data: any): Promise<any> {\n\t\tvar token = await this.readBearerTokenAsync(); //\n\t\tif (TextUtils.isEmpty(token)) throw new Exception(\"No Auth\");\n\t\t// var parser = new SqlParser(\"ROWID\");\n\t\t// parser.ParseSqlString(Sentence as string);\n\t\t// var data = {\n\t\t//     //count:args.length>0?args[0]:false,\n\t\t//     //coll: args.length>1?args[1]:\"\",\n\t\t//     action: \"select\",\n\t\t//     where: parser.GetWhereSentence(),\n\t\t//     sort: parser.getOrderBySentence()\n\t\t//     //page: args.length>2?args[2]:{}\n\t\t// };\n\t\t// data = { ...data, ...options };\n\t\tconst response = await fetch(this.sUrlAddress, {\n\t\t\tmethod: \"POST\", // *GET, POST, PUT, DELETE, etc.\n\t\t\t//mode: 'no-cors', // no-cors, *cors, same-origin\n\t\t\t// cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n\t\t\t//credentials: 'omit', // include, *same-origin, omit\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\tAuthorization: \"Bearer \" + token,\n\t\t\t\t// 'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t},\n\t\t\t//redirect: 'follow', // manual, *follow, error\n\t\t\t// referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n\t\t\tbody: JSON.stringify(data), // body data type must match \"Content-Type\" header\n\t\t});\n\t\treturn await response.json();\n\t}\n\n\tasync executeQueryAsync(Sentence: string, ...args): Promise<IResultSet> {\n\t\t// var parser = new SqlParser(\"ROWID\");\n\t\t// parser.ParseSqlString(Sentence as string);\n\t\tvar data: IDataOptions = {\n\t\t\taction: \"select\",\n\t\t\t// where: parser.GetWhereSentence(),\n\t\t\t// sort: parser.getOrderBySentence()\n\t\t\t//page: args.length>2?args[2]:{}\n\t\t};\n\t\tdata = { ...data, ...args[0] };\n\t\tvar rs = new XoneWebCoreResulset(this, data);\n\t\treturn await rs.populate();\n\t}\n\n\t// async executeQueryAsyncOld(Sentence: any, ...args): Promise<IResultSet> {\n\t//     var token = await this.readBearerTokenAsync();\n\t//     if (TextUtils.isEmpty(token))\n\t//         throw new Exception(\"No Auth\");\n\t//     var parser = new SqlParser(\"ROWID\");\n\t//     parser.ParseSqlString(Sentence as string);\n\t//     var data = {\n\t//         //count:args.length>0?args[0]:false,\n\t//         //coll: args.length>1?args[1]:\"\",\n\t//         action: \"select\",\n\t//         where: parser.GetWhereSentence(),\n\t//         sort: parser.getOrderBySentence()\n\t//         //page: args.length>2?args[2]:{}\n\t//     };\n\t//     this.m_data = { ...data, ...args[0] };\n\t//     const response = await fetch(this.m_url, {\n\t//         method: 'POST', // *GET, POST, PUT, DELETE, etc.\n\t//         //mode: 'no-cors', // no-cors, *cors, same-origin\n\t//         // cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n\t//         //credentials: 'omit', // include, *same-origin, omit\n\t//         headers: {\n\t//             'Content-Type': 'application/json',\n\t//             \"Authorization\": \"Bearer \" + token\n\t//             // 'Content-Type': 'application/x-www-form-urlencoded',\n\t//         },\n\t//         //redirect: 'follow', // manual, *follow, error\n\t//         // referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n\t//         body: JSON.stringify(this.m_data) // body data type must match \"Content-Type\" header\n\t//     });\n\t//     const result = await response.json();\n\t//     return this.m_resulset = new XoneWebCoreResulset(result.data);\n\t//     // return this.readBearerTokenAsync().then((token) => {\n\t//     //     if (TextUtils.isEmpty(token))\n\t//     //         throw new Exception(\"No Auth\");\n\t//     //     var parser=new SqlParser(\"ROWID\");\n\t//     //     parser.ParseSqlString(Sentence as string);\n\t//     //     var data= {\n\t//     //         coll: args[0],\n\t//     //         action: \"select\",\n\t//     //         where: parser.GetWhereSentence()\n\t//     //     };\n\t//     //     const response = fetch(this.m_url, {\n\t//     //         method: 'POST', // *GET, POST, PUT, DELETE, etc.\n\t//     //         mode: 'no-cors', // no-cors, *cors, same-origin\n\t//     //         // cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n\t//     //         //credentials: 'omit', // include, *same-origin, omit\n\t//     //         headers: {\n\t//     //         'Content-Type': 'application/json',\n\t//     //         \"Authorization\": \"Bearer \"+token\n\t//     //         // 'Content-Type': 'application/x-www-form-urlencoded',\n\t//     //         },\n\t//     //         //redirect: 'follow', // manual, *follow, error\n\t//     //         // referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n\t//     //         body: JSON.stringify(data) // body data type must match \"Content-Type\" header\n\t//     //     });\n\t//     //     return response.then((value)=>\n\t//     //             value.json().then((result)=>\n\t//     //                 new XoneWebCoreResulset(result.data)))\n\t//     //             .catch((reason)=> {\n\t//     //                 console.error(reason);\n\t//     //                 return null;\n\t//     //             });\n\t//     // });\n\t// }\n\n\tasync countAsync(...args): Promise<IResultSet> {\n\t\t// var token = await this.readBearerTokenAsync();\n\t\t// if (TextUtils.isEmpty(token))\n\t\t//     throw new Exception(\"No Auth\");\n\t\t// var parser = new SqlParser(\"ROWID\");\n\t\t// parser.ParseSqlString(Sentence as string);\n\t\tvar data: IDataOptions = {\n\t\t\taction: \"count\",\n\t\t\t// where: parser.GetWhereSentence(),\n\t\t\t// sort: parser.getOrderBySentence()\n\t\t};\n\t\tdata = { ...data, ...args[0] };\n\t\tvar rs = new XoneWebCoreResulset(this, data);\n\t\treturn await rs.populate();\n\t\t// const response = await fetch(this.m_url, {\n\t\t//     method: 'POST', // *GET, POST, PUT, DELETE, etc.\n\t\t//     //mode: 'no-cors', // no-cors, *cors, same-origin\n\t\t//     // cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n\t\t//     //credentials: 'omit', // include, *same-origin, omit\n\t\t//     headers: {\n\t\t//         'Content-Type': 'application/json',\n\t\t//         \"Authorization\": \"Bearer \" + token\n\t\t//         // 'Content-Type': 'application/x-www-form-urlencoded',\n\t\t//     },\n\t\t//     //redirect: 'follow', // manual, *follow, error\n\t\t//     // referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n\t\t//     body: JSON.stringify(this.m_data) // body data type must match \"Content-Type\" header\n\t\t// });\n\t\t// const result = await response.json();\n\t\t// return this.m_resulset = new XoneWebCoreResulset(result.data);\n\t}\n\n\tprivate parseConnectionString(sConnection: string): void {\n\t\tlet parameters = ConnectionStringUtils.parseConnectionString(sConnection);\n\t\tthis.bIsLoginCall = StringUtils.ParseBoolValue(parameters.get(\"logincall\"));\n\t\t// TAG 20050201: Luis: Permitir una primera aproximacion a authorization por JWT\n\t\t// En el connstring debe ponerse jwtcall=true y el token que se tenga\n\t\tthis.bIsJWTCall = StringUtils.ParseBoolValue(parameters.get(\"jwtcall\"));\n\t\tthis.sToken = StringUtils.SafeToString(parameters.get(\"token\"), Utils.EMPTY_STRING);\n\t\tthis.nFlags =\n\t\t\tthis.nFlags |\n\t\t\t(StringUtils.ParseBoolValue(parameters.get(\"odataformat\")) ? XoneJSONConnection.FLAG_XONEJSONODATA : XoneJSONConnection.FLAG_XONEJSONSQL);\n\t\tthis.nFlags =\n\t\t\tthis.nFlags |\n\t\t\t(StringUtils.ParseBoolValue(parameters.get(\"customformat\")) ? XoneJSONConnection.FLAG_XONEJSONCUSTOM : XoneJSONConnection.FLAG_XONEJSONSQL);\n\t\tthis.nTimeout = NumberUtils.SafeToInt(parameters.get(\"timeout\"), 60);\n\t\tthis.nSecurityLevel = NumberUtils.SafeToInt(parameters.get(\"security level\"), 0);\n\t\tthis.sUrlAddress = parameters.get(\"data source\");\n\t\tif (this.sUrlAddress != null) {\n\t\t\tthis.sUrlAddress = this.sUrlAddress.trim();\n\t\t\tif (this.sUrlAddress.endsWith(\"?\")) {\n\t\t\t\tthis.sUrlAddress = this.sUrlAddress.substring(0, this.sUrlAddress.length - 1);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.sUrlAddress = Utils.EMPTY_STRING;\n\t\t}\n\t\tthis.m_idsUrl = parameters.get(\"ids\") || this.m_idsUrl;\n\t\t//this.m_url=this.sUrlAddress;\n\t\tthis.sMethod = parameters.get(\"method\");\n\t\tif (this.sMethod == null) {\n\t\t\tthis.sMethod = \"POST\";\n\t\t}\n\t\tthis.sUsername = parameters.get(\"xoneuser\");\n\t\tif (this.sUsername == null) {\n\t\t\tthis.sUsername = Utils.EMPTY_STRING;\n\t\t}\n\t\tthis.sPassword = parameters.get(\"xonepass\");\n\t\tif (this.sPassword == null) {\n\t\t\tthis.sPassword = Utils.EMPTY_STRING;\n\t\t}\n\t\tthis.sEndpoint = parameters.get(\"endpoint\");\n\t\tif (this.sEndpoint == null) {\n\t\t\tthis.sEndpoint = Utils.EMPTY_STRING;\n\t\t}\n\t\t// TAG 20050208: Luis: Permitir customizar mas las colecciones online\n\t\t// en el connstring se puede poner Action=nombreaccion y AuthAction=nombreaccionauth\n\t\tthis.sAction = StringUtils.SafeToString(parameters.get(\"action\"), XoneJSONConnection.DEFAULT_ACTION_NAME);\n\t\tthis.sAuthAction = StringUtils.SafeToString(parameters.get(\"authaction\"), XoneJSONConnection.DEFAULT_AUTHACTION_NAME);\n\t\tthis.sContentType = StringUtils.SafeToString(parameters.get(\"content-type\"), XoneJSONConnection.DEFAULT_CONTENT_TYPE);\n\t\tthis.bIsSqlQuery = StringUtils.ParseBoolValue(parameters.get(\"sqlquery\"), true);\n\t\t// TAG: 0604201601 nuevo parametro en el connstring para poder codeficar el cupero del post en formato key=valeu&key=vale\n\t\tthis.bPostUrlEncode = StringUtils.ParseBoolValue(parameters.get(\"postencode\"), false);\n\t\tthis.bIsCertificatePinningEnabled = StringUtils.ParseBoolValue(parameters.get(\"enablecertificatepinning\"));\n\t\tthis.sLocalCertPath = StringUtils.SafeToString(parameters.get(\"localcertificatepath\"));\n\t\t// Para la autenticacion remota, puede ser por conexion o por llamada del script del metodo\n\t\tthis.bAuthenticate = StringUtils.ParseBoolValue(parameters.get(\"auth\"), false);\n\t\tif (this.bAuthenticate) {\n\t\t\tthis.sAuthenticationUsername = parameters.get(\"user id\");\n\t\t\tthis.sAuthenticationPassword = parameters.get(\"password\");\n\t\t}\n\t\tthis.bUseRemoteBroker = StringUtils.ParseBoolValue(parameters.get(\"remote broker\"), false);\n\t\tthis.sRemoteMapped = StringUtils.SafeToString(parameters.get(\"remote mapped\"));\n\t\tthis.sRemoteDest = StringUtils.SafeToString(parameters.get(\"remote destination\"));\n\t\tthis.bAllowUnsafeCertificates = StringUtils.ParseBoolValue(parameters.get(\"allowunsafecertificates\"), false);\n\t}\n\n\tcreateStatement() {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tisClosed(): boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tcommit() {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tbeginTrans(): void {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\trollback(): void {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\texecute(parameter: any, MaxRows: number) {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\texecuteUpdate(sql: string): number;\n\texecuteUpdate(Sentence: any): number;\n\texecuteUpdate(Sentence: any): number {\n\t\treturn 0;\n\t}\n\texecuteOperation(OperType: number, tableName: string, values: any, whereClause: string): number {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tgetDBMS(): string {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\touterJoinsSupported(): boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tacceptsParsedSentences(): boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tacceptsEmptyQueries(): boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tLastRowsAffected(): number {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tLastInsertedRowId(): number {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tcancelProcesses(flags: number): number {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tsetCryptoData(cryptoData: Hashtable<string, Object>): void {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tgetCryptoData(): Hashtable<string, Object> {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tcryptoSupported(): boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tgetTokenFromAuth(login: string, pass: string): string {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n}\n","import IConnection from \"../../Interfaces/IConnection\";\nimport IFieldProperties from \"../../Interfaces/IField\";\nimport IResultSet from \"../../Interfaces/IResultSet\";\nimport IXoneApp from \"../../Interfaces/IXoneApp\";\nimport { SqlParser } from \"../../Parsers/SQL/SqlParser\";\nimport { Guid } from \"../../Utils/Guid\";\nimport XoneTestResulset from \"../Test/XoneTestResulset\";\nimport XoneConnectionData from \"../XoneConnectionData\";\nimport XoneWebCoreConnection from \"./XoneWebCoreConnection\";\nimport XoneWebCoreResulset from \"./XoneWebCoreResulset\";\n\nexport default class XoneWebCoreConnectionData extends XoneConnectionData {\n    private m_context: any;\n    private m_nSessionIdCounter: any;\n    private m_nLastInsertedId: any;\n    private m_nLastRecordsAffected: any;\n    private m_strLastInsertedTable: any;\n    private m_stmt: {};\n    m_connection: XoneWebCoreConnection;\n    /**\n     * Crea una conexin a base de datos\n     *\n     * @param Name  Nombre de la conexin.\n     * @param Owner Aplicacin a la cual pertenece esta conexin.\n     */\n    constructor(context: any, Name: string, Owner: IXoneApp) {\n        super(Name, Owner);\n        this.m_context = context;\n        // K11101001: Utilizar SESSIONID numrico para mejorar el rendimiento de la maquinaria.\n        // this.m_nSessionIdCounter = new AtomicLong(0);\n        // // A14011501: Optimizaciones para obtener claves numricas de conexiones sqlite y dems.\n        // this.m_nLastInsertedId = new ThreadLocal<>();\n        // this.m_nLastRecordsAffected = new ThreadLocal<>();\n        // this.m_strLastInsertedTable = new ThreadLocal<>();\n        // // TODO ADD TAG\n        // // Nos creamos el holder para el statement...\n        // this.m_stmt = {}; // new ThreadLocal<>();\n    }\n\n    /**\n     * TRUE si el DBMS soporta la sintaxis TOP x\n     *\n     * @return Esta funcin posiblemente no se redefina en esta plataforma.\n     */\n    public TopAllowed(): boolean {\n        return false;\n    }\n\n    /**\n     * TRUE si el DBMS soporta la sintaxis LIMIT x\n     *\n     * @return Mirar arriba plis.\n     */\n    public LimitAllowed(): boolean {\n        return false;\n    }\n\n    /**\n     * TRUE si la conexin tiene caracteres para escapear cadenas de caracteres.\n     *\n     * @return Devuelve TRUE si hay caracteres en la lista para sustituir.\n     */\n    public HasEscapeChars(): boolean {\n        return false;\n    }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Devuelve TRUE si la conexin acepta sentencias SQL parseadas para su ejecucin o para queries.\n     *\n     * @return\n     */\n    public acceptsParsedSentences(): boolean {\n        return true;\n    }\n\n    public acceptsEmptyQueries(): boolean {\n        return false;\n    }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Devuelve TRUE si la conexin permite recuperar un ID autonumrico dado un ROWID.\n     *\n     * @return\n     */\n    public retrievesAutonumericKeys(): boolean {\n        return false;\n    }\n\n\n    /**\n     * Obtiene una conexin fsica a la fuente de datos que encapsula esta clase. Es de obligatoria redefinicin por los derivados de esta clase.\n     *\n     * @return Devuelve una nueva conexin de datos (o la misma si solo se emplea una)\n     * @throws Exception\n     */\n    public GetNewConnection(ReadOnly: boolean = false): IConnection {\n        return this.m_connection = new XoneWebCoreConnection(this.m_strConnString);\n    }\n\n    public GetCurrentConnection(ReadOnly: boolean = false): IConnection {\n        if (this.m_connection)\n            return this.m_connection;\n        return this.GetNewConnection(ReadOnly);\n    }\n\n    /**\n     * Crea un conjunto de datos sin conexin original. Para ello crea una local y la devuelve como\n     * parte del conjunto que la cierra cuando lo cierran a l\n     *\n     * @param Sentence Sentencia SQL que se ejecuta para obtener el conjunto de datos.\n     * @return Devuelve un conjunto de datos o NULL si algo falla.\n     * @throws Exception\n     */\n    /// public CreateRecordset(Sentence:string): IResultSet {\n    //     return this.CreateRecordset(null, Sentence);\n    // }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Ejecuta una sentencia SQL parseada que devuelve datos.\n     *\n     * @param Sentence\n     * @return\n     * @throws Exception\n     */\n    /// public CreateRecordset(Sentence:any): IResultSet{\n    //     return this.CreateRecordset(null, Sentence);\n    // }\n\n    /**\n     * Crea un objeto de acceso a datos (recordset) para leer los datos de un objeto\n     *\n     * @param Connection Conexin que se quiere usar para abrir la fuente de datos. NULL para crear una local y usarla solamente para esta funcin.\n     * @param Sentence   Setencia SQL (SELECT) que se quiere ejecutar para abrir la fuente de datos.\n     * @param MaxRows    Mximo de registros para no usar el que tiene por defecto la clase.\n     * @return Devuelve el conjunto de datos creado o NULL si algo falla.\n     * @throws Exception\n     */\n    /// public abstract CreateRecordset(Connection Connection, String Sentence, int MaxRows): IResultSet;\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Esta implementacin permite la ejecucin de sentencias SQL parseadas con anterioridad.\n     *\n     * @param Connection\n     * @param Sentence\n     * @param MaxRows\n     * @return\n     * @throws Exception\n     */\n    /// public abstract ResultSet CreateRecordset(Connection: IConnection | string, ...args?:any) throws Exception;\n\n    /*\n     * TODO ADD TAG 17042014: Luis Un recordset a partir de la clase de parametros\n     */\n    public CreateRecordset(Connection: IConnection | string, ...args: any): IResultSet {\n        return new XoneTestResulset(Connection as string);\n        // if (typeof Connection == 'string' ) {\n        //     return this.GetCurrentConnection().executeQuery(Connection as string);\n        // }\n        // return null;\n    }\n\n    /*\n     * TODO ADD TAG 17042014: Luis Un recordset a partir de la clase de parametros\n     */\n    public async CreateRecordsetAsync(Connection: IConnection | string, ...args: any): Promise<IResultSet> {\n        if (typeof Connection == 'string') {\n            return await this.GetCurrentConnection().executeQueryAsync(Connection as string, ...args);\n        }\n        return null;\n    }\n\n    /*\n     * TODO ADD TAG 17042014: Luis Un recordset a partir de la clase de parametros\n     */\n    public async CountAsync(Connection: IConnection | string, ...args: any): Promise<IResultSet> {\n        if (typeof Connection == 'string') {\n            return await this.GetCurrentConnection().countAsync(Connection as string, ...args);\n        }\n        return null;\n    }\n\n    /**\n     * Crea un objeto de acceso a datos (recordset) para leer los datos de un objeto\n     *\n     * @param Connection Conexin que se quiere usar para abrir la fuente de datos. NULL para crear una local y usarla solamente para esta funcin.\n     * @param Sentence   Setencia SQL (SELECT) que se quiere ejecutar para abrir la fuente de datos.\n     * @return Devuelve el conjunto de datos creado o NULL si algo falla.\n     * @throws Exception\n     */\n    //public abstract ResultSet CreateRecordset(Connection Connection, String Sentence) throws Exception;\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Ejecuta una sentencia SQL parseada que devuelve datos.\n     *\n     * @param conn\n     * @param Sentence\n     * @return\n     * @throws Exception\n     */\n    /// public abstract ResultSet CreateRecordset(Connection conn, SqlParser Sentence) throws Exception;\n\n    /**\n     * Ejecuta una sentencia SQL dentro de la conexin que manipula este objeto. No lleva conexin fsica como parmetro porque crea una temporal, trabaja con ella y la cierra.\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado.\n     *\n     * @param Sentence Sentencia SQL que se quiere ejecutar.\n     * @return Devuelve TRUE si la ejecucin de la sentencia SQL es correcta.\n     * @throws Exception\n     */\n    // public ExecuteSqlString(Sentence: string): any {\n    //     return ExecuteSqlString(null, Sentence, true);\n    // }\n\n    /**\n     * A10090601:\tIncluir el mecanismo de rplica selectiva por colecciones a la maquinaria.\n     * Ejecuta un SQL sin replicar\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado.\n     */\n    // public Object ExecuteLocalSqlString(String Sentence) throws Exception {\n    //     return ExecuteSqlString(null, Sentence, false);\n    // }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Ejecuta una sentencia SQL parseada con rplica.\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado.\n     *\n     * @param Sentence\n     * @return\n     * @throws Exception\n     */\n    // public Object ExecuteParsedSql(SqlParser Sentence) throws Exception {\n    //     return ExecuteParsedSql(null, Sentence, true);\n    // }\n\n    /**\n     * Ejecuta una sentencia SQL dentro de la conexin que manipula este objeto.\n     * A10090601:\tIncluir el mecanismo de rplica selectiva por colecciones a la maquinaria.\n     * Un parmetro para decir si replica.\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado\n     *\n     * @param Connection Conexin de datos que se quiere usar para ejecutar la sentencia. NULL para crear una temporal, ejecutar la sentencia y cerrarla.\n     * @param Sentence   Sentencia SQL que se va a ejecutar.\n     * @param Replicate  TRUE si replica.\n     * @return Devuelve TRUE si la sentencia se ejecuta correctamente.\n     * @throws SQLException\n     * @throws Exception\n     */\n    public ExecuteSqlString(Connection: IConnection | string, Sentence?: SqlParser | string, Replicate?: boolean, ...args): any {\n        return 0;\n    }\n\n    public async ExecuteSqlStringAsync(Connection: IConnection | string, Sentence?: SqlParser | string, Replicate?: boolean, ...args): Promise<any> {\n        return await this.GetCurrentConnection().executeAsync(Sentence, 100, ...args);\n    }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Esta implementacin opcional permite ejecutar una sentencia SQL parseada en vez de una cadena SQL.\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado.\n     *\n     * @param Connection\n     * @param Sentence\n     * @param Replicate\n     * @return\n     * @throws SQLException\n     * @throws Exception\n     */\n    public ExecuteParsedSql(Connection: IConnection | string, Sentence?: SqlParser | string, Replicate?: boolean, ...args): any {\n        return 0;\n    }\n\n    public async ExecuteParsedSqlAsync(Connection: IConnection | string, Sentence?: SqlParser | string, Replicate?: boolean, ...args): Promise<any> {\n        return await this.GetCurrentConnection().executeAsync(Sentence, 100, ...args);\n    }\n\n\n\n    /**\n     * Reemplaza el valor del operador especfico dentro de la cadena SQL que se pasa como parmetro.\n     *\n     * @param Collection Coleccin con la que se est trabajando.\n     * @param Sentence   Sentencia SQL o cadena en la cual se quiere sustituir el operador.\n     * @param OperName   Nombre del operador que se quiere sustituir.\n     * @return Devuelve la sentencia original con el operador sustituido.\n     * @throws Exception\n     */\n    public ReplaceCustomOper(Collection: IFieldProperties, Sentence: string, OperName: string): string {\n        return Sentence;\n    }\n\n    /**\n     * Inserta una sentencia TOP dentro del SQL que se pasa como parmetro. Colocada aqu para mantener compatibilidad de interfaces\n     * pero no se implementar en esta plataforma.\n     *\n     * @param Sentence Sentencia SQL que se quiere modificar.\n     * @param Rows     Cantidad de filas que se quiere limitar en el TOP x o LIMIT x\n     * @return La misma sentencia pasada como parmetro.\n     */\n    public InsertTop(Sentence: string, Rows: number): string {\n        return Sentence;\n    }\n\n    /**\n     * Dado un nombre de campo lo formatea usando los caracteres de inicio y fin de campo.\n     *\n     * @param FieldName Nombre del campo a formatear.\n     * @return Devuelve el nombre del campo encerrado en sus secuencias de inicio y fin de campo.\n     */\n    public QuoteFieldName(FieldName: string): string {\n        return FieldName;\n    }\n\n    /**\n     * Dado un nombre de tabla u otro tipo de objeto de base de datos, lo devuelve formateado con su prefijo si este est definido.\n     *\n     * @param ObjectName Nombre de tabla u objeto en general de la base de datos para arreglar con el prefijo.\n     * @return Devuelve el nombre de objeto ya desarrollado con su prefijo si aplica.\n     */\n    // public String FixObjectName(String ObjectName):string {\n    //     return FixObjectName(ObjectName, null);\n    // }\n\n\n\n    /**\n     * Dada una cadena sustituye los caracteres para los cuales se hayan definido secuencias de escape por dichas secuencias.\n     *\n     * @param Value Cadena en la cual se van a sustituir los caracteres por secuencias de escape.\n     * @return Devuelve la cadena original con los caracteres sustituidos por sus secuencias de escape.\n     */\n    public EscapeString(Value: string): string {\n        if (Value.startsWith('\\''))\n            return Value;\n        return `\\'${Value}\\'`;\n    }\n\n    /**\n     * Genera un ROWID para la conexin actual. Emplea los criterios de nmero de tabla, MID, DBID, etc.\n     *\n     * @param TableName Nombre de la tabla para la cual se quiere generar el ROWID.\n     * @return Devuelve un ROWID respetando los valores de rplica y el tamao del campo ROWID.\n     */\n    //public GenerateRowId(TableName:string):string {return Guid.create().toString();}\n\n    /**\n     * Desarrolla el valor de un objeto y lo devuelve como cadena lista para insertar en un SQL o un filtro\n     *\n     * @param Value Valor que se quiere desarrollar. Se usar la mscara de fecha de la conexin.\n     * @return CAdena representando el valor del objeto para escribir en una sentencia SQL o un filtro de datos.\n     */\n    // public DevelopObjectValue(Value:any):string {\n    //     return DevelopObjectValue(Value, true);\n    // }\n\n    /**\n     * Esta funcin se emplea para cerrar conexiones locales si es que las tiene. No necesariamente tiene por qu\n     * usarse para terminar la clase, simplemente cuando se quiera cerrar o destruir los objetos locales.\n     */\n    public Terminate(): void { }\n\n    /**\n     * Si el DBMS soporta left outer joins\n     */\n    public IsOuterJoinSupported(): boolean { return false; }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Devuelve una clave numrica dada una tabla y un ROWID. Permite abstraer la obtencin de la clave autonumrica\n     * en conexiones que no son offline.\n     *\n     * @param TableName\n     * @param RowIdFieldName\n     * @return\n     * @throws Exception\n     */\n    public RetrieveNumericKey(TableName: string, KeyName: string, RowIdFieldName: string, RowId: string): number { return 0; }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Esta funcin permite calcular si un ROWID es nico dentro de la conexin de datos.\n     *\n     * @param tableName\n     * @param RowID\n     * @return\n     * @throws Exception\n     */\n    public isUniqueRowID(tableName: string, RowID: string): boolean { return true; }\n\n    // A11120701: Mecanismo para exponer el DBMS de una conexin.\n    // Expone el tipo de DBMS que tiene debajo esta conexin. Obligatorio implementar.\n    public getDbmsTag(): string { return \"OnlineWebCore\" };\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./LinkedSearchInline.vue?vue&type=style&index=0&id=37329dfa&scoped=true&lang=css\"","import { XoneDataCollection } from \"../../core/XoneDataCollection\";\n\nexport default class Hashtable<K, V> implements IterableIterator<[K, V]> {\n    \n    \n    private _map = new Map<K,V>();\n    private _pointer = 0;\n\n    public get length() {\n        return  this._map.size;\n    }\n\n    public next(): IteratorResult<[K, V]> {\n        if (this._pointer < this._map.size) {\n            return {\n                done: false,\n                value: this._map[this._pointer++]\n            }\n        } else {\n            return {\n                done: true,\n                value: null\n            }\n        }\n    }\n\n    public  toJSON():any {\n        let obj = Object.create(null);\n        this._map.forEach((value,key) => {\n            if (typeof value =='string' && value.startsWith(\"'\") && value.endsWith(\"'\"))\n                obj[key]=value.substr(1,value.length-2);\n            else\n                obj[key]=value;\n        });\n        return obj;\n    }\n    \n\n    public values(): Array<V> {\n       return Array.from(this._map.values());\n    }\n\n    public keys(): Array<K> {\n        return Array.from(this._map.keys());\n     }\n\n     \n    public entrySet(): Array<[K,V]> {\n        return Array.from(this._map.entries());\n     }\n\n    public get entries() {\n        return this._map;\n    }\n\n    public isEmpty(): boolean {\n        return this._map.size===0;\n    }\n    \n\n    public containsKey(key: K): boolean {\n        return this._map.has(key);\n    }\n\n    public get(key: K) {\n        return this._map.get(key);\n    }\n\n    public delete(key: K): boolean {\n        return this._map.delete(key);\n    }\n\n    public put(key: K, value: V) {\n        if (value===null && this._map.has(key))\n            this._map.delete(key);\n        else\n            this._map.set(key, value);\n    }\n\n    public clear(): void {\n        this._map.clear();\n    }\n\n    public toObject(): any {\n        const obj = {};\n        this._map.forEach((value, key) => (obj[key as unknown as string] = value));\n        return obj;\n    }\n\n    [Symbol.iterator](): IterableIterator<[K, V]> {\n        return this._map.entries();\n    }\n} ","import ObjUtils from \"./ObjUtils\";\nimport StringUtils from \"./StringUtils\";\n\nexport default class NumberUtils {\n    static SafeToLong(value: any): number {\n        return this.SafeToInt(value);\n    }\n    static SafeToDouble(str: any) {\n\t\tif (!str || str===null)\n\t\t\treturn 0;\n        return Number.parseFloat(StringUtils.SafeToString(str));\n    }\n    static SafeToBool(Value: any): boolean {\n\t\tif (Value===null)\n\t\t\treturn false;\n\t\treturn StringUtils.ParseBoolValue(Value.toString());\n\t}\n\t\n\tstatic SafeToInt(str: any, nDefault:number=0): number {\n\t\tif (ObjUtils.IsNothing(str))\n\t\t\treturn nDefault;\n\t\ttry {\n\t\t\tlet retValue= Number.parseInt(StringUtils.SafeToString(str));\n\t\t\treturn Number.isInteger(retValue)?retValue:nDefault;\n\t\t} catch(e) {\n\t\t\tconsole.error(e);\n\t\t\treturn nDefault;\n\t\t}\n\t}\n\n} ","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Toast.vue?vue&type=style&index=0&id=0e840586&scoped=true&lang=css\"","export default class CXoneNameValuePair \n{\n\tpublic Name: string;\n\tpublic Value: Object;\n\t\n\tconstructor (name: string,  value: Object)\n\t{\n\t\tthis.Name =name;\n\t\tthis.Value =value;\n\t}\n}\n","import { XoneApplication } from \"./appData/core/XoneApplication\";\nimport XmlNode from \"./appData/Xml/JSONImpl/XmlNode\";\nimport { isMobile } from \"./helperFunctions/MobileBrowserHelper\";\nimport { generateUniqueDeviceId } from \"./helperFunctions/StringHelper\";\n\n/**\n * @typedef {Object} AppSize\n * @property {number} width\n * @property {number} height\n */\n\n/**\n * Handler App node Class\n */\nclass AppHandler {\n\t/**\n\t * _instance\n\t * @type{AppHandler}\n\t */\n\tstatic _instance;\n\n\t/**\n\t * appData\n\t * @type {XoneApplication}\n\t */\n\t_appData;\n\n\t/**\n\t * appNode\n\t * @type {XmlNode}\n\t */\n\t_appNode;\n\n\t/**\n\t * orientation\n\t * @type {string}\n\t */\n\t_orientation;\n\n\t/**\n\t * sizeConditions\n\t * @type {string}\n\t */\n\t_sizeConditions;\n\n\t/**\n\t * _version\n\t * @type {string}\n\t */\n\t_version = \"1.0.0.5\";\n\n\tconstructor() {\n\t\tif (AppHandler._instance) return AppHandler._instance;\n\t\tAppHandler._instance = this;\n\t}\n\n\tgetVersion() {\n\t\treturn this._version;\n\t}\n\n\t/**\n\t * @param {XoneApplication} appData\n\t */\n\tsetAppData(appData) {\n\t\tthis._appData = appData;\n\t\tthis.setAppNode();\n\t}\n\n\t/** @returns {string} */\n\tget orientation() {\n\t\treturn this._orientation;\n\t}\n\n\t/** @returns {string} */\n\tget sizeConditions() {\n\t\treturn this._sizeConditions;\n\t}\n\n\t// Set app node\n\tsetAppNode() {\n\t\tthis._appNode = this._appData.getAppNode();\n\t}\n\n\t// Get App width / height\n\n\t/**\n\t * Get App Size\n\t * @returns {AppSize}\n\t */\n\tgetAppSize() {\n\t\tconst width = this._appNode.getAttrValue(\"web-resolution-width\") || this._appNode.getAttrValue(\"resolution-width\");\n\t\tconst height = this._appNode.getAttrValue(\"web-resolution-height\") || this._appNode.getAttrValue(\"resolution-height\");\n\t\tif (isNaN(width) || isNaN(height)) {\n\t\t\tconsole.error(\"resolution-width and resolution-height must be numeric in <app></app>\");\n\t\t\treturn { width: null, height: null };\n\t\t}\n\t\treturn {\n\t\t\twidth: Number(width),\n\t\t\theight: Number(height),\n\t\t};\n\t}\n\n\t/**\n\t * Set Visual Conditions / Visual Macros\n\t * @param {Number} width\n\t * @param {Number} height\n\t */\n\tsetVisualConditionsMacros(width, height) {\n\t\t// Width / Height\n\t\tthis._appData.setGlobalMacro(\"##SCREEN_RESOLUTION_WIDTH##\", width.toString());\n\t\tthis._appData.setGlobalMacro(\"##SCREEN_RESOLUTION_HEIGHT##\", width.toString());\n\t\t// Orientation\n\t\tthis._orientation = width > height ? \"horizontal\" : \"vertical\";\n\t\tthis._appData.setGlobalMacro(\"##CURRENT_ORIENTATION##\", this._orientation);\n\t\t// VisualConditions\n\t\t// Breakpoints:\n\t\t// Extra Small\txs\tUp to 599px\n\t\t// Small\tsm\tUp to 1023px\n\t\t// Medium\tmd\tUp to 1439px\n\t\t// Large\tlg\tUp to 1919px\n\t\t// Extra Large\txl\tBigger than 1920px\n\t\tthis._sizeConditions = width < 600 ? \"xs\" : width < 1024 ? \"sm\" : width < 1440 ? \"md\" : width < 1920 ? \"lg\" : \"xl\";\n\t\tthis._appData.setVisualConditions(this._sizeConditions, false);\n\t}\n\n\t/**\n\t * Generate a GUID as a DeviceId\n\t * @returns {string}\n\t */\n\tgetDeviceId() {\n\t\tlet deviceId = localStorage.getItem(\"_deviceId\");\n\t\tif (!deviceId) localStorage.setItem(\"_deviceId\", (deviceId = generateUniqueDeviceId()));\n\t\treturn deviceId;\n\t}\n\n\t/**\n\t * Set appData inmutable Macros\n\t */\n\tsetInmutableMacros() {\n\t\tconst attributes = this._appNode.attrs;\n\n\t\tif (!attributes) {\n\t\t\tconsole.error(\"Not found <app></app>\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst deviceId = this.getDeviceId();\n\t\tconst [language, countryCode] = Intl.DateTimeFormat()\n\t\t\t.resolvedOptions()\n\t\t\t.locale.split(\"-\");\n\t\tconst { platform, vendor } = navigator;\n\n\t\tthis._appData.setGlobalMacro(\"##DEVICE_OS##\", \"web\");\n\t\tthis._appData.setGlobalMacro(\"##DEVICE_OSVERSION##\", platform);\n\t\tthis._appData.setGlobalMacro(\"##DEVICE_MODEL##\", vendor);\n\t\tthis._appData.setGlobalMacro(\"##VERSION##\", this.getAppValueWithConditions(\"version\") ?? \"1\");\n\t\tthis._appData.setGlobalMacro(\"##DEVICEID##\", deviceId);\n\t\tthis._appData.setGlobalMacro(\"##CURRENT_LANGUAGE##\", language);\n\t\tthis._appData.setGlobalMacro(\"##CURRENT_COUNTRY_CODE##\", countryCode);\n\t\tthis._appData.setGlobalMacro(\"##FRAME_VERSION##\", \"v1\");\n\t\tthis._appData.setGlobalMacro(\"##FRAME_VERSION_CODE##\", this.version);\n\t\tthis._appData.setGlobalMacro(\"##IS_MOBILE##\", isMobile());\n\n\t\tthis._appData.setGlobalMacro(\"##LIVEUPDATE_VERSION##\", \"0\");\n\t\tthis._appData.setGlobalMacro(\"##DEVICE_MANUFACTURER##\", \"web\");\n\t\tthis._appData.setGlobalMacro(\"##DEVICE_TYPE##\", \"web\");\n\t\tthis._appData.setGlobalMacro(\"##MID##\", \"-1\");\n\t\tthis._appData.setGlobalMacro(\"##DEVICE_OSVERSION##\", \"web\");\n\t\tthis._appData.setGlobalMacro(\"##CURRENT_DENSITY##\", \"1\");\n\t\tthis._appData.setGlobalMacro(\"##CURRENT_DENSITY_VALUE##\", \"1\");\n\t}\n\n\t/**\n\t * Get autologon attribute\n\t * @returns {boolean}\n\t */\n\tgetAutoLogon() {\n\t\tlet autoLogon = this._appNode.attrs.getValue(\"autologon\");\n\t\treturn autoLogon === \"true\";\n\t}\n\n\t/**\n\t * isScaleFontsize\n\t * @returns {boolean}\n\t */\n\tisScaleFontsize() {\n\t\treturn this.getAppValueWithConditions(\"scale-fontsize\") === \"true\";\n\t}\n\n\t/**\n\t * getWebFontFactor\n\t * @returns {string}\n\t */\n\tgetWebFontFactor() {\n\t\treturn this.getAppValueWithConditions(\"web-font-factor\");\n\t}\n\n\t// getEntryPoint() {\n\t//   return this.getAppValueWithConditions(\"entry-point\");\n\t// }\n\n\t// getLoginColl() {\n\t//   return this.getAppValueWithConditions(\"login-coll\");\n\t// }\n\n\tgetWebLayout() {\n\t\treturn this.getAppValueWithConditions(\"web-layout\");\n\t}\n\n\tgetAppValueWithConditions(attr) {\n\t\ttry {\n\t\t\t// get login-coll from attribute\n\t\t\tlet attribute = this._appNode.getAttrValue(attr);\n\n\t\t\t// get appNode\n\t\t\tconst app = this._appNode.toJSON().app;\n\n\t\t\t// get login-coll node\n\t\t\tconst attributeNode = app.childs.find((e) => e[attr]);\n\t\t\tif (!attributeNode || !attributeNode[attr]) return attribute;\n\n\t\t\t// login-coll items\n\t\t\tconst items = attributeNode[attr].childs\n\t\t\t\t.map((e) => e.item)\n\t\t\t\t.filter((e) => {\n\t\t\t\t\tconst conditions = e.attributes.conditions;\n\t\t\t\t\treturn conditions === \"\" || conditions.includes(\"web\");\n\t\t\t\t});\n\n\t\t\t// filter size conditions\n\t\t\tlet filteredItems = items.filter((e) => {\n\t\t\t\tconst conditions = e.attributes.conditions.split(\":\");\n\t\t\t\treturn conditions.includes(this.sizeConditions);\n\t\t\t});\n\n\t\t\t// filter orientation\n\t\t\tfilteredItems = (filteredItems.length !== 0 || items).filter((e) => {\n\t\t\t\tconst conditions = e.attributes.conditions.split(\":\");\n\t\t\t\treturn conditions.includes(this._orientation);\n\t\t\t});\n\n\t\t\treturn (filteredItems.length !== 0 || items)[0].attributes.name;\n\t\t} catch (ex) {\n\t\t\tconsole.error(`Error in getAppValueWithConditions: ${ex}`);\n\t\t}\n\t}\n}\n\nexport default new AppHandler();\n","export default class TextUtils {\n    static equals(arg0: string, arg1: string): boolean {\n        if (arg0==null)\n            return false;\n        return arg0.localeCompare(arg1)===0;\n    }\n    \n    static isEmpty(text: string) {\n        return (!text || text==='');\n    }\n}","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Checkbox.vue?vue&type=style&index=0&id=20e563e6&scoped=true&lang=css\"","import Hashtable from \"../Collections/HashMap/Hashtable\";\nimport TextUtils from \"./TextUtils\";\n\nexport default class ConnectionStringUtils {\n\n    /**\n     * Parsea una cadena de conexin y devuelve un HashMap con su set de clave/valor.\n     *\n     * @param sConnectionString Cadena de conexin en bruto.\n     * @return HashMap con los valores parseados.\n     */\n    public static parseConnectionString(sConnectionString:string):Hashtable<string, string>  {\n        const keyValuePair = new Hashtable<string, string>();\n        sConnectionString.split(\";\").forEach(sParameter=> {\n            let item=sParameter.split('=');\n            item.length>1 && keyValuePair.put(item[0].trim().toLowerCase(),item.length>0?item[1].trim():\"\");\n//             let separatorIndex = sParameter.indexOf('=');\n//             if (separatorIndex != -1 && (sParameter.length > (separatorIndex + 1))) {\n//                 let sKey = sParameter.substring(0, separatorIndex).toLowerCase();\n//                 if (!TextUtils.isEmpty(sKey)) {\n//                     sKey = sKey.trim();\n//                 }\n//                 let sValue = sParameter.substring(separatorIndex + 1);\n//                 if (!TextUtils.isEmpty(sValue)) {\n//                     sValue = sValue.trim();\n//                 }\n// //                if (keyValuePair.containsKey(sKey)) {\n// //                    throw new RuntimeException(\"Duplicate key \" + sKey + \" in connection string \" + sConnectionString);\n// //                }\n//                 keyValuePair.put(sKey, sValue);\n            // }\n        });\n        return keyValuePair;\n    }\n}\n","import Locale from \"../core/Localization/Locale\";\nimport NullPointerException from \"../Exceptions/NullPointerException\";\nimport Calendar from \"./Calendar\";\nimport NumberUtils from \"./NumberUtils\";\nimport ObjUtils from \"./ObjUtils\";\nimport StringUtils from \"./StringUtils\";\n\nexport default class ObjectDeveloper {\n\t// Field descriptor #55 I\n\tpublic static ONESECOND = 1000;\n\n\t// Field descriptor #55 I\n\tpublic static ONEMINUTE = 60000;\n\n\t// Field descriptor #55 I\n\tpublic static ONEHOUR = 3600000;\n\n\t// Field descriptor #55 I\n\tpublic static ONEDAY = 86400000;\n\n\t// Field descriptor #55 I\n\tpublic static ONEWEEK = 604800000;\n\n\t// Field descriptor #47 J\n\tpublic static ONEMONTH = 2419200000;\n\n\t// Field descriptor #47 J\n\tpublic static ONEYEAR = 31536000000;\n\n\t/**\n\t * Devuelve una cadena con el valor de un objeto desarrollado\n\t *\n\t * @param Value      Valor que se quiere desarrollar\n\t * @param Datemask   Mscara de fecha con la que se quiere formatear.\n\t * @param ForceNulls TRUE para forzar un valor NULL en caso de que el objeto sea nulo\n\t * @return Devuelve una cadena con el objeto desarrollado listo para poner en un filtro o un SQL.\n\t */\n\tpublic DevelopObjectValue(Value: any, Datemask: string = \"ymd\", ForceNulls: boolean = true): string {\n\t\tlet str: string, strDateSep: string, strAMPM: string;\n\t\tlet strMask = Datemask;\n\t\tlet dtTime: Calendar;\n\t\tlet n: number;\n\t\t//\n\t\t// Buscar la mscara por defecto\n\t\t// K10052602:\tPoner como mscara de fecha por defecto la de SQLite.\n\t\tif (0 >= strMask.length) {\n\t\t\tstrMask = \"ymd\";\n\t\t}\n\t\t//\n\t\t// Convertir el nombre del tipo y desarrollar esto...\n\t\tlet vt = ObjUtils.GetTypeTag(Value);\n\t\tswitch (vt) {\n\t\t\tcase ObjUtils.OBJ_TYPE_DATE:\n\t\t\tcase ObjUtils.OBJ_TYPE_CALENDAR:\n\t\t\t\t// Fecha\n\t\t\t\tdtTime = ObjUtils.SafeToCalendar(Value);\n\t\t\t\tif (dtTime == null) {\n\t\t\t\t\tthrow new NullPointerException(\"DevelopObjectValue(): Date value is null\");\n\t\t\t\t}\n\t\t\t\tif (strMask.substring(0, 2).equals(\"##\")) {\n\t\t\t\t\t// Separador\n\t\t\t\t\t// F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n\t\t\t\t\tstrDateSep = strMask.substring(2, 3);\n\t\t\t\t\tstrMask = strMask.substring(3, strMask.length);\n\t\t\t\t} // Separador\n\t\t\t\telse {\n\t\t\t\t\tstrDateSep = \"'\";\n\t\t\t\t}\n\t\t\t\tswitch (strMask) {\n\t\t\t\t\tcase \"mm/dd/yyyy\":\n\t\t\t\t\tcase \"mdy\": // MDY\n\t\t\t\t\t\t// F10052601:\tModificaciones en las funciones con meses (zero based)\n\t\t\t\t\t\tstr = String.format(\n\t\t\t\t\t\t\t\"%s%02d/%02d/%04d %02d:%02d:%02d%s\",\n\t\t\t\t\t\t\tstrDateSep,\n\t\t\t\t\t\t\tdtTime.get(Calendar.MONTH),\n\t\t\t\t\t\t\tdtTime.get(Calendar.DAY_OF_MONTH),\n\t\t\t\t\t\t\tdtTime.get(Calendar.YEAR),\n\t\t\t\t\t\t\tdtTime.get(Calendar.HOUR_OF_DAY),\n\t\t\t\t\t\t\tdtTime.get(Calendar.MINUTE),\n\t\t\t\t\t\t\tdtTime.get(Calendar.SECOND),\n\t\t\t\t\t\t\tstrDateSep\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"dd/mm/yyyy\":\n\t\t\t\t\tcase \"dmy\": // DMY\n\t\t\t\t\t\t// F10052601:\tModificaciones en las funciones con meses (zero based)\n\t\t\t\t\t\tstr = String.format(\n\t\t\t\t\t\t\t\"%s%02d/%02d/%04d %02d:%02d:%02d%s\",\n\t\t\t\t\t\t\tstrDateSep,\n\t\t\t\t\t\t\tdtTime.get(Calendar.DAY_OF_MONTH),\n\t\t\t\t\t\t\tdtTime.get(Calendar.MONTH),\n\t\t\t\t\t\t\tdtTime.get(Calendar.YEAR),\n\t\t\t\t\t\t\tdtTime.get(Calendar.HOUR_OF_DAY),\n\t\t\t\t\t\t\tdtTime.get(Calendar.MINUTE),\n\t\t\t\t\t\t\tdtTime.get(Calendar.SECOND),\n\t\t\t\t\t\t\tstrDateSep\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"yyyy/mm/dd\":\n\t\t\t\t\tcase \"ymd\": // YMD\n\t\t\t\t\t\t// F10052601:\tModificaciones en las funciones con meses (zero based)\n\t\t\t\t\t\t// F11041506: \tCambiar el campo de calendario usado para formatear fechas y horas.\n\t\t\t\t\t\t//str = `${strDateSep}${dtTime.get(Calendar.YEAR).toString()}-${(dtTime.get(Calendar.MONTH) ).toString().padStart(2,'0')}-${dtTime.get(Calendar.DAY_OF_MONTH).toString().padStart(2,'0')} ${dtTime.get(Calendar.HOUR_OF_DAY).toString().padStart(2,'0')}:${dtTime.get(Calendar.MINUTE).toString().padStart(2,'0')}:${dtTime.get(Calendar.SECOND).toString().padStart(2,'0')}${strDateSep}`;  String.format(\"%s%04d-%02d-%02d %02d:%02d:%02d%s\", strDateSep, dtTime.get(Calendar.YEAR), dtTime.get(Calendar.MONTH) , dtTime.get(Calendar.DAY_OF_MONTH), dtTime.get(Calendar.HOUR_OF_DAY), dtTime.get(Calendar.MINUTE), dtTime.get(Calendar.SECOND), strDateSep);\n\t\t\t\t\t\tstr = String.format(\n\t\t\t\t\t\t\t\"%s%04d-%02d-%02d %02d:%02d:%02d%s\",\n\t\t\t\t\t\t\tstrDateSep,\n\t\t\t\t\t\t\tdtTime.get(Calendar.YEAR),\n\t\t\t\t\t\t\tdtTime.get(Calendar.MONTH),\n\t\t\t\t\t\t\tdtTime.get(Calendar.DAY_OF_MONTH),\n\t\t\t\t\t\t\tdtTime.get(Calendar.HOUR_OF_DAY),\n\t\t\t\t\t\t\tdtTime.get(Calendar.MINUTE),\n\t\t\t\t\t\t\tdtTime.get(Calendar.SECOND),\n\t\t\t\t\t\t\tstrDateSep\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t// Mscara\n\t\t\t\t\t\tif (strMask.contains(\"dmy\")) {\n\t\t\t\t\t\t\t// Orden dmy\n\t\t\t\t\t\t\t// F10052601:\tModificaciones en las funciones con meses (zero based)\n\t\t\t\t\t\t\tstr = String.format(\n\t\t\t\t\t\t\t\t\"%s%02d/%02d/%04d ##TIME##%s\",\n\t\t\t\t\t\t\t\tstrDateSep,\n\t\t\t\t\t\t\t\tdtTime.get(Calendar.DAY_OF_MONTH),\n\t\t\t\t\t\t\t\tdtTime.get(Calendar.MONTH),\n\t\t\t\t\t\t\t\tdtTime.get(Calendar.YEAR),\n\t\t\t\t\t\t\t\tstrDateSep\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tstrMask = StringUtils.Replace(strMask, \"dmy\", str);\n\t\t\t\t\t\t} // Orden dmy\n\t\t\t\t\t\tif (strMask.contains(\"mdy\")) {\n\t\t\t\t\t\t\t// Orden mdy\n\t\t\t\t\t\t\t// F10052601:\tModificaciones en las funciones con meses (zero based)\n\t\t\t\t\t\t\tstr = String.format(\n\t\t\t\t\t\t\t\t\"%s%02d/%02d/%04d ##TIME##%s\",\n\t\t\t\t\t\t\t\tstrDateSep,\n\t\t\t\t\t\t\t\tdtTime.get(Calendar.MONTH),\n\t\t\t\t\t\t\t\tdtTime.get(Calendar.DAY_OF_MONTH),\n\t\t\t\t\t\t\t\tdtTime.get(Calendar.YEAR),\n\t\t\t\t\t\t\t\tstrDateSep\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tstrMask = StringUtils.Replace(strMask, \"mdy\", str);\n\t\t\t\t\t\t} // Orden mdy\n\t\t\t\t\t\tif (strMask.contains(\"ymd\")) {\n\t\t\t\t\t\t\t// Orden ymd\n\t\t\t\t\t\t\t// F10052601:\tModificaciones en las funciones con meses (zero based)\n\t\t\t\t\t\t\tstr = String.format(\n\t\t\t\t\t\t\t\t\"%s%04d-%02d-%02d ##TIME##%s\",\n\t\t\t\t\t\t\t\tstrDateSep,\n\t\t\t\t\t\t\t\tdtTime.get(Calendar.YEAR),\n\t\t\t\t\t\t\t\tdtTime.get(Calendar.MONTH),\n\t\t\t\t\t\t\t\tdtTime.get(Calendar.DAY_OF_MONTH),\n\t\t\t\t\t\t\t\tstrDateSep\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tstrMask = StringUtils.Replace(strMask, \"ymd\", str);\n\t\t\t\t\t\t} // Orden ymd\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// Comprobar el tipo de hora que lleva\n\t\t\t\t\t\tn = dtTime.get(Calendar.HOUR);\n\t\t\t\t\t\tif (strMask.contains(\"##PM##\")) {\n\t\t\t\t\t\t\t// Ajustar las horas y eso\n\t\t\t\t\t\t\tswitch (\n\t\t\t\t\t\t\t\tn // Ver las horas\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\t\tn = 12;\n\t\t\t\t\t\t\t\t\tstrAMPM = \"PM\";\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 13:\n\t\t\t\t\t\t\t\tcase 14:\n\t\t\t\t\t\t\t\tcase 15:\n\t\t\t\t\t\t\t\tcase 16:\n\t\t\t\t\t\t\t\tcase 17:\n\t\t\t\t\t\t\t\tcase 18:\n\t\t\t\t\t\t\t\tcase 19:\n\t\t\t\t\t\t\t\tcase 20:\n\t\t\t\t\t\t\t\tcase 21:\n\t\t\t\t\t\t\t\tcase 22:\n\t\t\t\t\t\t\t\tcase 23:\n\t\t\t\t\t\t\t\tcase 24:\n\t\t\t\t\t\t\t\t\tn -= 12;\n\t\t\t\t\t\t\t\t\tstrAMPM = \"PM\";\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tstrAMPM = \"AM\";\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} // Ver las horas\n\t\t\t\t\t\t\tstrMask = StringUtils.Replace(strMask, \"##PM##\", strAMPM);\n\t\t\t\t\t\t} // Ajustar las horas y eso\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tstrAMPM = \"24\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (strAMPM.length > 0) {\n\t\t\t\t\t\t\t// Formatear\n\t\t\t\t\t\t\tstr = String.format(\"%02d:%02d:%02d\", n, dtTime.get(Calendar.MINUTE), dtTime.get(Calendar.SECOND));\n\t\t\t\t\t\t\t////str =NumberUtilities.toString(n, 10) +\":\" + NumberUtilities.toString(dtTime.get(Calendar.MINUTE), 10, 2) + \":\";\n\t\t\t\t\t\t\t////str +=NumberUtilities.toString(dtTime.get(Calendar.SECOND), 10, 2);\n\t\t\t\t\t\t} // Formatear\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tstr = \"\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstrMask = StringUtils.Replace(strMask, \"##TIME##\", str);\n\t\t\t\t\t\tstr = strMask;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ObjUtils.NATIVE_TYPE_INT:\n\t\t\tcase ObjUtils.NATIVE_TYPE_LONG:\n\t\t\t\tstr = Value.toString();\n\t\t\t\tbreak;\n\t\t\tcase ObjUtils.NATIVE_TYPE_BOOL:\n\t\t\t\tstr = NumberUtils.SafeToBool(Value) ? \"-1\" : \"0\";\n\t\t\t\tbreak;\n\t\t\tcase ObjUtils.OBJ_TYPE_NULL:\n\t\t\t\tstr = \"NULL\";\n\t\t\t\tbreak;\n\t\t\tcase ObjUtils.NATIVE_TYPE_DOUBLE:\n\t\t\tcase ObjUtils.NATIVE_TYPE_FLOAT:\n\t\t\t\tstr = Value.toString();\n\t\t\t\tif (str.contains(\",\")) {\n\t\t\t\t\tstr = StringUtils.Replace(str, \",\", \".\");\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase ObjUtils.OBJ_TYPE_STRING:\n\t\t\t\t// Las cadenas de longitud cero sern nulos, dijo el seor...\n\t\t\t\tstr = Value.toString();\n\t\t\t\tif (StringUtils.IsEmptyString(str) && ForceNulls) {\n\t\t\t\t\tstr = \"NULL\";\n\t\t\t\t} else {\n\t\t\t\t\t// Quitar las comillas simples\n\t\t\t\t\tif (str.contains(\"'\")) {\n\t\t\t\t\t\tstr = StringUtils.Replace(str, \"'\", \"''\");\n\t\t\t\t\t}\n\t\t\t\t\tstr = \"'\" + str + \"'\";\n\t\t\t\t} // Quitar las comillas simples\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tstr = \"NULL\";\n\t\t\t\tbreak;\n\t\t}\n\t\treturn str;\n\t}\n}\n","import { XoneDataObject } from \"../core/XoneDataObject\";\n\nexport default class Vector<T> extends Array<T> {\n    public removeElement(objLru: any) {\n        let index=this.indexOf(objLru);\n        (index>=0) && this.remove(index);\n    }\n\n    public addElement(value: any) {\n        this.push(value);\n    }\n    \n}","import Hashtable from \"../../Collections/HashMap/Hashtable\";\nimport IMessageHolder from \"../../Interfaces/IMessageHolder\";\nimport TextUtils from \"../../Utils/TextUtils\";\n\nexport default class XoneMessageHolder implements IMessageHolder {\n    /**\n     * Nombre o identificador del lenguaje.\n     */\n    private m_strLangName: string;\n\n    m_lstMessages: Hashtable<string, string> ;\n\n    /**\n     * @param LangName Nombre o identificador de lenguaje.\n     */\n    constructor(LangName:string) {\n        this.m_strLangName = LangName;\n        this.m_lstMessages = new Hashtable<string, string>();\n    }\n\n    /**\n     * Nombre o identificador del lenguaje\n     */\n    getLanguage():string {\n        return this.m_strLangName;\n    }\n\n    /**\n     * Auxiliar para obtener el mensaje de la clave que se pasa como parmetro.\n     *\n     * @param Key     Clave del mensaje que se pasa como parmetro.\n     * @param Default Valor por defecto si no existe el mensaje.\n     * @return Devuelve la cadena con el identificador indicado o cadena vaca si no existe.\n     */\n    GetMessage(Key:string, sDefault:string) {\n        if (!this.m_lstMessages.containsKey(Key)) {\n            return sDefault;\n        }\n        return this.m_lstMessages.get(Key);\n    }\n\n    /**\n     * Carga los datos de mensajes de un fichero de cadenas.\n     * Los mensajes se adicionan a los que ya haya, por lo que se pueden adicionar varios ficheros\n     * de mensajes en la misma aplicacin.\n     *\n     * @param Source Nombre del fichero que se quiere cargar.\n     */\n    LoadMessageFile(Source: any): boolean {\n        // Cargar el fichero\n        let strLine=\"\";\n        let isr: any = null;\n        try {\n            // isr = new InputStreamReader(Source, \"ISO8859_1\");\n            // BufferedReader br = new BufferedReader(isr);\n            // while (null != (strLine = br.readLine())) {\n            //     // Procesar la lnea\n            //     if (!this.ProcessLine(strLine)) {// Error\n            //         return false;\n            //     }// Error\n            // }\n            // Completo\n            return true;\n        } catch (ex) {\n            ex.printStackTrace();\n            return false;\n        } finally {\n            this.closeSafely(isr);\n        }\n    }\n\n    /**\n     * Pos eso. Se limpia el diccionario de mensajes.\n     */\n    Clear(): void {\n        this.m_lstMessages.clear();\n    }\n\n    /**\n     * Procesa la lnea en formato clave=valor y la incorpora al diccionario interno.\n     *\n     * @param Line Lnea que se quiere procesar.\n     * @return TRUE si se reconoce el formato correctamente.\n     */\n    ProcessLine(Line: string): boolean {\n        let x = Line.indexOf('=');\n        if (x < 0) {\n            return false;\n        }\n        // Obtener los dos pedazos\n        let strKey=\"\", strValue = \"\";\n        strKey = Line.substring(0, x);\n        if (x < Line.length) {\n            strValue = Line.substring(x + 1, Line.length - 1);\n        }\n        strKey = strKey.trim();\n        if (!TextUtils.isEmpty(strValue)) {// Solo si tiene valor\n            this.m_lstMessages.put(strKey, strValue);\n        }// Solo si tiene valor\n        return true;\n    }\n\n    closeSafely(closeable: any): void {\n        if (closeable == null) {\n            return;\n        }\n        try {\n            closeable.close();\n        } catch (ex) {\n            ex.printStackTrace();\n        }\n    }\n}","import IXmlDocument from \"../../Interfaces/IXmlDocument\";\nimport XmlNode from \"../JSONImpl/XmlNode\";\n//import xml from \"sax-parser\";\nimport XmlNodeList from \"../JSONImpl/XmlNodeList\";\nimport StringBuilder from \"../../Utils/StringBuilder\";\nimport TextUtils from \"../../Utils/TextUtils\";\nimport XmlAttributes from \"../JSONImpl/XmlAttributes\";\n\n\nexport default class SaxDocument implements IXmlDocument {\n    \n    private m_rootNode: XmlNode;\n    private  xml = require(\"sax-parser\");\n    // private lastNode: XmlNode;\n    // private rootNode: XmlNode;\n    // private sText: StringBuilder;\n\n    Deserialize(context: any, sPath: string, Source: any, useTranslation: boolean) {\n        this.parser.parseString(Source);\n        if (this.parser?.m_hndDoc?.rootNode) {\n            this.m_rootNode=this.parser.m_hndDoc.rootNode;\n        }\n     }\n\n    getRootNode(): XmlNode {\n        return this.m_rootNode;\n    }\n\n    createNode(node: XmlNode, strName: string) {\n        throw new Error(\"Method not implemented.\");\n    }\n\n    private parser = new this.xml.SaxParser(function(cb) {\n        let lastNode: XmlNode;\n        //let rootNode: XmlNode;\n        let sText: StringBuilder;\n        \n        cb.onStartDocument(function() {});\n        cb.onEndDocument(function() {});\n        cb.onStartElementNS(function(localName, attrs, prefix, uri, namespaces) {\n            let bIndex=false;\n            let bFirstNode = (lastNode == null);\n            let attributes = new XmlAttributes(attrs);\n            if (attributes.getIndex(\"ext-file\") >= 0) {\n                //lastNode = getIncludeNode(localName, attributes.getValue(attributes.getIndex(\"ext-file\")));\n            } else {\n                bIndex =attributes && attributes.length>0 && !TextUtils.isEmpty(attributes.getValue(\"name\"));\n                if (bIndex) {\n                    lastNode = new XmlNode(lastNode, localName, attributes, \"name\", attributes.getValue(\"name\"), /*getEvents(attributes)*/);\n                } else {\n                    lastNode = new XmlNode(lastNode, localName, attributes);\n                }\n            }\n            if (bFirstNode) {\n                this.rootNode = lastNode;\n            }\n            sText = new StringBuilder();\n        });\n\n        cb.onEndElementNS(function(elem, prefix, uri) {\n            if (sText != null) {\n                lastNode.setText(sText.toString());\n                sText = null;\n            }\n            lastNode = lastNode.getParentNode();\n        });\n\n        cb.onCharacters(function(chars) {\n            // if (sText.indexOf(\"Contrase\") > 0) {\n            //     sText = sText.replace(\"&gt;\", \">\");\n            // }\n            if (sText != null) {\n                sText.append(chars);\n            }\n        });\n        cb.onCdata(function(cdata) {\n          console.log(\"<CDATA>\" + cdata + \"</CDATA>\");\n        });\n        cb.onComment(function(msg) {\n          //console.log(\"<COMMENT>\" + msg + \"</COMMENT>\");\n        });\n        cb.onWarning(function(msg) {\n          console.log(\"<WARNING>\" + msg + \"</WARNING>\");\n        });\n        cb.onError(function(msg) {\n          console.log(\"<ERROR>\" + JSON.stringify(msg) + \"</ERROR>\");\n        });\n      });\n}","import IXmlDocument from \"../../Interfaces/IXmlDocument\";\nimport IXmlNode from \"../../Interfaces/IXmlNode\";\nimport DotNetJSONDocument from \"./DotNetJSONDocument\";\nimport SaxDocument from \"../SAXImpl/SaxDocument\";\nimport XmlNode from \"./XmlNode\";\n\nexport default class XmlDocument implements IXmlDocument {\n    static getInstance():IXmlDocument {\n        return new SaxDocument();\n        //return new DotNetJSONDocument();\n    }\n\n    /**\n     *\n     */\n    constructor() {\n        \n    }\n    \n    Deserialize(context: any, sPath: string, Source: any, useTranslation: boolean) {\n        throw new Error(\"Method not implemented.\");\n    }\n    getRootNode(): XmlNode {\n        throw new Error(\"Method not implemented.\");\n    }\n    createNode(node: XmlNode, strName: string) {\n        throw new Error(\"Method not implemented.\");\n    }\n\n}","import { nextTick } from \"@vue/runtime-core\";\nimport { XoneDataObject } from \"./appData/core/XoneDataObject\";\nimport AppDataHandler from \"./AppDataHandler\";\nimport { getView } from \"./XoneViewsHandler\";\nimport xoneAppHandler from \"./XoneAppHandler\";\nimport { generateUniqueId } from \"./helperFunctions/StringHelper\";\n\n// /**\n//  * _entryPointFake\n//  * @type {string}\n//  */\n// let _entryPointFake;\n\n// export const setEntryPointFake = (/** @type {string} */ value) => (_entryPointFake = value);\n\n/**\n * _doLogin\n * @type {function():Promise<void>}\n */\nlet _doLogin;\n\n/**\n * setDoLogin\n */\nexport const setDoLogin = (/** @type {function():Promise<void>} */ callback) => {\n\t_doLogin = callback;\n};\n\n/**\n * _openUrlCallback\n * @type {function}\n */\nlet _openUrlCallback;\n\n/**\n * _msgBoxCallback\n * @type {function}\n */\nlet _msgBoxCallback;\n\n/**\n * _customMsgBoxCallback\n * @type {function}\n */\nlet _customMsgBoxCallback;\n\n/**\n * _hideLoaderCallback\n * @type {function}\n */\nlet _hideLoaderCallback;\n\n/**\n * _showGroupCallback\n * @type {function}\n */\nlet _showGroupCallback;\n\n/**\n * _showLoaderCallback\n * @type {function}\n */\nlet _showLoaderCallback;\n\n/**\n * _showToastCallback\n * @type {function}\n */\nlet _showToastCallback;\n\n/**\n * _showSnackbarCallback\n * @type {function}\n */\nlet _showSnackbarCallback;\n\n/**\n * _startCameraCallback\n * @type {function}\n */\nlet _startCameraCallback;\n\n/**\n * _xoneDataObject\n * @type {XoneDataObject}\n */\nlet _xoneDataObject;\n\n/**\n * Add callback function showSnackbar from SnackBar component\n * @param {function} openUrlCallback\n */\nexport const setOpenUrlCallback = (openUrlCallback) => {\n\t_openUrlCallback = openUrlCallback;\n};\n\n/**\n * Add callback function msgBox from current msgbox component\n * @param {function} msgBoxCallback\n */\nexport const setMsgBoxCallback = (msgBoxCallback) => {\n\t_msgBoxCallback = msgBoxCallback;\n};\n\n/**\n * Add callback function msgBox from current msgbox component\n * @param {function} customMsgBoxCallback\n */\nexport const setCustomMsgBoxCallback = (customMsgBoxCallback) => {\n\t_customMsgBoxCallback = customMsgBoxCallback;\n};\n\n/**\n * Add callback function hideLoader from current loader component\n * @param {function} hideLoaderCallback\n */\nexport const setHideLoaderCallback = (hideLoaderCallback) => {\n\t_hideLoaderCallback = hideLoaderCallback;\n};\n\n/**\n * Add callback function showGroup from current coll component\n * @param {function} showGroupCallback\n */\nexport const setShowGroupCallback = (showGroupCallback) => {\n\t_showGroupCallback = showGroupCallback;\n};\n\n/**\n * Add callback function showLoader from Loader component\n * @param {function} showLoaderCallback\n */\nexport const setShowLoaderCallback = (showLoaderCallback) => {\n\t_showLoaderCallback = showLoaderCallback;\n};\n\n/**\n * Add callback function showToast from Toast component\n * @param {function} showToastCallback\n */\nexport const setShowToastCallback = (showToastCallback) => {\n\t_showToastCallback = showToastCallback;\n};\n\n/**\n * Add callback function showSnackbar from SnackBar component\n * @param {function} showSnackbarCallback\n */\nexport const setShowSnackbarCallback = (showSnackbarCallback) => {\n\t_showSnackbarCallback = showSnackbarCallback;\n};\n\n/**\n * Add callback function showSnackbar from SnackBar component\n * @param {function} startCameraCallback\n */\nexport const setStartCameraCallback = (startCameraCallback) => {\n\t_startCameraCallback = startCameraCallback;\n};\n\n/**\n * setXoneDataObject\n * @param {XoneDataObject} xoneDataObject\n */\nexport const setXoneDataObject = (xoneDataObject) => {\n\t_xoneDataObject = xoneDataObject;\n};\n\n/**\n * @type {Object}\n */\nlet _lastGpsPosition;\n\n/**\n * @type {Map<string, Notification>}\n */\nconst _mapNotifications = new Map();\n\n/**\n * Types Definitions\n *\n * @typedef {object} SnackBarParams\n * @property {string} [color]\n * @property {'short'|'long'|'indeterminate'|'indefinite'} [duration]\n * @property {string} [width]\n * @property {string} [height]\n * @property {string} [text]\n * @property {string} [textColor]\n * @property {string} [actionText]\n * @property {string} [actionTextColor]\n * @property {Function} [actionMethod]\n */\n\n/**\n * XoneUI class\n */\nclass XoneUI {\n\t/**\n\t * @type {XoneUI}\n\t */\n\tstatic _instance;\n\n\tconstructor() {\n\t\tif (XoneUI._instance) return XoneUI._instance;\n\t\tXoneUI._instance = this;\n\t}\n\n\taddCalendarItem(title, description, location, dtStart, dtEnd) {}\n\taskUserForGPSPermission() {} // Ignorar\n\tcanMakePhoneCall() {} // Ignorar\n\tcaptureImage(PropName, CaptureObjectName) {}\n\tcheckGPSStatus() {}\n\n\t/**\n\t * clearDrawing\n\t * @param {string} PropName\n\t */\n\tclearDrawing(PropName) {\n\t\t// xoneView\n\t\tconst xoneView = getView(_xoneDataObject);\n\t\tif (!xoneView) return;\n\n\t\txoneView[PropName]?.clearDrawing();\n\t}\n\n\tcreateShortcut() {} // Ignorar\n\tdeleteShortcut() {} // Ignorar\n\n\t/**\n\t * dismissNotification\n\t * @param {string} id\n\t */\n\tdismissNotification(id) {\n\t\tid = id.toString();\n\n\t\tif (!_mapNotifications.has(id)) return;\n\n\t\tconst notification = _mapNotifications.get(id);\n\t\tnotification.close();\n\n\t\t_mapNotifications.delete(id);\n\t}\n\n\tdrawMapRoute(PropName, DestinationLatitude, DestinationLongitude, SourceLatitude, SourceLongitude, Mode, StrokeColor) {}\n\tendPrint() {}\n\tensureVisible(Prop, type) {}\n\texecuteActionAfterDelay(NodeName, delay) {}\n\n\t/**\n\t * Go to previus object in stack\n\t */\n\texit() {\n\t\tAppDataHandler.deletelastBreadcrumb();\n\t\thistory.back();\n\t}\n\n\t/**\n\t * Exit  App\n\t */\n\texitApp() {\n\t\tAppDataHandler.clearBreadcrumbs();\n\t\thistory.back();\n\t\t_doLogin();\n\t}\n\n\t/**\n\t * getLastKnownLocation\n\t */\n\tgetLastKnownLocation() {\n\t\tconst { latitude, longitude } = _lastGpsPosition?.coords;\n\t\treturn { latitude, longitude };\n\t}\n\n\t/**\n\t * getLastKnownLocationAccuracy\n\t */\n\tgetLastKnownLocationAccuracy() {\n\t\tconst { accuracy } = _lastGpsPosition?.coords;\n\t\treturn accuracy;\n\t}\n\n\t/**\n\t * getLastKnownLocationAltitude\n\t */\n\tgetLastKnownLocationAltitude() {\n\t\tconst { altitude } = _lastGpsPosition?.coords;\n\t\treturn altitude;\n\t}\n\n\t/**\n\t * getLastKnownLocationBearing\n\t */\n\tgetLastKnownLocationBearing() {\n\t\tconst { heading } = _lastGpsPosition?.coords;\n\t\treturn heading;\n\t}\n\n\t/**\n\t * getLastKnownLocationDateTime\n\t */\n\tgetLastKnownLocationDateTime() {\n\t\treturn _lastGpsPosition?.timestamp ? new Date(_lastGpsPosition.timestamp).toString() : null;\n\t}\n\n\t/**\n\t * getLastKnownLocationLatitude\n\t */\n\tgetLastKnownLocationLatitude() {\n\t\tconst { latitude } = _lastGpsPosition?.coords;\n\t\treturn latitude;\n\t}\n\n\t/**\n\t * getLastKnownLocationLongitude\n\t */\n\tgetLastKnownLocationLongitude() {\n\t\tconst { longitude } = _lastGpsPosition?.coords;\n\t\treturn longitude;\n\t}\n\n\t/**\n\t * getLastKnownLocationProvider\n\t */\n\tgetLastKnownLocationProvider() {\n\t\treturn _lastGpsPosition ? \"geolocation\" : \"\";\n\t}\n\n\t/**\n\t * getLastKnownLocationSpeed\n\t */\n\tgetLastKnownLocationSpeed() {\n\t\tconst { speed } = _lastGpsPosition?.coords;\n\t\treturn speed;\n\t}\n\tgetMaxSoundVolumen() {}\n\tgetSoundVolumen() {}\n\n\t/**\n\t * getView\n\t * @param {XoneDataObject} DataObject\n\t */\n\tgetView(DataObject) {\n\t\treturn getView(DataObject || _xoneDataObject);\n\t}\n\n\t/**\n\t * Hide Group\n\t * @param {string|number} groupId\n\t */\n\thideGroup(groupId) {\n\t\t_showGroupCallback ? _showGroupCallback(groupId.toString(), false, true) : console.error(\"hideGroup is not defined\", groupId);\n\t}\n\n\t/**\n\t * Hide loader spinner\n\t */\n\tasync hideLoader() {\n\t\tif (_hideLoaderCallback) await _hideLoaderCallback();\n\t}\n\n\thideNavigationDrawer() {}\n\thideSoftwareKeyboard() {}\n\thideWaitDialog() {\n\t\tthis.hideLoader();\n\t}\n\tinjectJavascript(WebViewPropName, ScriptText) {}\n\tisApplicationInstalled(packageName) {}\n\tisOnCall() {}\n\tisSuperuserAvailable() {}\n\tisTaskKillerInstalled() {}\n\tisWifiConnected() {}\n\tisWifiEnabled() {}\n\tlaunchApp(PackageName, ExtrasParam) {}\n\tlaunchApplication(PackageName, ExtrasParam) {}\n\n\t/**\n\t * Launch entry point\n\t * @param {boolean} [isOnlyWebLayout]\n\t */\n\tasync launchEntryPoint(isOnlyWebLayout = false) {\n\t\t// Clear current DataObjects and Breadcrumbs\n\t\tAppDataHandler.clearBreadcrumbs();\n\n\t\t/**\n\t\t * webLayout\n\t\t * @type {string}\n\t\t */\n\t\tconst webLayout = xoneAppHandler.getWebLayout();\n\n\t\tif (webLayout) {\n\t\t\t// Push Web Layout\n\t\t\tawait AppDataHandler.addNewXoneDataObject(webLayout, \"WebLayout\", true, true);\n\t\t\tawait nextTick();\n\t\t}\n\n\t\tif (isOnlyWebLayout) return;\n\n\t\t/**\n\t\t * entryPoint\n\t\t * @type {string}\n\t\t */\n\t\tconst entryPoint = AppDataHandler.getAppData().getEntryPointCollection(AppDataHandler.getAppData().getCurrentVisualConditions());\n\n\t\t// Push Entry Point\n\t\tawait AppDataHandler.addNewXoneDataObject(/*_entryPointFake || */ entryPoint, \"EntryPoint\", false, true);\n\t}\n\n\tlineFeed(Lines) {}\n\tlockGroup(groupId) {}\n\t/**\n\t * login\n\t * Login para appData.failWithMessage(-11888,\"##LOGIN_START##\")\n\t * habr que deprecarlo algn da pero se usa mucho\n\t * @returns {Promise}\n\t */\n\tlogin() {\n\t\ttry {\n\t\t\tconst userName = _xoneDataObject.getVariables(\"##LOGIN_NEWUSER##\").split(\",\")[1];\n\t\t\tconst password = _xoneDataObject.getVariables(\"##LOGIN_NEWPASS##\").split(\",\")[1];\n\t\t\treturn AppDataHandler.getAppData().login({\n\t\t\t\tuserName,\n\t\t\t\tpassword,\n\t\t\t});\n\t\t} catch {\n\t\t\treturn console.error(\"Login failed\");\n\t\t}\n\t}\n\tmakePhoneCall(PhoneNumber) {}\n\n\t/**\n\t * Show MsgBox\n\t * @param {string|XoneDataObject} message\n\t * @param {string} [title]\n\t * @param {number} [flags]\n\t * @returns {Promise<number>}\n\t */\n\tasync msgBox(message, title = \"\", flags = 0) {\n\t\tlet res = 0;\n\n\t\tif (message instanceof XoneDataObject) {\n\t\t\tif (_customMsgBoxCallback) return await _customMsgBoxCallback(message);\n\t\t\telse console.error(\"Method not implemented\");\n\t\t\treturn res;\n\t\t}\n\n\t\tif (_msgBoxCallback) {\n\t\t\tres = await _msgBoxCallback(message, title, flags);\n\t\t} else {\n\t\t\tconsole.error(\"msgBox not defined\");\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tasync msgBoxWithSound(Message, Title, type, Sound, Vibrate, NumberRepeat) {\n\t\tthis.playSoundAndVibrate(Sound, Vibrate, NumberRepeat);\n\t\treturn await this.msgBox(Message, Title, type);\n\t}\n\n\t/**\n\t * Open new Edit View and push it in Breadcrumbs stack\n\t * @param {XoneDataObject|string} param\n\t */\n\tasync openEditView(param) {\n\t\t// string: create XoneDataObject and push it into stack\n\t\tif (typeof param === \"string\") {\n\t\t\tawait AppDataHandler.addNewXoneDataObject(param);\n\t\t}\n\t\t// XoneDataObject: push it into stack\n\t\telse if (param instanceof XoneDataObject) {\n\t\t\t/**\n\t\t\t * xoneDataObject\n\t\t\t * @type {XoneDataObject}\n\t\t\t */\n\t\t\tconst xoneDataObject = param;\n\t\t\tAppDataHandler.pushXoneDataObject(xoneDataObject);\n\t\t}\n\t\t// Bad call\n\t\telse {\n\t\t\tconsole.error(\"Bad call openEditView with param \", param);\n\t\t}\n\t}\n\n\t/**\n\t * Open new Edit View and push it in Breadcrumbs stack then 1\n\t * @param {XoneDataObject|string} param\n\t */\n\tasync openEditViewAndExit(param) {\n\t\tAppDataHandler.clearBreadcrumbs(true);\n\t\tawait this.openEditView(param);\n\t}\n\n\t/**\n\t * openFile\n\t * @param {string} filePath\n\t */\n\topenFile(filePath) {\n\t\tfilePath = filePath.replace(\"/source/\", \"/\"); // TODO: el filePath viene mal concateado, hay que quitar el source\n\t\tconst element = document.createElement(\"a\");\n\t\telement.setAttribute(\"href\", filePath);\n\t\telement.setAttribute(\"target\", \"_blank\");\n\t\telement.style.display = \"none\";\n\t\tdocument.body.appendChild(element);\n\t\telement.click();\n\t\tdocument.body.removeChild(element);\n\t}\n\n\topenMenu(Name, Mask, Mode) {}\n\n\t/**\n\t * Open Url\n\t * @param {string} Url\n\t * @returns {void}\n\t */\n\topenUrl(Url) {\n\t\twindow.open(Url, \"_blank\");\n\t\t// if (_openUrlCallback) _openUrlCallback(Url);\n\t\t// else console.error(\"Method openUrl not implemented\");\n\t}\n\n\t/**\n\t * pickFile\n\t * @param {string|object} PropName\n\t * @param {string} Extensions\n\t * @returns {Promise<string>}\n\t */\n\tpickFile(PropName, Extensions) {\n\t\treturn new Promise((resolve) => {\n\t\t\tconst inputElement = document.createElement(\"input\");\n\t\t\tinputElement.type = \"file\";\n\t\t\tinputElement.style.display = \"none\";\n\n\t\t\tconst fileTypes = typeof PropName === \"object\" ? PropName.fileTypes : Extensions;\n\t\t\tif (fileTypes)\n\t\t\t\tinputElement.accept = fileTypes\n\t\t\t\t\t.split(\",\")\n\t\t\t\t\t.map((e) => \".\" + e)\n\t\t\t\t\t.join(\",\");\n\n\t\t\tinputElement.onchange = (e) =>\n\t\t\t\tthis.uploadFile(e.target.files[0])\n\t\t\t\t\t.then((fileName) => {\n\t\t\t\t\t\tif (typeof PropName === \"object\") PropName.targetProperty = fileName;\n\t\t\t\t\t\telse _xoneDataObject[PropName] = fileName;\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tdocument.body.removeChild(inputElement);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\n\t\t\tdocument.body.appendChild(inputElement);\n\t\t\tinputElement.click();\n\t\t});\n\t}\n\n\t/**\n\t * playSound\n\t * @param {string} sound\n\t * @returns {Promise<void>}\n\t */\n\tplaySound(sound) {\n\t\treturn this.playSoundAndVibrate(sound);\n\t}\n\n\t/**\n\t * playSoundAndVibrate\n\t * @param {string} Sounds\n\t * @param {*} vibrate\n\t * @param {*} NumberRepeat\n\t * @param {*} ContinuePlaying\n\t * @returns {Promise<void>}\n\t */\n\tplaySoundAndVibrate(Sounds, vibrate, NumberRepeat, ContinuePlaying) {\n\t\treturn new Audio(`files/${Sounds}`).play();\n\t}\n\n\tplaySoundVolumen(Number) {}\n\tprint(Data) {}\n\tprintBIDI(Size, Level, Data) {}\n\tprintBarcode(Type, Data, Width, Height) {}\n\tprintCommand(Data) {}\n\tprintImage(Path, Width, Height, Align, Dither) {}\n\tprintLine(Data) {}\n\tprintPDF(Path, PageNumber) {}\n\n\t/**\n\t * quitApp\n\t */\n\tquitApp() {\n\t\tthis.exitApp();\n\t}\n\n\t/**\n\t * recognizeSpeech\n\t * @param {XoneDataObject|Object} DataObject\n\t * @param {string} [PropName]\n\t */\n\trecognizeSpeech(DataObject, PropName) {\n\t\tif (!webkitSpeechRecognition && !SpeechRecognition) return console.error(\"recognizeSpeech not supported. Use chrome browser.\");\n\t\tlet isXoneDataObject = false,\n\t\t\tisObject = false;\n\t\t// Is XoneDataObject\n\t\tif (DataObject instanceof XoneDataObject) {\n\t\t\tisXoneDataObject = true;\n\t\t}\n\t\t// Is Object with callback\n\t\telse if (typeof DataObject === \"object\" && DataObject.onRecognize) {\n\t\t\tisObject = true;\n\t\t} else return console.error(\"recognizeSpeech bad call\");\n\t\t// Instance recognition\n\t\t/**\n\t\t * recognition\n\t\t * @type {SpeechRecognition}\n\t\t */\n\t\tconst recognition = new (webkitSpeechRecognition || SpeechRecognition)();\n\t\t// Params\n\t\trecognition.continuous = false;\n\t\trecognition.interimResults = false;\n\t\trecognition.maxAlternatives = 1;\n\t\t// On result\n\t\trecognition.onresult = (event) => {\n\t\t\tconst result = event.results[event.results.length - 1][0].transcript;\n\t\t\tif (isObject) DataObject.onRecognize(result);\n\t\t\tif (isXoneDataObject) DataObject[PropName] = result;\n\t\t};\n\t\t// On speech end\n\t\trecognition.onspeechend = () => recognition.stop();\n\t\t// On stop\n\t\trecognition.onerror = (event) => {\n\t\t\trecognition.stop();\n\t\t\tif (isObject && DataObject.onError) DataObject.onError(event.error);\n\t\t\tconsole.log(\n\t\t\t\t`%c SpeechRecognition error: '${event.error}' %c Feature allowed in %c Chrome %c browser `,\n\t\t\t\t\"color: red\",\n\t\t\t\t\"background: #4CABD5; color: white\",\n\t\t\t\t\"background: #1F3C6E; color: white\",\n\t\t\t\t\"background: #4CABD5; color: white\"\n\t\t\t);\n\t\t};\n\t\t// start recognition\n\t\trecognition.start();\n\t}\n\n\t/**\n\t * Refresh controls\n\t * @param {Array} Props\n\t */\n\trefresh(...Props) {\n\t\tconst xoneView = getView(_xoneDataObject);\n\t\tif (!xoneView) return;\n\t\tconst props = Props.length === 1 ? Props[0].toString().split(\",\") : Props;\n\t\tprops.forEach((/** @type {string} */ e) => xoneView[e]?.refresh());\n\t\tif (Props.length === 0) xoneView.refresh();\n\t}\n\t/**\n\t * refreshAll\n\t */\n\trefreshAll() {\n\t\tthis.refresh();\n\t}\n\n\t/**\n\t * refreshContentRow\n\t * @param {string} ContentName\n\t * @param {number} Row\n\t */\n\trefreshContentRow(ContentName, Row) {\n\t\tconst xoneView = getView(_xoneDataObject);\n\t\tif (!xoneView) return;\n\t\txoneView[ContentName]?.refreshRow(Row);\n\t}\n\n\t/**\n\t * refreshContentSelectedRow\n\t * @param {string} ContentName\n\t */\n\trefreshContentSelectedRow(ContentName) {\n\t\tconst xoneView = getView(_xoneDataObject);\n\t\tif (!xoneView) return;\n\t\txoneView[ContentName]?.refreshSelectedRow();\n\t}\n\n\t/**\n\t * refreshValue\n\t * @param {string} Props\n\t */\n\trefreshValue(Props) {\n\t\tconst xoneView = getView(_xoneDataObject);\n\t\tif (!xoneView) return;\n\t\txoneView[Props]?.refresh();\n\t}\n\n\trelayout() {\n\t\tthis.refresh();\n\t}\n\trestartApp() {}\n\treturnToForeground() {}\n\treturnToMainMenu() {}\n\tsaveDrawing(PropName, FileName) {}\n\tsendMail(To, Cc, Subject, Message, Attachments) {}\n\tsendSMS(Phone, Text) {}\n\tsetFeedMode(FeedMode) {}\n\tsetLanguage(Language) {}\n\tsetMaxWaitDialog(Max) {}\n\tsetNotificationLed(LedColor, LedOn, LedOff) {}\n\tsetSelection(Prop, Position) {}\n\tshareData(Subject, Text, image) {}\n\tshowConsoleReplica() {}\n\tshowDatePicker(JSONObject) {}\n\n\t/**\n\t * Show Group\n\t * @param {string|number} groupId\n\t * @param {*} [animationIn]\n\t * @param {*} [animationInDuration]\n\t * @param {*} [animationOut]\n\t * @param {*} [animationOutDuration]\n\t */\n\tshowGroup(groupId, animationIn, animationInDuration, animationOut, animationOutDuration) {\n\t\t_showGroupCallback ? _showGroupCallback(groupId.toString()) : console.error(\"showGroup is  not defined\", groupId);\n\t}\n\n\t/**\n\t * Show Spinner loader\n\t */\n\tasync showLoader() {\n\t\tif (_showLoaderCallback) await _showLoaderCallback();\n\t}\n\n\tshowNavigationDrawer(Orientation) {}\n\n\t/**\n\t * showNotification\n\t * @param {string} id\n\t * @param {string} Title\n\t * @param {string} Text\n\t * @param {*} [TextStatusBar]\n\t * @param {XoneDataObject | Function} [obj]\n\t * @param {*} [NodeName]\n\t */\n\tshowNotification(id, Title, Text, TextStatusBar, obj, NodeName) {\n\t\tif (!(\"Notification\" in window)) return console.error(\"shotNotification not supporter in your browse\");\n\n\t\t/**\n\t\t * donotification\n\t\t */\n\t\tconst doNotification = () => {\n\t\t\tif (Notification.permission !== \"granted\") return console.error(\"Not permission granted to show notifications\");\n\n\t\t\tid = id.toString();\n\n\t\t\t// Dismiss if notification exists\n\t\t\tthis.dismissNotification(id);\n\n\t\t\t// Create  new Notification\n\t\t\tconst notification = new Notification(Title, {\n\t\t\t\ticon: \"assets/manifest/72x72.png\",\n\t\t\t\tbody: Text,\n\t\t\t});\n\n\t\t\t// Add click event\n\t\t\tnotification.onclick = () => {\n\t\t\t\tif (obj instanceof XoneDataObject) this.openEditView(obj);\n\t\t\t\tif (obj instanceof Function) obj();\n\t\t\t\tthis.dismissNotification(id);\n\t\t\t};\n\n\t\t\t// Set notification to notifications map list\n\t\t\t_mapNotifications.set(id, notification);\n\t\t};\n\n\t\t// Check permission\n\t\tif (Notification.permission !== \"granted\") Notification.requestPermission().then(() => doNotification());\n\t\t// doNotification\n\t\telse doNotification();\n\t}\n\n\t/**\n\t * Show Toast\n\t * @param {SnackBarParams} params\n\t */\n\tshowSnackbar(params) {\n\t\t_showSnackbarCallback ? _showSnackbarCallback(params) : console.error(\"showSnackbar is  not defined\", params);\n\t}\n\n\tshowSoftwareKeyboard() {}\n\n\t/**\n\t * Show Toast\n\t * @param {string} message\n\t */\n\tshowToast(message) {\n\t\t_showToastCallback ? _showToastCallback(message) : console.error(\"showToast is not defined\", message);\n\t}\n\n\tshowWaitDialog(Text) {\n\t\tthis.showLoader();\n\t}\n\tsignDataObject(Data, Mask) {}\n\n\t/**\n\t * sleep\n\t * @param {number} Seconds\n\t */\n\tasync sleep(Seconds) {\n\t\tawait new Promise((resolve) => setTimeout(() => resolve(), Number(Seconds) * 1000));\n\t}\n\n\t/**\n\t * speak\n\t * @param {string} Language\n\t * @param {string} Text\n\t */\n\tspeak(Language, Text) {\n\t\tif (!speechSynthesis) return console.error(\"speak not supported in your browser\");\n\t\tconst speechSynthesisUtterance = new SpeechSynthesisUtterance(Text);\n\t\tif (Language) speechSynthesisUtterance.lang = Language;\n\t\tspeechSynthesis.speak(speechSynthesisUtterance);\n\t}\n\n\t/**\n\t * speakText\n\t * @param {string} Text\n\t */\n\tspeakText(Text) {\n\t\tthis.speak(null, Text);\n\t}\n\n\tstartAudioRecord(NodeName, Prop, TimeOut) {}\n\n\t/**\n\t * startCamera\n\t * @param {string} PropName\n\t * @param {string} type\n\t */\n\tasync startCamera(PropName, type = \"photo\") {\n\t\tlet value;\n\t\tif (_startCameraCallback) value = await _startCameraCallback(type);\n\t}\n\n\t/**\n\t * startGps\n\t * @param {*} JSONObject\n\t * @param {*} Interval\n\t * @param {*} Flags\n\t */\n\tasync startGps(JSONObject, Interval = 30000, Flags) {\n\t\tif (!navigator.geolocation) return console.error(\"Geolocation not allowed\");\n\n\t\tthis.stopGps();\n\n\t\tconst pos = await new Promise((resolve) =>\n\t\t\tnavigator.geolocation.getCurrentPosition(\n\t\t\t\t(res) => resolve(res), // Error function\n\t\t\t\t() => console.error(\"Could not get location\"),\n\t\t\t\t{\n\t\t\t\t\tenableHighAccuracy: true,\n\t\t\t\t\ttimeout: 5000,\n\t\t\t\t\tmaximumAge: 0,\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\t_lastGpsPosition = pos;\n\n\t\tconsole.log(` %c LOCATION `, \"background-color: BLUE; color: white;\", pos);\n\n\t\tthis._startGpsTimeout = setTimeout(() => this.startGps(JSONObject, Interval, Flags), Interval);\n\t}\n\n\t/**\n\t * startGpsV1\n\t */\n\tasync startGpsV1() {\n\t\tawait this.startGps();\n\t}\n\n\t/**\n\t * startGpsV2\n\t * @param {*} JSONObject\n\t * @param {*} Interval\n\t * @param {*} Flags\n\t */\n\tasync startGpsV2(JSONObject, Interval, Flags) {\n\t\tawait this.startGps();\n\t}\n\n\tstartKioskMode() {}\n\tstartPrint(PrinterType) {}\n\tstartReplica() {}\n\tstartScanner(NativeObject, Codes, Target) {}\n\tstartSignature(Prop, Width, Height, BackgroundImage, ScreenOrientation) {}\n\tstartWifi() {}\n\tstopAudioRecord() {}\n\tstopGps() {\n\t\tif (this._startGpsTimeout) clearTimeout(this._startGpsTimeout);\n\t}\n\tstopGpsV1() {}\n\tstopGpsV2() {}\n\tstopKioskMode() {}\n\tstopPlaySoundAndVibrate() {}\n\tstopReplica() {}\n\tstopWifi() {}\n\n\t/**\n\t * Take photo\n\t * @param {*} FileName\n\t * @param {*} Width\n\t * @param {*} Height\n\t */\n\ttakePhoto(FileName, Width, Height) {\n\t\tif (_startCameraCallback) _startCameraCallback();\n\t}\n\n\t/**\n\t * Toogle Group\n\t * @param {string|number} groupId\n\t */\n\ttoggleGroup(groupId) {\n\t\t_showGroupCallback ? _showGroupCallback(groupId.toString(), true) : console.error(\"toggleGroup is not defined\", groupId);\n\t}\n\n\tuninstallApplication(packageName) {}\n\tunlockGroup(groupId) {}\n\tupdateWaitDialog(message, value) {}\n\n\t/**\n\t * @param {Blob} file\n\t * @returns {Promise<string>}\n\t */\n\tuploadFile(file) {\n\t\tconst fileName = file.name || `${generateUniqueId()}.png`;\n\t\tconst formData = new FormData();\n\t\tformData.append(\"file\", file, fileName);\n\t\treturn fetch(\"upload\", {\n\t\t\t//\"http://localhost:8000/upload\", {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: { processData: false, contentType: false },\n\t\t\tbody: formData,\n\t\t})\n\t\t\t.then((res) => (res.hasError ? \"\" : fileName))\n\t\t\t.catch(console.error);\n\t}\n\n\tuseLastPrinter(True) {}\n\tvibrate() {}\n\twriteString() {}\n}\n\nconst xoneUI = new XoneUI();\n\nexport default xoneUI;\n","import { isNull } from \"util\";\nimport Calendar from \"./Calendar\";\nimport StringUtils from \"./StringUtils\";\nimport TextUtils from \"./TextUtils\";\n\nexport default class ObjUtils {\n\n\n    static IsNothing(Value: any): boolean {\n        return Value == null || Value == undefined || Value == 'undefined';\n    }\n\n    static IsNumeric(Value: any): boolean {\n        return !isNaN(Value);\n    }\n\n    static IsFloat(Value: any): boolean {\n        if (ObjUtils.IsNothing(Value))\n            return false;\n        return ObjUtils.IsNumeric(Value) && !Number.isInteger(Value);\n    }\n\n    static IsInt(Value: any): boolean {\n        if (ObjUtils.IsNothing(Value))\n            return false;\n        return ObjUtils.IsNumeric(Value) && Number.isInteger(Value);\n    }\n\n    static EqualObj(oldVal: any, Value: any) {\n        return oldVal === Value;\n    }\n    static ZeroCalendarTime(dt: Calendar): Calendar {\n        dt.getTime().setHours(0);\n        dt.getTime().setMinutes(0);\n        dt.getTime().setSeconds(0);\n        dt.getTime().setMilliseconds(0);\n        return dt;\n    }\n\n    public static SafeToCalendar(Value: any): Calendar {\n        if (Value instanceof Calendar)\n            return Value;\n        if (Value instanceof Date) {\n            return new Calendar(Value as Date);\n        }\n        return this.SafeToComplexDate(StringUtils.SafeToString(Value));\n    }\n\n    public static SafeToDate(Value: any): Date {\n        if (Value instanceof Calendar)\n            return Value.getTime();\n        if (Value instanceof Date) {\n            return Value as Date;\n        }\n        let dt=this.SafeToComplexDate(StringUtils.SafeToString(Value));\n        if (dt)\n            return dt.getTime();\n        return null;\n    }\n\n    public static SafeToDateString(Value: any): string {\n        if (Value instanceof Calendar)\n            return Value.toString();\n        if (Value instanceof Date)\n            Value.toDateString();\n        return StringUtils.SafeToString(Value);\n    }\n\n    public static getOnlyTime(Value: Date):string {\n        return Value.getHours().toString().padStart(2,\"0\")+\":\"+Value.getMinutes().toString().padStart(2,\"0\")\n    }\n\n    public static SafeToHours(Value?: any): string {\n        if (!Value)\n            return this.getOnlyTime(new Date());\n        if (Value instanceof Calendar)\n            return this.getOnlyTime(Value.getTime());\n        if (Value instanceof Date) {\n            return this.getOnlyTime(Value as Date);\n        }\n        return this.getOnlyTime(this.SafeToComplexDate(StringUtils.SafeToString(Value)).getTime());\n    }\n\n    private static getDateSeparator(str: string): string {\n        const sep = [\"-\", \"/\"];\n        for (var s in\n            sep) {\n            if (str.indexOf(s) > 0) {\n                return s;\n            }\n        }\n        return \"/\";\n    }\n\n\n    private static SafeToComplexDate(sDate: string): Calendar {\n        if (TextUtils.isEmpty(sDate)) {\n            return null;\n        }\n        const regex = /\\//g;\n        sDate = sDate.trim().replace(\"T\", \" \");\n        let calendar = Calendar.getInstance();\n        let sSeparator = this.getDateSeparator(sDate);\n        if (sSeparator == \"/\")\n            sDate = sDate.replace(regex, '-');\n        return new Calendar(Date.parse(sDate));\n        // let sPattern=\"\";\n        // if (sDate.indexOf(sSeparator) == 4) {\n        //     // Debe ser el formato de SQLite\n        //     if (sDate.length <= 10) {\n        //         sPattern = \"yyyy\" + sSeparator + \"MM\" + sSeparator + \"dd\";\n        //     } else {\n        //         sPattern = \"yyyy\" + sSeparator + \"MM\" + sSeparator + \"dd HH:mm:ss\";\n        //     }\n\n        //     return new Calendar(Date.parse(sDate));\n        // } else {\n        //     sPattern = getDateFormat(Locale.getDefault(), sDate, sSeparator);\n        //     if (sDate.length() <= 10) {\n        //         sPattern = sPattern.substring(0, sPattern.lastIndexOf(\"y\"));\n        //     }\n        // }\n        // SimpleDateFormat formatter = new SimpleDateFormat(sPattern, Locale.US);\n        // Date date = unsafeParseDate(formatter, sDate);\n        // calendar.setTime(date);\n        // return calendar;\n    }\n    public static NATIVE_TYPE_LONG = 1;\n    public static NATIVE_TYPE_INT = 2;\n    public static NATIVE_TYPE_BOOL = 3;\n    public static NATIVE_TYPE_DOUBLE = 4;\n    public static NATIVE_TYPE_FLOAT = 5;\n    public static OBJ_TYPE_STRING = 100;\n    public static OBJ_TYPE_DATE = 101;\n    public static OBJ_TYPE_CALENDAR = 102;\n    public static OBJ_TYPE_NULL = 103;\n    public static NOT_NATIVE_TYPE = -1;\n\n    /**\n     * Dado un objeto, devuelve el marcador de tipo interno.\n     *\n     * @param Source Objeto cuyo marcador de tipo interno se quiere obtener.\n     * @return Devuelve el marcador de tipo del objeto.\n     */\n    public static GetTypeTag(Source: any): number {\n        if (Source == null) {\n            return this.OBJ_TYPE_NULL;\n        }\n        if (typeof Source === 'number' || Source instanceof Number) {\n            if (Number.isInteger(Source))\n                return this.NATIVE_TYPE_LONG;\n            else\n                return this.NATIVE_TYPE_DOUBLE\n        }\n        if (typeof Source === 'boolean' || Source instanceof Boolean) {\n            return this.NATIVE_TYPE_BOOL;\n        }\n        if (typeof Source === 'string' || Source instanceof String) {\n            return this.OBJ_TYPE_STRING;\n        }\n        if (Source instanceof Date) {\n            return this.OBJ_TYPE_DATE;\n        }\n        if (Source instanceof Calendar) {\n            return this.OBJ_TYPE_CALENDAR;\n        }\n        return this.NOT_NATIVE_TYPE;\n    }\n}","import { Exception } from \"./Exception\";\n\nexport default class IllegalArgumentException extends Exception {\n    \n}","import { Exception } from \"./Exception\";\n\nexport default class NullPointerException extends Exception {\n    \n}","<template>\n\t<div\n\t\tv-if=\"containerWidth && containerHeight\"\n\t\tclass=\"-\"\n\t\t:style=\"{\n\t\t\t'--app-width': `${containerWidth}px`,\n\t\t\t'--app-height': `${containerHeight}px`,\n\t\t}\"\n\t>\n\t\t<!-- Layout breadcrumb -->\n\t\t<div class=\"xone-layout\" v-if=\"webLayoutBreadcrumb\">\n\t\t\t<Coll :breadcrumb=\"webLayoutBreadcrumb\" :isLayout=\"true\"></Coll>\n\t\t</div>\n\n\t\t<!-- Router -->\n\t\t<router-view v-else />\n\n\t\t<!-- UI Components -->\n\t\t<SnackBar />\n\t\t<Toast />\n\t\t<Loader />\n\t\t<MsgBox />\n\t\t<Camera />\n\t\t<Url />\n\t\t<Offline />\n\n\t\t<!-- Drag & Drop -->\n\t\t<SelectedControl />\n\t\t<OverControl />\n\t\t<DragControl />\n\t</div>\n</template>\n\n<script>\n// Vue\nimport { provide, ref, Ref, ComputedRef, onMounted, onUnmounted, computed, watch } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\n// Components\nimport Coll from \"./components/Coll.vue\";\nimport Toast from \"./components/uiComponents/Toast.vue\";\nimport SnackBar from \"./components/uiComponents/SnackBar.vue\";\nimport Loader from \"./components/uiComponents/Loader.vue\";\nimport MsgBox from \"./components/uiComponents/MsgBox.vue\";\nimport Camera from \"./components/uiComponents/Camera.vue\";\nimport Url from \"./components/uiComponents/Url.vue\";\nimport Offline from \"./components/uiComponents/Offline.vue\";\nimport SelectedControl from \"./components/dragAndDrop/SelectedControl.vue\";\nimport OverControl from \"./components/dragAndDrop/OverControl.vue\";\nimport DragControl from \"./components/dragAndDrop/DragControl.vue\";\n// Composables\nimport { XoneApplication } from \"./composables/appData/core/XoneApplication\";\nimport { FileManagerOnline } from \"./composables/appData/Manager/FileManager\";\nimport AppDataHandler, { Breadcrumb } from \"./composables/AppDataHandler\";\nimport xoneAppHandler from \"./composables/XoneAppHandler\";\nimport xoneUI, { setDoLogin, setEntryPointFake } from \"./composables/XoneUI\";\nimport { setWidthFactor, setHeightFactor } from \"./composables/XoneAnimation\";\nimport { setAppPath } from \"./composables/helperFunctions/ImageHelper\";\nimport { setIsScaleFontsize, setWebFontFactor } from \"./composables/XoneAttributesHandler\";\nimport { addFontFaces } from \"./composables/helperFunctions/FontsHelper\";\nimport XoneAppHandler from \"./composables/XoneAppHandler\";\nimport { isMobile } from \"./composables/helperFunctions/MobileBrowserHelper\";\nimport { XoneDataCollection } from \"./composables/appData/core/XoneDataCollection\";\n\nexport default {\n\tcomponents: {\n\t\tColl,\n\t\tToast,\n\t\tSnackBar,\n\t\tLoader,\n\t\tMsgBox,\n\t\tCamera,\n\t\tUrl,\n\t\tOffline,\n\t\tSelectedControl,\n\t\tOverControl,\n\t\tDragControl,\n\t},\n\tsetup() {\n\t\tconsole.log(\n\t\t\t`%c b y %c X %c >O n e %c ${XoneAppHandler.getVersion()}`,\n\t\t\t\"background: whitesmoke; color: #1F3C6E; font-weight: bold; display: block; font-size: 17px;\",\n\t\t\t\"background: #4CABD5   ; color: white  ; font-weight: bold; display: block; font-size: 17px;\",\n\t\t\t\"background: #1F3C6E   ; color: white  ; font-weight: bold; display: block; font-size: 17px;\",\n\t\t\t\"color: #1F3C6E\"\n\t\t);\n\n\t\tconst router = useRouter();\n\t\tconst route = useRoute();\n\n\t\t/**\n\t\t * XOne Web Layout\n\t\t * @type {ComputedRef<Breadcrumb>}\n\t\t */\n\t\tconst webLayoutBreadcrumb = computed(() => {\n\t\t\tconst breadcrumb = AppDataHandler.getBreadcrumbs().filter((e) => e.isWebLayout);\n\t\t\treturn breadcrumb.length !== 0 ? breadcrumb[0] : null;\n\t\t});\n\t\t/**\n\t\t * routeBreadcrumbs: router object Stack\n\t\t * @type {ComputedRef<Breadcrumb[]>}\n\t\t */\n\t\tconst routeBreadcrumbs = computed(() => AppDataHandler.getBreadcrumbs().filter((e) => !e.isWebLayout && !e.isMsgbox && !e.isContentsRow));\n\t\tprovide(\"routeBreadcrumbs\", routeBreadcrumbs);\n\n\t\t/**\n\t\t * lastBreadcrumb\n\t\t * @type {ComputedRef<Breadcrumb>}\n\t\t */\n\t\tconst lastBreadcrumb = computed(() => routeBreadcrumbs.value.length !== 0 && routeBreadcrumbs.value[routeBreadcrumbs.value.length - 1]);\n\n\t\t// Provide lastBreadcrumb to child components\n\t\tprovide(\"lastBreadcrumb\", lastBreadcrumb);\n\n\t\t//\n\t\t// Manage Window Size / Scale\n\n\t\t/**\n\t\t * appWidth\n\t\t * @type {Ref<number>}\n\t\t */\n\t\tlet appWidth = ref();\n\n\t\t/**\n\t\t * appHeight\n\t\t * @type {Ref<number>}\n\t\t */\n\t\tlet appHeight = ref();\n\n\t\tprovide(\"appSize\", { appWidth, appHeight });\n\n\t\t/**\n\t\t * containerWidth\n\t\t * @type {Ref<number>}\n\t\t */\n\t\tlet containerWidth = ref(null);\n\n\t\t/**\n\t\t * containerHeight\n\t\t * @type {Ref<number>}\n\t\t */\n\t\tlet containerHeight = ref(null);\n\n\t\t// Check if an input is focused in order to handle keyboard in mobile devices\n\t\tconst isInputFocused = ref(false);\n\t\tprovide(\"isInputFocused\", isInputFocused);\n\n\t\twatch(\n\t\t\t() => isInputFocused.value,\n\t\t\t(newValue) => {\n\t\t\t\tif (!newValue) setTimeout(() => onResize(), 250);\n\t\t\t}\n\t\t);\n\n\t\tlet resizeTimeout;\n\t\tlet allowZoom = false;\n\t\t/**\n\t\t * on window resize\n\t\t */\n\t\tconst onResize = () => {\n\t\t\tif (resizeTimeout) clearTimeout(resizeTimeout);\n\n\t\t\tresizeTimeout = setTimeout(() => {\n\t\t\t\tconst zoom = allowZoom ? window.devicePixelRatio : 1;\n\t\t\t\tif (isInputFocused.value && isMobile()) return;\n\t\t\t\tcontainerWidth.value = (appWidth.value && window.innerWidth > appWidth.value ? appWidth.value : window.innerWidth) * zoom - 2;\n\t\t\t\tcontainerHeight.value = (appHeight.value && window.innerHeight > appHeight.value ? appHeight.value : window.innerHeight) * zoom - 2;\n\t\t\t\t// Send resolution macros\n\t\t\t\txoneAppHandler && xoneAppHandler.setVisualConditionsMacros(containerWidth.value, containerHeight.value);\n\n\t\t\t\tsizeConditions.value = xoneAppHandler.sizeConditions;\n\t\t\t\torientation.value = xoneAppHandler.orientation;\n\t\t\t}, 50);\n\t\t};\n\n\t\tonMounted(() => window.addEventListener(\"resize\", onResize));\n\t\tonUnmounted(() => window.removeEventListener(\"resize\", onResize));\n\n\t\tprovide(\"containerSize\", { containerWidth, containerHeight });\n\n\t\t/**\n\t\t * Size Conditions\n\t\t * @type {Ref<string>}\n\t\t */\n\t\tconst sizeConditions = ref(\"\");\n\t\tprovide(\"sizeConditions\", sizeConditions);\n\n\t\t/**\n\t\t * Orientation\n\t\t * @type {Ref<string>}\n\t\t */\n\t\tconst orientation = ref(\"\");\n\t\tprovide(\"orientation\", orientation);\n\n\t\t//\n\t\t// Scale Factor\n\n\t\t/**\n\t\t * widthFactor\n\t\t * @type {ComputedRef<number>}\n\t\t */\n\t\tconst widthFactor = computed(() => (appWidth.value ? containerWidth.value / appWidth.value : 1));\n\n\t\t/**\n\t\t * heightFactor\n\t\t * @type {ComputedRef<number>}\n\t\t */\n\t\tconst heightFactor = computed(() => (appHeight.value ? containerHeight.value / appHeight.value : 1));\n\t\t// provide scaleFactor to child components\n\t\tprovide(\"scaleFactor\", { widthFactor, heightFactor });\n\n\t\twatch(\n\t\t\t() => widthFactor.value,\n\t\t\t(newValue) => setWidthFactor(newValue)\n\t\t);\n\t\twatch(\n\t\t\t() => heightFactor.value,\n\t\t\t(newValue) => setHeightFactor(newValue)\n\t\t);\n\n\t\t// displayScreenThresholds\n\t\tconst displayScreenThresholds = ref(false);\n\t\tprovide(\"displayScreenThresholds\", displayScreenThresholds);\n\n\t\tconst showBreadcrumbs = ref(false);\n\t\tprovide(\"showBreadcrumbs\", showBreadcrumbs);\n\n\t\t/**\n\t\t * Init appData\n\t\t */\n\t\tonMounted(() => {\n\t\t\tconst appData = new XoneApplication();\n\n\t\t\t// provide appData\n\t\t\tAppDataHandler.setAppData(appData);\n\n\t\t\t// set UI\n\t\t\tappData.setUserInterface(xoneUI);\n\n\t\t\t// Get App Configuration File and Script_Wrapper\n\t\t\tconst getConfig = Function(\n\t\t\t\t\"cbF\",\n\t\t\t\t\"(async()=>{try{const c=await import('../configuration.js');const{__SCRIPT_WRAPPERASYNC}=await import('../source/__SCRIPT_WRAPPER__.js');cbF({...c.default,sWA:__SCRIPT_WRAPPERASYNC});}catch(ex){console.error('Error loading configuration.js and __SCRIPT_WRAPPER__.js files',ex);}})()\"\n\t\t\t);\n\n\t\t\tgetConfig(async (config) => {\n\t\t\t\t// path\n\t\t\t\tlet path = (config.path ?? \"\").trim();\n\t\t\t\tif (path === \"/\") path = \"\";\n\t\t\t\telse if (path && !path.startsWith(\"/\")) path = `/${path}`;\n\t\t\t\t// Set App Path\n\t\t\t\tsetAppPath(path);\n\t\t\t\t// Add Font Faces\n\t\t\t\taddFontFaces();\n\t\t\t\t// title\n\t\t\t\tif (config.title) document.title = config.title;\n\t\t\t\t// screen thresholds\n\t\t\t\tif (config.displayScreenThresholds) displayScreenThresholds.value = true;\n\t\t\t\tif (config.showBreadcrumbs) showBreadcrumbs.value = config.showBreadcrumbs;\n\t\t\t\t// debugging\n\t\t\t\tif (config.debugging) window.debugging = true;\n\t\t\t\t// allow zoom\n\t\t\t\tallowZoom = config.allowZoom;\n\t\t\t\t// sourcePath\n\t\t\t\tlet sourcePath = `${path}/source`;\n\t\t\t\twhile (sourcePath.includes(\"//\")) sourcePath = sourcePath.replace(\"//\", \"/\");\n\t\t\t\t//\n\t\t\t\t// Init App\n\t\t\t\tawait appData.IniciarApp(\n\t\t\t\t\tsourcePath,\n\t\t\t\t\tconfig.sWA,\n\t\t\t\t\tnew FileManagerOnline(),\n\t\t\t\t\t`Data Source=${config.apiUrl};xoneuser=${config.clientId};xonepass=${config.clientSecret};ids=${config.idsUrl ||\n\t\t\t\t\t\t\"https://ids.xonedev.cloud/connect/token\"}`\n\t\t\t\t);\n\n\t\t\t\txoneAppHandler.setAppData(appData);\n\n\t\t\t\t// Set app width / height\n\t\t\t\tconst appSize = xoneAppHandler.getAppSize();\n\t\t\t\tappWidth.value = appSize?.width <= 0 ? null : appSize?.width;\n\t\t\t\tappHeight.value = appSize?.height <= 0 ? null : appSize?.height;\n\n\t\t\t\tonResize();\n\n\t\t\t\t// scaled fontsize\n\t\t\t\tconst isScaleFontsize = xoneAppHandler.isScaleFontsize();\n\t\t\t\tsetIsScaleFontsize(isScaleFontsize);\n\n\t\t\t\t// scaled fontsize\n\t\t\t\tconst webFontFactor = xoneAppHandler.getWebFontFactor();\n\t\t\t\tif (webFontFactor && !isNaN(webFontFactor)) setWebFontFactor(Number(webFontFactor));\n\n\t\t\t\t// set macros\n\t\t\t\txoneAppHandler.setInmutableMacros(appData);\n\n\t\t\t\tautoLogon = xoneAppHandler.getAutoLogon(); // TODO: crear autologon\n\t\t\t\tdoLogin();\n\t\t\t});\n\t\t});\n\n\t\tlet autoLogon = false;\n\n\t\tconst doLogin = async () => {\n\t\t\t/** @type {XoneApplication} */\n\t\t\tconst appData = AppDataHandler.getAppData();\n\n\t\t\t// Estamos en un deeplink y tendremos que ejecutar el mtodo ondeeplinkclicked en la coleccin de Empresas, previo autologon\n\t\t\tconst onErrorFunc = (msg) => {\n\t\t\t\tconsole.error(msg || \"autologon error\");\n\t\t\t\treturn router.push({ name: \"404\" });\n\t\t\t};\n\n\t\t\t// DeepLink\n\t\t\tif (route.name === \"DeepLink\") {\n\t\t\t\t// Get url params\n\t\t\t\tlet paramsObj = {};\n\t\t\t\ttry {\n\t\t\t\t\tconst search = location.href.slice(location.href.indexOf(\"/deeplink?\") + 10);\n\t\t\t\t\tparamsObj = JSON.parse('{\"' + search.replace(/&/g, '\",\"').replace(/=/g, '\":\"') + '\"}', function(key, value) {\n\t\t\t\t\t\treturn key === \"\" ? value : decodeURIComponent(value);\n\t\t\t\t\t});\n\t\t\t\t} catch {\n\t\t\t\t\treturn onErrorFunc(\"Error getting url params\");\n\t\t\t\t}\n\t\t\t\t// Autologin\n\t\t\t\ttry {\n\t\t\t\t\tconst user = await appData.login({\n\t\t\t\t\t\tuserName: \"admin\",\n\t\t\t\t\t\tpassword: \"\",\n\t\t\t\t\t\tignoreEntryPoint: true,\n\t\t\t\t\t});\n\t\t\t\t\tif (!user) return onErrorFunc();\n\t\t\t\t} catch {\n\t\t\t\t\treturn onErrorFunc();\n\t\t\t\t}\n\t\t\t\t// Launch Layout EntryPoint\n\t\t\t\tawait xoneUI.launchEntryPoint(true);\n\t\t\t\t// Execute ondeeplinkclicked node\n\t\t\t\t/** @type {XoneDataCollection} */\n\t\t\t\tconst dataCollection = await appData.getCollection(\"Empresas\");\n\t\t\t\treturn dataCollection.ExecuteCollAction(\"ondeeplinkclicked\", null, paramsObj).catch(() => {\n\t\t\t\t\tAppDataHandler.clearBreadcrumbs();\n\t\t\t\t\treturn onErrorFunc(\"error executing ondeeplinkclicked\");\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// AutoLogon\n\t\t\tif (autoLogon) {\n\t\t\t\treturn appData\n\t\t\t\t\t.login({\n\t\t\t\t\t\tuserName: \"admin\",\n\t\t\t\t\t\tpassword: \"\",\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => onErrorFunc());\n\t\t\t}\n\n\t\t\t// Default Login\n\t\t\t// if (!loginColl) // TODO: crear login integrado\n\t\t\t//   return router.push({ name: \"Login\", params: { id: \"integrated\" } });\n\n\t\t\t// XOne-User Login\n\t\t\t// Pusheamos el objeto de la coleccin de Login\n\t\t\tawait AppDataHandler.addNewXoneDataObject(appData.getLoginCollectionName(), \"Login\", false, true);\n\n\t\t\t// Send setDoLogin to XoneUI\n\t\t\tsetDoLogin(doLogin);\n\n\t\t\tconst routeTo = { name: \"Login\" };\n\n\t\t\tif (route.params?.id) routeTo.params = { id: route.params.id };\n\t\t\trouter.push(routeTo);\n\t\t};\n\n\t\tprovide(\"loginFunction\", doLogin);\n\n\t\treturn {\n\t\t\twebLayoutBreadcrumb,\n\t\t\tcontainerWidth,\n\t\t\tcontainerHeight,\n\t\t};\n\t},\n};\n</script>\n\n<style>\nbody {\n\toverscroll-behavior-y: contain;\n}\n\n#app {\n\tfont-family: \"Roboto\", Helvetica, Arial, sans-serif;\n\t-webkit-font-smoothing: antialiased;\n\t-moz-osx-font-smoothing: grayscale;\n\t/* text-align: center; */\n\tdisplay: flex;\n\tjustify-content: center;\n\toverflow: visible;\n}\n\n* {\n\tpadding: 0;\n\tmargin: 0;\n\n\t-webkit-touch-callout: none; /* iOS Safari */\n\t-webkit-user-select: none; /* Safari */\n\t-khtml-user-select: none; /* Konqueror HTML */\n\t-moz-user-select: none; /* Old versions of Firefox */\n\t-ms-user-select: none; /* Internet Explorer/Edge */\n\tuser-select: none; /* Non-prefixed version, currently\n                                  supported by Chrome, Edge, Opera and Firefox */\n\tscrollbar-width: thin;\n\tscrollbar-color: lightgrey transparent;\n}\n\ndiv {\n\tbox-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\t-webkit-box-sizing: border-box;\n}\n\n.xone-app {\n\tdisplay: flex;\n\tflex-direction: column;\n\t/* overflow: auto; */\n\toverflow: visible;\n\tmax-height: 100vh;\n\tmax-width: 100vw;\n}\n.xone-navbar {\n\tflex-shrink: 1;\n}\n\n.xone-layout,\n.xone-dataobjects {\n\tflex-grow: 1;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\toverflow: visible;\n\t/* border: 1px solid rgba(0, 0, 0, 0.12); */\n\t/* box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px rgba(0, 0, 0, 0.14),\n    0 1px 10px rgba(0, 0, 0, 0.12); */\n\twidth: var(--app-width);\n\theight: var(--app-height);\n}\n\n@keyframes fadeIn {\n\tfrom {\n\t\tz-index: 999999;\n\t\topacity: 0;\n\t}\n\tto {\n\t\tz-index: 999999;\n\t\topacity: 1;\n\t}\n}\n\n@keyframes slideLeft {\n\tfrom {\n\t\tz-index: 999999;\n\t\ttransform: translate(75%, 0);\n\t}\n\tto {\n\t\tz-index: 999999;\n\t\ttransform: translate(0, 0);\n\t}\n}\n\n@keyframes slideRight {\n\tfrom {\n\t\tz-index: 999999;\n\t\ttransform: translate(-75%, 0);\n\t}\n\tto {\n\t\tz-index: 999999;\n\t\ttransform: translate(0, 0);\n\t}\n}\n\n@keyframes zoomIn {\n\tfrom {\n\t\tz-index: 999999;\n\t\ttransform: scale(0);\n\t}\n\tto {\n\t\tz-index: 999999;\n\t\ttransform: scale(1);\n\t}\n}\n\n@keyframes slideDown {\n\t0% {\n\t\tz-index: 999999;\n\t\ttransform: translateY(-50px);\n\t}\n\n\t100% {\n\t\tz-index: 999999;\n\t\ttransform: translateY(0);\n\t}\n}\n\n@keyframes slideUp {\n\t0% {\n\t\tz-index: 999999;\n\t\ttransform: translateY(50px);\n\t}\n\n\t100% {\n\t\tz-index: 999999;\n\t\ttransform: translateY(0);\n\t}\n}\n\n@keyframes right_in {\n\tfrom {\n\t\tz-index: 999999;\n\t\ttransform: translateX(100px);\n\t}\n\tto {\n\t\tz-index: 999999;\n\t\ttransform: translateX(0px);\n\t}\n}\n\n@-webkit-keyframes fadeIn {\n\tfrom {\n\t\tz-index: 999999;\n\t\topacity: 0;\n\t}\n\tto {\n\t\tz-index: 999999;\n\t\topacity: 1;\n\t}\n}\n\n@-webkit-keyframes slideLeft {\n\tfrom {\n\t\tz-index: 999999;\n\t\ttransform: translate(75%, 0);\n\t}\n\tto {\n\t\tz-index: 999999;\n\t\ttransform: translate(0, 0);\n\t}\n}\n\n@-webkit-keyframes slideRight {\n\tfrom {\n\t\tz-index: 999999;\n\t\ttransform: translate(-75%, 0);\n\t}\n\tto {\n\t\tz-index: 999999;\n\t\ttransform: translate(0, 0);\n\t}\n}\n\n@-webkit-keyframes zoomIn {\n\tfrom {\n\t\tz-index: 999999;\n\t\ttransform: scale(0);\n\t}\n\tto {\n\t\tz-index: 999999;\n\t\ttransform: scale(1);\n\t}\n}\n\n@-webkit-keyframes slideDown {\n\t0% {\n\t\tz-index: 999999;\n\t\ttransform: translateY(-50px);\n\t}\n\n\t100% {\n\t\tz-index: 999999;\n\t\ttransform: translateY(0);\n\t}\n}\n@-webkit-keyframes slideUp {\n\t0% {\n\t\tz-index: 999999;\n\t\ttransform: translateY(50px);\n\t}\n\n\t100% {\n\t\tz-index: 999999;\n\t\ttransform: translateY(0);\n\t}\n}\n\n@-webkit-keyframes right_in {\n\tfrom {\n\t\tz-index: 999999;\n\t\ttransform: translateX(100px);\n\t}\n\tto {\n\t\tz-index: 999999;\n\t\ttransform: translateX(0px);\n\t}\n}\n\n/* width */\n::-webkit-scrollbar {\n\twidth: 7px;\n\theight: 7px;\n}\n\n/* Track */\n::-webkit-scrollbar-track {\n\tbackground: transparent;\n}\n\n/* Handle */\n::-webkit-scrollbar-thumb {\n\tbackground: lightgrey;\n\tborder-radius: 4px;\n}\n\n/* Handle on hover */\n::-webkit-scrollbar-thumb:hover {\n\tbackground: #555;\n}\n\n/* Leaflet map routing */\n.leaflet-routing-container {\n\tdisplay: none;\n}\n\n/* Loader */\n\n.xone-loader {\n\twidth: 100%;\n\ttext-align: center;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tmargin: 10px 0;\n\tpadding-bottom: 25px;\n\tgrid-column: 1 / -1;\n\theight: 100px;\n\tanimation: fadeIn 0.3s;\n}\n\n.xone-loader div:first-child {\n\theight: 35px;\n\twidth: 35px;\n\tborder-radius: 50%;\n\tborder: 4px solid lightgray;\n\tborder-left: 4px solid gray;\n\t-webkit-animation: spin 0.6s linear infinite;\n\tanimation: spin 0.6s linear infinite;\n}\n\n.xone-dataobject {\n\tposition: relative;\n\tflex-grow: 1;\n\tanimation: loadEffect 0.3s;\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n@keyframes loadEffect {\n\tfrom {\n\t\topacity: 0.1;\n\t}\n\tto {\n\t\topacity: 1;\n\t}\n}\n\n@-webkit-keyframes loadEffect {\n\tfrom {\n\t\topacity: 0.1;\n\t}\n\tto {\n\t\topacity: 1;\n\t}\n}\n/* Safari */\n@-webkit-keyframes spin {\n\t0% {\n\t\t-webkit-transform: rotate(0deg);\n\t}\n\t100% {\n\t\t-webkit-transform: rotate(360deg);\n\t}\n}\n\n@keyframes spin {\n\t0% {\n\t\ttransform: rotate(0deg);\n\t}\n\t100% {\n\t\ttransform: rotate(360deg);\n\t}\n}\n</style>\n","<template>\n  <teleport v-if=\"toastElements.length !== 0\" to=\"body\">\n    <!-- Toast Container -->\n    <div class=\"xone-toast\">\n      <!-- Toast Items -->\n      <div v-for=\"(toast, index) in toastElements\" :key=\"`toast-${index}`\" :class=\"toast.class\">\n        {{ toast.message }}\n      </div>\n    </div>\n  </teleport>\n</template>\n\n<script>\nimport { ref } from \"vue\";\nimport { setShowToastCallback } from \"../../composables/XoneUI\";\n\nexport default {\n  setup() {\n    let toastElements = ref([]);\n    const duration = 3000;\n\n    // showToast CallBack function\n    setShowToastCallback((message) => {\n      let obj = toastElements.value.find((e) => e.class === \"hide\");\n      if (!obj) {\n        toastElements.value.push({});\n        obj = toastElements.value[toastElements.value.length - 1];\n      }\n      obj.message = message;\n      obj.class = \"showanimation\";\n      setTimeout(() => {\n        obj.class = \"hideanimation\";\n\n        setTimeout(() => {\n          obj.class = \"hide\";\n          if (toastElements.value.filter((e) => e.class === \"showanimation\" || e.class === \"hideanimation\").length === 0) {\n            toastElements.value = []; // Clear items\n          }\n        }, 500);\n      }, duration + 500);\n    });\n\n    return { toastElements };\n  },\n};\n</script>\n\n<style scoped>\n.xone-toast {\n  position: absolute;\n  bottom: 8px;\n  padding-bottom: 40px;\n  display: flex;\n  flex-direction: column-reverse;\n  overflow: hidden;\n  pointer-events: none;\n  width: 100vw;\n  z-index: 999;\n}\n\n.xone-toast div {\n  align-self: center;\n  text-align: justify;\n  padding: 10px 20px;\n  margin-bottom: 5px;\n  background-color: whitesmoke;\n  color: black;\n  border-radius: 50px;\n  box-shadow: 1.5px 1.5px 1px gray;\n  pointer-events: none;\n  border: 1px solid rgba(0, 0, 0, 0.12);\n  margin: 10px;\n  box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px rgba(0, 0, 0, 0.14), 0 1px 10px rgba(0, 0, 0, 0.12);\n}\n\n.showanimation {\n  animation: slideUp 0.5s;\n  opacity: 1;\n}\n\n.hideanimation {\n  animation: slideDown 0.5s;\n  opacity: 0;\n}\n\n.hide {\n  opacity: 0;\n}\n\n@keyframes slideUp {\n  0% {\n    opacity: 0;\n    transform: translate(0, 300px) scale(0.5);\n  }\n  75% {\n    opacity: 1;\n    transform: translate(0, -5px) scale(1.1, 1);\n  }\n  100% {\n    transform: translate(0, 0) scale(1);\n  }\n}\n\n@keyframes slideDown {\n  0% {\n    transform: translate(0, 0);\n    opacity: 1.5;\n  }\n  100% {\n    transform: translate(0, 300px);\n    opacity: 0;\n  }\n}\n\n@keyframes size {\n  0% {\n    transform: scale(0.5);\n  }\n  75% {\n    transform: scale(1.05);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n\n@-webkit-keyframes slideUp {\n  0% {\n    opacity: 0;\n    transform: translate(0, 300px) scale(0.5);\n  }\n  75% {\n    opacity: 1;\n    transform: translate(0, -5px) scale(1.1, 1);\n  }\n  100% {\n    transform: translate(0, 0) scale(1);\n  }\n}\n\n@-webkit-keyframes slideDown {\n  0% {\n    transform: translate(0, 0);\n    opacity: 1.5;\n  }\n  100% {\n    transform: translate(0, 300px);\n    opacity: 0;\n  }\n}\n\n@-webkit-keyframes size {\n  0% {\n    transform: scale(0.5);\n  }\n  75% {\n    transform: scale(1.05);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n</style>\n","import { render } from \"./Toast.vue?vue&type=template&id=0e840586&scoped=true\"\nimport script from \"./Toast.vue?vue&type=script&lang=js\"\nexport * from \"./Toast.vue?vue&type=script&lang=js\"\n\nimport \"./Toast.vue?vue&type=style&index=0&id=0e840586&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0e840586\"]])\n\nexport default __exports__","<template>\n\t<!-- SnackBar container -->\n\t<teleport v-if=\"snackBarElements.length !== 0\" to=\"body\">\n\t\t<div class=\"xone-snackbar\">\n\t\t\t<!-- SnackBar items -->\n\t\t\t<div\n\t\t\t\tv-for=\"(snackBar, index) in snackBarElements\"\n\t\t\t\t:key=\"`snackBar-${index}`\"\n\t\t\t\t:class=\"snackBar.class\"\n\t\t\t\t:style=\"{\n\t\t\t\t\tbackgroundColor: snackBar.color,\n\t\t\t\t\tcolor: snackBar.textColor,\n\t\t\t\t\twidth: snackBar.width,\n\t\t\t\t\theight: snackBar.height,\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<!-- Text -->\n\t\t\t\t<p class=\"xone-snackbar-text\">{{ snackBar.text }}</p>\n\t\t\t\t<!-- Action -->\n\t\t\t\t<p class=\"xone-snackbar-action\" :style=\"{ color: snackBar.actionTextColor }\" @click=\"onSnackBarActionPressed(snackBar)\">\n\t\t\t\t\t{{ snackBar.actionText }}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t</teleport>\n</template>\n\n<script>\nimport { inject, ref, Ref, ComputedRef } from \"vue\";\nimport { setShowSnackbarCallback, SnackBarParams } from \"../../composables/XoneUI\";\n\nexport default {\n\tsetup() {\n\t\tlet snackBarElements = ref([]);\n\n\t\t// showSnackBar CallBack function\n\t\tsetShowSnackbarCallback((/** @type {SnackBarParams} */ params) => {\n\t\t\tconst {\n\t\t\t\tcolor = \"gray\",\n\t\t\t\tduration = \"short\",\n\t\t\t\twidth = \"100%\",\n\t\t\t\theight = \"auto\",\n\t\t\t\ttext = \"\",\n\t\t\t\ttextColor = \"white\",\n\t\t\t\tactionText = \"Ok\",\n\t\t\t\tactionTextColor = \"white\",\n\t\t\t\tactionMethod = () => {},\n\t\t\t} = typeof params === \"string\" ? (params = { text: params }) : params;\n\n\t\t\tlet obj = snackBarElements.value.find((e) => e.class === \"hide\");\n\t\t\tif (!obj) {\n\t\t\t\tsnackBarElements.value.push({});\n\t\t\t\tobj = snackBarElements.value[snackBarElements.value.length - 1];\n\t\t\t}\n\t\t\tobj.color = color;\n\t\t\tobj.width = width?.replace(\"p\", \"px\");\n\t\t\tobj.height = height;\n\t\t\tobj.text = text;\n\t\t\tobj.textColor = textColor;\n\t\t\tobj.actionText = actionText;\n\t\t\tobj.actionTextColor = actionTextColor;\n\t\t\tobj.actionMethod = actionMethod;\n\t\t\tobj.class = \"showanimation\";\n\t\t\tif (duration === \"long\") setTimeout(() => hideSnackBar(obj), 6500);\n\t\t\tif (duration !== \"indeterminate\" && duration !== \"indefinite\") setTimeout(() => hideSnackBar(obj), 3500);\n\t\t});\n\n\t\t// Hide SnackBar\n\t\tconst hideSnackBar = (obj) => {\n\t\t\tif (!obj || obj?.class === \"hideanimation\" || obj?.class === \"hide\") return;\n\t\t\tobj.class = \"hideanimation\";\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tobj.class = \"hide\";\n\t\t\t\tif (snackBarElements.value.filter((e) => e.class === \"showanimation\" || e.class === \"hideanimation\").length === 0) {\n\t\t\t\t\tsnackBarElements.value = []; // clear items\n\t\t\t\t}\n\t\t\t}, 500);\n\t\t};\n\n\t\t// SnackBar Action\n\t\tconst onSnackBarActionPressed = (obj) => {\n\t\t\tif (obj && obj.class !== \"hide\") hideSnackBar(obj);\n\t\t\tobj?.actionMethod && obj.actionMethod();\n\t\t};\n\n\t\t/**\n\t\t * Window Size\n\t\t * @type {{containerWidth: Ref<number>|ComputedRef<number>}}\n\t\t */\n\t\tconst { containerWidth } = inject(\"containerSize\");\n\n\t\treturn {\n\t\t\tsnackBarElements,\n\t\t\tonSnackBarActionPressed,\n\t\t\tcontainerWidth,\n\t\t};\n\t},\n};\n</script>\n\n<style scoped>\n.xone-snackbar {\n\tposition: absolute;\n\tdisplay: flex;\n\tflex-direction: column-reverse;\n\toverflow: hidden;\n\tbottom: 0px;\n\tflex-shrink: 1;\n\tmin-height: 100px;\n\twidth: 100vw;\n\tz-index: 999;\n}\n\n.xone-snackbar div {\n\tmin-height: 75px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\talign-self: center;\n\tcolor: white;\n\tborder-radius: 5px;\n\ttext-align: center;\n\tjustify-self: center;\n\tborder: 1px solid lightgray;\n\tborder-bottom: none;\n}\n\n.xone-snackbar div .xone-snackbar-text {\n\tflex-grow: 1;\n\tpadding: 5px;\n\tfont-weight: bold;\n}\n\n.xone-snackbar div .xone-snackbar-action {\n\tpadding: 5px 10px;\n\tfont-weight: bold;\n\tmargin-right: 30px;\n}\n\n.xone-snackbar div .xone-snackbar-action:hover {\n\tcursor: pointer;\n}\n\n.showanimation {\n\tanimation: slideUp 0.5s;\n\topacity: 1;\n}\n\n.hideanimation {\n\tanimation: slideDown 0.5s;\n\topacity: 0;\n}\n\n.hide {\n\topacity: 0;\n}\n\n@keyframes slideUp {\n\tfrom {\n\t\topacity: 0;\n\t\ttransform: translate(0, 300px);\n\t}\n\tto {\n\t\topacity: 1;\n\t\ttransform: translate(0, 0);\n\t}\n}\n\n@keyframes slideDown {\n\tfrom {\n\t\ttransform: translate(0, 0);\n\t\topacity: 1;\n\t}\n\tto {\n\t\ttransform: translate(0, 300px);\n\t\topacity: 0;\n\t}\n}\n\n@-webkit-keyframes slideUp {\n\tfrom {\n\t\topacity: 0;\n\t\ttransform: translate(0, 300px);\n\t}\n\tto {\n\t\topacity: 1;\n\t\ttransform: translate(0, 0);\n\t}\n}\n\n@-webkit-keyframes slideDown {\n\tfrom {\n\t\ttransform: translate(0, 0);\n\t\topacity: 1;\n\t}\n\tto {\n\t\ttransform: translate(0, 300px);\n\t\topacity: 0;\n\t}\n}\n</style>\n","import { render } from \"./SnackBar.vue?vue&type=template&id=620f34b4&scoped=true\"\nimport script from \"./SnackBar.vue?vue&type=script&lang=js\"\nexport * from \"./SnackBar.vue?vue&type=script&lang=js\"\n\nimport \"./SnackBar.vue?vue&type=style&index=0&id=620f34b4&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-620f34b4\"]])\n\nexport default __exports__","<template>\n\t<teleport v-if=\"isLoaderVisible\" to=\"body\">\n\t\t<div class=\"xone-loader-transition\">\n\t\t\t<div></div>\n\t\t</div>\n\t</teleport>\n</template>\n\n<script>\nimport { ref } from \"vue\";\nimport { setHideLoaderCallback, setShowLoaderCallback } from \"../../composables/XoneUI\";\nexport default {\n\tsetup() {\n\t\tconst isLoaderVisible = ref(false);\n\n\t\tsetShowLoaderCallback(async () => (isLoaderVisible.value = true));\n\t\tsetHideLoaderCallback(async () => (isLoaderVisible.value = false));\n\n\t\treturn { isLoaderVisible };\n\t},\n};\n</script>\n\n<style scoped>\n.xone-loader-transition {\n\tposition: absolute;\n\ttop: 0;\n\tbackground-color: rgba(0, 0, 0, 0.3);\n\twidth: 100%;\n\theight: 100vh;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tanimation: fadeIn 0.3s;\n\tz-index: 99999;\n}\n\n.xone-loader-transition div:first-child {\n\tborder-radius: 50%;\n\tborder: 8px solid white;\n\tborder-left: 8px solid transparent;\n\twidth: 8vh;\n\theight: 8vh;\n\t-webkit-animation: spin 0.7s linear infinite;\n\tanimation: spin 0.7s linear infinite;\n}\n\n@keyframes fadeIn {\n\tfrom {\n\t\tz-index: 999999;\n\t\topacity: 0.2;\n\t}\n\tto {\n\t\tz-index: 999999;\n\t\topacity: 0.6;\n\t}\n}\n\n@-webkit-keyframes fadeIn {\n\tfrom {\n\t\tz-index: 999999;\n\t\topacity: 0.2;\n\t}\n\tto {\n\t\tz-index: 999999;\n\t\topacity: 0.6;\n\t}\n}\n</style>\n","import { render } from \"./Loader.vue?vue&type=template&id=2873404c&scoped=true\"\nimport script from \"./Loader.vue?vue&type=script&lang=js\"\nexport * from \"./Loader.vue?vue&type=script&lang=js\"\n\nimport \"./Loader.vue?vue&type=style&index=0&id=2873404c&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2873404c\"]])\n\nexport default __exports__","<template>\n\t<teleport v-if=\"state.visible\" to=\"body\">\n\t\t<div class=\"xone-msgbox\">\n\t\t\t<!-- Standard Msgbox -->\n\t\t\t<div class=\"xone-msgbox-box\" v-if=\"!state.isCustomMsgbox\">\n\t\t\t\t<div class=\"xone-msgbox-title\">{{ state.title }}</div>\n\t\t\t\t<div class=\"xone-msgbox-text\">{{ state.msg }}</div>\n\t\t\t\t<div class=\"xone-msgbox-options\">\n\t\t\t\t\t<button ref=\"btnOkElement\" @click=\"onClick(true)\">{{ state.btn1 }}</button>\n\t\t\t\t\t<button v-if=\"state.btn2 !== ''\" @click=\"onClick(false)\">\n\t\t\t\t\t\t{{ state.btn2 }}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<!-- Custom Msgbox -->\n\t\t\t<div class=\"xone-custom-msgbox\" v-if=\"msgboxBreadcrumb\">\n\t\t\t\t<Coll :breadcrumb=\"msgboxBreadcrumb\" :objectInfo=\"objectInfo\"></Coll>\n\t\t\t</div>\n\t\t</div>\n\t</teleport>\n</template>\n\n<script>\nimport { computed, inject, reactive, Ref, ComputedRef, ref, nextTick } from \"vue\";\n\nimport Coll from \"../Coll.vue\";\nimport { setCustomMsgBoxCallback, setMsgBoxCallback } from \"../../composables/XoneUI\";\nimport { XoneDataObject } from \"../../composables/appData/core/XoneDataObject\";\nimport AppDataHandler, { Breadcrumb } from \"../../composables/AppDataHandler\";\n\nexport default {\n\tcomponents: {\n\t\tColl,\n\t},\n\tsetup() {\n\t\tconst state = reactive({\n\t\t\tisCustomMsgbox: false,\n\t\t\ttitle: \"\",\n\t\t\tmsg: \"\",\n\t\t\tflags: 0,\n\t\t\tbtn1: \"\",\n\t\t\tbtn2: \"\",\n\t\t\tresponse: null,\n\t\t\tvisible: false,\n\t\t});\n\n\t\t//\n\t\t// Standard Msgbox\n\n\t\tsetMsgBoxCallback(async (message = \"\", title = \"\", flags = 0) => {\n\t\t\tstate.isCustomMsgbox = false;\n\t\t\tstate.title = title;\n\t\t\tstate.msg = message;\n\t\t\tstate.flags = flags;\n\t\t\tswitch (flags) {\n\t\t\t\tcase 0:\n\t\t\t\t\tstate.btn1 = \"Ok\";\n\t\t\t\t\tstate.btn2 = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\tstate.btn1 = \"S\";\n\t\t\t\t\tstate.btn2 = \"No\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tstate.btn1 = \"Ok\";\n\t\t\t\t\tstate.btn2 = \"Cancel\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tstate.response = null;\n\t\t\tstate.visible = true;\n\t\t\tawait nextTick();\n\t\t\tbtnOkElement.value.focus();\n\t\t\twhile (!state.response) await new Promise((resolve) => setTimeout(() => resolve(), 100));\n\n\t\t\tstate.visible = false;\n\n\t\t\treturn state.response;\n\t\t});\n\n\t\tconst onClick = (isAccepted) => {\n\t\t\tswitch (state.flags) {\n\t\t\t\tcase 0:\n\t\t\t\t\treturn (state.response = 10);\n\t\t\t\tcase 1:\n\t\t\t\t\treturn (state.response = isAccepted ? 1 : 2);\n\t\t\t\tcase 4:\n\t\t\t\t\treturn (state.response = isAccepted ? 6 : 7);\n\t\t\t\tdefault:\n\t\t\t\t\treturn (state.response = 0);\n\t\t\t}\n\t\t};\n\n\t\t//\n\t\t// Custom MsgBox\n\n\t\t/**\n\t\t * XOne Web Layout\n\t\t * @type {ComputedRef<Breadcrumb>}\n\t\t */\n\t\tconst msgboxBreadcrumb = computed(() => {\n\t\t\tconst layout = AppDataHandler.getBreadcrumbs().filter((e) => e.isMsgbox);\n\t\t\treturn layout.length !== 0 ? layout[0] : null;\n\t\t});\n\n\t\tconst objectInfo = {\n\t\t\tisContents: false,\n\t\t\tisMsgBox: true,\n\t\t\tonMsgBoxOptionSelected: (res) => {\n\t\t\t\tAppDataHandler.removeBreadcrumb(msgboxBreadcrumb.value.id);\n\t\t\t\treturn (state.response = !isNaN(Number(res)) ? Number(res) : (state.response = res));\n\t\t\t},\n\t\t};\n\n\t\tsetCustomMsgBoxCallback(async (dataObject) => {\n\t\t\tstate.response = null;\n\n\t\t\tif (!(dataObject instanceof XoneDataObject)) return;\n\n\t\t\tAppDataHandler.pushXoneDataObject(dataObject, \"Msgbox\", false, true);\n\n\t\t\tstate.isCustomMsgbox = true;\n\t\t\tstate.visible = true;\n\n\t\t\twhile (!state.response) await new Promise((resolve) => setTimeout(() => resolve(), 100));\n\n\t\t\tstate.visible = false;\n\n\t\t\treturn state.response;\n\t\t});\n\n\t\t/**\n\t\t * Window Size\n\t\t * @type {{containerWidth: Ref<number>|ComputedRef<number>, containerHeight: Ref<number>|ComputedRef<number>}}\n\t\t */\n\t\tconst { containerWidth, containerHeight } = inject(\"containerSize\");\n\n\t\t/** @type {Ref<HTMLButtonElement>} */\n\t\tconst btnOkElement = ref();\n\n\t\treturn {\n\t\t\tstate,\n\t\t\tonClick,\n\t\t\tmsgboxBreadcrumb,\n\t\t\tcontainerWidth,\n\t\t\tcontainerHeight,\n\t\t\tobjectInfo,\n\t\t\tbtnOkElement,\n\t\t};\n\t},\n};\n</script>\n\n<style scoped>\n.xone-msgbox {\n\tposition: absolute;\n\tbackground-color: rgba(0, 0, 0, 0.5);\n\ttop: 0;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\twidth: 100%;\n\theight: 100vh;\n\tpointer-events: all;\n\tanimation: fadeIn 0.3s;\n\tz-index: 999;\n}\n\n.xone-msgbox-box {\n\tmax-width: 95vw;\n\tmax-height: 95vh;\n\tpadding: 20px;\n\tmargin: 10px;\n\tdisplay: flex;\n\tflex-direction: column;\n\tbackground-color: white;\n\tborder-radius: 5px;\n\tborder: 1px rgba(0, 0, 0, 0.14) solid;\n\tbox-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px rgba(0, 0, 0, 0.14), 0 1px 10px rgba(0, 0, 0, 0.12);\n\tanimation: zoomIn 0.3s;\n\toverflow-x: hidden;\n\toverflow-y: auto;\n}\n\n.xone-msgbox-title {\n\tmargin-bottom: 30px;\n\twidth: 100%;\n\tfont-size: 21px;\n\ttext-align: justify;\n}\n\n.xone-msgbox-text {\n\twidth: 100%;\n\tfont-size: 18px;\n\ttext-align: justify;\n}\n\n.xone-msgbox-options {\n\twidth: 100%;\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: flex-end;\n}\n\n.xone-msgbox-options button {\n\tmargin-top: 30px;\n\tmargin-left: 10px;\n\tpadding: 5px 10px;\n\tborder: none;\n\tcolor: #3273dc;\n\tborder: 1px #3273dc solid;\n\tborder-radius: 5px;\n\tbackground-color: transparent;\n\tfont-size: 16px;\n}\n\n.xone-msgbox-options button:hover {\n\tcursor: pointer;\n}\n\n.xone-custom-msgbox {\n\tdisplay: flex;\n\tflex-direction: column;\n\tanimation: fadeIn 0.5s ease, zoomIn 0.3s ease;\n}\n</style>\n","import { render } from \"./MsgBox.vue?vue&type=template&id=2b0d8532&scoped=true\"\nimport script from \"./MsgBox.vue?vue&type=script&lang=js\"\nexport * from \"./MsgBox.vue?vue&type=script&lang=js\"\n\nimport \"./MsgBox.vue?vue&type=style&index=0&id=2b0d8532&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2b0d8532\"]])\n\nexport default __exports__","<template>\n\t<teleport v-if=\"isCameraVisible\" to=\"body\">\n\t\t<div class=\"xone-camera\">\n\t\t\t<div\n\t\t\t\tclass=\"xone-camera-container\"\n\t\t\t\t:style=\"{\n\t\t\t\t\twidth: `${size - 50}px`,\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<!-- Cancel button -->\n\t\t\t\t<button class=\"xone-cancel\" @click=\"isCameraVisible = false\">\n\t\t\t\t\tCancel\n\t\t\t\t</button>\n\t\t\t\t<!-- Camera -->\n\t\t\t\t<video\n\t\t\t\t\tv-if=\"!isNotSupported && !isVideoRecorded && !isPhotoTook\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\twidth: `${size - 50}px`,\n\t\t\t\t\t}\"\n\t\t\t\t\tref=\"videoElement\"\n\t\t\t\t\tautoplay\n\t\t\t\t></video>\n\t\t\t\t<!-- Video preview -->\n\t\t\t\t<video\n\t\t\t\t\tv-show=\"isVideoRecorded\"\n\t\t\t\t\tref=\"videoPreviewElement\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\twidth: `${size - 50}px`,\n\t\t\t\t\t}\"\n\t\t\t\t\tcontrols\n\t\t\t\t></video>\n\t\t\t\t<!-- Photo preview -->\n\t\t\t\t<div\n\t\t\t\t\tv-show=\"isPhotoTook\"\n\t\t\t\t\tref=\"photoPreviewElement\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\twidth: `${size - 50}px`,\n\t\t\t\t\t}\"\n\t\t\t\t></div>\n\t\t\t\t<!-- Not supported message -->\n\t\t\t\t<div style=\"padding: 50px\" v-if=\"isNotSupported\">\n\t\t\t\t\tCAMERA UNSUPPORTED IN YOUR BROWSER\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<div v-if=\"!isNotSupported && !isVideoRecorded && !isPhotoTook\">\n\t\t\t\t\t\t<!-- Photo button -->\n\t\t\t\t\t\t<button v-if=\"!isRecording && isTypePhoto\" class=\"xone-photo\" @click=\"takePhoto\">\n\t\t\t\t\t\t\t<div><div></div></div>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<!-- Video button -->\n\t\t\t\t\t\t<button v-if=\"isTypeVideo\" class=\"xone-video\" @click=\"recordVideo\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\t\t\tborderRadius: isRecording ? '5px' : '100%',\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"isVideoRecorded || isPhotoTook\">PREVIEW</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</teleport>\n</template>\n<script>\nimport { computed, inject, ref, Ref, ComputedRef, watch } from \"vue\";\n\nimport { setStartCameraCallback } from \"../../composables/XoneUI\";\n\nexport default {\n\tsetup() {\n\t\tconst isCameraVisible = ref(false);\n\n\t\t/**\n\t\t * video element\n\t\t * @type {Ref<HTMLElement>}\n\t\t */\n\t\tconst videoElement = ref();\n\n\t\tconst isPhotoTook = ref(false);\n\t\tconst isVideoRecorded = ref(false);\n\n\t\t/**\n\t\t * photo preview element\n\t\t * @type {Ref<HTMLElement>}\n\t\t */\n\t\tconst photoPreviewElement = ref();\n\n\t\t/**\n\t\t * video preview element\n\t\t * @type {Ref<HTMLElement>}\n\t\t */\n\t\tconst videoPreviewElement = ref();\n\n\t\t/**\n\t\t * is not supported\n\t\t * @type {Ref<boolean>}\n\t\t */\n\t\tconst isNotSupported = ref(false);\n\n\t\t/**\n\t\t * stream\n\t\t * @type {MediaStream}\n\t\t */\n\t\tlet stream;\n\n\t\tconst isTypeVideo = ref(false);\n\t\tconst isTypePhoto = ref(false);\n\n\t\tsetStartCameraCallback((type = \"photo\") => {\n\t\t\tisTypeVideo.value = type !== \"photo\";\n\t\t\tisTypePhoto.value = type !== \"video\";\n\n\t\t\tisCameraVisible.value = true;\n\t\t\t// TODO: devolver la captura, habr que ver cmo lo vamos a implementar para subir el fichero al servidor\n\t\t});\n\n\t\t/**\n\t\t * Show / Hide camera\n\t\t */\n\t\twatch(\n\t\t\t() => isCameraVisible.value,\n\t\t\tasync (newValue) => {\n\t\t\t\t// reset booleans\n\t\t\t\tisNotSupported.value = false;\n\t\t\t\tisPhotoTook.value = false;\n\t\t\t\tisVideoRecorded.value = false;\n\t\t\t\t// Start camera\n\t\t\t\tif (newValue) {\n\t\t\t\t\tif (!navigator.mediaDevices) return (isNotSupported.value = true);\n\n\t\t\t\t\tnavigator.mediaDevices.enumerateDevices().then(console.log); // TODO:  cambiar de recurso para alterar front y back camera de un dispositivo mobil\n\t\t\t\t\tstream = await navigator.mediaDevices.getUserMedia({\n\t\t\t\t\t\taudio: false,\n\t\t\t\t\t\tvideo: true,\n\t\t\t\t\t});\n\t\t\t\t\tvideoElement.value.srcObject = stream;\n\t\t\t\t} else {\n\t\t\t\t\t// Stop camera\n\t\t\t\t\tif (stream) stream.getTracks().forEach((track) => track.stop());\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\t/**\n\t\t * Window Size\n\t\t * @type {{containerWidth: Ref<number>|ComputedRef<number>, containerHeight: Ref<number>|ComputedRef<number>}}\n\t\t */\n\t\tconst { containerWidth, containerHeight } = inject(\"containerSize\");\n\n\t\tconst size = computed(() => (containerWidth.value < containerHeight.value ? containerWidth.value : containerHeight.value));\n\n\t\tconst takePhoto = () => {\n\t\t\t/** @type {HTMLVideoElement} */\n\t\t\tconst video = videoElement.value;\n\t\t\t// Image Size\n\t\t\tconst imageWidth = video.offsetWidth; // video.videoWidth\n\t\t\tconst imageHeight = video.offsetHeight; // video.videoHeight\n\t\t\t// Create canvas\n\t\t\tconst canvas = document.createElement(\"canvas\");\n\t\t\tcanvas.attributes.overflow = \"auto\";\n\t\t\tcanvas.width = imageWidth;\n\t\t\tcanvas.height = imageHeight;\n\t\t\t// Get Context\n\t\t\tconst context = canvas.getContext(\"2d\");\n\t\t\tcontext.drawImage(video, 0, 0, canvas.width, canvas.height);\n\t\t\tcontext.canvas.toBlob((blob) => {\n\t\t\t\tblobValue = blob;\n\t\t\t\t// Create image\n\t\t\t\tconst newImg = new Image();\n\t\t\t\tnewImg.src = URL.createObjectURL(blob);\n\t\t\t\tnewImg.width = video.offsetWidth;\n\t\t\t\tnewImg.height = video.offsetHeight;\n\t\t\t\t// Revoke Url\n\t\t\t\t// For Firefox it is necessary to delay revoking the ObjectURL\n\t\t\t\tsetTimeout(() => URL.revokeObjectURL(blob), 250);\n\t\t\t\t// Append preview image\n\t\t\t\tphotoPreviewElement.value.innerHTML = \"\";\n\t\t\t\tphotoPreviewElement.value.appendChild(newImg);\n\t\t\t\t// Video / Photo variables\n\t\t\t\tisVideoRecorded.value = false;\n\t\t\t\tisPhotoTook.value = true;\n\t\t\t\t// // Download file\n\t\t\t\t// const tempLink = document.createElement(\"a\");\n\t\t\t\t// tempLink.style.display = \"none\";\n\t\t\t\t// tempLink.href = newImg.src;\n\t\t\t\t// tempLink.setAttribute(\"download\", \"capture_\" + new Date().getTime());\n\t\t\t\t// if (typeof tempLink.download === \"undefined\") {\n\t\t\t\t//   tempLink.setAttribute(\"target\", \"_blank\");\n\t\t\t\t// }\n\t\t\t\t// document.body.appendChild(tempLink);\n\t\t\t\t// tempLink.click();\n\t\t\t\t// document.body.removeChild(tempLink);\n\t\t\t});\n\t\t};\n\n\t\tconst isRecording = ref(false);\n\n\t\tlet videoTimeout;\n\n\t\t// media recorder\n\t\tlet mediaRecorder;\n\n\t\t/**\n\t\t * video chunks\n\t\t * @type {Array}\n\t\t */\n\t\tlet chunks;\n\n\t\t/**\n\t\t * blob  (video)\n\t\t * @type {Blob}\n\t\t */\n\t\tlet blobValue;\n\n\t\tconst recordVideo = () => {\n\t\t\ttry {\n\t\t\t\tif (isRecording.value) {\n\t\t\t\t\tif (videoTimeout) clearTimeout(videoTimeout);\n\t\t\t\t\tmediaRecorder.stop();\n\t\t\t\t}\n\t\t\t\tif (!MediaRecorder) {\n\t\t\t\t\tisNotSupported.value = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tchunks = [];\n\n\t\t\t\tconst options = {\n\t\t\t\t\tmimeType: \"video/webm;codecs=h264\",\n\t\t\t\t};\n\n\t\t\t\tif (!MediaRecorder.isTypeSupported(options.mimeType)) options.mimeType = \"video/webm;codecs=vp8\";\n\n\t\t\t\tmediaRecorder = new MediaRecorder(stream, options);\n\n\t\t\t\tmediaRecorder.start();\n\n\t\t\t\tisRecording.value = true;\n\n\t\t\t\tmediaRecorder.ondataavailable = (e) => chunks.push(e.data);\n\n\t\t\t\tmediaRecorder.onstop = () => {\n\t\t\t\t\t//} (e) => {\n\t\t\t\t\tblobValue = new Blob(chunks, { type: \"video/webm\" });\n\n\t\t\t\t\tconst url = URL.createObjectURL(blobValue);\n\n\t\t\t\t\tvideoPreviewElement.value.onload = () => URL.revokeObjectURL(url);\n\n\t\t\t\t\tvideoPreviewElement.value.src = url;\n\t\t\t\t\tvideoPreviewElement.value.autoplay = true;\n\n\t\t\t\t\tisVideoRecorded.value = true;\n\t\t\t\t\tisPhotoTook.value = false;\n\t\t\t\t\tisRecording.value = false;\n\t\t\t\t};\n\n\t\t\t\tvideoTimeout = setTimeout(() => mediaRecorder.stop(), 15000);\n\t\t\t} catch (ex) {\n\t\t\t\tconsole.log(\n\t\t\t\t\t`%c MediaRecorded error: '${ex}' %c Feature allowed in %c Chrome %c browser `,\n\t\t\t\t\t\"color: red\",\n\t\t\t\t\t\"background: #4CABD5; color: white\",\n\t\t\t\t\t\"background: #1F3C6E; color: white\",\n\t\t\t\t\t\"background: #4CABD5; color: white\"\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\t\treturn {\n\t\t\tisCameraVisible,\n\t\t\tvideoElement,\n\t\t\tsize,\n\t\t\tisNotSupported,\n\t\t\ttakePhoto,\n\t\t\tisRecording,\n\t\t\trecordVideo,\n\t\t\tphotoPreviewElement,\n\t\t\tvideoPreviewElement,\n\t\t\tisPhotoTook,\n\t\t\tisVideoRecorded,\n\t\t\tisTypeVideo,\n\t\t\tisTypePhoto,\n\t\t};\n\t},\n};\n</script>\n\n<style scoped>\n.xone-camera {\n\tdisplay: flex;\n\tposition: absolute;\n\ttop: 0;\n\theight: 100vh;\n\twidth: 100vw;\n\tbackground-color: rgba(0, 0, 0, 0.5);\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.xone-camera-container {\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\tborder-radius: 5px;\n\toverflow: hidden;\n\tbackground-color: white;\n\tborder: 1px solid black;\n\tanimation: zoomIn 0.3s;\n}\n\n.xone-video,\n.xone-photo {\n\talign-items: center;\n\tmargin: 20px;\n\tbackground-color: transparent;\n\tborder: none;\n\twidth: 60px;\n\theight: 60px;\n\tanimation: fadeIn 0.3s;\n}\n\n.xone-photo > div,\n.xone-video > div {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tborder: none;\n\toverflow: visible;\n\tborder-radius: 100%;\n\tbackground-color: transparent;\n}\n\n.xone-photo > div > div {\n\twidth: 58px;\n\theight: 58px;\n\tborder-radius: 100%;\n\tbackground: white;\n\tborder: 1px solid gray;\n\tbox-shadow: 0 1px 5px rgba(0, 0, 0, 0.2), 0 2px 2px rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12);\n}\n\n.xone-video > div > div {\n\theight: 58px;\n\twidth: 58px;\n\tbackground: red;\n\tborder: 1px solid gray;\n\ttransition: all 0.3s;\n\tbox-shadow: 0 1px 5px rgba(0, 0, 0, 0.2), 0 2px 2px rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.12);\n}\n\n.xone-cancel {\n\tposition: sticky;\n\tright: 5px;\n\ttop: 5px;\n\talign-self: flex-end;\n\tmargin: 10px 10px 10px 0;\n\tpadding: 5px 10px;\n\tborder: none;\n\tcolor: #3273dc;\n\tborder: 1px #3273dc solid;\n\tborder-radius: 5px;\n\tbackground-color: transparent;\n\tfont-size: 16px;\n}\n\nbutton {\n\toutline: none;\n}\n\nvideo {\n\tanimation: fadeIn 0.3s;\n}\n</style>\n","import { render } from \"./Camera.vue?vue&type=template&id=71a77362&scoped=true\"\nimport script from \"./Camera.vue?vue&type=script&lang=js\"\nexport * from \"./Camera.vue?vue&type=script&lang=js\"\n\nimport \"./Camera.vue?vue&type=style&index=0&id=71a77362&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-71a77362\"]])\n\nexport default __exports__","<template>\n\t<teleport v-if=\"url\" to=\"body\">\n\t\t<div class=\"xone-url\" @click=\"url = null\">\n\t\t\t<div>\n\t\t\t\t<button></button>\n\t\t\t\t<iframe :src=\"url\" loading=\"lazy\"></iframe>\n\t\t\t</div>\n\t\t</div>\n\t</teleport>\n</template>\n\n<script>\nimport { ref } from \"vue\";\nimport { setOpenUrlCallback } from \"../../composables/XoneUI\";\nimport Button from \"../propComponents/Button.vue\";\nexport default {\n\tcomponents: { Button },\n\tsetup() {\n\t\tconst url = ref();\n\n\t\tsetOpenUrlCallback((Url) => (url.value = Url));\n\n\t\treturn { url };\n\t},\n};\n</script>\n\n<style scoped>\n.xone-url {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100vw;\n\theight: 100vh;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tbackground-color: rgba(0, 0, 0, 0.3);\n\tanimation: fadeIn 0.3s zoomIn 0.3s;\n\tz-index: 99;\n}\n\n.xone-url > div {\n\twidth: calc(100vw - 100px);\n\theight: calc(100vh - 100px);\n\tbackground-color: white;\n\tposition: relative;\n}\n\niframe {\n\twidth: 100%;\n\theight: 100%;\n\tborder: none;\n}\n\nbutton {\n\twidth: 30px;\n\theight: 30px;\n\tbackground: white;\n\tposition: absolute;\n\tright: 0;\n\ttop: -31px;\n\toutline: none;\n\tborder: none;\n\tborder-radius: 2px;\n\tcursor: pointer;\n}\n</style>\n","<template>\n\t<button\n\t\tref=\"btnElement\"\n\t\t:disabled=\"isExecutingOnClick || (objectInfo.isContents && !objectInfo.editInRow) || isDisableEdit\"\n\t\t:style=\"{\n\t\t\t// Background\n\t\t\tbackgroundColor: attributes.image ? 'transparent' : attributes.bgColor,\n\t\t\tbackgroundImage: attributes.image && `url(${imgPath})`,\n\t\t\t// Border radius\n\t\t\tborderRadius: attributes.borderCornerRadius,\n\t\t\t// Font\n\t\t\tcolor: isExecutingOnClick ? 'lightgray' : attributes.foreColor,\n\t\t\tfontSize: attributes.fontSize && attributes.fontSize,\n\t\t\t// Align\n\t\t\tjustifyContent: (attributes.align.row && attributes.align.row) || 'center',\n\t\t\talignItems: (attributes.align.column && attributes.align.column) || 'center',\n\t\t\t// Padding\n\t\t\tpadding: (!attributes.labelWidth || attributes.labelWidth.toString() === '0' || attributes.title) && !hasPadding && 0,\n\t\t\t// is Executing or disableEdit? -> set opacity\n\t\t\topacity: isExecutingOnClick || isDisableEdit ? 0.4 : 1,\n\t\t\tcursor: isExecutingOnClick || (objectInfo.isContents && !objectInfo.editInRow) || isDisableEdit ? 'default' : 'pointer',\n\t\t}\"\n\t\t:class=\"{\n\t\t\t'no-border': attributes.image || !attributes.bgColor || attributes.bgColor === '#00000000' || attributes.bgColor === 'transparent',\n\t\t\tnoEditInRow: objectInfo.isContents && !objectInfo.editInRow,\n\t\t\t'keep-aspect-ratio': attributes.keepAspectRatio,\n\t\t}\"\n\t\t@click=\"!noEditInRow && onClick()\"\n\t\t@touchstart=\"onTouchStart\"\n\t\t@touchend=\"onTouchEnd\"\n\t\t@mousedown=\"onTouchStart\"\n\t\t@mouseend=\"onTouchEnd\"\n\t\t@mouseleave=\"onTouchEnd\"\n\t\t@touchleave=\"onTouchEnd\"\n\t\t@focus=\"onFocus\"\n\t>\n\t\t{{ attributes.labelWidth !== \"0\" ? attributes.title : \"\" }}\n\t</button>\n</template>\n\n<script>\nimport { inject, ref, Ref, PropType, watch, watchEffect, ComputedRef, onMounted, computed, nextTick } from \"vue\";\n\nimport { xoneAttributesHandler, PropAttributes } from \"../../composables/XoneAttributesHandler\";\nimport { XoneDataObject } from \"../../composables/appData/core/XoneDataObject\";\nimport { getAppPath, getImagePath } from \"../../composables/helperFunctions/ImageHelper\";\nimport dragAndDrop from \"../../composables/DragAndDrop\";\nimport { XoneControl } from \"../../composables/XoneViewsHandler\";\n\nexport default {\n\tprops: {\n\t\t/**\n\t\t * xoneDataObject\n\t\t * @type {PropType<XoneDataObject>}\n\t\t */\n\t\txoneDataObject: { type: Object, required: true },\n\t\t/**\n\t\t * attributes\n\t\t * @type { PropType<PropAttributes>}\n\t\t */\n\t\tattributes: { type: Object, default: null, required: true },\n\t\tpaddings: { type: Object, required: true },\n\t\tisDisableEdit: { type: Boolean, required: true },\n\t\tcontainerWidth: { type: Number, default: 0 },\n\t\tcontainerHeight: { type: Number, default: 0 },\n\t},\n\tsetup(props) {\n\t\t// const isDesigner = dragAndDrop.getIsDesigner();\n\t\t// on click method is being executed\n\t\tconst isExecutingOnClick = ref(false);\n\n\t\t/**\n\t\t * on click button\n\t\t */\n\t\tconst onClick = async () => {\n\t\t\tif (isExecutingOnClick.value) return;\n\t\t\tisExecutingOnClick.value = true;\n\t\t\tawait xoneAttributesHandler.onClick(props.attributes, props.xoneDataObject, objectInfo);\n\t\t\tisExecutingOnClick.value = false;\n\t\t};\n\n\t\t/**\n\t\t * Contents Info\n\t\t * @type {import('../../composables/AppDataHandler').Objectinfo}\n\t\t */\n\t\tconst objectInfo = inject(\"objectInfo\");\n\n\t\t//\n\t\t// Offset height / width when scaled\n\n\t\t/**\n\t\t * button element\n\t\t * @type {Ref<HTMLElement>}\n\t\t */\n\t\tconst btnElement = ref();\n\n\t\tconst fitSizeToContainer = (isResized = false) => {\n\t\t\tconst doFit = () => {\n\t\t\t\txoneAttributesHandler.fitHeightToContainer(props.attributes, btnElement, isResized);\n\t\t\t\txoneAttributesHandler.fitWidthToContainer(props.attributes, btnElement, isResized);\n\t\t\t};\n\t\t\tsetTimeout(() => doFit(), 100);\n\t\t\tdoFit();\n\t\t};\n\n\t\tnextTick(() => fitSizeToContainer());\n\n\t\t/**\n\t\t * xoneView\n\t\t * @type {XoneView}\n\t\t */\n\t\tconst xoneView = inject(\"xoneView\");\n\n\t\tconst xoneControl = new XoneControl(props.attributes.name, btnElement.value);\n\n\t\tonMounted(() => {\n\t\t\t// Add control to view\n\t\t\txoneView.addControl(xoneControl);\n\t\t});\n\n\t\t/**\n\t\t * Last breadcrumb in stack\n\t\t * @type {ComputedRef<import('../../composables/AppDataHandler').Breadcrumb>}\n\t\t */\n\t\tconst lastBreadcrumb = inject(\"lastBreadcrumb\");\n\n\t\t// Provide breadcrumbId info to child components\n\t\tconst breadcrumbId = inject(\"breadcrumbId\");\n\n\t\twatchEffect(() => {\n\t\t\tif (breadcrumbId === lastBreadcrumb?.value?.id) fitSizeToContainer();\n\t\t});\n\n\t\twatch(\n\t\t\t() => props.containerWidth,\n\t\t\t() => fitSizeToContainer(true)\n\t\t);\n\t\twatch(\n\t\t\t() => props.containerHeight,\n\t\t\t() => fitSizeToContainer(true)\n\t\t);\n\n\t\t// if selected group is current group fit size to container\n\t\t/**\n\t\t * groupId\n\t\t * @type {number}\n\t\t */\n\t\tconst groupId = inject(\"groupId\");\n\n\t\t/**\n\t\t * activeGroup\n\t\t * @type {Ref<number>}\n\t\t */\n\t\tconst { activeGroup } = inject(\"groupHandler\");\n\n\t\twatch(\n\t\t\t() => activeGroup.value,\n\t\t\t(newValue) => {\n\t\t\t\tif (groupId !== newValue) return;\n\t\t\t\tfitSizeToContainer();\n\t\t\t}\n\t\t);\n\n\t\tconst imgPath = ref(\n\t\t\tprops.attributes.image?.includes(\"icons\") || props.attributes.image?.includes(\"files\")\n\t\t\t\t? props.attributes.image\n\t\t\t\t: `${getAppPath()}/icons/${props.attributes.image}`\n\t\t);\n\n\t\tonMounted(() => {\n\t\t\twatch(\n\t\t\t\t() => props.attributes.image,\n\t\t\t\tasync () => await resolveImage()\n\t\t\t);\n\t\t\tresolveImage();\n\t\t});\n\n\t\tconst resolveImage = async () => (imgPath.value = await getImagePath(props.attributes.image));\n\n\t\t/**\n\t\t * hasPadding\n\t\t * @type {ComputedRef<boolean>}\n\t\t */\n\t\tconst hasPadding = computed(\n\t\t\t() => props.attributes.paddings.top || props.attributes.paddings.right || props.attributes.paddings.bottom || props.attributes.paddings.left\n\t\t);\n\n\t\t// Change opacity on mouse click / touch\n\t\tlet lastOpacity;\n\t\tconst onTouchStart = () => {\n\t\t\tlastOpacity = btnElement.value.style.opacity;\n\t\t\tbtnElement.value.style.opacity = 0.7;\n\t\t};\n\t\tconst onTouchEnd = () => {\n\t\t\tbtnElement.value.style.opacity = lastOpacity;\n\t\t\tlastOpacity = null;\n\t\t};\n\t\tconst onFocus = () => {\n\t\t\tbtnElement.value.animate(\n\t\t\t\t[\n\t\t\t\t\t// keyframes\n\t\t\t\t\t{ opacity: 0.7 },\n\t\t\t\t\t{ opacity: 300 },\n\t\t\t\t],\n\t\t\t\t{\n\t\t\t\t\t// timing options\n\t\t\t\t\tduration: 1000,\n\t\t\t\t}\n\t\t\t);\n\t\t};\n\n\t\treturn {\n\t\t\tbtnElement,\n\t\t\tonClick,\n\t\t\tobjectInfo,\n\t\t\tisExecutingOnClick,\n\t\t\timgPath,\n\t\t\thasPadding,\n\t\t\tonTouchStart,\n\t\t\tonTouchEnd,\n\t\t\tonFocus,\n\t\t};\n\t},\n};\n</script>\n\n<style scoped>\n/* button */\nbutton {\n\tbox-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\t-webkit-box-sizing: border-box;\n\tdisplay: flex;\n\tposition: relative;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-repeat: no-repeat;\n\tbackground-position: center;\n\tbackground-size: contain;\n\toverflow: hidden;\n\tcursor: pointer;\n\toutline: none;\n\talign-self: center;\n\tborder: var(--border-width) solid var(--border-color);\n\n\tpadding-top: var(--padding-top);\n\tpadding-right: var(--padding-right);\n\tpadding-bottom: var(--padding-bottom);\n\tpadding-left: var(--padding-left);\n\n\tbox-shadow: 0px 0px var(--elevation) 0 rgba(0, 0, 0, 0.2);\n\n\tanimation: fadeIn 0.3s;\n}\n\n.keep-aspect-ratio {\n\tbackground-size: contain;\n}\n\n.no-border {\n\tborder: 1px solid transparent;\n}\n\n.noEditInRow {\n\tcursor: pointer;\n\tpointer-events: none;\n}\n</style>\n","import { ref, Ref } from \"@vue/reactivity\";\n\nclass DragAndDrop {\n  /**\n   * @type {DragAndDrop}\n   */\n  static _instance;\n\n  /**\n   * @type {Ref<boolean>}\n   */\n  _isDesigner = ref(false);\n\n  /**\n   * @type {Ref<boolean>}\n   */\n  _isDragging = ref(false);\n\n  /**\n   * @type {Ref<HTMLDivElement>}\n   */\n  _selectedControl = ref();\n\n  /**\n   * @type {Ref<HTMLDivElement>}\n   */\n  _dragControl = ref();\n\n  /**\n   * @type {Ref<HTMLDivElement>}\n   */\n  _overControl = ref();\n\n  /**\n   * @type {Ref<Array<HTMLDivElement>>}\n   */\n  _overControls = ref([]);\n\n  /**\n   * @type {number}\n   */\n  _designPadding = 10;\n\n  constructor() {\n    if (DragAndDrop._instance) return DragAndDrop._instance;\n    DragAndDrop._instance = this;\n  }\n\n  /**\n   * @param {MouseEvent} e\n   */\n  mouseMove(e) {\n    if (!this._isDesigner && !this._isDragging) return (this._dragControl.value = null);\n\n    /**\n     * @type {HTMLElement}\n     */\n    let element = e.target;\n    while (element && !element.getAttribute(\"xone-name\")) element = element.parentElement;\n    this._dragControl.value = element;\n  }\n\n  /**\n   * @type {boolean}\n   */\n  setIsDesigner(value) {\n    this._isDesigner.value = value;\n  }\n\n  /**\n   * @type {boolean}\n   */\n  setIsDragging(value) {\n    this._isDragging.value = value;\n    this._dragControl.value = null;\n  }\n\n  /**\n   * @returns {Ref<boolean>}\n   */\n  getIsDesigner() {\n    return this._isDesigner;\n  }\n\n  /**\n   * @returns {Ref<boolean>}\n   */\n  getIsDragging() {\n    return this._isDragging;\n  }\n\n  /**\n   * @returns {number}\n   */\n  getDesignPadding() {\n    return this._designPadding;\n  }\n\n  /**\n   * @type {HTMLDivElement}\n   */\n  setSelectedControl(value) {\n    this._selectedControl.value = value;\n  }\n\n  /**\n   * @type {HTMLDivElement}\n   */\n  setOverControl(value) {\n    if (value) return (this._overControl.value = value);\n    this._overControl.value = this._overControls.value.length !== 0 ? this._overControls.value[this._overControls.value.length - 1] : null;\n  }\n\n  /**\n   * @type {HTMLDivElement}\n   */\n  addOverControl(value) {\n    if (this._overControls.value.indexOf(value) !== -1) return;\n    this.pushOverControl(value);\n  }\n\n  /**\n   * @type {HTMLDivElement}\n   */\n  pushOverControl(value) {\n    this._overControls.value.push(value);\n    this.setOverControl();\n  }\n\n  /**\n   * @type {HTMLDivElement}\n   */\n  removeOverControl(value) {\n    this._overControls.value = this._overControls.value.filter((e) => e !== value);\n    this.setOverControl();\n  }\n\n  /**\n   * @returns {Ref<HTMLDivElement>}\n   */\n  getSelectedControl() {\n    return this._selectedControl;\n  }\n\n  /**\n   * @returns {Ref<HTMLDivElement>}\n   */\n  getDragControl() {\n    return this._dragControl;\n  }\n\n  /**\n   * @returns {Ref<HTMLDivElement>}\n   */\n  getOverControl() {\n    return this._overControl;\n  }\n\n  /**\n   * @returns {Array<HTMLDivElement>}\n   */\n  getOverControls() {\n    return this._overControls.value;\n  }\n\n  /**\n   * @returns {string}\n   */\n  getBorderPropOver() {\n    return \"3px dashed #1F3C6E\";\n  }\n\n  /**\n   * @returns {string}\n   */\n  getBorderContainerOver() {\n    return \"3px solid #4CABD5\";\n  }\n\n  /**\n   * @returns {string}\n   */\n  getBorderSelected() {\n    return \"3px dashed #1F3C6E\";\n  }\n\n  /**\n   * @returns {string}\n   */\n  getBorderOver() {\n    return \"3px dashed #4CABD5\";\n  }\n\n  /**\n   * @param {HTMLElement} element\n   */\n  mouseEnter(element) {\n    this.addOverControl(element);\n  }\n\n  /**\n   * @param {HTMLElement} element\n   */\n  mouseLeave(element) {\n    this.removeOverControl(element);\n  }\n\n  /**\n   * @param{MouseEvent} e\n   */\n  mouseDown(e) {\n    if (!this._isDesigner) return;\n    e.preventDefault();\n    e.stopPropagation();\n    this.setSelectedControl(this._overControls ? this._overControls.value[this._overControls.value.length - 1] : null);\n  }\n}\n\nexport default new DragAndDrop();\n","import { render } from \"./Button.vue?vue&type=template&id=931f494c&scoped=true\"\nimport script from \"./Button.vue?vue&type=script&lang=js\"\nexport * from \"./Button.vue?vue&type=script&lang=js\"\n\nimport \"./Button.vue?vue&type=style&index=0&id=931f494c&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-931f494c\"]])\n\nexport default __exports__","import { render } from \"./Url.vue?vue&type=template&id=054892a6&scoped=true\"\nimport script from \"./Url.vue?vue&type=script&lang=js\"\nexport * from \"./Url.vue?vue&type=script&lang=js\"\n\nimport \"./Url.vue?vue&type=style&index=0&id=054892a6&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-054892a6\"]])\n\nexport default __exports__","<template>\n  <teleport v-if=\"!isOnline\" to=\"body\">\n    <!-- Toast Container -->\n    <div class=\"xone-online\">\n      <!-- Toast Items -->\n      <div>Offline</div>\n    </div>\n  </teleport>\n</template>\n\n<script>\nimport { onMounted, onUnmounted, ref } from \"vue\";\n\nexport default {\n  setup() {\n    onMounted(() => {\n      window.addEventListener(\"online\", setOnline);\n      window.addEventListener(\"offline\", setOffline);\n    });\n\n    onUnmounted(() => {\n      window.removeEventListener(\"online\", setOnline);\n      window.removeEventListener(\"offline\", setOffline);\n    });\n\n    const setOnline = () => (isOnline.value = true);\n    const setOffline = () => (isOnline.value = false);\n\n    const isOnline = ref(navigator.onLine);\n\n    return { isOnline };\n  },\n};\n</script>\n\n<style scoped>\n.xone-online {\n  position: absolute;\n  top: 0;\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n  width: 100%;\n  height: 100vh;\n  pointer-events: none;\n  z-index: 999;\n  opacity: 0.5;\n}\n\n.xone-online > div {\n  margin-top: 10px;\n  padding: 10px 30px;\n  border: 3px white solid;\n  background-color: red;\n  font-size: 1.2rem;\n  color: white;\n  border-radius: 5px;\n  text-align: center;\n}\n</style>\n","import { render } from \"./Offline.vue?vue&type=template&id=375b8507&scoped=true\"\nimport script from \"./Offline.vue?vue&type=script&lang=js\"\nexport * from \"./Offline.vue?vue&type=script&lang=js\"\n\nimport \"./Offline.vue?vue&type=style&index=0&id=375b8507&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-375b8507\"]])\n\nexport default __exports__","<template>\n  <div\n    v-if=\"isDesigner\"\n    class=\"xone-designer-selected-container\"\n    :style=\"{\n      opacity: opacity,\n      '--image-parent': `url(${appPath}/assets/parent.png)`,\n      '--image-move': `url(${appPath}/assets/move.png)`,\n    }\"\n  >\n    <div\n      v-if=\"isDesigner && location\"\n      style=\"position: absolute; outline: 3px solid white; transition: all 0.3s\"\n      :style=\"{\n        top: location.top + 'px',\n        left: location.left + 'px',\n        width: location.width + 'px',\n        height: location.height + 'px',\n      }\"\n    ></div>\n    <div\n      class=\"xone-designer-selected\"\n      v-if=\"isDesigner && location\"\n      :style=\"{\n        top: location.top + 'px',\n        left: location.left + 'px',\n        width: location.width + 'px',\n        height: location.height + 'px',\n        '--border': border,\n      }\"\n    >\n      <div\n        v-if=\"!isGroup\"\n        class=\"xone-designer-selected-resizer\"\n        @mouseleave=\"onMouseLeave()\"\n      >\n        <div></div>\n      </div>\n      <div\n        class=\"xone-designer-selected-options\"\n        :style=\"{\n          top: location.top > 25 ? '-25px' : '0px',\n          //top: '0px',\n        }\"\n      >\n        <div class=\"xone-designer-selected-options-name\">{{ controlName }}</div>\n        <div\n          v-if=\"!isGroup\"\n          class=\"xone-designer-selected-option-parent\"\n          @click=\"onParentButtonClick\"\n        ></div>\n        <div\n          v-if=\"!isGroup\"\n          style=\"z-index: 9999999\"\n          @mousedown=\"onDragStart\"\n          @mouseup=\"onDragEnd\"\n          @touchstart=\"onDragStart\"\n          @touchend=\"onDragEnd\"\n          class=\"xone-designer-selected-option-move\"\n        ></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, watch } from \"vue\";\nimport dragAndDrop from \"../../composables/DragAndDrop\";\nimport { getAppPath } from \"../../composables/helperFunctions/ImageHelper\";\n\nexport default {\n  setup() {\n    const selectedControl = dragAndDrop.getSelectedControl();\n    const controlName = ref(\"\");\n    const isGroup = ref(false);\n\n    const opacity = ref(1);\n\n    const location = ref();\n\n    watch(\n      () => selectedControl.value,\n      (element) => {\n        try {\n          if (!element) return (location.value = null);\n          controlName.value = element.getAttribute(\"xone-name\");\n          isGroup.value = element.getAttribute(\"group\") === \"true\";\n          location.value = {\n            top: element.getBoundingClientRect().top,\n            left: element.getBoundingClientRect().left,\n            width: element.getBoundingClientRect().width,\n            height: element.getBoundingClientRect().height,\n          };\n        } catch {\n          location.value = null;\n        }\n      }\n    );\n\n    const onParentButtonClick = () => {\n      const element = selectedControl.value;\n      /**\n       * @type {HTMLDivElement}\n       */\n      const parentElement = element?.parentNode?.parentNode;\n      if (!parentElement || !parentElement.classList.contains(\"xone-frame\"))\n        return;\n      dragAndDrop.setSelectedControl(parentElement);\n    };\n\n    const onDragStart = (/** @type{MouseEvent} **/ e) => {\n      opacity.value = 0.3;\n      dragAndDrop.setIsDragging(true);\n      document.body.style.cursor = \"move\";\n      document.body.addEventListener(\"mouseup\", onDragEnd);\n      document.body.addEventListener(\"touchend\", onDragEnd);\n      // e.dataTransfer.dropEffect = \"move\";\n      // e.dataTransfer.setDragImage(selectedControl?.value, 0, 0);\n    };\n\n    const onDragEnd = (/** @type{MouseEvent} **/ e) => {\n      opacity.value = 1;\n      // e.dataTransfer.clearData();\n      dragAndDrop.setIsDragging(false);\n      document.body.style.cursor = \"default\";\n      document.body.removeEventListener(\"mouseup\", onDragEnd);\n      document.body.removeEventListener(\"touchend\", onDragEnd);\n    };\n\n    return {\n      controlName,\n      location,\n      isDesigner: dragAndDrop.getIsDesigner(),\n      border: dragAndDrop.getBorderSelected(),\n      onMouseLeave: () => {\n        // dragAndDrop.setSelectedControl(null);\n        // dragAndDrop.setSelectedControlName(null);\n      },\n      onParentButtonClick,\n      onDragStart,\n      onDragEnd,\n      isGroup,\n      opacity,\n      appPath: getAppPath(),\n    };\n  },\n};\n</script>\n\n<style scoped>\n.xone-designer-selected-container {\n  top: 0;\n  left: 0;\n  position: absolute;\n  height: 100vh;\n  width: 100vw;\n  pointer-events: none;\n}\n\n.xone-designer-selected {\n  transition: all 0.3s;\n  box-sizing: border-box;\n  position: absolute;\n  width: 100px;\n  height: 20px;\n  background-color: transparent;\n  outline: var(--border);\n  max-height: 100vh;\n  z-index: 99999;\n}\n\n.xone-designer-selected-resizer {\n  display: flex;\n  position: absolute;\n  right: -12.5px;\n  bottom: -12.5px;\n  justify-content: center;\n  align-items: center;\n  width: 25px;\n  height: 25px;\n  pointer-events: all;\n  cursor: nw-resize;\n}\n.xone-designer-selected-resizer > div {\n  background: black;\n  border-radius: 100%;\n  width: 10px;\n  height: 10px;\n  border: 1px solid white;\n}\n\n.xone-designer-selected-options {\n  position: absolute;\n  display: flex;\n  right: 1px;\n  pointer-events: all;\n}\n\n.xone-designer-selected-options div {\n  height: 20px;\n  width: 20px;\n  border: none;\n  color: white;\n  margin-left: 2px;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 16px 16px;\n  background-color: whitesmoke;\n  border-radius: 5px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.xone-designer-selected-options div:hover {\n  outline: 1px solid #4cabd5;\n}\n\n.xone-designer-selected-options-name {\n  width: auto !important;\n  color: #1f3c6e !important;\n  padding: 0 5px !important;\n  background-color: white !important;\n}\n.xone-designer-selected-options-name:hover {\n  outline: none !important;\n}\n\n.xone-designer-selected-option-parent {\n  background-image: var(--image-parent);\n  cursor: pointer;\n}\n\n.xone-designer-selected-option-move {\n  background-image: var(--image-move);\n  cursor: move;\n}\n</style>","import { render } from \"./SelectedControl.vue?vue&type=template&id=19398d98&scoped=true\"\nimport script from \"./SelectedControl.vue?vue&type=script&lang=js\"\nexport * from \"./SelectedControl.vue?vue&type=script&lang=js\"\n\nimport \"./SelectedControl.vue?vue&type=style&index=0&id=19398d98&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-19398d98\"]])\n\nexport default __exports__","<template>\n  <div v-if=\"isDesigner\" class=\"xone-designer-over-container\">\n    <div\n      class=\"xone-designer-over\"\n      @click=\"onMouseClick()\"\n      @mouseleave=\"onMouseLeave()\"\n      v-if=\"isDesigner && location\"\n      :style=\"{\n        top: location.top,\n        left: location.left,\n        width: location.width,\n        height: location.height,\n        '--border': border,\n      }\"\n    ></div>\n  </div>\n</template>\n\n<script>\nimport { ref, watch } from \"vue\";\nimport dragAndDrop from \"../../composables/DragAndDrop\";\n\nexport default {\n  setup() {\n    const overControl = dragAndDrop.getOverControl();\n    const selectedControl = dragAndDrop.getSelectedControl();\n    const location = ref();\n\n    watch(\n      () => overControl.value,\n      (element) => {\n        try {\n          if (element !== overControl.value) return;\n\n          if (!element || element === selectedControl.vue)\n            return (location.value = null);\n          location.value = {\n            top: element.getBoundingClientRect().top + \"px\",\n            left: element.getBoundingClientRect().left + \"px\",\n            width: element.getBoundingClientRect().width + \"px\",\n            height: element.getBoundingClientRect().height + \"px\",\n          };\n        } catch {\n          location.value = null;\n        }\n      }\n    );\n    return {\n      location,\n      isDesigner: dragAndDrop.getIsDesigner(),\n      border: dragAndDrop.getBorderOver(),\n      onMouseClick: () => {\n        dragAndDrop.setSelectedControl(overControl.value);\n      },\n      onMouseLeave: () => {\n        dragAndDrop.setOverControl(null);\n      },\n    };\n  },\n};\n</script>\n\n<style scoped>\n.xone-designer-over-container {\n  top: 0;\n  left: 0;\n  position: absolute;\n  height: 100vh;\n  width: 100vw;\n  pointer-events: none;\n}\n.xone-designer-over {\n  box-sizing: border-box;\n  position: absolute;\n  width: 100px;\n  height: 30px;\n  background-color: transparent;\n  outline: var(--border);\n  z-index: 9999;\n  max-height: 100vh;\n  pointer-events: none;\n}\n\nbutton {\n  pointer-events: none;\n  cursor: pointer;\n}\n</style>","import { render } from \"./OverControl.vue?vue&type=template&id=725183bb&scoped=true\"\nimport script from \"./OverControl.vue?vue&type=script&lang=js\"\nexport * from \"./OverControl.vue?vue&type=script&lang=js\"\n\nimport \"./OverControl.vue?vue&type=style&index=0&id=725183bb&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-725183bb\"]])\n\nexport default __exports__","<template>\n  <div\n    v-if=\"isDesigner\"\n    class=\"xone-designer-drag-container\"\n    :style=\"{\n      '--image-back': `url(${appPath}/assets/arrow-up.png)`,\n      '--image-right': `url(${appPath}/assets/arrow-right.png)`,\n      '--image-down': `url(${appPath}/assets/arrow-down.png)`,\n      '--image-left': `url(${appPath}/assets/arrow-left.png)`,\n    }\"\n  >\n    <!-- Containers name's -->\n    <div class=\"xone-designer-drag\" v-if=\"isDesigner && isDragging\">\n      <!-- Selected container -->\n      <template v-if=\"containerSelected\">\n        <div\n          :style=\"{\n            position: 'absolute',\n            zIndex: 9999999,\n            left: containersInfo.find((e) => e.name === containerSelected).left + 'px',\n            top: containersInfo.find((e) => e.name === containerSelected).top + 'px',\n            width: containersInfo.find((e) => e.name === containerSelected).width + 'px',\n            height: containersInfo.find((e) => e.name === containerSelected).height + 'px',\n            outline: '3px solid blue',\n          }\"\n        ></div>\n      </template>\n      <!-- Control over -->\n      <div\n        v-if=\"location\"\n        :style=\"{\n          background: 'rgba(211,211,211, .3)',\n          position: 'absolute',\n          outline: border,\n          outlineOffset: '-5px',\n          top: location.top + 'px',\n          left: location.left + 'px',\n          width: location.width + 'px',\n          height: location.height + 'px',\n        }\"\n      ></div>\n\n      <!-- Move up -->\n      <div\n        v-if=\"location\"\n        class=\"xone-designer-drag-move move-up\"\n        @mouseenter=\"moveCursorTo('up')\"\n        @mouseleave=\"moveCursorTo('')\"\n        :style=\"{\n          top: location.top + 'px',\n          left: location.left + selectorSize.x + 'px',\n          width: location.width - selectorSize.x * 2 + 'px',\n          height: selectorSize.y + 'px',\n        }\"\n      ></div>\n      <!-- Move bottom -->\n      <div\n        v-if=\"location\"\n        class=\"xone-designer-drag-move move-down\"\n        @mouseenter=\"moveCursorTo('bottom')\"\n        @mouseleave=\"moveCursorTo('')\"\n        :style=\"{\n          position: 'absolute',\n          top: location.top + location.height - selectorSize.y + 'px',\n          left: location.left + selectorSize.x + 'px',\n          width: location.width - selectorSize.x * 2 + 'px',\n          height: selectorSize.y + 'px',\n        }\"\n      ></div>\n      <!-- Move left -->\n      <div\n        v-if=\"location\"\n        class=\"xone-designer-drag-move move-left\"\n        @mouseenter=\"moveCursorTo('left')\"\n        @mouseleave=\"moveCursorTo('')\"\n        :style=\"{\n          top: location.top + 'px',\n          left: location.left + 'px',\n          width: selectorSize.x + 'px',\n          height: location.height + 'px',\n        }\"\n      ></div>\n      <!-- Move right -->\n      <div\n        v-if=\"location\"\n        class=\"xone-designer-drag-move move-right\"\n        @mouseenter=\"moveCursorTo('right')\"\n        @mouseleave=\"moveCursorTo('')\"\n        :style=\"{\n          position: 'absolute',\n          top: location.top + 'px',\n          left: location.left + location.width - selectorSize.x + 'px',\n          width: selectorSize.x + 'px',\n          height: location.height + 'px',\n        }\"\n      ></div>\n      <!-- Cursor -->\n      <div\n        v-if=\"cursorCoordinates\"\n        :style=\"{\n          zIndex: 9999999,\n          outline: '1px black solid',\n          position: 'absolute',\n          width: cursorCoordinates.width + 'px',\n          height: cursorCoordinates.height + 'px',\n          background: 'red',\n          transition: 'all .3s',\n          top: cursorCoordinates.top + 'px',\n          left: cursorCoordinates.left + 'px',\n          opacity: cursorCoordinates.opacity,\n        }\"\n      ></div>\n      <template v-for=\"containerInfo in containersInfo\" :key=\"containerInfo.name\">\n        <div\n          class=\"xone-designer-drag-containers\"\n          :style=\"{\n            left: containerInfo.positionX + 'px',\n            top: containerInfo.positionY + 'px',\n            width: containerInfo.name.length * 10 + 'px',\n            background: containerInfo.name === containerSelected ? 'blue' : 'white',\n            color: containerInfo.name === containerSelected ? 'white' : 'black',\n          }\"\n          @mouseenter=\"onMouseEnter(containerInfo.name)\"\n          @mouseleave=\"onMouseLeave()\"\n        >\n          {{ containerInfo.name }}\n        </div>\n      </template>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, ref, Ref, watch } from \"vue\";\nimport dragAndDrop from \"../../composables/DragAndDrop\";\nimport { getAppPath } from \"../../composables/helperFunctions/ImageHelper\";\n\nexport default {\n  setup() {\n    const isDesigner = dragAndDrop.getIsDesigner();\n\n    const isDragging = dragAndDrop.getIsDragging();\n\n    const selectedControl = dragAndDrop.getSelectedControl();\n\n    const dragControl = dragAndDrop.getDragControl();\n\n    /** @type {Ref<string>} */\n    const containerSelected = ref();\n\n    /** @type {Ref<Object>} */\n    const location = ref();\n\n    /** @type {Ref<Object>} */\n    const cursorCoordinates = ref();\n\n    /** @type {Ref<Array<Object>>} */\n    const containersInfo = ref([]);\n\n    watch(\n      () => dragControl.value,\n      (newValue) => {\n        if (!isDesigner.value || !isDragging.value) return;\n        containersInfo.value = [];\n        containerSelected.value = \"\";\n        location.value = null;\n        cursorCoordinates.value = {\n          ...cursorCoordinates.value,\n          width: 0,\n          height: 0,\n          opacity: 0,\n        };\n        try {\n          /** @type {HTMLDivElement} */\n          let element = newValue;\n          location.value = {\n            top: element.getBoundingClientRect().top - 5,\n            left: element.getBoundingClientRect().left - 5,\n            width: element.getBoundingClientRect().width + 10,\n            height: element.getBoundingClientRect().height + 10,\n            isContainer: element.classList.contains(\"xone-frame\"),\n          };\n          while (element) {\n            if (element.classList.contains(\"xone-frame\")) {\n              const containerInfo = {\n                control: element,\n                name: element.getAttribute(\"xone-name\"),\n                top: element.getBoundingClientRect().y,\n                left: element.getBoundingClientRect().x,\n                width: element.getBoundingClientRect().width,\n                height: element.getBoundingClientRect().height,\n                positionY: element.getBoundingClientRect().y,\n                positionX: element.getBoundingClientRect().x,\n              };\n              containersInfo.value.push(containerInfo);\n            }\n\n            if (element === selectedControl.value) {\n              containersInfo.value = [];\n              location.value = null;\n            }\n            element = element.parentElement;\n          }\n          // Put container box in final position\n          containersInfo.value = containersInfo.value.map((e) => {\n            const containerAux = containersInfo.value.find(\n              (aux) =>\n                aux.name !== e.name &&\n                aux.positionX >= e.positionX &&\n                aux.positionX + aux.name.length * 10 <= e.positionX + e.name.length * 10 &&\n                aux.positionY >= e.positionY &&\n                aux.positionY + 21 <= e.positionX + 21\n            );\n            if (containerAux) {\n              e.positionY += 21;\n            }\n            return e;\n          });\n        } catch {}\n      }\n    );\n    return {\n      isDesigner: dragAndDrop.getIsDesigner(),\n      isDragging: dragAndDrop.getIsDragging(),\n      location,\n      containersInfo,\n      containerSelected,\n      onMouseEnter: (name) => {\n        cursorCoordinates.value = {\n          ...cursorCoordinates.value,\n          width: 0,\n          height: 0,\n          opacity: 0,\n        };\n        containerSelected.value = name;\n      },\n      onMouseLeave: () => (containerSelected.value = null),\n      cursorCoordinates,\n      border: dragAndDrop.getBorderOver(),\n      moveCursorTo: (value) => {\n        if (dragControl.value.classList.contains(\"xone-frame\") && containersInfo.value.length > 1)\n          containerSelected.value = containersInfo.value[1].name;\n        else containerSelected.value = containersInfo.value[0].name;\n\n        let left = location.value.left;\n        let top = location.value.top;\n        let width = location.value.width;\n        let height = location.value.height;\n\n        if (dragControl.value.classList.contains(\"xone-frame\") && containersInfo.value.length === 1) {\n          /** @type {HTMLDivElement} */\n          let element = containersInfo.value[0].control;\n\n          if ([\"bottom\", \"right\"].includes(value)) element = element.lastElementChild;\n          else element = element.firstElementChild;\n\n          left = element.getBoundingClientRect().left;\n          width = element.getBoundingClientRect().width;\n          top = element.getBoundingClientRect().top;\n          height = element.getBoundingClientRect().height;\n        }\n\n        const size = 10;\n\n        switch (value) {\n          case \"left\":\n            return (cursorCoordinates.value = {\n              left: left,\n              top: top,\n              width: size,\n              height: height,\n              opacity: 1,\n            });\n          case \"up\":\n            return (cursorCoordinates.value = {\n              left: left,\n              top: top,\n              width: width,\n              height: size,\n              opacity: 1,\n            });\n          case \"right\":\n            return (cursorCoordinates.value = {\n              left: left + width,\n              top: top,\n              width: size,\n              height: height,\n              opacity: 1,\n            });\n          case \"bottom\":\n            return (cursorCoordinates.value = {\n              left: left,\n              top: top + height,\n              width: width,\n              height: size,\n              opacity: 1,\n            });\n        }\n      },\n      selectorSize: computed(() => {\n        let x = 30;\n        let y = 30;\n        if (location.value.width / 2 < x) x = location.value.width / 2;\n        if (location.value.height / 2 < y) y = location.value.height / 2;\n\n        if (!location.value.isContainer) {\n          if (location.value.width > location.value.height) {\n            x = location.value.width / 4;\n            y = location.value.height / 2;\n          } else {\n            x = location.value.width / 2;\n            y = location.value.height / 4;\n          }\n        }\n        return { x, y };\n      }),\n      appPath: getAppPath(),\n    };\n  },\n};\n</script>\n\n<style scoped>\n.xone-designer-drag-container {\n  top: 0;\n  left: 0;\n  position: absolute;\n  height: 100vh;\n  width: 100vw;\n  pointer-events: none;\n}\n\n.xone-designer-drag {\n  transition: all 0.3s;\n  box-sizing: border-box;\n  position: absolute;\n  width: 100px;\n  height: 20px;\n  background-color: transparent;\n  outline: var(--border);\n  max-height: 100vh;\n  pointer-events: none;\n  z-index: 99999;\n}\n\n.xone-designer-drag-containers {\n  pointer-events: all;\n  border: 1px black solid;\n  border-radius: 3px;\n  background: white;\n  position: absolute;\n  height: 20px;\n  text-align: center;\n  font-size: 14px;\n}\n\n.xone-designer-drag-selected {\n  transition: all 0.3s;\n  box-sizing: border-box;\n  position: absolute;\n  width: 100px;\n  height: 20px;\n  background-color: transparent;\n  outline: 3px blue solid;\n  max-height: 100vh;\n  z-index: 99999;\n}\n\n.xone-designer-drag-move {\n  opacity: 0.25;\n  outline: 1px dotted blue;\n  background: white;\n  pointer-events: all;\n  position: absolute;\n  background-repeat: no-repeat;\n\n  background-position: center;\n  background-size: 16px 16px;\n}\n\n.xone-designer-drag-move:hover {\n  background-color: cyan;\n}\n\n.move-up {\n  background-image: var(--image-back);\n}\n.move-right {\n  background-image: var(--image-right);\n}\n.move-down {\n  background-image: var(--image-down);\n}\n.move-left {\n  background-image: var(--image-left);\n}\n</style>\n","import { render } from \"./DragControl.vue?vue&type=template&id=49901515&scoped=true\"\nimport script from \"./DragControl.vue?vue&type=script&lang=js\"\nexport * from \"./DragControl.vue?vue&type=script&lang=js\"\n\nimport \"./DragControl.vue?vue&type=style&index=0&id=49901515&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-49901515\"]])\n\nexport default __exports__","import { XoneControl } from \"./XoneViewsHandler\";\n\n/** @type {number} */\nlet _widthFactor = 1;\n\n/** @type {number} */\nlet _heightFactor = 1;\n\n/**\n * setWidthFactor\n * @param {number} value\n */\nexport const setWidthFactor = (value) => (_widthFactor = value || 1);\n\n/**\n * setHeightFactor\n * @param {number} value\n */\nexport const setHeightFactor = (value) => (_heightFactor = value || 1);\n\nexport default class XoneAnimation {\n  /** @type {HTMLDivElement} */\n  _target;\n\n  /** @type {Object} */\n  _options;\n\n  /** @type {Object[]} */\n  _keyframes;\n\n  /** @type {Function} */\n  _callback;\n\n  /** @type {boolean} */\n  _animate = false;\n\n  stop() {\n    this._animate = false;\n    if (this._target) this._target.animate({});\n  }\n\n  animate() {\n    if (!this._animate) return;\n    this._animate = false;\n    if (!this._target) return;\n\n    if (this._callback) setTimeout(() => this._callback(), this._options.duration);\n    this._target.animate(this._keyframes, this._options);\n  }\n\n  initAnimate() {\n    if (this._animate) return;\n    this._options = { duration: 300, fill: \"forwards\" };\n    this._keyframes = [];\n    this._animate = true;\n    this._callback = null;\n    Promise.resolve().then(() => this.animate());\n  }\n\n  /**\n   * setTarget\n   * @param {XoneControl} control\n   */\n  setTarget(control) {\n    this.initAnimate();\n    this._target = control.element || document.querySelector(`[xone-name=\"${control.name}\"]`);\n    return this;\n  }\n\n  /**\n   * setDuration\n   * @param {number} duration\n   */\n  setDuration(duration) {\n    this.initAnimate();\n    this._options.duration = duration;\n    return this;\n  }\n\n  setCircularReveal() {\n    // Aqu se muestra el objeto con una animacin rara, ya la trabajar porque tampoco me parece interesante ni importante\n    return this;\n  }\n\n  /**\n   * setRelativeScaleX\n   * @param {number} scale\n   */\n  setRelativeScaleX(scale) {\n    this.initAnimate();\n    this._keyframes.push({ transform: `scaleX(${scale})` });\n    return this;\n  }\n\n  /**\n   * setRelativeScaleY\n   * @param {number} scale\n   */\n  setRelativeScaleY(scale) {\n    this.initAnimate();\n    this._keyframes.push({ transform: `scaleY(${scale})` });\n    return this;\n  }\n\n  setScaleX(scale) {\n    return this.setRelativeScaleX(scale);\n  }\n\n  setScaleY(scale) {\n    return this.setRelativeScaleY(scale);\n  }\n\n  /**\n   * setRelativeScaleY\n   * @param {number} x\n   */\n  setRelativeX(x) {\n    this.initAnimate();\n    this._keyframes.push({\n      transform: `translateX(${x * _widthFactor}px)`,\n    });\n    return this;\n  }\n\n  /**\n   * setRelativeScaleY\n   * @param {number} y\n   */\n  setRelativeY(y) {\n    this.initAnimate();\n    this._keyframes.push({\n      transform: `translateY(${y * _heightFactor}px)`,\n    });\n    return this;\n  }\n\n  // Las posiciones las trabajo todas como relativas, para trabajar con posiciones absolutas lo que tendra que hacer el usuario es setear el objeto como floating, no tiene sentido esta animacin si no es floating...\n  setX(x) {\n    this.setRelativeX(x, true);\n    // this._keyframes.push({\n    //   position: \"absolute\",\n    // });\n    return this;\n  }\n\n  setY(y) {\n    this.setRelativeY(y);\n    // this._keyframes.push({\n    //   position: \"absolute\",\n    // });\n    return this;\n  }\n\n  setZ() {\n    return this;\n  }\n\n  /**\n   * setWidth\n   * @param {string} width\n   */\n  setWidth(width) {\n    this.initAnimate();\n\n    if (!isNaN(Number(width))) width = Number(width) * _widthFactor + \"px\";\n    else if (width.includes(\"p\") || width.includes(\"px\")) width = Number(width.replace(\"px\", \"\").replace(\"p\", \"\")) * _widthFactor + \"px\";\n\n    this._keyframes.push({ width });\n    return this;\n  }\n\n  /**\n   * setHeight\n   * @param {string} height\n   */\n  setHeight(height) {\n    this.initAnimate();\n\n    if (!isNaN(Number(height))) height = Number(height) * _heightFactor + \"px\";\n    else if (height.includes(\"p\") || height.includes(\"px\")) height = Number(height.replace(\"px\", \"\").replace(\"p\", \"\")) * _heightFactor + \"px\";\n\n    this._keyframes.push({ height });\n    return this;\n  }\n\n  /**\n   * setAlpha\n   * @param {number} alpha\n   */\n  setAlpha(alpha) {\n    this.initAnimate();\n    this._keyframes.push({ opacity: alpha });\n    return this;\n  }\n\n  /**\n   * setEndCallback\n   * @param {Function} callback\n   */\n  setEndCallback(callback) {\n    this._callback = callback;\n  }\n\n  /**\n  setRepeatMode(value) {\n   * \n   * @param {number} value \n   */\n  setRepeatMode(value) {\n    this.initAnimate();\n    if (value === -1) this._options.iterations = \"Infinity\";\n    else if (!isNaN(Number(value))) this._options.iterations = value;\n    return this;\n  }\n\n  /**\n   * setRotation\n   * @param {number} value\n   */\n  setRotation(value) {\n    this.initAnimate();\n    this._keyframes.push({\n      transform: `rotate(${value}deg)`,\n    });\n    return this;\n  }\n\n  setRelativeRotation(value) {\n    return this.setRotation(value);\n  }\n\n  // TODO: ver que animar en cada caso, de momento meto algo ah por defecto pero no tengo ni idea de lo que anima android tampoco\n  setInterpolation(value) {\n    switch (value) {\n      case \"AccelerateDecelerateInterpolator\":\n        return (this._options.easing = \"ease\");\n      case \"AccelerateInterpolator\":\n        return (this._options.easing = \"ease-in\");\n      case \"AnticipateInterpolator\":\n        return (this._options.easing = \"ease-out\");\n      case \"AnticipateOvershootInterpolator\":\n        return (this._options.easing = \"ease-in-out\");\n      case \"BounceInterpolator\":\n        return (this._options.easing = \"cubic-bezier(0.42,0,0.58,1)\");\n      case \"CycleInterpolator\":\n        return (this._options.easing = \"cubic-bezier(0.42,0,0.58,1)\");\n      case \"DecelerateInterpolator\":\n        return (this._options.easing = \"cubic-bezier(0.42,0,0.58,1)\");\n      case \"FastOutLinearInInterpolator\":\n        return (this._options.easing = \"cubic-bezier(0.42,0,0.58,1)\");\n      case \"FastOutSlowInInterpolator\":\n        return (this._options.easing = \"cubic-bezier(0.42,0,0.58,1)\");\n      case \"LinearInterpolator\":\n        return (this._options.easing = \"linear\");\n      case \"LinearOutSlowInInterpolator\":\n        return (this._options.easing = \"cubic-bezier(1,1,.5,.5);\");\n      case \"OvershootInterpolator\":\n        return (this._options.easing = \"cubic-bezier(0,0,1,1);\");\n      default:\n        return (this._options.easing = \"\");\n    }\n  }\n}\n","import { getAppPath } from \"./ImageHelper\";\n\nexport const addFontFaces = () => {\n\tconst newStyle = document.createElement(\"style\");\n\tconst appPath = getAppPath();\n\tnewStyle.appendChild(\n\t\tdocument.createTextNode(`@font-face {\n\t  font-family: \"Roboto\";\n\t  src: url(${window.location.origin}${appPath ? `/${appPath}` : \"\"}/fonts/Roboto-Medium.ttf);\n\t}\n\t\t`)\n\t);\n\n\tdocument.head.appendChild(newStyle);\n};\n","import { render } from \"./App.vue?vue&type=template&id=07ebe724\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=07ebe724&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createRouter, createWebHashHistory } from \"vue-router\"; //createWebHistory//createWebHashHistory\n\nconst history = createWebHashHistory(process.env.BASE_URL);\n\nconst routes = [\n\t{\n\t\tpath: \"/\",\n\t\tname: \"Home\",\n\t\tcomponent: () => import(/* webpackChunkName: \"about\" */ \"../views/Home.vue\"),\n\t},\n\n\t{\n\t\tpath: \"/o\",\n\t\tname: \"Coll\",\n\t\tcomponent: () => import(/* webpackChunkName: \"about\" */ \"../views/Home.vue\"),\n\t},\n\n\t{\n\t\tpath: \"/login/:id?\",\n\t\tname: \"Login\",\n\t\tcomponent: () => import(/* webpackChunkName: \"about\" */ \"../views/Home.vue\"),\n\t},\n\n\t{\n\t\tpath: \"/deeplink/\",\n\t\tname: \"DeepLink\",\n\t\tcomponent: () => import(/* webpackChunkName: \"coll\" */ \"../views/Home.vue\"),\n\t},\n\n\t{\n\t\tpath: \"/404/\",\n\t\tname: \"404\",\n\t\tcomponent: () => import(/* webpackChunkName: \"coll\" */ \"../views/404.vue\"),\n\t},\n\n\t{\n\t\tpath: \"/logon/\",\n\t\tname: \"Logon\",\n\t\tcomponent: () => import(/* webpackChunkName: \"coll\" */ \"../views/Login.vue\"),\n\t},\n];\n\nconst router = createRouter({\n\thistory,\n\troutes,\n});\n\nexport default router;\n","<template>\n\t<div\n\t\tref=\"containerElement\"\n\t\tv-show=\"isActive && !isDisableVisible\"\n\t\t:group=\"attributes.node === 'group' || null\"\n\t\t:class=\"['xone-frame', attributes.keepAspectRatio && 'keep-aspect-ratio', attributes.framebox && 'xone-frame-borders']\"\n\t\t:xone-name=\"attributes.name\"\n\t\t:style=\"{\n\t\t\t// Variables\n\t\t\t'--border-width': attributes.borderWidth,\n\t\t\t'--border-color': attributes.borderColor,\n\t\t\t'--elevation': `${attributes.elevation}px`,\n\t\t\t'--frame-align-column': attributes.align.column,\n\t\t\t// Margins\n\t\t\tmarginTop: margins.top + 'px',\n\t\t\tmarginRight: margins.right + 'px',\n\t\t\tmarginBottom: margins.bottom + 'px',\n\t\t\tmarginLeft: margins.left + 'px',\n\t\t\t// Paddings\n\t\t\tpaddingTop: paddings.top + 'px',\n\t\t\tpaddingRight: paddings.right + 'px',\n\t\t\tpaddingBottom: paddings.bottom + 'px',\n\t\t\tpaddingLeft: paddings.left + 'px',\n\t\t\t// Size\n\t\t\theight:\n\t\t\t\t(attributes.node === 'group' && !attributes.drawerOrientation && !attributes.fixed && '100%') ||\n\t\t\t\t(controlHeight && (attributes.node !== 'group' || attributes.fixed) && `${controlHeight}px`) ||\n\t\t\t\t'auto',\n\t\t\twidth: (attributes.node === 'group' && !attributes.drawerOrientation && '100%') || (controlWidth && `${controlWidth}px`) || 'auto',\n\t\t\tmaxHeight: !isContents && attributes.node === 'group' && containerHeight ? `${containerHeight}px` : null,\n\t\t\tmaxWidth: !isContents && attributes.node === 'group' && containerWidth ? `${containerWidth}px` : null,\n\t\t\tminHeight: attributes.minHeight ? attributes.minHeight : null,\n\t\t\tminWidth: attributes.minWidth ? attributes.minWidth : null,\n\t\t\t// Expanded\n\t\t\tflexGrow: attributes.node === 'frame' && attributes.width === 'grow' ? 1 : null,\n\t\t\tflexShrink: attributes.node === 'frame' && attributes.width === 'grow' ? 1 : null,\n\t\t\t// Background\n\t\t\tbackgroundColor: displayScreenThresholds ? '#00ff0025' : attributes.bgColor,\n\t\t\tbackgroundImage: attributes.image && `url(${appPath}/icons/${attributes.image})`,\n\t\t\t// Border\n\t\t\tborder: displayScreenThresholds && `1px solid ${attributes.borderColor}`,\n\t\t\tborderRadius: attributes.borderCornerRadius,\n\t\t\t// Align\n\t\t\tjustifyContent: attributes.align.column,\n\t\t\t// Scrolls\n\t\t\toverflowY:\n\t\t\t\tattributes.node === 'frame' && attributes.width === 'grow'\n\t\t\t\t\t? 'hidden'\n\t\t\t\t\t: // Esto en android no permite el scroll en un grupo, pero yo lo voy a dejar libre porque me parece que no tiene sentido -> //attributes.node === 'group' ? 'hidden' :\n\t\t\t\t\tattributes.scroll && attributes.scrollOrientation === 'vertical'\n\t\t\t\t\t? 'auto'\n\t\t\t\t\t: 'hidden',\n\t\t\toverflowX:\n\t\t\t\tattributes.node === 'frame' && attributes.width === 'grow'\n\t\t\t\t\t? 'hidden'\n\t\t\t\t\t: attributes.scroll && attributes.scrollOrientation === 'horizontal'\n\t\t\t\t\t? 'auto'\n\t\t\t\t\t: 'hidden',\n\t\t\t// Floating\n\t\t\tposition: attributes.floating.floating && 'absolute',\n\t\t\tzIndex: attributes.floating.floating && '9',\n\t\t\ttop: attributes.floating.floating && floatingTop && floatingTop,\n\t\t\tleft: attributes.floating.floating && floatingLeft && floatingLeft,\n\t\t\t// Designer\n\t\t\tcursor: isDesigner && isDragging && 'move', //|| (attributes.onClick && 'pointer'),\n\t\t}\"\n\t\t@scroll=\"onScroll\"\n\t\t@click=\"onClick($event)\"\n\t\t@mousedown=\"isDesigner && onMouseDown($event)\"\n\t\t@mouseenter=\"isDesigner && onMouseEnter($event)\"\n\t\t@mouseleave=\"isDesigner && onMouseLeave($event)\"\n\t\t@mousemove=\"isDesigner && onDragOver($event)\"\n\t\t@touchmove=\"isDesigner && onDragOver($event)\"\n\t>\n\t\t<!-- Rows of the container -->\n\t\t<template v-if=\"attributes.node === 'group' || !isDisableVisible\">\n\t\t\t<Row\n\t\t\t\tv-for=\"(row, iRow) in rows\"\n\t\t\t\t:xone-parent=\"attributes.name\"\n\t\t\t\t:key=\"`${attributes.name}-${iRow}`\"\n\t\t\t\t:style=\"{\n\t\t\t\t\t// Align\n\t\t\t\t\tjustifyContent: attributes.align.row,\n\t\t\t\t\talignItems: attributes.align.column,\n\t\t\t\t\tflexWrap: attributes.wrap ? 'wrap' : null,\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<!-- Columns of the Row -->\n\t\t\t\t<Column\n\t\t\t\t\tv-for=\"(column, iColumn) in row\"\n\t\t\t\t\t:key=\"`${column.attributes.name}-${iColumn}`\"\n\t\t\t\t\t:attributes=\"column.attributes\"\n\t\t\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t\t>\n\t\t\t\t\t<!-- Container -->\n\t\t\t\t\t<Container\n\t\t\t\t\t\tv-if=\"column.attributes.node === 'frame' || column.attributes.node === 'group'\"\n\t\t\t\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t\t\t\t:control=\"column\"\n\t\t\t\t\t\t:containerHeight=\"controlHeight || controlGrowHeight || containerHeight\"\n\t\t\t\t\t\t:containerWidth=\"controlWidth || controlGrowWidth || containerWidth\"\n\t\t\t\t\t></Container>\n\t\t\t\t\t<!-- Prop -->\n\t\t\t\t\t<Prop\n\t\t\t\t\t\tv-if=\"column.attributes.node === 'prop'\"\n\t\t\t\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t\t\t\t:control=\"column\"\n\t\t\t\t\t\t:containerHeight=\"controlHeight || controlGrowHeight || containerHeight\"\n\t\t\t\t\t\t:containerWidth=\"controlWidth || controlGrowWidth || containerWidth\"\n\t\t\t\t\t></Prop>\n\t\t\t\t</Column>\n\t\t\t</Row>\n\t\t</template>\n\t</div>\n</template>\n\n<script>\nimport { computed, inject, onMounted, ref, Ref, ComputedRef, watch, provide, nextTick, PropType, onUnmounted } from \"vue\";\nimport Row from \"./Row.vue\";\nimport Column from \"./Column.vue\";\nimport Prop from \"./Prop.vue\";\nimport { xoneAttributesHandler, ContainerAttributes, Margins } from \"../composables/XoneAttributesHandler\";\nimport { XoneDataObject } from \"../composables/appData/core/XoneDataObject\";\nimport { XoneControl, XoneView } from \"../composables/XoneViewsHandler\";\nimport dragAndDrop from \"../composables/DragAndDrop\";\nimport AppDataHandler, { Objectinfo } from \"../composables/AppDataHandler\";\nimport { getAppPath } from \"../composables/helperFunctions/ImageHelper\";\n\nexport default {\n\tname: \"Container\",\n\tcomponents: { Row, Column, Prop },\n\tprops: {\n\t\t/**\n\t\t * xoneDataObject\n\t\t * @type {PropType<XoneDataObject>}\n\t\t */\n\t\txoneDataObject: { type: Object, required: true },\n\t\tcontrol: { type: Object, required: true },\n\t\tcontainerWidth: { type: Number, default: 0 },\n\t\tcontainerHeight: { type: Number, default: 0 },\n\t\tvisibilityBit: { type: Number, default: 1 },\n\t},\n\temits: [\"onDataObjectChange\"],\n\t/**\n\t * Group / Frame control\n\t */\n\tsetup(props, context) {\n\t\tconst displayScreenThresholds = inject(\"displayScreenThresholds\");\n\n\t\t/**\n\t\t * objectInfo\n\t\t * @type {Objectinfo}\n\t\t */\n\t\tconst objectInfo = inject(\"objectInfo\");\n\t\tconst { isContents } = objectInfo;\n\n\t\t// Si es un contents y es edit-inrow, hacemos el objeto reactivo y lo creamos en el stack de objetos como una vista, por si se desea coger la vista del objeto\n\t\tif (objectInfo.editInRow && props.control.attributes.node === \"group\") {\n\t\t\t// Clonamos el objeto para que no pierda su reactividad\n\t\t\tconst newObj = props.xoneDataObject.clone().doModelReactive();\n\t\t\t// Hacemos push del objeto en el stack de objetos\n\t\t\tconst contentsRowbreadcrumbId = AppDataHandler.pushXoneDataObject(newObj, \"contentsRow\", false, false, true);\n\t\t\t// Creamos y proveemos la vista\n\t\t\tconst newXoneView = new XoneView(newObj);\n\t\t\tprovide(\"xoneView\", newXoneView);\n\t\t\t// Destruimos el objeto del stack de objetos\n\n\t\t\tonUnmounted(() => AppDataHandler.removeBreadcrumb(contentsRowbreadcrumbId));\n\t\t\t// Emitimos el cambio de objeto para setearlo en el contents\n\t\t\tcontext.emit(\"onDataObjectChange\", newObj);\n\t\t}\n\n\t\t/**\n\t\t * Attributes model\n\t\t * @type {ComputedRef<ContainerAttributes>}\n\t\t */\n\t\tconst attributesModel = computed(() => xoneAttributesHandler.getContainerAttributes(props.control.attributes));\n\n\t\t/**\n\t\t * Reactive Attributes\n\t\t * @type {Ref<ContainerAttributes>}\n\t\t */\n\t\tconst attributes = ref({ ...attributesModel.value });\n\n\t\t// Observe changes in attributes model and data model with ##FLD_ fields and fetch them to attributes\n\t\txoneAttributesHandler.watchAttributes(attributes, attributesModel, props.xoneDataObject.model);\n\n\t\t// Provide group id\n\t\tif (attributes.value.node === \"group\") provide(\"groupId\", attributes.value.id);\n\n\t\t/**\n\t\t * Check if disablevisible\n\t\t * @type {ComputedRef<boolean>}\n\t\t */\n\t\tconst isDisableVisible = computed(() => {\n\t\t\t// Frame without children\n\t\t\tif (attributes.value.node === \"frame\" && props.control.controls?.length === 0) return true;\n\t\t\t// No disablevisible attribute\n\t\t\tif ((attributes.value.disableVisible ?? \"\") === \"\") return false;\n\t\t\t// Eval disablevisible formula\n\t\t\treturn xoneAttributesHandler.evalFormula(attributes.value.disableVisible, props.xoneDataObject?.model);\n\t\t});\n\n\t\t/**\n\t\t * Group active\n\t\t * @type {Ref<string>}\n\t\t */\n\t\tconst { activeGroup } = inject(\"groupHandler\");\n\n\t\t/**\n\t\t * Is current group active\n\t\t * @type {ComputedRef<boolean>}\n\t\t */\n\t\tconst isActive = computed(() => {\n\t\t\treturn (\n\t\t\t\tattributes.value.node !== \"group\" ||\n\t\t\t\tattributes.value.fixed ||\n\t\t\t\tattributes.value.id === activeGroup.value ||\n\t\t\t\tattributes.value.drawerOrientation ||\n\t\t\t\tprops.visibilityBit === 4\n\t\t\t);\n\t\t});\n\n\t\t// Execute onfocus method\n\t\tif (attributes.value.node === \"group\" && attributes.value.onFocus)\n\t\t\twatch(\n\t\t\t\t() => activeGroup.value,\n\t\t\t\tasync (newValue) => {\n\t\t\t\t\tif (newValue !== attributes.value.id) return;\n\t\t\t\t\tawait xoneAttributesHandler.executeMethod(attributes.value.onFocus, props.xoneDataObject);\n\t\t\t\t}\n\t\t\t);\n\n\t\t/**\n\t\t * Container rows / columns\n\t\t * @type {ComputedRef<Array>}\n\t\t */\n\t\tconst rows = computed(() => {\n\t\t\tconst validNodes = [\"group\", \"frame\", \"prop\"];\n\t\t\tlet rowsArr = [];\n\t\t\tlet row = [];\n\t\t\tprops.control.controls\n\t\t\t\t?.filter((e) => validNodes.includes(e.attributes.node))\n\t\t\t\t?.forEach((e) => {\n\t\t\t\t\t// Set width and height = 100% if group has only 1 child and it's a frame\n\t\t\t\t\tif (\n\t\t\t\t\t\tattributes.value.node === \"group\" &&\n\t\t\t\t\t\tprops.control.controls.length === 1 &&\n\t\t\t\t\t\te.attributes.node === \"frame\" &&\n\t\t\t\t\t\t!attributes.value.fixed &&\n\t\t\t\t\t\t!attributes.value.floating?.floating &&\n\t\t\t\t\t\t!attributes.value.floating?.drawerOrientation\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (!objectInfo.isMsgBox && !isContents) {\n\t\t\t\t\t\t\te.attributes.height = \"100%\";\n\t\t\t\t\t\t\te.attributes.width = \"100%\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tconst controlAttributes = xoneAttributesHandler.getContainerAttributes(e.attributes);\n\t\t\t\t\t// newline true\n\t\t\t\t\tif (controlAttributes.newLine) {\n\t\t\t\t\t\tif (row.length !== 0) {\n\t\t\t\t\t\t\trowsArr.push(row);\n\t\t\t\t\t\t\trow = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\trow.push(e);\n\t\t\t\t\t}\n\t\t\t\t\t// newline false\n\t\t\t\t\telse {\n\t\t\t\t\t\trow.push(e);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\trowsArr.push(row);\n\n\t\t\t// Exclude empty containers\n\t\t\t/** @type {boolean} */\n\t\t\tlet clear;\n\t\t\tconst clearEmptyContainers = (control, /** @type {Array} */ parent) => {\n\t\t\t\tif (\n\t\t\t\t\tcontrol.attributes.node === \"frame\" &&\n\t\t\t\t\t(!control.controls || control.controls.filter((e) => validNodes.includes(e.attributes.node)).length === 0)\n\t\t\t\t) {\n\t\t\t\t\tparent.splice(parent.indexOf(control), 1);\n\t\t\t\t\tclear = true;\n\t\t\t\t}\n\t\t\t\tcontrol.controls?.forEach((e) => clearEmptyContainers(e, control.controls));\n\t\t\t};\n\t\t\tdo {\n\t\t\t\tclear = false;\n\t\t\t\trowsArr.forEach((row) => row.forEach((column) => clearEmptyContainers(column, row)));\n\t\t\t} while (clear);\n\n\t\t\treturn rowsArr;\n\t\t});\n\n\t\tconst isMouseOver = ref(false);\n\n\t\t/**\n\t\t * Scale Factor\n\t\t * @type {{widthFactor: ComputedRef<number>, heightFactor: ComputedRef<number>}}\n\t\t */\n\t\tconst { widthFactor, heightFactor } = inject(\"scaleFactor\");\n\n\t\tconst controlGrowWidth = ref(null),\n\t\t\tcontrolGrowHeight = ref(null);\n\n\t\t//\n\t\t// Width|Height = -1; 'grow', the container occuppies all available size\n\t\tonMounted(() => {\n\t\t\tif (isContents) objectInfo.rowInfo.setIsLoaded(true);\n\t\t\t// Set flex-grow to row container -> Height Grow\n\t\t\tif (attributes.value.height === \"grow\") {\n\t\t\t\tconst { parentElement } = containerElement.value;\n\t\t\t\tif (parentElement.classList.contains(\"xone-row\")) {\n\t\t\t\t\tparentElement.style.flexGrow = 1;\n\t\t\t\t\tparentElement.style.flexShrink = 1;\n\t\t\t\t\tparentElement.style.overflow = \"hidden\";\n\t\t\t\t\tconst observerHeight = new ResizeObserver(async () => {\n\t\t\t\t\t\tcontrolGrowHeight.value = parentElement.clientHeight - (margins.value?.top || 0) - (margins.value?.bottom || 0);\n\t\t\t\t\t\tfixJustifyCenter();\n\t\t\t\t\t});\n\t\t\t\t\tobserverHeight.observe(parentElement);\n\t\t\t\t\tonUnmounted(() => observerHeight?.disconnect());\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (attributes.value.width === \"grow\" || attributes.value.align.column === \"center\") {\n\t\t\t\tconst observerWidth = new ResizeObserver(async () => {\n\t\t\t\t\tif (attributes.value.width === \"grow\") {\n\t\t\t\t\t\tcontrolGrowWidth.value = containerElement.value.clientWidth - (margins.value?.left || 0) - (margins.value?.right || 0);\n\t\t\t\t\t}\n\t\t\t\t\tfixJustifyCenter();\n\t\t\t\t});\n\t\t\t\tobserverWidth.observe(containerElement.value);\n\t\t\t\tonUnmounted(() => observerWidth?.disconnect());\n\t\t\t}\n\t\t});\n\n\t\t/**\n\t\t * Calculate width of the current container\n\t\t * @type {ComputedRef<number>}\n\t\t */\n\t\tconst controlWidth = computed(() => {\n\t\t\tlet width = xoneAttributesHandler.getScaledSize(attributes.value.width, props.containerWidth, widthFactor.value);\n\t\t\treturn !width ? null : isMouseOver.value ? width - 4 : width;\n\t\t});\n\n\t\t/**\n\t\t * Calculate height of the current container\n\t\t * @type {ComputedRef<number>}\n\t\t */\n\t\tconst controlHeight = computed(() => {\n\t\t\tconst height = xoneAttributesHandler.getScaledSize(attributes.value.height, props.containerHeight, heightFactor.value);\n\t\t\tif (!height && controlGrowHeight.value) return controlGrowHeight.value;\n\t\t\treturn !height ? null : isMouseOver.value ? height - 4 : height;\n\t\t});\n\n\t\t/**\n\t\t * Margins of the current container\n\t\t * @type {ComputedRef<Margins>}\n\t\t */\n\t\tconst margins = computed(() => ({\n\t\t\ttop: xoneAttributesHandler.getScaledSize(attributes.value.margins.top, props.containerHeight, heightFactor.value),\n\t\t\tleft: xoneAttributesHandler.getScaledSize(attributes.value.margins.left, props.containerWidth, widthFactor.value),\n\t\t\tbottom: xoneAttributesHandler.getScaledSize(attributes.value.margins.bottom, props.containerHeight, heightFactor.value),\n\t\t\tright: xoneAttributesHandler.getScaledSize(attributes.value.margins.right, props.containerWidth, widthFactor.value),\n\t\t}));\n\n\t\t/**\n\t\t * Margins of the current container\n\t\t * @type {ComputedRef<Margins>}\n\t\t */\n\t\tconst paddings = computed(() => ({\n\t\t\ttop: xoneAttributesHandler.getScaledSize(attributes.value.paddings.top, props.containerHeight, heightFactor.value),\n\t\t\tleft: xoneAttributesHandler.getScaledSize(attributes.value.paddings.left, props.containerWidth, widthFactor.value),\n\t\t\tbottom: xoneAttributesHandler.getScaledSize(attributes.value.paddings.bottom, props.containerHeight, heightFactor.value),\n\t\t\tright: xoneAttributesHandler.getScaledSize(attributes.value.paddings.right, props.containerWidth, widthFactor.value),\n\t\t}));\n\n\t\t/**\n\t\t * calculate floating top\n\t\t * @type {ComputedRef<string>}\n\t\t */\n\t\tconst floatingTop = computed(() => xoneAttributesHandler.getScaledPosition(attributes.value.floating.top, heightFactor.value));\n\n\t\t/**\n\t\t * calculate floating leeft\n\t\t * @type {ComputedRef<string>}\n\t\t */\n\t\tconst floatingLeft = computed(() => xoneAttributesHandler.getScaledPosition(attributes.value.floating.left, widthFactor.value));\n\n\t\t//\n\t\t// Handler refresh\n\t\t/**\n\t\t * xoneView\n\t\t * @type {XoneView}\n\t\t */\n\t\tconst xoneView = inject(\"xoneView\");\n\n\t\tonMounted(() => {\n\t\t\t// Create XoneControl\n\t\t\tconst xoneControl = new XoneControl(attributes.value.name, containerElement.value);\n\t\t\t// refresh method\n\t\t\txoneControl.refresh = () =>\n\t\t\t\tprops.control.controls.forEach((e) => {\n\t\t\t\t\tif (xoneView[e.attributes.name]?.refresh) xoneView[e.attributes.name].refresh();\n\t\t\t\t});\n\t\t\t// scrollBy method\n\t\t\txoneControl.scrollBy = (value) => {\n\t\t\t\tif (!containerElement.value) return;\n\t\t\t\tvalue = value.toString();\n\t\t\t\tconst { scrollHeight } = containerElement.value;\n\t\t\t\tif (value.includes(\"%\"))\n\t\t\t\t\treturn containerElement.value.scrollTo({\n\t\t\t\t\t\ttop: Number((value.replace(\"%\", \"\") * scrollHeight) / 100),\n\t\t\t\t\t\tbehavior: \"smooth\",\n\t\t\t\t\t});\n\t\t\t\tcontainerElement.value.scrollTo({\n\t\t\t\t\ttop: Number(value.replace(\"p\", \"\") * heightFactor.value),\n\t\t\t\t\tbehavior: \"smooth\",\n\t\t\t\t});\n\t\t\t};\n\t\t\t// scrollTo method\n\t\t\txoneControl.scrollTo = xoneControl.scrollBy;\n\t\t\t// scrollToTop method\n\t\t\txoneControl.scrollToTop = () => xoneControl.scrollBy(0);\n\t\t\t// scrollToBottom method\n\t\t\txoneControl.scrollToBottom = () => xoneControl.scrollBy(containerElement.value?.scrollHeight);\n\t\t\t// Add control to view\n\t\t\txoneView.addControl(xoneControl);\n\n\t\t\t// AnimationIn\n\t\t\t// Load animation once control is loaded\n\t\t\tif (attributes.value.animationIn)\n\t\t\t\twatch(\n\t\t\t\t\t() => isDisableVisible.value,\n\t\t\t\t\t(value) => {\n\t\t\t\t\t\tif (!value && !containerElement.value.style.animation) containerElement.value.style.animation = attributes.value.animationIn;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\n\t\t/**\n\t\t * containerElement\n\t\t * @type {Ref<HTMLElement>}\n\t\t */\n\t\tconst containerElement = ref();\n\n\t\t// Flex no se comporta bien haciendo un justify-center center cuando tiene scroll, compruebo si lo tiene y se lo quito en tal caso\n\t\tconst fixJustifyCenter = () => {\n\t\t\tif (attributes.value.align.column !== \"center\") return;\n\t\t\tconst doFix = () => {\n\t\t\t\tif (containerElement.value.offsetHeight < containerElement.value.scrollHeight) containerElement.value.style.justifyContent = null;\n\t\t\t};\n\t\t\tdoFix();\n\t\t\t[...Array(5).keys()].forEach((e) => setTimeout(() => doFix(), e * 25));\n\t\t};\n\n\t\tnextTick(() => fixJustifyCenter());\n\n\t\twatch(\n\t\t\t() => props.containerHeight,\n\t\t\t() => fixJustifyCenter()\n\t\t);\n\n\t\t//\n\t\t// onScroll event\n\t\tlet scrollTimeout;\n\t\tconst onScroll = () => {\n\t\t\tif (scrollTimeout) clearTimeout(scrollTimeout);\n\t\t\tscrollTimeout = setTimeout(() => xoneAttributesHandler.onScrollEvent(containerElement.value, attributes.value, props.xoneDataObject), 250);\n\t\t};\n\t\tnextTick(() => onScroll());\n\n\t\t//\n\t\t// on click button\n\t\tlet isExecutingOnClick = false;\n\t\tconst onClick = async (/** @type {PointerEvent} */ e) => {\n\t\t\treturn;\n\t\t\tif (isExecutingOnClick || !attributes.value.onClick) return;\n\t\t\te.stopPropagation();\n\t\t\tisExecutingOnClick = true;\n\t\t\tawait xoneAttributesHandler.onClick(attributes.value, props.xoneDataObject, objectInfo);\n\t\t\tisExecutingOnClick = false;\n\t\t};\n\n\t\treturn {\n\t\t\tcontainerElement,\n\t\t\tdisplayScreenThresholds,\n\t\t\tattributes,\n\t\t\tisActive,\n\t\t\trows,\n\t\t\tisMouseOver,\n\t\t\tcontrolWidth,\n\t\t\tcontrolHeight,\n\t\t\tmargins,\n\t\t\tpaddings,\n\t\t\tisDisableVisible,\n\t\t\tfloatingTop,\n\t\t\tfloatingLeft,\n\t\t\tisDesigner: dragAndDrop.getIsDesigner(),\n\t\t\tisDragging: dragAndDrop.getIsDragging(),\n\t\t\t// isDesignerPropSelected: computed(\n\t\t\t//   () => dragAndDrop.getSelectedControl()?.value === containerElement.value\n\t\t\t// ),\n\t\t\tborderDesignSelected: dragAndDrop.getBorderSelected(),\n\t\t\tborderDesignOver: dragAndDrop.getBorderContainerOver(),\n\t\t\tcontrolGrowWidth,\n\t\t\tcontrolGrowHeight,\n\t\t\tonScroll,\n\t\t\tonClick,\n\t\t\tappPath: getAppPath(),\n\t\t\tisContents,\n\t\t\t//\n\t\t\t// Designer mode Drag & Drop\n\t\t\tonMouseEnter: () => dragAndDrop.mouseEnter(containerElement.value),\n\t\t\tonMouseLeave: () => dragAndDrop.mouseLeave(containerElement.value),\n\t\t\tonMouseDown: (e) => dragAndDrop.mouseDown(e),\n\t\t\tonDragOver: (e) => dragAndDrop.mouseMove(e),\n\t\t};\n\t},\n};\n</script>\n<style scoped>\n.xone-frame {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-self: flex-start;\n\tbackground-repeat: no-repeat;\n\tbackground-position: center;\n\t/* background-size: contain; */\n\tbackground-size: 100% 100%;\n\toverflow-x: hidden;\n\toverflow-y: auto;\n\t/* transition: all 0.2s; */\n\tbox-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\t-webkit-box-sizing: border-box;\n\n\tbox-shadow: 0px 0px var(--elevation) 0 rgba(0, 0, 0, 0.2);\n\n\toutline: var(--outine-border);\n\toutline-offset: var(--selected-offset);\n}\n\n.xone-frame-borders {\n\tborder: var(--border-width) solid var(--border-color);\n}\n\n.keep-aspect-ratio {\n\tbackground-size: contain;\n}\n\n.tabcontent {\n\theight: auto;\n\twidth: auto;\n\tflex-shrink: 1;\n\tflex-grow: 1;\n}\n</style>\n","<template>\n  <div class=\"xone-row\">\n    <slot></slot>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Row\",\n};\n</script>\n\n<style scoped>\n.xone-row {\n  overflow: visible;\n  display: inline-flex;\n  flex-direction: row;\n  flex-grow: 0;\n  flex-shrink: 0;\n  height: auto;\n}\n</style>\n","import { render } from \"./Row.vue?vue&type=template&id=86b0c20e&scoped=true\"\nimport script from \"./Row.vue?vue&type=script&lang=js\"\nexport * from \"./Row.vue?vue&type=script&lang=js\"\n\nimport \"./Row.vue?vue&type=style&index=0&id=86b0c20e&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-86b0c20e\"]])\n\nexport default __exports__","<template>\n\t<!-- is anchor|link? -> <a href></a> -->\n\t<a v-if=\"(attributes.viewMode === 'link' || attributes.viewMode === 'anchor') && attributes.href\" :href=\"href\" target=\"_blank\"><slot></slot></a>\n\t<!-- else -->\n\t<slot v-else></slot>\n</template>\n\n<script>\nimport { onMounted, ref, watchEffect } from \"@vue/runtime-core\";\nexport default {\n\tname: \"Column\",\n\tprops: {\n\t\tattributes: { type: Object, required: true },\n\t\txoneDataObject: { type: Object, required: true },\n\t},\n\tsetup(props) {\n\t\tconst href = ref();\n\t\tonMounted(() => {\n\t\t\tif ((props.attributes.viewMode !== \"link\" && props.attributes.viewMode !== \"anchor\") || !props.attributes.href) return;\n\t\t\thref.value = props.attributes.href;\n\t\t\tObject.keys(props.xoneDataObject.model).forEach((attrKey) => {\n\t\t\t\tif (href.value === `##FLD_${attrKey}##`) {\n\t\t\t\t\twatchEffect(() => (href.value = props.xoneDataObject.model[attrKey]));\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\treturn { href };\n\t},\n};\n</script>\n\n<style scoped>\na {\n\ttext-decoration: none;\n}\n\na:hover {\n\tcursor: pointer;\n}\n</style>\n","import { render } from \"./Column.vue?vue&type=template&id=3c3c9289&scoped=true\"\nimport script from \"./Column.vue?vue&type=script&lang=js\"\nexport * from \"./Column.vue?vue&type=script&lang=js\"\n\nimport \"./Column.vue?vue&type=style&index=0&id=3c3c9289&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3c3c9289\"]])\n\nexport default __exports__","<template>\n\t<div\n\t\tv-show=\"!isDisableVisible\"\n\t\tclass=\"xone-prop\"\n\t\tref=\"propElement\"\n\t\t:xone-name=\"attributes.name\"\n\t\t:style=\"{\n\t\t\t// set variables\n\t\t\t'--label-height':\n\t\t\t\t(controlHeight && `${/* convierto a entero para que las lneas las renderice bien */ Math.ceil(controlHeight)}px`) ||\n\t\t\t\t`calc(${attributes.lines} + 11px)` ||\n\t\t\t\t'100%',\n\t\t\t'--text-weight': attributes.fontBold ? 'bold' : 'normal',\n\t\t\t'--input-bgcolor':\n\t\t\t\t((attributes.locked || isDisableEdit) && attributes.textBgColorDisabled && attributes.textBgColorDisabled) ||\n\t\t\t\tattributes.textBgColor ||\n\t\t\t\tattributes.bgColor ||\n\t\t\t\t'transparent',\n\t\t\t'--input-forecolor':\n\t\t\t\t((attributes.locked || isDisableEdit) && attributes.textForeColorDisabled && attributes.textForeColorDisabled) ||\n\t\t\t\t(attributes.textForeColor && attributes.textForeColor) ||\n\t\t\t\tattributes.foreColor,\n\t\t\t'--padding-top': `${paddings.top}px`,\n\t\t\t'--padding-right': `${paddings.right}px`,\n\t\t\t'--padding-bottom': `${paddings.bottom}px`,\n\t\t\t'--padding-left': `${paddings.left}px`,\n\t\t\t'--margin-top': `${margins.top}px`,\n\t\t\t'--margin-right': `${margins.right}px`,\n\t\t\t'--margin-bottom': `${margins.bottom}px`,\n\t\t\t'--margin-left': `${margins.left}px`,\n\t\t\t'--border-color': attributes.borderColor,\n\t\t\t'--border-width': attributes.borderWidth,\n\t\t\t'--elevation': `${attributes.elevation}px`,\n\t\t\t// Size\n\t\t\theight: (controlHeight && `${controlHeight}px`) || (finalImgSize && `${finalImgSize.height}px`) || (attributes.height ?? 'auto'),\n\t\t\twidth: (controlWidth && `${controlWidth}px`) || (finalImgSize && `${finalImgSize.width}px`),\n\t\t\tminHeight: attributes.minHeight ? attributes.minHeight : null,\n\t\t\tminWidth: attributes.minWidth ? attributes.minWidth : null,\n\t\t\t// Expanded\n\t\t\tflexGrow: attributes.width === 'grow' ? 1 : null,\n\t\t\t// Background\n\t\t\tbackgroundColor: displayScreenThresholds && '#ff000025',\n\t\t\tposition: attributes.floating.floating && 'absolute',\n\t\t\tzIndex: attributes.floating.floating && '9',\n\t\t\ttop: attributes.floating.floating && floatingTop && floatingTop,\n\t\t\tleft: attributes.floating.floating && floatingLeft && floatingLeft,\n\t\t\t// Border\n\t\t\tborder: displayScreenThresholds && '1px solid #ff0000',\n\t\t\t// Designer mode\n\t\t\tcursor: isDesigner && isDragging && 'move',\n\t\t\t// Overflow\n\t\t\toverflow: isContents || isImage ? 'hidden' : null,\n\t\t}\"\n\t\t@mousedown=\"isDesigner && onMouseDown($event)\"\n\t\t@mouseenter=\"isDesigner && onMouseEnter($event)\"\n\t\t@mouseleave=\"isDesigner && onMouseLeave($event)\"\n\t\t@mousemove=\"isDesigner && onDragOver($event)\"\n\t\t@touchmove=\"isDesigner && onDragOver($event)\"\n\t>\n\t\t<!-- Input Prop -->\n\t\t<InputProp\n\t\t\tv-if=\"isInput\"\n\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t:attributes=\"attributes\"\n\t\t\t:controlWidth=\"controlWidth\"\n\t\t\t:controlHeight=\"controlHeight\"\n\t\t\t:inputType=\"inputType\"\n\t\t\t:isDisableEdit=\"isDisableEdit\"\n\t\t\t:checkboxSize=\"checkboxSize\"\n\t\t></InputProp>\n\t\t<!-- Button -->\n\t\t<ButtonProp\n\t\t\tv-if=\"isButton\"\n\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t:attributes=\"attributes\"\n\t\t\t:paddings=\"paddings\"\n\t\t\t:isDisableEdit=\"isDisableEdit\"\n\t\t\t:containerWidth=\"containerWidth\"\n\t\t\t:containerHeight=\"containerHeight\"\n\t\t></ButtonProp>\n\t\t<!-- Img / Photo / Draw -->\n\t\t<ImageProp\n\t\t\tv-if=\"isImage\"\n\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t:attributes=\"attributes\"\n\t\t\t:controlWidth=\"controlWidth\"\n\t\t\t:controlHeight=\"controlHeight\"\n\t\t\t:containerWidth=\"containerWidth\"\n\t\t\t:containerHeight=\"containerHeight\"\n\t\t></ImageProp>\n\t\t<!-- Contents -->\n\t\t<Contents\n\t\t\tv-if=\"isContents\"\n\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t:attributes=\"attributes\"\n\t\t\t:controlWidth=\"controlWidth || containerWidth\"\n\t\t\t:controlHeight=\"controlHeight || containerHeight\"\n\t\t\t:isDisableEdit=\"isDisableEdit\"\n\t\t></Contents>\n\t\t<!-- Web -->\n\t\t<WebProp\n\t\t\tv-if=\"isWeb\"\n\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t:attributes=\"attributes\"\n\t\t\t:controlWidth=\"controlWidth\"\n\t\t\t:controlHeight=\"controlHeight\"\n\t\t></WebProp>\n\t\t<!-- Video -->\n\t\t<VideoProp\n\t\t\tv-if=\"isVideo\"\n\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t:attributes=\"attributes\"\n\t\t\t:controlWidth=\"controlWidth\"\n\t\t\t:controlHeight=\"controlHeight\"\n\t\t></VideoProp>\n\t\t<Breadcrumb v-if=\"isBreadcrumb\" :attributes=\"attributes\"></Breadcrumb>\n\t</div>\n</template>\n\n<script>\n// vue\nimport { computed, inject, ref, Ref, ComputedRef, onMounted, watch, nextTick } from \"vue\";\n// components\nimport ButtonProp from \"./propComponents/Button.vue\";\nimport InputProp from \"./propComponents/Input.vue\";\nimport ImageProp from \"./propComponents/Image.vue\";\nimport Contents from \"./propComponents/Contents.vue\";\nimport WebProp from \"./propComponents/Web.vue\";\nimport VideoProp from \"./propComponents/Video.vue\";\nimport Breadcrumb from \"./propComponents/Breadcrumb.vue\";\n// composables\nimport { xoneAttributesHandler, PropAttributes, Margins, Paddings } from \"../composables/XoneAttributesHandler\";\nimport dragAndDrop from \"../composables/DragAndDrop\";\nimport { XoneDataObject } from \"../composables/appData/core/XoneDataObject\";\nimport { getImagePathAndSize } from \"../composables/helperFunctions/ImageHelper\";\n\nexport default {\n\tname: \"Prop\",\n\tprops: {\n\t\t/** xoneDataObject\n\t\t * @type {PropType<XoneDataObject>}\n\t\t */\n\t\txoneDataObject: { type: Object, required: true },\n\t\tcontrol: { type: Object, default: undefined, required: true },\n\t\tcontainerWidth: { type: Number, default: 0 },\n\t\tcontainerHeight: { type: Number, default: 0 },\n\t},\n\tcomponents: {\n\t\tButtonProp,\n\t\tInputProp,\n\t\tImageProp,\n\t\tContents,\n\t\tWebProp,\n\t\tVideoProp,\n\t\tBreadcrumb,\n\t},\n\tsetup(props) {\n\t\t/**\n\t\t * @type {Ref<HTMLDivElement>}\n\t\t */\n\t\tconst propElement = ref();\n\n\t\tconst displayScreenThresholds = inject(\"displayScreenThresholds\");\n\n\t\t/**\n\t\t * Attributes model\n\t\t * @type {ComputedRef<PropAttributes>}\n\t\t */\n\t\tconst attributesModel = computed(() => xoneAttributesHandler.getPropAttributes(props.control.attributes));\n\n\t\t/**\n\t\t * Reactive attributes\n\t\t * @type {Ref<PropAttributes>}\n\t\t */\n\t\tconst attributes = ref({ ...attributesModel.value });\n\n\t\t// Observe changes in attributes model and data model with ##FLD_ fields and fetch them to attributes\n\t\txoneAttributesHandler.watchAttributes(attributes, attributesModel, props.xoneDataObject.model);\n\n\t\t/**\n\t\t * Check if disablevisible\n\t\t * @type {ComputedRef<boolean>}\n\t\t */\n\t\tconst isDisableVisible = computed(() => {\n\t\t\tif ((attributes.value.disableVisible ?? \"\") === \"\") return false;\n\t\t\treturn xoneAttributesHandler.evalFormula(attributes.value.disableVisible, props.xoneDataObject?.model);\n\t\t});\n\n\t\t/**\n\t\t * Image size\n\t\t * @type {Ref<number|null>}\n\t\t */\n\t\tlet imgSize = ref(null);\n\n\t\tconst calculateImgSize = async () => {\n\t\t\tif (!attributes.value.image) return;\n\t\t\tconst imgPathSize = await getImagePathAndSize(attributes.value.image, \"files\");\n\t\t\tif (!imgPathSize) return;\n\t\t\timgSize.value = {\n\t\t\t\twidth: xoneAttributesHandler.getScaledSize(imgPathSize.imgSize.width + \"px\", props.containerWidth, widthFactor.value),\n\t\t\t\theight: xoneAttributesHandler.getScaledSize(imgPathSize.imgSize.height + \"px\", props.containerHeight, heightFactor.value),\n\t\t\t};\n\t\t};\n\n\t\t// Recalculate image size if attributes.image change\n\t\tonMounted(() => calculateImgSize());\n\n\t\twatch(\n\t\t\t() => props.containerHeight,\n\t\t\t() => calculateImgSize()\n\t\t);\n\n\t\tconst finalImgSize = computed(() => {\n\t\t\tlet width = controlWidth.value;\n\t\t\tif (!width && imgSize.value) {\n\t\t\t\tif (controlHeight.value) width = (controlHeight.value * imgSize.value.width) / imgSize.value.height;\n\t\t\t\telse width = imgSize.value.width;\n\t\t\t}\n\n\t\t\tlet height = controlHeight.value;\n\t\t\tif (!height && imgSize.value) {\n\t\t\t\tif (controlWidth.value) height = (controlWidth.value * imgSize.value.height) / imgSize.value.width;\n\t\t\t\telse height = imgSize.value.height;\n\t\t\t}\n\n\t\t\treturn { width, height };\n\t\t});\n\n\t\t/**\n\t\t * Input type depending on prop type\n\t\t * @type {ComputedRef<string>}\n\t\t */\n\t\tconst inputType = computed(() => {\n\t\t\tif (\n\t\t\t\tattributes.value.viewMode === \"breadcrumbview\" ||\n\t\t\t\tattributes.value.viewMode === \"breadcumbview\" ||\n\t\t\t\tattributes.value.viewMode === \"routerview\"\n\t\t\t)\n\t\t\t\treturn null;\n\t\t\tswitch (attributes.value.type) {\n\t\t\t\tcase \"T\":\n\t\t\t\t\treturn \"text\";\n\t\t\t\tcase \"X\":\n\t\t\t\t\treturn \"password\";\n\t\t\t\tcase \"N\":\n\t\t\t\t\tif (attributes.value.viewMode === \"slider\") return \"range\";\n\t\t\t\t\treturn \"number\";\n\t\t\t\tcase \"NC\":\n\t\t\t\t\treturn \"checkbox\";\n\t\t\t\tcase \"D\":\n\t\t\t\t\treturn \"date\";\n\t\t\t\tcase \"TT\":\n\t\t\t\t\treturn \"time\";\n\t\t\t\tcase \"DT\":\n\t\t\t\t\treturn \"datetime-local\";\n\t\t\t\tcase \"AT\":\n\t\t\t\t\treturn \"text\";\n\t\t\t\tcase \"TL\":\n\t\t\t\t\treturn \"text\";\n\t\t\t\tdefault:\n\t\t\t\t\tif (attributes.value.type.length != 0 && attributes.value.type[0] === \"N\") return \"number\";\n\t\t\t\t\treturn null;\n\t\t\t}\n\t\t});\n\n\t\t/**\n\t\t * Scale Factor\n\t\t * @type {{widthFactor: ComputedRef<number>, heightFactor: ComputedRef<number>}}\n\t\t */\n\t\tconst { widthFactor, heightFactor } = inject(\"scaleFactor\");\n\n\t\t/**\n\t\t * Calculate width of the current prop\n\t\t * @type {ComputedRef<number>}\n\t\t */\n\t\tconst controlWidth = computed(() => xoneAttributesHandler.getScaledSize(attributes.value.width, props.containerWidth, widthFactor.value));\n\n\t\t/**\n\t\t * Calculate height of the current prop\n\t\t * @type {ComputedRef<number>}\n\t\t */\n\t\tconst controlHeight = computed(() => xoneAttributesHandler.getScaledSize(attributes.value.height, props.containerHeight, heightFactor.value));\n\n\t\t/**\n\t\t * Margins of the current prop\n\t\t * @type {ComputedRef<Margins>}\n\t\t */\n\t\tconst margins = computed(() => ({\n\t\t\ttop: xoneAttributesHandler.getScaledSize(attributes.value.margins.top, props.containerHeight, heightFactor.value) ?? 0,\n\t\t\tleft: xoneAttributesHandler.getScaledSize(attributes.value.margins.left, props.containerWidth, widthFactor.value) ?? 0,\n\t\t\tbottom: xoneAttributesHandler.getScaledSize(attributes.value.margins.bottom, props.containerHeight, heightFactor.value) ?? 0,\n\t\t\tright: xoneAttributesHandler.getScaledSize(attributes.value.margins.right, props.containerWidth, widthFactor.value) ?? 0,\n\t\t}));\n\n\t\t/**\n\t\t * calculate floating top\n\t\t * @type {ComputedRef<string>}\n\t\t */\n\t\tconst floatingTop = computed(() => xoneAttributesHandler.getScaledPosition(attributes.value.floating.top, heightFactor.value));\n\n\t\t/**\n\t\t * calculate floating leeft\n\t\t * @type {ComputedRef<string>}\n\t\t */\n\t\tconst floatingLeft = computed(() => xoneAttributesHandler.getScaledPosition(attributes.value.floating.left, widthFactor.value));\n\n\t\t/**\n\t\t * Check if disableedit\n\t\t * @type {ComputedRef<boolean>}\n\t\t */\n\t\tconst isDisableEdit = computed(() => {\n\t\t\tif ((attributes.value.disableEdit ?? \"\") === \"\") return false;\n\t\t\treturn xoneAttributesHandler.evalFormula(attributes.value.disableEdit, props.xoneDataObject.model);\n\t\t});\n\n\t\t/**\n\t\t * Padding\n\t\t * @type {ComputedRef<Paddings>}\n\t\t */\n\t\tconst paddings = computed(() => {\n\t\t\treturn {\n\t\t\t\ttop: xoneAttributesHandler.getScaledSize(attributes.value.paddings.top, props.containerHeight, heightFactor.value) || 5,\n\t\t\t\tright: xoneAttributesHandler.getScaledSize(attributes.value.paddings.right, props.containerWidth, widthFactor.value) || 5,\n\t\t\t\tbottom: xoneAttributesHandler.getScaledSize(attributes.value.paddings.bottom, props.containerHeight, heightFactor.value) || 5,\n\t\t\t\tleft: xoneAttributesHandler.getScaledSize(attributes.value.paddings.left, props.containerWidth, widthFactor.value) || 5,\n\t\t\t};\n\t\t});\n\n\t\t/**\n\t\t * Calculate the checkbox size\n\t\t * @type {ComputedRef<string|null>}\n\t\t */\n\t\tconst checkboxSize = computed(() => {\n\t\t\tif (attributes.value.imgWidth) return xoneAttributesHandler.getScaledSize(attributes.value.imgWidth, props.containerWidth, widthFactor.value);\n\t\t\telse if (attributes.value.imageHeight)\n\t\t\t\treturn xoneAttributesHandler.getScaledSize(attributes.value.imgHeight, props.containerHeight, widthFactor.value);\n\t\t\treturn null;\n\t\t});\n\n\t\t// Execute postonchange method\n\n\t\t/**\n\t\t * Last breadcrumb in stack\n\t\t * @type {ComputedRef<import('../composables/AppDataHandler').Breadcrumb>}\n\t\t */\n\t\tconst lastBreadcrumb = inject(\"lastBreadcrumb\");\n\n\t\t// Inject breadcrumbId info to child components\n\t\tconst breadcrumbId = inject(\"breadcrumbId\");\n\n\t\tnextTick(() => {\n\t\t\tif (!attributes.value.postOnchange) return;\n\t\t\twatch(\n\t\t\t\t() => lastBreadcrumb.value,\n\t\t\t\tasync (newValue) => {\n\t\t\t\t\tif (newValue.id !== breadcrumbId) return;\n\t\t\t\t\txoneAttributesHandler.executeMethod(attributes.value.postOnchange, props.xoneDataObject, attributes.value.name);\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\n\t\t//\n\t\t// Designer mode Drag & Drop\n\t\tconst onMouseEnter = () => dragAndDrop.mouseEnter(propElement.value);\n\t\tconst onMouseLeave = () => dragAndDrop.mouseLeave(propElement.value);\n\t\tconst onMouseDown = (e) => dragAndDrop.mouseDown(e);\n\t\tconst onDragOver = (e) => dragAndDrop.mouseMove(e);\n\n\t\treturn {\n\t\t\tpropElement,\n\t\t\tdisplayScreenThresholds,\n\t\t\tattributes,\n\t\t\tinputType,\n\t\t\tcontrolWidth,\n\t\t\tcontrolHeight,\n\t\t\tmargins,\n\t\t\tisDisableVisible,\n\t\t\tfinalImgSize,\n\t\t\tfloatingTop,\n\t\t\tfloatingLeft,\n\t\t\tisDisableEdit,\n\t\t\tpaddings,\n\t\t\tcheckboxSize,\n\t\t\tisInput: computed(() => inputType.value),\n\t\t\tisButton: computed(() => attributes.value.type === \"B\"),\n\t\t\tisImage: computed(() => attributes.value.type === \"IMG\" || attributes.value.type === \"PH\" || attributes.value.type === \"DR\"),\n\t\t\tisContents: computed(() => attributes.value.type === \"Z\" || attributes.value.viewMode === \"routerview\"),\n\t\t\tisWeb: computed(() => attributes.value.type === \"WEB\"),\n\t\t\tisVideo: computed(() => attributes.value.type === \"VD\"),\n\t\t\tisBreadcrumb: computed(() => attributes.value.viewMode === \"breadcrumbsview\" || attributes.value.viewMode === \"breadcumbview\"),\n\t\t\tisDesigner: dragAndDrop.getIsDesigner(),\n\t\t\tisDragging: dragAndDrop.getIsDragging(),\n\t\t\tisDesignerPropSelected: computed(() => dragAndDrop.getSelectedControl()?.value === propElement.value),\n\t\t\tborderDesignSelected: dragAndDrop.getBorderSelected(),\n\t\t\tborderDesignOver: dragAndDrop.getBorderPropOver(),\n\t\t\tonMouseEnter,\n\t\t\tonMouseLeave,\n\t\t\tonMouseDown,\n\t\t\tonDragOver,\n\t\t};\n\t},\n};\n</script>\n\n<style scoped>\n.xone-prop {\n\tdisplay: flex;\n\tposition: relative;\n\talign-items: center;\n\tjustify-content: flex-start;\n\tbox-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\t-webkit-box-sizing: border-box;\n\tmargin-top: var(--margin-top);\n\tmargin-right: var(--margin-right);\n\tmargin-bottom: var(--margin-bottom);\n\tmargin-left: var(--margin-left);\n}\n</style>\n","<template>\n\t<!-- Input Checkbox -->\n\t<Checkbox\n\t\tv-if=\"attributes.type === 'NC'\"\n\t\t:attributes=\"attributes\"\n\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t:isDisabled=\"attributes.locked || isDisableEdit || isLinked || (objectInfo.isContents && !objectInfo.editInRow)\"\n\t\t:controlWidth=\"controlWidth\"\n\t\t:controlHeight=\"controlHeight\"\n\t\t:checkboxSize=\"checkboxSize\"\n\t></Checkbox>\n\t<!-- label -->\n\t<div\n\t\tv-if=\"attributes.labelWidth != 0 && !attributes.floatingTooltip\"\n\t\tclass=\"xone-input-label\"\n\t\t:style=\"{\n\t\t\t// Size\n\t\t\theight: 'var(--label-height)',\n\t\t\twidth: (attributes.type === 'TL' && '100%') || attributes.labelWidth,\n\t\t\t// Font\n\t\t\tfontSize: attributes.fontSize,\n\t\t\t// Background\n\t\t\tbackgroundColor: attributes.bgColor,\n\t\t\t// Borders\n\t\t\tborder: attributes.labelBox && `1px solid ${attributes.borderColor}`,\n\t\t\t// is CheckBox? -> Grow\n\t\t\tflexGrow: attributes.type === 'NC' && 1,\n\t\t}\"\n\t>\n\t\t<label\n\t\t\t:style=\"{\n\t\t\t\t// Font\n\t\t\t\tcolor: attributes.foreColor,\n\t\t\t\tfontSize: attributes.fontSize,\n\t\t\t\t// Align\n\t\t\t\talignItems: attributes.labelAlign,\n\t\t\t\tjustifyContent: attributes.labelAlign,\n\t\t\t\t// Paddings\n\t\t\t\tpaddingTop: attributes.type === 'TL' ? 'var(--padding-top)' : null,\n\t\t\t\tpaddingRight: attributes.type === 'TL' ? 'var(--padding-right)' : null,\n\t\t\t\tpaddingBottom: attributes.type === 'TL' ? 'var(--padding-bottom)' : null,\n\t\t\t\tpaddingLeft: attributes.type === 'TL' ? 'var(--padding-left)' : null,\n\t\t\t}\"\n\t\t\tclass=\"xone-title\"\n\t\t\t:class=\"{\n\t\t\t\tnoEditInRow: objectInfo.isContents && !objectInfo.editInRow,\n\t\t\t}\"\n\t\t\t>{{ attributes.title }}</label\n\t\t>\n\t</div>\n\t<!-- Input -->\n\t<div class=\"xone-input-container\" v-if=\"attributes.type != 'TL' && attributes.type !== 'NC'\">\n\t\t<!-- 1 line -->\n\t\t<input\n\t\t\tv-if=\"!attributes.multiLine\"\n\t\t\tref=\"inputElement\"\n\t\t\trequired\n\t\t\t:disabled=\"attributes.type === 'AT' || attributes.locked || isDisableEdit || isLinked || (objectInfo.isContents && !objectInfo.editInRow)\"\n\t\t\t@input=\"onInput\"\n\t\t\t:value=\"propValue\"\n\t\t\t:type=\"inputType\"\n\t\t\t:step=\"numberStep\"\n\t\t\t:maxlength=\"(attributes.fixedText && attributes.size) || null\"\n\t\t\t:style=\"{\n\t\t\t\t// Size\n\t\t\t\twidth: (attributes.width !== undefined && '100%') || attributes.fieldSize,\n\t\t\t\theight: (controlHeight && `${controlHeight - 11}px`) || attributes.lines,\n\t\t\t\t// Border\n\t\t\t\tborderRadius: attributes.borderCornerRadius,\n\t\t\t\t// Text\n\t\t\t\ttextAlign: attributes.textAlign || attributes.align,\n\t\t\t\tfontSize: attributes.fontSize ? attributes.fontSize : attributes.textFontSize && attributes.textFontSize,\n\t\t\t\t// Is Linked? -> padding-right in order to show the search button\n\t\t\t\tpaddingRight: isLinked && '35px',\n\t\t\t}\"\n\t\t\t:class=\"{\n\t\t\t\tnobordertop: !attributes.borders.top,\n\t\t\t\tnoborderright: !attributes.borders.right,\n\t\t\t\tnoborderbottom: !attributes.borders.bottom,\n\t\t\t\tnoborderleft: !attributes.borders.left,\n\t\t\t\tnoEditInRow: objectInfo.isContents && !objectInfo.editInRow,\n\t\t\t}\"\n\t\t\t@change=\"onChange()\"\n\t\t\t@focus=\"onFocusChanged(true)\"\n\t\t\t@blur=\"onFocusChanged(false)\"\n\t\t\t@keydown=\"onKeyPress\"\n\t\t/>\n\t\t<!-- \n        disabled: attributes.locked || isDisableEdit || isLinked, -->\n\t\t<!-- multi line -->\n\t\t<textarea\n\t\t\tref=\"textAreaElement\"\n\t\t\tv-else\n\t\t\trequired\n\t\t\t:disabled=\"attributes.type === 'AT' || attributes.locked || isDisableEdit || isLinked || (objectInfo.isContents && !objectInfo.editInRow)\"\n\t\t\t@input=\"onInput\"\n\t\t\t:value=\"propValue\"\n\t\t\t:maxlength=\"(attributes.fixedText && attributes.size) || null\"\n\t\t\t:style=\"{\n\t\t\t\t// Size\n\t\t\t\twidth: (attributes.width && '99%') || attributes.fieldSize,\n\t\t\t\theight: (controlHeight && `${controlHeight - 11}px`) || attributes.lines,\n\t\t\t\t// Border\n\t\t\t\tborderRadius: attributes.borderCornerRadius,\n\t\t\t\t// Text\n\t\t\t\ttextAlign: attributes.textAlign && attributes.textAlign,\n\t\t\t\tfontSize: attributes.textFontSize ? attributes.textFontSize : attributes.fontSize,\n\t\t\t\t// Is Linked? -> padding-right in order to show the search button\n\t\t\t\tpaddingRight: isLinked && '35px',\n\t\t\t}\"\n\t\t\t:class=\"{\n\t\t\t\tnobordertop: !attributes.borders.top,\n\t\t\t\tnoborderright: !attributes.borders.right,\n\t\t\t\tnoborderbottom: !attributes.borders.bottom,\n\t\t\t\tnoborderleft: !attributes.borders.left,\n\t\t\t\tdisabled: attributes.locked || isDisableEdit,\n\t\t\t\tnoEditInRow: objectInfo.isContents && !objectInfo.editInRow,\n\t\t\t}\"\n\t\t\t@change=\"onChange()\"\n\t\t\t@focus=\"onFocusChanged(true)\"\n\t\t\t@blur=\"onFocusChanged(false)\"\n\t\t\t@keydown=\"onKeyPress\"\n\t\t/>\n\t\t<!-- Linked search button -->\n\t\t<button\n\t\t\tv-if=\"isLinked && !(objectInfo.isContents && !objectInfo.editInRow)\"\n\t\t\tref=\"linkedSearchElement\"\n\t\t\tclass=\"xone-input xone-input-linked\"\n\t\t\t:style=\"{\n\t\t\t\topacity: attributes.locked || isDisableEdit ? 0.5 : 1,\n\t\t\t\tcursor: attributes.locked || isDisableEdit ? 'default' : 'pointer',\n\t\t\t\t'--image-showinline': `url(${appPath}/assets/showinline.png)`,\n\t\t\t}\"\n\t\t\t:disabled=\"attributes.locked || isDisableEdit\"\n\t\t\t@click=\"onLinkedSearchButtonClick\"\n\t\t></button>\n\t\t<!-- Attach button -->\n\t\t<button\n\t\t\tv-if=\"attributes.type === 'AT' && !(objectInfo.isContents && !objectInfo.editInRow)\"\n\t\t\tref=\"linkedSearchElement\"\n\t\t\tclass=\"xone-input xone-input-attach\"\n\t\t\t:style=\"{\n\t\t\t\topacity: attributes.locked || isDisableEdit ? 0.5 : 1,\n\t\t\t\tcursor: attributes.locked || isDisableEdit ? 'default' : 'pointer',\n\t\t\t\t'--image-showinline': `url(${appPath}/assets/attach.png)`,\n\t\t\t}\"\n\t\t\t:disabled=\"attributes.locked || isDisableEdit\"\n\t\t\t@click=\"onAttachButtonClick\"\n\t\t></button>\n\t\t<!-- Linked search component -->\n\t\t<LinkedSearchInline\n\t\t\tv-if=\"isLinkedSearchVisible\"\n\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t:attributes=\"attributes\"\n\t\t\t@onHide=\"isLinkedSearchVisible = false\"\n\t\t\t@onSelectedItem=\"onSelectedItem\"\n\t\t\t:linkedSearchPosition=\"linkedSearchPosition\"\n\t\t></LinkedSearchInline>\n\t\t<!-- Tooltip -->\n\t\t<label\n\t\t\tv-if=\"!['D', 'DT', 'TT'].includes(attributes.type) && attributes.tooltip !== '' && !attributes.locked && !isDisableEdit\"\n\t\t\t:class=\"[\n\t\t\t\t'xone-tooltip',\n\t\t\t\tattributes.floatingTooltip ? 'float' : 'nofloat',\n\t\t\t\tattributes.floatingTooltip && propValue && isLinked ? 'linked-input-fill' : '',\n\t\t\t]\"\n\t\t\t:for=\"attributes.name\"\n\t\t\t:style=\"{\n\t\t\t\tcolor: attributes.tooltipColor,\n\t\t\t\ttextAlign: attributes.textAlign,\n\t\t\t\t'--floating-tooltip-transform': floatingTooltipTransform,\n\t\t\t}\"\n\t\t\t>{{ propValue && !attributes.floatingTooltip ? \"\" : attributes.tooltip }}</label\n\t\t>\n\t</div>\n</template>\n\n<script>\nimport { computed, inject, ref, Ref, ComputedRef, watch, PropType, onMounted, onUnmounted, nextTick } from \"vue\";\n\nimport { xoneAttributesHandler, PropAttributes } from \"../../composables/XoneAttributesHandler\";\nimport { XoneDataObject } from \"../../composables/appData/core/XoneDataObject\";\nimport xoneUI from \"../../composables/XoneUI\";\nimport LinkedSearchInline from \"./LinkedSearchInline.vue\";\nimport Checkbox from \"./inputComponents/Checkbox.vue\";\nimport { XoneControl, XoneView } from \"../../composables/XoneViewsHandler\";\nimport { getAppPath } from \"../../composables/helperFunctions/ImageHelper\";\n\nexport default {\n\tcomponents: { Checkbox, LinkedSearchInline },\n\tprops: {\n\t\t/** xoneDataObject\n\t\t * @type {PropType<XoneDataObject>}\n\t\t */\n\t\txoneDataObject: { type: Object, required: true },\n\t\t/** attributes\n     @type {PropType<PropAttributes>} \n     */\n\t\tattributes: { type: Object, required: true },\n\t\tisDisableEdit: { type: Boolean, required: true },\n\t\tcheckboxSize: { type: Number, default: null },\n\t\tcontrolWidth: { type: Number, default: 0 },\n\t\tcontrolHeight: { type: Number, default: 0 },\n\t\tinputType: { type: String, default: \"text\" },\n\t},\n\tsetup(props) {\n\t\t/**\n\t\t * Get editInRow=\"false\" if prop is in contents\n\t\t * @type {import('../../composables/AppDataHandler').Objectinfo}\n\t\t */\n\t\tconst objectInfo = inject(\"objectInfo\");\n\n\t\tconst editInRow = objectInfo?.editInRow;\n\n\t\t/**\n\t\t * Numeric step if property is float\n\t\t * @type {ComputedRef<string>}\n\t\t */\n\t\tconst numberStep = computed(() => {\n\t\t\tif (props.attributes.type.length === 2 && props.attributes.type[0] === \"N\") {\n\t\t\t\tconst n = parseInt(props.attributes.type[1]);\n\t\t\t\treturn isNaN(n) ? \"\" : `.${Array(n).join(\"0\")}1`;\n\t\t\t}\n\t\t\treturn \"\";\n\t\t});\n\n\t\t/**\n\t\t * Is linked property\n\t\t * @type {ComputedRef<boolean>}\n\t\t */\n\t\tconst isLinked = computed(() => {\n\t\t\treturn props.attributes.linkedTo && props.attributes.linkedTo !== \"\" && props.attributes.linkedField && props.attributes.linkedField !== \"\";\n\t\t});\n\n\t\t// show / hide linked search modal\n\t\tconst isLinkedSearchVisible = ref(false);\n\n\t\t//\n\t\t// item selected from the linked search\n\t\tconst onSelectedItem = ({ mapValue, value }) => {\n\t\t\t// Assign value to map prop\n\t\t\tprops.xoneDataObject.changeModelValue(props.attributes.linkedTo, mapValue);\n\t\t\t// Assing value to prop\n\t\t\tpropValue.value = value;\n\t\t};\n\n\t\t/**\n\t\t * prop model value\n\t\t * @type {Ref<any>}\n\t\t */\n\t\tconst propValue = ref();\n\n\t\tonMounted(() => onChangeModelValue(props.xoneDataObject.model[props.attributes.name]));\n\n\t\t/**\n\t\t * textAreaElement\n\t\t * @type {Ref<HTMLElement|null>}\n\t\t */\n\t\tconst textAreaElement = ref();\n\n\t\tnextTick(() => fitGrowTextArea());\n\n\t\t//\n\t\t//Adjust textarea element height auto\n\t\tconst fitGrowTextArea = async () => {\n\t\t\tif (!props.attributes.multiLine) return;\n\t\t\tif (!textAreaElement.value) return;\n\t\t\tif (props.attributes.height !== \"grow\" && props.attributes.height !== \"auto\") return;\n\n\t\t\tawait nextTick();\n\t\t\ttextAreaElement.value.style.height = \"1px\";\n\t\t\ttextAreaElement.value.style.height = textAreaElement.value.scrollHeight + \"px\";\n\n\t\t\tawait new Promise((resolve) => setTimeout(() => resolve(), 50));\n\n\t\t\tif (textAreaElement.value?.scrollHeight === 0 || textAreaElement.value?.clientHeight !== textAreaElement.value?.scrollHeight) fitGrowTextArea();\n\t\t};\n\n\t\t// Get appData model value\n\t\twatch(\n\t\t\t() => props.xoneDataObject.model[props.attributes.name],\n\t\t\t(newValue) => onChangeModelValue(newValue)\n\t\t);\n\n\t\t// On Model Value Changed\n\t\tconst onChangeModelValue = (newValue) => {\n\t\t\ttry {\n\t\t\t\tfitGrowTextArea();\n\n\t\t\t\tif (props.attributes.type.startsWith(\"D\")) {\n\t\t\t\t\t/**\n\t\t\t\t\t * value\n\t\t\t\t\t * @type {Date}\n\t\t\t\t\t */\n\t\t\t\t\tconst value = newValue;\n\t\t\t\t\tif (!value) return;\n\t\t\t\t\tpropValue.value = value.toXoneDate(props.attributes.type);\n\t\t\t\t}\n\t\t\t\t// TODO: Cambiar esto. Ahora gestiono el enconding BASE64 desde el UI, de momento la maquinaria tiene un bug por el que devuelve a la UI la codificacin con carcteres extra\n\t\t\t\telse if (props.attributes.type === \"X\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tpropValue.value = atob(newValue);\n\t\t\t\t\t} catch {\n\t\t\t\t\t\tpropValue.value = newValue;\n\t\t\t\t\t}\n\t\t\t\t} else if (propValue.value !== newValue) propValue.value = newValue;\n\t\t\t} catch (ex) {\n\t\t\t\tconsole.error(ex);\n\t\t\t}\n\t\t};\n\n\t\t// Last key pressed\n\t\tlet keyPressed = \"\";\n\t\tlet isExecutingAction = false;\n\n\t\tconst onKeyPress = ({ key }) => {\n\t\t\tif (key !== \"Enter\") return;\n\t\t\t// set Last key\n\t\t\tkeyPressed = key;\n\t\t\t// Execute oneditaction\n\t\t\tif (props.attributes.onEditorAction && !isExecutingAction) {\n\t\t\t\tisExecutingAction = true;\n\t\t\t\txoneAttributesHandler\n\t\t\t\t\t.executeMethod(props.attributes.onEditorAction, props.xoneDataObject)\n\t\t\t\t\t.catch(console.error)\n\t\t\t\t\t.finally(() => (isExecutingAction = false));\n\t\t\t}\n\t\t\t// Execute binded event in script\n\t\t\txoneAttributesHandler.executeBindedEvent(props.xoneDataObject, props.attributes, \"oneditoraction\", {});\n\t\t};\n\n\t\t// Update appData model value\n\t\tconst onInput = async ({ target }) => {\n\t\t\tconst oldValue = propValue.value;\n\t\t\tconst newValue = target.value;\n\t\t\t// In mobile keypress does not work\n\t\t\tif (!keyPressed || keyPressed === \"Unidentified\") {\n\t\t\t\tif (newValue.includes(oldValue)) keyPressed = newValue.replace(oldValue, \"\");\n\t\t\t}\n\n\t\t\t// propValue.value = target.value;\n\t\t\tif (props.xoneDataObject[props.attributes.name] === newValue) return;\n\n\t\t\ttry {\n\t\t\t\t// Update data model\n\t\t\t\tif (props.attributes.type.startsWith(\"D\")) {\n\t\t\t\t\tprops.xoneDataObject.changeModelValue(props.attributes.name, new Date(newValue));\n\t\t\t\t}\n\t\t\t\t// TODO: Cambiar esto. Ahora gestiono el enconding BASE64 desde el UI, de momento la maquinaria tiene un bug por el que devuelve a la UI la codificacin con carcteres extra\n\t\t\t\telse if (props.attributes.type === \"X\") {\n\t\t\t\t\tprops.xoneDataObject.changeModelValue(props.attributes.name, btoa(newValue));\n\t\t\t\t} else props.xoneDataObject.changeModelValue(props.attributes.name, newValue);\n\n\t\t\t\ttry {\n\t\t\t\t\tif (props.attributes.onTextChanged)\n\t\t\t\t\t\tawait props.xoneDataObject.DoRunScriptAsync(\n\t\t\t\t\t\t\t`let e = { target: '${props.attributes.name}', objItem: '${props.attributes.name}', newText: '${newValue}', oldText: '${oldValue}', keyPressed: '${keyPressed}' };\n                  \t\t\t${props.attributes.onTextChanged}`\n\t\t\t\t\t\t);\n\t\t\t\t} catch (ex) {\n\t\t\t\t\txoneUI.showSnackbar({\n\t\t\t\t\t\ttext: ex,\n\t\t\t\t\t\tcolor: \"red\",\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// Execute binded event in script\n\t\t\t\tawait xoneAttributesHandler.executeBindedEvent(props.xoneDataObject, props.attributes, \"ontextchanged\", {\n\t\t\t\t\tnewText: newValue,\n\t\t\t\t\toldText: oldValue,\n\t\t\t\t\tkeyPressed,\n\t\t\t\t});\n\t\t\t} catch (ex) {\n\t\t\t\tconsole.error(ex);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * on value change\n\t\t */\n\t\tconst onChange = async () => {\n\t\t\ttry {\n\t\t\t\tif (editInRow && objectInfo.autosave) {\n\t\t\t\t\tawait props.xoneDataObject.save();\n\t\t\t\t}\n\t\t\t} catch (ex) {\n\t\t\t\txoneUI.showSnackbar({\n\t\t\t\t\ttext: ex,\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * xoneView\n\t\t * @type {XoneView}\n\t\t */\n\t\tconst xoneView = inject(\"xoneView\");\n\t\tonMounted(() => {\n\t\t\t// Add control to view\n\t\t\txoneView.addControl(new XoneControl(props.attributes.name, inputElement.value || textAreaElement.value));\n\t\t});\n\n\t\t// Check if an input is focused in order to handle keyboard in mobile devices\n\t\tconst isInputFocused = inject(\"isInputFocused\");\n\n\t\tonUnmounted(() => (isInputFocused.value = false));\n\n\t\t/**\n\t\t * on focus changed\n\t\t */\n\t\tconst onFocusChanged = async (isFocused) => {\n\t\t\ttry {\n\t\t\t\tisInputFocused.value = isFocused;\n\t\t\t\tif (props.attributes.onFocusChanged)\n\t\t\t\t\tawait props.xoneDataObject.DoRunScriptAsync(\n\t\t\t\t\t\t`let e = { target: '${props.attributes.name}',objItem: '${props.attributes.name}',isFocused: ${isFocused} };\n            ${props.attributes.onFocusChanged}`\n\t\t\t\t\t);\n\t\t\t} catch (ex) {\n\t\t\t\txoneUI.showSnackbar({\n\t\t\t\t\ttext: ex,\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t});\n\t\t\t}\n\t\t\t// Execute binded event in script\n\t\t\tawait xoneAttributesHandler.executeBindedEvent(props.xoneDataObject, props.attributes, \"onfocuschanged\", { isFocused });\n\t\t};\n\n\t\t/**\n\t\t * Window Size\n\t\t * @type {{containerHeight: Ref<number>|ComputedRef<number>, containerWidth: Ref<number>|ComputedRef<number>}}\n\t\t */\n\t\tconst { containerHeight, containerWidth } = inject(\"containerSize\");\n\t\twatch(\n\t\t\t() => containerHeight.value,\n\t\t\t() => fitGrowTextArea()\n\t\t);\n\t\twatch(\n\t\t\t() => containerWidth.value,\n\t\t\t() => fitGrowTextArea()\n\t\t);\n\n\t\t/**\n\t\t * floating tooltip on focus transform\n\t\t * @type {ComputedRef<string|null>}\n\t\t */\n\t\tconst floatingTooltipTransform = computed(() => {\n\t\t\tif (!props.attributes.floatingTooltip) return null; // Not floating prop\n\t\t\tif (props.controlHeight && props.controlHeight !== 0)\n\t\t\t\t// Is floating and returns control height\n\t\t\t\treturn `translate3d(-.5rem, calc(${\n\t\t\t\t\t// Is floating and returns default value\n\t\t\t\t\t(-1 * props.controlHeight) / 2\n\t\t\t\t}px + .4rem), 0)`;\n\t\t\treturn \"translate3d(-.5rem, -1.5rem, 0)\";\n\t\t});\n\n\t\t/**\n\t\t * linkedSearchElement\n\t\t * @type {Ref<HTMLElement>}\n\t\t */\n\t\tconst linkedSearchElement = ref();\n\n\t\t/**\n\t\t * inputElement\n\t\t * @type {Ref<HTMLElement>}\n\t\t */\n\t\tconst inputElement = ref();\n\n\t\tconst linkedSearchPosition = ref();\n\n\t\tconst onLinkedSearchButtonClick = () => {\n\t\t\tcalculateLinkedSearchButtonPosition();\n\t\t\tisLinkedSearchVisible.value = true;\n\t\t};\n\n\t\tconst onAttachButtonClick = () => xoneUI.pickFile(props.attributes.name, props.attributes.allowedExtensions);\n\n\t\tconst calculateLinkedSearchButtonPosition = () => {\n\t\t\tif (!linkedSearchElement.value) return;\n\n\t\t\tconst element = inputElement.value || textAreaElement.value;\n\n\t\t\tlinkedSearchPosition.value = {\n\t\t\t\ttop: linkedSearchElement.value.getBoundingClientRect().top,\n\t\t\t\tleft: linkedSearchElement.value.getBoundingClientRect().left - (window.innerWidth - containerWidth.value) / 2,\n\t\t\t\twidth: element.offsetWidth - linkedSearchElement.value.offsetWidth - 40,\n\t\t\t\theight: element.offsetHeight,\n\t\t\t};\n\t\t};\n\n\t\tconst onLabelClick = () => {\n\t\t\tif (!props.attributes.type === \"NC\") return;\n\t\t\tif (propValue.value === 0) propValue.value = 1;\n\t\t\telse propValue.value = 0;\n\t\t\tprops.xoneDataObject.changeModelValue(props.attributes.name, propValue.value);\n\t\t};\n\n\t\treturn {\n\t\t\tnumberStep,\n\t\t\tisLinked,\n\t\t\tisLinkedSearchVisible,\n\t\t\tonSelectedItem,\n\t\t\tpropValue,\n\t\t\tobjectInfo,\n\t\t\ttextAreaElement,\n\t\t\tonInput,\n\t\t\tonChange,\n\t\t\tonFocusChanged,\n\t\t\tonKeyPress,\n\t\t\tfloatingTooltipTransform,\n\t\t\tonLinkedSearchButtonClick,\n\t\t\tonAttachButtonClick,\n\t\t\tlinkedSearchElement,\n\t\t\tinputElement,\n\t\t\tlinkedSearchPosition,\n\t\t\tappPath: getAppPath(),\n\t\t\tonLabelClick,\n\t\t};\n\t},\n};\n</script>\n\n<style scoped>\n* {\n\tfont-weight: var(--text-weight);\n}\n\n/* label container */\n.xone-input-label {\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\theight: 100%;\n\n\t/* border-radius: 3px; */\n}\n\n/* prepend label */\n.xone-title {\n\tdisplay: inline-block;\n\twidth: 100%;\n\tflex-grow: 1;\n\tvertical-align: middle;\n\theight: auto;\n\tdisplay: flex;\n\talign-items: flex-start;\n\tmargin: 5px;\n}\n\n/* input */\n.xone-input-container {\n\tdisplay: flex;\n\tposition: relative;\n\talign-items: center;\n\tflex-grow: 1;\n\tflex-shrink: 2;\n}\n\ninput,\ntextarea {\n\tflex-grow: 1;\n\tflex-shrink: 2;\n\tborder: 1px solid var(--border-color);\n\twidth: 12rem;\n\tresize: none;\n\tbackground-color: var(--input-bgcolor);\n\tcolor: var(--input-forecolor);\n\tpadding-top: var(--padding-top);\n\tpadding-right: var(--padding-right);\n\tpadding-bottom: var(--padding-bottom);\n\tpadding-left: var(--padding-left);\n}\n\ninput:focus,\ntextarea:focus {\n\toutline: none;\n}\n\n.xone-input {\n\tposition: absolute;\n\tright: 0;\n\tbackground-color: transparent;\n\tborder: none;\n\tbackground-image: var(--image-showinline);\n\tbackground-repeat: no-repeat;\n\tbackground-position: center;\n\toutline: none;\n\twidth: 30px;\n\theight: 30px;\n\tpadding: 10px 20px;\n}\n\n.xone-input-linked {\n\tbackground-size: 16px 16px;\n}\n\n.xone-input-attach {\n\tbackground-size: 20px 20px;\n}\n\n.xone-input-linked:hover {\n\tcursor: pointer;\n\tborder-radius: 3px;\n}\n\n.noEditInRow {\n\tcursor: pointer;\n\tpointer-events: none;\n}\n\n.nobordertop {\n\tborder-top: 0;\n}\n\n.noborderright {\n\tborder-right: 0;\n}\n\n.noborderbottom {\n\tborder-bottom: 0;\n}\n\n.noborderleft {\n\tborder-left: 0;\n}\n\n/* tooltip */\n.xone-tooltip {\n\tposition: absolute;\n\tpadding: 7px 0 0 13px;\n\ttransition: all 200ms;\n\topacity: 0.5;\n\tflex-grow: 0;\n\tfont-size: 0.8rem;\n\theight: auto;\n\tpointer-events: none;\n\n\tpadding-top: var(--padding-top);\n\tpadding-right: var(--padding-right);\n\tpadding-bottom: var(--padding-bottom);\n\tpadding-left: var(--padding-left);\n}\n\n.float {\n\ttop: auto;\n}\n\n.nofloat {\n\ttop: auto;\n\twidth: 100%;\n}\n\ninput:focus + .float,\ninput:valid + .float,\n.linked-input-fill {\n\tfont-size: 0.8rem;\n\ttransform: var(--floating-tooltip-transform);\n\topacity: 1;\n}\n\ninput:focus + .nofloat,\ninput:valid + .nofloat {\n\topacity: 0;\n}\n\ninput[type=\"number\"]::-webkit-inner-spin-button:disabled,\ninput[type=\"date\"]::-webkit-inner-spin-button:disabled,\ninput[type=\"time\"]::-webkit-inner-spin-button:disabled,\ninput[type=\"datetime-local\"]::-webkit-inner-spin-button:disabled {\n\t-webkit-appearance: none;\n}\n\ninput[type=\"number\"]:disabled,\ninput[type=\"date\"]:disabled,\ninput[type=\"time\"]:disabled,\ninput[type=\"datetime-local\"]:disabled {\n\t-moz-appearance: textfield;\n}\n</style>\n","<template>\n\t<teleport to=\"body\">\n\t\t<div class=\"xone-linked-container\" @click=\"!isMouseOnInput && onHide()\">\n\t\t\t<div\n\t\t\t\tref=\"divElement\"\n\t\t\t\t:style=\"{\n\t\t\t\t\t'--linked-search-max-height': `calc(${containerHeight}px - 50%)`,\n\t\t\t\t\t'--linked-search-max-width': `calc(${maxWidthPosition})`,\n\t\t\t\t\t'--linked-search-min-width': linkedSearchPosition.width + 'px',\n\t\t\t\t\t'--linked-search-table-min-width': linkedSearchPosition.width - (elementHasScroll ? 7 : 0) + 'px',\n\t\t\t\t\t'--linked-search-min-height': '25px',\n\t\t\t\t\t'--linked-search-right-position': rightPosition,\n\t\t\t\t\t'--linked-search-top-position': rows.length === 0 ? linkedSearchPosition.top + 'px' : topPosition,\n\t\t\t\t\toverflow: rows.length === 0 ? 'hidden' : null,\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<!-- <p>{{ attributes.title ? attributes.title : \"\" }}</p> -->\n\t\t\t\t<!--v-if=\"attributes.showInlineKeyboard\"-->\n\n\t\t\t\t<input\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t'--image-search-placeholder': `url(${appPath}/assets/search-placeholder.png)`,\n\t\t\t\t\t}\"\n\t\t\t\t\t@input=\"({ target }) => (filterModel = target.value)\"\n\t\t\t\t\t:value=\"filterModel\"\n\t\t\t\t\t@focus=\"onFocus\"\n\t\t\t\t\t@blur=\"onBlur\"\n\t\t\t\t\t@click=\"onFilterSelected\"\n\t\t\t\t\t@mouseover=\"isMouseOnInput = true\"\n\t\t\t\t\t@mouseleave=\"isMouseOnInput = false\"\n\t\t\t\t/>\n\t\t\t\t<table v-show=\"rows.length !== 0\">\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<template class=\"xone-linked-row\" v-for=\"(rowItem, iRows) in filteredRows\" :key=\"`rowItem${iRows}`\">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\tv-for=\"(column, iColumns) in rowItem\"\n\t\t\t\t\t\t\t\t\t:key=\"`columnItem${iColumns}`\"\n\t\t\t\t\t\t\t\t\t@click=\"onSelectedItem(column)\"\n\t\t\t\t\t\t\t\t\t:style=\"{ textAlign: column.textAlign }\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ column.value }}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t</teleport>\n</template>\n\n<script>\nimport { inject, Ref, PropType, ref, ComputedRef, onMounted, nextTick, watch, onUnmounted, computed } from \"vue\";\n\nimport { xoneAttributesHandler, PropAttributes } from \"../../composables/XoneAttributesHandler\";\nimport { XoneDataObject } from \"../../composables/appData/core/XoneDataObject\";\nimport { XoneDataCollection } from \"../../composables/appData/core/XoneDataCollection\";\nimport AppDataHandler from \"../../composables/AppDataHandler\";\nimport { getAppPath } from \"../../composables/helperFunctions/ImageHelper\";\n\nexport default {\n\tname: \"LinkedSearchInline\",\n\temits: [\"onHide\", \"onSelectedItem\"],\n\tprops: {\n\t\t/** xoneDataObject\n\t\t * @type {PropType<XoneDataObject>}\n\t\t */\n\t\txoneDataObject: { type: Object, required: true },\n\t\t/** attributes\n     @type {PropType<PropAttributes>} \n     */\n\t\tattributes: { type: Object, required: true },\n\n\t\tlinkedSearchPosition: { type: Object, required: true },\n\t},\n\tsetup(props, context) {\n\t\tconst filterModel = ref(\"\");\n\n\t\tconst isMouseOnInput = ref(false);\n\t\t/**\n\t\t * Window Size\n\t\t * @type {{containerWidth: Ref<number>|ComputedRef<number>, containerHeight: Ref<number>|ComputedRef<number>}}\n\t\t */\n\t\tconst { containerWidth, containerHeight } = inject(\"containerSize\");\n\n\t\t// Close modal\n\t\tconst onHide = () => context.emit(\"onHide\");\n\n\t\t/**\n\t\t * @type {Ref<boolean>}\n\t\t */\n\t\tconst isInputFocused = inject(\"isInputFocused\");\n\n\t\t// onFocus\n\t\tconst onFocus = () => (isInputFocused.value = true);\n\n\t\t// onBlur\n\t\tconst onBlur = () => (isInputFocused.value = false);\n\n\t\t// On filter selected\n\t\tconst onFilterSelected = (e) => {\n\t\t\tisMouseOnInput.value = true;\n\t\t\te.preventDefault();\n\t\t\tsetTimeout(() => (isMouseOnInput.value = false), 500);\n\t\t};\n\n\t\t// Select an item\n\t\tconst onSelectedItem = (item) => context.emit(\"onSelectedItem\", item);\n\t\t//\n\t\t// Map attributes\n\t\tconst mapColValues = props.xoneDataObject.getFieldPropertyValue(props.attributes.linkedTo, \"mapcol-values\");\n\t\tconst mapCol = props.xoneDataObject.getFieldPropertyValue(props.attributes.linkedTo, \"mapcol\");\n\t\tlet mapFld = props.xoneDataObject.getFieldPropertyValue(props.attributes.linkedTo, \"mapfld\");\n\t\tconst mapFilter = props.xoneDataObject.getFieldPropertyValue(props.attributes.linkedTo, \"filter\");\n\t\tconst mapLinkFilter = props.xoneDataObject.getFieldPropertyValue(props.attributes.linkedTo, \"linkfilter\");\n\n\t\t// calculate rows to display on grid\n\t\tconst rows = ref([]);\n\n\t\t// filter rows\n\t\tconst filteredRows = computed(() => {\n\t\t\tif (!filterModel.value) return rows.value;\n\n\t\t\treturn rows.value.filter((e) => {\n\t\t\t\tlet res = false;\n\t\t\t\te.forEach((element) => {\n\t\t\t\t\tif (res) return;\n\t\t\t\t\tres = element.value\n\t\t\t\t\t\t.toString()\n\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t.includes(filterModel.value.toLowerCase());\n\t\t\t\t});\n\n\t\t\t\treturn res;\n\t\t\t});\n\t\t});\n\n\t\tonMounted(async () => {\n\t\t\ttry {\n\t\t\t\tawait nextTick();\n\t\t\t\tsetPosition();\n\t\t\t\t//\n\t\t\t\t// mapcol-values\n\n\t\t\t\tif (mapColValues) {\n\t\t\t\t\tsetTimeout(async () => {\n\t\t\t\t\t\tawait nextTick();\n\t\t\t\t\t\tsetPosition();\n\t\t\t\t\t});\n\t\t\t\t\tconst data = mapColValues.split(\",\");\n\t\t\t\t\treturn (rows.value = data.map((e) => [{ mapValue: data.indexOf(e), value: e }]));\n\t\t\t\t}\n\n\t\t\t\t//\n\t\t\t\t// mapcol && mapfld\n\n\t\t\t\t/**\n\t\t\t\t * Create XoneDataObject\n\t\t\t\t * @type {XoneDataCollection}\n\t\t\t\t */\n\t\t\t\tconst xoneDataCollection = await AppDataHandler.getAppData().getCollection(mapCol);\n\n\t\t\t\t// Layout\n\t\t\t\tconst props = [];\n\n\t\t\t\t/**\n\t\t\t\t * @type {function(object):PropAttributes[]}\n\t\t\t\t */\n\t\t\t\tconst getControlProps = (control) => {\n\t\t\t\t\tcontrol.controls?.forEach((e) => {\n\t\t\t\t\t\tconst propAttributes = xoneAttributesHandler.getPropAttributes(e.attributes);\n\t\t\t\t\t\tif (propAttributes.node === \"group\" || propAttributes.node === \"frame\") getControlProps(e);\n\t\t\t\t\t\tif (propAttributes.node !== \"prop\") return;\n\t\t\t\t\t\tif (propAttributes.type.startsWith(\"T\") || propAttributes.type.startsWith(\"N\")) props.push(propAttributes);\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tgetControlProps(xoneDataCollection.getLayout(8));\n\n\t\t\t\t// Apply linkfilter & filter\n\t\t\t\tif (mapLinkFilter) xoneDataCollection.setLinkFilter(mapLinkFilter);\n\t\t\t\txoneDataCollection.setFilter(mapFilter);\n\n\t\t\t\t// Data\n\t\t\t\tawait xoneDataCollection.startBrowse();\n\n\t\t\t\trows.value = [];\n\t\t\t\twhile (xoneDataCollection.getCurrentItem()) {\n\t\t\t\t\tconst obj = xoneDataCollection.getCurrentItem();\n\t\t\t\t\trows.value.push(\n\t\t\t\t\t\tprops.map((/** @type {PropAttributes} */ e) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tmapValue: obj[mapFld],\n\t\t\t\t\t\t\t\tvalue: obj[e.name],\n\t\t\t\t\t\t\t\ttextAlign: e.textAlign,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\n\t\t\t\t\tawait xoneDataCollection.moveNext();\n\t\t\t\t}\n\t\t\t\txoneDataCollection.clear();\n\t\t\t\tawait nextTick();\n\t\t\t\tsetPosition();\n\t\t\t} catch (ex) {\n\t\t\t\tconsole.error(ex);\n\t\t\t}\n\t\t});\n\n\t\t//\n\t\t// Manage dialog position\n\t\t/**\n\t\t * @type {Ref<HTMLElement>}\n\t\t */\n\t\tconst divElement = ref();\n\n\t\tconst rightPosition = ref((window.innerWidth - containerWidth.value) / 2 + containerWidth.value - props.linkedSearchPosition.left);\n\t\tconst topPosition = ref(props.linkedSearchPosition.top + \"px\");\n\t\tconst maxWidthPosition = ref(props.linkedSearchPosition.width + \"px\");\n\t\tconst heightPosition = ref(props.linkedSearchPosition.height + \"px\");\n\t\tconst elementHasScroll = ref(false);\n\n\t\twatch(\n\t\t\t() => filterModel.value,\n\t\t\tasync () => {\n\t\t\t\tawait nextTick();\n\t\t\t\tsetPosition();\n\t\t\t}\n\t\t);\n\n\t\tconst setPosition = async () => {\n\t\t\tif (!divElement.value) return;\n\t\t\tawait nextTick();\n\t\t\t// Right\n\t\t\tlet right = (window.innerWidth - containerWidth.value) / 2 + containerWidth.value - props.linkedSearchPosition.left;\n\n\t\t\tif (window.innerWidth - divElement.value.scrollWidth > right) rightPosition.value = `${right}px`;\n\t\t\telse if (window.client > divElement.value.scrollWidth) rightPosition.value = `${window.innerWidth - divElement.value.scrollWidth}px`;\n\t\t\telse {\n\t\t\t\tright = 15;\n\t\t\t\trightPosition.value = \"15px\";\n\t\t\t}\n\t\t\t// Top\n\t\t\tif (divElement.value.offsetHeight <= containerHeight.value - props.linkedSearchPosition.top)\n\t\t\t\ttopPosition.value = `${props.linkedSearchPosition.top - 15}px`;\n\t\t\telse topPosition.value = `calc(100vh - 5% - ${divElement.value.offsetHeight - 15}px)`;\n\t\t\tif (rows.value.length == 0) return;\n\t\t\t// Height\n\t\t\theightPosition.value = divElement.value.offsetHeight + \"px\";\n\t\t\t// Width\n\t\t\tmaxWidthPosition.value = `${window.innerWidth - right - 15}px`;\n\t\t\telementHasScroll.value = divElement.value.scrollHeight > divElement.value.clientHeight;\n\t\t};\n\n\t\tonMounted(() => window.addEventListener(\"resize\", setPosition));\n\t\tonUnmounted(() => window.removeEventListener(\"resize\", setPosition));\n\t\twatch(\n\t\t\t() => containerWidth.value,\n\t\t\t() => onHide()\n\t\t);\n\t\twatch(\n\t\t\t() => containerHeight.value,\n\t\t\t() => onHide()\n\t\t);\n\n\t\treturn {\n\t\t\tfilterModel,\n\t\t\tisMouseOnInput,\n\t\t\tcontainerWidth,\n\t\t\tcontainerHeight,\n\t\t\telementHasScroll,\n\t\t\tonHide,\n\t\t\tonFocus,\n\t\t\tonBlur,\n\t\t\tonFilterSelected,\n\t\t\tonSelectedItem,\n\t\t\trows,\n\t\t\tfilteredRows,\n\t\t\tdivElement,\n\t\t\trightPosition,\n\t\t\ttopPosition,\n\t\t\theightPosition,\n\t\t\tmaxWidthPosition,\n\t\t\tappPath: getAppPath(),\n\t\t};\n\t},\n};\n</script>\n\n<style scoped>\n.xone-linked-container {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\theight: 100vh;\n\twidth: 100vw;\n\tbackground-color: rgba(0, 0, 0, 0.15);\n\tanimation: fadeIn 0.5s;\n\toverflow: hidden;\n\tz-index: 9999;\n}\n\n.xone-linked-container > div {\n\tposition: absolute;\n\tdisplay: flex;\n\tflex-direction: column;\n\tborder: 1px gray solid;\n\tbackground-color: white;\n\tborder-radius: 3px;\n\toverflow-y: auto;\n\toverflow-x: auto;\n\tflex-shrink: 1;\n\tmax-width: var(--linked-search-max-width);\n\tmax-height: var(--linked-search-max-height);\n\tmin-width: var(--linked-search-min-width);\n\tmin-height: var(--linked-search-min-height);\n\tright: var(--linked-search-right-position);\n\ttop: var(--linked-search-top-position);\n\tanimation: fadeIn 0.3s;\n\ttransition: all 0.3s;\n}\n\n/* p {\n  margin: 10px;\n  font-weight: bold;\n  font-size: 1rem;\n} */\n\ntable {\n\t/* flex-shrink: 1; */\n\t/* align-self: flex-end; */\n\ttable-layout: fixed;\n\tborder-collapse: collapse;\n\tmax-width: var(--linked-search-max-width);\n\tmax-height: var(--linked-search-max-height);\n\tmin-width: var(--linked-search-table-min-width);\n\tmin-height: var(--linked-search-min-height);\n\tanimation: fadeIn 0.3s;\n\t/* width: fit-content; */\n}\n\ntd {\n\tpadding: 5px 10px 5px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\twidth: fit-content;\n\twhite-space: nowrap;\n}\n\ntr {\n\twhite-space: nowrap;\n}\n\ntr:hover {\n\tcursor: pointer;\n\tbackground-color: rgba(0, 0, 0, 0.14);\n}\n\nth {\n\tposition: -webkit-sticky;\n\tposition: sticky;\n\ttop: 0;\n\tz-index: 2;\n\twidth: fit-content;\n\ttext-align: left;\n}\n\n.xone-search-header:hover {\n\tbackground: white;\n}\n\ninput {\n\tposition: sticky;\n\ttop: 0;\n\tmax-width: var(--linked-search-max-width);\n\tmin-width: var(--linked-search-table-min-width);\n\tmax-height: var(--linked-search-max-height);\n\tpadding: 5px;\n\tborder: none;\n\tbackground-color: white;\n\tbackground-image: var(--image-search-placeholder);\n\tbackground-repeat: no-repeat;\n\tbackground-position: left;\n\tpadding-left: 30px;\n\tbackground-size: 32px 32px;\n}\n</style>\n","import { render } from \"./LinkedSearchInline.vue?vue&type=template&id=37329dfa&scoped=true\"\nimport script from \"./LinkedSearchInline.vue?vue&type=script&lang=js\"\nexport * from \"./LinkedSearchInline.vue?vue&type=script&lang=js\"\n\nimport \"./LinkedSearchInline.vue?vue&type=style&index=0&id=37329dfa&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-37329dfa\"]])\n\nexport default __exports__","<template>\n\t<div\n\t\tv-if=\"!attributes.imgChecked && !attributes.imgUnchecked\"\n\t\t:style=\"{\n\t\t\tpadding: '0',\n\t\t\t//height: 'var(--label-height)',\n\t\t\t// Align\n\t\t\talignItems: attributes.labelAlign,\n\t\t\t'--checkbox-size': checkboxSize ? `${checkboxSize}px` : `calc(4px + ${attributes.fontSize})`,\n\t\t}\"\n\t>\n\t\t<input\n\t\t\tv-if=\"!attributes.isRadio\"\n\t\t\tref=\"checkboxElement\"\n\t\t\t:disabled=\"isDisabled\"\n\t\t\t:checked=\"xoneDataObject.model[attributes.name] === 1\"\n\t\t\t@change=\"onCheckboxCheckedChange()\"\n\t\t\ttype=\"checkbox\"\n\t\t/>\n\n\t\t<input\n\t\t\tv-else\n\t\t\tref=\"radioElement\"\n\t\t\t:disabled=\"isDisabled\"\n\t\t\ttype=\"radio\"\n\t\t\t:name=\"`${attributes.radioGroup}-${breadcrumbId}${objectIndex}`\"\n\t\t\t:prop=\"attributes.name\"\n\t\t\t:checked=\"xoneDataObject.model[attributes.name] === 1\"\n\t\t\t@change=\"onRadioCheckedChange()\"\n\t\t/>\n\t</div>\n\t<button\n\t\tv-else\n\t\t:disabled=\"isDisabled\"\n\t\t@click=\"onCheckboxCheckedChange()\"\n\t\t:style=\"{\n\t\t\t// Size\n\t\t\twidth: imageSize.width ? `${imageSize.width}px` : (attributes.width !== undefined && '100%') || attributes.fieldSize,\n\t\t\theight: imageSize.height ? `${imageSize.height}px` : (controlHeight && `${controlHeight - 11}px`) || '30px',\n\t\t\t// Background Image\n\t\t\tbackgroundImage: `url(${\n\t\t\t\tisDisabled || attributes.locked\n\t\t\t\t\t? xoneDataObject.model[attributes.name] == 1\n\t\t\t\t\t\t? backgroundImageCheckedDisabled || backgroundImageChecked\n\t\t\t\t\t\t: backgroundImageUncheckedDisabled || backgroundImageUnchecked\n\t\t\t\t\t: xoneDataObject.model[attributes.name] == 1\n\t\t\t\t\t? backgroundImageChecked\n\t\t\t\t\t: backgroundImageUnchecked\n\t\t\t})`,\n\t\t\t// Disableedit / Locked appearance\n\t\t\topacity: changeOpacity && attributes.disableEdit && attributes.disableEdit !== '' && isDisabled ? 0.4 : 1,\n\t\t}\"\n\t></button>\n</template>\n\n<script>\nimport { Ref, ComputedRef, PropType, computed, ref, reactive, inject, onMounted } from \"vue\";\n\nimport { xoneAttributesHandler, PropAttributes } from \"../../../composables/XoneAttributesHandler\";\nimport { XoneDataObject } from \"../../../composables/appData/core/XoneDataObject\";\nimport { getAppPath, getImagePath } from \"../../../composables/helperFunctions/ImageHelper\";\n\nexport default {\n\tprops: {\n\t\t/** xoneDataObject\n\t\t * @type {PropType<XoneDataObject>}\n\t\t */\n\t\txoneDataObject: { type: Object, required: true },\n\n\t\t/** attributes\n     @type {PropType<PropAttributes>} \n     */\n\t\tattributes: { type: Object, required: true },\n\n\t\tisDisabled: { type: Boolean, required: true },\n\n\t\tcontrolWidth: { type: Number, default: 0 },\n\n\t\tcontrolHeight: { type: Number, default: 0 },\n\n\t\tcheckboxSize: { type: Number, default: null },\n\t},\n\tsetup(props) {\n\t\t/** @type {Ref<HTMLInputElement>} */\n\t\tconst checkboxElement = ref();\n\n\t\t/** @type {Ref<HTMLInputElement>} */\n\t\tconst radioElement = ref();\n\n\t\tconst breadcrumbId = inject(\"breadcrumbId\");\n\n\t\t/**\n\t\t * Get editInRow=\"false\" if prop is in contents\n\t\t * @type {import('../../../composables/AppDataHandler').Objectinfo}\n\t\t */\n\t\tconst objectInfo = inject(\"objectInfo\");\n\n\t\tconst objectIndex = objectInfo.isContents ? objectInfo.recordIndex : \"\";\n\n\t\t/**\n\t\t * on value change\n\t\t */\n\t\tconst onChange = async () => {\n\t\t\ttry {\n\t\t\t\tif (objectInfo?.editInRow && objectInfo.autosave) {\n\t\t\t\t\tawait props.xoneDataObject.save();\n\t\t\t\t}\n\t\t\t} catch (ex) {\n\t\t\t\txoneUI.showSnackbar({\n\t\t\t\t\ttext: ex,\n\t\t\t\t\tcolor: \"red\",\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tconst onCheckboxCheckedChange = () => {\n\t\t\tprops.xoneDataObject.changeModelValue(\n\t\t\t\tprops.attributes.name,\n\t\t\t\tprops.xoneDataObject.model[props.attributes.name] === 0 || !props.xoneDataObject.model[props.attributes.name] ? 1 : 0\n\t\t\t);\n\t\t\tonChange();\n\t\t};\n\n\t\tconst onRadioCheckedChange = () => {\n\t\t\tprops.xoneDataObject.changeModelValue(props.attributes.name, radioElement.value.checked ? 1 : 0);\n\t\t\tdocument.querySelectorAll(`[name='${props.attributes.radioGroup}-${breadcrumbId}${objectIndex}']`).forEach(\n\t\t\t\t/** @type {HTMLInputElement} */ (e) => {\n\t\t\t\t\tif (e === radioElement.value) return;\n\t\t\t\t\tprops.xoneDataObject.changeModelValue(e.getAttribute(\"prop\"), 0);\n\t\t\t\t}\n\t\t\t);\n\t\t\tonChange();\n\t\t};\n\n\t\t/**\n\t\t * Scale Factor\n\t\t * @type {{widthFactor: ComputedRef<number>, heightFactor: ComputedRef<number>}}\n\t\t */\n\t\tconst { widthFactor, heightFactor } = inject(\"scaleFactor\");\n\n\t\tconst imageSize = reactive({\n\t\t\twidth: computed(() => xoneAttributesHandler.getScaledSize(props.attributes.imgWidth, props.containerWidth, widthFactor.value)),\n\t\t\theight: computed(() =>\n\t\t\t\txoneAttributesHandler.getScaledSize(\n\t\t\t\t\tprops.attributes.imgHeight, // offset height\n\t\t\t\t\tprops.containerHeight,\n\t\t\t\t\theightFactor.value\n\t\t\t\t)\n\t\t\t),\n\t\t});\n\n\t\tconst backgroundImageChecked = ref(`${getAppPath()}/icons/${props.attributes.imgChecked}`);\n\t\tconst backgroundImageUnchecked = ref(`${getAppPath()}/icons/${props.attributes.imgUnchecked}`);\n\t\tconst backgroundImageCheckedDisabled = ref(`${getAppPath()}/icons/${props.attributes.imgCheckedDisabled}`);\n\t\tconst backgroundImageUncheckedDisabled = ref(`${getAppPath()}/icons/${props.attributes.imgUncheckedDisabled}`);\n\n\t\tonMounted(() => {\n\t\t\tgetImagePath(props.attributes.imgChecked, \"icons\").then((value) => (backgroundImageChecked.value = value));\n\t\t\tgetImagePath(props.attributes.imgUnchecked, \"icons\").then((value) => (backgroundImageUnchecked.value = value));\n\t\t\tgetImagePath(props.attributes.imgCheckedDisabled, \"icons\").then((value) => (backgroundImageCheckedDisabled.value = value));\n\t\t\tgetImagePath(props.attributes.imgUncheckedDisabled, \"icons\").then((value) => (backgroundImageUncheckedDisabled.value = value));\n\n\t\t\tif (backgroundImageCheckedDisabled.value || backgroundImageUncheckedDisabled.value) changeOpacity.value = false;\n\t\t});\n\n\t\tconst changeOpacity = ref(true);\n\n\t\treturn {\n\t\t\tcheckboxElement,\n\t\t\tradioElement,\n\t\t\tbreadcrumbId,\n\t\t\tobjectIndex,\n\t\t\timageSize,\n\t\t\tbackgroundImageChecked,\n\t\t\tbackgroundImageUnchecked,\n\t\t\tonChange,\n\t\t\tonCheckboxCheckedChange,\n\t\t\tonRadioCheckedChange,\n\t\t\tbackgroundImageCheckedDisabled,\n\t\t\tbackgroundImageUncheckedDisabled,\n\t\t\tchangeOpacity,\n\t\t};\n\t},\n};\n</script>\n\n<style scoped>\ndiv,\ncolumn {\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: var(--frame-align-column);\n}\n\ninput[type=\"checkbox\"],\ninput[type=\"radio\"] {\n\tmargin: 3px 0;\n\tflex-shrink: 0;\n\tflex-grow: 0;\n\talign-self: flex-start;\n\tcursor: pointer;\n\twidth: var(--checkbox-size);\n\theight: var(--checkbox-size);\n}\n\nbutton {\n\tcursor: pointer;\n\toutline: none;\n\tbackground-repeat: no-repeat;\n\tbackground-position: center;\n\tbackground-size: contain;\n\tborder: none;\n\tbackground-color: transparent;\n\t-webkit-transition: background-image 0.3s;\n\ttransition: background-image 0.3s;\n}\n</style>\n","import { render } from \"./Checkbox.vue?vue&type=template&id=20e563e6&scoped=true\"\nimport script from \"./Checkbox.vue?vue&type=script&lang=js\"\nexport * from \"./Checkbox.vue?vue&type=script&lang=js\"\n\nimport \"./Checkbox.vue?vue&type=style&index=0&id=20e563e6&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-20e563e6\"]])\n\nexport default __exports__","import { render } from \"./Input.vue?vue&type=template&id=6d5764e8&scoped=true\"\nimport script from \"./Input.vue?vue&type=script&lang=js\"\nexport * from \"./Input.vue?vue&type=script&lang=js\"\n\nimport \"./Input.vue?vue&type=style&index=0&id=6d5764e8&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6d5764e8\"]])\n\nexport default __exports__","<template>\n\t<!-- Image -->\n\t<img\n\t\tdraggable=\"false\"\n\t\tref=\"imgElement\"\n\t\tv-if=\"attributes.readOnly && imgPath\"\n\t\talt=\"\"\n\t\tloading=\"lazy\"\n\t\t:src=\"imgPath\"\n\t\t:class=\"{ 'keep-aspect-ratio': attributes.keepAspectRatio }\"\n\t/>\n\t<!-- Signature -->\n\t<canvas\n\t\tv-if=\"!attributes.readOnly || attributes.type === 'DR'\"\n\t\tref=\"signElement\"\n\t\t:width=\"controlWidth\"\n\t\t:height=\"controlHeight\"\n\t\t:style=\"{\n\t\t\tposition: attributes.type === 'DR' && 'absolute',\n\t\t\tbackgroundColor: attributes.type === 'DR' && 'transparent',\n\t\t}\"\n\t\tclass=\"xone-signature\"\n\t></canvas>\n\t<div v-if=\"!attributes.readOnly\" class=\"xone-clear-signature\">\n\t\t<button @click=\"clearCanvas()\"></button>\n\t</div>\n</template>\n\n<script>\nimport { inject, nextTick, onMounted, PropType, ref, Ref, watch, watchEffect } from \"vue\";\nimport { PropAttributes, xoneAttributesHandler } from \"../../composables/XoneAttributesHandler\";\nimport { XoneDataObject } from \"../../composables/appData/core/XoneDataObject\";\nimport SignaturePad from \"signature_pad\";\nimport { getAppPath, getImagePath } from \"../../composables/helperFunctions/ImageHelper\";\nimport { XoneControl, XoneView } from \"../../composables/XoneViewsHandler\";\nexport default {\n\tprops: {\n\t\t/** xoneDataObject\n     @type {PropType<XoneDataObject>} \n     */\n\t\txoneDataObject: { type: Object, required: true },\n\t\t/** attributes\n\t\t * @type { PropType<PropAttributes>}\n\t\t */\n\t\tattributes: { type: Object, required: true },\n\t\tcontrolWidth: { type: Number, default: 0 },\n\t\tcontrolHeight: { type: Number, default: 0 },\n\t\tcontainerWidth: { type: Number, default: 0 },\n\t\tcontainerHeight: { type: Number, default: 0 },\n\t},\n\tsetup(props) {\n\t\t/**\n\t\t * prop model value\n\t\t * @type {Ref<any>}\n\t\t */\n\t\tlet propValue = ref();\n\n\t\t// Get appData model value\n\t\twatchEffect(() => {\n\t\t\tif (props.xoneDataObject?.model) propValue.value = props.xoneDataObject?.model[props.attributes.name];\n\t\t});\n\n\t\tconst imgPath = ref();\n\n\t\t/**\n\t\t * imgElement\n\t\t * @type {Ref<HTMLElement>}\n\t\t */\n\t\tconst imgElement = ref();\n\n\t\tconst fitSizeToContainer = () => {\n\t\t\tconst doFit = () => {\n\t\t\t\txoneAttributesHandler.fitHeightToContainer(props.attributes, imgElement);\n\t\t\t\txoneAttributesHandler.fitWidthToContainer(props.attributes, imgElement);\n\t\t\t};\n\t\t\tsetTimeout(() => doFit(), 100);\n\t\t\tdoFit();\n\t\t};\n\n\t\twatchEffect(async () => {\n\t\t\tif (propValue.value) {\n\t\t\t\timgPath.value = await getImagePath(propValue.value, \"files\");\n\t\t\t}\n\t\t\tif (props.attributes.image && props.attributes.image !== \"\") {\n\t\t\t\timgPath.value = await getImagePath(props.attributes.image, \"icons\");\n\t\t\t}\n\t\t\tfitSizeToContainer();\n\t\t});\n\n\t\t/**\n\t\t * sign\n\t\t * @type {Ref<HTMLElement>}\n\t\t */\n\t\tconst signElement = ref();\n\n\t\t/**\n\t\t * signaturePad\n\t\t * @type {SignaturePad}\n\t\t */\n\t\tlet signaturePad;\n\n\t\tonMounted(() => {\n\t\t\tif (!signElement.value) return;\n\t\t\tsignElement.value.setAttribute(\"swipeable\", false);\n\t\t\tsignaturePad = new SignaturePad(signElement.value);\n\t\t});\n\n\t\tconst clearCanvas = () => {\n\t\t\tif (!signaturePad) return;\n\t\t\tsignaturePad.clear();\n\t\t};\n\n\t\t/**\n\t\t * Last breadcrumb in stack\n\t\t * @type {ComputedRef<import('../../composables/AppDataHandler').Breadcrumb>}\n\t\t */\n\t\tconst lastBreadcrumb = inject(\"lastBreadcrumb\");\n\n\t\t/**\n\t\t * breadcrumbId\n\t\t * @type {string}\n\t\t */\n\t\tconst breadcrumbId = inject(\"breadcrumbId\");\n\n\t\twatchEffect(() => {\n\t\t\tif (breadcrumbId === lastBreadcrumb?.value?.id) fitSizeToContainer();\n\t\t});\n\n\t\tnextTick(() => {\n\t\t\twatch(\n\t\t\t\t() => props.containerWidth,\n\t\t\t\t() => fitSizeToContainer()\n\t\t\t);\n\t\t\twatch(\n\t\t\t\t() => props.containerHeight,\n\t\t\t\t() => fitSizeToContainer()\n\t\t\t);\n\t\t});\n\n\t\t// if selected group is current group fit size to container\n\t\t/**\n\t\t * groupId\n\t\t * @type {number}\n\t\t */\n\t\tconst groupId = inject(\"groupId\");\n\n\t\t/**\n\t\t * activeGroup\n\t\t * @type {Ref<number>}\n\t\t */\n\t\tconst { activeGroup } = inject(\"groupHandler\");\n\n\t\twatch(\n\t\t\t() => activeGroup.value,\n\t\t\t(newValue) => {\n\t\t\t\tif (groupId !== newValue) return;\n\t\t\t\tfitSizeToContainer();\n\t\t\t}\n\t\t);\n\n\t\t/**\n\t\t * xoneView\n\t\t * @type {XoneView}\n\t\t */\n\t\tconst xoneView = inject(\"xoneView\");\n\n\t\tconst xoneControl = new XoneControl(props.attributes.name, imgElement.value || signElement.value);\n\t\tonMounted(() => {\n\t\t\txoneControl.clearDrawing = clearCanvas;\n\n\t\t\t// Add control to view\n\t\t\txoneView.addControl(xoneControl);\n\t\t});\n\n\t\treturn { imgElement, imgPath, signElement, clearCanvas };\n\t},\n};\n</script>\n\n<style scoped>\n/* Image */\nimg,\ncanvas {\n\tbox-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\t-webkit-box-sizing: border-box;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-repeat: no-repeat;\n\tbackground-position: center;\n\tanimation: fadeIn 0.3s;\n}\n\n.keep-aspect-ratio {\n\tobject-fit: contain;\n}\n\n.xone-signature {\n\tdisplay: block;\n\tcursor: pointer;\n\tbackground-color: white;\n\tborder-radius: 5px;\n\tbox-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px rgba(0, 0, 0, 0.14), 0 1px 10px rgba(0, 0, 0, 0.12);\n}\n\n.xone-clear-signature {\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n}\n\nbutton {\n\tpadding: 10px;\n}\n</style>\n","import { render } from \"./Image.vue?vue&type=template&id=38cafe8b&scoped=true\"\nimport script from \"./Image.vue?vue&type=script&lang=js\"\nexport * from \"./Image.vue?vue&type=script&lang=js\"\n\nimport \"./Image.vue?vue&type=style&index=0&id=38cafe8b&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-38cafe8b\"]])\n\nexport default __exports__","<template>\n\t<div\n\t\tref=\"contentsElement\"\n\t\tclass=\"xone-contents\"\n\t\t:class=\"{ 'xone-gridview': isGridView, 'xone-slideview': isSlideView }\"\n\t\t:style=\"{\n\t\t\t// Size\n\t\t\theight: !attributes.height || attributes.height === 'auto' ? 'auto' : (controlHeight && `${controlHeight}px`) || 'auto',\n\t\t\tmaxWidth: attributes.viewMode === 'picturemap' && `${controlWidth}px`,\n\t\t\tflexGrow: attributes.width === 'grow' ? 1 : null,\n\t\t\t// Background\n\t\t\tbackgroundColor: attributes.bgColor,\n\t\t\t// is GridView? -> define columns\n\t\t\t'grid-template-columns': isGridView && gridTemplateColumns,\n\t\t\t// Animation if is contents 'TreeView'\n\t\t\tanimation: isContents && 'slideDown 0.3s',\n\t\t\t// Set variables\n\t\t\t'--contents-width': `${controlWidth}px`,\n\t\t\t'--contents-height': `${controlHeight}px`,\n\t\t\t'--contents-max-height': `${fitHeight ? `calc(${fitHeight}px - var(--margin-bottom))` : null}`,\n\t\t\t// New web-layout / routerview Container Size\n\t\t\t'--app-width': (isRouterView && controlWidth && `${controlWidth - 2}px`) || 'auto',\n\t\t\t'--app-height': (isRouterView && controlHeight && `${controlHeight - 2}px`) || 'auto',\n\t\t\toverflow: isRouterView || isChartView ? 'hidden' : null,\n\t\t\tflexWrap: attributes.wrap ? 'wrap' : null,\n\t\t\tpaddingBottom: attributes.viewMode || isLoading || isContents ? null : '100px',\n\t\t}\"\n\t\t@scroll=\"onScroll\"\n\t>\n\t\t<router-view v-if=\"isRouterView\"></router-view>\n\t\t<!-- Map View -->\n\t\t<Map\n\t\t\tv-if=\"isMapView\"\n\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t:controlHeight=\"fitHeight || controlHeight\"\n\t\t\t:controlWidth=\"controlWidth\"\n\t\t\t:attributes=\"attributes\"\n\t\t></Map>\n\t\t<!-- Calendar View -->\n\t\t<Calendar\n\t\t\tv-else-if=\"isCalendarView\"\n\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t:controlHeight=\"fitHeight || controlHeight\"\n\t\t\t:controlWidth=\"controlWidth\"\n\t\t\t:attributes=\"attributes\"\n\t\t></Calendar>\n\t\t<!-- Calendar View -->\n\t\t<PictureMap\n\t\t\t:style=\"{\n\t\t\t\t'--contents-height': `${fitHeight || controlHeight}px`,\n\t\t\t}\"\n\t\t\tv-else-if=\"isPictureMapView\"\n\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t:controlHeight=\"fitHeight || controlHeight\"\n\t\t\t:controlWidth=\"controlWidth\"\n\t\t\t:attributes=\"attributes\"\n\t\t></PictureMap>\n\t\t<!-- Chart View -->\n\t\t<template v-else-if=\"isChartView\">\n\t\t\t<ChartBar\n\t\t\t\tv-if=\"isChartBar\"\n\t\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t\t:controlHeight=\"fitHeight || controlHeight\"\n\t\t\t\t:controlWidth=\"controlWidth\"\n\t\t\t\t:attributes=\"attributes\"\n\t\t\t>\n\t\t\t</ChartBar>\n\t\t\t<ChartPie\n\t\t\t\tv-else-if=\"isChartPie\"\n\t\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t\t:controlHeight=\"fitHeight || controlHeight\"\n\t\t\t\t:controlWidth=\"controlWidth\"\n\t\t\t\t:attributes=\"attributes\"\n\t\t\t>\n\t\t\t</ChartPie>\n\t\t\t<div v-else style=\"color: #1f3c6e; background: #4cabd5; padding: 10px\">\n\t\t\t\tXOne -> Not implemented chart type, please contact to desarrollador@xone.es\n\t\t\t</div>\n\t\t</template>\n\t\t<!-- Other Contents -->\n\t\t<template v-else v-for=\"rowInfo in contentsRowsInfo\" :key=\"`${breadcrumbId}-${attributes.name}-${rowInfo.id}`\">\n\t\t\t<ContentsRow\n\t\t\t\t:rowInfo=\"rowInfo\"\n\t\t\t\t:controlWidth=\"isGridView ? controlWidth / attributes.galleryColumns : controlWidth\"\n\t\t\t\t:controlHeight=\"fitHeight || controlHeight\"\n\t\t\t\t:attributes=\"attributes\"\n\t\t\t\t:isSlideView=\"isSlideView\"\n\t\t\t\t:isDisableEdit=\"isDisableEdit\"\n\t\t\t\t:isExpanView=\"isExpanView\"\n\t\t\t\t:rowsLength=\"rowsLength\"\n\t\t\t></ContentsRow>\n\t\t</template>\n\t\t<!-- Loader -->\n\t\t<div v-if=\"isLoading && !isMapView && !isCalendarView && !isChartView && !isPictureMapView\" class=\"xone-loader\">\n\t\t\t<div></div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { computed, inject, onMounted, provide, ref, Ref, ComputedRef, watchEffect, PropType, onUnmounted, watch, nextTick } from \"vue\";\n// Components\nimport ContentsRow from \"../propComponents/contentsComponents/ContentsRow.vue\";\nimport Map from \"../propComponents/contentsComponents/Map.vue\";\nimport Calendar from \"../propComponents/contentsComponents/Calendar.vue\";\nimport ChartBar from \"../propComponents/contentsComponents/ChartBar.vue\";\nimport ChartPie from \"../propComponents/contentsComponents/ChartPie.vue\";\nimport PictureMap from \"../propComponents/contentsComponents/PictureMap.vue\";\n// Composables\nimport { XoneDataObject } from \"../../composables/appData/core/XoneDataObject\";\nimport { XoneDataCollection } from \"../../composables/appData/core/XoneDataCollection\";\nimport { PropAttributes, xoneAttributesHandler } from \"../../composables/XoneAttributesHandler\";\nimport { XoneControl, XoneView } from \"../../composables/XoneViewsHandler\";\nimport { ContentsLoaderHelper } from \"../../composables/ContentsLoaderHandler\";\nimport { generateUniqueId } from \"../../composables/helperFunctions/StringHelper\";\n\nexport default {\n\tname: \"Contents\",\n\tprops: {\n\t\t/**\n\t\t * xoneDataObject\n\t\t * @type {PropType<XoneDataObject>}\n\t\t * */\n\t\txoneDataObject: { type: Object, required: true },\n\t\t/**\n\t\t * attributes\n\t\t * @type { PropType<PropAttributes>}\n\t\t */\n\t\tattributes: { type: Object, default: null, required: true },\n\t\tisDisableEdit: { type: Boolean, required: true },\n\t\tcontrolHeight: { type: Number, default: 0 },\n\t\tcontrolWidth: { type: Number, default: 0 },\n\t},\n\tcomponents: {\n\t\tContentsRow,\n\t\tMap,\n\t\tChartBar,\n\t\tCalendar,\n\t\tChartPie,\n\t\tPictureMap,\n\t},\n\tsetup(props) {\n\t\t/** @type {import('../../composables/AppDataHandler').Objectinfo} */\n\t\tconst { isContents } = inject(\"objectInfo\");\n\n\t\t/**\n\t\t * Contents\n\t\t * @type {Ref<XoneDataCollection>}\n\t\t */\n\t\tconst contents = ref();\n\t\t// provide contents to child components\n\t\tprovide(\"contents\", contents);\n\n\t\t/**\n\t\t * xoneView\n\t\t * @type {XoneView}\n\t\t */\n\t\tconst xoneView = inject(\"xoneView\");\n\n\t\t// provide item to load to child components\n\t\tconst loadedRowsLength = ref(0);\n\t\tprovide(\"loadedRowsLength\", loadedRowsLength);\n\n\t\t/**\n\t\t * breadcrumbId\n\t\t * @type {string}\n\t\t */\n\t\tconst breadcrumbId = inject(\"breadcrumbId\");\n\n\t\t/**\n\t\t * contentsElement\n\t\t * @type {Ref<HTMLElement>}\n\t\t */\n\t\tconst contentsElement = ref();\n\n\t\t/**\n\t\t * Window Size\n\t\t * @type {{containerWidth: Ref<number>|ComputedRef<number>, containerHeight: Ref<number>|ComputedRef<number>}}\n\t\t */\n\t\tconst { containerWidth, containerHeight } = inject(\"containerSize\");\n\n\t\t/**\n\t\t * fit height\n\t\t * @type {Ref<number>}\n\t\t */\n\t\tconst fitHeight = ref();\n\n\t\t/**\n\t\t * Calculate and adjust height to parent container when height attribute is null or auto\n\t\t */\n\t\tconst fitHeightToContainer = async () => {\n\t\t\tif (props.attributes.viewMode === \"picturemap\") return;\n\t\t\tconst isSpecial = isMapView.value || isCalendarView.value || isChartView.value || isPictureMapView.value;\n\t\t\ttry {\n\t\t\t\tif (!contentsElement.value) return;\n\n\t\t\t\tif (isSpecial && (props.attributes.height ?? \"auto\") !== \"auto\" && (props.attributes.height ?? \"auto\") !== \"grow\")\n\t\t\t\t\treturn (fitHeight.value = null);\n\n\t\t\t\tif (!isSpecial && (props.attributes.height ?? \"auto\") !== \"grow\") return (fitHeight.value = null);\n\n\t\t\t\tlet top = contentsElement.value.parentElement.offsetTop;\n\n\t\t\t\tif (fitHeight.value !== props.controlHeight - top) {\n\t\t\t\t\tfitHeight.value = props.controlHeight - top;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t} catch {}\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tfitHeightToContainer();\n\t\t\tconst observerHeight = new ResizeObserver(() => fitHeightToContainer());\n\t\t\tobserverHeight.observe(contentsElement.value.parentNode);\n\t\t\tonUnmounted(() => observerHeight?.disconnect());\n\t\t});\n\n\t\t/**\n\t\t * selectedItem\n\t\t * @type {Ref<number>}\n\t\t */\n\t\tconst selectedItem = ref(null);\n\t\tprovide(\"selectedItem\", selectedItem);\n\n\t\t//\n\t\t// Data\n\n\t\tconst contentsLoaderHelper = new ContentsLoaderHelper(props.attributes.name, breadcrumbId, props.attributes.rowsPerPage);\n\t\tcontentsLoaderHelper.setPaginationSize(props.attributes.paginationSize);\n\n\t\tconst isLoading = contentsLoaderHelper.getIsLoading();\n\n\t\tonMounted(() => contentsLoaderHelper.bindOnScrollEvent(contentsElement.value));\n\t\tonUnmounted(() => contentsLoaderHelper?.clear());\n\n\t\tlet lastRefreshActionId = null;\n\n\t\t/**\n\t\t * LoadAll contents async\n\t\t */\n\t\tconst refresh = async (isFirstLoad = false) => {\n\t\t\t// Refresh only last refresh action\n\t\t\tconst refreshActionId = generateUniqueId();\n\t\t\tlastRefreshActionId = refreshActionId;\n\n\t\t\t// Wait last refresh ends\n\t\t\twhile (contents.value && isLoading.value) await new Promise((resolve) => setTimeout(() => resolve(), 100));\n\n\t\t\t// Check if refresh action is the last one called\n\t\t\tif (lastRefreshActionId !== refreshActionId) return;\n\n\t\t\ttry {\n\t\t\t\t// load contents\n\t\t\t\tif (!contents.value) contents.value = await props.xoneDataObject.getContents(props.attributes.contents);\n\n\t\t\t\t// dataCollectionLayout.value = contents.value.getLayout(4);\n\n\t\t\t\t// LoadAll\n\t\t\t\tawait contentsLoaderHelper.loadRows(contents.value, props.attributes, isFirstLoad);\n\n\t\t\t\tloadedRowsLength.value = 0;\n\t\t\t\t// Load Rows Info\n\t\t\t\tawait contentsLoaderHelper.loadRowsInfo();\n\t\t\t} catch (ex) {\n\t\t\t\tconsole.error(ex);\n\t\t\t}\n\t\t};\n\n\t\t/** @type {string} */\n\t\tconst groupId = inject(\"groupId\");\n\n\t\t/** @type {Ref<string>} */\n\t\tconst { activeGroup } = inject(\"groupHandler\");\n\n\t\tlet firstGroup;\n\n\t\t/** @type {Ref<boolean>} */\n\t\tconst isBeforeEditExecuted = inject(\"isBeforeEditExecuted\");\n\n\t\tonMounted(async () => {\n\t\t\t// Vamos a cargar el contents cuando su grupo sea el activo\n\t\t\tif (isMapView.value || isChartView.value || isCalendarView.value || isPictureMapView.value || isRouterView.value) return;\n\t\t\t// Create XoneControl\n\t\t\tconst xoneControl = new XoneControl(props.attributes.name, contentsElement.value);\n\t\t\t// refresh method\n\t\t\txoneControl.refresh = refresh;\n\t\t\t// refreshRow method\n\t\t\txoneControl.refreshRow = (index) => {\n\t\t\t\ttry {\n\t\t\t\t\tcontentsLoaderHelper.getContentsRowsInfo().value[index].refresh();\n\t\t\t\t} catch {}\n\t\t\t};\n\t\t\t// refreshSelectedRow method\n\t\t\txoneControl.refreshSelectedRow = () => {\n\t\t\t\ttry {\n\t\t\t\t\tcontentsLoaderHelper.getContentsRowsInfo().value[selectedItem.value].refresh();\n\t\t\t\t} catch {}\n\t\t\t};\n\t\t\t// scrollBy method\n\t\t\txoneControl.scrollBy = (value) => {\n\t\t\t\tif (!contentsElement.value) return;\n\t\t\t\tvalue = value.toString();\n\t\t\t\tconst { scrollHeight } = contentsElement.value;\n\t\t\t\tif (value.includes(\"%\"))\n\t\t\t\t\treturn contentsElement.value.scrollTo({\n\t\t\t\t\t\ttop: Number((value.replace(\"%\", \"\") * scrollHeight) / 100),\n\t\t\t\t\t\tbehavior: \"smooth\",\n\t\t\t\t\t});\n\t\t\t\tcontentsElement.value.scrollTo({\n\t\t\t\t\ttop: Number(value.replace(\"p\", \"\")),\n\t\t\t\t\tbehavior: \"smooth\",\n\t\t\t\t});\n\t\t\t};\n\t\t\t// scrollTo method\n\t\t\txoneControl.scrollTo = (index) => {\n\t\t\t\tconst element = document.getElementById(`${props.attributes.name.replace(\"@\", \"\")}${index}${breadcrumbId}`);\n\t\t\t\tif (element) xoneControl.scrollBy(element.offsetTop);\n\t\t\t};\n\t\t\t// ScrollToTop method\n\t\t\txoneControl.scrollToTop = () => xoneControl.scrollBy(0);\n\t\t\t// ScrollToBottom method\n\t\t\txoneControl.scrollToBottom = () => xoneControl.scrollBy(contentsElement.value.scrollHeight);\n\t\t\t// Add control to view\n\t\t\txoneView.addControl(xoneControl);\n\n\t\t\twhile (!isBeforeEditExecuted.value) await new Promise((resolve) => setTimeout(() => resolve(), 5));\n\n\t\t\twatchEffect(async () => {\n\t\t\t\t// Asignamos si el contents se encuentra en el grupo activo\n\t\t\t\tcontentsLoaderHelper.isInGroup = groupId === activeGroup.value;\n\n\t\t\t\tif (!firstGroup) firstGroup = activeGroup.value;\n\n\t\t\t\tif (contents.value || groupId !== activeGroup.value) return;\n\n\t\t\t\tif (groupId !== firstGroup) await new Promise((resolve) => setTimeout(() => resolve(), 350));\n\n\t\t\t\trefresh(true);\n\t\t\t});\n\t\t});\n\n\t\t// Clear Contents\n\t\tonUnmounted(() => {\n\t\t\tif (contents.value) contents.value.clear();\n\t\t\tcontentsLoaderHelper?.clear();\n\t\t});\n\n\t\t//\n\t\t//\n\t\t// Viewmodes\n\n\t\t//\n\t\t// viewmode gridview\n\t\tconst isGridView = computed(() => props.attributes.viewMode === \"gridview\" && !isNaN(props.attributes.galleryColumns));\n\n\t\tconst gridTemplateColumns = computed(() => {\n\t\t\tif (!isGridView.value) return;\n\n\t\t\treturn `repeat(${props.attributes.galleryColumns}, ${props.controlWidth / props.attributes.galleryColumns}px)`;\n\t\t});\n\n\t\t//\n\t\t// viewmode mapview\n\n\t\tconst isMapView = computed(() => props.attributes.viewMode === \"mapview\" || props.attributes.viewMode === \"openstreetmap\");\n\n\t\t//\n\t\t// viewmode slideview\n\n\t\tconst isSlideView = computed(() => props.attributes.viewMode === \"slideview\");\n\n\t\tonMounted(() => {\n\t\t\tif (isSlideView.value) {\n\t\t\t\tcontentsElement.value.style.pointerEvents = \"all\";\n\t\t\t\tcontentsElement.value.setAttribute(\"swipeable\", false);\n\t\t\t}\n\t\t});\n\n\t\t//\n\t\t// viewmode calendar\n\n\t\tconst isCalendarView = computed(() => props.attributes.viewMode === \"calendarview\");\n\n\t\t// autoslide\n\t\tlet autoslideInterval;\n\t\tlet currentSlideIndex = 0;\n\n\t\tonMounted(() => {\n\t\t\tif (isSlideView.value) {\n\t\t\t\twatch(\n\t\t\t\t\t() => loadedRowsLength.value,\n\t\t\t\t\tasync (newValue) => {\n\t\t\t\t\t\tif (newValue !== contents.value?.length) return;\n\t\t\t\t\t\tawait nextTick();\n\n\t\t\t\t\t\tif (props.attributes.autoslideDelay) {\n\t\t\t\t\t\t\tcontentsElement.value.scrollTo(0, 0);\n\t\t\t\t\t\t\t// create interval\n\t\t\t\t\t\t\tautoslideInterval = setInterval(() => {\n\t\t\t\t\t\t\t\tif (contentsLoaderHelper.getRowsLength() === 0) return;\n\n\t\t\t\t\t\t\t\tcurrentSlideIndex += 1;\n\t\t\t\t\t\t\t\tif (currentSlideIndex >= contentsLoaderHelper.getRowsLength()) currentSlideIndex = 0;\n\t\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t\t * Get element\n\t\t\t\t\t\t\t\t * @type {HTMLElement}\n\t\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\t\tconst element = document.getElementById(`${props.attributes.name.replace(\"@\", \"\")}${currentSlideIndex}${breadcrumbId}`);\n\t\t\t\t\t\t\t\tif (!element) return;\n\n\t\t\t\t\t\t\t\t// Scroll to element\n\t\t\t\t\t\t\t\tcontentsElement.value.scrollTo({\n\t\t\t\t\t\t\t\t\tleft: element.offsetLeft,\n\t\t\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\t\t\tbehavior: \"smooth\",\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}, props.attributes.autoslideDelay * 1000);\n\t\t\t\t\t\t} else contentsElement.value.scrollTo(0, 0);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\t// clear autoslide interval\n\t\tonUnmounted(() => {\n\t\t\tif (autoslideInterval) clearInterval(autoslideInterval);\n\t\t});\n\n\t\t//\n\t\t// viewmode chart\n\t\tconst isChartView = computed(() => props.attributes.viewMode && props.attributes.viewMode.toString().contains(\"chart\"));\n\n\t\tconst isChartBar = computed(\n\t\t\t() =>\n\t\t\t\tprops.attributes.viewMode === \"barchart\" ||\n\t\t\t\tprops.attributes.viewMode === \"3dbarchart\" ||\n\t\t\t\tprops.attributes.viewMode === \"stackedbarchart\" ||\n\t\t\t\tprops.attributes.viewMode === \"linechart\"\n\t\t);\n\n\t\tconst isChartPie = computed(() => props.attributes.viewMode === \"piechart\" || props.attributes.viewMode === \"piechart2\");\n\n\t\t//\n\t\t// viewmode picturemap\n\n\t\tconst isPictureMapView = computed(() => props.attributes.viewMode === \"picturemap\");\n\n\t\t//\n\t\t// viewmode Expan\n\n\t\tconst isExpanView = computed(() => props.attributes.viewMode === \"expanview\");\n\n\t\t// expan item selected\n\t\tprovide(\"onExpanItemSelected\", (rowInfo) => {\n\t\t\tif (rowInfo.isExpanded) return (rowInfo.isExpanded = false);\n\t\t\tcontentsLoaderHelper.getContentsRowsInfo().value.forEach((e) => (e.isExpanded = false));\n\t\t\trowInfo.isExpanded = true;\n\t\t});\n\n\t\t//\n\t\t// viewmode router-view\n\n\t\tconst isRouterView = computed(() => props.attributes.viewMode === \"routerview\" || props.attributes.viewMode === \"stacknavigation\");\n\n\t\tprovide(\"containerSize\", {\n\t\t\tcontainerWidth: props.attributes.viewMode === \"routerview\" ? computed(() => props.controlWidth - 2) : containerWidth,\n\t\t\tcontainerHeight: props.attributes.viewMode === \"routerview\" ? computed(() => props.controlHeight - 2) : containerHeight,\n\t\t});\n\n\t\tif (isRouterView.value) {\n\t\t\t//\n\t\t\t// Scale Factor\n\n\t\t\t/** @type {{appWidth: Ref<number>, appHeight:Ref<number>}} */\n\t\t\tconst { appWidth, appHeight } = inject(\"appSize\");\n\n\t\t\t/**\n\t\t\t * widthFactor\n\t\t\t * @type {ComputedRef<number>}\n\t\t\t */\n\t\t\tconst widthFactor = computed(() => (appWidth.value ? props.controlWidth / appWidth.value : 1));\n\n\t\t\t/**\n\t\t\t * heightFactor\n\t\t\t * @type {ComputedRef<number>}\n\t\t\t */\n\t\t\tconst heightFactor = computed(() => (appHeight.value ? props.controlHeight / appHeight.value : 1));\n\n\t\t\t// provide scaleFactor to child components\n\t\t\tprovide(\"scaleFactor\", { widthFactor, heightFactor });\n\t\t}\n\n\t\tif (isGridView.value || isSlideView.value) contentsLoaderHelper.rowsPerPage = 100;\n\n\t\t//\n\t\t// onScroll event\n\t\tlet scrollTimeout;\n\t\tconst onScroll = () => {\n\t\t\tif (scrollTimeout) clearTimeout(scrollTimeout);\n\t\t\tscrollTimeout = setTimeout(() => xoneAttributesHandler.onScrollEvent(contentsElement.value, props.attributes, props.xoneDataObject), 250);\n\t\t};\n\t\tnextTick(() => onScroll());\n\n\t\treturn {\n\t\t\tisContents,\n\t\t\tcontentsElement,\n\t\t\tfitHeight,\n\t\t\tcontentsRowsInfo: contentsLoaderHelper.getContentsRowsInfo(),\n\t\t\tisLoading,\n\t\t\tbreadcrumbId,\n\t\t\tisGridView,\n\t\t\tgridTemplateColumns,\n\t\t\tisMapView,\n\t\t\tisSlideView,\n\t\t\tisCalendarView,\n\t\t\tisChartView,\n\t\t\tisChartBar,\n\t\t\tisChartPie,\n\t\t\tisPictureMapView,\n\t\t\tisExpanView,\n\t\t\tisRouterView,\n\t\t\tonScroll,\n\t\t\trowsLength: computed(() => contentsLoaderHelper.getRowsLength()),\n\t\t};\n\t},\n};\n</script>\n\n<style scoped>\n.xone-contents {\n\tposition: relative;\n\tbox-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\t-webkit-box-sizing: border-box;\n\twidth: calc(100%);\n\theight: 100%;\n\t/* overflow-x: visible; */\n\toverflow-x: hidden;\n\toverflow-y: auto;\n\t/* transition: all 0.1s; */\n\tanimation: fadeIn 0.2s;\n\n\tmax-height: var(--contents-max-height);\n\tz-index: 1;\n}\n.xone-contents div {\n\tscroll-snap-align: start;\n}\n\n.xone-gridview {\n\tdisplay: grid;\n}\n\n.xone-slideview {\n\tdisplay: flex;\n\toverflow-x: auto;\n\toverflow-y: visible;\n\tscroll-snap-type: x mandatory;\n}\n</style>\n","<template>\n\t<div :id=\"`${attributes.name.replace('@', '')}${rowInfo.id}${breadcrumbId}`\" :class=\"['xone-contents-row', isSlideView && 'xone-slidesnap']\">\n\t\t<template v-if=\"isRowLoaded && xoneDataObject && control\">\n\t\t\t<!-- contents row -->\n\t\t\t<template v-if=\"rowInfo.visible || attributes.editInRow\"\n\t\t\t\t><!--   || rowsLength < 100 -->\n\t\t\t\t<!-- Quitamos del dom todo el objeto si tenemos ms de 300 registros, para mejorar rendimiento, de lo contrario lo hacemos no visible  -->\n\t\t\t\t<Container\n\t\t\t\t\tv-show=\"rowInfo.visible\"\n\t\t\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t\t\t:control=\"control\"\n\t\t\t\t\t:containerHeight=\"controlHeight\"\n\t\t\t\t\t:containerWidth=\"controlWidth\"\n\t\t\t\t\t:visibilityBit=\"4\"\n\t\t\t\t\t@click=\"onContentsRowClick\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\tbackgroundColor: backgroundColor,\n\t\t\t\t\t\tcursor: !attributes.editInRow && !attributes.locked && 'pointer',\n\t\t\t\t\t\tanimation: 'fadeIn 0.3s',\n\t\t\t\t\t}\"\n\t\t\t\t\t@onDataObjectChange=\"onDataObjectChange\"\n\t\t\t\t></Container>\n\t\t\t</template>\n\t\t\t<!-- expanview -->\n\t\t\t<template v-if=\"isExpanView && expanControl\">\n\t\t\t\t<Container\n\t\t\t\t\tv-show=\"rowInfo.isExpanded && rowInfo.visible\"\n\t\t\t\t\tclass=\"xone-expanded-row\"\n\t\t\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t\t\t:control=\"expanControl\"\n\t\t\t\t\t:containerHeight=\"controlHeight\"\n\t\t\t\t\t:containerWidth=\"controlWidth\"\n\t\t\t\t\t:visibilityBit=\"4\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\tbackgroundColor: backgroundColor,\n\t\t\t\t\t\tcursor: !attributes.editInRow && !attributes.locked && 'pointer',\n\t\t\t\t\t\tponiterEvents: !attributes.editInRow && !attributes.locked && 'all',\n\t\t\t\t\t}\"\n\t\t\t\t\t@onDataObjectChange=\"onDataObjectChange\"\n\t\t\t\t></Container>\n\t\t\t</template>\n\t\t</template>\n\t\t<div\n\t\t\tv-if=\"!isRowLoaded || !control || !xoneDataObject || !rowInfo.visible\"\n\t\t\t:style=\"{\n\t\t\t\twidth: rowInfo.width && rowInfo.width,\n\t\t\t\theight: rowInfo.height && rowInfo.height,\n\t\t\t}\"\n\t\t></div>\n\t</div>\n</template>\n\n<script>\nimport { computed, inject, onMounted, provide, ref, Ref, PropType, ComputedRef, watch } from \"vue\";\n\nimport AppDataHandler from \"../../../composables/AppDataHandler\";\nimport { XoneDataCollection } from \"../../../composables/appData/core/XoneDataCollection\";\nimport { XoneDataObject } from \"../../../composables/appData/core/XoneDataObject\";\nimport { xoneAttributesHandler, PropAttributes, ContainerAttributes } from \"../../../composables/XoneAttributesHandler\";\nimport XmlNode from \"../../../composables/appData/Xml/JSONImpl/XmlNode\";\nimport { RowInfo } from \"../../../composables/ContentsLoaderHandler\";\n\nexport default {\n\tname: \"ContentsRow\",\n\n\tprops: {\n\t\t/** @type {PropType<RowInfo>} */ rowInfo: { type: Object, required: true },\n\t\tcontrolHeight: { type: Number, default: 0 },\n\t\t/** @type {PropType<PropAttributes>} */ attributes: { type: Object, required: true },\n\t\tisDisableEdit: { type: Boolean, required: true },\n\t\tcontrolWidth: { type: Number, default: 0 },\n\t\tisSlideView: { type: Boolean, default: false },\n\t\tisExpanView: { type: Boolean, default: false },\n\t\trowsLength: { type: Number, default: 0 },\n\t},\n\n\tsetup(props) {\n\t\tconst isRowLoaded = ref(false);\n\n\t\t/**\n\t\t * Contents\n\t\t * @type {Ref<XoneDataCollection>}\n\t\t */\n\t\tconst contents = inject(\"contents\");\n\n\t\t/**\n\t\t * XoneDataObject\n\t\t * @type {Ref<XoneDataObject>}\n\t\t */\n\t\tconst xoneDataObject = ref(null);\n\n\t\t/**\n\t\t * Layout\n\t\t * @type {Ref<Object>}\n\t\t */\n\t\tconst layout = ref(null);\n\t\t// const layout = ref(inject(\"dataCollectionLayout\"));\n\n\t\t/**\n\t\t * Control attributes and childs layout\n\t\t * @type {ComputedRef<Array>}\n\t\t */\n\t\tconst control = computed(() =>\n\t\t\tlayout.value?.controls?.find((e) => {\n\t\t\t\tconst containerAttributes = xoneAttributesHandler.getContainerAttributes(e.attributes);\n\t\t\t\treturn containerAttributes.node === \"group\" && !containerAttributes.fixed && !containerAttributes.drawerOrientation;\n\t\t\t})\n\t\t);\n\n\t\t/**\n\t\t * selectedItem\n\t\t * @type {Ref<number>}\n\t\t */\n\t\tconst selectedItem = inject(\"selectedItem\");\n\n\t\tlet isOnContentsRowClickExecuting = false;\n\t\t/**\n\t\t * On Click contents row\n\t\t */\n\t\tconst onContentsRowClick = async () => {\n\t\t\t// is locked or is Edit in Row\n\t\t\tif (props.attributes.editInRow || props.attributes.locked || props.isDisableEdit) return;\n\n\t\t\tif (isOnContentsRowClickExecuting) return;\n\t\t\tisOnContentsRowClickExecuting = true;\n\t\t\t//\n\t\t\t// execute selecteditem node\n\t\t\ttry {\n\t\t\t\tif (await xoneDataObject.value.ExecuteNode(\"selecteditem\")) {\n\t\t\t\t\tisOnContentsRowClickExecuting = false;\n\t\t\t\t\tselectedItem.value = props.rowInfo.id;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} catch {}\n\t\t\t//\n\t\t\t// expanview\n\t\t\tif (props.isExpanView) {\n\t\t\t\tisOnContentsRowClickExecuting = false;\n\t\t\t\treturn onExpanItemSelected(props.rowInfo);\n\t\t\t}\n\t\t\t//\n\t\t\t// open edit view\n\t\t\tAppDataHandler.pushXoneDataObject(xoneDataObject.value);\n\t\t\tisOnContentsRowClickExecuting = false;\n\t\t};\n\n\t\t/**\n\t\t * Load contents row async\n\t\t */\n\t\tconst doLoadAsync = async (isFirstLoad = true) => {\n\t\t\tisRowLoaded.value = false;\n\n\t\t\t// Agrego esta proteccin para cubrirme de scripts mal optimizados que hacen constantes loadall y refresh de los controles, haca que en algn momento el datacollection no devolviese objeto\n\t\t\tfor (let i = 0; i < 10; i++) {\n\t\t\t\txoneDataObject.value = await contents.value.get(props.rowInfo.recordId || props.rowInfo.id);\n\t\t\t\tif (!xoneDataObject.value) {\n\t\t\t\t\tawait new Promise((resolve) => setTimeout(() => resolve(), 25));\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (!xoneDataObject.value) return;\n\t\t\t// if (!xoneDataObject.value?.ID) debugger;\n\t\t\tprops.rowInfo.setRecordId(xoneDataObject.value.ID);\n\n\t\t\t// IsFirstLoad -> increment loadedRowsLength\n\t\t\tif (isFirstLoad) loadedRowsLength.value++;\n\n\t\t\t// Si se hace un push del objeto tengo que realizar un clone para que dicho objeto no pierda reactividad, es el problema de injectar la dependencia cuando el objeto no se crea en el bloque del setup\n\t\t\tif (!props.attributes.editInRow) xoneDataObject.value.setCloneOnPush(true);\n\n\t\t\tisRowLoaded.value = true;\n\n\t\t\tawait getLayoutAsync();\n\n\t\t\t// Si es edit-inrow tengo que hacer el objeto reactivo en el Container, espero a que lo sea para ejecutar los nodos en onDataObjectChange\n\t\t\tif (props.attributes.editInRow) return;\n\n\t\t\t// Execute nodes\n\t\t\txoneDataObject.value.ExecuteNode(\"load\").catch(console.error);\n\t\t};\n\n\t\tconst getLayoutAsync = async () => {\n\t\t\tif (!xoneDataObject.value) return;\n\t\t\t// expanview Layout\n\t\t\tif (props.isExpanView) {\n\t\t\t\texpanLayout.value = await xoneDataObject.value.getLayoutAsync(1);\n\t\t\t}\n\t\t\t// Layout\n\t\t\tif (props.rowInfo.isFirstLoad) layout.value = xoneDataObject.value.getLayout(4);\n\t\t\telse layout.value = await xoneDataObject.value.getLayoutAsync(4);\n\t\t\txoneDataObject.value.setLayout(layout.value);\n\t\t};\n\n\t\t/**\n\t\t * Viewport size conditions sm / md / lg\n\t\t * @type {Ref<string>}\n\t\t */\n\t\tconst sizeConditions = inject(\"sizeConditions\");\n\n\t\t/** @type {boolean} */\n\t\tlet relayout = false;\n\n\t\twatch(\n\t\t\t() => sizeConditions.value,\n\t\t\t() => {\n\t\t\t\tif (props.rowInfo.visible) {\n\t\t\t\t\tgetLayoutAsync();\n\t\t\t\t\trelayout = false;\n\t\t\t\t} else relayout = true;\n\t\t\t}\n\t\t);\n\n\t\t/**\n\t\t * breadcrumbId\n\t\t * @type {string}\n\t\t */\n\t\tconst breadcrumbId = inject(\"breadcrumbId\");\n\n\t\t//\n\t\t// Load / Refresh Item\n\t\tconst loadedRowsLength = inject(\"loadedRowsLength\");\n\t\tonMounted(() => doLoadAsync().then(() => props.rowInfo.setRefresh(() => doLoadAsync(false))));\n\n\t\t// Provide contents info\n\t\tprovide(\"objectInfo\", {\n\t\t\tisContents: true,\n\t\t\teditInRow: props.attributes.editInRow,\n\t\t\tautosave: props.attributes.autosave,\n\t\t\trecordIndex: props.rowInfo.id,\n\t\t\trowInfo: props.rowInfo,\n\t\t});\n\n\t\tlet colorView;\n\t\tlet cellEvenColor;\n\t\tlet cellOddColor;\n\t\tlet cellSelectedBgColor;\n\n\t\t/**\n\t\t * m_xmlNode\n\t\t * @type {{m_xmlNode:XmlNode}}\n\t\t */\n\t\tconst { m_xmlNode } = contents.value;\n\n\t\tcellEvenColor = m_xmlNode.getAttrValue(\"cell-even-color\");\n\t\tcellOddColor = m_xmlNode.getAttrValue(\"cell-odd-color\");\n\t\tcellSelectedBgColor = m_xmlNode.getAttrValue(\"cell-selected-bgcolor\");\n\n\t\tm_xmlNode.SelectNodes(\"prop\").forEach((/** @type {XmlNode} */ e) => {\n\t\t\tif (e.getAttrValue(\"colorview\") === \"true\") colorView = e.getAttrValue(\"name\");\n\t\t\tif (e.getAttrValue(\"cell-selected-bgcolor\") === \"true\") colorView = e.getAttrValue(\"name\");\n\t\t});\n\n\t\t// Row background color\n\t\tconst backgroundColor = computed(() => {\n\t\t\tif (colorView && xoneDataObject.value) return xoneDataObject.value[colorView];\n\t\t\telse if (selectedItem.value && props.rowInfo.id === selectedItem.value && cellSelectedBgColor) return cellSelectedBgColor;\n\t\t\telse return Number(props.rowInfo.id) % 2 === 0 ? cellEvenColor : cellOddColor;\n\t\t});\n\n\t\t//\n\t\t// Expanview\n\t\tconst onExpanItemSelected = inject(\"onExpanItemSelected\");\n\n\t\t/**\n\t\t * Layout\n\t\t * @type {Ref<Object>}\n\t\t */\n\t\tconst expanLayout = ref(null);\n\n\t\t/**\n\t\t * Control attributes and childs layout\n\t\t * @type {ComputedRef<Array>}\n\t\t */\n\t\tconst expanControl = computed(() => {\n\t\t\tif (!props.isExpanView) return null;\n\t\t\treturn expanLayout.value?.controls?.find((e) => {\n\t\t\t\tconst containerAttributes = xoneAttributesHandler.getContainerAttributes(e.attributes);\n\t\t\t\treturn containerAttributes.node === \"group\" && !containerAttributes.fixed && !containerAttributes.drawerOrientation;\n\t\t\t});\n\t\t});\n\n\t\t// ExecuteNode onexpand / oncollapse\n\t\twatch(\n\t\t\t() => props.rowInfo.isExpanded,\n\t\t\t(newValue) => {\n\t\t\t\tif (!xoneDataObject.value) return;\n\t\t\t\tif (newValue) {\n\t\t\t\t\t// xoneDataObject.value.setLayout(expanLayout.value); creo que esto no hace falta\n\t\t\t\t\txoneDataObject.value.ExecuteNode(\"onexpand\").catch(console.error);\n\t\t\t\t} else {\n\t\t\t\t\t// xoneDataObject.value.setLayout(layout.value); creo que esto no hace falta\n\t\t\t\t\txoneDataObject.value?.ExecuteNode(\"oncollapse\").catch(console.error);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\treturn {\n\t\t\tisRowLoaded,\n\t\t\tcontrol,\n\t\t\txoneDataObject,\n\t\t\tonContentsRowClick,\n\t\t\tbreadcrumbId,\n\t\t\tbackgroundColor,\n\t\t\texpanControl,\n\t\t\tonDataObjectChange: (obj) => {\n\t\t\t\t// Execute nodes\n\t\t\t\tobj.ExecuteNode(\"load\").catch(console.error);\n\t\t\t\t// Assign dataObject\n\t\t\t\txoneDataObject.value = obj;\n\t\t\t},\n\t\t};\n\t},\n};\n</script>\n\n<style>\n.xone-contents-row {\n\talign-items: center;\n\tflex-shrink: 0;\n\tflex-grow: 0;\n\tposition: relative;\n\tanimation: fadeIn 0.5s;\n}\n\n.xone-slidesnap {\n\tscroll-snap-align: center;\n}\n</style>\n","import { render } from \"./ContentsRow.vue?vue&type=template&id=512f3888\"\nimport script from \"./ContentsRow.vue?vue&type=script&lang=js\"\nexport * from \"./ContentsRow.vue?vue&type=script&lang=js\"\n\nimport \"./ContentsRow.vue?vue&type=style&index=0&id=512f3888&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n\t<div :id=\"`map-${breadcrumbId}${objectIndex}`\" class=\"xone-map\" @click=\"showLayers = false\">\n\t\t<div class=\"xone-map-markers\" @mousewheel=\"onMouseWheel\">\n\t\t\t<div\n\t\t\t\tv-if=\"showMarkerButton\"\n\t\t\t\t:style=\"{\n\t\t\t\t\t'--image-layers': `url(${appPath}/assets/layers.png) no-repeat`,\n\t\t\t\t}\"\n\t\t\t\tclass=\"xone-marker-button\"\n\t\t\t>\n\t\t\t\t<button @click=\"onMarkerButtonClick\"></button>\n\t\t\t</div>\n\n\t\t\t<transition name=\"slide-fade\">\n\t\t\t\t<div class=\"xone-markers-list\" v-show=\"showLayers\" :style=\"{ maxHeight: `${controlHeight - 25}px` }\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tv-for=\"(layer, index) in keyLayers\"\n\t\t\t\t\t\t:key=\"`map-${index}`\"\n\t\t\t\t\t\t:class=\"{ 'xone-selected-marker': checkIsLayerSelected(layer) }\"\n\t\t\t\t\t\t@click=\"changeMapLayer(layer, $event)\"\n\t\t\t\t\t\t>{{ layer }}</a\n\t\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t</transition>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { computed, inject, onMounted, onUnmounted, PropType, ref, Ref, watch } from \"vue\";\n\nimport { PropAttributes } from \"../../../composables/XoneAttributesHandler\";\nimport { XoneDataObject } from \"../../../composables/appData/core/XoneDataObject\";\nimport { XoneDataCollection } from \"../../../composables/appData/core/XoneDataCollection\";\nimport { getDefaultMapLayer, getMapLayers, loadLeaflet, replaceLayerName } from \"../../../composables/helperFunctions/MapHelper\";\nimport { XoneControl, XoneView } from \"../../../composables/XoneViewsHandler\";\nimport { generateUniqueId } from \"../../../composables/helperFunctions/StringHelper\";\nimport { normalizeWebColor } from \"../../../composables/helperFunctions/ColorHelper\";\nimport { getAppPath } from \"../../../composables/helperFunctions/ImageHelper\";\n\nexport default {\n\tname: \"Map\",\n\tprops: {\n\t\t/**\n\t\t * xoneDataObject\n\t\t * @type {PropType<XoneDataObject>}\n\t\t * */\n\t\txoneDataObject: { type: Object, required: true },\n\t\t/**\n\t\t * attributes\n\t\t * @type { PropType<PropAttributes>}\n\t\t */\n\t\tattributes: { type: Object, default: null, required: true },\n\t\tcontrolWidth: { type: Number, default: 0 },\n\t\tcontrolHeight: { type: Number, default: 0 },\n\t},\n\tsetup(props) {\n\t\t// const api = `https://api.locationiq.com/v1/autocomplete.php?key=47616557e9fb47&q=santander&limit=5`;\n\n\t\t// const defaultIconUrl = \"/assets/marker-icon.png\";\n\t\t// const defaultShadowUrl = \"/assets/marker-shadow.png\";\n\n\t\t/**\n\t\t * breadcrumbId\n\t\t * @type {string}\n\t\t */\n\t\tconst breadcrumbId = inject(\"breadcrumbId\");\n\n\t\t/**\n\t\t * objectInfo\n\t\t * @type {import('../../../composables/AppDataHandler').Objectinfo}\n\t\t */\n\t\tconst objectInfo = inject(\"objectInfo\");\n\n\t\tconst objectIndex = objectInfo.isContents ? objectInfo.recordIndex : \"\";\n\n\t\t// tiles provider for leaflet\n\t\tconst mapLayers = ref({});\n\n\t\t/** @type {ComputedRef} */\n\t\tconst keyLayers = computed(() =>\n\t\t\tObject.entries(mapLayers.value)\n\t\t\t\t.filter(([, value]) => !value.onlyLabel && value.type === (props.attributes.viewMode === \"openstreetmap\" ? \"OSM\" : \"google\"))\n\t\t\t\t.map(([key]) => key)\n\t\t);\n\t\t// Map\n\t\tlet map;\n\n\t\t// Markers\n\t\tlet markers = [];\n\n\t\t// Lines\n\t\tconst polyLines = new Map();\n\n\t\t// Polygons\n\t\tconst polygons = new Map();\n\n\t\t// Routes\n\t\tconst routes = new Set();\n\n\t\t// Draw line\n\t\tconst drawLine = (name, color, lineStyle, ...pointList) => {\n\t\t\tconst points = [];\n\t\t\tfor (let i = 0; i < pointList.length; i += 2) {\n\t\t\t\tpoints.push(new L.LatLng(pointList[i], pointList[i + 1]));\n\t\t\t}\n\t\t\tlet dashArray = null;\n\t\t\tif (lineStyle === \"dashed\") dashArray = \"10, 15\";\n\t\t\telse if (lineStyle === \"dotted\") dashArray = \"1, 10\";\n\t\t\t// else if (lineStyle === \"mixed\") dashArray = \"10, 5, 1, 10\";\n\t\t\tconst firstpolyline = new L.Polyline(points, {\n\t\t\t\tcolor: normalizeWebColor(color),\n\t\t\t\tweight: 5,\n\t\t\t\topacity: 0.5,\n\t\t\t\tsmoothFactor: 1,\n\t\t\t\tdashArray,\n\t\t\t});\n\t\t\tif (polyLines.get(name)) name = generateUniqueId();\n\t\t\tpolyLines.set(name, firstpolyline);\n\t\t\tfirstpolyline.addTo(map);\n\t\t};\n\n\t\t// Draw area\n\t\tconst drawArea = ({ id, data, color, fillcolor, pattern, width }) => {\n\t\t\tconst points = [];\n\t\t\tdata.forEach((e) => {\n\t\t\t\tconst dataCoords = e.split(\",\").map((e) => Number(e));\n\t\t\t\tpoints.push(new L.LatLng(dataCoords[0], dataCoords[1]));\n\t\t\t});\n\t\t\tlet dashArray = null;\n\t\t\tif (pattern === \"dashed\") dashArray = \"10, 15\";\n\t\t\telse if (pattern === \"dotted\") dashArray = \"1, 10\";\n\n\t\t\tconst polygon = L.polygon(points, {\n\t\t\t\tcolor: normalizeWebColor(color),\n\t\t\t\tfillColor: normalizeWebColor(fillcolor),\n\t\t\t\tweight: width,\n\t\t\t\tdashArray,\n\t\t\t}).addTo(map);\n\n\t\t\tif (polygons.get(id)) id = generateUniqueId();\n\t\t\tpolygons.set(id, polygon);\n\t\t\t// polygon.bindPopup(\"I am a polygon.\");\n\t\t\t// polygon.bindTooltip(\"I am a polygon.\").openTooltip();\n\t\t};\n\n\t\t// Draw route\n\t\tconst drawRoute = (Args) => {\n\t\t\tconst route = L.Routing.control({\n\t\t\t\twaypoints: [L.latLng(Args.sourceLatitude, Args.sourceLongitude), L.latLng(Args.destinationLatitude, Args.destinationLongitude)],\n\t\t\t\trouteWhileDragging: false,\n\t\t\t\tshowAlternatives: false,\n\t\t\t});\n\t\t\troutes.add(route);\n\t\t\troute.addTo(map);\n\t\t};\n\n\t\t// Remove markers\n\t\tconst removeMarkers = () => {\n\t\t\tmarkers.forEach((e) => map.removeLayer(e));\n\t\t\tmarkers = [];\n\t\t};\n\n\t\t// Remove lines\n\t\tconst clearLines = () => {\n\t\t\tpolyLines.forEach((e) => map.removeLayer(e));\n\t\t\tpolyLines.clear();\n\t\t};\n\n\t\t// Remove lines\n\t\tconst clearAreas = () => {\n\t\t\tpolygons.forEach((e) => map.removeLayer(e));\n\t\t\tpolygons.clear();\n\t\t};\n\n\t\t/**\n\t\t * Contents\n\t\t * @type {Ref<XoneDataCollection>}\n\t\t */\n\t\tconst contents = ref();\n\n\t\t/**\n\t\t * xoneView\n\t\t * @type {XoneView}\n\t\t */\n\t\tconst xoneView = inject(\"xoneView\");\n\n\t\t/**\n\t\t * contents data\n\t\t * @type {Ref<Array<XoneDataObject>>}\n\t\t */\n\t\tconst data = ref([]);\n\n\t\t/**\n\t\t * Refresh map\n\t\t */\n\t\tconst refresh = async () => {\n\t\t\t// Load map\n\t\t\tloadMap();\n\n\t\t\t// Get contents\n\t\t\tif (!contents.value) contents.value = await props.xoneDataObject.getContents(props.attributes.contents);\n\n\t\t\t// Load contents data\n\t\t\t// LoadAll\n\t\t\tif(contents.value.length === 0)\n\t\t\t\tawait contents.value.loadAll(false);\n\n\t\t\tdata.value = [];\n\t\t\tfor (let i = 0; i < contents.value.length; i++) {\n\t\t\t\t/**\n\t\t\t\t * rowDataObject\n\t\t\t\t * @type {XoneDataObject}\n\t\t\t\t */\n\t\t\t\tconst rowDataObject = await contents.value.get(i);\n\t\t\t\tdata.value.push(rowDataObject);\n\t\t\t\t// Execute Nodes\n\t\t\t\trowDataObject\n\t\t\t\t\t.ExecuteNode(\"before-edit\")\n\t\t\t\t\t.then(() => rowDataObject.ExecuteNode(\"load\"))\n\t\t\t\t\t.then(() => rowDataObject.ExecuteNode(\"after-edit\"))\n\t\t\t\t\t.catch(console.error);\n\t\t\t}\n\n\t\t\tdrawMarkers(true);\n\t\t};\n\n\t\t/**\n\t\t * Refresh map markers\n\t\t */\n\t\tconst drawMarkers = (withFitBounds = false) => {\n\t\t\t// create bounds array\n\t\t\tconst bounds = [];\n\t\t\tdata.value.forEach((e) => {\n\t\t\t\tif (!e.LATITUD || !e.LONGITUD) return;\n\n\t\t\t\tlet iconUrl = `${getAppPath()}/assets/marker-icon.png`;\n\t\t\t\t// TODO: poner el  icono que viene del mappings\n\n\t\t\t\tconst icon = L.icon({\n\t\t\t\t\ticonUrl,\n\t\t\t\t\tshadowUrl: `${getAppPath()}/assets/marker-shadow.png`,\n\t\t\t\t\ticonSize: [25, 41],\n\t\t\t\t\ticonAnchor: [12, 41],\n\t\t\t\t});\n\n\t\t\t\t// push coordinates into bounds\n\t\t\t\tbounds.push([e.LATITUD, e.LONGITUD]);\n\t\t\t\t// Create marker\n\t\t\t\tconst marker = L.marker([e.LATITUD, e.LONGITUD], { icon })\n\t\t\t\t\t.addTo(map)\n\t\t\t\t\t// on click execute selecteditem node\n\t\t\t\t\t.on(\"click\", () => e.ExecuteNode(\"selecteditem\").catch(console.error));\n\t\t\t\tmarkers.push(marker);\n\t\t\t});\n\t\t\t// fit bounds\n\t\t\tif (withFitBounds && bounds.length !== 0) map.fitBounds(bounds);\n\t\t\t// map.flyToBounds(bounds, { animate: true, duration: 1 });\n\t\t};\n\n\t\t// Clear layers\n\t\tconst clearLayers = () => Object.keys(map._layers).forEach((key) => map.removeLayer(map._layers[key]));\n\n\t\t// Clear routes\n\t\tconst clearRoutes = () => routes.forEach((e) => map.removeControl(e));\n\n\t\t/**\n\t\t * @type {Object}\n\t\t */\n\t\tlet currentMapTileLayer;\n\n\t\t/**\n\t\t * @type {string}\n\t\t */\n\t\tlet currentMapLayerName = getDefaultMapLayer(props.attributes);\n\n\t\tconst changeMapLayer = (/** @type {string}*/ layer, /** @type {MouseEvent} */ e = null) => {\n\t\t\tif (e) e.stopPropagation();\n\n\t\t\tlayer = replaceLayerName(layer);\n\t\t\tcurrentMapLayerName = layer;\n\n\t\t\tif (currentMapTileLayer) map.removeLayer(currentMapTileLayer);\n\n\t\t\tcurrentMapTileLayer = mapLayers.value[layer].layer;\n\n\t\t\tif (!currentMapTileLayer) currentMapTileLayer = Object.values(mapLayers.value).forEach((e) => e.title === layer);\n\n\t\t\t// Add new layer\n\t\t\tcurrentMapTileLayer.addTo(map);\n\n\t\t\t// Set zoom\n\t\t\tif (map._zoom > mapLayers.value[layer].layer.options.maxZoom) map.setZoom(mapLayers.value[layer].layer.options.maxZoom);\n\n\t\t\t// Refresh Markers\n\t\t\tdrawMarkers();\n\n\t\t\tshowLayers.value = false;\n\t\t};\n\n\t\t/**\n\t\t * Load Map\n\t\t */\n\t\tconst loadMap = () => {\n\t\t\tif (!map) map = L.map(`map-${breadcrumbId}${objectIndex}`).setView([43.454518, -3.851194], 2);\n\t\t\telse {\n\t\t\t\tclearRoutes();\n\t\t\t\tclearLayers();\n\t\t\t}\n\t\t\tcurrentMapTileLayer = mapLayers.value[getDefaultMapLayer(props.attributes)].layer;\n\t\t\tcurrentMapTileLayer.addTo(map);\n\t\t};\n\n\t\tonMounted(async () => {\n\t\t\tawait loadLeaflet();\n\n\t\t\t// map Layers\n\t\t\tmapLayers.value = getMapLayers(L, props.attributes);\n\n\t\t\t//\n\t\t\t// Add control to view\n\t\t\tconst xoneControl = new XoneControl(props.attributes.name);\n\n\t\t\t// Refresh\n\t\t\txoneControl.refresh = refresh;\n\t\t\t// Draw Line\n\t\t\txoneControl.drawLine = drawLine;\n\t\t\t// Clear Area\n\t\t\txoneControl.clearArea = (Args) => map.removeLayer(polygons.get(Args));\n\t\t\t// Clear all Areas\n\t\t\txoneControl.clearAllAreas = clearAreas;\n\t\t\t// Clear line\n\t\t\txoneControl.clearLine = (Args) => map.removeLayer(polyLines.get(Args));\n\t\t\t// Clear all lines\n\t\t\txoneControl.clearAllLines = clearLines;\n\t\t\t// CLear all routes\n\t\t\txoneControl.clearAllRoutes = clearRoutes;\n\t\t\t// CLear route\n\t\t\txoneControl.clearRoute = clearRoutes;\n\t\t\t// Draw Area\n\t\t\txoneControl.drawArea = drawArea;\n\t\t\t// Draw Route\n\t\t\txoneControl.drawRoute = drawRoute;\n\t\t\txoneControl.routeTo = drawRoute;\n\t\t\t// Remove area\n\t\t\txoneControl.removeArea = (area) => polygons.has(area) && map.removeLayer(polygons.get(area));\n\t\t\t// Zoom to\n\t\t\txoneControl.zoomTo = (...Args) => {\n\t\t\t\tmap.flyTo([Args[0], Args[1]], 18, { duration: 1 });\n\t\t\t};\n\t\t\t// Set Map Type\n\t\t\txoneControl.setMapType = changeMapLayer;\n\t\t\t// Zoom to bounds\n\t\t\txoneControl.zoomToBounds = (Args) => {\n\t\t\t\t// map.fitBounds(Args.map((e) => e.split(\",\").map((e) => Number(e))));\n\t\t\t\tmap.flyToBounds(\n\t\t\t\t\tArgs.map((e) => e.split(\",\").map((e) => Number(e))),\n\t\t\t\t\t{ animate: true, duration: 1 }\n\t\t\t\t);\n\t\t\t};\n\n\t\t\txoneView.addControl(xoneControl);\n\n\t\t\t//\n\t\t\t// Refresh contents\n\t\t\trefresh();\n\t\t});\n\t\tonUnmounted(() => {\n\t\t\tif (contents.value) contents.value.clear();\n\t\t});\n\n\t\tconst showMarkerButton = ref(true);\n\n\t\tconst showLayers = ref(false);\n\n\t\twatch(\n\t\t\t() => showLayers.value,\n\t\t\t(newValue) => {\n\t\t\t\tif (newValue) showMarkerButton.value = false;\n\t\t\t\telse setTimeout(() => (showMarkerButton.value = true), 400);\n\t\t\t}\n\t\t);\n\n\t\treturn {\n\t\t\tkeyLayers,\n\t\t\tbreadcrumbId,\n\t\t\tobjectIndex,\n\t\t\tshowLayers,\n\t\t\tchangeMapLayer,\n\t\t\tshowMarkerButton,\n\t\t\tonMouseWheel: (/** @type{ MouseEvent} */ e) => e.stopPropagation(),\n\t\t\tonMarkerButtonClick: async (/** @type {MouseEvent} */ e) => {\n\t\t\t\tshowLayers.value = !showLayers.value;\n\t\t\t\te.stopPropagation();\n\t\t\t},\n\t\t\tcheckIsLayerSelected: (/** @type {string} */ layer) => replaceLayerName(layer) === replaceLayerName(currentMapLayerName),\n\t\t\tappPath: getAppPath(),\n\t\t};\n\t},\n};\n</script>\n\n<style scoped>\n.xone-map {\n\tposition: relative;\n\theight: 100vh;\n\twidth: 100%;\n\n\twidth: var(--contents-width);\n\theight: var(--contents-height);\n\tmax-height: var(--contents-max-height);\n}\n.xone-map-markers {\n\tdisplay: flex;\n\tposition: absolute;\n\tright: 5px;\n\tmargin-top: 5px;\n\tz-index: 999;\n\tpointer-events: all;\n\tpadding: 5px;\n}\n\n.xone-selected-marker {\n\tfont-weight: bold;\n}\n\n.xone-marker-button {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\twidth: 30px;\n\theight: 30px;\n\tborder-radius: 2px;\n\tborder: 2px solid rgb(204, 204, 204);\n\tbackground-color: #fff;\n\tanimation: slideLeft 0.2s;\n\n\t/* box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px rgba(0, 0, 0, 0.14),\n    0 1px 10px rgba(0, 0, 0, 0.12); */\n}\n.xone-marker-button:hover {\n\tbackground: #f4f4f4;\n}\n\n.xone-marker-button button {\n\tcursor: pointer;\n\tdisplay: block;\n\tbackground: var(--image-layers);\n\tbackground-position: center;\n\tpadding: 5px;\n\tborder: none;\n\twidth: 30px;\n\theight: 30px;\n\tbackground-size: 75%;\n}\n\n.xone-markers-list {\n\tbox-sizing: border-box;\n\tdisplay: flex;\n\tflex-direction: column;\n\tanimation: slideLeft 0.3s;\n\toverflow-y: auto;\n\toverflow-x: hidden;\n\tbackground-color: #fff;\n\tborder-radius: 2px;\n\tmargin-left: 5px;\n\tborder: 2px solid rgb(204, 204, 204);\n\n\t/* box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.2), 0 4px 5px rgba(0, 0, 0, 0.14),\n    0 1px 10px rgba(0, 0, 0, 0.12); */\n\tpointer-events: all;\n}\n\na {\n\tcursor: pointer;\n\tbackground-color: white;\n\tcolor: black !important;\n\tpadding: 10px;\n\ttext-align: justify;\n\tborder-bottom: 1px solid rgba(0, 0, 0, 0.12);\n\tpointer-events: all;\n}\n\na:hover {\n\tbackground-color: #f4f4f4;\n}\n\na:link {\n\ttext-decoration: none;\n}\n\n.slide-fade-enter-active {\n\ttransition: all 0.2s ease;\n}\n.slide-fade-leave-active {\n\ttransition: all 0.2s ease;\n}\n.slide-fade-enter,\n.slide-fade-leave-to {\n\ttransform: translateX(100px);\n\topacity: 0;\n}\n</style>\n","const apiThunderforest = \"2514d9d400ef48b8996963c689736d76\";\n\nexport const getMapLayers = (L) => {\n\treturn {\n\t\t//\n\t\t// Google\n\t\tstreets: {\n\t\t\ttype: \"google\",\n\t\t\tlayer: L.tileLayer(\"http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}\", {\n\t\t\t\tmaxZoom: 20,\n\t\t\t\tsubdomains: [\"mt0\", \"mt1\", \"mt2\", \"mt3\"],\n\t\t\t}),\n\t\t},\n\t\thybrid: {\n\t\t\ttype: \"google\",\n\t\t\tlayer: L.tileLayer(\"http://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}\", {\n\t\t\t\tmaxZoom: 20,\n\t\t\t\tsubdomains: [\"mt0\", \"mt1\", \"mt2\", \"mt3\"],\n\t\t\t}),\n\t\t},\n\t\tterrain: {\n\t\t\ttype: \"google\",\n\t\t\tlayer: L.tileLayer(\"http://{s}.google.com/vt/lyrs=p&x={x}&y={y}&z={z}\", {\n\t\t\t\tmaxZoom: 20,\n\t\t\t\tsubdomains: [\"mt0\", \"mt1\", \"mt2\", \"mt3\"],\n\t\t\t}),\n\t\t},\n\t\tsatellite: {\n\t\t\ttype: \"google\",\n\t\t\tlayer: L.tileLayer(\"http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}\", {\n\t\t\t\tmaxZoom: 20,\n\t\t\t\tsubdomains: [\"mt0\", \"mt1\", \"mt2\", \"mt3\"],\n\t\t\t}),\n\t\t},\n\t\t//\n\t\t// Open Street Map\n\t\tstandard: {\n\t\t\ttype: \"OSM\",\n\t\t\tlayer: L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tattribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n\t\t\t}),\n\t\t},\n\t\tbright: {\n\t\t\ttype: \"OSM\",\n\t\t\tlayer: L.tileLayer(\"https://tiles.stadiamaps.com/tiles/osm_bright/{z}/{x}/{y}{r}.png\", {\n\t\t\t\tmaxZoom: 20,\n\t\t\t\tattribution:\n\t\t\t\t\t'&copy; <a href=\"https://stadiamaps.com/\">Stadia Maps</a>, &copy; <a href=\"https://openmaptiles.org/\">OpenMapTiles</a> &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors',\n\t\t\t}),\n\t\t},\n\t\tdark: {\n\t\t\ttype: \"OSM\",\n\t\t\tlayer: L.tileLayer(\"https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png\", {\n\t\t\t\tmaxZoom: 20,\n\t\t\t\tattribution:\n\t\t\t\t\t'&copy; <a href=\"https://stadiamaps.com/\">Stadia Maps</a>, &copy; <a href=\"https://openmaptiles.org/\">OpenMapTiles</a> &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors',\n\t\t\t}),\n\t\t},\n\t\tworldImagery: {\n\t\t\ttype: \"OSM\",\n\t\t\tlayer: L.tileLayer(\"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\", {\n\t\t\t\tattribution:\n\t\t\t\t\t\"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community\",\n\t\t\t}),\n\t\t\tnoLabel: true,\n\t\t},\n\t\thumanitary: {\n\t\t\ttype: \"OSM\",\n\t\t\tlayer: L.tileLayer(\"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png\", {\n\t\t\t\tmaxZoom: 19,\n\t\t\t\tattribution:\n\t\t\t\t\t'&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Tiles style by <a href=\"https://www.hotosm.org/\" target=\"_blank\">Humanitarian OpenStreetMap Team</a> hosted by <a href=\"https://openstreetmap.fr/\" target=\"_blank\">OpenStreetMap France</a>',\n\t\t\t}),\n\t\t},\n\t\tsmooth: {\n\t\t\ttype: \"OSM\",\n\t\t\tlayer: L.tileLayer(\"https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png\", {\n\t\t\t\tmaxZoom: 20,\n\t\t\t\tattribution:\n\t\t\t\t\t'&copy; <a href=\"https://stadiamaps.com/\">Stadia Maps</a>, &copy; <a href=\"https://openmaptiles.org/\">OpenMapTiles</a> &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors',\n\t\t\t}),\n\t\t},\n\t\toutdoors: {\n\t\t\ttype: \"OSM\",\n\t\t\tlayer: L.tileLayer(\"https://tiles.stadiamaps.com/tiles/outdoors/{z}/{x}/{y}{r}.png\", {\n\t\t\t\tmaxZoom: 20,\n\t\t\t\tattribution:\n\t\t\t\t\t'&copy; <a href=\"https://stadiamaps.com/\">Stadia Maps</a>, &copy; <a href=\"https://openmaptiles.org/\">OpenMapTiles</a> &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors',\n\t\t\t}),\n\t\t},\n\t\topenTopoMap: {\n\t\t\ttype: \"OSM\",\n\t\t\tlayer: L.tileLayer(\"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png\", {\n\t\t\t\tmaxZoom: 17,\n\t\t\t\tattribution:\n\t\t\t\t\t'Map data: &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, <a href=\"http://viewfinderpanoramas.org\">SRTM</a> | Map style: &copy; <a href=\"https://opentopomap.org\">OpenTopoMap</a> (<a href=\"https://creativecommons.org/licenses/by-sa/3.0/\">CC-BY-SA</a>)',\n\t\t\t}),\n\t\t},\n\t\tcyclist: {\n\t\t\ttype: \"OSM\",\n\t\t\tlayer: L.tileLayer(\"https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png\", {\n\t\t\t\tmaxZoom: 20,\n\t\t\t\tattribution:\n\t\t\t\t\t'<a href=\"https://github.com/cyclosm/cyclosm-cartocss-style/releases\" title=\"CyclOSM - Open Bicycle render\">CyclOSM</a> | Map data: &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n\t\t\t}),\n\t\t},\n\t\ttransport: {\n\t\t\ttype: \"OSM\",\n\t\t\tlayer: L.tileLayer(\"https://tile.thunderforest.com/transport/{z}/{x}/{y}.png?apikey=\" + apiThunderforest, {\n\t\t\t\tmaxZoom: 20,\n\t\t\t\tattribution: \"\",\n\t\t\t}),\n\t\t},\n\t\tneighbourhood: {\n\t\t\ttype: \"OSM\",\n\t\t\tlayer: L.tileLayer(\"https://tile.thunderforest.com/neighbourhood/{z}/{x}/{y}.png?apikey=2514d9d400ef48b8996963c689736d76\", {\n\t\t\t\tmaxZoom: 20,\n\t\t\t\tattribution: \"\",\n\t\t\t}),\n\t\t},\n\t\tcarto: {\n\t\t\ttype: \"OSM\",\n\t\t\tlayer: L.tileLayer(\"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}{r}.png\", {\n\t\t\t\tattribution:\n\t\t\t\t\t'&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n\t\t\t\tsubdomains: \"abcd\",\n\t\t\t\tmaxZoom: 19,\n\t\t\t}),\n\t\t},\n\t\twatercolor: {\n\t\t\ttype: \"OSM\",\n\t\t\tlayer: L.tileLayer(\"https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.{ext}\", {\n\t\t\t\tattribution:\n\t\t\t\t\t'Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n\t\t\t\tsubdomains: \"abcd\",\n\t\t\t\tminZoom: 1,\n\t\t\t\tmaxZoom: 16,\n\t\t\t\text: \"jpg\",\n\t\t\t}),\n\t\t},\n\t\tworldTopoMap: {\n\t\t\ttype: \"OSM\",\n\t\t\tlayer: L.tileLayer(\"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}\", {\n\t\t\t\tattribution:\n\t\t\t\t\t\"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community\",\n\t\t\t}),\n\t\t},\n\t\tterrainLabels: {\n\t\t\ttype: \"OSM\",\n\t\t\tlayer: L.tileLayer(\"https://stamen-tiles-{s}.a.ssl.fastly.net/terrain-labels/{z}/{x}/{y}{r}.{ext}\", {\n\t\t\t\tattribution:\n\t\t\t\t\t'Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, <a href=\"http://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a> &mdash; Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n\t\t\t\tsubdomains: \"abcd\",\n\t\t\t\tminZoom: 0,\n\t\t\t\tmaxZoom: 18,\n\t\t\t\text: \"png\",\n\t\t\t}),\n\t\t\tonlyLabel: true,\n\t\t},\n\t\tdarkMatterOnlyLabels: {\n\t\t\ttype: \"OSM\",\n\t\t\tlayer: L.tileLayer(\"https://{s}.basemaps.cartocdn.com/dark_only_labels/{z}/{x}/{y}{r}.png\", {\n\t\t\t\tattribution:\n\t\t\t\t\t'&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n\t\t\t\tsubdomains: \"abcd\",\n\t\t\t\tmaxZoom: 19,\n\t\t\t}),\n\t\t\tonlyLabel: true,\n\t\t},\n\t\tpositronOnlyLabels: {\n\t\t\ttype: \"OSM\",\n\t\t\tlayer: L.tileLayer(\"https://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}{r}.png\", {\n\t\t\t\tattribution:\n\t\t\t\t\t'&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n\t\t\t\tsubdomains: \"abcd\",\n\t\t\t\tmaxZoom: 18,\n\t\t\t}),\n\t\t\tonlyLabel: true,\n\t\t},\n\t\tcartoDVoyagerOnlyLabels: {\n\t\t\ttype: \"OSM\",\n\t\t\tlayer: L.tileLayer(\"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}{r}.png\", {\n\t\t\t\tattribution:\n\t\t\t\t\t'&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n\t\t\t\tsubdomains: \"abcd\",\n\t\t\t\tmaxZoom: 18,\n\t\t\t}),\n\t\t\tonlyLabel: true,\n\t\t},\n\t};\n};\n\nexport const replaceLayerName = (layer) => layer.replace(\"none\", \"standard\").replace(\"normal\", \"streets\");\n\nexport const getDefaultMapLayer = (/** @type {import(\"../XoneAttributesHandler\").PropAttributes} */ attributes) =>\n\tattributes.viewMode === \"mapview\" ? \"streets\" : \"standard\";\n\nexport const loadLeaflet = async () => {\n\tif (window.L) return;\n\n\t// Import leaflet css\n\tconst lCssElement = document.createElement(\"link\");\n\tlCssElement.setAttribute(\"rel\", \"stylesheet\");\n\tlCssElement.setAttribute(\"href\", \"modules/leaflet/leaflet.css\");\n\tdocument.head.append(lCssElement);\n\t// Import leaflet js\n\tconst lJsElement = document.createElement(\"script\");\n\tlJsElement.setAttribute(\"src\", \"modules/leaflet/leaflet.js\");\n\tdocument.head.append(lJsElement);\n\t// Import routing machine css\n\tconst lrmCssElement = document.createElement(\"link\");\n\tlrmCssElement.setAttribute(\"rel\", \"stylesheet\");\n\tlrmCssElement.setAttribute(\"href\", \"modules/leaflet/leaflet-routing-machine.css\");\n\tdocument.head.append(lrmCssElement);\n\t// Import leaflet routing machine js\n\tconst lrmJsElement = document.createElement(\"script\");\n\tlrmJsElement.setAttribute(\"src\", \"modules/leaflet/leaflet-routing-machine.js\");\n\tdocument.head.append(lrmJsElement);\n\n\twhile (!window.L) await new Promise((resolve) => setTimeout(() => resolve(), 1));\n\n\t// set imagePath\n\tL.Icon.Default.imagePath = \"./assets/\";\n};\n\n// const apiMapTiler = \"93ot4VTOe9tDF0xzLJjr\";\n// basic: {\n//   layer: L.tileLayer(\n//     \"https://api.maptiler.com/maps/basic/256/{z}/{x}/{y}.png?key=\" +\n//       apiMapTiler,\n//     {\n//       maxZoom: 19,\n//       attribution:\n//         '&copy; MapTiler &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n//     }\n//   ),\n// },\n// bright: {\n//   layer: L.tileLayer(\n//     \"https://api.maptiler.com/maps/bright/256/{z}/{x}/{y}.png?key=\" +\n//       apiMapTiler,\n//     {\n//       maxZoom: 19,\n//       attribution:\n//         '&copy; MapTiler &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n//     }\n//   ),\n// },\n// outdoor: {\n//   layer: L.tileLayer(\n//     \"https://api.maptiler.com/maps/outdoor/256/{z}/{x}/{y}.png?key=\" +\n//       apiMapTiler,\n//     {\n//       maxZoom: 19,\n//       attribution:\n//         '&copy; MapTiler &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n//     }\n//   ),\n// },\n// hybridSatellite: {\n//   layer: L.tileLayer(\n//     \"https://api.maptiler.com/maps/hybrid/256/{z}/{x}/{y}.jpg?key=\" +\n//       apiMapTiler,\n//     {\n//       maxZoom: 19,\n//       attribution:\n//         '&copy; MapTiler &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n//     }\n//   ),\n// },\n// pastel: {\n//   layer: L.tileLayer(\n//     \"https://api.maptiler.com/maps/pastel/256/{z}/{x}/{y}.png?key=\" +\n//       apiMapTiler,\n//     {\n//       maxZoom: 19,\n//       attribution:\n//         '&copy; MapTiler &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n//     }\n//   ),\n// },\n// streets: {\n//   layer: L.tileLayer(\n//     \"https://api.maptiler.com/maps/streets/256/{z}/{x}/{y}.png?key=\" +\n//       apiMapTiler,\n//     {\n//       maxZoom: 19,\n//       attribution:\n//         '&copy; MapTiler &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n//     }\n//   ),\n// },\n// toner: {\n//   layer: L.tileLayer(\n//     \"https://api.maptiler.com/maps/toner/256/{z}/{x}/{y}.png?key=\" +\n//       apiMapTiler,\n//     {\n//       maxZoom: 19,\n//       attribution:\n//         '&copy; MapTiler &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n//     }\n//   ),\n// },\n// topo: {\n//   layer: L.tileLayer(\n//     \"https://api.maptiler.com/maps/topo/256/{z}/{x}/{y}.png?key=\" +\n//       apiMapTiler,\n//     {\n//       maxZoom: 19,\n//       attribution:\n//         '&copy; MapTiler &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n//     }\n//   ),\n// },\n// topographique: {\n//   layer: L.tileLayer(\n//     \"https://api.maptiler.com/maps/topographique/256/{z}/{x}/{y}.png?key=\" +\n//       apiMapTiler,\n//     {\n//       maxZoom: 19,\n//       attribution:\n//         '&copy; MapTiler &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n//     }\n//   ),\n// },\n// voyager: {\n//   layer: L.tileLayer(\n//     \"https://api.maptiler.com/maps/voyager/256/{z}/{x}/{y}.png?key=\" +\n//       apiMapTiler,\n//     {\n//       maxZoom: 19,\n//       attribution:\n//         '&copy; MapTiler &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n//     }\n//   ),\n// },\n","/**\n * Normalice XOne color\n * @param {string} value\n */\nexport const normalizeWebColor = (value) => {\n  if(!value) return;\n  if (value.startsWith(\"#\") && value.length > 7) {\n    return \"#\" + value.substr(value.length - 6, 6) + value.substr(1, value.length - 7).padStart(2, \"0\");\n  }\n  return value;\n};\n\nexport function HEX2RGB(hex) {\n  // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n  const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n  hex = hex.replace(shorthandRegex, (m, r, g, b) => {\n    return r + r + g + g + b + b;\n  });\n\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result ? [parseInt(result[1], 16), parseInt(result[2], 16), parseInt(result[3], 16)] : null;\n}\n\nexport class Color {\n  constructor(r, g, b) {\n    this.set(r, g, b);\n  }\n\n  toString() {\n    return `rgb(${Math.round(this.r)}, ${Math.round(this.g)}, ${Math.round(this.b)})`;\n  }\n\n  set(r, g, b) {\n    this.r = this.clamp(r);\n    this.g = this.clamp(g);\n    this.b = this.clamp(b);\n  }\n\n  hueRotate(angle = 0) {\n    angle = (angle / 180) * Math.PI;\n    const sin = Math.sin(angle);\n    const cos = Math.cos(angle);\n\n    this.multiply([\n      0.213 + cos * 0.787 - sin * 0.213,\n      0.715 - cos * 0.715 - sin * 0.715,\n      0.072 - cos * 0.072 + sin * 0.928,\n      0.213 - cos * 0.213 + sin * 0.143,\n      0.715 + cos * 0.285 + sin * 0.14,\n      0.072 - cos * 0.072 - sin * 0.283,\n      0.213 - cos * 0.213 - sin * 0.787,\n      0.715 - cos * 0.715 + sin * 0.715,\n      0.072 + cos * 0.928 + sin * 0.072,\n    ]);\n  }\n\n  grayscale(value = 1) {\n    this.multiply([\n      0.2126 + 0.7874 * (1 - value),\n      0.7152 - 0.7152 * (1 - value),\n      0.0722 - 0.0722 * (1 - value),\n      0.2126 - 0.2126 * (1 - value),\n      0.7152 + 0.2848 * (1 - value),\n      0.0722 - 0.0722 * (1 - value),\n      0.2126 - 0.2126 * (1 - value),\n      0.7152 - 0.7152 * (1 - value),\n      0.0722 + 0.9278 * (1 - value),\n    ]);\n  }\n\n  sepia(value = 1) {\n    this.multiply([\n      0.393 + 0.607 * (1 - value),\n      0.769 - 0.769 * (1 - value),\n      0.189 - 0.189 * (1 - value),\n      0.349 - 0.349 * (1 - value),\n      0.686 + 0.314 * (1 - value),\n      0.168 - 0.168 * (1 - value),\n      0.272 - 0.272 * (1 - value),\n      0.534 - 0.534 * (1 - value),\n      0.131 + 0.869 * (1 - value),\n    ]);\n  }\n\n  saturate(value = 1) {\n    this.multiply([\n      0.213 + 0.787 * value,\n      0.715 - 0.715 * value,\n      0.072 - 0.072 * value,\n      0.213 - 0.213 * value,\n      0.715 + 0.285 * value,\n      0.072 - 0.072 * value,\n      0.213 - 0.213 * value,\n      0.715 - 0.715 * value,\n      0.072 + 0.928 * value,\n    ]);\n  }\n\n  multiply(matrix) {\n    const newR = this.clamp(this.r * matrix[0] + this.g * matrix[1] + this.b * matrix[2]);\n    const newG = this.clamp(this.r * matrix[3] + this.g * matrix[4] + this.b * matrix[5]);\n    const newB = this.clamp(this.r * matrix[6] + this.g * matrix[7] + this.b * matrix[8]);\n    this.r = newR;\n    this.g = newG;\n    this.b = newB;\n  }\n\n  brightness(value = 1) {\n    this.linear(value);\n  }\n  contrast(value = 1) {\n    this.linear(value, -(0.5 * value) + 0.5);\n  }\n\n  linear(slope = 1, intercept = 0) {\n    this.r = this.clamp(this.r * slope + intercept * 255);\n    this.g = this.clamp(this.g * slope + intercept * 255);\n    this.b = this.clamp(this.b * slope + intercept * 255);\n  }\n\n  invert(value = 1) {\n    this.r = this.clamp((value + (this.r / 255) * (1 - 2 * value)) * 255);\n    this.g = this.clamp((value + (this.g / 255) * (1 - 2 * value)) * 255);\n    this.b = this.clamp((value + (this.b / 255) * (1 - 2 * value)) * 255);\n  }\n\n  hsl() {\n    // Code taken from https://stackoverflow.com/a/9493060/2688027, licensed under CC BY-SA.\n    const r = this.r / 255;\n    const g = this.g / 255;\n    const b = this.b / 255;\n    const max = Math.max(r, g, b);\n    const min = Math.min(r, g, b);\n    let h,\n      s,\n      l = (max + min) / 2;\n\n    if (max === min) {\n      h = s = 0;\n    } else {\n      const d = max - min;\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n      switch (max) {\n        case r:\n          h = (g - b) / d + (g < b ? 6 : 0);\n          break;\n\n        case g:\n          h = (b - r) / d + 2;\n          break;\n\n        case b:\n          h = (r - g) / d + 4;\n          break;\n      }\n      h /= 6;\n    }\n\n    return {\n      h: h * 100,\n      s: s * 100,\n      l: l * 100,\n    };\n  }\n\n  clamp(value) {\n    if (value > 255) {\n      value = 255;\n    } else if (value < 0) {\n      value = 0;\n    }\n    return value;\n  }\n}\n\nexport class Solver {\n  constructor(target, baseColor) {\n    this.target = target;\n    this.targetHSL = target.hsl();\n    this.reusedColor = new Color(0, 0, 0);\n  }\n\n  solve() {\n    const results = [];\n    for (let i = 0; i < 10; i++) results.push(this.solveNarrow(this.solveWide()));\n\n    results.sort((a, b) => a.loss - b.loss);\n\n    const result = results[0];\n\n    return {\n      values: result.values,\n      loss: result.loss,\n      filter: this.css(result.values),\n    };\n  }\n\n  solveWide() {\n    const A = 5;\n    const c = 15;\n    const a = [60, 180, 18000, 600, 1.2, 1.2];\n\n    let best = { loss: Infinity };\n    for (let i = 0; best.loss > 25 && i < 3; i++) {\n      const initial = [50, 20, 3750, 50, 100, 100];\n      const result = this.spsa(A, a, c, initial, 1000);\n      if (result.loss < best.loss) {\n        best = result;\n      }\n    }\n    return best;\n  }\n\n  solveNarrow(wide) {\n    const A = wide.loss;\n    const c = 2;\n    const A1 = A + 1;\n    const a = [0.25 * A1, 0.25 * A1, A1, 0.25 * A1, 0.2 * A1, 0.2 * A1];\n    return this.spsa(A, a, c, wide.values, 500);\n  }\n\n  spsa(A, a, c, values, iters) {\n    const alpha = 1;\n    const gamma = 0.16666666666666666;\n\n    let best = null;\n    let bestLoss = Infinity;\n    const deltas = new Array(6);\n    const highArgs = new Array(6);\n    const lowArgs = new Array(6);\n\n    for (let k = 0; k < iters; k++) {\n      const ck = c / Math.pow(k + 1, gamma);\n      for (let i = 0; i < 6; i++) {\n        deltas[i] = Math.random() > 0.5 ? 1 : -1;\n        highArgs[i] = values[i] + ck * deltas[i];\n        lowArgs[i] = values[i] - ck * deltas[i];\n      }\n\n      const lossDiff = this.loss(highArgs) - this.loss(lowArgs);\n      for (let i = 0; i < 6; i++) {\n        const g = (lossDiff / (2 * ck)) * deltas[i];\n        const ak = a[i] / Math.pow(A + k + 1, alpha);\n        values[i] = fix(values[i] - ak * g, i);\n      }\n\n      const loss = this.loss(values);\n      if (loss < bestLoss) {\n        best = values.slice(0);\n        bestLoss = loss;\n      }\n    }\n    return { values: best, loss: bestLoss };\n\n    function fix(value, idx) {\n      let max = 100;\n      if (idx === 2 /* saturate */) {\n        max = 7500;\n      } else if (idx === 4 /* brightness */ || idx === 5 /* contrast */) {\n        max = 200;\n      }\n\n      if (idx === 3 /* hue-rotate */) {\n        if (value > max) {\n          value %= max;\n        } else if (value < 0) {\n          value = max + (value % max);\n        }\n      } else if (value < 0) {\n        value = 0;\n      } else if (value > max) {\n        value = max;\n      }\n      return value;\n    }\n  }\n\n  loss(filters) {\n    // Argument is array of percentages.\n    const color = this.reusedColor;\n    color.set(0, 0, 0);\n\n    color.invert(filters[0] / 100);\n    color.sepia(filters[1] / 100);\n    color.saturate(filters[2] / 100);\n    color.hueRotate(filters[3] * 3.6);\n    color.brightness(filters[4] / 100);\n    color.contrast(filters[5] / 100);\n\n    const colorHSL = color.hsl();\n    return (\n      Math.abs(color.r - this.target.r) +\n      Math.abs(color.g - this.target.g) +\n      Math.abs(color.b - this.target.b) +\n      Math.abs(colorHSL.h - this.targetHSL.h) +\n      Math.abs(colorHSL.s - this.targetHSL.s) +\n      Math.abs(colorHSL.l - this.targetHSL.l)\n    );\n  }\n\n  css(filters) {\n    function fmt(idx, multiplier = 1) {\n      return Math.round(filters[idx] * multiplier);\n    }\n    return `invert(${fmt(0)}%) sepia(${fmt(1)}%) saturate(${fmt(2)}%) hue-rotate(${fmt(3, 3.6)}deg) brightness(${fmt(4)}%) contrast(${fmt(5)}%)`;\n  }\n}\n","import { render } from \"./Map.vue?vue&type=template&id=0212dfac&scoped=true\"\nimport script from \"./Map.vue?vue&type=script&lang=js\"\nexport * from \"./Map.vue?vue&type=script&lang=js\"\n\nimport \"./Map.vue?vue&type=style&index=0&id=0212dfac&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0212dfac\"]])\n\nexport default __exports__","<template>\n\t<div ref=\"calendarElement\" class=\"xone-calendar\">\n\t\t<!-- Week Days -->\n\t\t<ol>\n\t\t\t<li\n\t\t\t\tstyle=\"display: flex; justify-content: center\"\n\t\t\t\t:style=\"{\n\t\t\t\t\tbackgroundColor: (attributes.cellBorderColor && attributes.cellBorderColor) || 'lightgray',\n\t\t\t\t}\"\n\t\t\t\tv-for=\"day in weekDays\"\n\t\t\t\t:key=\"`calendar-${day}`\"\n\t\t\t>\n\t\t\t\t<!-- Week Day -->\n\t\t\t\t<p>\n\t\t\t\t\t{{ day }}\n\t\t\t\t</p>\n\t\t\t</li>\n\t\t</ol>\n\t\t<!-- Days -->\n\t\t<ol class=\"xone-calendar-days\">\n\t\t\t<li\n\t\t\t\tv-for=\"item in dateItems\"\n\t\t\t\t:key=\"`calendar-${item.day}-${item.id}`\"\n\t\t\t\t:style=\"{\n\t\t\t\t\tbackgroundColor: item.isCurrentMonth\n\t\t\t\t\t\t? item.date.isSameDate(currentDate) && attributes.cellSelectedBgColor\n\t\t\t\t\t\t\t? attributes.cellSelectedBgColor\n\t\t\t\t\t\t\t: (attributes.cellBgColor && attributes.cellBgColor) || 'white'\n\t\t\t\t\t\t: (attributes.cellOtherMonthBgColor && attributes.cellOtherMonthBgColor) || 'rgba(0,0,0,.1)',\n\t\t\t\t\tborder: `1px ${\n\t\t\t\t\t\titem.date.isSameDate(currentDate)\n\t\t\t\t\t\t\t? (attributes.cellSelectedBorderColor && attributes.cellSelectedBorderColor) || 'lightgray'\n\t\t\t\t\t\t\t: 'transparent'\n\t\t\t\t\t} solid`,\n\t\t\t\t}\"\n\t\t\t\t@click=\"onDateSelected(item)\"\n\t\t\t>\n\t\t\t\t<!-- Item Day -->\n\t\t\t\t<div\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\tbackgroundColor: item.date.isSameDate(new Date()) && (attributes.cellSelectedBgColor || 'lightgray'),\n\t\t\t\t\t\tcolor: attributes.cellForeColor && attributes.cellForeColor,\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\t<p>{{ item.day }}</p>\n\t\t\t\t</div>\n\t\t\t\t<!-- Day events -->\n\t\t\t\t<div class=\"xone-calendar-events\">\n\t\t\t\t\t<div v-for=\"value in item.values\" :key=\"`calendar-event-${value.index}-${value.i}`\" :style=\"{ backgroundColor: value.color }\"></div>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</ol>\n\t</div>\n</template>\n\n<script>\nimport { inject, onMounted, onUnmounted, PropType, ref, Ref } from \"vue\";\n\nimport { PropAttributes } from \"../../../composables/XoneAttributesHandler\";\nimport { XoneDataObject } from \"../../../composables/appData/core/XoneDataObject\";\nimport { XoneDataCollection } from \"../../../composables/appData/core/XoneDataCollection\";\nimport { weekStartLocale, getWeekDays, addDays } from \"../../../composables/helperFunctions/DateHelper\";\nimport { SwipeHandler } from \"../../../composables/SwipeHandler\";\nimport { XoneControl, XoneView } from \"../../../composables/XoneViewsHandler\";\nimport { generateUniqueId } from \"../../../composables/helperFunctions/StringHelper\";\nimport XmlNode from \"../../../composables/appData/Xml/JSONImpl/XmlNode\";\n\nexport default {\n\tname: \"Map\",\n\tprops: {\n\t\t/**\n\t\t * xoneDataObject\n\t\t * @type {PropType<XoneDataObject>}\n\t\t * */\n\t\txoneDataObject: { type: Object, required: true },\n\t\t/**\n\t\t * attributes\n\t\t * @type { PropType<PropAttributes>}\n\t\t */\n\t\tattributes: { type: Object, default: null, required: true },\n\t\tcontrolWidth: { type: Number, default: 0 },\n\t\tcontrolHeight: { type: Number, default: 0 },\n\t},\n\tsetup(props) {\n\t\t/**\n\t\t * date items to show in calendar\n\t\t * @type {Ref<Array<object>>}\n\t\t */\n\t\tconst dateItems = ref([]);\n\n\t\t/**\n\t\t * calendarElement\n\t\t * @type {Ref<HTMLElement>}\n\t\t */\n\t\tconst calendarElement = ref();\n\n\t\t/**\n\t\t * Contents\n\t\t * @type {Ref<XoneDataCollection>}\n\t\t */\n\t\tconst contents = ref();\n\n\t\t/**\n\t\t * xoneView\n\t\t * @type {XoneView}\n\t\t */\n\t\tconst xoneView = inject(\"xoneView\");\n\n\t\tlet contentsItems = [];\n\n\t\t// Control key attributes\n\t\tlet dateFrom, dateTo, timeFrom, timeTo, colorView;\n\n\t\t// Init calendar\n\t\tonMounted(async () => {\n\t\t\tcontents.value = await props.xoneDataObject.getContents(props.attributes.contents);\n\t\t\t// Get key attributes\n\n\t\t\t/**\n\t\t\t * m_xmlNode\n\t\t\t * @type {{m_xmlNode:XmlNode}}\n\t\t\t */\n\t\t\tconst { m_xmlNode } = contents.value;\n\n\t\t\tm_xmlNode.SelectNodes(\"prop\").forEach((/** @type {XmlNode} */ e) => {\n\t\t\t\tif (e.getAttrValue(\"colorview\") === \"true\") colorView = e.getAttrValue(\"name\");\n\t\t\t\tif (e.getAttrValue(\"datefrom\") === \"true\") dateFrom = e.getAttrValue(\"name\");\n\t\t\t\tif (e.getAttrValue(\"dateto\") === \"true\") dateTo = e.getAttrValue(\"name\");\n\t\t\t\tif (e.getAttrValue(\"timefrom\") === \"true\") timeFrom = e.getAttrValue(\"name\");\n\t\t\t\tif (e.getAttrValue(\"timeto\") === \"true\") timeTo = e.getAttrValue(\"name\");\n\t\t\t});\n\t\t\t// Add control to view\n\t\t\tconst xoneControl = new XoneControl(props.attributes.name, calendarElement.value);\n\t\t\txoneControl.refresh = () => refresh();\n\t\t\txoneControl.nextMonth = () => changeMonth(1);\n\t\t\txoneControl.previusMonth = () => changeMonth(-1);\n\t\t\t// xoneView.deleteItem = (...Args) => console.log(\"deleteItem \", Args);\n\t\t\txoneView.addControl(xoneControl);\n\n\t\t\trefresh(true);\n\n\t\t\tawait contents.value.executeCollAction(\"ondateselected\", null, currentDate.value).catch(console.error);\n\t\t});\n\n\t\t// Close calendar\n\t\tonUnmounted(() => {\n\t\t\tif (contents.value) contents.value.clear();\n\t\t});\n\n\t\t/**\n\t\t * Refresh Calendar\n\t\t */\n\t\tconst refresh = async (isFirstLoad = false) => {\n\t\t\tconst moveTo = contents.value.getVariables(\"moveto\");\n\t\t\tif (moveTo) {\n\t\t\t\tcontents.value.setVariables(\"moveto\", null);\n\t\t\t\treturn await changeMonth(moveTo === \"next\" ? 1 : -1);\n\t\t\t}\n\t\t\tdrawMonth();\n\t\t\tloadDataAsync(isFirstLoad);\n\t\t};\n\n\t\t// Change to Next / Previus Month\n\t\tconst changeMonth = async (value) => {\n\t\t\ttry {\n\t\t\t\tif (value > 0) currentDate.value = currentDate.value.nextMonth();\n\t\t\t\telse currentDate.value = currentDate.value.previusMonth();\n\n\t\t\t\tdrawMonth();\n\n\t\t\t\tcalendarElement.value.animate(\n\t\t\t\t\t[\n\t\t\t\t\t\t{ opacity: 0, transform: `translateX(${value > 0 ? 100 : -100}px)` },\n\t\t\t\t\t\t{ opacity: 1, transform: \"translateX(0)\" },\n\t\t\t\t\t],\n\t\t\t\t\t{ duration: 100 }\n\t\t\t\t);\n\t\t\t\tawait new Promise((resolve) => setTimeout(() => resolve(), 100));\n\t\t\t\t// executenode onpageselected\n\t\t\t\tawait contents.value.executeCollAction(\"onpageselected\", null, currentDate.value);\n\t\t\t\t// executenode ondateselected\n\t\t\t\tawait contents.value.executeCollAction(\"ondateselected\", null, currentDate.value);\n\n\t\t\t\tloadDataAsync();\n\t\t\t} catch (ex) {\n\t\t\t\tconsole.error(ex);\n\t\t\t}\n\t\t};\n\n\t\t//\n\t\t// Change current month by swipe\n\t\tconst swipeHandler = new SwipeHandler(changeMonth);\n\t\tonMounted(() => {\n\t\t\tcalendarElement.value.setAttribute(\"swipeable\", false);\n\t\t\tswipeHandler.init(calendarElement.value);\n\t\t});\n\n\t\tonUnmounted(() => swipeHandler.clear());\n\n\t\tlet currentDate = ref(new Date());\n\n\t\t/**\n\t\t * Draw selected month\n\t\t */\n\t\tconst drawMonth = () => {\n\t\t\t// Reset items\n\t\t\tdateItems.value = [];\n\n\t\t\t// Selected month days count\n\t\t\tconst monthDays = currentDate.value.monthDays();\n\n\t\t\t//\n\t\t\t// Add days from previus month\n\n\t\t\t// First day of the month\n\t\t\tlet firstWeekDayOfMonth = currentDate.value.firstWeekDayOfMonth();\n\n\t\t\t// Week start day\n\t\t\tlet weekStart = weekStartLocale();\n\n\t\t\tif (weekStart === 1 && firstWeekDayOfMonth === 0) firstWeekDayOfMonth = 7;\n\n\t\t\tif (firstWeekDayOfMonth > weekStart) {\n\t\t\t\t// Previus  month\n\t\t\t\tconst previusMonthDate = currentDate.value.previusMonth();\n\n\t\t\t\t// Fill previus month days\n\t\t\t\tlet previusMonthDay = previusMonthDate.monthDays() - firstWeekDayOfMonth + weekStart + 1;\n\t\t\t\tfor (let i = firstWeekDayOfMonth; i > weekStart; i--) {\n\t\t\t\t\tconst date = new Date(previusMonthDate.getFullYear(), previusMonthDate.getMonth(), previusMonthDay);\n\t\t\t\t\t// Push item>\n\t\t\t\t\tdateItems.value.push({\n\t\t\t\t\t\tid: generateUniqueId(),\n\t\t\t\t\t\tday: previusMonthDay,\n\t\t\t\t\t\tdate,\n\t\t\t\t\t\tisCurrentMonth: false,\n\t\t\t\t\t\tvalues: [],\n\t\t\t\t\t});\n\t\t\t\t\tpreviusMonthDay++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add  month days\n\t\t\tfor (let i = 1; i <= monthDays; i++) {\n\t\t\t\tconst date = new Date(currentDate.value.getFullYear(), currentDate.value.getMonth(), i);\n\t\t\t\t// Push item>\n\t\t\t\tdateItems.value.push({\n\t\t\t\t\tid: generateUniqueId(),\n\t\t\t\t\tday: i,\n\t\t\t\t\tdate,\n\t\t\t\t\tisCurrentMonth: true,\n\t\t\t\t\tvalues: [],\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//\n\t\t\t// Add days from next month\n\n\t\t\t// Week end day\n\t\t\tconst weekEnd = weekStart === 0 ? 6 : 7;\n\n\t\t\t// Last day of the month\n\t\t\tlet lastWeekDayOfMonth = currentDate.value.lastWeekDayOfMonth();\n\t\t\tif (weekEnd === 7 && lastWeekDayOfMonth === 0) lastWeekDayOfMonth = 7;\n\t\t\tlet nextMonthDay = 1;\n\n\t\t\t// Next  month\n\t\t\tconst nextMonthDate = currentDate.value.nextMonth();\n\n\t\t\tfor (let i = lastWeekDayOfMonth; i < weekEnd; i++) {\n\t\t\t\tconst date = new Date(nextMonthDate.getFullYear(), nextMonthDate.getMonth(), nextMonthDay);\n\t\t\t\tdateItems.value.push({\n\t\t\t\t\tid: generateUniqueId(),\n\t\t\t\t\tday: nextMonthDay,\n\t\t\t\t\tdate,\n\t\t\t\t\tisCurrentMonth: false,\n\t\t\t\t\tvalues: [],\n\t\t\t\t});\n\t\t\t\tnextMonthDay++;\n\t\t\t}\n\n\t\t\t// executenode oncelldraw\n\t\t\tdateItems.value.forEach((e) => contents.value.executeCollAction(\"oncelldraw\", null, e.date).catch(console.error));\n\t\t};\n\n\t\tlet currentContentsFilter = \"\";\n\t\t/**\n\t\t * Load contents data\n\t\t */\n\t\tconst loadDataAsync = (isFirstLoad = false) => {\n\t\t\t// Add filter from current month\n\t\t\tcontents.value.setFilter(contents.value.getFilter()?.replace(currentContentsFilter, \"\"));\n\t\t\tcurrentContentsFilter = `${dateFrom}>='${dateItems.value[0].date}' AND ${dateTo}<'${addDays(\n\t\t\t\tdateItems.value[dateItems.value.length - 1].date,\n\t\t\t\t1\n\t\t\t)}'`;\n\t\t\tcontents.value.setFilter(currentContentsFilter);\n\t\t\t// Load data\n\t\t\tcontents.value.loadAll(false).then(() => drawMarkers());\n\t\t};\n\n\t\t/**\n\t\t * Draw calendar markers\n\t\t */\n\t\tconst drawMarkers = async () => {\n\t\t\tcontentsItems.value = [];\n\t\t\t// Clear dateItems values\n\t\t\tObject.values(dateItems.value).forEach((value) => (value.values = []));\n\t\t\tfor (let i = 0; i < contents.value.length; i++) {\n\t\t\t\tconst contentsItem = await contents.value.get(i);\n\t\t\t\tcontentsItems.value.push({\n\t\t\t\t\tindex: i,\n\t\t\t\t\tobj: contentsItem,\n\t\t\t\t});\n\n\t\t\t\t/**\n\t\t\t\t * contentsDate\n\t\t\t\t * @type {Date}\n\t\t\t\t */\n\t\t\t\tconst contentsDate = contentsItem[dateFrom];\n\t\t\t\tconst color = contentsItem[colorView];\n\n\t\t\t\tif (!contentsDate || !color) continue;\n\n\t\t\t\t// Fill dateItems values\n\t\t\t\tObject.values(dateItems.value).forEach((value) => {\n\t\t\t\t\tif (value.date.isSameDate(contentsDate)) {\n\t\t\t\t\t\tvalue.values.push({ id: i, itemIndex: value.index, color });\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tconst onDateSelected = async (item) => {\n\t\t\ttry {\n\t\t\t\tlet currentMonth = currentDate.value.getMonth();\n\t\t\t\tcurrentDate.value = item.date;\n\n\t\t\t\tif (currentDate.value.getMonth() !== currentMonth) {\n\t\t\t\t\t// drawMonth\n\t\t\t\t\tdrawMonth();\n\t\t\t\t\tcalendarElement.value.animate(\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{ opacity: 0, transform: `translateX(${currentDate.value.getMonth() > currentMonth ? 100 : -100}px)` },\n\t\t\t\t\t\t\t{ opacity: 1, transform: \"translateX(0)\" },\n\t\t\t\t\t\t],\n\t\t\t\t\t\t{ duration: 100 }\n\t\t\t\t\t);\n\t\t\t\t\tawait new Promise((resolve) => setTimeout(() => resolve(), 100));\n\t\t\t\t\t// executenode onpageselected\n\t\t\t\t\tawait contents.value.executeCollAction(\"onpageselected\", null, item.date);\n\t\t\t\t\t// executenode ondateselected\n\t\t\t\t\tawait contents.value.executeCollAction(\"ondateselected\", null, item.date);\n\t\t\t\t\tloadDataAsync();\n\t\t\t\t}\n\t\t\t\t// executenode ondateselected\n\t\t\t\telse await contents.value.executeCollAction(\"ondateselected\", null, item.date);\n\t\t\t} catch (ex) {\n\t\t\t\tconsole.log(ex);\n\t\t\t}\n\t\t};\n\n\t\treturn {\n\t\t\tcalendarElement,\n\t\t\tcontentsItems,\n\t\t\tdateItems,\n\t\t\tcurrentDate,\n\t\t\tonDateSelected,\n\t\t\tweekDays: getWeekDays(props.attributes.weekdaysLongname),\n\t\t};\n\t},\n};\n</script>\n\n<style scoped>\n.xone-calendar {\n\tdisplay: flex;\n\tflex-direction: column;\n\tposition: relative;\n\ttop: 0;\n\tleft: 0;\n\tbackground-color: white;\n\toverflow: hidden;\n\twidth: var(--contents-width);\n\theight: var(--contents-height);\n\tmax-height: var(--contents-max-height);\n}\n\nol {\n\tlist-style: none;\n\tdisplay: grid;\n\tgrid-template-columns: repeat(7, 1fr);\n}\n\n.xone-calendar-days {\n\tgrid-auto-rows: 1fr;\n\twidth: 100%;\n\theight: 100%;\n\toverflow: hidden;\n\tborder: 1px lightgray solid;\n\tbox-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\t-webkit-box-sizing: border-box;\n\tgrid-gap: 1px;\n\tbackground-color: lightgray;\n}\n\n.xone-calendar-header {\n\tbackground-color: white;\n}\n\n.xone-calendar-days li:hover {\n\toutline: 1px #ececec solid;\n\toutline-offset: -1px;\n}\n\nli {\n\tposition: relative;\n\toverflow: hidden;\n\tbox-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\t-webkit-box-sizing: border-box;\n\tborder: 1px transparent solid;\n\tbackground-color: white;\n\tcursor: pointer;\n}\n\nli > div:first-child {\n\tposition: absolute;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\ttop: 1px;\n\tright: 1px;\n\twidth: 2ch;\n\theight: 2ch;\n\tfont-size: 0.6rem;\n\tpadding: 3px;\n\tborder-radius: 90px;\n\tcolor: black;\n\tcursor: pointer;\n\tz-index: 1;\n}\n\nli > p {\n\tfont-size: 0.75rem;\n\tfont-weight: lighter;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tcursor: pointer;\n}\n\n.xone-calendar-events {\n\tpadding: 0 5% 0;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tposition: absolute;\n\theight: 100%;\n\twidth: 90%;\n\tbackground-color: transparent;\n}\n\n.xone-calendar-events > div {\n\tmargin: auto 1px 10% 1px;\n\tflex-grow: 1;\n\theight: 15%;\n\tmax-height: 15px;\n\tborder-radius: 2px;\n}\n</style>\n","const locale = Intl.DateTimeFormat().resolvedOptions().locale; //navigator.language;\n\n// Convert date to xone date format\nif (!Date.prototype.toXoneDate)\n\t(function() {\n\t\tconst pad = (number) => (number < 10 ? `0${number}` : number);\n\t\tDate.prototype.toXoneDate = function(type = \"DT\") {\n\t\t\tlet value = this.getFullYear() + \"-\" + pad(this.getMonth() + 1) + \"-\" + pad(this.getDate());\n\t\t\tif (type === \"DT\") value += \"T\" + pad(this.getHours()) + \":\" + pad(this.getMinutes());\n\t\t\treturn value;\n\t\t};\n\n\t\tDate.prototype.toString = function() {\n\t\t\treturn (\n\t\t\t\tthis.getFullYear() +\n\t\t\t\t\"-\" +\n\t\t\t\tpad(this.getMonth() + 1) +\n\t\t\t\t\"-\" +\n\t\t\t\tpad(this.getDate()) +\n\t\t\t\t\" \" +\n\t\t\t\tpad(this.getHours()) +\n\t\t\t\t\":\" +\n\t\t\t\tpad(this.getMinutes()) +\n\t\t\t\t\":\" +\n\t\t\t\tpad(this.getSeconds())\n\t\t\t);\n\t\t};\n\t})();\n\n// Month Days\nif (!Date.prototype.monthDays)\n\tDate.prototype.monthDays = function() {\n\t\treturn new Date(this.getFullYear(), this.getMonth() + 1, 0).getDate();\n\t};\n\nif (!Date.prototype.firstWeekDayOfMonth)\n\tDate.prototype.firstWeekDayOfMonth = function() {\n\t\treturn new Date(this.getFullYear(), this.getMonth(), 1).getDay();\n\t};\n\nif (!Date.prototype.lastWeekDayOfMonth)\n\tDate.prototype.lastWeekDayOfMonth = function() {\n\t\treturn new Date(\n\t\t\tthis.getFullYear(),\n\t\t\tthis.getMonth(),\n\n\t\t\tthis.monthDays()\n\t\t).getDay();\n\t};\n\nif (!Date.prototype.previusMonth)\n\tDate.prototype.previusMonth = function() {\n\t\tlet year = this.getFullYear();\n\t\tlet month = this.getMonth();\n\t\tif (month === 0) {\n\t\t\tmonth = 12;\n\t\t\tyear--;\n\t\t}\n\t\treturn new Date(`${year}-${month}-01`);\n\t};\n\nif (!Date.prototype.nextMonth)\n\t(function() {\n\t\tDate.prototype.nextMonth = function() {\n\t\t\tlet year = this.getFullYear();\n\t\t\tlet month = this.getMonth() + 2;\n\t\t\tif (month > 12) {\n\t\t\t\tmonth = 1;\n\t\t\t\tyear++;\n\t\t\t}\n\t\t\treturn new Date(`${year}-${month}-01`);\n\t\t};\n\t})();\n\nif (!Date.prototype.isSameDate)\n\t(function() {\n\t\tDate.prototype.isSameDate = function(date) {\n\t\t\treturn this.getDate() === date.getDate() && this.getMonth() === date.getMonth() && this.getFullYear() === date.getFullYear();\n\t\t};\n\t})();\n\nconst weekStart = (region, language) => {\n\tconst regionSat = \"AEAFBHDJDZEGIQIRJOKWLYOMQASDSY\".match(/../g);\n\tconst regionSun = \"AGARASAUBDBRBSBTBWBZCACNCODMDOETGTGUHKHNIDILINJMJPKEKHKRLAMHMMMOMTMXMZNINPPAPEPHPKPRPTPYSASGSVTHTTTWUMUSVEVIWSYEZAZW\".match(\n\t\t/../g\n\t);\n\tconst languageSat = [\"ar\", \"arq\", \"arz\", \"fa\"];\n\tconst languageSun = \"amasbndzengnguhehiidjajvkmknkolomhmlmrmtmyneomorpapssdsmsnsutatethtnurzhzu\".match(/../g);\n\n\treturn region\n\t\t? regionSun.includes(region)\n\t\t\t? 0\n\t\t\t: regionSat.includes(region)\n\t\t\t? 0 //6\n\t\t\t: 1\n\t\t: languageSun.includes(language)\n\t\t? 0\n\t\t: languageSat.includes(language)\n\t\t? 0 //6\n\t\t: 1;\n};\n\n/**\n * Get week start day depending on navigator language\n * @returns {number}\n */\nexport const weekStartLocale = () => {\n\tconst parts = locale.match(/^([a-z]{2,3})(?:-([a-z]{3})(?=$|-))?(?:-([a-z]{4})(?=$|-))?(?:-([a-z]{2}|\\d{3})(?=$|-))?/i);\n\treturn weekStart(parts[4], parts[1]);\n};\n\nexport const addDays = (date, days) => {\n\tconst result = new Date(date);\n\tresult.setDate(result.getDate() + days);\n\treturn result;\n};\n\n/**\n * Get week days\n * @param {boolean} [isLongFormat]\n * @returns {Array<string>}\n */\nexport const getWeekDays = (isLongFormat = false) => {\n\tconst weekdayDateMap = [...Array(8).keys()].map((e) => new Date(2021, 1, e));\n\tconst weekDays = [];\n\tfor (let i = weekStartLocale(); i < weekStartLocale() + 7; i++)\n\t\tweekDays.push(\n\t\t\tnew Intl.DateTimeFormat(locale, {\n\t\t\t\tweekday: isLongFormat ? \"long\" : \"short\",\n\t\t\t}).format(weekdayDateMap[i])\n\t\t);\n\n\treturn weekDays;\n};\n","import { render } from \"./Calendar.vue?vue&type=template&id=9e1f59f0&scoped=true\"\nimport script from \"./Calendar.vue?vue&type=script&lang=js\"\nexport * from \"./Calendar.vue?vue&type=script&lang=js\"\n\nimport \"./Calendar.vue?vue&type=style&index=0&id=9e1f59f0&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9e1f59f0\"]])\n\nexport default __exports__","<template>\n\t<div v-if=\"isLoading\" class=\"xone-loader\"><div></div></div>\n\t<canvas v-show=\"!isLoading\" :id=\"`chart-${breadcrumbId}-${attributes.name}${objectIndex}`\"></canvas>\n</template>\n\n<script>\nimport { inject, ref, watchEffect, Ref, PropType, onUnmounted, nextTick, onMounted, watch } from \"vue\";\n\nimport { PropAttributes } from \"../../../composables/XoneAttributesHandler\";\nimport { XoneDataObject } from \"../../../composables/appData/core/XoneDataObject\";\nimport { XoneDataCollection } from \"../../../composables/appData/core/XoneDataCollection\";\nimport { hexToRgbA } from \"../../../composables/helperFunctions/ChartsHelper\";\nimport { XoneControl, XoneView } from \"../../../composables/XoneViewsHandler\";\nimport XmlNode from \"../../../composables/appData/Xml/JSONImpl/XmlNode\";\nimport { loadChart } from \"../../../composables/helperFunctions/ChartHelper\";\n\nexport default {\n\tname: \"ChartBar\",\n\tprops: {\n\t\t/**\n\t\t * xoneDataObject\n\t\t * @type {PropType<XoneDataObject>}\n\t\t * */\n\t\txoneDataObject: { type: Object, required: true },\n\t\t/**\n\t\t * attributes\n\t\t * @type { PropType<PropAttributes>}\n\t\t */\n\t\tattributes: { type: Object, default: null, required: true },\n\t\tcontrolWidth: { type: Number, default: 0 },\n\t\tcontrolHeight: { type: Number, default: 0 },\n\t},\n\tsetup(props) {\n\t\t/**\n\t\t * breadcrumbId\n\t\t * @type {string}\n\t\t */\n\t\tconst breadcrumbId = inject(\"breadcrumbId\");\n\n\t\t/**\n\t\t * objectInfo\n\t\t * @type {import('../../../composables/AppDataHandler').Objectinfo}\n\t\t */\n\t\tconst objectInfo = inject(\"objectInfo\");\n\n\t\tconst objectIndex = objectInfo.isContents ? objectInfo.recordIndex : \"\";\n\n\t\t/**\n\t\t * Contents\n\t\t * @type {Ref<XoneDataCollection>}\n\t\t */\n\t\tconst contents = ref();\n\n\t\t/**\n\t\t * xoneView\n\t\t * @type {XoneView}\n\t\t */\n\t\tconst xoneView = inject(\"xoneView\");\n\n\t\t/** @type {HTMLCanvasElement} */\n\t\tlet ctx;\n\n\t\tconst isLoading = ref(true);\n\n\t\tlet gridLines = false;\n\n\t\tlet refreshTimeOut;\n\t\tlet refreshTime = 100;\n\n\t\tconst refresh = async () => {\n\t\t\tif (!ctx) return;\n\n\t\t\tif (refreshTimeOut) clearTimeout(refreshTimeOut);\n\n\t\t\tisLoading.value = true;\n\n\t\t\trefreshTimeOut = setTimeout(async () => {\n\t\t\t\tif (!contents.value) contents.value = await props.xoneDataObject.getContents(props.attributes.contents);\n\n\t\t\t\t// Load contents data\n\t\t\t\tawait contents.value.loadAll(false);\n\n\t\t\t\t/**\n\t\t\t\t * contents data\n\t\t\t\t * @type {Ref<Array<XoneDataObject>>}\n\t\t\t\t */\n\t\t\t\tconst data = {\n\t\t\t\t\tlabels: [],\n\t\t\t\t\tdatasets: [],\n\t\t\t\t};\n\n\t\t\t\t// Fill chart data\n\t\t\t\tlet chartSerieTitle;\n\t\t\t\tconst categoryNames = [];\n\t\t\t\tconst categoryTitles = [];\n\t\t\t\tconst categoryColors = [];\n\t\t\t\tconst barThickness = [];\n\n\t\t\t\t/**\n\t\t\t\t * m_xmlNode\n\t\t\t\t * @type {{m_xmlNode:XmlNode}}\n\t\t\t\t */\n\t\t\t\tconst { m_xmlNode } = contents.value;\n\n\t\t\t\tm_xmlNode.SelectNodes(\"prop\").forEach((/** @type {XmlNode} */ e) => {\n\t\t\t\t\t// Chart serie title\n\t\t\t\t\tif (e.getAttrValue(\"chart-serie-title\") === \"true\") chartSerieTitle = e.getAttrValue(\"name\");\n\n\t\t\t\t\t// Chart value\n\t\t\t\t\tif (e.getAttrValue(\"chart-category\") !== \"true\") return;\n\t\t\t\t\tcategoryNames.push(e.getAttrValue(\"name\"));\n\t\t\t\t\tcategoryTitles.push(e.getAttrValue(\"title\"));\n\n\t\t\t\t\t// Chart category color\n\t\t\t\t\tcategoryColors.push(e.getAttrValue(\"chart-category-color\"));\n\n\t\t\t\t\t// Bar Thickness\n\t\t\t\t\tbarThickness.push(e.getAttrValue(\"chart-bar-thickness\") || undefined);\n\t\t\t\t});\n\n\t\t\t\t// Refresh data\n\t\t\t\tdata.datasets = [];\n\t\t\t\tdata.labels = [];\n\n\t\t\t\t// Create data\n\t\t\t\tcategoryNames.forEach(async (value, index) => {\n\t\t\t\t\tconst dataset = { label: categoryTitles[index] };\n\t\t\t\t\tdataset.data = [];\n\t\t\t\t\tdataset.backgroundColor = [];\n\t\t\t\t\tdataset.borderColor = [];\n\t\t\t\t\tdataset.borderWidth = 2;\n\t\t\t\t\tdataset.barThickness = barThickness[index];\n\n\t\t\t\t\tfor (let i = 0; i < contents.value.length; i++) {\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * rowDataObject\n\t\t\t\t\t\t * @type {XoneDataObject}\n\t\t\t\t\t\t */\n\t\t\t\t\t\tconst rowDataObject = await contents.value.get(i);\n\n\t\t\t\t\t\t// Chart Serie Title\n\t\t\t\t\t\tif (chartSerieTitle && index === 0) data.labels.push(rowDataObject[chartSerieTitle]);\n\n\t\t\t\t\t\tdataset.data.push(rowDataObject[value]);\n\t\t\t\t\t\tdataset.backgroundColor.push(hexToRgbA(categoryColors[index], 0.7));\n\t\t\t\t\t\tdataset.borderColor.push(categoryColors[index]);\n\t\t\t\t\t}\n\t\t\t\t\tdata.datasets.push(dataset);\n\t\t\t\t\tif (index === categoryNames.length - 1) {\n\t\t\t\t\t\tcreateChart(data);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tisLoading.value = false;\n\t\t\t}, refreshTime);\n\t\t};\n\n\t\tlet myChart;\n\t\tconst createChart = async (data) => {\n\t\t\twhile (groupId !== activeGroup.value) await new Promise((resolve) => setTimeout(() => resolve(), 150));\n\t\t\tif (!myChart) {\n\t\t\t\tmyChart = new Chart(ctx, {\n\t\t\t\t\ttype: props.attributes.viewMode === \"linechart\" ? \"line\" : \"bar\",\n\t\t\t\t\tdata: data,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\t// animation: false,\n\t\t\t\t\t\tresponsive: true,\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\tlegend: { display: false },\n\t\t\t\t\t\telements: {\n\t\t\t\t\t\t\tpoint: {\n\t\t\t\t\t\t\t\tradius: 3,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscales: {\n\t\t\t\t\t\t\txAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstacked: props.attributes.viewMode === \"stackedbarchart\",\n\t\t\t\t\t\t\t\t\tgridLines: { display: false },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tyAxes: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstacked: props.attributes.viewMode === \"stackedbarchart\",\n\t\t\t\t\t\t\t\t\tgridLines: { display: gridLines },\n\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\t// Vamos a quitar la animacion inicial y se la asignamos una vez existen los datos, as no se bloquea el ui si existen ms cargas de contents en pantalla\n\t\t\t\tmyChart.options.animation = {\n\t\t\t\t\tduration: 1000,\n\t\t\t\t\teasing: \"easeOutQuart\",\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tmyChart.data = data;\n\t\t\t\tmyChart.update();\n\t\t\t}\n\t\t\t// En lugar de la animacin del chart, hacemos que aparezca con un fadeIn\n\t\t\t// ctx.animate(\n\t\t\t// \t[\n\t\t\t// \t\t// keyframes\n\t\t\t// \t\t{ opacity: 0.1 },\n\t\t\t// \t\t{ opacity: 1 },\n\t\t\t// \t],\n\t\t\t// \t{\n\t\t\t// \t\t// timing options\n\t\t\t// \t\tduration: 500,\n\t\t\t// \t}\n\t\t\t// );\n\t\t};\n\n\t\t/**\n\t\t * Group Id\n\t\t * @type {string}\n\t\t */\n\t\tconst groupId = inject(\"groupId\");\n\n\t\t/**\n\t\t * Group active\n\t\t * @type {Ref<string>}\n\t\t */\n\t\tconst { activeGroup } = inject(\"groupHandler\");\n\n\t\t// Get chart element\n\t\tonMounted(() => {\n\t\t\tloadChart(async () => {\n\t\t\t\tawait new Promise((resolve) => setTimeout(() => nextTick().then(() => resolve()), 500));\n\t\t\t\tctx = document.getElementById(`chart-${breadcrumbId}-${props.attributes.name}${objectIndex}`);\n\t\t\t\t// Add control to view\n\t\t\t\tconst xoneControl = new XoneControl(props.attributes.name);\n\t\t\t\txoneControl.refresh = refresh;\n\t\t\t\txoneView.addControl(xoneControl);\n\t\t\t\twatchEffect(async () => {\n\t\t\t\t\tif (contents.value || groupId !== activeGroup.value) return;\n\t\t\t\t\trefresh();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tlet updateChartTimeout;\n\t\tconst updateChart = async () => {\n\t\t\tif (!myChart) return;\n\t\t\tif (updateChartTimeout) clearTimeout(updateChartTimeout);\n\t\t\tupdateChartTimeout = setTimeout(async () => {\n\t\t\t\tawait nextTick();\n\t\t\t\tcreateChart();\n\t\t\t}, 250);\n\t\t};\n\n\t\twatch(\n\t\t\t() => props.controlWidth,\n\t\t\t() => updateChart()\n\t\t);\n\t\twatch(\n\t\t\t() => props.controlHeight,\n\t\t\t() => updateChart()\n\t\t);\n\n\t\t// Clear contents\n\t\tonUnmounted(() => {\n\t\t\tif (contents.value) contents.value.clear();\n\t\t});\n\n\t\treturn { breadcrumbId, objectIndex, isLoading };\n\t},\n};\n</script>\n\n<style scoped>\ncanvas {\n\tposition: relative;\n\twidth: calc(var(--contents-width)-4px);\n\theight: calc(var(--contents-height)-4px);\n\tmax-height: var(--contents-max-height);\n\tanimation: fadeIn 0.5s;\n}\n</style>\n","export const hexToRgbA = (hex, opacity = 1) => {\n  let c;\n  if (/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)) {\n    c = hex.substring(1).split(\"\");\n    if (c.length == 3) {\n      c = [c[0], c[0], c[1], c[1], c[2], c[2]];\n    }\n    c = \"0x\" + c.join(\"\");\n    return \"rgba(\" + [(c >> 16) & 255, (c >> 8) & 255, c & 255].join(\",\") + \",\" + opacity + \")\";\n  }\n  return hex;\n};\n\nlet isLoadingChart = false;\n\nexport const getIsLoadingChart = () => isLoadingChart;\nexport const setIsLoadingChart = (value) => (isLoadingChart = value);\n","export const loadChart = Function(\n\t\"cBF\",\n\t'(async()=>{if(window.Chart)return cBF();try{await import(\"../modules/chartjs/Chart.min.js\");cBF();}catch(ex){console.error(ex);}finally{cBF();}})()'\n);\n","import { render } from \"./ChartBar.vue?vue&type=template&id=3e8af944&scoped=true\"\nimport script from \"./ChartBar.vue?vue&type=script&lang=js\"\nexport * from \"./ChartBar.vue?vue&type=script&lang=js\"\n\nimport \"./ChartBar.vue?vue&type=style&index=0&id=3e8af944&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3e8af944\"]])\n\nexport default __exports__","<template>\n\t<div v-if=\"isLoading\" class=\"xone-loader\"><div></div></div>\n\t<canvas v-show=\"!isLoading\" :id=\"`chart-${breadcrumbId}-${attributes.name}${objectIndex}`\"></canvas>\n</template>\n\n<script>\nimport { inject, ref, watchEffect, Ref, PropType, onUnmounted, nextTick, onMounted, watch } from \"vue\";\n\nimport { PropAttributes } from \"../../../composables/XoneAttributesHandler\";\nimport { XoneDataObject } from \"../../../composables/appData/core/XoneDataObject\";\nimport { XoneDataCollection } from \"../../../composables/appData/core/XoneDataCollection\";\n// import { hexToRgbA } from \"../../../composables/helperFunctions/ChartsHelper\";\nimport { XoneControl, XoneView } from \"../../../composables/XoneViewsHandler\";\nimport XmlNode from \"../../../composables/appData/Xml/JSONImpl/XmlNode\";\nimport { loadChart } from \"../../../composables/helperFunctions/ChartHelper\";\n\nexport default {\n\tname: \"ChartPie\",\n\tprops: {\n\t\t/**\n\t\t * xoneDataObject\n\t\t * @type {PropType<XoneDataObject>}\n\t\t * */\n\t\txoneDataObject: { type: Object, required: true },\n\t\t/**\n\t\t * attributes\n\t\t * @type { PropType<PropAttributes>}\n\t\t */\n\t\tattributes: { type: Object, default: null, required: true },\n\t\tcontrolWidth: { type: Number, default: 0 },\n\t\tcontrolHeight: { type: Number, default: 0 },\n\t},\n\tsetup(props) {\n\t\t/**\n\t\t * breadcrumbId\n\t\t * @type {string}\n\t\t */\n\t\tconst breadcrumbId = inject(\"breadcrumbId\");\n\n\t\t/**\n\t\t * objectInfo\n\t\t * @type {import('../../../composables/AppDataHandler').Objectinfo}\n\t\t */\n\t\tconst objectInfo = inject(\"objectInfo\");\n\n\t\tconst objectIndex = objectInfo.isContents ? objectInfo.recordIndex : \"\";\n\n\t\t/**\n\t\t * Contents\n\t\t * @type {Ref<XoneDataCollection>}\n\t\t */\n\t\tconst contents = ref();\n\n\t\t/**\n\t\t * xoneView\n\t\t * @type {XoneView}\n\t\t */\n\t\tconst xoneView = inject(\"xoneView\");\n\n\t\t/** @type {HTMLCanvasElement} */\n\t\tlet ctx;\n\n\t\tconst isLoading = ref(true);\n\n\t\tlet refreshTimeOut;\n\t\tlet refreshTime = 100;\n\n\t\tconst refresh = async () => {\n\t\t\tif (!ctx) return;\n\n\t\t\tisLoading.value = true;\n\n\t\t\tif (refreshTimeOut) clearTimeout(refreshTimeOut);\n\n\t\t\trefreshTimeOut = setTimeout(async () => {\n\t\t\t\tif (!contents.value) contents.value = await props.xoneDataObject.getContents(props.attributes.contents);\n\n\t\t\t\t// Load contents data\n\t\t\t\tawait contents.value.loadAll(false);\n\n\t\t\t\t/**\n\t\t\t\t * contents data\n\t\t\t\t * @type {Ref<Array<XoneDataObject>>}\n\t\t\t\t */\n\t\t\t\tconst data = {\n\t\t\t\t\tlabels: [],\n\t\t\t\t\tdatasets: [],\n\t\t\t\t};\n\n\t\t\t\t// Fill chart data\n\t\t\t\tlet chartSerieTitle;\n\t\t\t\tlet chartName;\n\t\t\t\tlet chartTitle;\n\t\t\t\tlet serieColor = \"\";\n\n\t\t\t\t/**\n\t\t\t\t * m_xmlNode\n\t\t\t\t * @type {{m_xmlNode:XmlNode}}\n\t\t\t\t */\n\t\t\t\tconst { m_xmlNode } = contents.value;\n\n\t\t\t\tm_xmlNode.SelectNodes(\"prop\").forEach((/** @type {XmlNode} */ e) => {\n\t\t\t\t\t// Chart serie title\n\t\t\t\t\tif (e.getAttrValue(\"chart-serie-title\") === \"true\") chartSerieTitle = e.getAttrValue(\"name\");\n\n\t\t\t\t\t// Chart value\n\t\t\t\t\tif (e.getAttrValue(\"chart-value\") === \"true\") {\n\t\t\t\t\t\tchartName = e.getAttrValue(\"name\");\n\t\t\t\t\t\tchartTitle = e.getAttrValue(\"title\");\n\t\t\t\t\t}\n\n\t\t\t\t\t// Chart serie color\n\t\t\t\t\tif (e.getAttrValue(\"chart-serie-color\") === \"true\") serieColor = e.getAttrValue(\"name\");\n\t\t\t\t});\n\n\t\t\t\t// Clear data\n\t\t\t\tdata.datasets = [];\n\t\t\t\tdata.labels = [];\n\n\t\t\t\tconst dataset = { label: chartTitle };\n\n\t\t\t\tdataset.data = [];\n\t\t\t\tdataset.backgroundColor = [];\n\t\t\t\tdataset.borderColor = [];\n\t\t\t\tdataset.borderWidth = 1;\n\n\t\t\t\t// Create data\n\t\t\t\tfor (let i = 0; i < contents.value.length; i++) {\n\t\t\t\t\t/**\n\t\t\t\t\t * rowDataObject\n\t\t\t\t\t * @type {XoneDataObject}\n\t\t\t\t\t */\n\t\t\t\t\tconst rowDataObject = await contents.value.get(i);\n\n\t\t\t\t\t// Chart Serie Title\n\t\t\t\t\tif (chartSerieTitle) data.labels.push(rowDataObject[chartSerieTitle]);\n\n\t\t\t\t\tdataset.data.push(rowDataObject[chartName]);\n\t\t\t\t\tdataset.backgroundColor.push(rowDataObject[serieColor]);\n\t\t\t\t}\n\t\t\t\tdata.datasets.push(dataset);\n\n\t\t\t\tcreateChart(data);\n\t\t\t\tisLoading.value = false;\n\t\t\t}, refreshTime);\n\t\t};\n\n\t\tlet myChart;\n\t\tconst createChart = async (data) => {\n\t\t\twhile (groupId !== activeGroup.value) await new Promise((resolve) => setTimeout(() => resolve(), 150));\n\t\t\tif (!myChart) {\n\t\t\t\tmyChart = new Chart(ctx, {\n\t\t\t\t\ttype: props.attributes.viewMode === \"piechart\" ? \"pie\" : \"doughnut\",\n\t\t\t\t\tdata: data,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tcutoutPercentage: props.attributes.viewMode === \"piechart\" ? 0 : 70,\n\t\t\t\t\t\t// animation: false,\n\t\t\t\t\t\tmaintainAspectRatio: false,\n\t\t\t\t\t\tresponsive: true,\n\t\t\t\t\t\t// animation: { duration: 1000 },\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\t// Vamos a quitar la animacion inicial y se la asignamos una vez existen los datos, as no se bloquea el ui si existen ms cargas de contents en pantalla\n\t\t\t\tmyChart.options.animation = {\n\t\t\t\t\tduration: 1000,\n\t\t\t\t\teasing: \"easeOutQuart\",\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tmyChart.data = data;\n\t\t\t\tmyChart.update();\n\t\t\t}\n\t\t\t// En lugar de la animacin del chart, hacemos que aparezca con un fadeIn\n\t\t\t// ctx.animate(\n\t\t\t// \t[\n\t\t\t// \t\t// keyframes\n\t\t\t// \t\t{ opacity: 0.1 },\n\t\t\t// \t\t{ opacity: 1 },\n\t\t\t// \t],\n\t\t\t// \t{\n\t\t\t// \t\t// timing options\n\t\t\t// \t\tduration: 500,\n\t\t\t// \t}\n\t\t\t// );\n\t\t};\n\n\t\t/**\n\t\t * Group Id\n\t\t * @type {string}\n\t\t */\n\t\tconst groupId = inject(\"groupId\");\n\n\t\t/**\n\t\t * Group active\n\t\t * @type {Ref<string>}\n\t\t */\n\t\tconst { activeGroup } = inject(\"groupHandler\");\n\n\t\t// Get chart element\n\t\tonMounted(() => {\n\t\t\tloadChart(async () => {\n\t\t\t\tawait new Promise((resolve) => setTimeout(() => nextTick().then(() => resolve()), 500));\n\n\t\t\t\tctx = document.getElementById(`chart-${breadcrumbId}-${props.attributes.name}${objectIndex}`);\n\t\t\t\t// Add control to view\n\t\t\t\tconst xoneControl = new XoneControl(props.attributes.name);\n\t\t\t\txoneControl.refresh = refresh;\n\t\t\t\txoneView.addControl(xoneControl);\n\t\t\t\twatchEffect(async () => {\n\t\t\t\t\tif (contents.value || groupId !== activeGroup.value) return;\n\t\t\t\t\trefresh();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tlet updateChartTimeout;\n\t\tconst updateChart = async () => {\n\t\t\tif (!myChart) return;\n\t\t\tif (updateChartTimeout) clearTimeout(updateChartTimeout);\n\t\t\tupdateChartTimeout = setTimeout(async () => {\n\t\t\t\tawait nextTick();\n\t\t\t\tcreateChart();\n\t\t\t}, 250);\n\t\t};\n\n\t\twatch(\n\t\t\t() => props.controlWidth,\n\t\t\t() => updateChart()\n\t\t);\n\t\twatch(\n\t\t\t() => props.controlHeight,\n\t\t\t() => updateChart()\n\t\t);\n\n\t\t// Clear contents\n\t\tonUnmounted(() => {\n\t\t\tif (contents.value) contents.value.clear();\n\t\t});\n\n\t\treturn { breadcrumbId, objectIndex, isLoading };\n\t},\n};\n</script>\n\n<style scoped>\ncanvas {\n\tposition: relative;\n\twidth: calc(var(--contents-width)-4px);\n\theight: calc(var(--contents-height)-4px);\n\tmax-height: var(--contents-max-height);\n\tanimation: fadeIn 0.5s;\n}\n</style>\n","import { render } from \"./ChartPie.vue?vue&type=template&id=6dd6073e&scoped=true\"\nimport script from \"./ChartPie.vue?vue&type=script&lang=js\"\nexport * from \"./ChartPie.vue?vue&type=script&lang=js\"\n\nimport \"./ChartPie.vue?vue&type=style&index=0&id=6dd6073e&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6dd6073e\"]])\n\nexport default __exports__","<template>\n\t<div class=\"xone-picturemap\">\n\t\t<!-- Zoom Buttons -->\n\t\t<div class=\"xone-picturemap-zoom\">\n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\t@click=\"modifyZoom(0.5)\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\tbackgroundColor: (zoom < 5 && '#fff') || '#f4f4f4',\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\t+\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\t@click=\"zoom > 1 && modifyZoom(-0.5)\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\topacity: zoom <= 1 ? 0.6 : 1,\n\t\t\t\t\t\tbackgroundColor: (zoom > 1 && '#fff') || '#f4f4f4',\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\t-\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<input\n\t\t\t\tv-if=\"!hideRange\"\n\t\t\t\t@click=\"$event.stopPropagation()\"\n\t\t\t\t@mousemove=\"$event.stopPropagation()\"\n\t\t\t\ttype=\"range\"\n\t\t\t\torient=\"vertical\"\n\t\t\t\tv-model=\"zoom\"\n\t\t\t\tmin=\"1\"\n\t\t\t\tmax=\"5\"\n\t\t\t\tstep=\".25\"\n\t\t\t/>\n\t\t</div>\n\t\t<!-- PictureMap Container -->\n\t\t<div\n\t\t\tref=\"picturemapElement\"\n\t\t\tclass=\"xone-picturemap-container\"\n\t\t\t:style=\"{\n\t\t\t\theight: controlHeight && `${zoom * controlHeight}px`,\n\t\t\t\twidth: controlWidth && `${zoom * controlWidth}px`,\n\t\t\t\t'--picturemap-cursor': isGrabbing ? 'grabbing' : 'grab',\n\t\t\t\t'--picturemap-items-cursor': isGrabbing ? 'grabbing' : 'pointer',\n\t\t\t}\"\n\t\t>\n\t\t\t<!-- PictureMap Container aspect-ratio Resized -->\n\t\t\t<div\n\t\t\t\tv-if=\"containerElementSize && !isLoading\"\n\t\t\t\tclass=\"xone-picturemap-items\"\n\t\t\t\t:style=\"{\n\t\t\t\t\theight: containerElementSize.height && `${containerElementSize.height}px`,\n\t\t\t\t\twidth: containerElementSize.width && `${containerElementSize.width}px`,\n\t\t\t\t\tbackgroundImage: contentsImage?.path && `url(${contentsImage.path})`,\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<!-- Items -->\n\t\t\t\t<template v-for=\"item in data\" :key=\"`pictureMap-${attributes.name}-${item.index}`\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"xone-picturemap-item\"\n\t\t\t\t\t\tv-if=\"item.scaledX && item.scaledY\"\n\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\tleft: item.scaledX + 'px',\n\t\t\t\t\t\t\ttop: item.scaledY + 'px',\n\t\t\t\t\t\t\twidth: item.scaledImgWidthOff && item.scaledImgWidthOff + 'px',\n\t\t\t\t\t\t\theight: item.scaledImgHeightOff && item.scaledImgHeightOff + 'px',\n\t\t\t\t\t\t\tzIndex: item.zIndex,\n\t\t\t\t\t\t}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<!-- Item Text -->\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"item.text\"\n\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\tcolor: item.textColor && item.textColor,\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ item.text }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<!-- Item Image -->\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"onItemSelected(item)\"\n\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\twidth: item.scaledImgWidthOff && item.scaledImgWidthOff + 'px',\n\t\t\t\t\t\t\t\tbackgroundImage: `url(${item.selected ? item.iconOn && item.iconOn : item.iconOff && item.iconOff})`,\n\t\t\t\t\t\t\t\theight: item.scaledImgHeightOff && item.scaledImgHeightOff + 'px',\n\t\t\t\t\t\t\t\tfilter: item.selected ? item.filterOn && item.filterOn : (item.filterOff && item.filterOff) || item.filterOn,\n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t></button>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t\t<!-- Loader -->\n\t\t\t<div v-else>\n\t\t\t\t<div class=\"xone-loader\">\n\t\t\t\t\t<div></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { onMounted, PropType, Ref, ComputedRef, ref, inject, nextTick, watch, onUnmounted } from \"vue\";\n\nimport { PropAttributes } from \"../../../composables/XoneAttributesHandler\";\nimport { XoneDataObject } from \"../../../composables/appData/core/XoneDataObject\";\nimport { XoneDataCollection } from \"../../../composables/appData/core/XoneDataCollection\";\nimport { XoneControl, XoneView } from \"../../../composables/XoneViewsHandler\";\nimport { getImagePathAndSize } from \"../../../composables/helperFunctions/ImageHelper\";\nimport Image from \"../Image.vue\";\nimport { Color, HEX2RGB, Solver } from \"../../../composables/helperFunctions/ColorHelper\";\nimport XmlNode from \"../../../composables/appData/Xml/JSONImpl/XmlNode\";\nexport default {\n\tcomponents: { Image },\n\tname: \"PictureMap\",\n\n\tprops: {\n\t\t/**\n\t\t * xoneDataObject\n\t\t * @type {PropType<XoneDataObject>}\n\t\t * */\n\t\txoneDataObject: { type: Object, required: true },\n\n\t\t/**\n\t\t * attributes\n\t\t * @type { PropType<PropAttributes>}\n\t\t */\n\t\tattributes: { type: Object, default: null, required: true },\n\n\t\tcontrolWidth: { type: Number, default: 0 },\n\n\t\tcontrolHeight: { type: Number, default: 0 },\n\t},\n\tsetup(props) {\n\t\t/**\n\t\t * Contents\n\t\t * @type {Ref<XoneDataCollection>}\n\t\t */\n\t\tconst contents = ref();\n\n\t\t/**\n\t\t * xoneView\n\t\t * @type {XoneView}\n\t\t */\n\t\tconst xoneView = inject(\"xoneView\");\n\n\t\tconst data = ref([]);\n\n\t\t/**\n\t\t * contents Image\n\t\t * @type {Ref<Promise<{path:string,imgSize:{width:number,height:number}}>}\n\t\t */\n\t\tconst contentsImage = ref();\n\n\t\t// Get contents Image\n\t\tonMounted(async () => {\n\t\t\tif (props.attributes.image) {\n\t\t\t\tcontentsImage.value = await getImagePathAndSize(props.attributes.image, \"files\");\n\t\t\t\tif (props.attributes.image && !contentsImage.value)\n\t\t\t\t\tconsole.error(\"Not found: picturemap background image\", props.attributes.name, props.attributes.image);\n\t\t\t\tcalculateContainerAspectRatioSize();\n\t\t\t}\n\t\t});\n\n\t\t/**\n\t\t * Scale Factor\n\t\t * @type {{widthFactor: ComputedRef<number>, heightFactor: ComputedRef<number>}}\n\t\t */\n\t\tconst { widthFactor, heightFactor } = inject(\"scaleFactor\");\n\n\t\t//\n\t\t// Calculate Element Size\n\t\tconst containerElementSize = ref();\n\n\t\tconst isLoading = ref(true);\n\n\t\t// Scale Factors\n\t\tlet scaleFactorX;\n\t\tlet scaleFactorY;\n\n\t\t/**\n\t\t * Picturemap zoom\n\t\t * @type {Ref<number>}\n\t\t */\n\t\tconst zoom = ref(1);\n\n\t\t/**\n\t\t * Hide Range, atributo \"hide-range\" que oculta el rango del zoom que tiene el mapa\n\t\t * @type{Ref<boolean>}\n\t\t */\n\t\tconst hideRange = ref(props.xoneDataObject?.getFieldPropertyValue(props.attributes.name, \"hide-range\") === \"true\");\n\n\t\t/**\n\t\t * Add zoom\n\t\t */\n\t\tconst modifyZoom = async (value) => {\n\t\t\tzoom.value = Number(zoom.value) + value;\n\t\t\tif (zoom.value < 1) return (zoom.value = 1);\n\t\t\tif (zoom.value > 5) return (zoom.value = 5);\n\t\t};\n\n\t\twatch(\n\t\t\t() => zoom.value,\n\t\t\t(newValue, oldValue) => {\n\t\t\t\tif (newValue < 1 || newValue > 5) return;\n\t\t\t\tcalculateContainerAspectRatioSize(0);\n\n\t\t\t\tcontentsElement.scrollTo({\n\t\t\t\t\tleft: contentsElement.scrollLeft + (contentsElement.offsetWidth * (newValue - oldValue)) / 2,\n\t\t\t\t\ttop: contentsElement.scrollTop + (contentsElement.offsetHeight * (newValue - oldValue)) / 2,\n\t\t\t\t\tbehavior: \"auto\",\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\n\t\t//\n\t\t// Handler grab\n\n\t\t/**\n\t\t * picturemapElement\n\t\t * @type {Ref<HTMLElement>}\n\t\t */\n\t\tconst picturemapElement = ref();\n\n\t\t/**\n\t\t * contents Element\n\t\t * @type {HTMLElement}\n\t\t */\n\t\tlet contentsElement;\n\n\t\tlet pos = { top: 0, left: 0, x: 0, y: 0 };\n\n\t\tlet dragAllowedTimeout;\n\t\tconst isGrabbing = ref(false);\n\n\t\tconst mouseDownHandler = function(e) {\n\t\t\tpos = {\n\t\t\t\t// The current scroll\n\t\t\t\tleft: contentsElement.scrollLeft,\n\t\t\t\ttop: contentsElement.scrollTop,\n\t\t\t\t// Get the current mouse position\n\t\t\t\tx: e.clientX,\n\t\t\t\ty: e.clientY,\n\t\t\t};\n\t\t\tif (dragAllowedTimeout) clearInterval(dragAllowedTimeout);\n\n\t\t\tdragAllowedTimeout = setTimeout(() => {\n\t\t\t\tcontentsElement.addEventListener(\"mousemove\", mouseMoveHandler);\n\t\t\t\tcontentsElement.addEventListener(\"mouseup\", mouseUpHandler);\n\t\t\t}, 100);\n\t\t};\n\n\t\tconst mouseMoveHandler = function(e) {\n\t\t\tif (e.buttons === 0) {\n\t\t\t\tmouseUpHandler();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!isGrabbing.value) isGrabbing.value = true;\n\n\t\t\t// How far the mouse has been moved\n\t\t\tconst dx = e.clientX - pos.x;\n\t\t\tconst dy = e.clientY - pos.y;\n\n\t\t\t// Scroll the element\n\t\t\tcontentsElement.scrollTop = pos.top - dy;\n\t\t\tcontentsElement.scrollLeft = pos.left - dx;\n\t\t};\n\n\t\tconst mouseUpHandler = function() {\n\t\t\tsetTimeout(() => (isGrabbing.value = false), 25);\n\n\t\t\tcontentsElement.removeEventListener(\"mousemove\", mouseMoveHandler);\n\t\t\tcontentsElement.removeEventListener(\"mouseup\", mouseUpHandler);\n\t\t};\n\n\t\tconst mouseLeaveHandler = function() {\n\t\t\tsetTimeout(() => (isGrabbing.value = false), 25);\n\n\t\t\tcontentsElement.addEventListener(\"mousemove\", mouseMoveHandler);\n\t\t\tcontentsElement.addEventListener(\"mouseup\", mouseUpHandler);\n\t\t};\n\n\t\tconst mouseWheel = function(e) {\n\t\t\tif (e.deltaY < 0) modifyZoom(0.25);\n\t\t\tif (e.deltaY > 0 && zoom.value > 1) modifyZoom(-0.25);\n\t\t\te.preventDefault();\n\t\t};\n\n\t\tonMounted(() => {\n\t\t\tcontentsElement = picturemapElement.value?.parentElement;\n\t\t\tcontentsElement.addEventListener(\"mousedown\", mouseDownHandler);\n\t\t\tcontentsElement.addEventListener(\"mouseleave\", mouseLeaveHandler);\n\t\t\tcontentsElement.addEventListener(\"wheel\", mouseWheel);\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\tcontentsElement.removeEventListener(\"mousedown\", mouseDownHandler);\n\t\t\tcontentsElement.removeEventListener(\"mouseleave\", mouseLeaveHandler);\n\t\t\tcontentsElement.removeEventListener(\"wheel\", mouseWheel);\n\t\t});\n\n\t\t/**\n\t\t * Calculate container size\n\t\t */\n\t\tconst calculateContainerAspectRatioSize = async (timeout = 500) => {\n\t\t\tawait nextTick();\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst contentsImgSize = contentsImage.value?.imgSize;\n\n\t\t\t\t// Scale from image size\n\t\t\t\tif (contentsImgSize) {\n\t\t\t\t\t// Nota para mi yo del futuro: Si existe imagen de fondo en el contents, la tomo como referencia para sacar el factor de escalado de cada coordenada\n\t\t\t\t\tscaleFactorX = (zoom.value * props.controlWidth) / contentsImgSize.width;\n\t\t\t\t\tscaleFactorY = (zoom.value * props.controlHeight) / contentsImgSize.height;\n\t\t\t\t} else {\n\t\t\t\t\t// Nota para mi yo del futuro: No existe imagen, calculo el factor global de escalado de cada coordenada\n\t\t\t\t\t// Scale from width and  height scale factor\n\t\t\t\t\tscaleFactorX = widthFactor.value;\n\t\t\t\t\tscaleFactorY = heightFactor.value;\n\t\t\t\t}\n\n\t\t\t\t// Get min scale from width / height scale\n\t\t\t\tlet scaleFactor = scaleFactorX < scaleFactorY ? scaleFactorX : scaleFactorY;\n\n\t\t\t\t// Set container aspect-ratio width / height\n\t\t\t\tcontainerElementSize.value = {\n\t\t\t\t\twidth: (zoom.value * (props.controlWidth * scaleFactor)) / scaleFactorX,\n\t\t\t\t\theight: (zoom.value * (props.controlHeight * scaleFactor)) / scaleFactorY,\n\t\t\t\t};\n\n\t\t\t\t// Scale content items\n\t\t\t\tscaleItems();\n\t\t\t}, timeout);\n\t\t};\n\n\t\twatch(\n\t\t\t() => props.controlWidth,\n\t\t\t() => calculateContainerAspectRatioSize()\n\t\t);\n\t\twatch(\n\t\t\t() => props.controlHeight,\n\t\t\t() => calculateContainerAspectRatioSize()\n\t\t);\n\n\t\t// key attributes\n\t\tlet xCoord;\n\t\tlet yCoord;\n\t\tlet iconOff;\n\t\tlet iconOn;\n\t\tlet iconWidth;\n\t\tlet iconHeigth;\n\t\tlet iconText;\n\t\tlet iconTextColor;\n\t\tlet iconMarkColor;\n\t\tlet iconTouchColor;\n\n\t\tnextTick(async () => {\n\t\t\t// Get contents\n\t\t\tif (!contents.value) contents.value = await props.xoneDataObject.getContents(props.attributes.contents);\n\n\t\t\t// Get key attributes\n\n\t\t\t/**\n\t\t\t * m_xmlNode\n\t\t\t * @type {{m_xmlNode:XmlNode}}\n\t\t\t */\n\t\t\tconst { m_xmlNode } = contents.value;\n\n\t\t\tm_xmlNode.SelectNodes(\"prop\").forEach((/** @type {XmlNode} */ e) => {\n\t\t\t\tif (e.getAttrValue(\"xcoord\") === \"true\") xCoord = e.getAttrValue(\"name\");\n\t\t\t\tif (e.getAttrValue(\"ycoord\") === \"true\") yCoord = e.getAttrValue(\"name\");\n\t\t\t\tif (e.getAttrValue(\"icon-mark\") === \"true\") iconOff = e.getAttrValue(\"name\");\n\t\t\t\tif (e.getAttrValue(\"icon-touch\") === \"true\") iconOn = e.getAttrValue(\"name\");\n\t\t\t\tif (e.getAttrValue(\"icon-mark-color\") === \"true\") iconMarkColor = e.getAttrValue(\"name\");\n\t\t\t\tif (e.getAttrValue(\"icon-touch-color\") === \"true\") iconTouchColor = e.getAttrValue(\"name\");\n\t\t\t\tif (e.getAttrValue(\"icon-width\") === \"true\") iconWidth = e.getAttrValue(\"name\");\n\t\t\t\tif (e.getAttrValue(\"icon-height\") === \"true\") iconHeigth = e.getAttrValue(\"name\");\n\t\t\t\tif (e.getAttrValue(\"icon-text\") === \"true\") iconText = e.getAttrValue(\"name\");\n\t\t\t\tif (e.getAttrValue(\"icon-text-color\") === \"true\") iconTextColor = e.getAttrValue(\"name\");\n\t\t\t});\n\n\t\t\t// Add Control to View\n\t\t\tconst xoneControl = new XoneControl(props.attributes.name);\n\t\t\txoneControl.refresh = refresh;\n\t\t\txoneView.addControl(xoneControl);\n\n\t\t\t// Refresh contents\n\t\t\trefresh();\n\t\t});\n\n\t\tonUnmounted(() => {\n\t\t\tif (contents.value) contents.value.clear();\n\t\t});\n\n\t\t//\n\t\t// Refresh contents\n\t\tconst refresh = async () => {\n\t\t\t// Load contents data\n\t\t\tisLoading.value = true;\n\n\t\t\tawait nextTick();\n\n\t\t\t// LoadAll\n\t\t\tawait contents.value.loadAll(false);\n\n\t\t\tdata.value = [];\n\n\t\t\tfor (let i = 0; i < contents.value.length; i++) {\n\t\t\t\tconst contentsItem = await contents.value.get(i);\n\n\t\t\t\tconst dataValue = {};\n\t\t\t\t// Index\n\t\t\t\tdataValue.index = i;\n\t\t\t\t// Coords\n\t\t\t\tdataValue.xCoord = contentsItem[xCoord];\n\t\t\t\tdataValue.yCoord = contentsItem[yCoord];\n\t\t\t\t// text / textColor\n\t\t\t\tdataValue.text = contentsItem[iconText];\n\t\t\t\tdataValue.textColor = contentsItem[iconTextColor];\n\t\t\t\tif (iconOff) {\n\t\t\t\t\tconst valueOff = await getImagePathAndSize(contentsItem[iconOff], \"files\");\n\t\t\t\t\t// Icon off width and height from image size\n\t\t\t\t\tif (!valueOff) return console.error(\"Not found: icon-mark\", props.attributes.name, contentsItem[iconOff]);\n\t\t\t\t\tdataValue.iconOff = valueOff.path;\n\t\t\t\t\tdataValue.imgWidthOff = valueOff.imgSize.width;\n\t\t\t\t\tdataValue.imgHeightOff = valueOff.imgSize.height;\n\t\t\t\t}\n\t\t\t\t// Icon on width and height from image size\n\t\t\t\tif (iconOn)\n\t\t\t\t\tgetImagePathAndSize(contentsItem[iconOn], \"files\").then((valueOn) => {\n\t\t\t\t\t\tif (!valueOn) return console.error(\"Not found: icon-touch\", props.attributes.name, contentsItem[iconOn]);\n\t\t\t\t\t\tdataValue.iconOn = valueOn.path;\n\t\t\t\t\t\tdataValue.imgWidthOn = valueOn.imgSize.width;\n\t\t\t\t\t\tdataValue.imgHeightOn = valueOn.imgSize.height;\n\t\t\t\t\t});\n\n\t\t\t\t// Icon mark / touch color\n\t\t\t\tdataValue.iconMarkColor = contentsItem[iconMarkColor];\n\t\t\t\tdataValue.iconTouchColor = contentsItem[iconTouchColor];\n\t\t\t\t// Nota para mi yo del futuro: El color de la imagen debe de venir en negro para  convertirla aplicando filtros, de lo contrario el color va a salir un poco random...\n\t\t\t\tif (dataValue.iconMarkColor) {\n\t\t\t\t\tconst rgb = HEX2RGB(dataValue.iconMarkColor);\n\t\t\t\t\tconst color = new Color(rgb[0], rgb[1], rgb[2]);\n\t\t\t\t\tconst solver = new Solver(color);\n\t\t\t\t\tconst result = solver.solve();\n\t\t\t\t\tdataValue.filterOff = result.filter;\n\t\t\t\t\tif (result.loss > 10) console.warn(\"Color lost\", dataValue.iconMarkColor, result.loss);\n\t\t\t\t}\n\t\t\t\tif (dataValue.iconTouchColor) {\n\t\t\t\t\tconst rgb = HEX2RGB(dataValue.iconTouchColor);\n\t\t\t\t\tconst color = new Color(rgb[0], rgb[1], rgb[2]);\n\t\t\t\t\tconst solver = new Solver(color);\n\t\t\t\t\tconst result = solver.solve();\n\t\t\t\t\tdataValue.filterOn = result.filter;\n\t\t\t\t\tif (result.loss > 10) console.warn(\"Color lost\", dataValue.iconTouchColor, result.loss);\n\t\t\t\t}\n\t\t\t\t// Icon width and height from attribute\n\t\t\t\tif (iconWidth && iconHeigth) {\n\t\t\t\t\tdataValue.imgWidthOff = contentsItem[iconWidth];\n\t\t\t\t\tdataValue.imgHeightOff = contentsItem[iconHeigth];\n\t\t\t\t}\n\n\t\t\t\tdata.value.push(dataValue);\n\t\t\t}\n\n\t\t\t// Scale Items\n\t\t\tscaleItems();\n\n\t\t\t// Select first item\n\t\t\tif (data.value.length !== 0) onItemSelected(data.value[0]);\n\n\t\t\t// Order items by size\n\t\t\tlet i = 1;\n\t\t\tdata.value.sort((a, b) => b.imgWidthOff * b.imgHeightOff - a.imgWidthOff * a.imgHeightOff).forEach((e) => (e.zIndex = i = i + 1));\n\n\t\t\tisLoading.value = false;\n\t\t};\n\n\t\t// Get Items Factor X\n\t\tconst getItemFactorX = () => {\n\t\t\tlet zoomFactor = 1;\n\t\t\tlet scaledWidth = containerElementSize.value?.width ?? 0;\n\t\t\tlet width = props.controlWidth / scaleFactorX;\n\t\t\tif (contentsImage.value?.imgSize && scaledWidth !== 0) {\n\t\t\t\tzoomFactor = width / contentsImage.value.imgSize.width;\n\t\t\t}\n\t\t\treturn (scaledWidth / width) * zoomFactor;\n\t\t};\n\n\t\t// Get Items Factor Y\n\t\tconst getItemFactorY = () => {\n\t\t\tlet zoomFactor = 1;\n\t\t\tlet scaledHeight = containerElementSize.value?.height ?? 0;\n\t\t\tlet height = props.controlHeight / scaleFactorY;\n\t\t\tif (contentsImage.value?.imgSize && scaledHeight !== 0) {\n\t\t\t\tzoomFactor = height / contentsImage.value.imgSize.height;\n\t\t\t}\n\t\t\treturn (scaledHeight / height) * zoomFactor;\n\t\t};\n\n\t\t// Scale all Items\n\t\tconst scaleItems = () => data.value.forEach(scaleItem);\n\n\t\t// Scale Item\n\t\tconst scaleItem = (item) => {\n\t\t\titem.scaledX = item.xCoord * getItemFactorX();\n\t\t\titem.scaledY = item.yCoord * getItemFactorY();\n\n\t\t\titem.scaledImgWidthOff = item.imgWidthOff * getItemFactorX();\n\t\t\titem.scaledImgHeightOff = item.imgHeightOff * getItemFactorY();\n\t\t};\n\n\t\t// On Item Selected\n\t\tconst onItemSelected = async (item) => {\n\t\t\tif (isGrabbing.value) return;\n\t\t\tdata.value.forEach((e) => (e.selected = false));\n\t\t\titem.selected = true;\n\n\t\t\tif (!contents.value) return;\n\n\t\t\t/**\n\t\t\t * xoneDataObject\n\t\t\t * @type {XoneDataObject}\n\t\t\t */\n\t\t\tconst xoneDataObject = await contents.value.get(item.index);\n\n\t\t\tif (xoneDataObject) xoneDataObject.ExecuteNode(\"selecteditem\").catch(console.error);\n\t\t};\n\n\t\treturn {\n\t\t\tpicturemapElement,\n\t\t\tcontentsImage,\n\t\t\tisLoading,\n\t\t\tcontainerElementSize,\n\t\t\tdata,\n\t\t\tonItemSelected,\n\t\t\tzoom,\n\t\t\thideRange,\n\t\t\tmodifyZoom,\n\t\t\tisGrabbing,\n\t\t};\n\t},\n};\n</script>\n\n<style scoped>\n.xone-picturemap {\n\toverflow: auto;\n\twidth: var(--contents-width);\n\theight: var(--contents-height);\n}\n\n.xone-picturemap-zoom {\n\tposition: absolute;\n\tdisplay: flex;\n\tflex-direction: row;\n\ttop: 10px;\n\tleft: 10px;\n\tz-index: 9999;\n\tborder: 1px solid rgb(204, 204, 204);\n\tbackground-color: #fff;\n\tborder-radius: 2px;\n\tpointer-events: all;\n\tmargin-top: 10px;\n}\n.xone-picturemap-zoom > div {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.xone-picturemap-zoom button {\n\tborder: 1px solid rgb(204, 204, 204);\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\twidth: 30px;\n\theight: 30px;\n\tfont-size: 25px;\n}\n\n.xone-picturemap-container {\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.xone-picturemap-container:hover {\n\tcursor: var(--picturemap-cursor);\n}\n\n.xone-picturemap-container > div {\n\tposition: relative;\n\tanimation: fadeIn 0.3s;\n}\n\n.xone-picturemap-item {\n\tposition: absolute;\n\tz-index: 1;\n\twidth: 50px;\n\theight: 50px;\n\tfont-size: 0.8rem;\n\tbackground-repeat: no-repeat;\n\tbackground-position: center;\n\tbackground-size: contain;\n\tbackground-color: transparent;\n\tborder: none;\n\toutline: none;\n\tpointer-events: visiblePainted;\n}\n\n.xone-picturemap-item > div {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tfont-size: 0.7rem;\n\tz-index: 999;\n\tpointer-events: none;\n}\n\n.xone-picturemap-zoom > div > button {\n\tcursor: pointer;\n}\n\nbutton {\n\tbackground-repeat: no-repeat;\n\tbackground-position: center;\n\tbackground-size: contain;\n\tbackground-color: transparent;\n\tpointer-events: visiblePainted;\n\n\twidth: 100%;\n\theight: 100%;\n\tborder: none;\n\toutline: none;\n}\n\nbutton:hover {\n\tcursor: var(--picturemap-items-cursor);\n}\n\ndiv {\n\tbackground-repeat: no-repeat;\n\tbackground-position: center;\n\t/* background-size: contain; */\n\tbackground-size: 100% 100%;\n\toverflow: hidden;\n}\n\ninput[type=\"range\"][orient=\"vertical\"] {\n\t-webkit-appearance: slider-vertical;\n\twidth: 8px;\n\theight: 50px;\n\tmargin: 5px;\n\toverflow: hidden;\n}\n\ninput[type=\"range\"][orient=\"vertical\"]::-webkit-slider-thumb {\n\tcursor: ns-resize;\n\tbox-shadow: -80px 0 0 80px lightgray;\n}\n</style>\n","import { render } from \"./PictureMap.vue?vue&type=template&id=4a338f92&scoped=true\"\nimport script from \"./PictureMap.vue?vue&type=script&lang=js\"\nexport * from \"./PictureMap.vue?vue&type=script&lang=js\"\n\nimport \"./PictureMap.vue?vue&type=style&index=0&id=4a338f92&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4a338f92\"]])\n\nexport default __exports__","import { render } from \"./Contents.vue?vue&type=template&id=1104ab42&scoped=true\"\nimport script from \"./Contents.vue?vue&type=script&lang=js\"\nexport * from \"./Contents.vue?vue&type=script&lang=js\"\n\nimport \"./Contents.vue?vue&type=style&index=0&id=1104ab42&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1104ab42\"]])\n\nexport default __exports__","<template>\n\t<iframe v-if=\"isUrl\" :src=\"propValue\" :width=\"controlWidth\" :height=\"controlHeight\"></iframe>\n\t<iframe v-else :srcdoc=\"propValue\" :width=\"controlWidth\" :height=\"controlHeight\"></iframe>\n</template>\n\n<script>\nimport { inject, PropType, ref, Ref, watchEffect } from \"vue\";\nimport { PropAttributes } from \"../../composables/XoneAttributesHandler\";\nimport { XoneDataObject } from \"../../composables/appData/core/XoneDataObject\";\n\nexport default {\n\tprops: {\n\t\t/** xoneDataObject\n     @type {PropType<XoneDataObject>} \n     */\n\t\txoneDataObject: { type: Object, required: true },\n\t\t/** attributes\n\t\t * @type { PropType<PropAttributes>}\n\t\t */\n\t\tattributes: { type: Object, required: true },\n\t\tcontrolWidth: { type: Number, default: 0 },\n\t\tcontrolHeight: { type: Number, default: 0 },\n\t},\n\tsetup(props) {\n\t\tconst isUrl = ref(false);\n\n\t\t/**\n\t\t * breadcrumbId\n\t\t * @type {string}\n\t\t */\n\t\tconst breadcrumbId = inject(\"breadcrumbId\");\n\n\t\t/**\n\t\t * prop model value\n\t\t * @type {Ref<any>}\n\t\t */\n\t\tlet propValue = ref();\n\n\t\t// Get appData model value\n\t\twatchEffect(() => {\n\t\t\tif (props.xoneDataObject?.model) propValue.value = props.xoneDataObject?.model[props.attributes.name];\n\n\t\t\tif (!propValue.value?.toString().contains(\"<\") && !propValue.value?.toString().contains(\">\"))\n\t\t\t\t// URL\n\t\t\t\treturn (isUrl.value = true);\n\n\t\t\tisUrl.value = false;\n\t\t});\n\n\t\treturn {\n\t\t\tpropValue,\n\t\t\tisUrl,\n\t\t};\n\t},\n};\n</script>\n\n<style scoped>\niframe {\n\tbox-sizing: border-box;\n\tborder: none;\n}\n</style>\n","import { render } from \"./Web.vue?vue&type=template&id=5bcfca02&scoped=true\"\nimport script from \"./Web.vue?vue&type=script&lang=js\"\nexport * from \"./Web.vue?vue&type=script&lang=js\"\n\nimport \"./Web.vue?vue&type=style&index=0&id=5bcfca02&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5bcfca02\"]])\n\nexport default __exports__","<template>\n  <video :width=\"controlWidth\" :height=\"controlHeight\" controls>\n    <source :src=\"`/files/${propValue}`\" />\n  </video>\n</template>\n\n<script>\nimport { PropType, ref, Ref, watchEffect } from \"vue\";\nimport { PropAttributes } from \"../../composables/XoneAttributesHandler\";\nimport { XoneDataObject } from \"../../composables/appData/core/XoneDataObject\";\n\nexport default {\n  props: {\n    /** xoneDataObject\n     @type {PropType<XoneDataObject>} \n     */\n    xoneDataObject: { type: Object, required: true },\n    /** attributes\n     * @type { PropType<PropAttributes>}\n     */\n    attributes: { type: Object, required: true },\n    controlWidth: { type: Number, default: 0 },\n    controlHeight: { type: Number, default: 0 },\n  },\n  setup(props) {\n    /**\n     * prop model value\n     * @type {Ref<any>}\n     */\n    let propValue = ref();\n\n    // Get appData model value\n    watchEffect(() => {\n      if (props.xoneDataObject?.model) propValue.value = props.xoneDataObject?.model[props.attributes.name];\n    });\n\n    return { propValue };\n  },\n};\n</script>\n\n<style scoped>\nvideo {\n  box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  -webkit-box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center;\n  transition: all 0.1s;\n}\n</style>\n","import { render } from \"./Video.vue?vue&type=template&id=42c3aa31&scoped=true\"\nimport script from \"./Video.vue?vue&type=script&lang=js\"\nexport * from \"./Video.vue?vue&type=script&lang=js\"\n\nimport \"./Video.vue?vue&type=style&index=0&id=42c3aa31&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-42c3aa31\"]])\n\nexport default __exports__","<template>\n\t<div v-if=\"routeBreadcrumbs && routeBreadcrumbs.length !== 0\" class=\"xone-breadcrumb\">\n\t\t<template v-for=\"breadcrumb in routeBreadcrumbs\" :key=\"breadcrumb.id\"\n\t\t\t><div class=\"xone-breadcrumb-item\">\n\t\t\t\t<div v-if=\"breadcrumb !== routeBreadcrumbs[0]\" :style=\"{ fontSize: attributes.breadcrumbFontSize }\">\n\t\t\t\t\t&nbsp;&nbsp;/&nbsp;&nbsp;\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\t@click=\"onBreadcrumbClick(breadcrumb)\"\n\t\t\t\t\t:style=\"{\n\t\t\t\t\t\tcolor: getBreadcrumbColor(breadcrumb),\n\t\t\t\t\t\tfontSize: getBreadcrumbFontSize(breadcrumb),\n\t\t\t\t\t\tcursor: breadcrumb !== lastBreadcrumb ? 'pointer' : 'auto',\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\t{{ breadcrumb.title || breadcrumb.name }}\n\t\t\t\t</div>\n\t\t\t</div></template\n\t\t>\n\t</div>\n</template>\n\n<script>\nimport { inject, ComputedRef, PropType } from \"vue\";\nimport { useRouter } from \"vue-router\";\n\nexport default {\n\tname: \"Breadcrumb\",\n\tprops: {\n\t\t/**\n\t\t * attributes\n\t\t * @type { PropType<import('../../composables/XoneAttributesHandler').PropAttributes>}\n\t\t */\n\t\tattributes: { type: Object, default: null, required: true },\n\t},\n\tsetup(props) {\n\t\tconst router = useRouter();\n\n\t\t/**\n\t\t * @type {ComputedRef<Breadcrumb[]>}\n\t\t */\n\t\tconst routeBreadcrumbs = inject(\"routeBreadcrumbs\");\n\n\t\t/**\n\t\t * @type {ComputedRef<import('../../composables/AppDataHandler').Breadcrumb>}\n\t\t */\n\t\tconst lastBreadcrumb = inject(\"lastBreadcrumb\");\n\n\t\treturn {\n\t\t\trouteBreadcrumbs,\n\t\t\tlastBreadcrumb,\n\t\t\tonBreadcrumbClick: (breadcrumb) => {\n\t\t\t\trouter.push({\n\t\t\t\t\tname: \"Coll\",\n\t\t\t\t\tquery: { id: breadcrumb.id },\n\t\t\t\t});\n\t\t\t},\n\t\t\tgetBreadcrumbColor: (breadcrumb) => {\n\t\t\t\treturn breadcrumb === lastBreadcrumb.value\n\t\t\t\t\t? props.attributes.breadcrumbSelectedForeColor || props.attributes.breadcrumbForeColor\n\t\t\t\t\t: props.attributes.breadcrumbForeColor;\n\t\t\t},\n\t\t\tgetBreadcrumbFontSize: (breadcrumb) => {\n\t\t\t\treturn breadcrumb === lastBreadcrumb.value\n\t\t\t\t\t? props.attributes.breadcrumbSelectedFontSize || props.attributes.breadcrumbFontSize\n\t\t\t\t\t: props.attributes.breadcrumbFontSize;\n\t\t\t},\n\t\t};\n\t},\n};\n</script>\n\n<style scoped>\n.xone-breadcrumb,\n.xone-breadcrumb-item {\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: center;\n\talign-items: center;\n}\n</style>\n","import { render } from \"./Breadcrumb.vue?vue&type=template&id=54d926b6&scoped=true\"\nimport script from \"./Breadcrumb.vue?vue&type=script&lang=js\"\nexport * from \"./Breadcrumb.vue?vue&type=script&lang=js\"\n\nimport \"./Breadcrumb.vue?vue&type=style&index=0&id=54d926b6&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-54d926b6\"]])\n\nexport default __exports__","import { render } from \"./Prop.vue?vue&type=template&id=01291dc2&scoped=true\"\nimport script from \"./Prop.vue?vue&type=script&lang=js\"\nexport * from \"./Prop.vue?vue&type=script&lang=js\"\n\nimport \"./Prop.vue?vue&type=style&index=0&id=01291dc2&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-01291dc2\"]])\n\nexport default __exports__","import { render } from \"./Container.vue?vue&type=template&id=40b03d14&scoped=true\"\nimport script from \"./Container.vue?vue&type=script&lang=js\"\nexport * from \"./Container.vue?vue&type=script&lang=js\"\n\nimport \"./Container.vue?vue&type=style&index=0&id=40b03d14&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-40b03d14\"]])\n\nexport default __exports__","/**\n * XoneFileManager\n */\nclass XoneFileManager {\n  /**\n   * fileExists\n   * @param {string} filePath\n   */\n  fileExists(filePath) {\n    filePath = filePath.replace(\"source/\", \"/\"); // TODO: el filePath viene mal concateado, hay que quitar el source\n\n    const http = new XMLHttpRequest();\n    http.open(\"GET\", filePath, false);\n    http.send();\n\n    const res = http.status !== 404 ? 0 : -1; // Parece ser que si se devuelve 0 es que existe, tengo que hablar con sta gente para que me de el contacto de su camello, yo tambin quiero gozar as!\n    return res;\n  }\n\n  /**\n   * download\n   * @param {string} filePath\n   */\n  download(filePath) {\n    filePath = filePath.replace(\"/source/\", \"/\"); // TODO: el filePath viene mal concateado, hay que quitar el source\n\n    const element = document.createElement(\"a\");\n    element.setAttribute(\"href\", filePath);\n    element.setAttribute(\"target\", \"_blank\");\n    element.style.display = \"none\";\n\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n  }\n\n  /**\n   * asyncDownload\n   * @param {string} filePath\n   */\n  async asyncDownload(filePath) {\n    await this.download(filePath);\n  }\n\n  // TODO: crear backend con una llamada para devolver la lista de directorios y ficheros\n  listDirectories() {\n    return [];\n  }\n\n  // TODO: crear backend con una llamada para devolver la lista de directorios y ficheros\n  listFiles() {\n    return [];\n  }\n}\n\nexport default XoneFileManager;\n","import { normalizeWebColor } from \"./helperFunctions/ColorHelper\";\n\n/**\n * XonePDF\n */\nclass XonePDF {\n  /** @type {number} */\n  _width;\n\n  /** @type {number} */\n  _height;\n\n  /** @type {HTMLDivElement} */\n  _template;\n\n  /** @type {HTMLDivElement} */\n  _templateAbsolute;\n\n  /** @type {HTMLDivElement} */\n  _currentTable;\n\n  /** @type {Array<Array<HTMLDivElement>>} */\n  _divs;\n\n  permissions() {}\n  setEncryption() {}\n  open() {}\n  close() {\n    this.clearPDF();\n  }\n  beginHeader() {}\n  endHeader() {}\n  beginFooter() {}\n  endFooter() {}\n  getCurrentPage() {}\n\n  getVerticalPosition() {\n    this._template.style.display = null;\n    const value = this._template.lastChild?.getBoundingClientRect().y + this._template.lastChild?.getBoundingClientRect().height;\n    this._template.style.display = \"none\";\n    return value || 0;\n  }\n\n  getHorizontalPosition() {\n    this._template.style.display = null;\n    const value = this._template.lastChild?.getBoundingClientRect().x + this._template.lastChild?.getBoundingClientRect().width;\n    this._template.style.display = \"none\";\n    return value || 0;\n  }\n\n  /**\n   * launchPDF\n   */\n  launchPDF() {\n    this._template.style.display = null;\n    const newWindow = window.open(\"\", \"\", \"\");\n    newWindow.document.write(\"<html>\");\n    newWindow.document.write(`\n    <head>\n        <title>${this._name}</title>\n        <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n        \n        @font-face {\n          font-family: \"Roboto\";\n          src: url(\"/fonts/Roboto-Medium.ttf\");\n        }\n        body {\n          font-family: \"Roboto\", Helvetica, Arial, sans-serif;\n          -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale;\n        }\n        </style>\n      </head>\n      <body>\n    `);\n\n    const container = document.createElement(\"div\");\n    container.style.display = \"flex\";\n    container.style.flexDirection = \"column\";\n    container.style.alignItems = \"center\";\n    container.appendChild(this._templateAbsolute);\n    container.appendChild(this._template);\n\n    newWindow.document.write(container.outerHTML);\n    newWindow.document.write(\"</body>\\n</html>\");\n    newWindow.document.close();\n    newWindow.focus();\n    this.clearPDF();\n\n    setTimeout(() => newWindow.print(), 500);\n  }\n\n  /**\n   * Create document\n   * @param {string} name\n   * @param {number} [width]\n   * @param {number} [height]\n   */\n  create(name, width = 595, height = 842) {\n    this._name = name;\n\n    this._width = width;\n    this._height = height;\n    // Absolute Template Element\n    const elementAbsolute = document.createElement(\"div\");\n    elementAbsolute.style.width = width + \"px\";\n    elementAbsolute.style.height = height + \"px\";\n    elementAbsolute.style.position = \"absolute\";\n    this._templateAbsolute = elementAbsolute;\n    // Element\n    const element = elementAbsolute.cloneNode(true);\n    element.style.position = \"relative\";\n    element.style.display = \"flex\";\n    element.style.flexDirection = \"column\";\n    element.style.width = `${Number(width) - 160}px`;\n    element.style.height = `${Number(height) - 40}px`;\n    element.style.margin = \"20px 80px\";\n    element.style.display = \"none\";\n    element.setAttribute(\"class\", \"XonePdf\");\n    // Clear old PDF\n    this.clearPDF();\n    // Add new PDF\n    document.body.prepend(element);\n\n    this._template = element;\n  }\n\n  clearPDF() {\n    document.querySelectorAll(\".XonePdf\").forEach((e) => document.body.removeChild(e));\n  }\n\n  setFont(font) {\n    this._font = font;\n  }\n\n  setFontStyle(fontStyle) {\n    this._fontStyle = fontStyle;\n  }\n\n  setAlignment(alignment) {\n    this._alignment = alignment;\n  }\n\n  setFontSize(fontSize) {\n    this._fontSize = fontSize;\n  }\n\n  setFontColor(fontColor) {\n    this._fontColor = fontColor;\n  }\n\n  createTable(columns) {\n    this._currentTableNewLine = false;\n    this._currentTableColumns = columns;\n\n    // Create table\n    const tableElement = document.createElement(\"div\");\n    tableElement.style.display = \"flex\";\n    tableElement.style.flexDirection = \"column\";\n    this._currentTable = tableElement;\n\n    // Create Rows\n    this.createRow();\n\n    // Create Rows Columns\n    this.createColumns(this._currentTable.lastChild, columns);\n\n    this._cellBorder = \"all\";\n  }\n\n  createRow() {\n    // Create row\n    const rowElement = document.createElement(\"div\");\n    rowElement.style.display = \"flex\";\n    rowElement.style.flexDirection = \"row\";\n    rowElement.style.flexGrow = \"1\";\n    this._currentTable.appendChild(rowElement);\n  }\n\n  createColumns(rowElement, columns) {\n    // Create columns\n    this._divs = [...Array(Number(columns))].map(() => {\n      // Create column\n      const columnElement = document.createElement(\"div\");\n      columnElement.style.flexGrow = \"1\";\n      rowElement.appendChild(columnElement);\n      return columnElement;\n    });\n  }\n\n  addTable() {\n    this._template.appendChild(this._currentTable);\n    this._currentTable = null;\n  }\n\n  addTableSetXY(x, y) {\n    if (!isNaN(Number(x))) x = x + \"px\";\n    // if (!isNaN(Number(y))) y = y + \"px\";\n    this._currentTable.style.position = \"absolute\";\n    this._currentTable.style.left = x;\n    // this._currentTable.style.bottom = y;\n    this._currentTable.style.top = `${this._height - Number(y)}px`;\n    this._templateAbsolute.appendChild(this._currentTable);\n    this._currentTable = null;\n  }\n\n  addRectangle(x, y, width, height, lineSize, backgroundColor, borderColor) {\n    lineSize = Number(lineSize) / 2;\n    if (width === 0) width = 0.1;\n    if (height === 0) height = 0.1;\n    if (lineSize === 0) lineSize = 0.1;\n    if (!isNaN(Number(width))) width += \"px\";\n    if (!isNaN(Number(height))) height += \"px\";\n    if (!isNaN(Number(lineSize))) lineSize += \"px\";\n    const element = document.createElement(\"div\");\n    element.style.position = \"absolute\";\n    element.style.left = x + \"px\";\n    // TODO: Esto no tiene logica, addRectangle toma la coordenada 0 desde abajo, y pinta el control para arriba,\n    // el resto de controles se pintan para abajo....mejor no razonarlo y hacerlo igual de mal que esta hecho en android,\n    // hay que hacer un master para entender esto\n    element.style.bottom = y + \"px\";\n    // element.style.top = `${this._height - Number(y)}px`;\n    element.style.width = width;\n    element.style.height = height;\n    element.style.border = `${lineSize} solid ${normalizeWebColor(borderColor)}`;\n    element.style.background = normalizeWebColor(backgroundColor);\n    this._templateAbsolute.appendChild(element);\n  }\n\n  newLine() {\n    this._template.append(document.createElement(\"hr\"));\n  }\n  newPage() {}\n\n  fromHtml(html) {\n    this._template.innerHTML = html;\n  }\n\n  setTableWidth(width) {\n    // TODO: seguimos con la ilogica, este width es en pixeles y ademas define el width minimo, de ahi puede crecer, es tremendamente logico\n    if (!isNaN(Number(width))) width = width + \"px\";\n    this._currentTable.style.minWidth = width;\n    this._currentTable.style.minWidth = width;\n  }\n\n  setTableCellWidths(...widths) {\n    // TODO: seguimos con la ilogica, estos width son en porcentaje del contol contenedor....todo muy normal, igual que el metodo de arriba\n    // yo no se que se habian fumado cuando han programado esto asi xD\n    widths.forEach((width, index) => {\n      if (!isNaN(Number(width))) width = width + \"%\";\n      this._divs[index].style.width = width;\n    });\n  }\n\n  setCellBorder(cellBorder) {\n    this._cellBorder = cellBorder;\n    const element = this._divs?.length !== 0 ? this._divs[0] : this._template?.lastChild || this._templateAbsolute.lastChild;\n\n    if (!element) return;\n\n    const borderStyle = \"1px solid black\";\n\n    switch (cellBorder) {\n      case \"none\":\n        return (element.style.border = \"none\");\n      case \"all\":\n        return (element.style.border = borderStyle);\n      case \"top\":\n        return (element.style.borderTop = borderStyle);\n      case \"right\":\n        return (element.style.borderRight = borderStyle);\n      case \"bottom\":\n        return (element.style.borderBottom = borderStyle);\n      case \"left\":\n        return (element.style.borderLeft = borderStyle);\n    }\n  }\n\n  addCellText(text) {\n    if (this._currentTable) {\n      if (this._divs.length === 0) {\n        this._currentTableNewLine = true;\n        this.createRow();\n        this.createColumns(this._currentTable.lastChild, this._currentTableColumns);\n        this._currentTable.firstChild.childNodes.forEach((e, index) => {\n          this._divs[index].style.border = e.style.border;\n          this._divs[index].style.width = e.style.width;\n        });\n      }\n      // if (!this._currentTableNewLine)\n      this.setCellBorder(this._cellBorder);\n      this._divs[0].appendChild(this.createText(text));\n      this._divs.shift();\n    } else this._template.appendChild(this.createText(text));\n  }\n\n  addCellImage(imagePath, width, height) {\n    if (this._currentTable) {\n      if (this._divs.length === 0) {\n        this._currentTableNewLine = true;\n        this.createRow();\n        this.createColumns(this._currentTable.lastChild, this._currentTableColumns);\n        this._currentTable.firstChild.childNodes.forEach((e, index) => {\n          this._divs[index].style.border = e.style.border;\n        });\n      }\n      // if (!this._currentTableNewLine)\n      this.setCellBorder(this._cellBorder);\n      this._divs[0].appendChild(this.createImage(imagePath, width, height));\n      this._divs.shift();\n    } else this._template.appendChild(this.createImage(imagePath, width, height));\n  }\n\n  addImageSetXY(imagePath, width, height, x, y) {\n    if (!isNaN(Number(x))) x = x + \"px\";\n    // if (!isNaN(Number(y))) y = y + \"px\";\n    const imageElement = this.createImage(imagePath, width, height);\n    imageElement.style.position = \"absolute\";\n    imageElement.style.left = x;\n    // imageElement.style.bottom = y;\n    imageElement.style.top = `${this._height - Number(y)}px`;\n    this._templateAbsolute.appendChild(imageElement);\n  }\n\n  addTextSetX(text, width) {\n    const textElement = this.createText(text);\n    textElement.style.marginLeft = width + \"px\";\n    this._template.appendChild(textElement);\n  }\n\n  addTextSetXY(text, x, y) {\n    if (!isNaN(Number(x))) x = x + \"px\";\n    // if (!isNaN(Number(y))) y = y + \"px\";\n    const textElement = this.createText(text);\n    textElement.style.position = \"absolute\";\n    textElement.style.left = x;\n    // textElement.style.bottom = y;\n    textElement.style.top = `${this._height - Number(y)}px`;\n    this._templateAbsolute.appendChild(textElement);\n  }\n\n  addCheckboxSetXY(text, x, y, width, value) {\n    if (!isNaN(Number(x))) x = x + \"px\";\n    const checkElement = document.createElement(\"input\");\n    checkElement.innerText = text;\n    checkElement.value = value.toString() === \"true\";\n    checkElement.setAttribute(\"type\", \"checkbox\");\n    checkElement.style.width = width + \"px\";\n    checkElement.style.position = \"absolute\";\n    checkElement.style.left = x;\n    // textElement.style.bottom = y;\n    checkElement.style.top = `${this._height - Number(y)}px`;\n    this._templateAbsolute.appendChild(checkElement);\n  }\n\n  addCheckbox(text, width, value) {\n    if (!isNaN(Number(x))) x = x + \"px\";\n    const checkElement = document.createElement(\"input\");\n    checkElement.innerText = text;\n    checkElement.value = value.toString() === \"true\";\n    checkElement.setAttribute(\"type\", \"checkbox\");\n    checkElement.style.width = width + \"px\";\n    // textElement.style.bottom = y;\n    this._template.appendChild(checkElement);\n  }\n\n  addText(text) {\n    this._template.appendChild(this.createText(text));\n  }\n\n  addTextLine(text) {\n    this.addText(text);\n  }\n\n  /**\n   *\n   * @param {*} text\n   * @returns {HTMLElement}\n   */\n  createText(text) {\n    /** @type {HTMLLabelElement} */\n    const textElement = document.createElement(\"p\");\n    textElement.innerText = text;\n    // set attributes\n    if (this._fontSize) textElement.style.fontSize = this._fontSize + \"px\";\n    if (this._fontColor) textElement.style.color = normalizeWebColor(this._fontColor);\n\n    const element = this._divs?.length !== 0 ? this._divs[0] : this._template.lastChild || this._templateAbsolute.lastChild;\n\n    if (this._alignment.includes(\"center\")) element.style.textAlign = \"center\";\n    if (this._alignment.includes(\"right\")) element.style.textAlign = \"right\";\n    if (this._fontStyle.includes(\"bold\")) element.style.fontWeight = \"bold\";\n\n    return textElement;\n  }\n\n  /**\n   *\n   * @param {*} imagePath\n   * @param {*} width\n   * @param {*} height\n   * @returns {HTMLElement}\n   */\n  createImage(imagePath, width, height) {\n    /** @type {HTMLElement} */\n    const imageElement = document.createElement(\"image\");\n    imageElement.setAttribute(\"src\", imagePath.replace(\"./\", \"\"));\n    imageElement.setAttribute(\"width\", width);\n    imageElement.setAttribute(\"height\", height);\n\n    return imageElement;\n  }\n}\n\nexport default XonePDF;\n","const { clipboard } = navigator;\n\nclass XoneClipboard {\n  /**\n   * getText\n   * @returns {Promise<string>}\n   */\n  async getText() {\n    return await clipboard.readText();\n  }\n\n  /**\n   * setText\n   * @param {string} value\n   * @returns {Promise<void>}\n   */\n  async setText(value) {\n    return await clipboard.writeText(value);\n  }\n\n  /**\n   * clear\n   * @returns {Promise<void>}\n   */\n  async clear() {\n    return await clipboard.writeText(\"\");\n  }\n\n  /**\n   * hasSomething\n   * @returns {Promise<boolean>}\n   */\n  async hasSomething() {\n    return !!(await clipboard.readText());\n  }\n}\n\nexport default new XoneClipboard();\n","class XoneSystemSettings {\n\tcheckMarketUpdate() {}\n\tclearApplicationData() {}\n\tclearBitmapCache() {}\n\tclearJavascriptCache() {}\n\tgetAndroidVersion() {}\n\tgetApiLevel() {}\n\tgetBrightness() {}\n\tgetBrightnessMode() {}\n\tgetDownloadsPath() {}\n\tgetExternalStoragePath() {}\n\tgetGalleryPath() {}\n\tgetGrantedPermissions() {}\n\tgetHardwareIds() {\n\t\treturn { deviceIdCount: 1, deviceId0: localStorage.getItem(\"_deviceId\"), androidId: localStorage.getItem(\"_deviceId\") };\n\t}\n\tgetnetworktime() {}\n\tgetNotGrantedPermissions() {}\n\tgetSharedUserId() {}\n\tgetWallpaper() {}\n\tisAirplaneMode() {}\n\tisIgnoringBatteryOptimazations() {}\n\tisPasswordSecured() {}\n\tispermissiongranted() {}\n\trequestIgnoringBatteryOptimazations() {}\n\trequestPermissions() {}\n\tsetBrightness() {}\n\tsetBrightnessMode() {}\n\tsetWallpaper() {}\n}\n\nexport default new XoneSystemSettings();\n","class XoneDebugTools {\n\tGetDeviceID() {\n\t\treturn localStorage.getItem(\"_deviceId\");\n\t}\n\tGetLog() {}\n\tSendDatabase() {}\n\tSendLog() {}\n\tSendReplicaDebugDatabase() {}\n\tSendReplicaFilesDatabase() {}\n}\n\nexport default XoneDebugTools;\n","import XoneFileManager from \"./XoneFileManager\";\nimport XonePDF from \"./XonePDF\";\nimport XoneAnimation from \"./XoneAnimation\";\nimport XoneClipboard from \"./XoneClipboard\";\nimport xoneSystemSettings from \"./XoneSystemSettings\";\nimport XoneDebugTools from \"./XoneDebugTools\";\n\n/**\n * createObject\n * @param {string} obj\n */\nwindow.createObject = (obj) => {\n\tif (obj.toLowerCase() === \"xonepdf\") return new XonePDF();\n\tif (obj.toLowerCase() === \"filemanager\") return new XoneFileManager();\n\tif (obj.toLowerCase() === \"debugtools\") return new XoneDebugTools();\n};\n\n/**\n * $http\n */\nwindow.$http = {\n\t/**\n\t * get\n\t * @param {string} url\n\t * @param {Object} options\n\t * @param {Function} dataFunction\n\t * @param {Function} [errorFunction]\n\t * @return {Promise<void>}\n\t */\n\tget: async function(url, options, dataFunction, errorFunction = (_, msg) => console.error(msg)) {\n\t\tconst fetchOptions = { headers: options?.headers || {} };\n\t\ttry {\n\t\t\tconst response = await fetch(url, {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\t...fetchOptions,\n\t\t\t});\n\t\t\tconst data = await response.json();\n\t\t\tdataFunction(data);\n\t\t} catch (ex) {\n\t\t\terrorFunction(500, \"Error executing $http.get\", ex);\n\t\t}\n\t},\n\n\t/**\n\t * post\n\t * @param {string} url\n\t * @param {Object} options\n\t * @param {Function} dataFunction\n\t * @param {Function} [errorFunction]\n\t * @return {Promise<void>}\n\t */\n\tpost: async function(url, options, dataFunction, errorFunction = (_, msg) => console.error(msg)) {\n\t\tconst fetchOptions = { headers: options?.headers || {}, body: {} };\n\t\ttry {\n\t\t\tif (options?.data) fetchOptions.body = JSON.stringify(options.data);\n\n\t\t\tconst response = await fetch(url, {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\t...fetchOptions,\n\t\t\t});\n\t\t\tconst data = await response.json();\n\t\t\tdataFunction(data);\n\t\t} catch (ex) {\n\t\t\terrorFunction(500, \"Error executing $http.post\", ex);\n\t\t}\n\t},\n};\n\n/**\n * Clipboard\n */\nwindow.clipboard = XoneClipboard;\n\n/**\n * XOneOCR\n */\nwindow.XOneOCR = class XOneOCR {\n\tstartScan() {\n\t\tconsole.log(\"OCR Start Scan\");\n\t}\n};\n\n/**\n * fingerprintManager\n */\nwindow.fingerprintManager = new (class FingetprintManager {\n\tisHardwareAvailable() {\n\t\treturn false;\n\t}\n\thasEnrolledFingerprints() {\n\t\treturn false;\n\t}\n})();\n\n/**\n * replica\n */\nwindow.replica = new (class Replica {\n\tgetRecordsRX() {\n\t\treturn 0;\n\t}\n\tgetRecordsTX() {\n\t\treturn 0;\n\t}\n\tgetRecordsPend() {\n\t\treturn 0;\n\t}\n\tgetTotalRecordsRX() {\n\t\treturn 0;\n\t}\n\tgetTotalRecordsTX() {\n\t\treturn 0;\n\t}\n\tgetLog() {\n\t\treturn \"\";\n\t}\n\tstartReplica() {}\n\tstart() {}\n\tstopReplica() {}\n\tstop() {}\n})();\n\n/**\n * Animation\n */\nwindow.Animation = XoneAnimation;\n\n/**\n * systemSettings\n */\nwindow.systemSettings = xoneSystemSettings;\n\nwindow.createBookmark = (title, url) => browser.bookmarks.create({ title, url }).then(() => console.log(\"Bookmark crated\"));\n","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport Container from \"./components/Container.vue\";\nimport \"./composables/helperFunctions/DateHelper\";\nimport \"./composables/helperFunctions/DeviceHelper\";\nimport \"./composables/ScriptGlobalObjects\";\nimport dragAndDrop from \"./composables/DragAndDrop\";\n\n// Cargamos el fichero de configuracin\n\n// Get App Configuration File and Script_Wrapper\nconst getConfig = Function(\n\t\"cbF\",\n\t\"(async()=>{try{const c=await import('../configuration.js');cbF(c.default);}catch(ex){console.error('Error loading configuration.js',ex);}})()\"\n);\n\ngetConfig((config) => {\n\tconst mode = config.mode || \"SPA\";\n\n\t// Iniciamos la App\n\tif (mode === \"DESIGNER\") dragAndDrop.setIsDesigner(true);\n\tcreateApp(App)\n\t\t.use(router)\n\t\t.component(\"Container\", Container)\n\t\t.mount(\"xone-app\");\n\n\t// PWA\n\tif (mode === \"PWA\")\n\t\tif (navigator.serviceWorker)\n\t\t\t// SW\n\t\t\tnavigator.serviceWorker.register(\"./sw.js\");\n\n\t// Disable navigator forward button\n\twindow.addEventListener(\n\t\t\"popstate\",\n\t\t(event) => {\n\t\t\tif (typeof event.state == \"object\" && event.state.obsolete !== true) {\n\t\t\t\thistory.replaceState({ obsolete: true }, \"\");\n\t\t\t\thistory.pushState(event.state, \"\");\n\t\t\t}\n\n\t\t\tif (typeof event.state == \"object\" && event.state.obsolete === true) {\n\t\t\t\thistory.back();\n\t\t\t}\n\t\t},\n\t\tfalse\n\t);\n\n\t// Lock scale\n\tconst viewportmeta = document.querySelector('meta[name=\"viewport\"]');\n\tif (viewportmeta) {\n\t\tviewportmeta.content = \"width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0\";\n\t\tdocument.body.addEventListener(\n\t\t\t\"gesturestart\",\n\t\t\tfunction() {\n\t\t\t\tviewportmeta.content = \"width=device-width, minimum-scale=0.25, maximum-scale=1.6\";\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\t}\n});\n\n// Creamos un nodo xone-app para contener la aplicacin\nclass XoneApp extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tconnectedCallback() {\n\t\tconst divElement = document.createElement(\"div\");\n\t\tdivElement.id = \"app\";\n\t\tthis.appendChild(divElement);\n\t}\n}\nwindow.customElements.define(\"xone-app\", XoneApp);\n","import TextUtils from \"./TextUtils\";\nimport { Utils } from \"./Utils\";\n\nexport default class StringUtils {\n    public static XONE_EMPTY_STRING = \"##XONE_EMPTY_STRING##\";\n    public static XONE_METHOD_DEFAULT = \"##xoneMethodDefault##\";\n    static ParseDateString(arg0: any, str: string): any {\n        throw new Error(\"Method not implemented.\");\n    }\n    static removeChars(text: string, ch: string): string {\n        if (text.startsWith(ch))\n            text=text.substr(1);\n        if (text.length>1 && text.endsWith(ch))\n            text=text.substr(0,text.length-1);\n        return text;\n    }\n    \n    static Replace(strSQL: string, arg1: string, str: string): string {\n        return strSQL.replace(arg1,str);\n    }\n    \n    static ParseBoolValue(value: string | number | boolean | null | undefined, bDefault:boolean=false): boolean {\n        if (value==null)\n            return bDefault;\n        if (typeof value === 'string') {\n            return value.length==0?bDefault:value.equalsIgnoreCase('true') || value.equals('1') || !!+value;  // here we parse to number first\n        }\n      \n        return !!value;\n    }\n\n    static IsEmptyString(text: string) {\n        return TextUtils.isEmpty(text);\n    }\n\n    static areEquals(text1: string, text2: string): boolean {\n        return text1===text2;\n    }\n\n    /**\n     * Dado un valor comprueba si es nulo para devolver cadena vaca. Si no, devuelve su conversin\n     * a cadena.\n     *\n     * @param Source   Valor que se quiere convertir.\n     * @param sDefault\n     * @return La cadena convertida o la por defecto.\n     */\n    public static SafeToString(Source: any, sDefault: string=\"\"): string {\n        try {\n            // Si es nulo, cadena vaca directamente\n            if (Source == null) {\n                return sDefault;\n            }\n            if (typeof Source === 'string')\n                return Source;\n            return Source.toString();\n            // /*\n            //  * 20/05/2016\n            //  * Si ya es CharSequence (String, StringBuffer, StringBuilder), invocamos su toString().\n            //  * En el caso de pasarle un String, que es bastante comun, este retorna su propia\n            //  * instancia y es rapido y no hace falta hacerle un check fuera de esta funcion.\n            //  */\n            // if (Source instanceof CharSequence) {\n            //     if (TextUtils.isEmpty((CharSequence) Source)) {\n            //         return sDefault;\n            //     }\n            //     return Source.toString();\n            // }\n            // // De lo contrario, simplemente el ToString de lo que sea\n            // if (Source instanceof Calendar) {\n            //     SimpleDateFormat dateformat = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n            //     return dateformat.format(((Calendar) Source).getTime().getTime());\n            // }\n            // if (Source instanceof Date) {\n            //     SimpleDateFormat dateformat = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n            //     return dateformat.format(((Date) Source).getTime());\n            // }\n            // /*\n            //  * TODO 24/05/2018 Juan Carlos\n            //  * Aado este check de doubles para que trate de eliminar la notacin cientfica al\n            //  * convertirlo a string para por ejemplo el cstr() de vbscript\n            //  *\n            //  * Posiblemente tambin sea necesario hacerlo con floats.\n            //  */\n            // if (Source instanceof Double) {\n            //     return doubleFormatter.format((double) Source);\n            // }\n            // if (Source instanceof Object[]) {\n            //     StringBuilder bld = new StringBuilder();\n            //     try {\n            //         Object[] arr = (Object[]) Source;\n            //         for (Object value : arr) {\n            //             if (bld.length() > 0) {\n            //                 bld.append(\"\\r\\n\");\n            //             }\n            //             bld.append(value);\n            //         }\n            //     } catch (Exception e) {\n            //         e.printStackTrace();\n            //     }\n            //     return bld.toString();\n            // }\n            // String value = String.valueOf(Source);\n            // if (TextUtils.isEmpty(value)) {\n            //     return sDefault;\n            // }\n            // return value;\n        } catch (e) {\n            return sDefault;\n        }\n    }\n}","/**\n * generate Unique Id\n * @returns {string}\n */\nexport const generateUniqueId = () =>\n\tMath.random()\n\t\t.toString(36)\n\t\t.substr(2, 9);\n\nexport const generateUniqueDeviceId = () => {\n\treturn `${Math.random()\n\t\t.toString(36)\n\t\t.substr(2, 9)}-${Math.random()\n\t\t.toString(36)\n\t\t.substr(2, 9)}-${Math.random()\n\t\t.toString(36)\n\t\t.substr(2, 9)}-${Math.random()\n\t\t.toString(36)\n\t\t.substr(2, 9)}`;\n};\n\n/**\n * generate a Document from xml string\n * @param {string} xmlString\n * @returns {Document}\n */\nexport const parseXoneXml = (xmlString) => new DOMParser().parseFromString(xmlString, \"text/xml\");\n\nconst isEmpty = (x) => typeof x == \"undefined\" || x.length == 0 || x == null;\n\nconst capComment = 1,\n\tcapSelector = 2,\n\tcapEnd = 3,\n\tcapAttr = 4;\nconst commentX = /\\/\\*[\\s\\S]*?\\*\\//g;\nconst lineAttrX = /([^\\:]+):([^\\;]*);/;\nconst altX = /(\\/\\*[\\s\\S]*?\\*\\/)|([^\\s\\;\\{\\}][^\\;\\{\\}]*(?=\\{))|(\\})|([^\\;\\{\\}]+\\;(?!\\s*\\*\\/))/gim;\n\n/**\n * Input is css string and current pos, returns JSON object\n * @param {string} cssString\n * @param {object} [args]\n */\nexport const parseXoneCss = (\n\tcssString,\n\targs = {\n\t\tcomments: false,\n\t\tstripComments: true,\n\t}\n) => {\n\tconst node = {};\n\n\tlet match = null;\n\tlet count = 0;\n\n\tif (args.stripComments) {\n\t\targs.comments = false;\n\t\tcssString = cssString.replace(commentX, \"\");\n\t}\n\twhile ((match = altX.exec(cssString))) {\n\t\tif (!isEmpty(match[capComment]) && args.comments) {\n\t\t\t// Comment\n\t\t\tnode[count++] = match[capComment].trim();\n\t\t} else if (!isEmpty(match[capSelector])) {\n\t\t\t// New node, we recurse\n\t\t\tconst name = match[capSelector].trim();\n\t\t\t// This will return when we encounter a closing brace\n\t\t\tconst newNode = parseXoneCss(cssString, args);\n\n\t\t\t[name]\n\t\t\t\t.map((e) => e?.trim())\n\t\t\t\t.forEach((sel) => {\n\t\t\t\t\tif (sel in node) {\n\t\t\t\t\t\tnewNode.attributes?.forEach((att) => (node[sel][att] = newNode.attributes[att]));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode[sel] = newNode;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t} else if (!isEmpty(match[capEnd])) {\n\t\t\t// Node has finished\n\t\t\treturn node;\n\t\t} else if (!isEmpty(match[capAttr])) {\n\t\t\tconst line = match[capAttr].trim();\n\t\t\tconst attr = lineAttrX.exec(line);\n\t\t\tif (!attr) continue;\n\t\t\t// Attribute\n\t\t\tconst name = attr[1].trim();\n\t\t\tconst value = attr[2].trim();\n\t\t\tnode[name] = value;\n\t\t}\n\t}\n\n\treturn node;\n};\n","export class SwipeHandler {\n\t_xThreshhold = 75; // slide this._xThreshhold\n\t_allowedTime = 500; // ms allowed to swipe\n\t_yThreshhold = 75; // slide this._yThreshhold\n\n\t/**\n\t * Constructor\n\t * @param {Function} callbackFunction\n\t */\n\tconstructor(callbackFunction) {\n\t\tthis.callbackFunction = callbackFunction;\n\t}\n\n\t/**\n\t * Touch Start\n\t * @param {TouchEvent} e\n\t */\n\ttouchStart(e) {\n\t\tif (!this.isSwipeable(e.target)) return e.stopPropagation();\n\t\tthis.touchobj = e.changedTouches[0];\n\t\tthis.dist = 0;\n\t\tthis.startX = this.touchobj.pageX;\n\t\tthis.startY = this.touchobj.pageY;\n\t\t// get start time\n\t\tthis.startTime = new Date().getTime();\n\t}\n\n\t/**\n\t * Touch End\n\t * @param {TouchEvent} e\n\t */\n\ttouchEnd(e) {\n\t\tif (!this.isSwipeable(e.target)) return e.stopPropagation();\n\t\tthis.touchobj = e.changedTouches[0];\n\t\tthis.dist = this.touchobj.pageX - this.startX;\n\t\t// get swipe time\n\t\tthis.elapsedTime = new Date().getTime() - this.startTime;\n\t\tif (\n\t\t\tthis.elapsedTime > this._allowedTime ||\n\t\t\tMath.abs(this.dist) < this._xThreshhold ||\n\t\t\tMath.abs(this.touchobj.pageY - this.startY) > this._yThreshhold\n\t\t)\n\t\t\treturn;\n\n\t\tthis.callbackFunction(this.dist < 0 ? 1 : -1);\n\t}\n\n\t/**\n\t * isSwipeable\n\t * @param {HTMLElement} element\n\t * @return {boolean}\n\t */\n\tisSwipeable(element) {\n\t\tdo {\n\t\t\tif (element === this.touchElement) return true;\n\t\t\tif (element.getAttribute(\"swipeable\") === \"false\") return false;\n\t\t\telement = element.parentElement;\n\t\t} while (element);\n\t\treturn true;\n\t}\n\n\t/**\n\t * Initializate\n\t * @param {HTMLElement} touchElement\n\t */\n\tinit(touchElement) {\n\t\tthis.touchElement = touchElement;\n\t\tthis.touchElement.addEventListener(\"touchstart\", this.touchStart.bind(this), { passive: true });\n\t\tthis.touchElement.addEventListener(\"touchend\", this.touchEnd.bind(this), {\n\t\t\tpassive: true,\n\t\t});\n\t}\n\n\tclear() {\n\t\t// clear events\n\t\tthis.touchElement.removeEventListener(\"touchstart\", this.touchStart);\n\t\tthis.touchElement.removeEventListener(\"touchend\", this.touchEnd);\n\t}\n}\n","var __awaiter =\n  (this && this.__awaiter) ||\n  function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n      return value instanceof P\n        ? value\n        : new P(function(resolve) {\n            resolve(value);\n          });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n      function fulfilled(value) {\n        try {\n          step(generator.next(value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function rejected(value) {\n        try {\n          step(generator[\"throw\"](value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n      function step(result) {\n        result.done\n          ? resolve(result.value)\n          : adopt(result.value).then(fulfilled, rejected);\n      }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n  };\nimport * as fs from \"fs\";\nexport class FileManagerNodeJs {\n  readFileSync(path, options) {\n    return fs.readFileSync(path, options);\n  }\n  readJsonFileSync(path, options) {\n    var file = fs.readFileSync(path, options);\n    return JSON.parse(file.toString());\n  }\n}\nexport class FileManagerOnline {\n  // readFileSync(path, options) {\n  //   return fs.readFileSync(path, options);\n  // }\n\n  readFileSync(filePath, mimeType = \"text/string\") {\n    const xmlhttp = new XMLHttpRequest();\n    xmlhttp.open(\"GET\", filePath, false);\n    // if (mimeType != null) {\n    //   if (xmlhttp.overrideMimeType) {\n    //     xmlhttp.overrideMimeType(mimeType);\n    //   }\n    // }\n    xmlhttp.setRequestHeader(\"Content-type\", \"charset=UTF-8\");\n    xmlhttp.send();\n    if (xmlhttp.status == 200 && xmlhttp.readyState == 4) {\n      return xmlhttp.responseText;\n    } else {\n      // TODO Throw exception\n      return null;\n    }\n  }\n\n  async readFileAsync(filePath) {\n    try {\n      const response = await fetch(filePath, { mode: \"no-cors\" });\n      const text = await response.clone().text();\n\n      let i = text.indexOf(\"encoding=\");\n      let encoding = \"UTF-8\";\n      if (i !== -1) {\n        let st = text.substring(i + 10);\n        encoding = st.substring(0, st.indexOf('\"'));\n      }\n      const buffer = await response.arrayBuffer();\n\n      const decoder = new TextDecoder(encoding);\n\n      return decoder.decode(buffer);\n    } catch (ex) {\n      console.error(\"readFileAsync\", filePath, ex);\n    }\n  }\n\n  readJsonFileSync(filePath, mimeType = \"text/json\") {\n    const res = this.readFileSync(filePath, mimeType);\n    return res ? JSON.parse(res) : null;\n    // const xmlhttp = new XMLHttpRequest();\n    // xmlhttp.open(\"GET\", filePath, false);\n    // if (mimeType != null) {\n    //   if (xmlhttp.overrideMimeType) {\n    //     xmlhttp.overrideMimeType(mimeType);\n    //   }\n    // }\n\n    // xmlhttp.send();\n    // if (xmlhttp.status == 200 && xmlhttp.readyState == 4) {\n    //   return JSON.parse(xmlhttp.responseText);\n    // } else {\n    //   // TODO Throw exception\n    //   return null;\n    // }\n  }\n}\n\n//# sourceMappingURL=FileManager.js.map\n","import { computed, nextTick, ref, Ref, ComputedRef } from \"vue\";\nimport { XoneDataCollection } from \"./appData/core/XoneDataCollection\";\nimport xoneUI from \"./XoneUI\";\n\n/**\n * @typedef {Object} RowInfo\n * @property {number} id\n * @property {string} recordId\n * @property {function(any): void} setRecordId\n * @property {boolean} visible\n * @property {string} height\n * @property {string} width\n * @property {booolean} isExpanded\n * @property {booolean} isLoaded\n * @property {booolean} isFirstLoad\n * @property {function(): void} refresh\n * @property {function(): void} setIsLoaded\n * @property {function(function): void} setRefresh\n */\n\n/**\n * ContentsLoaderHandler\n */\nexport class ContentsLoaderHelper {\n\t/**\n\t * Contents items info (index, size, visibility)...\n\t * @type {Ref<RowInfo[]>}\n\t */\n\tcontentsRowsInfo = ref([]);\n\n\t/**\n\t * @type {HTMLElement}\n\t */\n\telement;\n\n\t/**\n\t * @type {XoneDataCollection}\n\t */\n\tcontents;\n\n\t/**\n\t * @type {number}\n\t */\n\trowsPerPage = 20;\n\n\t/**\n\t * @type {number}\n\t */\n\trowsPerPageByObjectId = 5;\n\n\t/**\n\t * @type {number}\n\t */\n\trowsPerLoad = 50;\n\n\t/**\n\t * @type {boolean}\n\t */\n\tisCheckingRowsVisibility;\n\n\t/**\n\t * @type {ref<boolean>}\n\t */\n\tisLoadingRowsInfo = ref(true);\n\n\t/**\n\t * Bloquea la carga de nuevos rows, se utiliza para poder ocultar el loading sin que eso conlleve agregar ms rows innecesarios al contents si entra de nuevo automticamente por un evento de scroll\n\t * @type {boolean}\n\t */\n\tlockLoadRowsInfo = false;\n\n\t/**\n\t * @type {boolean}\n\t */\n\tisInGroup;\n\n\t/**\n\t * @type {Ref<number>}\n\t */\n\trowsLength = ref(0);\n\n\t/**\n\t * @type {Map<string,HTMLElement>}\n\t */\n\tmapDivElements = new Map();\n\n\t/**\n\t * @type {string}\n\t */\n\telementName;\n\n\t/**\n\t * @type {boolean}\n\t */\n\tallRecordsLoaded = false;\n\n\t/**\n\t * loadByObjectId, si el contents carga el mismo n de registros que se piden, es porque es un content \"pesado\" en datos, cargaremos dinamicamente de row en row para mejorar la navegacion (fluid-load)\n\t * @type {boolean}\n\t */\n\tloadByObjectId;\n\n\t/**\n\t * @type {string}\n\t */\n\tbreadcrumbId;\n\n\t/**\n\t * Comprobar despus de la primera carga de rows que exista scroll o que no se hayan renderizado todos los valores devueltos para cargar otro siguiente bloque si fuese necesario\n\t * @type {boolean}\n\t */\n\tcheckLoadScroll = true;\n\n\t/**\n\t * @type {ref<boolean>}\n\t */\n\tisLoading = ref(true);\n\n\t/**\n\t * Constructor\n\t * @param {string} elementName\n\t * @param {string} breadcrumbId\n\t * @param {number} [rowsPerPage]\n\t */\n\tconstructor(elementName, breadcrumbId, rowsPerPage = null) {\n\t\tthis.elementName = elementName;\n\t\tthis.breadcrumbId = breadcrumbId;\n\t\tif (!rowsPerPage) return;\n\t\tthis.rowsPerPage = rowsPerPage;\n\t\tthis.rowsPerPageByObjectId = rowsPerPage;\n\t\tthis.checkLoadScroll = false;\n\t}\n\n\t/**\n\t * bindOnScroll\n\t * @param {HTMLElement} element\n\t */\n\tbindOnScrollEvent(element) {\n\t\tthis.element = element;\n\t\telement.addEventListener(\"scroll\", this.onScroll.bind(this));\n\t}\n\n\t/**\n\t * clear\n\t */\n\tclear() {\n\t\tthis.reset();\n\t\tthis.element.removeEventListener(\"scroll\", this.onScroll);\n\t}\n\n\t/**\n\t * getContentsRowsInfo\n\t * @returns {Ref<Array<RowInfo>>}\n\t */\n\tgetContentsRowsInfo() {\n\t\treturn this.contentsRowsInfo;\n\t}\n\n\t/**\n\t * getIsLoading\n\t * @return {ComputedRef<boolean>} value\n\t */\n\tgetIsLoading() {\n\t\t// return computed(() => this.isLoading.value); // || this.isLoadingRowsInfo.value);\n\t\treturn computed(() => this.isLoading.value || this.isLoadingRowsInfo.value);\n\t}\n\n\t/**\n\t * getrowsLength\n\t * @returns {Ref<number>} value\n\t */\n\tgetRowsLength() {\n\t\treturn this.rowsLength.value;\n\t}\n\n\t/**\n\t * setPaginationSize\n\t * @param {number|undefined} value\n\t */\n\tsetPaginationSize(value) {\n\t\tif (!value) return;\n\t\tthis.rowsPerPage = value;\n\t\tthis.rowsPerPageByObjectId = value;\n\t}\n\n\t/**\n\t * reset\n\t */\n\tasync reset() {\n\t\tthis.lockLoadRowsInfo = false;\n\t\tthis.mapDivElements.clear(); // Clear divs cache\n\t\tthis.contentsRowsInfo.value = []; // Clear rows info\n\t\tthis.rowsLength.value = 0; // Init rowsLenght\n\t\tthis.allRecordsLoaded = false; // Init allRecordsLoaded\n\t\t// this.isLoadingRowsInfo.value = false; // Init IsLoadingRowsInfo\n\t\tthis.isCheckingRowsVisibility = false; // Init isCHeckingRowVisibility\n\t\tawait nextTick();\n\t}\n\n\t/**\n\t * On contents scroll\n\t * @param {*} e\n\t */\n\tonScroll() {\n\t\tif (this.isCheckingRowsVisibility || this.isLoadingRowsInfo.value || this.isLoading.value) {\n\t\t\tif (this.timeoutOnScroll) clearTimeout(this.timeoutOnScroll);\n\t\t\treturn (this.timeoutOnScroll = setTimeout(() => this.onScroll())), 25;\n\t\t}\n\t\t// Check elements visibility in scroll\n\t\tthis.checkScrollElementsVisibility();\n\t\t// Check if we have to load more child components\n\t\tthis.checkLoadRowsInfo();\n\t}\n\n\t/**\n\t * checkScrollElementsVisibility\n\t * @param {*} e\n\t */\n\tcheckScrollElementsVisibility() {\n\t\ttry {\n\t\t\tthis.isCheckingRowsVisibility = true;\n\t\t\tif (this.scrollElementsVisibilityTimeout) clearTimeout(this.scrollElementsVisibilityTimeout);\n\t\t\tthis.scrollElementsVisibilityTimeout = setTimeout(() => {\n\t\t\t\tthis.contentsRowsInfo.value.forEach((/** @type {RowInfo} */ element) => {\n\t\t\t\t\tconst { scrollTop, clientHeight } = this.element;\n\t\t\t\t\t// Get Elements from cache\n\t\t\t\t\tlet divElement = this.mapDivElements.get(element.id);\n\t\t\t\t\t// Cache elements\n\t\t\t\t\tif (!divElement) {\n\t\t\t\t\t\tdivElement = document.getElementById(`${this.elementName.replace(\"@\", \"\")}${element.id}${this.breadcrumbId}`);\n\t\t\t\t\t\tif (!divElement) return;\n\t\t\t\t\t\tthis.mapDivElements.set(element.id, divElement);\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\t// Hide elements above scroll\n\t\t\t\t\t\tdivElement.offsetTop + divElement.clientHeight + window.outerHeight < scrollTop ||\n\t\t\t\t\t\t// Hide elements below scroll\n\t\t\t\t\t\t(divElement.offsetTop + divElement.clientHeight > scrollTop + clientHeight + window.outerHeight &&\n\t\t\t\t\t\t\tdivElement.offsetTop > scrollTop + clientHeight)\n\t\t\t\t\t) {\n\t\t\t\t\t\t// set height\n\t\t\t\t\t\tif (element.height === \"auto\") element.height = divElement.clientHeight ? divElement.clientHeight + \"px\" : \"auto\";\n\t\t\t\t\t\t// set width\n\t\t\t\t\t\tif (element.width === \"auto\") element.width = divElement.clientWidth ? divElement.clientWidth + \"px\" : \"auto\";\n\t\t\t\t\t\t// set visibility\n\t\t\t\t\t\telement.visible = false;\n\t\t\t\t\t} else if (\n\t\t\t\t\t\t// Show elements on scroll\n\t\t\t\t\t\t!element.visible\n\t\t\t\t\t) {\n\t\t\t\t\t\telement.height = \"auto\";\n\t\t\t\t\t\telement.width = \"auto\";\n\t\t\t\t\t\telement.visible = true;\n\t\t\t\t\t}\n\t\t\t\t\tthis.isCheckingRowsVisibility = false;\n\t\t\t\t});\n\t\t\t}, 100);\n\t\t} catch {\n\t\t\tthis.isCheckingRowsVisibility = false;\n\t\t}\n\t}\n\n\tcheckLoadRowsInfo() {\n\t\t/** @type {HTMLDivElement} */\n\t\tconst element = this.element;\n\n\t\tif (\n\t\t\t(this.allRecordsLoaded && this.contentsRowsInfo.value.length >= this.rowsLength.value) ||\n\t\t\telement.scrollHeight - element.clientHeight - window.outerHeight / 2 >= element.scrollTop\n\t\t)\n\t\t\treturn;\n\n\t\tthis.loadRowsInfo(null, element);\n\t}\n\n\t/**\n\t * loadRows\n\t * @param {XoneDataCollection} [contents]\n\t * @param {import(\"./XoneAttributesHandler\").PropAttributes} [attributes]\n\t * @param {boolean} [isFirstLoad]\n\t */\n\tasync loadRows(contents = null, attributes = null, isFirstLoad = false) {\n\t\ttry {\n\t\t\tif (contents) {\n\t\t\t\tawait this.reset();\n\t\t\t\tthis.contents = contents;\n\t\t\t}\n\t\t\tthis.isLoading.value = true;\n\t\t\tthis.isLoadingRowsInfo.value = true;\n\n\t\t\t/**\n\t\t\t * coleccion special\n\t\t\t * @type {boolean}\n\t\t\t */\n\t\t\tconst isSpecial = this.contents.m_xmlNode.getAttrValue(\"special\") === \"true\";\n\n\t\t\t/**\n\t\t\t * carga fluida, carga los registros de 1 en 1 para no bloquear el UI\n\t\t\t * @type {boolean}\n\t\t\t */\n\t\t\tconst isFluidLoad = this.contents.m_xmlNode.getAttrValue(\"fluid-load\") === \"true\" || attributes?.fluidLoad;\n\n\t\t\tif (isFirstLoad && this.contents.length !== 0) {\n\t\t\t\t// Se supone que ya se ha cargado en un before-edit y aqu no tenemos que hacer nada?\n\t\t\t} else if (!isSpecial) {\n\t\t\t\tif (this.contents.isLock()) await this.contents.loadAll(false);\n\t\t\t\telse\n\t\t\t\t\tawait this.contents.loadAll(false, {\n\t\t\t\t\t\tstart: this.getRowsLength(),\n\t\t\t\t\t\tlength: this.rowsPerLoad,\n\t\t\t\t\t});\n\t\t\t} else if (this.getRowsLength() === this.contents.length) this.allRecordsLoaded = true;\n\n\t\t\t// Marcamos si se han cargado todos los datos\n\t\t\tif (this.contents.length === 0 || this.contents.isLock() || this.contents.length !== this.rowsPerLoad) this.allRecordsLoaded = true;\n\t\t\tthis.rowsLength.value += this.contents.length;\n\n\t\t\t// Si tenemos un contents con muchos datos o queremos carga fluida, usaremos el ID del objeto para la carga\n\t\t\tif (contents && !isSpecial) this.loadByObjectId = this.rowsPerLoad === this.contents.length || isFluidLoad;\n\t\t} catch (ex) {\n\t\t\txoneUI.showSnackbar({ color: \"#F44336\", textColor: \"white\", text: ex });\n\t\t\tthis.allRecordsLoaded = true;\n\t\t\tconsole.error(ex);\n\t\t} finally {\n\t\t\tthis.isLoading.value = false;\n\t\t}\n\t}\n\n\t/**\n\t * loadRowsInfo\n\t */\n\tasync loadRowsInfo() {\n\t\tif (this.lockLoadRowsInfo) return;\n\t\tthis.lockLoadRowsInfo = true;\n\t\tthis.isLoadingRowsInfo.value = true;\n\n\t\t// Si tenemo scrollbar vamos a hacer un pequeo delay para no bloquear el  UI distribuyendo el proceso\n\t\tif (this.contentsRowsInfo.value.length === 0 || this.element.scrollHeight > this.element.clientHeight)\n\t\t\tawait new Promise((resolve) => setTimeout(() => nextTick(() => resolve()), 1));\n\n\t\tconst newRowsNumber = this.loadByObjectId ? this.rowsPerPageByObjectId : this.rowsPerPage;\n\n\t\tconst init = this.contentsRowsInfo.value.length === 0 ? 0 : this.contentsRowsInfo.value[this.contentsRowsInfo.value.length - 1].id + 1;\n\n\t\tconst end = init + newRowsNumber;\n\n\t\tfor (let i = init; i < end; i++) {\n\t\t\t// Si no estamos en el grupo del contents esperamos\n\t\t\twhile (!this.isInGroup) await new Promise((resolve) => setTimeout(() => resolve(), 250));\n\n\t\t\tif (i >= this.getRowsLength()) {\n\t\t\t\t// Todos los datos cargados\n\t\t\t\tif (this.allRecordsLoaded) {\n\t\t\t\t\treturn this.resetLoadRows();\n\t\t\t\t}\n\t\t\t\t// Cargamos ms datos\n\t\t\t\tawait this.loadRows();\n\t\t\t\tif (this.allRecordsLoaded) {\n\t\t\t\t\treturn this.resetLoadRows();\n\t\t\t\t}\n\t\t\t}\n\t\t\t/** @type {RowInfo} */\n\t\t\tconst rowInfo = {\n\t\t\t\tid: i,\n\t\t\t\trecordId: !this.loadByObjectId\n\t\t\t\t\t? null\n\t\t\t\t\t: await (async () => {\n\t\t\t\t\t\t\tlet iData = i;\n\t\t\t\t\t\t\twhile (iData >= this.rowsPerLoad) iData -= this.rowsPerLoad;\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tconst obj = await this.contents.get(iData);\n\t\t\t\t\t\t\t\treturn obj.ID.toString();\n\t\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t\tconsole.error(\"Error getting XoneDataObject ID\", ex);\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t  })(),\n\t\t\t\tsetRecordId: (value) => (rowInfo.recordId = value?.toString()),\n\t\t\t\tvisible: true,\n\t\t\t\theight: \"auto\",\n\t\t\t\twidth: \"auto\",\n\t\t\t\tisExpanded: false,\n\t\t\t\tisFirstLoad: init === 0,\n\t\t\t\trefresh: () => {},\n\t\t\t\tsetRefresh: (callbackFunction) => (rowInfo.refresh = callbackFunction),\n\t\t\t\tsetIsLoaded: (value) => (rowInfo.isLoaded = value),\n\t\t\t};\n\t\t\tthis.contentsRowsInfo.value.push(rowInfo);\n\t\t}\n\n\t\tthis.resetLoadRows();\n\t}\n\n\tasync resetLoadRows() {\n\t\t// delete window.isLoadingContents;\n\t\tthis.isLoadingRowsInfo.value = false;\n\n\t\t/** @type {HTMLDivElement} */\n\t\tconst element = this.element;\n\n\t\tlet hasScroll = false;\n\n\t\t// Vamos a meter un delay para que rendericen los rows y calculemos si necesitamos cargar ms filas o no...\n\t\tfor (let i = 0; i < 100; i++) {\n\t\t\tif (this.element.scrollHeight > element.clientHeight + 200) {\n\t\t\t\thasScroll = true;\n\t\t\t\tthis.checkScrollElementsVisibility();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (!this.contentsRowsInfo.value.some((e) => !e.isLoaded)) break;\n\t\t\tawait new Promise((resolve) => setTimeout(() => resolve(), 5));\n\t\t}\n\n\t\tconst newRowsNumber = this.loadByObjectId ? this.rowsPerPageByObjectId : this.rowsPerPage;\n\n\t\tthis.lockLoadRowsInfo = false;\n\n\t\tif (hasScroll || this.contentsRowsInfo.value.length < newRowsNumber) return;\n\n\t\tif (!this.checkLoadScroll) return;\n\n\t\tthis.loadRowsInfo();\n\t}\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MsgBox.vue?vue&type=style&index=0&id=2b0d8532&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Prop.vue?vue&type=style&index=0&id=01291dc2&scoped=true&lang=css\"","import TextUtils from \"../../Utils/TextUtils\";\n\nexport enum eJoinType {\n    eLeftJoin,\n    eRightJoin,\n    eInnerJoin\n};\n\nexport class QueryTable {\n    /**\n     * TRUE si la tabla usa prefijo\n     */\n    private m_bUsePrefix:boolean;\n    /**\n     * Condicin JOIN para unirse con la tabla que le sigue en una sentencia\n     */\n    private  m_strJoinCondition:string;\n    /**\n     * Alias de la tabla en la sentencia SQL si es que lo tiene\n     */\n    private m_strTableAlias:string;\n    /**\n     * Nombre de la tabla en la base de datos.\n     */\n    private m_strTableName:string;\n    /**\n     * Tabla que le sigue en un JOIN\n     */\n    private m_secondTable:QueryTable;\n    /**\n     * M09072901:\tPermitir que se puedan traducir los joins a formato where en blackberry\n     * TRUE si hay que traducir las uniones en el SQL regenerado.\n     */\n    private  m_bTranslateJoins:boolean;\n\n    private m_bUseParrentisisAtJoins = false;\n    /**\n     * K11090501: El parser de SQL no almacena el tipo de JOIN. Debera.\n     * Para saber qu join es\n     */\n    private m_joinType:eJoinType;\n\n    /**\n     * Construye una tabla de una sentencia SELECT\n     *\n     * @param Name  Nombre de la tabla en la base de datos.\n     * @param Alias Alias de la tabla en la unin JOIN del SQL.\n     */\n    constructor(Name:string, Alias:string) {\n        // Almacenar estos datos que son los bsicos\n        this.m_strTableName = Name;\n        this.m_strTableAlias = Alias;\n        // Por defecto usamos prefijo\n        this.m_bUsePrefix = true;\n        // K11090501: El parser de SQL no almacena el tipo de JOIN. Debera.\n        this.m_joinType = eJoinType.eLeftJoin;\n    }\n\n    /**\n     * Devuelve la siguiente tabla en una cadena de JOINs.\n     *\n     * @return\n     */\n    public  getSecondTable():QueryTable {\n        return this.m_secondTable;\n    }\n\n    /**\n     * Asigna valor a la siguiente tabla en la cadena de JOINs.\n     *\n     * @param value Tabla que sigue a esta en la cadena de JOINS de la sentencia SQL.\n     */\n    public setSecondTable( value:QueryTable):void {\n        this.m_secondTable = value;\n    }\n\n    /**\n     * M09072901:\tPermitir que se puedan traducir los joins a formato where en blackberry\n     * Expone la bandera que indica si hay que traducir las uniones o no.\n     */\n    public  getTranslateJoins():boolean {\n        return this.m_bTranslateJoins;\n    }\n\n    /**\n     * M09072901:\tPermitir que se puedan traducir los joins a formato where en blackberry\n     * Asigna valor a la bandera que indica si hay que traducir las uniones o no. Si hay tabla\n     * secundaria le propaga el valor que se le haya indicado.\n     */\n    public setTranslateJoins(value:boolean): void {\n        this.m_bTranslateJoins = value;\n        if (this.m_secondTable != null) {\n            this.m_secondTable.setTranslateJoins(value);\n        }\n    }\n\n    /**\n     * @return Devuelve el nombre real de la tabla.\n     */\n    public getActualName():string {\n        if (!this.m_bUsePrefix) {\n            return this.m_strTableName;\n        }\n        return \"##PREF##\" + this.m_strTableName;\n    }\n\n    /**\n     * Devuelve o asigna el alias a la tabla\n     *\n     * @return Esta funcin devuelve el alias de la tabla en la sentencia SQL a que pertenece.\n     */\n    public getAlias():string {\n        return this.m_strTableAlias;\n    }\n\n    /**\n     * Asigna valor al alias de la tabla en la sentencia SQL a que pertenece.\n     *\n     * @param value Nuevo valor para el alias de la tabla en la sentencia.\n     */\n    public setAlias(value:string):void {\n        this.m_strTableAlias = value;\n    }\n\n    /**\n     * @return Devuelve la condicin de unin entre esta tabla y la que le sigue.\n     */\n    public getJoinCondition():string {\n        return this.m_strJoinCondition;\n    }\n\n    /**\n     * K11090501: El parser de SQL no almacena el tipo de JOIN. Debera.\n     * Exponer el tipo de join\n     *\n     * @return\n     */\n    public getJoinType():eJoinType {\n        return this.m_joinType;\n    }\n\n    /**\n     * Asigna valor a la condicin de unin entre esta tabla y la que le sigue en la sentencia.\n     * <p>\n     * K11090501: El parser de SQL no almacena el tipo de JOIN. Debera.\n     * Pasar el tipo de join tambin\n     *\n     * @param value Nuevo valor para la condicin de unin.\n     */\n    public setJoinCondition(value:string, Type:eJoinType):void {\n        this.m_strJoinCondition = value;\n        // K11090501: El parser de SQL no almacena el tipo de JOIN. Debera.\n        this.m_joinType = Type;\n    }\n\n    /**\n     * @return Devuelve una cadena de unin con esta tabla y las que le siguen en la cadena de JOINs.\n     */\n    public  getTableName():string {\n        let str:string, strTmp:string;\n        // Si no tiene segunda tabla, solamente es esta\n        if (this.m_secondTable == null) {// No hay unin\n            str = String.format(\"%s%s\", this.m_bUsePrefix ? \"##PREF##\" : \"\", this.m_strTableName);\n            return str;\n        }// No hay unin\n        // M09072901:\tPermitir que se puedan traducir los joins a formato where en blackberry\n        // Ahora tenemos que ver si hay traduccin de uniones, en cuyo caso habr que devolver otra cosa\n        if (this.m_bTranslateJoins) {\n            return this.TranslatedJoinTableName();\n        }\n\n\n        // m_bUseParrentisisAtJoins\n        let openParent = \"(\";\n        let closeParent = \")\";\n\n        if (!this.m_bUseParrentisisAtJoins) {\n            openParent = \"\";\n            closeParent = \"\";\n        }\n\n        //\n        // Si tiene segunda tabla, devolver la unin de ambas\n        str = openParent + this.m_secondTable.getTableName();\n        if (TextUtils.isEmpty(this.m_secondTable.getJoinCondition())) {// Incluir el alias\n            strTmp = \" \" + this.m_secondTable.getAlias();\n            str += strTmp;\n        }// Incluir el alias\n        //\n        // Adicionar las uniones y esas cosillas\n        // K11090501: El parser de SQL no almacena el tipo de JOIN. Debera.\n        let strJoin = \"LEFT OUTER JOIN\";\n        switch (this.m_joinType) {\n            case eJoinType.eRightJoin:\n                strJoin = \"RIGHT JOIN\";\n                break;\n            case eJoinType.eInnerJoin:\n                strJoin = \"INNER JOIN\";\n                break;\n        }\n        strTmp = String.format(\" %s %s%s %s ON %s\" + closeParent, strJoin, this.m_bUsePrefix ? \"##PREF##\" : \"\", this.m_strTableName, this.m_strTableAlias, this.m_strJoinCondition);\n        str += strTmp;\n        return str;\n    }\n\n    /**\n     * M09072901:\tPermitir que se puedan traducir los joins a formato where en blackberry\n     * Devuelve una cadena con los nombres de tablas pero traduciendo las uniones a formato filtrado.\n     */\n    public TranslatedJoinTableName():string {\n        let strOut = this.m_bUsePrefix ? \"##PREF##\" : \"\";\n        strOut += this.m_strTableName;\n        // Ahora tendremos que poner el alias si lo lleva\n        if (!TextUtils.isEmpty(this.m_strTableAlias)) {\n            strOut += (\" \" + this.m_strTableAlias);\n        }\n        // Y finalmente si hay siguiente tabla habr que concatenarla\n        if (this.m_secondTable != null) {\n            strOut += (\",\" + this.m_secondTable.TranslatedJoinTableName());\n        }\n        return strOut;\n    }\n\n    /**\n     * Asigna valor al nombre (real) de la tabla en la sentencia SQL a la que pertenece.\n     *\n     * @param value Nuevo valor para el nombre de la tabla.\n     */\n    public setTableName(value:string):void {\n        this.m_strTableName = value;\n    }\n\n    /**\n     * @return Devuelve la bandera que indica si la tabla usa prefijo o no.\n     */\n    public getUsePrefix():boolean {\n        return this.m_bUsePrefix;\n    }\n\n    /**\n     * Asigna valor a la bandera que indica que hay que usar prefijo al recomponer el SQL.\n     *\n     * @param value TRUE si se quiere incluir el prefijo al recomponer el SQL.\n     */\n    public setUsePrefix(value:boolean):void {\n        this.m_bUsePrefix = value;\n    }\n\n    /**\n     * M09072901:\tPermitir que se puedan traducir los joins a formato where en blackberry\n     * Devuelve las condiciones para insertar en el WHERE generado como consecuencia de la\n     * traduccin de las uniones. Si ya haba WHERE se adicionarn al que haba, si no lo hay\n     * se generar uno nuevo.\n     */\n    public getTranslatedJoinConditions():string {\n        let strOut = \"\";\n        // Obtener la condicin de la primera tabla\n        if (!TextUtils.isEmpty(this.m_strJoinCondition)) {\n            strOut += (\"(\" + this.m_strJoinCondition + \")\");\n        }\n        if (this.m_secondTable != null) {// Pedir la condicin de esa tabla\n            let strTmp = this.m_secondTable.getTranslatedJoinConditions();\n            if (!TextUtils.isEmpty(strTmp)) {\n                strOut += (\" AND \" + strTmp);\n            }\n        }// Pedir la condicin de esa tabla\n        return strOut;\n    }\n}","import TextUtils from \"../../Utils/TextUtils\";\n\nexport default class QueryField {\n    /**\n     * Nombre del campo en la tabla de la base de datos\n     */\n    private m_strField: string;\n    /**\n     * Alias del campo segn se pone en la sentencia SELECT\n     */\n    private m_strAlias: string;\n\n    /**\n     * Construye una estructura de representacin de un campo y su alias en la sentencia SQL\n     *\n     * @param FieldName Nombre del campo en base de datos.\n     * @param AliasName Alias del campo en la sentencia.\n     */\n    constructor( FieldName: string,  AliasName: string) {\n        this.m_strField = FieldName;\n        this.m_strAlias = AliasName;\n    }\n\n    /**\n     * Nombre del campo en la tabla en base de datos\n     *\n     * @return Devuelve el nombre real del campo.\n     */\n    public getName(): string {\n        return this.m_strField;\n    }\n\n\n    public getResolvedName(): string {\n        return TextUtils.isEmpty(this.m_strAlias)?this.m_strField:this.m_strAlias;\n    }\n\n    /**\n     * Asigna valor nuevo al nombre del campo\n     *\n     * @param value Nuevo valor para el nombre del campo.\n     */\n    public setName(value: string): void {\n        this.m_strField = value;\n    }\n\n\n    /**\n     * Alias del campo en la sentencia SELECT\n     *\n     * @return Devuelve el alias del campo en la sentencia SELECT.\n     */\n    public getAlias(): string {\n        return this.m_strAlias;\n    }\n\n    /**\n     * Asigna valor al alias del campo en la sentencia SELECT.\n     *\n     * @param value Nuevo valor del alias del campo en la sentencia.\n     */\n    public setAlias(value: string):void {\n        this.m_strAlias = value;\n    }\n}\n","import Hashtable from \"../../Collections/HashMap/Hashtable\";\nimport QueryField from \"./QueryField\";\nimport { eJoinType, QueryTable } from \"./QueryTable\";\nimport SqlType from \"../../Utils/SqlType\";\nimport StringBuilder from \"../../Utils/StringBuilder\";\nimport StringUtils from \"../../Utils/StringUtils\";\nimport TextUtils from \"../../Utils/TextUtils\";\nimport IMessageHolder from \"../../Interfaces/IMessageHolder\";\nimport { Exception } from \"../../Exceptions/Exception\";\nimport IllegalArgumentException from \"../../Exceptions/IllegalArgumentException\";\nimport { XoneMessageKeys } from \"../../Exceptions/XoneMessageKeys\";\nimport { brotliDecompress } from \"zlib\";\nimport Vector from \"../../Collections/Vector\";\n\nclass ParserStatus {\n    /* Se ha obtenido el keyword inicial que permite identificar la sentencia */\n    static PARSER_KEYWORD = 0;\n\n    /* Se ha terminado el parsing */\n    static PARSER_COMPLETE = 1;\n\n    /* Estados para parsear una sentencia DELETE */\n    static PARSER_DELETE_EXPECTING_FROM = 2;\n    static PARSER_DELETE_EXPECTING_TABLE = 3;\n    static PARSER_DELETE_EXPECTING_WHERE = 4;\n    static PARSER_DELETE_WHERE = 5;\n\n    /* Estados para parsear una sentencia INSERT */\n    static PARSER_INSERT_EXPECTING_INTO = 6;\n    static PARSER_INSERT_EXPECTING_TABLE = 7;\n    static PARSER_INSERT_EXPECTING_FIELDS_BEGIN = 8;\n    static PARSER_INSERT_EXPECTING_FIELD_NAME = 9;\n    static PARSER_INSERT_EXPECTING_FIELD_SEPARATOR = 10;\n    static PARSER_INSERT_EXPECTING_VALUES = 11;\n    static PARSER_INSERT_EXPECTING_VALUES_BEGIN = 12;\n    static PARSER_INSERT_EXPECTING_VALUE = 13;\n    static PARSER_INSERT_EXPECTING_VALUE_SEPARATOR = 14;\n\n    /* Estados para parsear una sentencia UPDATE */\n    static PARSER_UPDATE_EXPECTING_TABLE = 15;\n    static PARSER_UPDATE_EXPECTING_SET = 16;\n    static PARSER_UPDATE_EXPECTING_FIELD_NAME = 17;\n    static PARSER_UPDATE_EXPECTING_EQUAL_SIGN = 18;\n    static PARSER_UPDATE_EXPECTING_FIELD_VALUE = 19;\n    static PARSER_UPDATE_EXPECTING_SEPARATOR = 20;\n    static PARSER_UPDATE_EXPECTING_WHERE = 21;\n    static PARSER_UPDATE_WHERE = 22;\n}\n\nexport class SqlParser {\n    private static NULL_VALUE = \"NULL\";\n\n    /**\n     * Nombre del campo ROWID utilizado en esta sentencia\n     */\n    private m_strRowIdFieldName: string;\n\n    /**\n     * Tipo del SQL que tiene asignado este parser\n     */\n    private m_sqlType: number;\n    /**\n     * Sentencia WHERE que tiene este SQL\n     */\n    private m_strWhere: string;\n    /**\n     * Lista de campos de esta sentencia\n     */\n    private m_lstFields: Hashtable<string, string>;\n    /**\n     * Lista de los tipos campos de esta sentencia Si por defecto es string no\n     * vamos a gastar espacio\n     */\n    private m_lstFieldsType: Hashtable<string, number>;\n    /**\n     * Nombre de la tabla\n     */\n    private m_strTable: string;\n    /**\n     * Aqu se almacena el ROWID una vez parseado el SQL\n     */\n    private m_strRowId: string;\n    /**\n     * Posicin por la que va el parser para obtener el siguiente token\n     */\n    private m_nParserIndex: number;\n    /**\n     * Token obtenido tras la ultima llamada a GetNextToken\n     */\n    private m_strCurrentToken: StringBuilder;\n    /**\n     * Cadena que se est parseando\n     */\n    private m_strSentence: string;\n    /**\n     * Estado en que est el parser actualmente\n     */\n    private m_status: number;\n    /**\n     * TRUE si el query es una unin (solo para SELECT)\n     */\n    private m_bIsUnionQuery: boolean;\n    /**\n     * Esta lista contiene los campos de la sentencia SELECT en el mismo orden\n     * en que se pusieron\n     */\n    private m_lstSelectFields: Vector<QueryField>;\n    /**\n     * Contiene la parte de la sentencia que corresponde al GROUP BY\n     */\n    private m_strGroupBy: string;\n    /**\n     * Contiene la parte de la sentencia que corresponde al ORDER BY\n     */\n    private m_strOrderBy: string;\n    /**\n     * Contiene la parte de la sentencia que corresponde al HAVING\n     */\n    private m_strHaving: string;\n    /**\n     * TRUE si hay que usar prefijo para reconstruir la sentencia SQL SELECT\n     */\n    private m_bUsePrefix: boolean;\n    /**\n     * Lista de queries que componen un SELECT UINON ALL\n     */\n    private m_lstUnionQueries: Array<SqlParser>;\n    /**\n     * TRUE si el SELECT lleva DISTINCT en su declaracin\n     */\n    private m_bDistinct: boolean;\n    /**\n     * Esta lista contiene las tablas de la sentencia SELECT en el mismo orden\n     * en que se pusieron\n     */\n    private m_tableFrom: QueryTable;\n    /**\n     * Palabras reservadas de SQL\n     */\n    private m_strReservedWords = [\n        \"insert\", \"update\", \"delete\", \"into\", \"values\", \"set\", \"where\",\n        \"from\", \"having\", \"group\", \"by\", \"order\"];\n\n    public static EMPTY = \"\";\n    //\n    // M09072901:\tPermitir que se puedan traducir los joins a formato where en blackberry\n    // Por defecto en el Blackberry las consultas sern traducidas... personalizar para futuras bases de datos\n    private m_bTranslateJoins = false;\n    /**\n     * M11051201: Mecanismo para soporte multilenguaje en los componentes y\n     * dems cosas. Aqu almacenamos la referencia al gestor de mensajes para\n     * facilitar la localizacin.\n     */\n    private m_messages: IMessageHolder;\n    /**\n     * F12110902: Modificaciones al parser de SQL para gestionar uniones. TRUE\n     * si queremos que las sentencias SQL que forman un UNION se encierren entre\n     * parntesis. Para sqlite por defecto ser FALSE.\n     */\n    private m_bSurroundUnions = false;\n\n    /**\n     * Creates a new instance of SqlParser\n     */\n    constructor(Source: string | SqlParser, Messages?: IMessageHolder) {\n        if (Source instanceof SqlParser)\n            this.SqlParserFromParser(Source as SqlParser);\n        else {\n            this.m_strRowIdFieldName = Source;\n            this.m_sqlType = SqlType.SQLTYPE_UNKNOWN;\n            this.m_lstFields = new Hashtable<string, string>();\n            // A12042602: Permitir que se puedan almacenar los tipos de datos de una sentencia SQL.\n            this.m_lstFieldsType = new Hashtable<string, number>();\n            // Esta lista es para cuando se parsea un SELECT\n            this.m_lstSelectFields = new Vector<QueryField>();\n            ////m_lstSelectFields = new Vector();\n            // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n            this.m_messages = Messages ? Messages : null;\n        }\n    }\n\n    /**\n     * Construye un parser a partir de otro\n     *\n     * @param Source Sentencia parseada original a partir de la que se compone\n     *               esta.\n     */\n    public SqlParserFromParser(Source: SqlParser) {\n        // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n        this.m_messages = Source.getMessageHolder();\n\n        this.m_strRowIdFieldName = Source.GetRowIdFieldName();\n        this.m_sqlType = Source.GetSqlType();\n        this.m_lstFields = new Hashtable<string, string>();\n        // A12042602: Permitir que se puedan almacenar los tipos de datos de una sentencia SQL.\n        this.m_lstFieldsType = new Hashtable<string, number>();\n        this.m_strTable = Source.GetTableName();\n        this.m_strWhere = Source.GetWhereSentence();\n        // Copiar los campos\n        Source.GetFields().entrySet().forEach(entry => this.m_lstFields.put(entry[0], entry[1]));\n\n        // Enumeration<String> enm = setHash.keys();\n        // while (enm.hasMoreElements()) {// Recorrer la lista\n        //     String strKey = enm.nextElement();\n        //     String strVal = setHash.get(strKey);\n        //     this.m_lstFields.put(strKey, strVal);\n        // }// Leer datos y copiar\n        this.m_strSentence = Source.GetSentence();\n        this.m_lstSelectFields = new Vector<QueryField>();\n    }\n\n    /**\n     * @return Devuelve el nombre del campo ROWID de este parser.\n     */\n    public GetRowIdFieldName() {\n        return this.m_strRowIdFieldName;\n    }\n\n    /**\n     * Asigna el nombre del campo ROWID de este parser\n     *\n     * @param value Nuevo valor para el nombre del campo ROWID.\n     */\n    public SetRowIdFieldName(value: string) {\n        this.m_strRowIdFieldName = value;\n    }\n\n    /**\n     * @return Devuelve la sentencia WHERE de este parser.\n     */\n    public GetWhereSentence() {\n        return this.m_strWhere?.replace(\"*\", \"\"); // amiyares 18/06/2021: el parser falla y agrega en la condicin un * que explota la llamada a la API, comentar con Luis a ver si podemos quitar parseos locales\n    }\n\n    /**\n     * M11051201: Mecanismo para soporte multilenguaje en los componentes y\n     * dems cosas. Devuelve el holder de mensajes de este parser...\n     */\n    public getMessageHolder() {\n        return this.m_messages;\n    }\n\n    /**\n     * Asigna la sentencia WHERE de este parser\n     *\n     * @param value Nuevo valor para la sentencia WHERE del parser.\n     */\n    public SetWhereSentence(value: Object) {\n        this.m_strWhere = value.toString();\n    }\n\n    /**\n     * @return Devuelve el ROWID de este parser.\n     */\n    public GetRowId(): string {\n        let strRID: string = null;\n        let n: number, k: number;\n        //\n        // Si ya lo tiene, lo devuelve...\n        if (!TextUtils.isEmpty(this.m_strRowId)) {\n            return this.m_strRowId;\n        }\n        //\n        // Si no, habr que buscarlo...\n        if (this.m_lstFields.containsKey(this.m_strRowIdFieldName)) {\n            strRID = this.m_lstFields.get(this.m_strRowIdFieldName);\n        }\n\n        if (TextUtils.isEmpty(strRID)) {// Buscarlo en el WHERE\n            strRID = this.GetWhereSentence();\n\n            // ADD TAG Juan Carlos. Chequeos extra.\n            // Tiene WHERE\n            if (!TextUtils.isEmpty(strRID)) {\n                n = strRID.indexOf(\"'\");\n                k = strRID.indexOf(\"'\", n + 1);\n                strRID = strRID.substring(n + 1, k); /* substring OK */\n            }// Tiene WHERE\n        }// Buscarlo en el WHERE\n        else {\n            strRID = StringUtils.removeChars(strRID, \"'\");\n        }\n        //\n        // Sea lo que sea, lo tiene...\n        if (!TextUtils.isEmpty(strRID)) {\n            this.m_strRowId = strRID;\n        }\n        //\n        // Devolverlo\n        return this.m_strRowId;\n    }\n\n    /**\n     * Expone la lista de campos de la sentencia parseada\n     *\n     * @return Devuelve la lista de campos de una sentencia INSERT o UPDATE.\n     */\n    public GetFields(): Hashtable<string, string> {\n        return this.m_lstFields;\n    }\n\n    /**\n     * @return Devuelve el tipo de operacin que tiene este parser.\n     */\n    public GetSqlType(): number {\n        return this.m_sqlType;\n    }\n\n    /**\n     * Asigna el tipo de operacin que tiene este parser\n     *\n     * @param value Nuevo valor para el tipo de sentencia SQL.\n     */\n    public SetSqlType(value: number): void {\n        this.m_sqlType = value;\n    }\n\n    /**\n     * Expone el nombre de la tabla de esta sentencia\n     *\n     * @return Devuelve el nombre de la tabla de una sentencia de modificacin\n     * (INSERT, UPDATE o DELETE)\n     */\n    public GetTableName(): string {\n        return this.m_strTable;\n    }\n\n    /**\n     * Asigna el nombre de la tabla de esta sentencia de modificacin.\n     *\n     * @param value Nuevo valor para el nombre de la tabla en la sentencia de\n     *              modificacin.\n     */\n    public SetTableName(value: string) {\n        this.m_strTable = value;\n    }\n\n    /**\n     * M09072901: Permitir que se puedan traducir los joins a formato where en\n     * blackberry Devuelve el valor de la bandera que indica si se traducen las\n     * uniones o no.\n     */\n    public getTranslateJoins(): boolean {\n        return this.m_bTranslateJoins;\n    }\n\n    /**\n     * M09072901: Permitir que se puedan traducir los joins a formato where en\n     * blackberry Asigna valor a la bandera que indica si hay que traducir las\n     * uniones o no.\n     */\n    public setTranslateJoins(value: boolean) {\n        this.m_bTranslateJoins = value;\n    }\n\n    /**\n     * F12110902: Modificaciones al parser de SQL para gestionar uniones.\n     *\n     * @return Devuelve TRUE si las sentencias que forman una unin se encierran\n     * entre parntesis.\n     */\n    public getSurroundUnions(): boolean {\n        return this.m_bSurroundUnions;\n    }\n\n    /**\n     * F12110902: Modificaciones al parser de SQL para gestionar uniones. Asigna\n     * valor a la bandera que indica si las uniones se encierran entre\n     * parntesis.\n     *\n     * @param value Nuevo valor para la banderilla.\n     */\n    public setSurroundUnions(value: boolean): void {\n        this.m_bSurroundUnions = value;\n    }\n\n    /**\n     * Expone la cadena que se ha parseado en este objeto.\n     *\n     * @return Devuelve la sentencia completa, tal como se pas a ParseSql\n     */\n    public GetSentence(): string {\n        return this.m_strSentence || \"\";\n    }\n\n    /**\n     * TRUE si el query es una unin (solo para SELECT)\n     *\n     * @return Devuelve la bandera que indica si el SELECT es una unin.\n     */\n    public getIsUnionQuery(): boolean {\n        return this.m_bIsUnionQuery;\n    }\n\n    /**\n     * Adiciona a esta sentencia las parejas campo/valor del SQL que se pasa\n     * como parmetro.\n     *\n     * @param Source Sentencia parseada que se usa como origen de la copia.\n     * @param Force  TRUE si se quiere forzar la copia (los valores de Source\n     *               siempre sobreescriben los locales) FALSE si solo se copian los\n     *               valores de Source que no estn en el local.\n     * @return Devuelve TRUE si la operacin es correcta.\n     * @throws ReplicationException\n     */\n    public AddFields(Source: SqlParser, Force: boolean): boolean {\n        //let strField:string, strValue:string;\n        try {\n            //\n            // Copiar los campos\n            Source.GetFields().entrySet().forEach(entry => {\n                if ((!Force && !this.m_lstFields.containsKey(entry[0])) || Force) {\n                    this.SetFieldValue(entry[0], entry[1]);\n                }\n            })\n            // Enumeration<String> enm = Source.GetFields().keys();\n            // while (enm.hasMoreElements()) {// Recorrer la lista\n\n            //     strField = enm.nextElement();\n            //     strValue = Source.GetFields().get(strField);\n            //     if ((!Force && !this.m_lstFields.containsKey(strField)) || Force) {\n            //         SetFieldValue(strField, strValue);\n            //     }\n            // }// Revisa los campos del SQL origen\n            return true;\n        } catch (e) {\n            // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n            ////throw new ReplicationException(ReplicationErrorCodes.RPLR_DATA_ERROR, e.getMessage(), \"Error adicionando campos a la operacin.\");\n            throw e;\n            //  new Exception(\n            //         GetMessage(XoneMessageKeys.SYS_MSG_SQL_ADDFIELDERROR, \"Error adding fields to the operation.\"));\n        }\n    }\n\n    /**\n     * Serializa el parser en un arreglo de bytes y lo devuelve.\n     *\n     * @return Devuelve el arreglo de bytes correspondiente al parser\n     * serializado.\n     * @throws IOException\n     */\n    // TODO: Esto creo que no hace falta\n    // public byte[] Serialize() throws IOException {\n    //     LittleEndianDataOutputStream bw = new LittleEndianDataOutputStream();\n    //     //\n    //     // Ahora escribimos nuestras cositas\n    //     bw.writeByte((byte) 0x4a);\n    //     bw.writeByte((byte) 0x4c);\n    //     // El cdigo de la operacin\n    //     bw.writeByte((byte) m_sqlType);\n    //     // El tamao del Table\n    //     StringUtils.SerializeString(m_strTable, bw);\n    //     // ROWID\n    //     StringUtils.SerializeString(m_strRowId, bw);\n    //     // WHERE\n    //     StringUtils.SerializeString(m_strWhere, bw);\n    //     // Y finalmente serializar la lista de campos\n    //     Enumeration<String> e = m_lstFields.keys();\n    //     bw.writeInt(m_lstFields.size());\n    //     while (e.hasMoreElements()) {// Recorrer y copiar\n    //         String strFieldName = e.nextElement();\n    //         String strFieldValue = m_lstFields.get(strFieldName);\n    //         for (int i = 0; i < strFieldName.length; i++) {\n    //             bw.writeByte((byte) strFieldName.charAt(i));\n    //         }\n    //         // Separador\n    //         bw.writeByte((byte) 0);\n    //         // Valor\n    //         if (!TextUtils.isEmpty(strFieldValue)) {// Ahora el valor\n    //             for (int i = 0; i < strFieldValue.length; i++) {\n    //                 bw.writeByte((byte) strFieldValue.charAt(i));\n    //             }\n    //         }// Ahora el valor\n    //         // Separador\n    //         bw.writeByte((byte) 0);\n    //     }// Recorrer y copiar\n    //     // Devolver lo que sea\n    //     return bw.toByteArray();\n    // }\n\n    /**\n     * Dado un buffer binario, lee de l los datos y los coloca en sus campos.\n     *\n     * @param Source Fuente de datos en la que viene el parser serializado.\n     * @return Devuelve TRUE si se pueden leer correctamente los datos del\n     * parser.\n     * @throws IOException\n     */\n    // TODO: Esto creo que no es necesario\n    // public boolean Deserialize(byte[] Source) throws IOException {\n    //     // Inicializar las estructuras\n    //     BeginParse();\n    //     // Primeramente comprobar el tamao mnimo\n    //     if (Source == null) {\n    //         throw new IOException(\n    //                 \"Error de datos. El buffer de origen es nulo.\");\n    //     }\n    //     if (Source.length < 22) {\n    //         return false; // Error, demasiado pocos datos\n    //     }\n    //     // Ahora comprobar la versin de la cabecera\n    //     ByteArrayInputStream bs = new ByteArrayInputStream(Source);\n    //     LittleEndianDataInputStream reader = new LittleEndianDataInputStream(bs);\n    //     int index;\n    //     // Cabecera\n    //     byte b = reader.readByte();\n    //     if (b != 0x4a) {\n    //         return false; // Error\n    //     }\n    //     if (0x4c != reader.readByte()) {\n    //         return false; // Error\n    //     }\n    //     // Ahora leer el tipo de operacin\n    //     m_sqlType = (int) reader.readByte();\n    //     index = 3;\n    //     // Traer la tabla\n    //     int nLen = reader.readInt();\n    //     index += 4;\n    //     m_strTable = \"\";\n    //     do {\n    //         if (0 != (b = reader.readByte())) {\n    //             m_strTable += (char) b;\n    //         }\n    //         index++;\n    //     } while (b != 0);\n    //     // Si el largo de la cadena no es correcto, nos explotamos\n    //     if (nLen != m_strTable.length) {\n    //         return false;\n    //     }\n    //     // Traer el ROWID\n    //     nLen = reader.readInt();\n    //     index += 4;\n    //     m_strRowId = \"\";\n    //     if (nLen > 0) {// El ROWID podra venir vaco\n    //         do {\n    //             if (0 != (b = reader.readByte())) {\n    //                 m_strRowId += (char) b;\n    //             }\n    //             index++;\n    //         } while (b != 0);\n    //         // Comprobar el largo\n    //     }// El ROWID podra venir vaco\n    //     else {\n    //         reader.readByte(); // El separador habr que leerlo igual\n    //     }\n    //     if (nLen != m_strRowId.length) {\n    //         return false;\n    //     }\n    //     // Traer el WHERE\n    //     nLen = reader.readInt();\n    //     index += 4;\n    //     m_strWhere = \"\";\n    //     if (nLen > 0) {// Los INSERT no traen WHERE\n    //         do {\n    //             if (0 != (b = reader.readByte())) {\n    //                 m_strWhere += (char) b;\n    //             }\n    //             index++;\n    //         } while (b != 0);\n    //     }// Los INSERT no traen WHERE\n    //     else {\n    //         reader.readByte(); // EL separador habr que leerlo igual\n    //     }\n    //     // Comprobar el largo\n    //     if (nLen != m_strWhere.length) {\n    //         return false;\n    //     }\n    //     // Y ahora la lista de campos\n    //     int nCount = reader.readInt();\n    //     for (int i = 0; i < nCount; i++) {// Leer esa cantidad de parejas\n    //         String strKey = \"\";\n    //         String strVal = \"\";\n    //         do {// Leer la clave\n    //             if (0 != (b = reader.readByte())) {\n    //                 strKey += (char) b;\n    //             }\n    //         } while (b != 0);\n    //         do {// Leer el valor\n    //             if (0 != (b = reader.readByte())) {\n    //                 strVal += (char) b;\n    //             }\n    //         } while (b != 0);\n    //         //\n    //         // Adicionar a la lista\n    //         m_lstFields.put(strKey, strVal);\n    //     }// Leer esa cantidad de parejas\n    //     // Ahora comprobar si no hay ROWID, porque podra estar en la lista de campos\n    //     if (TextUtils.isEmpty(m_strRowId)) {\n    //         m_strRowId = GetRowId();\n    //     }\n    //     return true;\n    // }\n\n    /**\n     * Inicializa las variables para comenzar el parsing de una cadena\n     */\n    private BeginParse(): void {\n        this.m_nParserIndex = 0;\n        this.m_strCurrentToken = null;\n        this.m_lstFields = new Hashtable<string, string>(); // Crear una nueva para limpiar lo que haya\n        this.m_strTable = null;\n        this.m_strWhere = \"\"; // Cadena vaca porque es para concatenar...\n        this.m_strRowId = null;\n    }\n\n    /**\n     * TRUE si el campo en cuestin existe en el parser\n     *\n     * @param Field Campo cuya existencia se quiere comprobar\n     * @return Devuelve TRUE si e lcampo existe en esta estructura de datos.\n     */\n    public FieldExists(Field: string): boolean {\n        return this.m_lstFields.containsKey(Field);\n    }\n\n    /**\n     * Devuelve el valor de un campo de una sentencia SQL de modificacin\n     * (INSERT o UPDATE)\n     *\n     * @param Field Campo cuyo valor se quiere obtener.\n     * @return Devuelve el valor del campo que se indica como parmetro...\n     */\n    public GetFieldValue(Field: string): string {\n        if (!this.m_lstFields.containsKey(Field)) {\n            return null;\n        }\n        return this.m_lstFields.get(Field);\n    }\n\n    /**\n     * @return Devuelve un token que puede estar precedido por separadores.\n     */\n    private GetNextSpacedToken(): string {\n        let strToken: string = null;\n\n        while (this.m_nParserIndex < this.m_strSentence.length) {// Mientras haya algo que rapiar\n            strToken = this.GetNextToken();\n            if (strToken.localeCompare(\" \") == 0 || strToken.localeCompare(\"\\t\") == 0 || strToken.localeCompare(\"\\n\") == 0 || strToken.localeCompare(\"\\r\") == 0) {\n                continue; // Cagarse en los separadores...\n            }\n            break;\n        }// Mientras haya algo que rapiar\n        return strToken;\n    }\n\n    /**\n     * Obtiene el siguiente token de la cadena que se tiene en el parser...\n     *\n     * @return Devuelve el siguiente token de la sentencia de modificacin de\n     * datos que se est parseando.\n     */\n    private GetNextToken(): string {\n        let ch: string;\n        /*\n         * ADD TAG 29/07/2016\n         * El uso de String en esta funcion provocaba cientos de ciclos de recoleccion de basura en\n         * esta funcion, en tokens gigantes. Lo cambio por StringBuilder, la mejora de velocidad es\n         * notable\n         */\n        let strToken = new StringBuilder();\n        let bStringToken = false;\n        //\n        // El token actual se obtiene desde el puntero marcado hasta el siguiente separador\n        while (this.m_nParserIndex < this.m_strSentence.length) {// Esto indicara fin de cadena\n            ch = this.m_strSentence.charAt(this.m_nParserIndex++);\n            if (ch == '\\'') {// Puede ser un inicio de cadena\n                if (!bStringToken) {\n                    bStringToken = true; // Empieza una cadena\n                } else {// Puede que la cadena termine\n                    if (this.m_nParserIndex > this.m_strSentence.length) {// Error\n                        // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n                        ////throw new Exception(\"Error de sintaxis en la sentencia SQL\");\n                        throw new IllegalArgumentException(this.GetMessage(XoneMessageKeys.SYS_MSG_SQL_SYNTAXERROR, \"Syntax error in SQL Sentence.\"));\n                    }// Error\n                    //\n                    // Obtener el siguiente para ver si es un doble apstrofe\n                    if (this.m_nParserIndex < this.m_strSentence.length) {// Vienen cosas detrs\n                        if (this.m_strSentence.charAt(this.m_nParserIndex) == '\\'') {// Sumar este y el siguiente\n                            strToken.append(ch);\n                            this.m_nParserIndex++;\n                        }// Sumar este y el siguiente\n                        else {// Termina una cadena\n                            strToken.append(ch);\n                            ////return (m_strCurrentToken = strToken);\n                            break;\n                        }// Termina una cadena\n                    }// Vienen cosas detrs\n                    else {// Termina una cadena\n                        strToken.append(ch);\n                        ////return (m_strCurrentToken = strToken);\n                        break;\n                    }// Termina una cadena\n                }// Puede que la cadena termine\n            }// Puede ser un inicio de cadena\n            else {// No es una comilla\n                if (!bStringToken) {// Los separadores dentro de las cadenas son cagables\n                    if (this.IsSeparator(ch)) {// Si no hay nada, este es el token\n                        if (strToken.length() > 0) {// Patrs y devolverlo\n                            this.m_nParserIndex--;\n                            return (this.m_strCurrentToken = strToken).toString();\n                        }// Patrs y devolverlo\n                        this.m_strCurrentToken = new StringBuilder().append(ch);\n                        return this.m_strCurrentToken.toString();\n                    }// Si no hay nada, este es el token\n                }// Los separadores dentro de las cadenas son cagables\n            }// No es una comilla\n            //\n            // Si no es un separador, suma y sigue\n            strToken.append(ch);\n        }// Esto indicara fin de cadena\n        //\n        // Si tenamos un inicio de token de texto, tiene que estar correctamente terminado\n        if (bStringToken) {// Cadena\n            if (strToken.length() < 2) {// Error\n                // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n                ////throw new Exception(\"Error de sintaxis. Cadena sin terminar.\");\n                throw new IllegalArgumentException(this.GetMessage(XoneMessageKeys.SYS_MSG_SQL_INCOMPLETETOKEN, \"Syntax Error. String token incomplete.\"));\n            }// Error\n            if (strToken.charAt(strToken.length() - 1) != '\\'') {// Error\n                // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n                ////throw new Exception(\"Error de sintaxis. Cadena sin terminar.\");\n                throw new IllegalArgumentException(this.GetMessage(XoneMessageKeys.SYS_MSG_SQL_INCOMPLETETOKEN, \"Syntax Error. String token incomplete.\"));\n            }// Error\n        }// Cadena\n        //\n        // Si es fin de cadena, devolvemos lo que haya\n        return (this.m_strCurrentToken = strToken).toString();\n    }\n\n    /**\n     * @return Devuelve un token que puede ser valor para un SET en un UPDATE.\n     */\n    private GetNextValueToken(): string {\n        let strToken: string;\n        let strValue: string;\n        let nParOpen = 0;\n        //\n        // El primer token puede comenzar precedido de espacios que aqu nos cargamos\n        strValue = this.GetNextSpacedToken();\n        // F08080402:   El parser de SQL no reconoce los literales que comienzan con parntesis\n        // Puede que directamente el primero sea un parntesis\n        if (strValue.equals(\"(\")) {\n            nParOpen++;\n        }\n        //\n        // Ahora coger todo lo que viene detrs hasta que encontremos un cierre\n        while (this.m_nParserIndex < this.m_strSentence.length) {// Mientras haya cosas en la sentencia\n            strToken = this.GetNextToken();\n            // F08080402:   El parser de SQL no reconoce los literales que comienzan con parntesis\n            if (strToken.compareTo(\"(\") == 0) {\n                nParOpen++; // Contar y saltar\n            } else\n            // F08080402:   El parser de SQL no reconoce los literales que comienzan con parntesis\n            // Este else no exista antes\n            {// Si no es parntesis, seguimos\n                if (strToken.compareTo(\")\") == 0) {// Contar y saltar\n                    if (this.m_nParserIndex == this.m_strSentence.length && this.m_status == ParserStatus.PARSER_INSERT_EXPECTING_VALUE) {// Un caso particular\n                        this.m_nParserIndex--;\n                        return strValue;\n                    }// Un caso particular\n                    if (--nParOpen < 0) {// Error\n                        // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n                        ////throw new Exception(\"Error de sintaxis\");\n                        throw new IllegalArgumentException(this.GetMessage(XoneMessageKeys.SYS_MSG_SQL_SYNTAXERROR, \"Syntax error in SQL Sentence.\"));\n                    }// Error\n                }// Contar y saltar\n                if (strToken.compareTo(\" \") == 0 && nParOpen == 0) {// Espacio... fin de la coisa\n                    // F08080401:   EL parser SQL.NET no entiende frmulas con espacios\n                    // Ver si lo que viene detrs podra ser parte de una frmula o algo por el estilo\n                    let strTmpToken = this.PeekNextSpacedToken();\n                    if (strTmpToken.equals(\",\") || this.IsReservedWord(strTmpToken)) {// Pozi... podra ser el final\n                        this.m_nParserIndex--;\n                        break;\n                    }// Pozi... podra ser el final\n                    // De lo contrario seguir, sumar el valor y considerarlo una frmula\n                }// Espacio... fin de la coisa\n                if (strToken.compareTo(\",\") == 0) {// Terminado\n                    // F09072202: Problemas con las frmulas con comas\n                    if (nParOpen == 0) {// Completada\n                        this.m_nParserIndex--;\n                        break;\n                    }// Completada\n                }// Terminado\n            }// Si no es parntesis, seguimos\n            strValue += strToken;\n        }// Mientras haya cosas en la sentencia\n        return strValue;\n    }\n\n    /**\n     * @param Token Token que se quiere analizar para comprobar si es una palabra\n     *              reservada.\n     * @return Devuelve TRUE si el token que se pasa como parmetro es una\n     * palabra reservada de SQL.\n     */\n    private IsReservedWord(Token: string): boolean {\n        for (let s in this.m_strReservedWords) {// Cada palabra reservada\n            if (0 == (s.compareToIgnoreCase(Token))) {\n                return true;\n            }\n        }// Cada palabra reservada\n        // De lo contrario otra cosa ser\n        return false;\n    }\n\n    /**\n     * @return Devuelve el siguiente token espaciado sin incrementar el contador\n     * de caracteres del parser.\n     */\n    private PeekNextSpacedToken(): string {\n        let strToken: string = null;\n        let nTmpParserIndex = this.m_nParserIndex;\n        while (nTmpParserIndex < this.m_strSentence.length) {// Mientras haya algo que rapiar\n            strToken = this.PeekNextToken(nTmpParserIndex);\n            nTmpParserIndex += strToken.length;\n            if (strToken.equals(\" \") || strToken.equals(\"\\t\") || strToken.equals(\"\\n\") || strToken.equals(\"\\r\")) {\n                continue; // Cagarse en los separadores...\n            }\n            break;\n        }// Mientras haya algo que rapiar\n        return strToken;\n    }\n\n    /**\n     * @param Index Indice a partir del que se quiere empezar a buscar el\n     *              siguiente token.\n     * @return Devuelve el siguiente token de la sentencia sin incrementar el\n     * contador de caracteres del parser.\n     */\n    private PeekNextToken(Index: number): string {\n        let ch: string;\n        let strToken = \"\";\n        let bStringToken = false;\n        //\n        // El token actual se obtiene desde el puntero marcado hasta el siguiente separador\n        let cStringToken = ' ';\n        while (Index < this.m_strSentence.length) {// Esto indicara fin de cadena\n            ch = this.m_strSentence.charAt(Index++);\n            if (ch == '\\'' || ch == '\\\"') {// Puede ser un inicio de cadena\n                if (!bStringToken) {// Empieza una cadena\n                    bStringToken = true; // Empieza una cadena\n                    cStringToken = ch;\n                }// Empieza una cadena\n                else {// Puede que la cadena termine\n                    if (Index > this.m_strSentence.length) {// Error\n                        // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n                        ////throw new Exception(\"Error de sintaxis en la sentencia SQL\");\n                        throw new IllegalArgumentException(this.GetMessage(XoneMessageKeys.SYS_MSG_SQL_SYNTAXERROR, \"Syntax error in SQL Sentence.\"));\n                    }// Error\n                    // Obtener el siguiente para ver si es un doble apstrofe\n                    if (Index < this.m_strSentence.length) {// Vienen cosas detrs\n                        if (this.m_strSentence.charAt(Index) == cStringToken) {// Sumar este y el siguiente\n                            strToken += ch;\n                            Index++;\n                        }// Sumar este y el siguiente\n                        else {// Termina una cadena\n                            strToken += ch;\n                            break;\n                        }// Termina una cadena\n                    }// Vienen cosas detrs\n                    else {// Termina una cadena\n                        strToken += ch;\n                        break;\n                    }// Termina una cadena\n                }// Puede que la cadena termine\n            }// Puede ser un inicio de cadena\n            else {// No es una comilla\n                if (!bStringToken) {// Los separadores dentro de las cadenas son cagables\n                    if (this.IsSeparator(ch)) {// Si no hay nada, este es el token\n                        if (strToken.length > 0) {// Patrs y devolverlo\n                            Index--;\n                            return strToken;\n                        }// Patrs y devolverlo\n                        return \"\" + ch;\n                    }// Si no hay nada, este es el token\n                }// Los separadores dentro de las cadenas son cagables\n            }// No es una comilla\n            // Si no es un separador, suma y sigue\n            strToken += ch;\n        }// Esto indicara fin de cadena\n        //\n        // Si tenamos un inicio de token de texto, tiene que estar correctamente terminado\n        if (bStringToken) {// Cadena\n            if (strToken.length < 2) {// Error\n                // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n                ////throw new Exception(\"Error de sintaxis. Cadena sin terminar.\");\n                throw new IllegalArgumentException(this.GetMessage(XoneMessageKeys.SYS_MSG_SQL_INCOMPLETETOKEN, \"Syntax Error. String token incomplete.\"));\n            }// Error\n            if (strToken.charAt(strToken.length - 1) != cStringToken) {// Error\n                // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n                ////throw new Exception(\"Error de sintaxis. Cadena sin terminar.\");\n                throw new IllegalArgumentException(this.GetMessage(XoneMessageKeys.SYS_MSG_SQL_INCOMPLETETOKEN, \"Syntax Error. String token incomplete.\"));\n            }// Error\n        }// Cadena\n        //\n        // Si es fin de cadena, devolvemos lo que haya\n        return strToken;\n    }\n\n    /// TRUE si el parmetro es una frmula\n    private static IsFormula(Value: string): boolean {\n        //\n        // Si es una cadena vaca, est claro que no es una frmula\n        if (SqlParser.EMPTY.equals(Value)) {\n            return false;\n        }\n        //\n        // Si tiene menos de 2 caracteres, tampoco es una frmula\n        if (Value.length < 2) {\n            return false;\n        }\n        //\n        // Si est entre comillas tampoco puede ser una frmula...\n        if (Value.charAt(0) == '\\'' && Value.charAt(Value.length - 2) == '\\'') {\n            return false;\n        }\n        //\n        // Ahora hay que buscar si tiene algn operador... entonces sera una frmula\n        //String strTmp =\"+,-,*,/,|,&\";\n        let strOpers = [\"+\", \"-\", \"*\", \"/\", \"|\", \"&\"];\n\n        for (let s in strOpers) {// Buscar cada uno\n            if (Value.contains(s)) {\n                return true;\n            }\n        }// Buscar cada uno\n        //\n        // Si ha llegado aqu, entonces no ser una frmula\n        return false;\n    }\n\n    /**\n     * TRUE si el caracter que se ha pasado como parmetro es un separador\n     *\n     * @param ch Caracter que se quiere analizar.\n     * @return Devuelve TRUE si se trata de un separador.\n     */\n    private IsSeparator(ch: string): boolean {\n        switch (ch) {\n            case ' ':\n            case ',':\n            case '\\t':\n            case '\\r':\n            case '\\n':\n            case '(':\n            case ')':\n            case '+':\n            case '-':\n            case '*':\n            case '/':\n            case '=':\n            case '|':\n            case '&':\n                return true;\n            default:\n                return false;\n        }\n    }\n\n    /// Normaliza el SQL que tiene dentro\n    public Normalize(bNormalize: boolean): boolean {\n        //\n        // Si ya est normalizado no tenemos nada que hacer...\n        if (this.m_strRowIdFieldName.compareTo(\"ROWID\") == 0) {\n            return true;\n        }\n        let strSrcFld = bNormalize ? \"ROWID\" : this.m_strRowIdFieldName;\n        let strDstFld = bNormalize ? this.m_strRowIdFieldName : \"ROWID\";\n\n        switch (this.m_sqlType) {\n            case SqlType.SQLTYPE_UPDATE:\n            case SqlType.SQLTYPE_DELETE:\n                let strVal = this.m_strWhere;\n                if (!SqlParser.EMPTY.equals(strVal)) {// Tiene valor\n                    // F07121401:   La normalizacin de sentencias SQL se traga el WHERE\n                    // Incluir el WHERE en la sentencia... vaya palet pordi...\n                    strVal = String.format(\" WHERE %s='%s'\", strSrcFld, this.GetRowId());\n                    this.SetWhereSentence(strVal);\n                }// Tiene valor\n                break;\n            case SqlType.SQLTYPE_INSERT:\n                if (this.m_lstFields.containsKey(strDstFld)) {// Cambiarlo\n                    strVal = this.m_lstFields.get(strDstFld);\n                    this.m_lstFields.delete(strDstFld);\n                    this.m_lstFields.put(strSrcFld, strVal);\n                }// Cambiarlo\n                break;\n        }\n        //\n        // Cambiar el nombre del ROWID\n        this.m_strRowIdFieldName = strSrcFld;\n        return true;\n    }\n\n    /**\n     * Parsea una cadena INSERT\n     *\n     * @return Devuelve TRUE si la sentencia se parsea correctamente.\n     */\n    private ParseInsertStatement(): boolean {\n        let strToken: string;\n        let lstFields: Array<string> = null, lstValues: Array<string> = null;\n\n        if (this.m_status != ParserStatus.PARSER_KEYWORD) {\n            return false;\n        }\n\n        try {\n            this.m_status = ParserStatus.PARSER_INSERT_EXPECTING_INTO;\n            while (this.m_nParserIndex < this.m_strSentence.length) {// Mientras queden cosas\n                switch (this.m_status) {\n                    case ParserStatus.PARSER_INSERT_EXPECTING_INTO:\n                        strToken = this.GetNextSpacedToken();\n                        if (0 != (strToken.compareToIgnoreCase(\"into\"))) {\n                            return false; // Error de sintaxis\n                        }\n                        this.m_status = ParserStatus.PARSER_INSERT_EXPECTING_TABLE;\n                        break;\n                    case ParserStatus.PARSER_INSERT_EXPECTING_TABLE:\n                        this.m_strTable = this.GetNextSpacedToken();\n                        this.m_status = ParserStatus.PARSER_INSERT_EXPECTING_FIELDS_BEGIN;\n                        break;\n                    case ParserStatus.PARSER_INSERT_EXPECTING_FIELDS_BEGIN:\n                        strToken = this.GetNextSpacedToken();\n                        if (strToken.compareTo(\"(\") != 0) {\n                            return false; // Error de sintaxis\n                        }\n                        this.m_status = ParserStatus.PARSER_INSERT_EXPECTING_FIELD_NAME;\n                        lstFields = new Array<string>();\n                        lstValues = new Array<string>();\n                        break;\n                    case ParserStatus.PARSER_INSERT_EXPECTING_FIELD_NAME:\n                        strToken = this.GetNextSpacedToken();\n                        if (strToken.compareTo(\",\") == 0) {\n                            return false; // Error\n                        }\n                        // Adicionar el nombre del campo\n                        // F12050308: Acondicionar los tokens en el parsing de sentencias SQL.\n                        // Un poco de trim por favor\n                        lstFields.push(strToken.trim());\n                        this.m_status = ParserStatus.PARSER_INSERT_EXPECTING_FIELD_SEPARATOR;\n                        break;\n                    case ParserStatus.PARSER_INSERT_EXPECTING_FIELD_SEPARATOR:\n                        strToken = this.GetNextSpacedToken();\n                        if (strToken.compareTo(\",\") == 0) {// Esperar el siguiente campo\n                            this.m_status = ParserStatus.PARSER_INSERT_EXPECTING_FIELD_NAME;\n                            break;\n                        }// Esperar el siguiente campo\n                        if (strToken.compareTo(\")\") == 0) {// Ahora vienen los valores\n                            this.m_status = ParserStatus.PARSER_INSERT_EXPECTING_VALUES;\n                            break;\n                        }// Ahora vienen los valores\n                        //\n                        // Cualquier otra cosa es un error\n                        return false;\n                    case ParserStatus.PARSER_INSERT_EXPECTING_VALUES:\n                        strToken = this.GetNextSpacedToken();\n                        if (0 != (strToken.compareToIgnoreCase(\"values\"))) {\n                            return false; // Error\n                        }\n                        this.m_status = ParserStatus.PARSER_INSERT_EXPECTING_VALUES_BEGIN;\n                        break;\n                    case ParserStatus.PARSER_INSERT_EXPECTING_VALUES_BEGIN:\n                        strToken = this.GetNextSpacedToken();\n                        if (strToken.compareTo(\"(\") != 0) {\n                            return false;\n                        }\n                        this.m_status = ParserStatus.PARSER_INSERT_EXPECTING_VALUE;\n                        break;\n                    case ParserStatus.PARSER_INSERT_EXPECTING_VALUE:\n                        strToken = this.GetNextValueToken();\n                        if (strToken.compareTo(\",\") == 0) {\n                            return false;\n                        }\n                        // F12050308: Acondicionar los tokens en el parsing de sentencias SQL.\n                        lstValues.push(strToken.trim());\n                        this.m_status = ParserStatus.PARSER_INSERT_EXPECTING_VALUE_SEPARATOR;\n                        break;\n                    case ParserStatus.PARSER_INSERT_EXPECTING_VALUE_SEPARATOR:\n                        strToken = this.GetNextSpacedToken();\n                        if (strToken.compareTo(\",\") == 0) {// Esperar el siguiente valor\n                            this.m_status = ParserStatus.PARSER_INSERT_EXPECTING_VALUE;\n                            break;\n                        }// Esperar el siguiente valor\n                        if (strToken.compareTo(\")\") == 0) {// Completo\n                            this.m_status = ParserStatus.PARSER_COMPLETE;\n                            break;\n                        }// Completo\n                        return false;\n                    case ParserStatus.PARSER_COMPLETE:\n                        break;\n                    default:\n                        return false;\n                }\n            }// Mientras queden cosas\n            //\n            // Cuadrar campos con valores... tienen que ser la misma cantidad\n            if (lstFields.length != lstValues.length) {\n                return false; // Error de sintaxis\n            }\n\n            let strField: string, strValue: string;\n            for (let i = 0; i < lstFields.length; i++) {// Revisar cada campo\n                strField = lstFields[i];\n                strValue = lstValues[i];\n                //\n                // De paso, si encontramos el ROWID, ya lo ponemos donde va...\n                if (!TextUtils.isEmpty(this.m_strRowIdFieldName) && strField.compareTo(this.m_strRowIdFieldName) == 0) {// Obtener el ROWID\n                    if (strValue.charAt(0) == '\\'' && strValue.charAt(strValue.length - 1) == '\\'') {\n                        this.m_strRowId = strValue.substring(1, strValue.length - 1); /*\n                         * substring\n                         * OK\n                         */\n                    } else {// Comprobar si es la palabra reservada NULL\n                        // F12080902: Problemas con el parser de SQL cuando el ROWID=NULL.\n                        if (strValue.compareToIgnoreCase(SqlParser.NULL_VALUE) == 0) {// ROWID nulo\n                            this.m_strRowId = strValue = null;\n                        }// ROWID nulo\n                        else {\n                            this.m_strRowId = strValue;\n                        }\n                    }// Comprobar si es la palabra reservada NULL\n                }// Obtener el ROWID\n                // Guardar la parejita...\n                // F12080902: Problemas con el parser de SQL cuando el ROWID=NULL.\n                if (!StringUtils.IsEmptyString(strValue)) {\n                    this.m_lstFields.put(strField, strValue);\n                }\n            }// Revisar cada campo\n            this.m_sqlType = SqlType.SQLTYPE_INSERT;\n            return true;\n        } catch (e) {\n            e.printStackTrace();\n            return false;\n        }\n    }\n\n    /**\n     * Parsea una cadena DELETE\n     *\n     * @return Devuelve TRUE si la sentencia se parsea correctamente.\n     */\n    private ParserDeleteStatement(): boolean {\n        let strToken: string;\n        let bRowIdField = false;\n        let bNextValueIsRowId = false;\n\n        if (this.m_status != ParserStatus.PARSER_KEYWORD) {\n            return false;\n        }\n\n        try {\n            //\n            // Ahora hay que ir cogiendo tokens\n            this.m_status = ParserStatus.PARSER_DELETE_EXPECTING_FROM;\n            while (this.m_nParserIndex < this.m_strSentence.length) {// Mientras sepa que quedan cosas\n                switch (this.m_status) {\n                    case ParserStatus.PARSER_DELETE_EXPECTING_FROM:\n                        strToken = this.GetNextSpacedToken();\n                        //\n                        // Si es una palabra, tiene que ser FROM\n                        if (0 != (strToken.compareToIgnoreCase(\"from\"))) {\n                            return false; // Error de sintaxis\n                        }\n                        //\n                        // cambiar de estado\n                        this.m_status = ParserStatus.PARSER_DELETE_EXPECTING_TABLE;\n                        break;\n                    case ParserStatus.PARSER_DELETE_EXPECTING_TABLE:\n                        strToken = this.GetNextSpacedToken();\n                        this.m_strTable = strToken;\n                        this.m_status = ParserStatus.PARSER_DELETE_EXPECTING_WHERE;\n                        break;\n                    case ParserStatus.PARSER_DELETE_EXPECTING_WHERE:\n                        strToken = this.GetNextSpacedToken();\n                        if (0 != (strToken.compareToIgnoreCase(\"where\"))) {\n                            return false; // Error de sintaxis\n                        }\n                        //\n                        // Cambiar de estado\n                        this.m_strWhere = \"\";\n                        this.m_status = ParserStatus.PARSER_DELETE_WHERE;\n                        break;\n                    case ParserStatus.PARSER_DELETE_WHERE:\n                        //\n                        // Todo lo que viene aqu es WHERE\n                        strToken = this.GetNextToken();\n                        // Comprobar si sacamos el ROWID de aqu\n                        if (strToken.compareTo(this.m_strRowIdFieldName) == 0) {\n                            bRowIdField = true;\n                        }\n                        if (bRowIdField) {// El campo anterior era el ROWID\n                            if (strToken.compareTo(\"=\") == 0) {\n                                bNextValueIsRowId = true;\n                            }\n                        }// El campo anterior era el ROWID\n                        if (bNextValueIsRowId) {// Si esto es un valor, es el ROWID\n                            if (strToken.length > 2) {// Valor\n                                if (strToken.charAt(0) == '\\'' && strToken.charAt(strToken.length - 1) == '\\'') {\n                                    this.m_strRowId = strToken.substring(1, strToken.length - 1); /*\n                                     * substring\n                                     * OK\n                                     */\n                                }\n                            }// Valor\n                        }// Si esto es un valor, es el ROWID\n                        this.m_strWhere += strToken;\n                        break;\n                    default:\n                        return false; // Error malio malio\n                }\n            }// Mientras sepa que quedan cosas\n            //\n            // Al final arreglamos el WHERE\n            if (!SqlParser.EMPTY.equals(this.m_strWhere)) {\n                this.m_strWhere = \" WHERE \" + this.m_strWhere;\n            }\n            //\n            this.m_sqlType = SqlType.SQLTYPE_DELETE;\n            return true;\n        } catch (e) {\n            e.printStackTrace();\n            return false;\n        }\n    }\n\n    /**\n     * Parsea una cadena UPDATE\n     *\n     * @return Devuelve TRUE si la sentencia se parsea correctamente.\n     */\n    private ParseUpdateStatement(): boolean {\n        let strToken: string;\n        let strField: string = null, strValue: string;\n        let bNextValueIsRowId = false;\n        let bRowIdField = false;\n\n        try {\n            if (this.m_status != ParserStatus.PARSER_KEYWORD) {\n                return false;\n            }\n            this.m_status = ParserStatus.PARSER_UPDATE_EXPECTING_TABLE;\n            while (this.m_nParserIndex < this.m_strSentence.length) {// Mientras la cadena tenga cosas\n                switch (this.m_status) {\n                    case ParserStatus.PARSER_UPDATE_EXPECTING_TABLE:\n                        this.m_strTable = this.GetNextSpacedToken();\n                        this.m_status = ParserStatus.PARSER_UPDATE_EXPECTING_SET;\n                        break;\n                    case ParserStatus.PARSER_UPDATE_EXPECTING_SET:\n                        strToken = this.GetNextSpacedToken();\n                        if (0 != strToken.compareToIgnoreCase(\"set\")) {\n                            return false;\n                        }\n                        this.m_status = ParserStatus.PARSER_UPDATE_EXPECTING_FIELD_NAME;\n                        break;\n                    case ParserStatus.PARSER_UPDATE_EXPECTING_FIELD_NAME:\n                        strField = this.GetNextSpacedToken();\n                        this.m_status = ParserStatus.PARSER_UPDATE_EXPECTING_EQUAL_SIGN;\n                        break;\n                    case ParserStatus.PARSER_UPDATE_EXPECTING_EQUAL_SIGN:\n                        strToken = this.GetNextSpacedToken();\n                        if (strToken.compareTo(\"=\") != 0) {\n                            return false;\n                        }\n                        this.m_status = ParserStatus.PARSER_UPDATE_EXPECTING_FIELD_VALUE;\n                        break;\n                    case ParserStatus.PARSER_UPDATE_EXPECTING_FIELD_VALUE:\n                        strValue = this.GetNextValueToken();\n                        //\n                        // Guardar en la lista\n                        this.m_lstFields.put(strField, strValue);\n                        this.m_status = ParserStatus.PARSER_UPDATE_EXPECTING_SEPARATOR;\n                        break;\n                    case ParserStatus.PARSER_UPDATE_EXPECTING_SEPARATOR:\n                        strToken = this.GetNextSpacedToken();\n                        if (0 == strToken.compareToIgnoreCase(\"where\")) {// Final\n                            this.m_status = ParserStatus.PARSER_UPDATE_WHERE;\n                            break;\n                        }// Final\n                        if (strToken.compareTo(\",\") != 0) {\n                            return false; // Error de sintaxis\n                        }\n                        //\n                        // Si es una coma, entonces nos vamos al siguiente\n                        strField = null;\n                        this.m_status = ParserStatus.PARSER_UPDATE_EXPECTING_FIELD_NAME;\n                        break;\n                    case ParserStatus.PARSER_UPDATE_EXPECTING_WHERE:\n                        strToken = this.GetNextSpacedToken();\n                        if (0 != strToken.compareToIgnoreCase(\"where\")) {\n                            return false; // Error de sintaxis\n                        }\n                        this.m_status = ParserStatus.PARSER_UPDATE_WHERE;\n                        break;\n                    case ParserStatus.PARSER_UPDATE_WHERE:\n                        //\n                        // Todo lo que viene es WHERE\n                        strToken = this.GetNextToken();\n                        if (strToken.compareTo(this.m_strRowIdFieldName) == 0) {\n                            bRowIdField = true;\n                        }\n                        if (bRowIdField) {// El campo anterior era el ROWID\n                            if (strToken.compareTo(\"=\") == 0) {\n                                bNextValueIsRowId = true;\n                            }\n                        }// El campo anterior era el ROWID\n                        if (bNextValueIsRowId) {// Si esto es un valor, es el ROWID\n                            if (strToken.length > 2) {// Valor\n                                if (strToken.charAt(0) == '\\'' && strToken.charAt(strToken.length - 1) == '\\'') {\n                                    this.m_strRowId = strToken.substring(1, strToken.length - 1); /*\n                                     * substring\n                                     * OK\n                                     */\n                                }\n                            }// Valor\n                        }// Si esto es un valor, es el ROWID\n                        //\n                        // Por dems todo se suma al WHERE\n                        this.m_strWhere += strToken;\n                        break;\n                    default:\n                        return false; // Error de sintaxis\n                }\n            }// Mientras la cadena tenga cosas\n            //\n            // Al final arreglamos el WHERE\n            if (!SqlParser.EMPTY.equals(this.m_strWhere)) {\n                this.m_strWhere = \" WHERE \" + this.m_strWhere;\n            }\n            this.m_sqlType = SqlType.SQLTYPE_UPDATE;\n            /*\n             * TODO 21/11/2018 Juan Carlos\n             * El parser estaba dando por vlidas SQL que no deberan. Debe retornar false en casos\n             * como este: UPDATE GEN_USUARIOS SET TESTN=\n             *\n             * De lo contrario se llega a explotar mucho ms tarde en el cdigo y nos podemos tirar\n             * un buen rato averiguando qu ha pasado.\n             */\n            if (this.m_status == ParserStatus.PARSER_UPDATE_EXPECTING_FIELD_VALUE) {\n                return false;\n            }\n            return true;\n        } catch (e) {\n            e.printStackTrace();\n            return false;\n        }\n    }\n\n    /**\n     * Parsea una sentencia SQL y devuelve el tipo obtenido.\n     *\n     * @param Sentence Sentencia SQL que se quiere parsear.\n     * @return Devuelve el tipo de sentencia SQL segn el proceso de\n     * interpretacin.\n     */\n    public ParseSqlString(Sentence: string): number {\n        let strKeyword: string;\n        let nOpenPars = 0;\n        let bIsPar: boolean, bParseOk: boolean;\n        //\n        // Inicializar el parser para comenzar el proceso\n        this.m_strSentence = Sentence.trim();\n        this.BeginParse();\n        //\n        do {\n            bIsPar = false;\n            strKeyword = this.GetNextToken();\n            if (strKeyword.compareTo(\"(\") == 0) {// Parntesis\n                nOpenPars++;\n                bIsPar = true;\n            }// Parntesis\n        } while (bIsPar);\n        //\n        // Aqu se habr obtenido una palabra clave de verdad...\n        this.m_status = ParserStatus.PARSER_KEYWORD;\n        let s = strKeyword.toLowerCase();\n        if (s.compareTo(\"insert\") == 0) {\n            bParseOk = this.ParseInsertStatement();\n        } else if (s.compareTo(\"update\") == 0) {\n            bParseOk = this.ParseUpdateStatement();\n        } else if (s.compareTo(\"delete\") == 0) {\n            bParseOk = this.ParserDeleteStatement();\n        } else if (s.equals(\"select\")) {\n            bParseOk = this.ParseSelectStatement();\n        } else {\n            return (this.m_sqlType = SqlType.SQLTYPE_ERROR);\n        }\n        //\n        // Si hubo algn error, poner el tipo correcto para indicar dicho error...\n        if (!bParseOk) {\n            return (this.m_sqlType = SqlType.SQLTYPE_ERROR);\n        }\n        //\n        // Si haba parntesis de apertura hay que balancearlos\n        if (nOpenPars > 0) {// Buscar parntesis cerrados\n            do {\n                bIsPar = false;\n                strKeyword = this.GetNextToken();\n                if (strKeyword.compareTo(\")\") == 0) {// OK\n                    nOpenPars--;\n                    bIsPar = true;\n                }// OK\n            } while (bIsPar);\n            //\n            // Si el token era otra cosa, esto es un error\n            if (nOpenPars > 0) {\n                return (this.m_sqlType = SqlType.SQLTYPE_ERROR);\n            }\n        }// Buscar parntesis cerrados\n        //\n        // Devolver lo que sea\n        return this.m_sqlType;\n    }\n\n    /**\n     * Regenera una sentencia DELETE... aqu hace falta la tabla y el WHERE nada\n     * ms...\n     *\n     * @return Devuelve la sentencia ya regenerada.\n     */\n\n    private RegenerateDelete(): string {\n        let strSql = new StringBuilder();\n\n        if (TextUtils.isEmpty(this.m_strTable)) {\n            return null;\n        }\n        strSql.append(\"DELETE FROM \");\n        strSql.append(this.m_strTable);\n        strSql.append(\" \");\n        strSql.append(this.m_strWhere);\n        return strSql.toString();\n    }\n\n    /**\n     * Regenera una sentencia INSERT a partir de la lista de campos que hay en\n     * este objeto\n     *\n     * @return Devuelve la sentencia ya regenerada.\n     */\n\n    private RegenerateInsert(): string {\n        let strFields = new StringBuilder();\n        let strValues = new StringBuilder();\n        let strField: string, strValue: string, strSql: string;\n        //\n        // Si no hay campos, nada que hacer...\n        if (this.m_lstFields.length == 0) {\n            return null;\n        }\n        this.m_lstFields.entrySet().forEach(entry => {\n            if (!SqlParser.EMPTY.equals(strField)) {// Tiene valor\n                if (strFields.length() > 0) {// Las comas\n                    strFields.append(\",\");\n                    strValues.append(\",\");\n                }// Las comas\n                strFields.append(entry[0]);\n                strValues.append(entry[1]);\n            }// Tiene valor\n        });\n        // Enumeration<String> enm = this.m_lstFields.keys();\n        // while (enm.hasMoreElements()) {// Recorrer la lista\n\n        //     strField = enm.nextElement();\n        //     strValue = this.m_lstFields.get(strField);\n        //     if (!SqlParser.EMPTY.equals(strField)) {// Tiene valor\n        //         if (strFields.length > 0) {// Las comas\n        //             strFields.append(\",\");\n        //             strValues.append(\",\");\n        //         }// Las comas\n        //         strFields.append(strField);\n        //         strValues.append(strValue);\n        //     }// Tiene valor\n        // }// Recorrer la lista\n        if (strFields.length() == 0) {\n            return null;\n        }\n        strSql = String.format(\"INSERT INTO %s (%s) VALUES (%s)\", this.m_strTable, strFields.toString(), strValues.toString());\n        return strSql;\n    }\n\n    /**\n     * Parsea una sentencia SELECT separando los campos, las tablas con uniones\n     * y dems cosillas\n     *\n     * @return Devuelve TRUE si la sentencia se parsea correctamente.\n     */\n    private ParseSelectStatement(): boolean {\n        let nStep: number, nOpenPar: number;\n        let bField = false, bAlias = false, bTable = false;\n        let strToken = \"\", strField = \"\", strAlias = \"\", strTable = \"\", strJoin = \"\";\n        let nTableStep = 0, nJoinOpenPar = 0, nInitPar;\n        // F12042501: Tener en cuenta que las tablas en los selects pueden ser expresiones.\n        let nTableOpenPar = 0;\n        let strPrevToken = \"\";\n        let bAddTable: boolean;\n\n        this.m_nParserIndex = 0;\n        // F11090206: Problemas con los joins sin parntesis que tienen expresiones con parntesis.\n        let bOpenJoinFormula = false;\n        // K11090501: El parser de SQL no almacena el tipo de JOIN. Debera.\n        // Ponemos el join por defecto, que es el que ms se usa.\n        let jt = eJoinType.eLeftJoin;\n        let nLen = this.m_strSentence.length;\n        if (nLen > 0)\n            return true;\n        for (nStep = nInitPar = nOpenPar = 0; this.m_nParserIndex < nLen;) {// Ir obteniendo los tokens\n            /*\n             * if (!GetNextSQLToken(pQuery, nIndex, &nTokIdxFrom, &nTokIdxTo))\n             * return -1;\n             */\n            //\n            // Obtener el token para procesarlo\n            strToken = this.GetNextSqlToken();\n            //\n            // Ahora ver en qu posicin estamos\n            switch (nStep) {// Mquina de estados\n                case 0:\n                    //\n                    // No se ha iniciado la tabla todava\n                    if (this.IsSeparator(strToken)) {\n                        break;\n                    }\n                    if (strToken.equals(\"(\")) {// Parntesis de apertura\n                        nInitPar++;\n                        break;\n                    }// Parntesis de apertura\n                    strToken = strToken.toLowerCase();\n                    if (strToken.equals(\"union\")) {// IR a esperar por un ALL\n                        nStep = 5;\n                        break;\n                    }// IR a esperar por un ALL\n                    //\n                    // Si es un ORDER BY, solo es vlido si es un UNION QUERY\n                    if (strToken.equals(\"order\")) {// Solo para uniones\n                        if (this.getIsUnionQuery()) {\n                            this.AddUnionQuery();\n                        }\n                        //\n                        // Obtener los datos de ordenamiento\n                        nStep = 4;\n                        strPrevToken = null;\n                        nOpenPar = 0;\n                        break;\n                    }// Solo para uniones\n                    if (!strToken.equals(\"select\")) {\n                        return false;\n                    }\n                    nStep = 1;\n                    nOpenPar = 0;\n                    bField = bAlias = false;\n                    strField = strAlias = strPrevToken = \"\";\n                    break;\n                case 1:\n                    //\n                    // Lista de campos\n                    if (!strToken.equals(\",\") || (strToken.equals(\",\") && nOpenPar > 0)) {// No es una coma\n                        if ((!strToken.equalsIgnoreCase(\"as\") && !strToken.equalsIgnoreCase(\"from\") && !strToken.equalsIgnoreCase(\"distinct\")) || nOpenPar > 0) {\n                            strPrevToken += strToken;\n                        }\n                        if (this.IsSeparator(strToken)) {\n                            break;\n                        }\n                    }// No es una coma\n                    if (strToken.equals(\"(\"))\n                    // Parntesis\n                    {\n                        nOpenPar++;\n                    }\n                    if (strToken.equals(\")\")) {// Cierre de parntesis\n                        if (--nOpenPar < 0) {\n                            return false;\n                        }\n                    }// Cierre de parntesis\n                    //\n                    // Si no es un separador, ver si es una coma\n                    if (nOpenPar == 0) {// Las comas y palabras reservadas, fuera de parntesis\n                        if (strToken.equals(\",\")) {// Coma... final de campo\n                            if (!bField) {\n                                return false; // Error\n                            }\n                            if (!bAlias) {// Por si hay algo ms en el campo\n                                strField = strPrevToken.trim();\n                            }// Por si hay algo ms en el campo\n                            //\n                            // Adicionar el campo\n                            this.AddField(strField, strAlias);\n                            strField = strAlias = strPrevToken = \"\";\n                            bField = bAlias = false;\n                            break;\n                        }// Coma... final de campo\n                        //\n                        // Distinct tambin vale quin dijo que no\n                        if (strToken.equalsIgnoreCase(\"distinct\")) {// Distinct\n                            this.m_bDistinct = true;\n                            strPrevToken = \"\";\n                            break;\n                        }// Distinct\n                        // No es una coma, ver si es un FROM... entonces se acab la lista\n                        if (strToken.equalsIgnoreCase(\"from\")) {// Ahora vendrn ms cositas\n                            // Ante todo ver si hay residuos\n                            if (bField) {// Queda un campo, agregarlo, digo yo\n                                if (!bAlias) {// Por si hay algo ms en el campo\n                                    strField = strPrevToken.trim();\n                                }// Por si hay algo ms en el campo\n                                this.AddField(strField, strAlias);\n                                bField = false;\n                                strField = strAlias = strPrevToken = \"\";\n                            }// Queda un campo, agregarlo, digo yo\n                            nStep = 2;\n                            nTableStep = 0;\n                            nOpenPar = 0;\n                            bTable = bAlias = false;\n                            break;\n                        }// Ahora vendrn ms cositas\n                        //\n                        // No es un from, ni una coma, ser un AS?\n                        if (strToken.equalsIgnoreCase(\"as\")) {// Si es un AS, debera haber empezado el campo hace rato\n                            if (!bField) {\n                                return false; // Error\n                            }\n                            if (bAlias) {\n                                return false; // Error\n                            }\n                            bAlias = true;\n                            // Armar el campo con lo que se tiene hasta el momento\n                            strField = strPrevToken.trim();\n                            strPrevToken = \"\";\n                            break;\n                        }// Si es un AS, debera haber empezado el campo hace rato\n                    }// Las comas y palabras reservadas, fuera de parntesis\n                    //\n                    // Ni un from ni una coma, ni un AS... pues ser o el campo o el alias\n                    if (!bField) {// Campo\n                        strField = strToken;\n                        bField = true;\n                    }// Campo\n                    else {// Alias\n                        if (bAlias) {\n                            strAlias = strToken;\n                        }\n                    }// Alias\n                    break;\n                case 2:\n                    //\n                    // Aqu habr que actuar en funcin del paso de tabla en que estemos\n                    switch (nTableStep) {\n                        case 0:\n                            //\n                            // Esperando inicio de tablas\n                            // Inicio de tablas\n                            if (this.IsSeparator(strToken)) {\n                                break;\n                            }\n                            if (strToken.equals(\"(\")) {// Abre parntesis\n                                nOpenPar++;\n                                break;\n                            }// Abre parntesis\n                            //\n                            // Ver si es una palabra reservada\n                            if (strToken.equalsIgnoreCase(\"order\") || strToken.equalsIgnoreCase(\"left\") || strToken.equalsIgnoreCase(\"right\") || strToken.equalsIgnoreCase(\"inner\") || strToken.equalsIgnoreCase(\"where\") || strToken.equalsIgnoreCase(\"group\")) {// Acaba una tabla\n                                if (!bTable) {\n                                    return false; // Error\n                                }\n                                //\n                                // Adicionar esta tabla. La primera no tiene condicin\n                                // K11090501: El parser de SQL no almacena el tipo de JOIN. Debera.\n                                this.AddTable(strTable, strAlias, strJoin, jt);\n                                strTable = strAlias = strJoin = \"\";\n                                bTable = bAlias = false;\n                                // K11090501: El parser de SQL no almacena el tipo de JOIN. Debera.\n                                // Comprobar qu tipo de join es...\n                                jt = eJoinType.eLeftJoin; // Para el siguiente...\n                                if (strToken.equalsIgnoreCase(\"right\")) {\n                                    jt = eJoinType.eRightJoin;\n                                } else if (strToken.equalsIgnoreCase(\"inner\")) {\n                                    jt = eJoinType.eInnerJoin;\n                                }\n                                // Si lo que lleg fue un WHERE, saltar directamente a WHERE\n                                if (strToken.equalsIgnoreCase(\"where\")) {// Aqu no hay ms nada\n                                    nOpenPar = 0;\n                                    nStep = 3;\n                                    break;\n                                }// Aqu no hay ms nada\n                                // Si lo que lleg fue un WHERE, saltar directamente a WHERE\n                                if (strToken.equalsIgnoreCase(\"order\")) {// Aqu no hay ms nada\n                                    nOpenPar = 0;\n                                    nStep = 4;\n                                    break;\n                                }// Aqu no hay ms nada\n                                //\n                                // Si lo que lleg fue un GROUP saltar directamente a esperar el BY\n                                if (strToken.equalsIgnoreCase(\"group\")) {// Esperar BY\n                                    nStep = 7;\n                                    break;\n                                }// Esperar BY\n                                //\n                                // Pasamos al siguiente paso que ser esperando el join condition\n                                nTableStep = 1; // Est en LEFT\n                                break;\n                            }// Acaba una tabla\n\n                            //\n                            // No es parntesis, ser un nombre de tabla\n                            if (!bTable) {// Tabla\n                                strTable = strToken;\n                                bTable = true;\n                            }// Tabla\n                            else {// Puede ser alias\n                                if (!bAlias) {// Alias\n                                    strAlias = strToken;\n                                    bAlias = true;\n                                }// Alias\n                            }// Puede ser alias\n                            break;\n                        case 1:\n                            //\n                            // Esperando JOIN\n                            if (this.IsSeparator(strToken)) {\n                                break;\n                            }\n                            if (strToken.equalsIgnoreCase(\"outer\")) {// Ahora tiene que esperar JOIN\n                                nTableStep = 2;\n                                break;\n                            }// Ahora tiene que esperar JOIN\n                            if (strToken.equalsIgnoreCase(\"join\")) {// Lleg el JOIN antes de tiempo\n                                nTableStep = 3;\n                                // F12042501: Tener en cuenta que las tablas en los selects pueden ser expresiones.\n                                // Porque la tabla podra ser una expresin, no solo un nombre.\n                                strPrevToken = \"\";\n                                nTableOpenPar = 0;\n                                break;\n                            }// Lleg el JOIN antes de tiempo\n                            //\n                            // Si no, error\n                            return false; // Error\n                        case 2:\n                            //\n                            // Esperando segunda tabla de la unin\n                            if (this.IsSeparator(strToken)) {\n                                break;\n                            }\n                            if (strToken.equalsIgnoreCase(\"join\")) {// Lleg el JOIN antes de tiempo\n                                nTableStep = 3;\n                                // F12042501: Tener en cuenta que las tablas en los selects pueden ser expresiones.\n                                // Porque la tabla podra ser una expresin, no solo un nombre.\n                                strPrevToken = \"\";\n                                nTableOpenPar = 0;\n                                break;\n                            }// Lleg el JOIN antes de tiempo\n                            //\n                            // Si no, error\n                            return true; // Error\n                        case 3:\n                            // F12042501: Tener en cuenta que las tablas en los selects pueden ser expresiones.\n                            // Podramos estar armando una expresin.\n                            // Esperando la segunda tabla\n                            if (this.IsSeparator(strToken)) {// Si estamos dentro de una expresin\n                                if (nTableOpenPar == 0) {\n                                    break;\n                                } else {// Es simplemente otro mais\n                                    strPrevToken += strToken;\n                                    break;\n                                }// Es simplemente otro mais\n                            }// Si estamos dentro de una expresin\n                            // Si es un parntesis\n                            if (strToken.equals(\"(\")) {// Expresin?\n                                nTableOpenPar++;\n                                strPrevToken += strToken;\n                                break;\n                            }// Expresin?\n                            if (strToken.equals(\")\")) {// Descontar\n                                if (--nTableOpenPar < 0) {// Error\n                                    return false;\n                                }// Error\n                                // Adicionamos y seguimos\n                                strPrevToken += strToken;\n                                if (nTableOpenPar == 0) {// Se acab la tabla aqu\n                                    strTable = strPrevToken;\n                                    bTable = true;\n                                    strPrevToken = \"\";\n                                }// Se acab la tabla aqu\n                                break;\n                            }// Descontar\n                            if (nTableOpenPar > 0) {// Simplemente uno mais\n                                strPrevToken += strToken;\n                                break;\n                            }// Simplemente uno mais\n                            if (strToken.equalsIgnoreCase(\"on\")) {// Final de tabla?\n                                nTableStep = 4;\n                                nJoinOpenPar = 0;\n                                strJoin = \"\";\n                                break;\n                            }// Final de tabla?\n                            // Tabla y alias\n                            if (!bTable) {// Tabla\n                                strTable = strToken;\n                                bTable = true;\n                            }// Tabla\n                            else {// No es tabla\n                                if (!bAlias) {// Alias\n                                    strAlias = strToken;\n                                    bAlias = true;\n                                }// Alias\n                                else {\n                                    return false; // Error\n                                }\n                            }// No es tabla\n                            break;\n                        case 4: {// Recogiendo condicin de JOIN\n                            if (strToken.equals(\"(\")) {// Contar parntesis\n                                nJoinOpenPar++;\n                                // F11090206: Problemas con los joins sin parntesis que tienen expresiones con parntesis.\n                                bOpenJoinFormula = true;\n                            }// Contar parntesis\n                            if (strToken.equals(\")\")) {// Cierre de parntesis\n                                if (--nJoinOpenPar <= 0) {// Final del Join\n                                    if (!bOpenJoinFormula) {// Final de verdad\n                                        // Si no hay parntesis abiertos... error\n                                        if (--nOpenPar < 0) {\n                                            return false; // Error\n                                        }\n                                        if (!bTable) {\n                                            return false; // Error\n                                        }\n                                        // K11090501: El parser de SQL no almacena el tipo de JOIN. Debera.\n                                        this.AddTable(strTable, strAlias, strJoin, jt);\n                                        strTable = strAlias = strJoin = \"\";\n                                        bTable = bAlias = false;\n                                        nTableStep = 5;\n                                        break;\n                                    }// Final de verdad\n                                    bOpenJoinFormula = false;\n                                }// Final del Join\n                            }// Cierre de parntesis\n                            else {// Podra ser un join sin parntesis\n                                // F12042502: Falta un caso en joins sin parntesis.\n                                // Podra ser un join sin parntesis para separar las tablas.\n                                if (strToken.equalsIgnoreCase(\"left\") || strToken.equalsIgnoreCase(\"right\") || strToken.equalsIgnoreCase(\"inner\")) {// Ver si no tiene parntesis\n                                    if (nOpenPar == 0 && nJoinOpenPar == 0) {// No hay parntesis\n                                        if (!bTable) {\n                                            return false; // Error\n                                        }\n                                        // K11090501: El parser de SQL no almacena el tipo de JOIN. Debera.\n                                        this.AddTable(strTable, strAlias, strJoin, jt);\n                                        strTable = strAlias = strJoin = \"\";\n                                        bTable = bAlias = false;\n                                        // Analizar cul es...\n                                        jt = eJoinType.eLeftJoin; // Para el siguiente...\n                                        if (strToken.equalsIgnoreCase(\"right\")) {\n                                            jt = eJoinType.eRightJoin;\n                                        } else if (strToken.equalsIgnoreCase(\"inner\")) {\n                                            jt = eJoinType.eInnerJoin;\n                                        }\n                                        nTableStep = 1;\n                                        break;\n                                    }// No hay parntesis\n                                }// Ver si no tiene parntesis\n                            }// Podra ser un join sin parntesis\n                            bAddTable = false;\n                            // Puede que venga un WHERE o cualquier otra cosa como en el caso 5\n                            if (strToken.equalsIgnoreCase(\"where\")) {// Pasar al paso de where\n                                nOpenPar = 0;\n                                nStep = 3;\n                                bAddTable = true;\n                            }// Pasar al paso de where\n                            if (strToken.equalsIgnoreCase(\"group\")) {// Puede que venga la agrupacin directamente\n                                nOpenPar = 0;\n                                nStep = 7;\n                                bAddTable = true;\n                            }// Puede que venga la agrupacin directamente\n                            if (strToken.equalsIgnoreCase(\"order\")) {// Puede que venga el orden directamente\n                                nOpenPar = 0;\n                                nStep = 4;\n                                bAddTable = true;\n                            }// Puede que venga el orden directamente\n                            if (bAddTable) {// Adicionar la tabla y salir\n                                // K11090501: El parser de SQL no almacena el tipo de JOIN. Debera.\n                                this.AddTable(strTable, strAlias, strJoin, jt);\n                                strTable = strAlias = strJoin = \"\";\n                                bTable = bAlias = false;\n                                break;\n                            }// Adicionar la tabla y salir\n                            //\n                            // Lo que sea, lo va sumando en la condicin JOIN, incluidos los separadores\n                            strJoin += strToken;\n                            break;\n                        }\n                        case 5:\n                            //\n                            // Esperando otro JOIN o UNION o WHERE u ORDER\n                            if (this.IsSeparator(strToken)) {\n                                break;\n                            }\n                            if (strToken.equals(\")\")) {// Parntesis final\n                                if (nOpenPar == 0) {// No hay ningn parntesis de JOIN abierto\n                                    if (--nInitPar < 0) {\n                                        return false; // Error\n                                    }\n                                }// No hay ningn parntesis de JOIN abierto\n                                else {// Descontar un parntesis.\n                                    strJoin = \"\";\n                                    nOpenPar--;\n                                    break;\n                                }// Descontar un parntesis.\n                            }// Parntesis final\n                            if (strToken.equalsIgnoreCase(\"left\") || strToken.equalsIgnoreCase(\"right\") || strToken.equalsIgnoreCase(\"inner\")) {// Pasar al siguiente\n                                nTableStep = 1;\n                                break;\n                            }// Pasar al siguiente\n                            //\n                            // Ver si viene WHERE\n                            if (strToken.equalsIgnoreCase(\"where\")) {// Vendr un WHERE\n                                nOpenPar = 0;\n                                nStep = 3;\n                                break;\n                            }// Vendr un WHERE\n                            // F11120702: No se reconoce GROUP en una parte de ParseSelectStatement.\n                            // Aqu tambin podera de venir un GROUP BY\n                            if (strToken.equalsIgnoreCase(\"group\")) {// Puede que venga la agrupacin directamente\n                                nOpenPar = 0;\n                                nStep = 7;\n                                break;\n                            }// Puede que venga la agrupacin directamente\n                            // Ver si es una unin\n                            if (strToken.equalsIgnoreCase(\"union\")) {// Si hay parntesis abiertos error\n                                if (nOpenPar > 0) {\n                                    return false;\n                                }\n                                //\n                                // Cambiar de estado y esperar ALL\n                                nStep = 5;\n                                break;\n                            }// Si hay parntesis abiertos error\n                            //\n                            // Puede ser que llegue un ORDER BY en este estado...\n                            if (strToken.equalsIgnoreCase(\"order\")) {// No puede haber parntesis abiertos tampoco\n                                if (nOpenPar > 0) {\n                                    return false;\n                                }\n                                //\n                                // Cambiar el estado y esperar BY\n                                nStep = 4;\n                                break;\n                            }// No puede haber parntesis abiertos tampoco\n                            break;\n                    }\n                    break;\n                case 3:\n                    //\n                    // Esperando un WHERE\n                    if (strToken.equalsIgnoreCase(\"order\")) {// Ordenamiento\n                        nStep = 4;\n                        this.m_strWhere = strPrevToken.trim();\n                        break;\n                    }// Ordenamiento\n                    //\n                    // Si llega GROUP, pasar a esperar BY\n                    if (strToken.equalsIgnoreCase(\"group\")) {// Agrupacin\n                        //\n                        // Si hay parntesis desbalanceados, error de sintaxis\n                        if (nOpenPar > 0)\n                        // Error\n                        {\n                            return false;\n                        }\n                        nStep = 7;\n                        this.m_strWhere = strPrevToken.trim();\n                        break;\n                    }// Agrupacin\n                    // F12110902: Modificaciones al parser de SQL para gestionar uniones.\n                    // Aqu podra venir una unin siempre que el where no est entre parntesis\n                    if (strToken.equalsIgnoreCase(\"union\")) {// UNION\n                        // Si hay parntesis abiertos, mlido\n                        if (nOpenPar > 0) {\n                            return false;\n                        }\n                        this.m_strWhere = strPrevToken.trim();\n                        nStep = 5;\n                        break;\n                    }// UNION\n                    if (strToken.equals(\"(\"))\n                    // Abrir parntesis\n                    {\n                        nOpenPar++;\n                    }\n                    //\n                    // Si es un parntesis pudiera ser simplemente un cierre\n                    if (strToken.equals(\")\")) {// Cierra parntesis\n                        if (nOpenPar == 0) {// Si no hay parntesis abierto al inicio\n                            if (--nInitPar < 0) {\n                                return false;\n                            }\n                            //\n                            // Un parntesis cerrado puede ser indicio de fin de query... prepararse\n                            // por si las moscas\n                            this.m_strWhere = strPrevToken.trim();\n                            nStep = 0;\n                            break;\n                        }// Si no hay parntesis abierto al inicio\n                        if (--nOpenPar == 0) {// Parntesis final de un WHERE\n                            //\n                            // Final de un WHERE entre parntesis, simplemente preparar la cosa\n                            // porque igual el query termina aqu ms adelante.... no cambiar de estado\n                            strPrevToken += strToken;\n                            this.m_strWhere = strPrevToken.trim();\n                            break;\n                        }// Parntesis final de un WHERE\n                    }// Cierra parntesis\n                    //\n                    // Lo que sea, irlo sumando para tenerlo como WHERE\n                    strPrevToken += strToken;\n                    break;\n                case 4:\n                    //\n                    // Esperando el BY del ORDER BY\n                    //\n                    if (this.IsSeparator(strToken)) {\n                        break;\n                    }\n                    if (strToken.equalsIgnoreCase(\"by\")) {// Lleb el BY, pasar a leer el ORDER\n                        strPrevToken = \"\";\n                        nStep = 9;\n                        nOpenPar = 0;\n                        break;\n                    }// Lleb el BY, pasar a leer el ORDER\n                    //\n                    // Error\n                    return false;\n                case 5:\n                    //\n                    // Esperando el ALL\n                    if (this.IsSeparator(strToken)) {\n                        break;\n                    }\n                    if (strToken.equalsIgnoreCase(\"all\")) {// OK\n                        nStep = 6;\n                        break;\n                    }// OK\n                    // F12110902: Modificaciones al parser de SQL para gestionar uniones.\n                    // No tiene por qu ser union all...\n                    if (strToken.equalsIgnoreCase(\"select\") || strToken.equals(\"(\")) {// Asumir que nos hemos saltado un ALL\n                        this.AddUnionQuery();\n                        nOpenPar = 0;\n                        nStep = 1;\n                        // Limpiar tuti\n                        strPrevToken = strField = strAlias = strJoin = strTable = \"\";\n                        break;\n                    }// Asumir que nos hemos saltado un ALL\n                    // Error\n                    return false;\n                case 6:\n                    //\n                    // Apreparar este SELECT como una unin y copiar todos los datos\n                    // de este hacia uno en lista.\n                    this.AddUnionQuery();\n                    nStep = nOpenPar = 0;\n                    // F12110902: Modificaciones al parser de SQL para gestionar uniones.\n                    // Limpiar tuti\n                    strPrevToken = strField = strAlias = strJoin = strTable = \"\";\n                    break;\n                case 7:\n                    //\n                    // Esperando el BY del GROUP\n                    if (this.IsSeparator(strToken)) {\n                        break;\n                    }\n                    if (strToken.equalsIgnoreCase(\"by\")) {// OK\n                        strPrevToken = \"\";\n                        nOpenPar = 0;\n                        nStep = 8;\n                        break;\n                    }// OK\n                    //\n                    // Error\n                    return false;\n                case 8:\n                    //\n                    // Si llega HAVING saltar el estado de espera de las condiciones de HAVING\n                    if (strToken.equalsIgnoreCase(\"having\")) {// Completar lo que haya hasta aqu\n                        if (nOpenPar > 0) {\n                            return false;\n                        }\n                        nStep = 10;\n                        this.m_strGroupBy = strPrevToken.trim();\n                        nOpenPar = 0;\n                        strPrevToken = \"\";\n                        break;\n                    }// Completar lo que haya hasta aqu\n                    //\n                    // En este estado, todo lo que llegue ser para la agrupacin\n                    if (strToken.equalsIgnoreCase(\"order\")) {// Puede venir ordenamiento\n                        if (nOpenPar > 0) {\n                            return false;\n                        }\n                        nStep = 4;\n                        this.m_strGroupBy = strPrevToken.trim();\n                        break;\n                    }// Puede venir ordenamiento\n                    //\n                    if (strToken.equals(\"(\")) {\n                        nOpenPar++;\n                    }\n                    //\n                    // Si cierra parntesis puede ser final de agrupacin\n                    if (strToken.equals(\")\")) {// Ver qu es lo que cierra\n                        if (nOpenPar == 0) {// Si no hay parntesis abierto al inicio\n                            if (--nInitPar < 0) {\n                                return false;\n                            }\n                            //\n                            // Un parntesis cerrado puede ser indicio de fin de query... prepararse\n                            // por si las moscas\n                            this.m_strGroupBy = strPrevToken.trim();\n                            nStep = 0;\n                            break;\n                        }// Si no hay parntesis abierto al inicio\n                        if (--nOpenPar == 0) {// Parntesis final de un GROUP BY\n                            //\n                            // Final de un GROUP BY entre parntesis, simplemente preparar la cosa\n                            // porque igual el query termina aqu ms adelante.... no cambiar de estado\n                            strPrevToken += strToken;\n                            this.m_strGroupBy = strPrevToken.trim();\n                            break;\n                        }// Parntesis final de un GROUP BY\n                    }// Ver qu es lo que cierra\n                    //\n                    // Agregar para tener la expresin completa aqu\n                    strPrevToken += strToken;\n                    break;\n                case 9:\n                    //\n                    // Leyendo los valores que componen un ORDER BY\n                    //\n                    // En este estado, todo lo que llegue ser para el ORDER BY\n                    if (strToken.equalsIgnoreCase(\"having\")) {// Puede venir ordenamiento\n                        if (nOpenPar > 0) {\n                            return false;\n                        }\n                        nStep = 10;\n                        this.m_strOrderBy = strPrevToken.trim();\n                        nOpenPar = 0;\n                        strPrevToken = \"\";\n                        break;\n                    }// Puede venir ordenamiento\n                    if (strToken.equals(\"(\"))\n                    // Contarlo\n                    {\n                        nOpenPar++;\n                    }\n                    if (strToken.equals(\")\")) {// Cerrar parntesis\n                        if (nOpenPar == 0) {// Si no hay parntesis abierto al inicio\n                            if (--nInitPar < 0) {\n                                return false;\n                            }\n                            //\n                            // Un parntesis cerrado puede ser indicio de fin de query... prepararse\n                            // por si las moscas\n                            this.m_strOrderBy = strPrevToken.trim();\n                            nStep = 0;\n                            break;\n                        }// Si no hay parntesis abierto al inicio\n                        if (--nOpenPar == 0) {// Parntesis final de un ORDER BY\n                            //\n                            // Final de un ORDER BY entre parntesis, simplemente preparar la cosa\n                            // porque igual el query termina aqu ms adelante.... no cambiar de estado\n                            strPrevToken += strToken;\n                            this.m_strOrderBy = strPrevToken.trim();\n                            break;\n                        }// Parntesis final de un ORDER BY\n                    }// Cerrar parntesis\n                    //\n                    // Agregar para tener la expresin completa aqu\n                    strPrevToken += strToken;\n                    break;\n                case 10:\n                    //\n                    // Para componer la expresin del HAVING, parecido al WHERE\n                    //\n                    //\n                    if (strToken.equals(\"(\")) {\n                        nOpenPar++;\n                    }\n                    //\n                    // Si cierra parntesis puede ser final de agrupacin\n                    if (strToken.equals(\")\")) {// Ver qu es lo que cierra\n                        if (nOpenPar == 0) {// Si no hay parntesis abierto al inicio\n                            if (--nInitPar < 0) {\n                                return false;\n                            }\n                            //\n                            // Un parntesis cerrado puede ser indicio de fin de query... prepararse\n                            // por si las moscas\n                            this.m_strHaving = strPrevToken.trim();\n                            nStep = 0;\n                            break;\n                        }// Si no hay parntesis abierto al inicio\n                        if (--nOpenPar == 0) {// Parntesis final de un GROUP BY\n                            //\n                            // Final de un GROUP BY entre parntesis, simplemente preparar la cosa\n                            // porque igual el query termina aqu ms adelante.... no cambiar de estado\n                            strPrevToken += strToken;\n                            this.m_strHaving = strPrevToken.trim();\n                            break;\n                        }// Parntesis final de un GROUP BY\n                    }// Ver qu es lo que cierra\n                    //\n                    // Puede venir ORDER BY\n                    if (strToken.equalsIgnoreCase(\"order\")) {// ORDER BY\n                        if (nOpenPar > 0) {\n                            return false;\n                        }\n                        this.m_strHaving = strPrevToken.trim();\n                        strPrevToken = \"\";\n                        nStep = 4;\n                        break;\n                    }// ORDER BY\n                    //\n                    // Agregar para tener la expresin completa aqu\n                    strPrevToken += strToken;\n                    break;\n            }// Mquina de estados\n            /////nIndex = nTokIdxTo + 1;\n        }// Ir obteniendo los tokens\n        //\n        // Aqu ver los residuos :-P\n        if (bTable) {// Queda una tabla por agregar\n            // K11090501: El parser de SQL no almacena el tipo de JOIN. Debera.\n            this.AddTable(strTable, strAlias, strJoin, jt);\n        }// Queda una tabla por agregar\n        //\n        // Si queda un WHERE a medias\n        if (nStep == 3 && strPrevToken.length > 0) {\n            this.m_strWhere = strPrevToken;\n        }\n        // Ajustar las cadenas\n        if (!TextUtils.isEmpty(this.m_strWhere)) {\n            this.m_strWhere = this.m_strWhere.trim();\n        }\n        // Lo mismo con el GROUP BY\n        if (nStep == 8 && strPrevToken.length > 0) {\n            this.m_strGroupBy = strPrevToken;\n        }\n        // Ajustar un poco\n        if (!TextUtils.isEmpty(this.m_strGroupBy)) {\n            this.m_strGroupBy = this.m_strGroupBy.trim();\n        }\n        // Lo mismo para el ORDER BY\n        if (nStep == 9 && strPrevToken.length > 0) {\n            this.m_strOrderBy = strPrevToken;\n        }\n        // Ajustar un poco\n        if (!TextUtils.isEmpty(this.m_strOrderBy)) {\n            this.m_strOrderBy = this.m_strOrderBy.trim();\n        }\n        // Lo mismo para el HAVING\n        if (nStep == 10 && strPrevToken.length > 0) {\n            this.m_strHaving = strPrevToken;\n        }\n        // Ajustar un poco\n        if (!TextUtils.isEmpty(this.m_strHaving)) {\n            this.m_strHaving = this.m_strHaving.trim();\n        }\n        //\n        // Si esta es una unin, poner tambin este query en la unin y dejarlo vaco\n        // de forma que solo queden queries en la lista de unin\n        if (this.m_bIsUnionQuery && this.m_lstSelectFields.length > 0) {\n            this.AddUnionQuery();\n        }\n        //\n        // Supuestamente debera tenerlo todo aqu..\n        this.m_sqlType = SqlType.SQLTYPE_SELECT;\n        return true;\n    }\n\n    /**\n     * Adiciona un query ya parseado a una unin. Los queries parseados se\n     * adicionan a una lista por su orden\n     */\n    private AddUnionQuery(): boolean {\n        // Si no existe la lista la creamos\n        if (this.m_lstUnionQueries == null) {\n            this.m_lstUnionQueries = new Array<SqlParser>();\n        }\n        // Crear un query nuevo, adicionarle los datos de este y ponerlo en lista\n        let newQuery = new SqlParser(this);\n        // F12110902: Modificaciones al parser de SQL para gestionar uniones.\n        // Si estamos parseando un select, esto ser un select\n        newQuery.SetSqlType(SqlType.SQLTYPE_SELECT);\n        if (!newQuery.CopyData(this)) {\n            return false;\n        }\n        this.m_lstUnionQueries.push(newQuery);\n        this.Clear(false);\n        this.m_bIsUnionQuery = true;\n        return true;\n    }\n\n    /**\n     * @param Token Elemento que se quiere comprobar.\n     * @return Devuelve TRUE si el parmetro que se pasa es un separador en una\n     * sentencia SELECT.\n     */\n    // private boolean IsSeparator(String Token) {\n    //     if (Token.equals(\"\\r\") || Token.equals(\"\\n\") || Token.equals(\"\\t\") || Token.equals(\" \") || Token.equals(\",\")) {\n    //         return true;\n    //     }\n    //     return false;\n    // }\n\n    /**\n     * @return Devuelve el siguiente token de una sentencia SELECT\n     */\n    private GetNextSqlToken(): string {\n        let bTextStart = false;\n        let i = 0, nTokIdxTo = 0, nLen = this.m_strSentence.length;\n        let strToken: string = null;\n\n        for (i = this.m_nParserIndex; i < nLen;) {// Ir revisando\n            switch (this.m_strSentence.charAt(i)) {\n                case '=':\n                case '+':\n                case '-':\n                case '*':\n                case '/':\n                    if (!bTextStart) {// Solo si no est en un texto\n                        if (i > nLen) {\n                            nTokIdxTo = i - 1; // El operador indica fin del anterior\n                        } else {\n                            nTokIdxTo = i; // El operador es en s un token\n                        }\n                        if (nTokIdxTo == this.m_nParserIndex) {\n                            nTokIdxTo++;\n                        }\n                        // F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n                        strToken = this.m_strSentence.substring(this.m_nParserIndex, nTokIdxTo/*\n                         * -\n                         * m_nParserIndex\n                         */);\n                        this.m_nParserIndex = nTokIdxTo;\n                        return strToken;\n                    }// Solo si no est en un texto\n                    else {\n                        i++;\n                    }\n                    break;\n                case '\\'':\n                    if (!bTextStart) {// Ver si es que empieza una cadena entrecomillada\n                        // F11041402: Problemas en el parser de sentencias SELECT con expresiones complejas.\n                        // Si tiene texto antes devolverlo\n                        if (i > this.m_nParserIndex) {// Tiene texto\n                            nTokIdxTo = i;\n                            strToken = this.m_strSentence.substring(this.m_nParserIndex, nTokIdxTo/*\n                             * -\n                             * m_nParserIndex\n                             */);\n                            this.m_nParserIndex = nTokIdxTo;\n                            return strToken;\n                        }// Tiene texto\n                        //return null;\n                        bTextStart = true;\n                    }// Ver si es que empieza una cadena entrecomillada\n                    else {// Haba un texto iniciado, terminar aqui\n                        if (i > nLen) {\n                            nTokIdxTo = i;\n                        } else {\n                            nTokIdxTo = i + 1;\n                        }\n                        // F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n                        strToken = this.m_strSentence.substring(this.m_nParserIndex, nTokIdxTo/*\n                         * -\n                         * m_nParserIndex\n                         */);\n                        this.m_nParserIndex = nTokIdxTo;\n                        return strToken;\n                    }// Haba un texto iniciado, terminar aqui\n                    if (!bTextStart) {// Sefin\n                        //\n                        // Si ya hay un token, termina aqu\n                        if (i > this.m_nParserIndex) {\n                            nTokIdxTo = i - 1;\n                        } else {\n                            nTokIdxTo = i;\n                        }\n                        // F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n                        strToken = this.m_strSentence.substring(this.m_nParserIndex, nTokIdxTo/*\n                         * -\n                         * m_nParserIndex\n                         */);\n                        this.m_nParserIndex = i;\n                        return strToken;\n                    }// Sefin\n                    i++;\n                    break;\n                case '\\r':\n                case '\\n':\n                case '\\t':\n                case ' ':\n                case ',':\n                case '(':\n                case ')':\n                    //\n                    // Separadores\n                    if (!bTextStart) {// Sefin\n                        //\n                        // Si ya hay un token, termina aqu\n                        if (i > nLen) {\n                            nTokIdxTo = i - 1;\n                        } else {\n                            nTokIdxTo = i;\n                        }\n                        if (nTokIdxTo == this.m_nParserIndex) {\n                            nTokIdxTo++;\n                        }\n                        // F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n                        strToken = this.m_strSentence.substring(this.m_nParserIndex, nTokIdxTo/*\n                         * -\n                         * m_nParserIndex\n                         */);\n                        this.m_nParserIndex = nTokIdxTo;\n                        return strToken;\n                    }// Sefin\n                    i++;\n                    break;\n                //\n                // Cuenta como uno ms\n                default:\n                    i++;\n                    break;\n            }\n        }// Ir revisando\n        // Si estamos al final, entonces devolver lo que quede\n        if (this.m_nParserIndex < i) {\n            // F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n            strToken = this.m_strSentence.substring(this.m_nParserIndex, nLen/* m_nParserIndex */);\n            this.m_nParserIndex = i;\n        }\n        return strToken;\n    }\n\n    /**\n     * Regenera una sentencia UPDATE a partir de la lista de campos que hay en\n     * este objeto\n     *\n     * @return Devuelve la cadena con la sentencia regenerada.\n     */\n\n    private RegenerateUpdate(): string {\n        let strValues = \"\";\n        let strSql: string;\n        //\n        // Si no hay campos, nada que hacer...\n        if (this.m_lstFields.length == 0) {\n            return null;\n        }\n        this.m_lstFields.entrySet().forEach(element => {\n            if (!SqlParser.EMPTY.equals(element[0])) {// Tiene valor\n                if (strValues.length > 0)\n                // Las comas\n                {\n                    strValues += \",\";\n                }\n                strValues += String.format(\"%s=%s\", element[0], element[1]);\n            }// Tiene valor\n        });\n        // Enumeration<String> enm = this.m_lstFields.keys();\n        // while (enm.hasMoreElements()) {// Recorrer la lista\n\n        //     strField = enm.nextElement();\n        //     strValue = this.m_lstFields.get(strField);\n        //     if (!SqlParser.EMPTY.equals(strField)) {// Tiene valor\n        //         if (strValues.length > 0)\n        //         // Las comas\n        //         {\n        //             strValues += \",\";\n        //         }\n        //         strValues += String.format(\"%s=%s\", strField, strValue);\n        //     }// Tiene valor\n        // }// Recorrer la lista\n        if (strValues.length == 0) {\n            return null;\n        }\n        strSql = String.format(\"UPDATE %s SET %s %s\", this.m_strTable, strValues, this.m_strWhere);\n        return strSql;\n    }\n\n    /// Regenera el SQL y lo devuelve\n\n    public RegenerateSql(): string {\n        //\n        // En funcin del tipo que sea, tendremos que generar diferentes tipos\n        // de sentencia SQL...\n        switch (this.m_sqlType) {\n            case SqlType.SQLTYPE_INSERT:\n                return this.RegenerateInsert();\n            case SqlType.SQLTYPE_DELETE:\n                return this.RegenerateDelete();\n            case SqlType.SQLTYPE_UPDATE:\n                return this.RegenerateUpdate();\n            case SqlType.SQLTYPE_SELECT:\n                return this.RegenerateSelect();\n        }\n        return null;\n    }\n\n    /**\n     * Regenera una sentencia SELECT a partir de los datos parseados\n     *\n     * @return Devuelve la cadena con la sentencia SELECT regenerada a partir de\n     * esta estructura de datos.\n     */\n\n    private RegenerateSelect(): string {\n        let strQuery: string;\n        let strTmp: string;\n\n        if (this.m_bIsUnionQuery) {\n            return this.RegenerateUnionQuery();\n        }\n        //\n        // De lo contrario genera como siempre\n        if (this.m_tableFrom == null) {\n            return null;\n        }\n        //\n        // Obtener el query preliminar\n        // M09072901:\tPermitir que se puedan traducir los joins a formato where en blackberry\n        // Indicarle a la tabla si tiene que traducir los joins o no...\n        this.m_tableFrom.setTranslateJoins(this.m_bTranslateJoins);\n\n        strQuery = \"SELECT \" + (this.m_bDistinct ? \"DISTINCT \" : \"\") + this.GetFieldList() + \" FROM \" + this.m_tableFrom.getTableName();\n        if (this.m_tableFrom.getSecondTable() == null) {// Adicionar el alias\n            strTmp = \" \" + this.m_tableFrom.getAlias();\n            strQuery += strTmp;\n        }// Adicionar el alias\n        //\n        // Quitar lo que sobra\n        strQuery = strQuery.trim();\n        for (; strQuery.endsWith(\"\\t\"); strQuery = strQuery.substring(0, strQuery.length - 1)) {\n        }\n        for (; strQuery.endsWith(\"\\r\\n\"); strQuery = strQuery.substring(0, strQuery.length - 2)) {\n        }\n        //\n        // Si hay WHERE, ponerlo despus de lo anterior\n        if (!TextUtils.isEmpty(this.m_strWhere)) {// Colocarlo al finalillo\n            strTmp = \" WHERE (\" + this.m_strWhere + \")\";\n            strQuery += strTmp;\n        }// Colocarlo al finalillo\n        // M09072901:\tPermitir que se puedan traducir los joins a formato where en blackberry\n        // Si tenemos que traducir los joins entonces habr que agregar sus condiciones aqu\n        if (this.m_bTranslateJoins) {// Pedirle la cadena de condiciones a la tabla\n            strTmp = this.m_tableFrom.getTranslatedJoinConditions();\n            if (!TextUtils.isEmpty(strTmp)) {// Si ya tiene WHERE ponerlo\n                if (TextUtils.isEmpty(this.m_strWhere)) {\n                    strTmp = \" WHERE (\" + strTmp + \")\";\n                } else {\n                    strTmp = (\" AND (\" + strTmp + \")\");\n                }\n            }// Si ya tiene WHERE ponerlo\n            strQuery += strTmp;\n        }// Pedirle la cadena de condiciones a la tabla\n        //\n        // Si hay GROUP BY, ponerlo despus del WHERE\n        if (!TextUtils.isEmpty(this.m_strGroupBy)) {// Agregar el pedazo que falta\n            strTmp = \" GROUP BY \" + this.m_strGroupBy;\n            strQuery += strTmp;\n        }// Agregar el pedazo que falta\n        //\n        // Si tiene HAVING\n        if (!TextUtils.isEmpty(this.m_strHaving)) {// Agregar el HAVING\n            strTmp = \" HAVING \" + this.m_strHaving;\n            strQuery += strTmp;\n        }// Agregar el HAVING\n        //\n        // Si hay ORDER BY se pone aqu\n        if (!TextUtils.isEmpty(this.m_strOrderBy)) {// Agregar el ordenamiento\n            strTmp = \" ORDER BY \" + this.m_strOrderBy;\n            strQuery += strTmp;\n        }// Agregar el ordenamiento\n        // Si tiene LIMIT, ponerlo\n        return strQuery;\n    }\n\n    /**\n     * @return Devuelve una cadena formateada con los campos que contiene la\n     * lista parseada.\n     */\n    private GetFieldList(): string {\n        let str = new StringBuilder();\n        this.m_lstSelectFields.forEach(fld => {\n            !str.isEmpty() && str.append(',');\n            str.append(fld.getName());\n            !TextUtils.isEmpty(fld.getAlias()) && str.append(\" AS \" + fld.getAlias());\n        });\n        // Luis: Esto es lo mismo que arriba pero compactado en javascript\n        // String str = \"\", strTmp;\n        // this.int i = 0, nCount = this.m_lstSelectFields.size();\n\n        // for (this.int j = 0; j < this.m_lstSelectFields.size(); j++) {// Recorrer la lista de campos\n        //     QueryField fld = this.m_lstSelectFields.elementAt(j);\n        //     str += fld.getName();\n        //     if (!TextUtils.isEmpty(fld.getAlias())) {// Adicionar cositas\n        //         strTmp = \" AS \" + fld.getAlias();\n        //         str += strTmp;\n        //     }// Adicionar cositas\n        //     if (i < nCount - 1) {\n        //         str += \",\";\n        //     }\n        //     //////if (0 ==((++n) % 5) && n < nCount - 1)\n        //     // Adicionar unos cambios de lnea\n        //     //////str += \"\\r\\n\\t\\t\";\n        //     // Hala... contemos :-P\n        //     i++;\n        // }// Recorrer la lista de campos\n        // Completo\n        return str.length() === 0 ? '*' : str.toString();\n    }\n\n    /**\n     * Regenera una sentencia SELECT de unin a partir de la lista de queries\n     * que hay en este parser\n     *\n     * @return Devuelve la sentencia SELECT regenerada.\n     */\n    private RegenerateUnionQuery(): string {\n        let strQuery = new StringBuilder();\n        this.m_lstUnionQueries.forEach(query => {\n            strQuery.isEmpty() && strQuery.append(\" \\r\\nUNION ALL\\r\\n \");\n            this.m_bSurroundUnions && strQuery.append(\"(\");\n            strQuery.append(query.RegenerateSql());\n            this.m_bSurroundUnions && strQuery.append(\")\");\n        });\n        !TextUtils.isEmpty(this.m_strOrderBy) && strQuery.append(\"\\r\\nORDER BY \" + this.m_strOrderBy);\n        // Luis: Esto es lo mismo que arriba pero compactado en javascript\n        // String strQuery = \"\", strTmp, strNewQuery;\n\n        // for (this.int i = 0; i < this.m_lstUnionQueries.size(); i++) {// Cada query habr que regenerarlo\n        //     SqlParser query = this.m_lstUnionQueries.elementAt(i);\n        //     strNewQuery = query.RegenerateSql();\n        //     if (!TextUtils.isEmpty(strQuery))\n        //     // Adicionar el UNION ALL\n        //     {\n        //         strQuery += \" \\r\\nUNION ALL\\r\\n \";\n        //     }\n        //     // F12110902: Modificaciones al parser de SQL para gestionar uniones.\n        //     // Tendremos parntesis... o no...\n        //     strTmp = this.m_bSurroundUnions ? \"(\" : Utils.EMPTY_STRING;\n        //     strTmp += strNewQuery;\n        //     strTmp += this.m_bSurroundUnions ? \")\" : Utils.EMPTY_STRING;\n        //     strQuery += strTmp;\n        // }// Cada query habr que regenerarlo\n        //\n        // Si al final tiene ORDER BY, ponerlo aqu\n        // if (!TextUtils.isEmpty(this.m_strOrderBy)) {// Componer el ordenamiento\n        //     strTmp = \"\\r\\nORDER BY \" + this.m_strOrderBy;\n        //     strQuery += strTmp;\n        // }// Componer el ordenamiento\n\n        return strQuery.toString();\n    }\n\n    /**\n     * Asigna valor a un campo de este parser.\n     *\n     * @param FieldName  Nombre del campo cuyo valor se quiere modificar.\n     * @param FieldValue Valor que se quiere asignar al campo. Ojo con los separadores\n     *                   y delimitadores que tienen que venir incluidos en el valor.\n     */\n    public SetFieldValue(FieldName: string, FieldValue: string) {\n        if (this.m_lstFields == null) {\n            this.m_lstFields = new Hashtable<string, string>();\n        }\n        this.m_lstFields.put(FieldName, FieldValue);\n    }\n\n    /**\n     * A12042602: Permitir que se puedan almacenar los tipos de datos de una\n     * sentencia SQL.\n     *\n     * @param FieldName Nombre del campo cuyo tipo se quiere asignar\n     * @param FieldType Tipo de dato.\n     */\n    public SetFieldType(FieldName: string, FieldType: number) {\n        if (this.m_lstFieldsType == null) {\n            this.m_lstFieldsType = new Hashtable<string, number>();\n        }\n        this.m_lstFieldsType.put(FieldName, FieldType);\n    }\n\n    /**\n     * A12042602: Permitir que se puedan almacenar los tipos de datos de una\n     * sentencia SQL.\n     *\n     * @param FieldName Nombre del campo cuyo tipo se quiere obtener.\n     * @return\n     */\n    public GetFieldType(FieldName: string): number {\n        if (this.m_lstFieldsType == null) {\n            return 0;\n        }\n        if (!this.m_lstFieldsType.containsKey(FieldName)) {\n            return 0;\n        }\n        return this.m_lstFieldsType.get(FieldName);\n    }\n\n    /**\n     * Elimina los campos de esta sentencia que estn contenidos en el que se\n     * pasa como parmetro.\n     *\n     * @param Source      Parser cuyos campos se analizan para buscar coincidencias.\n     * @param PriorityMap Ignorado. Reservado para versiones futuras.\n     * @return Devuelve la cantidad de campos que quedan despus de eliminar los\n     * que coinciden.\n     * @throws ReplicationException\n     */\n    public StripSqlFields(Source: SqlParser, PriorityMap: number): number {\n        // let strField=\"\", strValue=\"\", strValueTo=\"\";\n        // let bFormulaTo=false, bFormulaFrom=false, bStrip=false;\n        let nRemaining = Source.GetFields().length;\n\n        try {\n            this.m_lstFields.entrySet().forEach(element => {\n                if (SqlParser.IsFormula(element[0]) && SqlParser.IsFormula(this.GetFieldValue(element[0]))) {// Ponerle el mismo valor que el original\n                    if (this.m_sqlType == SqlType.SQLTYPE_INSERT) {\n                        this.SetFieldValue(element[0], element[1]);\n                    } else {\n                        this.m_lstFields.delete(element[0]);\n                    }\n                    nRemaining--;\n                }// Ponerle el mismo valor que el original\n            });\n            // Luis: Esto es lo mismo que arriba pero compactado en javascript\n            // Enumeration<String> enm = this.m_lstFields.keys();\n            // while (enm.hasMoreElements()) {// Recorrer la lista\n\n            //     strField = enm.nextElement();\n            //     strValue = m_lstFields.get(strField);\n            //     if (m_lstFields.containsKey(strField)) {// Ahora ver si es una formulilla\n            //         bStrip = true;\n            //         strValueTo = GetFieldValue(strField);\n            //         bFormulaFrom = IsFormula(strValue);\n            //         bFormulaTo = IsFormula(strValueTo);\n            //         /*\n            //          * Si tanto el valor de origen como el de destino son\n            //          * frmulas entonces las dos prevalecern porque se\n            //          * aplicarn de forma acumulativa. En realidad este\n            //          * comportamiento no debe ser tomado exactamente as, pero\n            //          * por el momento debe resolver los problemas\n            //          */\n            //         if (bFormulaFrom && bFormulaTo) {\n            //             bStrip = false;\n            //         }\n            //         //\n            //         if (bStrip) {// Ponerle el mismo valor que el original\n            //             if (m_sqlType == SqlType.SQLTYPE_INSERT) {\n            //                 SetFieldValue(strField, strValue);\n            //             } else {\n            //                 m_lstFields.remove(strField);\n            //             }\n            //             nRemaining--;\n            //         }// Ponerle el mismo valor que el original\n            //     }// Ahora ver si es una formulilla\n            // }// Revisa cada campo del SQL origen\n            //\n            // Puede darse el caso especial que se trate de un INSERT y que solo le quede el ROWID\n            // En ese caso habr que quitarle uno\n            if ((this.m_sqlType == SqlType.SQLTYPE_INSERT && Source.GetSqlType() == SqlType.SQLTYPE_UPDATE) && (this.GetRowId().compareTo(Source.GetRowId()) == 0)) {\n                nRemaining--;\n            }\n\n            return nRemaining;\n        } catch (e) {\n            // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n            ////throw new ReplicationException(ReplicationErrorCodes.RPLR_DATA_ERROR, e.getMessage(), \"Error eliminando campos de la operacin.\");\n            throw e;\n            // new ReplicationException(\n            //         ReplicationErrorCodes.RPLR_DATA_ERROR,\n            //         e.getMessage(),\n            //         GetMessage(XoneMessageKeys.SYS_MSG_SQL_STRIPFIELDERROR, \"Error stripping operation fields.\"));\n        }\n    }\n\n    /**\n     * Copia datos de una sentencia parseada hacia esta sentencia.\n     *\n     * @param Source Sentencia desde la que se quieren copiar los datos.\n     * @return Devuelve TRUE si los datos se copian correctamente.\n     */\n    public CopyData(Source: SqlParser) {\n        let table: QueryTable;\n\n        this.Clear();\n        Source.getQueryFields().forEach(field => {\n            this.AddField(field.getName(), field.getAlias());\n        });\n        // // Comprobar si hay que copiar\n        // for (int i = 0; i < Source.getQueryFields().size(); i++) {// Copia cada campo\n        //     QueryField field = Source.getQueryFields().elementAt(i);\n        //     // Copiar\n        //     this.AddField(field.getName(), field.getAlias());\n        // }// Copia cada campo\n        // Ahora copia cada tabla con sus correspondientes tablas encadenadas y cosas as\n        table = Source.getTableFrom();\n        /*\n         * TODO ADD TAG Juan Carlos\n         * Esto puede venir a null, por ejemplo desde una de las sobrecargas de EmbedFilters(), y\n         * puede significar que se le ha olvidado a alguien poner el FROM. Me gustara lanzar una\n         * excepcin detallada, pero aqu las cosas slo retornan booleano...\n         */\n        if (table == null) {\n            return false;\n        }\n        this.CopyTable(table);\n        // Indicar si es DISTINCT o no\n        this.m_bDistinct = Source.getDistinct();\n        // Copiar otras cosas que hagan falta para este query, como WHERES, GROUPS, ORDERS y HAVINGS\n        // que tambin forman parte del query\n        this.m_strWhere = Source.GetWhereSentence();\n        this.m_strGroupBy = Source.getGroupBySentence();\n        this.m_strOrderBy = Source.getOrderBySentence();\n        this.m_strHaving = Source.getHavingSentence();\n        //////m_strTop = Source.TopSentence;\n        //////m_strLimit = Source.LimitSentence;\n        return true;\n    }\n\n    /**\n     * TRUE si se trata de un SELECT que tiene DISTINCT\n     *\n     * @return Devuelve la bandera que indica si la sentencia SELECT tiene\n     * DISTINCT o no.\n     */\n    public getDistinct(): boolean {\n        return this.m_bDistinct;\n    }\n\n    /**\n     * Expone la sentencia ORDER BY de un SELECT.\n     *\n     * @return Devuelve la sentencia ORDER BY de esta sentencia SQL.\n     */\n    public getOrderBySentence(): string {\n        return this.m_strOrderBy || null;\n    }\n\n    /**\n     * Asigna valor a la sentencia ORDER BY de esta sentencia SQL.\n     *\n     * @param value Nuevo valor de la sentencia ORDER BY de este SELECT.\n     */\n    public setOrderBySentence(value: string): void {\n        this.m_strOrderBy = value;\n    }\n\n    /**\n     * Expone la sentencia GROUP BY de esta sentencia SQL.\n     *\n     * @return Devuelve el valor de la sentencia GROUP BY de este SQL.\n     */\n    public getGroupBySentence(): string {\n        return this.m_strGroupBy;\n    }\n\n    /**\n     * Asigna valor a la sentencia GROUP BY de esta sentencia SQL.\n     *\n     * @param value Nuevo valor de la sentencia GROUP BY de este SQL.\n     */\n    public setGroupBySentence(value: string): void {\n        this.m_strGroupBy = value;\n    }\n\n    /**\n     * Copia los datos de una tabla parseada hacia esta sentencia. Si hay tablas\n     * enlazadas tambin las copia.\n     *\n     * @param Table Tabla o cadena de ellas que se quiere copiar hacia esta\n     *              sentencia\n     * @return Devuelve TRUE si la copia de los datos de la tabla es correcta.\n     */\n    private CopyTable(Table: QueryTable): boolean {\n        let next: QueryTable;\n        // Copiar primero la segunda...\n        if (null != (next = Table.getSecondTable())) {\n            this.CopyTable(next);\n        }\n        // Ahora copiar esta\n        // K11090501: El parser de SQL no almacena el tipo de JOIN. Debera.\n        // Copiar con el tipo...\n        this.AddTable(Table.getActualName(), Table.getAlias(), Table.getJoinCondition(), Table.getJoinType());\n        return true;\n    }\n\n    /**\n     * Adiciona una tabla procedente de una sentencia SELECT que se est\n     * parseando.\n     * <p>\n     * K11090501: El parser de SQL no almacena el tipo de JOIN. Debera. Un\n     * parmetro para indicar qu tipo de join es...\n     *\n     * @param TableName     Nombre de la tabla en la base de datos.\n     * @param TableAlias    Alias de la tabla en la sentencia SELECT.\n     * @param JoinCondition Condicin de unin entre esta tabla y la que le precede.\n     */\n    private AddTable(TableName: string, TableAlias: string, JoinCondition: string, JoinType: eJoinType) {\n        let tbl: QueryTable;\n        let strName = TableName;\n        //\n        // Si lo primero que trae es un prefijo, quitrselo\n        // A12042501: Si la tabla tiene el prefijo como parte del parsing tiene que mantenerlo.\n        // El prefijo tiene que ir en plan tabla a tabla...\n        let bPrefix = false;\n        if (strName.startsWith(\"##PREF##\")) {// Sacar el valor de UsePrefix de aqu\n            // F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n            strName = strName.substring(8, strName.length);\n            this.m_bUsePrefix = bPrefix = true;\n        }// Sacar el valor de UsePrefix de aqu\n        // Agregar la tabla a la lista\n        tbl = new QueryTable(strName.trim(), TableAlias.trim());\n        tbl.setSecondTable(this.m_tableFrom);\n        // K11090501: El parser de SQL no almacena el tipo de JOIN. Debera.\n        // Pasar el join...\n        tbl.setJoinCondition(JoinCondition.trim(), JoinType);\n        // A12042501: Si la tabla tiene el prefijo como parte del parsing tiene que mantenerlo.\n        // El prefijo tabla a tabla solo si lo lleva\n        tbl.setUsePrefix(bPrefix);\n        this.m_tableFrom = tbl;\n    }\n\n    /**\n     * Expone la lista de tablas de la consulta\n     *\n     * @return Devuelve una tabla de SELECT con la lista o tabla nica\n     */\n    public getTableFrom(): QueryTable {\n        return this.m_tableFrom;\n    }\n\n    /**\n     * TRUE si hay que incluir el prefijo a la hora de reconstruir las\n     * sentencias SQL\n     *\n     * @return Devuelve la bandera que indica si hay que usar prefijo para\n     * reconstruir la sentencia SELECT.\n     */\n    public getUsePrefix(): boolean {\n        return this.m_bUsePrefix;\n    }\n\n    /**\n     * Asigna valor a la bandera que indica si hay que usar prefijo para\n     * recomponer la sentencia SQL.\n     *\n     * @param value TRUE si hay que incluir el prefijo al reconstruir la sentencia\n     *              SQL.\n     */\n    public setUsePrefix(value: boolean): void {\n        this.m_bUsePrefix = value;\n    }\n\n    /**\n     * Sentencia HAVING del SELECT si se trata de un GROUP BY filtrado despus\n     *\n     * @return Devuelve la sentencia HAVING del SELECT.\n     */\n    public getHavingSentence(): string {\n        return this.m_strHaving;\n    }\n\n    /**\n     * Asigna valor a la sentencia HAVING de esta sentencia SELECT.\n     *\n     * @param value Nuevo valor de la sentencia HAVING.\n     */\n    public setHavingSentence(value: string) {\n        this.m_strHaving = value;\n    }\n\n    /**\n     * Limpia las estructuras de datos usadas para parsear sentencias SELECT.\n     *\n     * @param ClearUnions TRUE si se quiere limpiar tambin la lista de uniones.\n     */\n    private Clear(ClearUnions: boolean = true): void {\n        if (this.m_tableFrom != null) {// Eliminar las tablas\n            this.m_tableFrom = null;\n        }// Eliminar las tablas\n        if (this.m_lstSelectFields != null) {\n            this.m_lstSelectFields = new Vector<QueryField>();\n        }\n        // Si hay queries de unin eliminarlos\n        if (ClearUnions) {// Limpiar las uniones tambin\n            if (this.m_lstUnionQueries != null) {\n                this.m_lstUnionQueries = new Array<SqlParser>();\n            }\n        }// Limpiar las uniones tambin\n        //\n        this.m_bDistinct = false;\n        this.m_strWhere = null;\n        this.m_strGroupBy = null;\n        this.m_strOrderBy = null;\n        this.m_strHaving = null;\n    }\n\n    /**\n     * Lista de queries que componen una unin\n     *\n     * @return Devuelve una lista con los queries que forman una unin.\n     */\n    public getUnionQueries(): Array<SqlParser> {\n        return this.m_lstUnionQueries;\n    }\n\n    /**\n     * Expone la lista de campos de una sentencia SELECT\n     *\n     * @return Devuelve la lista de campos de la sentencia SELECT.\n     */\n    public getQueryFields(): Vector<QueryField> {\n        return this.m_lstSelectFields;\n    }\n\n    /**\n     * Expone la lista de campos de una sentencia SELECT\n     *\n     * @return Devuelve la lista de campos de la sentencia SELECT.\n     */\n    public clearQueryFields(): void {\n        this.m_lstSelectFields = new Vector<QueryField>();\n    }\n\n    /**\n     * Adiciona un campo de sentencia SELECT a la lista de campos durante el\n     * parseo de una sentencia SELECT o durante la copia de un query original.\n     *\n     * @param FieldName  Nombre del campo en la base de datos.\n     * @param FieldAlias Alias del campo en la sentencia SELECT.\n     * @return Devuelve el nuevo campo recin adicionado o el que ya exista, si\n     * no es nuevo.\n     */\n    public AddField(FieldName: string, FieldAlias: string): QueryField {\n        let field: QueryField;\n\n        for (let i = 0; i < this.m_lstSelectFields.length; i++) {// Si ya existe, mu mal mu mal\n            let f = this.m_lstSelectFields[i];\n            if (f.getName().equals(FieldName) && f.getAlias().equals(FieldAlias)) {\n                return f;\n            }\n        }// Si ya existe, mu mal mu mal\n        // Si no existe, lo creamos\n        field = new QueryField(FieldName, FieldAlias);\n        this.m_lstSelectFields.push(field);\n        return field;\n    }\n\n    /**\n     * M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas. Devuelve\n     * un mensaje dada su clave.\n     *\n     * @param Key     Clave del mensaje.\n     * @param Default Mensaje por defecto por si no existe esta clave o no hay\n     *                holder.\n     */\n    private GetMessage(Key: string, Default: string): string {\n        if (this.m_messages == null) {\n            return Default;\n        }\n        return this.m_messages.GetMessage(Key, Default);\n    }\n\n    private m_keys: string[];\n\n    public getKeys(): string[] {\n        return this.m_keys;\n    }\n\n    public addkey(value: string): void {\n        if (this.m_keys == null)\n            this.m_keys = [];\n        this.m_keys.push(value);\n    }\n\n    public clearKeys(): void {\n        this.m_keys = [];\n    }\n    /**\n     * 20/02/2014 Luis: Si el SQL contiene frmulas o funciones debemos ejecutar directamente el SQL\n     * 09012014 Helper para devolver los campos en formato de android\n     *\n     * @param fields\n     * @return\n     */\n    // TODO: Esta es la estructura de Android, que no esta mal, pero hayq eu implementarla\n    //     public static ContentValues convertFieldsToContentValues(Hashtable<String, String> fields) {\n    //         if (fields == null) {\n    //             return null;\n    //         }\n    //         ContentValues values = new ContentValues();\n    //         Set<String> sAllKeys = fields.keySet();\n    //         for (String sKey : sAllKeys) {\n    //             String sValue = fields.get(sKey);\n    // //            if (sValue == null || NULL_VALUE.equals(sValue)) {\n    //             // 04/04/2019 Juan Carlos: El valor null puede venir en minsculas\n    //             if (sValue == null || NULL_VALUE.equalsIgnoreCase(sValue)) {\n    //                 values.putNull(sKey);\n    //                 continue;\n    //             }\n    //             if (checkIfNotFunctionValue(sValue)) {\n    //                 sValue = Utils.cleanStringValue(sValue).replace(\"''\", \"'\");\n    //                 values.put(sKey, sValue);\n    //                 continue;\n    //             }\n    //             return null;\n    //         }\n    //         return values;\n    //     }\n\n    // TODO ADD TAG: LUIS En debug desde ? En release desde 20/02/2014 Si el SQL contiene formulas o funciones debemos ejecutar directamente el SQL\n    public static checkIfNotFunctionValue(value: string): boolean {\n        if (value.startsWith(\"'\") && value.endsWith(\"'\")) {\n            return true;\n        }\n        try {\n            Number.parseFloat(value);\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n\n    /*\n     * Helper para quitar el where\n     */\n    public static getWhereOnlyFields(where: string): string {\n        if (TextUtils.isEmpty(where)) {\n            return \"\";\n        }\n\n        let clean = where.trim();\n        if (clean.substring(0, 6).compareToIgnoreCase(\"WHERE \") == 0) {\n            return clean.substring(6).trim();\n        }\n        return where;\n    }\n}","import Hashtable from \"../../Collections/HashMap/Hashtable\";\nimport Vector from \"../../Collections/Vector\";\nimport BufferedReader from \"../../Helpers/BufferedReader\";\nimport StringBuilder from \"../../Utils/StringBuilder\";\nimport TextUtils from \"../../Utils/TextUtils\";\nimport { Utils } from \"../../Utils/Utils\";\nimport CssParseException from \"./CssParseException\";\nimport XoneCssRule from \"./XoneCssRule\";\n\nenum ParseStates {\n    ExpectingSelector,\n    ExpectingCommentOpenComplete,\n    GettingComment,\n    ExpectingCommentClose,\n    GettingSelector,\n    ExpectingOpenBrace,\n    ExpectingRuleKey,\n    GettingRuleKey,\n    ExpectingRuleValue,\n    GettingRuleValue,\n};\n\nexport default class XoneCssParser {\n\n    public static PARCELABLE_VERSION = 2;\n    public static  BUNDLE_KEY_DATA = \"data\";\n    public static  BUNDLE_KEY_CRC = \"crc\";\n    private static  m_strValidChars = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789.-_\";\n\n    private m_strName=\"\";\n    private m_bundleRules: Hashtable<string,XoneCssRule>;\n    private m_bStrictMode=false;\n\n    /**\n     * Constructor de la clase para crearnos las cositas que nos hacen falta.\n     */\n    constructor(sName:string, is?: any, sEncoding?: string, bStrictMode?:boolean) { \n       this.m_strName = sName;\n        this.m_bStrictMode = bStrictMode;\n        this.m_bundleRules = new Hashtable<string,XoneCssRule>();\n        this.parse(new BufferedReader(is), sEncoding);\n    }\n\n    public getName():string {\n        return this.m_strName;\n    }\n\n    public isStrictMode() {\n        return this.m_bStrictMode;\n    }\n\n    /**\n     * F11092607: Tener en cuenta los separadores entre clave y valor en los CSS.\n     * Funcin para moverse al siguiente token ignorando separadores.\n     *\n     * @param line\n     * @param br\n     * @param startPos\n     * @return\n     * @throws IOException\n     */\n    private moveToNextToken(line:string, br: BufferedReader, startPos: number): string {\n        let k = startPos;\n        let ch = \"\";\n        while (null != line) {\n            let n = line.length;\n            while (k < n) {\n                ch = line.charAt(k);\n                switch (ch) {\n                    case '\\t':\n                    case ' ':\n                        k++;\n                        break;\n                    default:\n                        // Error\n                        return ch;\n                }\n            }\n            line = br.readLine();\n            k = 0;\n            ch = \"\";\n        }\n        return ch;\n    }\n\n    /**\n     * Carga el fichero que se le pasa como parmetro y parsea su contenido.\n     * 27/07/2018 Mejoras para lanzar errores de parseo descriptivos\n     *\n     * @param is        Stream origen de los datos, que en teora deberan proceder de un fichero\n     *                  CSS o de un nodo XML. Al terminar o lanzar una excepcin ser cerrado.\n     * @param sEncoding El charset usado para leer el fichero. Para evitar problemas, debera ser\n     *                  UTF-8 como indica el estndar\n     * @throws IOException\n     */\n    // private parse(is:any, sEncoding:string):void{\n    //     // Juan Carlos, respetar el atributo encoding en los CSS.\n    //     if (TextUtils.isEmpty(sEncoding)) {\n    //         sEncoding = \"ISO8859_1\";\n    //     }\n    //     InputStreamReader isr = null;\n    //     BufferedReader br = null;\n    //     try {\n    //         isr = new InputStreamReader(is, sEncoding);\n    //         br = new BufferedReader(isr);\n    //         parse(br);\n    //     } finally {\n    //         Utils.closeSafely(br, isr, is);\n    //     }\n    // }\n\n    private parse(br: BufferedReader, sEncoding?: string):void {\n        let strLine=\"\";\n        let parseState = ParseStates.ExpectingSelector;\n        let states = new Vector<ParseStates>();\n        let strSelector = Utils.EMPTY_STRING;\n        let strRuleKey = Utils.EMPTY_STRING;\n        let strRuleValue = Utils.EMPTY_STRING;\n        let cssRule:XoneCssRule = null;\n        let nLine = 0;\n        while (null != (strLine = br.readLine())) {\n            let nPosition = 0;\n            let nLineLength = strLine.length;\n            nLine++;\n            while (nPosition < nLineLength) {\n                let sCurrentCharacter = strLine.charAt(nPosition);\n                switch (parseState) {\n                    case ParseStates.ExpectingSelector:\n                        // No hay selector iniciado\n                        if (XoneCssParser.m_strValidChars.indexOf(sCurrentCharacter) != -1) {\n                            // Caracter vlido para iniciar selector\n                            parseState = ParseStates.GettingSelector;\n                            break;\n                        }\n                        // Si no hay selector iniciado podra ser un espacio\n                        switch (sCurrentCharacter) {\n                            case '\\t':\n                            case ' ':\n                                nPosition++;\n                                break;\n                            case '/':\n                                nPosition++;\n                                states.push(parseState);\n                                parseState = ParseStates.ExpectingCommentOpenComplete;\n                                break;\n                            default:\n                                // Error\n                                throw new CssParseException(this.getName(), nLine, strLine, \"Expected selector, got \\\"\" + sCurrentCharacter + \"\\\"\");\n                        }\n                        break;\n                    case ParseStates.ExpectingCommentOpenComplete:\n                        // Solo esperamos asterisco\n                        if (sCurrentCharacter != '*') {\n                            throw new CssParseException(this.getName(), nLine, strLine, \"Expected open comment asterisk, got \\\"\" + sCurrentCharacter + \"\\\"\");\n                        }\n                        nPosition++;\n                        parseState = ParseStates.GettingComment;\n                        break;\n                    case ParseStates.GettingComment:\n                        // Lo que viene es comentario\n                        if (sCurrentCharacter == '*') {\n                            parseState = ParseStates.ExpectingCommentClose;\n                        }\n                        // Nos cagamos en el comentario\n                        nPosition++;\n                        break;\n                    case ParseStates.ExpectingCommentClose:\n                        // Ver si termina el comentario\n                        if (sCurrentCharacter == '/') {\n                            // Comentario completo\n                            parseState = states.pop();\n                            nPosition++;\n                        } else {\n                            // De lo contrario el comentario no ha terminado\n                            parseState = ParseStates.GettingComment;\n                        }\n                        break;\n                    case ParseStates.GettingSelector:\n                        // Selector iniciado\n                        if (XoneCssParser.m_strValidChars.indexOf(sCurrentCharacter) != -1) {\n                            // Sumamos este\n                            strSelector += sCurrentCharacter;\n                            nPosition++;\n                            break;\n                        }\n                        switch (sCurrentCharacter) {\n                            case '\\t':\n                            case ' ':\n                                // Selector terminado\n                                nPosition++;\n                                parseState = ParseStates.ExpectingOpenBrace;\n                                break;\n                            case '{':\n                                // Selector terminado, regla iniciada\n                                nPosition++;\n                                parseState = ParseStates.ExpectingRuleKey;\n                                break;\n                            case '/':\n                                // Podra ser un comentario\n                                parseState = ParseStates.ExpectingOpenBrace;\n                                states.push(parseState);\n                                parseState = ParseStates.ExpectingCommentOpenComplete;\n                                nPosition++;\n                                break;\n                            case ':':\n                                // A12042502: Los selectores de CSS pueden estar tipificados.\n                                // Este caracter es vlido en los selectores...\n                                strSelector += sCurrentCharacter;\n                                nPosition++;\n                                break;\n                            default:\n                                // Error\n                                throw new CssParseException(this.getName(), nLine, strLine, \"Expected selector, got \\\"\" + sCurrentCharacter + \"\\\"\");\n                        }\n                        break;\n                    case ParseStates.ExpectingOpenBrace:\n                        // Esperando una llave\n                        switch (sCurrentCharacter) {\n                            case ' ':\n                            case '\\t':\n                                nPosition++;\n                                break;\n                            case '{':\n                                // Regla iniciada\n                                nPosition++;\n                                parseState = ParseStates.ExpectingRuleKey;\n                                break;\n                            case '/':\n                                // Podra ser un comentario\n                                parseState = ParseStates.ExpectingOpenBrace;\n                                states.push(parseState);\n                                parseState = ParseStates.ExpectingCommentOpenComplete;\n                                nPosition++;\n                                break;\n                            default:\n                                throw new CssParseException(this.getName(), nLine, strLine, \"Expected open brace character, got \\\"\" + sCurrentCharacter + \"\\\"\");\n                        }\n                        break;\n                    case ParseStates.ExpectingRuleKey:\n                        // Estamos esperando un inicio de clave de regla\n                        if (XoneCssParser.m_strValidChars.indexOf(sCurrentCharacter) != -1) {\n                            // Inicio de clave vlido\n                            strRuleKey += sCurrentCharacter;\n                            nPosition++;\n                            parseState = ParseStates.GettingRuleKey;\n                            break;\n                        }\n                        switch (sCurrentCharacter) {\n                            case '}':\n                                // Regla terminada?\n                                if (cssRule != null) {\n                                    this.m_bundleRules.put(strSelector, cssRule);\n                                    cssRule = null;\n                                }\n                                strSelector = strRuleKey = strRuleValue = \"\";\n                                nPosition++;\n                                // Estado esperando nueva definicin\n                                parseState = ParseStates.ExpectingSelector;\n                                break;\n                            case ' ':\n                            case '\\t':\n                                nPosition++;\n                                break;\n                            case '/':\n                                states.push(parseState);\n                                parseState = ParseStates.ExpectingCommentOpenComplete;\n                                nPosition++;\n                                break;\n                            default:\n                                throw new CssParseException(this.getName(), nLine, strLine, \"Expected new rule key character, got \\\"\" + sCurrentCharacter + \"\\\"\");\n                        }\n                        break;\n                    case ParseStates.GettingRuleKey:\n                        // Obteniendo clave de regla\n                        if (XoneCssParser.m_strValidChars.indexOf(sCurrentCharacter) != -1 && sCurrentCharacter != '.') {\n                            // Contamos\n                            strRuleKey += sCurrentCharacter;\n                            nPosition++;\n                            break;\n                        }\n                        // F11092607: Tener en cuenta los separadores entre clave y valor en los CSS.\n                        // Moverse al siguiente token ignorando separadores.\n                        sCurrentCharacter = this.moveToNextToken(strLine, br, nPosition);\n                        if (sCurrentCharacter != ':') {\n                            throw new CssParseException(this.getName(), nLine, strLine, \"Unexpected token while getting rule key, got\\\"\" + sCurrentCharacter + \"\\\"\");\n                        }\n                        // Terminada la clave\n                        parseState = ParseStates.ExpectingRuleValue;\n                        nPosition++;\n                        break;\n                    case ParseStates.ExpectingRuleValue:\n                        // Aqu tiene que empezar el valor ya\n                        switch (sCurrentCharacter) {\n                            case ';':\n                                throw new CssParseException(this.getName(), nLine, strLine, \"Unexpected blank value\");\n                            case '}':\n                                // 11/04/2019 Mostrar errores de CSS rotos\n                                throw new CssParseException(this.getName(), nLine, strLine, \"Unexpected end bracket value\");\n                        }\n                        // De lo contrario empieza el valor\n                        strRuleValue += sCurrentCharacter;\n                        nPosition++;\n                        parseState = ParseStates.GettingRuleValue;\n                        break;\n                    case ParseStates.GettingRuleValue:\n                        // Cualquier cosa es un valor\n                        if (sCurrentCharacter == ';') {\n                            // Valor completo\n                            if (cssRule == null) {\n                                cssRule = new XoneCssRule(strSelector);\n                            }\n                            cssRule.addRule(strRuleKey, strRuleValue);\n                            nPosition++;\n                            parseState = ParseStates.ExpectingRuleKey;\n                            strRuleKey = strRuleValue = \"\";\n                            break;\n                        } else if (sCurrentCharacter == '\\\\') {\n                            /*\n                             * Carcter de escape. Si es algo que reconozcamos, como los dos puntos,\n                             * sumamos el valor y nos saltamos 2 posiciones, no 1.\n                             */\n                            let sNextCharacter = strLine.charAt(nPosition + 1);\n                            if (sNextCharacter == ':') {\n                                strRuleValue += sNextCharacter;\n                                nPosition = nPosition + 2;\n                                break;\n                            }\n                            strRuleValue += sCurrentCharacter;\n                            nPosition++;\n                            break;\n                        } else if (sCurrentCharacter == ':') {\n                            if (this.m_bStrictMode) {\n                                let sbMessage = new StringBuilder(\"Missing semicolon value terminator.\");\n                                if (!TextUtils.isEmpty(strSelector)) {\n                                    sbMessage.append(\"\\nIn selector: \");\n                                    sbMessage.append(strSelector);\n                                }\n                                if (!TextUtils.isEmpty(strRuleKey)) {\n                                    sbMessage.append(\"\\nIn CSS rule: \");\n                                    sbMessage.append(strRuleKey);\n                                }\n                                throw new CssParseException(this.getName(), nLine, strLine, sbMessage.toString());\n                            }\n                        } else if (sCurrentCharacter == '}') {\n                            // 11/04/2019 Mostrar errores de CSS rotos\n                            if (this.m_bStrictMode) {\n                                let sbMessage = new StringBuilder(\"Unexpected end bracket found while getting rule value. Missing semicolon value terminator?\");\n                                if (!TextUtils.isEmpty(strSelector)) {\n                                    sbMessage.append(\"\\nIn selector: \");\n                                    sbMessage.append(strSelector);\n                                }\n                                if (!TextUtils.isEmpty(strRuleKey)) {\n                                    sbMessage.append(\"\\nIn CSS rule: \");\n                                    sbMessage.append(strRuleKey);\n                                }\n                                throw new CssParseException(this.getName(), nLine, strLine, sbMessage.toString());\n                            }\n                        }\n                        // Cualquier otra cosa, sumamos al valor\n                        strRuleValue += sCurrentCharacter;\n                        nPosition++;\n                        break;\n                    default:\n                        throw new CssParseException(this.getName(), nLine, strLine, \"Unexpected parse state: \" + parseState);\n                }\n            }\n        }\n    }\n\n    /**\n     * Dado el nombre de un selector devuelve la regla CSS que responde a dicho selector o NULL si\n     * no existe.\n     *\n     * @param strSelector\n     * @return\n     */\n    public  getRuleBySelector(strSelector:string):XoneCssRule {\n        return this.m_bundleRules.get(strSelector);\n    }\n\n    public addRule(strSelector:string, cssRule: XoneCssRule ) {\n        this.m_bundleRules.put(strSelector, cssRule);\n    }\n\n    // /**\n    //  * 26/07/2018 Juan Carlos\n    //  * Implementacin de parcelable para serializar este objeto a disco si queremos.\n    //  */\n    // public static final Creator<XoneCssParser> CREATOR = new this.Creator<XoneCssParser>() {\n    //     @NonNull\n    //     @Override\n    //     public XoneCssParser createFromParcel(Parcel source) {\n    //         return new XoneCssParser(source);\n    //     }\n\n    //     @NonNull\n    //     @Override\n    //     public XoneCssParser[] newArray(int nSize) {\n    //         return new XoneCssParser[nSize];\n    //     }\n    // };\n\n    // protected XoneCssParser(Parcel source) {\n    //     m_strName = source.readString();\n    //     m_bundleRules = source.readBundle(getClass().getClassLoader());\n    //     m_bStrictMode = source.readByte() != 0;\n    // }\n\n    // @Override\n    // public int describeContents() {\n    //     return 0;\n    // }\n\n    // @Override\n    // public void writeToParcel(Parcel destination, int nFlags) {\n    //     destination.writeString(m_strName);\n    //     destination.writeBundle(m_bundleRules);\n    //     destination.writeByte((byte) (m_bStrictMode ? 1 : 0));\n    // }\n}","export default class BufferedReader {\n\n    private m_pointer;\n    private m_lines;\n\n    /**\n     *\n     */\n    constructor(data: string=\"\") {\n        this.m_pointer=0;\n        this.m_lines=Array.from(data.replace(/\\r/gi,\"\").split('\\n'));    \n    }\n\n    readLine(): string {\n        if (this.m_pointer>=this.m_lines.length)\n            return null;\n        return this.m_lines[this.m_pointer++];\n    }\n\n}","import { Exception } from \"../../Exceptions/Exception\";\n\nexport default class CssParseException extends Exception {\n\n    /**\n     *\n     */\n    constructor(name: string, nLine: number, sLine: string, message: string) {\n        super(message);\n        \n    }\n}","import Hashtable from \"../../Collections/HashMap/Hashtable\";\n\nexport default class XoneCssRule {\n\n    private m_strName;\n    private m_bundleRules:Hashtable<string,string>;\n\n    constructor(sSelectorName:string) {\n        this.m_strName = sSelectorName;\n        this.m_bundleRules = new Hashtable<string,string>();\n    }\n\n    public getName() {\n        return this.m_strName;\n    }\n\n    /**\n     * El mtodo String.intern() nos ahorra bastante memoria aqu.\n     * TODO 26/07/2018 Juan Carlos\n     * Esto de internar las cadenas es horriblemente lento en algunos telfonos. Revisar.\n     * <p>\n     * Tag: Luis 1604201802\n     * Corregido un error en los valores de los css, que no pueden tener espacio. Se le hace trim()\n     *\n     * @param sRuleKey\n     * @param sRuleValue\n     */\n    public addRule(sRuleKey: string, sRuleValue:string) {\n        this.m_bundleRules.put(sRuleKey, sRuleValue.trim());\n    }\n\n    public getRuleValue(sRuleKey:string):string {\n        if (this.m_bundleRules.containsKey(sRuleKey)) {\n            return this.m_bundleRules.get(sRuleKey);\n        }\n        // No lo conejo\n        return null;\n    }\n\n    public deleteRule(sRuleKey: string):void {\n        if (this.m_bundleRules.containsKey(sRuleKey)) {\n            this.m_bundleRules.delete(sRuleKey);\n        }\n    }\n\n    public contains(sRuleKey:string): boolean {\n        return this.m_bundleRules.containsKey(sRuleKey);\n    }\n\n    // /**\n    //  * TODO 26/07/2018 Juan Carlos\n    //  * Implementacin de parcelable para serializar este objeto a disco si queremos.\n    //  */\n    // public static final Creator<XoneCssRule> CREATOR = new Creator<XoneCssRule>() {\n    //     @Override\n    //     public XoneCssRule createFromParcel(@NonNull Parcel source) {\n    //         return new XoneCssRule(source);\n    //     }\n\n    //     @Override\n    //     public XoneCssRule[] newArray(int nSize) {\n    //         return new XoneCssRule[nSize];\n    //     }\n    // };\n\n    // protected XoneCssRule(@NonNull Parcel source) {\n    //     m_strName = source.readString();\n    //     m_bundleRules = source.readBundle(getClass().getClassLoader());\n    // }\n\n    // @Override\n    // public int describeContents() {\n    //     return 0;\n    // }\n\n    // @Override\n    // public void writeToParcel(Parcel destination, int nFlags) {\n    //     destination.writeString(m_strName);\n    //     destination.writeBundle(m_bundleRules);\n    // }\n\n}","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Coll.vue?vue&type=style&index=0&id=322f37a0&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Image.vue?vue&type=style&index=0&id=38cafe8b&scoped=true&lang=css\"","import { type } from \"os\";\n\nexport default class Calendar {\n    setTime(d: Date) {\n        this.m_date=d;\n    }\n    \n    public static getInstance() {\n\t\treturn new Calendar();\n\t}\n    \n    public static ALL_STYLES = 0;\n    public static AM = 0;\n    public static AM_PM = 9;\n    public static APRIL = 3;\n    public static AUGUST = 7;\n    public static DATE = 5;\n    public static DAY_OF_MONTH = 5;\n    public static DAY_OF_WEEK = 7;\n    public static DAY_OF_WEEK_IN_MONTH = 8;\n    public static DAY_OF_YEAR = 6;\n    public static DECEMBER = 11;\n    public static DST_OFFSET = 16;\n    public static ERA = 0;\n    public static FEBRUARY = 1;\n    public static FIELD_COUNT = 17;\n    public static FRIDAY = 6;\n    public static HOUR = 10;\n    public static HOUR_OF_DAY = 11;\n    public static JANUARY = 0;\n    public static JULY = 6;\n    public static JUNE = 5;\n    public static LONG = 2;\n    public static LONG_FORMAT = 2;\n    public static LONG_STANDALONE = 32770;\n    public static MARCH = 2;\n    public static MAY = 4;\n    public static MILLISECOND = 14;\n    public static MINUTE = 12;\n    public static MONDAY = 2;\n    public static MONTH = 2;\n    public static NARROW_FORMAT = 4;\n    public static NARROW_STANDALONE = 32772;\n    public static NOVEMBER = 10;\n    public static OCTOBER = 9;\n    public static PM = 1;\n    public static SATURDAY = 7;\n    public static SECOND = 13;\n    public static SEPTEMBER = 8;\n    public static SHORT = 1;\n    public static SHORT_FORMAT = 1;\n    public static SHORT_STANDALONE = 32769;\n    public static SUNDAY = 1;\n    public static THURSDAY = 5;\n    public static TUESDAY = 3;\n    public static UNDECIMBER = 12;\n    public static WEDNESDAY = 4;\n    public static WEEK_OF_MONTH = 4;\n    public static WEEK_OF_YEAR = 3;\n    public static YEAR = 1;\n    public static ZONE_OFFSET = 15;\n\n    private m_date: Date;\n\n    /**\n     *\n     */\n    constructor(date?: Date | number) {\n        if (!date)\n            date=new Date();\n        if (typeof date == 'number') {\n            let tmp=new Date();\n            tmp.setTime(date);\n            date=tmp;\n        }\n        this.m_date=date;\n        \n    }\n\n    public get(Value: number): number {\n        switch (Value) {\n            case Calendar.DAY_OF_MONTH:\n                return this.m_date.getDate();\n            case Calendar.MONTH:\n                return this.m_date.getMonth()+1;\n            case Calendar.YEAR:\n                return this.m_date.getFullYear();\n        \n            default:\n                return 0;\n        }\n    }\n\n    public getTime():Date {\n        return this.m_date;\n    }\n\n    public toString(): string {\n        return this.m_date.toDateString();\n    }\n}","// import * as fs from \"fs\";\nimport { FileManagerOnline } from \"./FileManager\";\nlet fs;\nconst fileManagerOnline = new FileManagerOnline();\nexport default class FileLoaderBrowser {\n  LoadFile(FileName, bIsCryptoFile) {\n    try {\n      const res = fileManagerOnline.readFileSync(FileName);\n      localStorage.setItem(FileName, res);\n      // return fs.readFileSync(FileName);\n      // return this.readFileSync(FileName);\n      return res;\n    } catch {\n      return localStorage.getItem(FileName);\n    }\n  }\n  FileExist(FileName, bIsCryptoFile) {\n    return fs.existsSync(FileName);\n  }\n  getAbsolutePath(FileName) {\n    return FileName;\n  }\n  getIncludeFilePath(sPath, bIsCryptoFile) {\n    throw new Error(\"Method not implemented.\");\n  }\n}\n\n//# sourceMappingURL=FileLoaderBrowser.js.map\n","<template>\n\t<!-- \n\t----\n\tFixed Top \n\t----\n\t-->\n\t<div ref=\"fixedTopElement\" :id=\"`fixed-top-${breadcrumb.id}`\" class=\"xone-fixed\" style=\"display: bock\" v-if=\"groups.fixedTop.length !== 0\">\n\t\t<Container\n\t\t\tv-for=\"fixed in groups.fixedTop\"\n\t\t\t:key=\"`fixed-top-${fixed.attributes.name}`\"\n\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t:control=\"fixed\"\n\t\t\t:containerWidth=\"containerWidth\"\n\t\t\t:containerHeight=\"containerHeight\"\n\t\t></Container>\n\t</div>\n\t<!-- \n\t----\n\tGroups\n\t----\n\t-->\n\t<Groups v-if=\"!attributes.noTab\" :attributes=\"attributes\" :groups=\"groups.tabs\" @onHeightChanged=\"onGroupsHeaderHeightChanged\"></Groups>\n\n\t<div\n\t\tclass=\"xone-groups-content-box\"\n\t\t:style=\"{\n\t\t\t//position: groups.drawerLeft.length !== 0 ? 'absolute' : '',\n\t\t\tmaxHeight: contentElementHeight && `${contentElementHeight}px`,\n\t\t\toverflow: drawers.overflow,\n\t\t}\"\n\t>\n\t\t<!-- \n\t\t----\n\t\tGroups content\n\t\t----\n\t\t-->\n\t\t<div\n\t\t\tref=\"contentElement\"\n\t\t\tclass=\"xone-group\"\n\t\t\t:style=\"{\n\t\t\t\tmarginLeft: null,\n\t\t\t\tmaxHeight: contentElementHeight && `${contentElementHeight - groupsHeaderHeight}px`,\n\t\t\t}\"\n\t\t>\n\t\t\t<Container\n\t\t\t\t:class=\"('tabcontent', groupAnimation)\"\n\t\t\t\tv-for=\"group in groups.tabs\"\n\t\t\t\t:key=\"`group-${group.attributes.name}`\"\n\t\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t\t:control=\"group\"\n\t\t\t\t:containerWidth=\"containerWidth\"\n\t\t\t\t:containerHeight=\"contentElementHeight - groupsHeaderHeight\"\n\t\t\t></Container>\n\t\t</div>\n\t\t<!-- \n\t\t----\n\t\tDrawers\n\t\t----\n\t\t-->\n\t\t<!-- Close Drawers -->\n\t\t<div\n\t\t\tclass=\"xone-close-drawer\"\n\t\t\t:class=\"[drawers.showLeft || drawers.showRight ? 'fade-in' : 'fade-out']\"\n\t\t\tv-if=\"drawers.showLeft || drawers.showRight\"\n\t\t\t@click=\"drawers.closeDrawers()\"\n\t\t></div>\n\t\t<!-- Drawer Left -->\n\t\t<Container\n\t\t\tv-if=\"groups.drawerLeft.length !== 0\"\n\t\t\t:id=\"`xone-sidenav-left-${breadcrumb.id}`\"\n\t\t\tclass=\"xone-sidenav-left\"\n\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t:control=\"groups.drawerLeft[0]\"\n\t\t\t:containerWidth=\"containerWidth\"\n\t\t\t:containerHeight=\"containerHeight\"\n\t\t\t:style=\"{\n\t\t\t\topacity: drawers.showLeft ? 1 : 0,\n\t\t\t\tmarginLeft: `${drawers.showLeft ? 0 : -drawers.leftWidth}px`,\n\t\t\t\tpointerEvents: drawers.showLeft ? 'all' : 'none',\n\t\t\t}\"\n\t\t></Container>\n\t\t<!-- Drawer Right -->\n\t\t<Container\n\t\t\tv-if=\"groups.drawerRight.length !== 0\"\n\t\t\t:id=\"`xone-sidenav-right-${breadcrumb.id}`\"\n\t\t\tclass=\"xone-sidenav-right\"\n\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t:control=\"groups.drawerRight[0]\"\n\t\t\t:containerWidth=\"containerWidth\"\n\t\t\t:containerHeight=\"containerHeight\"\n\t\t\t:style=\"{\n\t\t\t\topacity: drawers.showRight ? 1 : 0,\n\t\t\t\tmarginRight: `${drawers.showRight ? 0 : -drawers.rightWidth}px`,\n\t\t\t\tpointerEvents: drawers.showRight ? 'all' : 'none',\n\t\t\t}\"\n\t\t></Container>\n\t</div>\n\t<!--\n\t----\n\tFixed bottom\n\t----\n\t-->\n\t<div ref=\"fixedBottomElement\" :id=\"`fixed-bottom-${breadcrumb.id}`\" class=\"xone-fixed\" v-if=\"groups.fixedBottom.length !== 0\">\n\t\t<Container\n\t\t\tv-for=\"fixed in groups.fixedBottom\"\n\t\t\t:key=\"`fixed-bottom-${fixed.attributes.name}`\"\n\t\t\t:xoneDataObject=\"xoneDataObject\"\n\t\t\t:control=\"fixed\"\n\t\t\t:containerWidth=\"containerWidth\"\n\t\t\t:containerHeight=\"containerHeight\"\n\t\t></Container>\n\t</div>\n</template>\n\n<script>\n// vue\nimport {\n\tcomputed,\n\tinject,\n\tonBeforeMount,\n\tonMounted,\n\tonUnmounted,\n\tprovide,\n\treactive,\n\tref,\n\tRef,\n\twatchEffect,\n\tComputedRef,\n\twatch,\n\tPropType,\n\tonBeforeUnmount,\n} from \"vue\";\n// components\nimport Groups from \"./Groups.vue\";\n// composables\nimport { SwipeHandler } from \"../composables/SwipeHandler\";\nimport AppDataHandler, { Breadcrumb, Objectinfo } from \"../composables/AppDataHandler\";\nimport {\n\tgetCollGroups,\n\tshowGroup,\n\tslideGroup,\n\tgetDrawersWidth,\n\twatchContentElementSize,\n\tCollGroups,\n} from \"../composables/helperFunctions/GroupsHelper\";\nimport { xoneAttributesHandler, ContainerAttributes } from \"../composables/XoneAttributesHandler\";\nimport xoneUI, { setShowGroupCallback, setXoneDataObject } from \"../composables/XoneUI\";\nimport { XoneDataObject } from \"../composables/appData/core/XoneDataObject\";\nimport { XoneView } from \"../composables/XoneViewsHandler\";\n\nexport default {\n\tprops: {\n\t\tbreadcrumb: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\tisLayout: { type: Boolean, default: false },\n\t\t/** @type {PropType<Objectinfo>} */\n\t\tobjectInfo: { type: Object, default: null },\n\t},\n\tcomponents: {\n\t\tGroups,\n\t},\n\tsetup(props) {\n\t\t/**\n\t\t * Get XoneDataObject\n\t\t * @type {XoneDataObject}\n\t\t */\n\t\tconst xoneDataObject = AppDataHandler.getDataObject(props.breadcrumb.id);\n\n\t\t// Do Model Reactive\n\t\txoneDataObject.doModelReactive();\n\n\t\t/**\n\t\t * Last breadcrumb in stack\n\t\t * @type {ComputedRef<Breadcrumb>}\n\t\t */\n\t\tconst lastBreadcrumb = inject(\"lastBreadcrumb\");\n\n\t\t// Provide breadcrumbId info to child components\n\t\tprovide(\"breadcrumbId\", props.breadcrumb.id);\n\n\t\t/**\n\t\t * Layout model\n\t\t * @type {Ref<Object>}\n\t\t */\n\t\tconst layout = ref();\n\n\t\t/**\n\t\t * Viewport size conditions sm / md / lg\n\t\t * @type {Ref<string>}\n\t\t */\n\t\tconst sizeConditions = inject(\"sizeConditions\");\n\n\t\t/**\n\t\t * orientation vertical / horizontal\n\t\t * @type {Ref<string>}\n\t\t */\n\t\tconst orientation = inject(\"orientation\");\n\n\t\tconst getLayoutAsync = async () => {\n\t\t\t// Get Layout\n\t\t\tlayout.value = await xoneDataObject.getLayoutAsync();\n\t\t\txoneDataObject.setLayout(layout.value);\n\n\t\t\t//\n\t\t\t// Execute onvisualconditionschange\n\t\t\txoneDataObject.ExecuteNode(\"onvisualconditionschange\", sizeConditions.value, orientation.value).catch(console.error);\n\t\t};\n\n\t\tlayout.value = xoneDataObject.getLayout();\n\t\txoneDataObject.setLayout(layout.value);\n\n\t\t// Change size Conditions\n\t\twatch(\n\t\t\t() => sizeConditions.value,\n\t\t\t() => getLayoutAsync()\n\t\t);\n\n\t\t// watch(\n\t\t// \t() => orientation.value,\n\t\t// \t() => getLayoutAsync()\n\t\t// );\n\n\t\t/**\n\t\t * Collection attributes\n\t\t * @type {ComputedRef<ContainerAttributes>}\n\t\t */\n\t\tconst attributes = computed(() => xoneAttributesHandler.getContainerAttributes(layout.value.attributes));\n\n\t\tconst isBeforeEditExecuted = ref(false);\n\t\tprovide(\"isBeforeEditExecuted\", isBeforeEditExecuted);\n\n\t\t// Execute node before-edit\n\t\tonBeforeMount(() =>\n\t\t\txoneDataObject\n\t\t\t\t.ExecuteNode(\"before-edit\")\n\t\t\t\t.catch(console.error)\n\t\t\t\t.finally(() => (isBeforeEditExecuted.value = true))\n\t\t);\n\n\t\t// onBeforeUnmount(() => {\n\t\t// \txoneDataObject\n\t\t// \t\t.ExecuteNode(\"onback\")\n\t\t// \t\t.catch(console.error)\n\t\t// \t\t.finally(() => console.log(xoneDataObject));\n\t\t// });\n\n\t\t// Execute node after-edit\n\t\tonMounted(async () => {\n\t\t\txoneDataObject.ExecuteNode(\"onvisualconditionschange\", sizeConditions.value, orientation.value).catch(console.error);\n\t\t\txoneUI.hideLoader();\n\t\t\twhile (!isBeforeEditExecuted.value) await new Promise((resolve) => setTimeout(() => resolve(), 5));\n\t\t\txoneDataObject.ExecuteNode(\"after-edit\").catch(console.error);\n\t\t});\n\n\t\t//\n\t\t// Manage coll groups\n\n\t\t/**\n\t\t * Groups\n\t\t * @type {ComputedRef<CollGroups>}\n\t\t */\n\t\tconst groups = computed(() => getCollGroups(layout.value?.controls));\n\n\t\t/**\n\t\t * Active Group\n\t\t * @type {Ref<string>}\n\t\t */\n\t\tconst activeGroup = ref(groups.value.tabs.length !== 0 && groups.value.tabs[0].attributes.id);\n\n\t\tconst changeGroup = (id, isToggle = false, isHide = false) => showGroup(id, groups.value, drawers, activeGroup, groupAnimation, isToggle, isHide);\n\n\t\t/**\n\t\t * Window Size\n\t\t * @type {{containerWidth: Ref<number>|ComputedRef<number>, containerHeight: Ref<number>|ComputedRef<number>}}\n\t\t */\n\t\tconst { containerWidth, containerHeight } = inject(\"containerSize\");\n\n\t\t/**\n\t\t * Group tab content element\n\t\t * @type {Ref<number>}\n\t\t */\n\t\tconst contentElementHeight = ref(containerWidth.value);\n\n\t\tconst fixedTopElement = ref();\n\t\tconst fixedBottomElement = ref();\n\n\t\t// Watch contents element height changes\n\t\twatchContentElementSize(contentElementHeight, containerHeight, containerWidth, fixedTopElement, fixedBottomElement, props.breadcrumb.id);\n\n\t\t/**\n\t\t * xone View\n\t\t * @type {XoneView}\n\t\t */\n\t\tconst xoneView = new XoneView(xoneDataObject);\n\t\txoneView.showGroup = (id) => changeGroup(id);\n\t\txoneView.hideGroup = (id) => changeGroup(id);\n\t\txoneView.toggleGroup = (id) => changeGroup(id, true);\n\n\t\tprovide(\"xoneView\", xoneView);\n\n\t\t// Current XoneDataObject focused\n\t\twatchEffect(() => {\n\t\t\tif (props.breadcrumb.id === lastBreadcrumb.value?.id) {\n\t\t\t\t// Send changeGroup to XoneUI showGroup method\n\t\t\t\tsetShowGroupCallback(changeGroup);\n\t\t\t\t// Send refresh items\n\t\t\t\tsetXoneDataObject(xoneDataObject);\n\t\t\t}\n\t\t});\n\n\t\t// Provide groupHandler to child components\n\t\tprovide(\"groupHandler\", {\n\t\t\t// active group\n\t\t\tactiveGroup: activeGroup,\n\t\t\t// change group callback function\n\t\t\tchangeGroup,\n\t\t});\n\n\t\t/**\n\t\t * Group transition animation\n\t\t * @type {Ref<string>}\n\t\t */\n\t\tconst groupAnimation = ref(\"\");\n\n\t\t/**\n\t\t * contentElement\n\t\t * @type {Ref<HTMLElement>}\n\t\t */\n\t\tconst contentElement = ref();\n\t\t/**\n\t\t * Change current group by swipe\n\t\t * @type {SwipeHandler}\n\t\t */\n\t\tlet swipeHandler;\n\t\t// Initialize group swipe handler\n\t\tonMounted(() => {\n\t\t\tif (!attributes.value.groupSwipe) return;\n\t\t\tswipeHandler = new SwipeHandler(\n\t\t\t\t// swipe group callback function\n\t\t\t\t(step) => slideGroup(step, groups.value, activeGroup, groupAnimation)\n\t\t\t);\n\t\t\tswipeHandler.init(contentElement.value);\n\t\t});\n\t\t// clear group swipe handler\n\t\tonUnmounted(() => swipeHandler?.clear());\n\n\t\t/**\n\t\t * drawers\n\t\t */\n\t\tconst drawers = reactive({\n\t\t\tleftWidth: 0,\n\t\t\trightWidth: 0,\n\t\t\tshowLeft: false,\n\t\t\tshowRight: false,\n\t\t\toverflow: \"hidden\",\n\t\t\tcloseDrawers: () => {\n\t\t\t\tdrawers.showLeft = false;\n\t\t\t\tdrawers.showRight = false;\n\t\t\t},\n\t\t\tcurrentWindowWidth: containerWidth.value,\n\t\t});\n\n\t\t// Get drawers width\n\t\tonMounted(() => getDrawersWidth(drawers, containerWidth, props.breadcrumb.id));\n\n\t\t// Provide object info\n\t\tprovide(\"objectInfo\", props.objectInfo || { isContents: false });\n\n\t\tconst groupsHeaderHeight = ref(0);\n\n\t\tconst onGroupsHeaderHeightChanged = (value) => (groupsHeaderHeight.value = value);\n\n\t\treturn {\n\t\t\tattributes,\n\t\t\tgroups,\n\t\t\tdrawers,\n\t\t\tgroupAnimation,\n\t\t\tcontainerWidth,\n\t\t\tcontainerHeight,\n\t\t\txoneDataObject,\n\t\t\tfixedTopElement,\n\t\t\tfixedBottomElement,\n\t\t\tcontentElementHeight,\n\t\t\tcontentElement,\n\t\t\tonGroupsHeaderHeightChanged,\n\t\t\tgroupsHeaderHeight,\n\t\t};\n\t},\n};\n</script>\n\n<style scoped>\n.xone-fixed {\n\tdisplay: block;\n}\n\n.xone-groups-content-box {\n\twidth: var(--app-width);\n\tposition: relative;\n\tdisplay: flex;\n\t/* overflow: hidden; */\n\toverflow: hidden;\n\tflex-grow: 1;\n\tflex-shrink: 1;\n}\n\n.xone-close-drawer {\n\tz-index: 999;\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100vw;\n\theight: 100vh;\n\tbackground-color: black;\n\tpointer-events: all;\n}\n\n.fade-in {\n\tanimation: fadeIn05 0.3s;\n\topacity: 0.5;\n}\n\n.fade-out {\n\tanimation: fadeOut05 0.3s;\n\topacity: 0;\n}\n\n.xone-group {\n\tdisplay: flex;\n\tflex-direction: row;\n\tflex-shrink: 0;\n\tflex-grow: 1;\n\toverflow: hidden;\n\theight: auto;\n\ttransition: opacity 0s, margin-left 0.3s, margin-right 0.3s;\n}\n\n.xone-sidenav-left {\n\tz-index: 999;\n\tposition: absolute;\n\tflex-shrink: 0;\n\ttop: auto;\n\tleft: 0;\n\twidth: auto;\n\tpointer-events: all;\n\topacity: 0;\n\ttransition: all 0.3s;\n\t/* box-shadow: 0 0 10px 2px rgba(0, 0, 0, 0.2), 0 0px 10px rgba(0, 0, 0, 0.24); */\n}\n\n.xone-sidenav-right {\n\tz-index: 999;\n\tposition: absolute;\n\tflex-shrink: 0;\n\ttop: auto;\n\tright: 0;\n\twidth: auto;\n\tpointer-events: all;\n\topacity: 0;\n\ttransition: all 0.3s;\n\t/* box-shadow: 0 0 10px 2px rgba(0, 0, 0, 0.2), 0 0px 10px rgba(0, 0, 0, 0.24); */\n}\n\n/* Change group animations */\n.slide-left {\n\tanimation: slideLeft 0.2s; /* ease-out */\n}\n\n.slide-right {\n\tanimation: slideRight 0.2s; /*ease-out*/\n}\n\n@keyframes fadeIn05 {\n\tfrom {\n\t\topacity: 0;\n\t}\n\tto {\n\t\topacity: 0.5;\n\t}\n}\n\n@-webkit-keyframes fadeIn05 {\n\tfrom {\n\t\topacity: 0;\n\t}\n\tto {\n\t\topacity: 0.5;\n\t}\n}\n</style>\n","<template>\n\t<div\n\t\tclass=\"tab\"\n\t\tref=\"groupsElement\"\n\t\t:style=\"{\n\t\t\t// BackgroundColor\n\t\t\tbackgroundColor: attributes.tabBgColor,\n\t\t}\"\n\t>\n\t\t<button\n\t\t\t:class=\"['tablinks', activeGroup === group.attributes.id && 'activeGroup']\"\n\t\t\tv-for=\"group in groups\"\n\t\t\t:key=\"`grp-btn-${group.attributes.id}`\"\n\t\t\t@click=\"changeGroup(group.attributes.id)\"\n\t\t\t:style=\"{\n\t\t\t\t// Variables\n\t\t\t\t'--text-color': attributes.tabForecolor,\n\t\t\t\t'--selected-text-color': attributes.tabSelectedForecolor,\n\t\t\t\t// Padding\n\t\t\t\tpaddingTop: attributes.tabPaddings.top,\n\t\t\t\tpaddingRight: attributes.tabPaddings.right,\n\t\t\t\tpaddingBottom: attributes.tabPaddings.bottom,\n\t\t\t\tpaddingLeft: attributes.tabPaddings.left,\n\t\t\t\t// FontSize\n\t\t\t\tfontSize: attributes.tabFontSize,\n\t\t\t}\"\n\t\t>\n\t\t\t{{ group.attributes.name }}\n\t\t</button>\n\t</div>\n</template>\n\n<script>\nimport { inject, nextTick, ref, watch } from \"vue\";\n\nexport default {\n\tname: \"Group\",\n\n\tprops: {\n\t\tattributes: { type: Object, required: true },\n\t\tgroups: {\n\t\t\ttype: Array,\n\t\t\tdefault: new Array(),\n\t\t},\n\t\tcontainerHeight: { type: Number, default: 0 },\n\t},\n\n\temits: [\"onHeightChanged\"],\n\n\tsetup(props, context) {\n\t\t/** @type {{activeGroup: Ref<string>, changeGroup: Function}} */\n\t\tconst { activeGroup, changeGroup } = inject(\"groupHandler\");\n\n\t\t/** @type {Ref<HTMLElement>} */\n\t\tconst groupsElement = ref();\n\n\t\tnextTick(() => context.emit(\"onHeightChanged\", groupsElement.value?.clientHeight || 0));\n\n\t\twatch(\n\t\t\t() => props.containerHeight,\n\t\t\tasync () => {\n\t\t\t\tawait nextTick();\n\t\t\t\tcontext.emit(\"onHeightChanged\", groupsElement.value?.clientHeight || 0);\n\t\t\t}\n\t\t);\n\n\t\treturn { activeGroup, changeGroup, groupsElement };\n\t},\n};\n</script>\n\n<style scoped>\n/* Style the tab */\n.tab {\n\toverflow: hidden;\n\t/* border: 1px solid #ccc; */\n\tborder-top: none;\n\tborder-right: none;\n\tborder-left: none;\n\tdisplay: flex;\n\toverflow-x: auto;\n\tflex-shrink: 0;\n}\n\n/* Style the buttons inside the tab */\n.tab button {\n\tbackground-color: inherit;\n\tcolor: var(--text-color);\n\tborder: none;\n\toutline: none;\n\tcursor: pointer;\n\tpadding: 7px 8px;\n\ttransition: 0.3s;\n\tfont-size: 17px;\n\tflex-shrink: 0;\n\tbox-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\t-webkit-box-sizing: border-box;\n}\n\n/* Change background color of buttons on hover */\n.tab button:hover {\n\tcolor: black;\n\t/* border-bottom: 1px solid black; */\n}\n\n/* Create an activeGroup/current tablink class */\n.tab button.activeGroup {\n\tcolor: var(--selected-text-color);\n\t/* border-bottom: 1px solid var(--selected-text-color); */\n}\n</style>\n","import { render } from \"./Groups.vue?vue&type=template&id=6ef7afb2&scoped=true\"\nimport script from \"./Groups.vue?vue&type=script&lang=js\"\nexport * from \"./Groups.vue?vue&type=script&lang=js\"\n\nimport \"./Groups.vue?vue&type=style&index=0&id=6ef7afb2&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6ef7afb2\"]])\n\nexport default __exports__","import { watchEffect, Ref, watch, nextTick, onMounted, inject } from \"vue\";\nimport { xoneAttributesHandler } from \"../XoneAttributesHandler\";\n\n/**\n * @typedef {Object} CollGroups\n * @property {Array} tabs\n * @property {Array} fixedTop\n * @property {Array} fixedBottom\n * @property {Array} drawerLeft\n * @property {Array} drawerRight\n */\n\n/**\n * Get coll groups\n * @param {Array} controls\n * @return {CollGroups}\n */\nexport const getCollGroups = (controls) => {\n\t// Tabs\n\treturn {\n\t\ttabs: controls\n\t\t\t?.filter((e) => {\n\t\t\t\tconst containerAttributes = xoneAttributesHandler.getContainerAttributes(e.attributes);\n\t\t\t\treturn e.attributes.node === \"group\" && !containerAttributes.fixed && !containerAttributes.drawerOrientation;\n\t\t\t})\n\t\t\t.filter((e) => e.controls?.length !== 0),\n\n\t\t// Fixed top\n\t\tfixedTop: controls\n\t\t\t?.filter((e) => {\n\t\t\t\tconst containerAttributes = xoneAttributesHandler.getContainerAttributes(e.attributes);\n\t\t\t\treturn e.attributes.node === \"group\" && containerAttributes.fixed && containerAttributes.orientation === \"top\";\n\t\t\t})\n\t\t\t.filter((e) => e.controls?.length !== 0),\n\n\t\t// Fixed bottom\n\t\tfixedBottom: controls\n\t\t\t?.filter((e) => {\n\t\t\t\tconst containerAttributes = xoneAttributesHandler.getContainerAttributes(e.attributes);\n\t\t\t\treturn e.attributes.node === \"group\" && containerAttributes.fixed && containerAttributes.orientation === \"bottom\";\n\t\t\t})\n\t\t\t.filter((e) => e.controls?.length !== 0),\n\n\t\t// Drawer left\n\t\tdrawerLeft: controls\n\t\t\t?.filter((e) => {\n\t\t\t\tconst containerAttributes = xoneAttributesHandler.getContainerAttributes(e.attributes);\n\t\t\t\treturn e.attributes.node === \"group\" && !containerAttributes.fixed && containerAttributes.drawerOrientation === \"left\";\n\t\t\t})\n\t\t\t.filter((e) => e.controls?.length !== 0),\n\n\t\t// Drawer right\n\t\tdrawerRight: controls\n\t\t\t?.filter((e) => {\n\t\t\t\tconst containerAttributes = xoneAttributesHandler.getContainerAttributes(e.attributes);\n\t\t\t\treturn e.attributes.node === \"group\" && !containerAttributes.fixed && containerAttributes.drawerOrientation === \"right\";\n\t\t\t})\n\t\t\t.filter((e) => e.controls?.length !== 0),\n\t};\n};\n\n/**\n * Change group | Open / Close drawer\n * @param {String} id\n * @param {Object} groups\n * @param {Object} drawers\n * @param {Ref<string>} activeGroup\n * @param {Ref<string>} groupAnimation\n * @param {boolean} [isToggle]\n * @param {boolean} [isToggle]\n */\nexport const showGroup = (id, groups, drawers, activeGroup, groupAnimation, isToggle = false, isHide = false) => {\n\t// Tabs\n\tconst tabGroup = groups.tabs.find((/** @type {{attributes: Object}} */ e) => e.attributes.id === id);\n\tif (tabGroup) {\n\t\tgroupAnimation.value = Number(activeGroup.value) === Number(id) ? \"\" : (Number(activeGroup.value) > Number(id) && \"slide-right\") || \"slide-left\";\n\t\tsetTimeout(() => (groupAnimation.value = \"\"), 250);\n\t\tactiveGroup.value = id;\n\t\tdocument.getElementById(\"content\")?.scroll(0, 0);\n\t\treturn;\n\t}\n\t// Drawer left\n\tconst leftDrawerGroup = groups.drawerLeft.find((/** @type {*} */ e) => e.attributes.id === id);\n\tif (leftDrawerGroup) {\n\t\tdrawers.showRight = false;\n\t\tif (isHide) drawers.showLeft = false;\n\t\telse if (drawers.showLeft || (isToggle && drawers.showLeft)) {\n\t\t\tdrawers.showLeft = false;\n\t\t\t// setTimeout(() => (drawers.overflow = \"hidden\"), 250);\n\t\t} else {\n\t\t\t// drawers.overflow = \"visible\";\n\t\t\tdrawers.showLeft = true;\n\t\t}\n\t\treturn;\n\t}\n\t// Drawer right\n\tconst rightDrawerGroup = groups.drawerRight.find((/** @type {*} */ e) => e.attributes.id === id);\n\tif (rightDrawerGroup) {\n\t\tdrawers.showLeft = false;\n\t\tif (isHide) drawers.showRight = false;\n\t\telse if (drawers.showRight || (isToggle && drawers.showRight)) {\n\t\t\tdrawers.showRight = false;\n\t\t\t// setTimeout(() => (drawers.overflow = \"hidden\"), 250);\n\t\t} else {\n\t\t\t// drawers.overflow = \"visible\";\n\t\t\tdrawers.showRight = true;\n\t\t}\n\t\treturn;\n\t}\n};\n\n/**\n * Slide group\n * @param {number} step\n * @param {Object} groups\n * @param {Ref<string>} activeGroup\n * @param {Ref<string>} groupAnimation\n */\nexport const slideGroup = (step, groups, activeGroup, groupAnimation) => {\n\tconst currentGroup = groups.tabs.find((/** @type {*} */ e) => e.attributes.id === activeGroup.value);\n\tif (!currentGroup) return;\n\tconst groupIndex = groups.tabs.indexOf(currentGroup);\n\tconst newGroup = groups.tabs[groupIndex + step];\n\tif (!newGroup) return;\n\tgroupAnimation.value = step < 0 ? \"slide-right\" : \"slide-left\";\n\tsetTimeout(() => (groupAnimation.value = \"\"), 250);\n\tactiveGroup.value = newGroup.attributes.id;\n};\n\n/**\n * Get width from drawer elements\n * @param {Object} drawers\n * @param {Ref<number>} containerWidth\n * @param {String} breadcrumbId\n */\nexport const getDrawersWidth = (drawers, containerWidth, breadcrumbId) => {\n\t{\n\t\t/**\n\t\t * drawer left element\n\t\t * @type {HTMLElement}\n\t\t */\n\t\tconst drawerLeftElement = document.getElementById(`xone-sidenav-left-${breadcrumbId}`);\n\t\t/**\n\t\t * drawer right element\n\t\t * @type {HTMLElement}\n\t\t */\n\t\tconst drawerRightElement = document.getElementById(`xone-sidenav-right-${breadcrumbId}`);\n\t\tconst setDrawersWidth = () => {\n\t\t\tdrawers.leftWidth = drawerLeftElement?.offsetWidth;\n\t\t\tdrawers.rightWidth = drawerRightElement?.offsetWidth;\n\t\t};\n\t\tsetDrawersWidth();\n\t\twatchEffect(() => {\n\t\t\tif (drawers.currentWindowWidth === containerWidth.value) return;\n\t\t\tdrawers.currentWindowWidth = containerWidth.value;\n\t\t\tsetTimeout(() => nextTick().then(() => setDrawersWidth(), 1));\n\t\t});\n\t}\n};\n\n/**\n * Watch contents element height changes\n * @param {Ref<Number>} contentsElementHeight\n * @param {Ref<Number>} containerHeight\n * @param {Ref<Number>} containerWidth\n * @param {Ref<HTMLElement>} fixedTopElement\n * @param {Ref<HTMLElement>} fixedBottomElement\n * @param {string} breadcrumbId\n */\nexport const watchContentElementSize = (\n\tcontentsElementHeight,\n\tcontainerHeight,\n\tcontainerWidth,\n\tfixedTopElement,\n\tfixedBottomElement,\n\tbreadcrumbId\n) => {\n\tconst resize = () => {\n\t\tresizeContentElementSize(contentsElementHeight, containerHeight, fixedTopElement, fixedBottomElement);\n\t};\n\tonMounted(() => {\n\t\tresize();\n\t\twatch(\n\t\t\t() => containerHeight.value,\n\t\t\t() => resize()\n\t\t);\n\t\twatch(\n\t\t\t() => containerWidth.value,\n\t\t\t() => resize()\n\t\t);\n\n\t\t/**\n\t\t * @type {import(\"@vue/reactivity\").ComputedRef<import(\"../AppDataHandler\").Breadcrumb>}\n\t\t */\n\t\tconst lastBreadcrumb = inject(\"lastBreadcrumb\");\n\t\twatchEffect(() => {\n\t\t\tif (lastBreadcrumb.value?.id === breadcrumbId) resize();\n\t\t});\n\t});\n};\n\n/**\n * Resize content element\n * @param {Ref<Number>} contentsElementHeight\n * @param {Ref<Number>} containerHeight\n * @param {Ref<HTMLElement>} fixedTopElement\n * @param {Ref<HTMLElement>} fixedBottomElement\n */\nconst resizeContentElementSize = async (contentsElementHeight, containerHeight, fixedTopElement, fixedBottomElement) => {\n\tawait nextTick();\n\tPromise.resolve().then(() => {\n\t\tcontentsElementHeight.value = containerHeight.value - (fixedTopElement.value?.offsetHeight ?? 0) - (fixedBottomElement.value?.offsetHeight ?? 0);\n\t});\n};\n","import { render } from \"./Coll.vue?vue&type=template&id=322f37a0&scoped=true\"\nimport script from \"./Coll.vue?vue&type=script&lang=js\"\nexport * from \"./Coll.vue?vue&type=script&lang=js\"\n\nimport \"./Coll.vue?vue&type=style&index=0&id=322f37a0&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/amiyares/Projects/XOne/XOneWebVue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-322f37a0\"]])\n\nexport default __exports__","export default class XoneConnDataFlags \n{\n    public static  PREFIX_MODIFIED = 0x00000001;\n    public static  CONNSTRING_MODIFIED = 0x00000002;\n    public static  ROWIDFIELD_MODIFIED = 0x00000004;\n    public static  SQLFIELD_MODIFIED = 0x00000008;\n    public static  ROWIDLEN_MODIFIED = 0x00000010;\n    public static  OPERIDLEN_MODIFIED = 0x00000020;\n    public static  DATEMASK_MODIFIED = 0x00000040;\n    public static  TABLEQUOTE_MODIFIED = 0x00000080;\n    public static  FIELDQUOTE_MODIFIED = 0x00000100;\n    public static  SUBQUERIES_MODIFIED = 0x00000200;\n}","export class Guid {\n\n    public static validator = new RegExp(\"^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$\", \"i\");\n\n    public static EMPTY = \"00000000-0000-0000-0000-000000000000\";\n\n    public static isGuid(guid: any) {\n        const value: string = guid.toString();\n        return guid && (guid instanceof Guid || Guid.validator.test(value));\n    }\n\n    public static create(): Guid {\n        return new Guid([Guid.gen(2), Guid.gen(1), Guid.gen(1), Guid.gen(1), Guid.gen(3)].join(\"-\"));\n    }\n\n    public static createEmpty(): Guid {\n        return new Guid(\"emptyguid\");\n    }\n\n    public static parse(guid: string): Guid {\n        return new Guid(guid);\n    }\n\n    public static raw(): string {\n        return [Guid.gen(2), Guid.gen(1), Guid.gen(1), Guid.gen(1), Guid.gen(3)].join(\"-\");\n    }\n\n    private static gen(count: number) {\n        let out: string = \"\";\n        for (let i: number = 0; i < count; i++) {\n            // tslint:disable-next-line:no-bitwise\n            out += (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n        }\n        return out;\n    }\n\n    private value: string;\n\n    private constructor(guid: string) {\n        if (!guid) { throw new TypeError(\"Invalid argument; `value` has no value.\"); }\n\n        this.value = Guid.EMPTY;\n\n        if (guid && Guid.isGuid(guid)) {\n            this.value = guid;\n        }\n    }\n\n    public equals(other: Guid): boolean {\n        // Comparing string `value` against provided `guid` will auto-call\n        // toString on `guid` for comparison\n        return Guid.isGuid(other) && this.value === other.toString();\n    }\n\n    public isEmpty(): boolean {\n        return this.value === Guid.EMPTY;\n    }\n\n    public toString(): string {\n        return this.value;\n    }\n\n    public toJSON(): any {\n        return {\n            value: this.value,\n        };\n    }\n}","import Hashtable from \"../Collections/HashMap/Hashtable\";\nimport IConnection from \"../Interfaces/IConnection\";\nimport IFieldProperties from \"../Interfaces/IField\";\nimport IMessageHolder from \"../Interfaces/IMessageHolder\";\nimport IResultSet from \"../Interfaces/IResultSet\";\nimport IXmlNode from \"../Interfaces/IXmlNode\";\nimport IXoneApp from \"../Interfaces/IXoneApp\";\nimport IXoneObject from \"../Interfaces/IXoneObject\";\nimport Calendar from \"../Utils/Calendar\";\nimport ObjectDeveloper from \"../Utils/ObjectDeveloper\";\nimport ObjUtils from \"../Utils/ObjUtils\";\nimport StringUtils from \"../Utils/StringUtils\";\nimport { Utils } from \"../Utils/Utils\";\nimport XoneConnDataFlags from \"./XoneConnDataFlags\";\nimport { Guid } from \"../Utils/Guid\";\nimport { SqlParser } from \"../Parsers/SQL/SqlParser\";\n\nexport default abstract class XoneConnectionData {\n    PrepareFilter(strSQL: string): string {\n        throw new Error(\"Method not implemented.\");\n    }\n\n    // TAG 20050205: Luis: exponer metodos script en esta clase\n    //private static final ArrayList<Method> lstScriptAllowedMethods = WrapReflection.SafeGetAnnotatedMethods(XoneConnectionData.class, ScriptAllowed.class);\n    /**\n     * Constante para exponer el nombre de la conexin principal\n     */\n    public static MAIN_CONNECTION = \"##MAIN_CONNECTION##\";\n    /**\n     * Nombre de la conexin\n     */\n    protected m_strName = \"\";\n    /**\n     * Prefijo de las tablas con esta conexin.\n     */\n    protected m_strPrefix = \"\";\n    /**\n     * Almacena los datos del nodo XML de la conexin por si se necesitan para algo\n     */\n    protected m_xmlNodeData: IXmlNode;\n    /**\n     * Cadena de conexin para acceder a los datos\n     */\n    protected m_strConnString: string;\n    /**\n     * Subqueries si la conexin tiene que replicar\n     */\n    protected m_bIsReplicating: boolean;\n    /**\n     * MID para la rplica si se ha ledo del registro\n     */\n    protected m_nMid: number;\n    /**\n     * DBID para la rplica si se ha ledo del registro\n     */\n    protected m_nDbId: number;\n    /**\n     * Nombre del campo ROWID en esta conexin\n     */\n    protected m_strRowIdFieldName: string;\n    /**\n     * Nombre del campo SQL en esta conexin\n     */\n    protected m_strSqlFieldName: string;\n    /**\n     * Subqueries si la conexin tiene campo TBL en la cola de rplica\n     */\n    protected m_bHasTblField: boolean;\n    /**\n     * Tamao del OPERID para la conexin\n     */\n    protected m_nOperIdLength: number;\n    /**\n     * Tamao del ROWID para la conexin\n     */\n    protected m_nRowIdLength: number;\n    /**\n     * Aplicacin propietaria de esta conexin\n     */\n    protected m_owner: IXoneApp;\n    /**\n     * Lista de cadenas de inicializacin de esta conexin\n     */\n    protected m_lstInitStrings: Array<string>;\n    /**\n     * Aqu se almacena el Datemask que venga de fuera. Si al cargar el nodo DBMS es NULL se calcula de dicho nodo, de lo contrario se respeta este.\n     */\n    protected m_strDatemask: string;\n    /**\n     * Banderas que indican la modificacin de determinados campos de la conexin.\n     */\n    protected m_nFlags: number;\n    /**\n     * Separador para encerrar nombres de tablas (apertura)\n     */\n    protected m_strTableQuoteOpen = \"\";\n    /**\n     * Separador para encerrar nombres de tablas (cierre)\n     */\n    protected m_strTableQuoteClose = \"\";\n    /**\n     * Separador para encerrar nombres de campos (apertura)\n     */\n    protected m_strFieldQuoteOpen = \"\";\n    /**\n     * Separador para encerrar nombres de campos (cierre)\n     */\n    protected m_strFieldQuoteClose = \"\";\n    /**\n     * TRUE si la conexin soporta subqueries para la ejecucin de SELECTS\n     */\n    protected m_bSubqueries: boolean;\n    /**\n     * M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n     * Aqu almacenamos un gestor de mensajes por si las moscas... igual nos hace falta.\n     */\n    protected m_messages: IMessageHolder;\n    /**\n     * A11092603: Permitir que la maquinaria utilice transacciones si la conexin lo permite.\n     * TRUE si la conexin soporta las transacciones.\n     */\n    protected m_bSupportsTransactions: boolean;\n    /**\n     * A11111101: Soportar plataformas a nivel de nodos de conexin.\n     * Nombre de la plataforma, si es que la tenemos\n     */\n    protected m_strPlatform: string;\n    /**\n     * A11111101: Soportar plataformas a nivel de nodos de conexin.\n     * Si tenemos plataforma y hay nodo platform, lo ponemos aqu.\n     */\n    protected m_platform: IXmlNode;\n\n    /*\n     * ADD TAG TODO: el developer object value, lo traemos a la clase base de los data connection\n     */\n    /**\n     * Este objeto se encargara de gestionar el desarrollo de objetos en forma de cadena.\n     */\n    protected m_developer: ObjectDeveloper;\n\n\n    // A13080703: Mecanismo para adicionar propiedades extendidas a las conexiones.\n    protected m_extendedProperties: Hashtable<string, Object>;\n\n    /**\n     * Crea una conexin con el nombre que se le indica.\n     *\n     * @param Name  Nombre de la conexin a crear.\n     * @param Owner Aplicacin a la cual pertenece la conexin.\n     */\n    constructor(Name: string, Owner: IXoneApp) {\n        if (StringUtils.IsEmptyString(Name)) {\n            this.m_strName = XoneConnectionData.MAIN_CONNECTION;\n        } else {\n            this.m_strName = Name;\n        }\n        // Guardar el propietario\n        this.m_owner = Owner;\n        // ADD TAG Crear el objeto para el developer\n        this.m_developer = new ObjectDeveloper();\n        // Valores por defectos para los nombres de los campos y dems\n        this.m_strRowIdFieldName = \"ROWID\";\n        this.m_strSqlFieldName = \"SQL\";\n\n        //        this.m_nOperIdLength = 50;\n        /*\n         * TODO ADD TAG 04/05/2015 Juan Carlos:\n         * Subo el lmite de 50 a 100, en principio\n         * es cdigo muy viejo y realmente ni hace falta.\n         */\n        this.m_nOperIdLength = 100;\n\n        this.m_nRowIdLength = 35;\n        // Crear la lista de InitStrings\n        this.m_lstInitStrings = new Array<string>();\n        // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n        this.m_messages = Owner.getMessageHolder();\n        // A13080703: Mecanismo para adicionar propiedades extendidas a las conexiones.\n        this.m_extendedProperties = new Hashtable<string, Object>();\n        // TAG 20050205: Luis: exponer metodos script en esta clase\n        //this.addJavascriptFunctions();\n    }\n\n    // A13080703: Mecanismo para adicionar propiedades extendidas a las conexiones.\n    // TAG 20050204: Luis: exponer en los script las propiedades extendidas del conmstring para tratarlas\n    // esto permite agregar dinamicamente por script propiedades al connstring\n    //@ScriptAllowed\n    public addExtendedProperty(key: string, value: Object): number {\n        if (this.m_extendedProperties == null) {\n            this.m_extendedProperties = new Hashtable<string, Object>();\n        }\n        this.m_extendedProperties.put(key, value);\n        return 0;\n    }\n\n    // TAG 20050204: Luis: exponer en los script las propiedades extendidas del conmstring para tratarlas\n    // esto permite agregar dinamicamente por script propiedades al connstring\n    //@ScriptAllowed\n    public removeExtendedProperty(key: string): number {\n        if (this.m_extendedProperties != null) {\n            if (this.m_extendedProperties.containsKey(key)) {\n                this.m_extendedProperties.delete(key);\n            }\n        }\n        return 0;\n    }\n\n    // TAG 20050204: Luis: exponer en los script las propiedades extendidas del conmstring para tratarlas\n    // esto permite agregar dinamicamente por script propiedades al connstring\n    //@ScriptAllowed\n    public getExtendedProperty(key: string): Object {\n        if (this.m_extendedProperties == null) {\n            return null;\n        }\n        if (!this.m_extendedProperties.containsKey(key)) {\n            return null;\n        }\n        return this.m_extendedProperties.get(key);\n    }\n\n    public getExtendedList(): Hashtable<string, Object> {\n        return this.m_extendedProperties;\n    }\n\n    /**\n     * Expone el nombre de la conexin.\n     *\n     * @return Devuelve el nombre de la conexin.\n     */\n    public getName(): string {\n        return this.m_strName;\n    }\n\n    /**\n     * Expone o asigna valor al prefijo de las tablas en esta conexin.\n     *\n     * @return Devuelve el prefijo de las tablas en esta conexin.\n     */\n    public getPrefix(): string {\n        return this.m_strPrefix;\n    }\n\n    /**\n     * Asigna valor al prefijo de datos de las tablas en esta conexin.\n     *\n     * @param value Nuevo valor del prefijo.\n     */\n    public setPrefix(value: string): void {\n        this.m_strPrefix = value;\n        this.m_nFlags |= XoneConnDataFlags.PREFIX_MODIFIED;\n    }\n\n    /**\n     * Expone o asigna valor al nodo XML con los datos de la conexin\n     *\n     * @return Devuelve el nodo XML del que se hayan sacado los datos de esta conexin.\n     */\n    public getNodeData(): IXmlNode {\n        return this.m_xmlNodeData;\n    }\n\n    /**\n     * A11092603: Permitir que la maquinaria utilice transacciones si la conexin lo permite.\n     *\n     * @return TRUE si la conexin soporta transacciones.\n     */\n    public supportsTransactions(): boolean {\n        return this.m_bSupportsTransactions;\n    }\n\n    /**\n     * Asigna un nodo de datos XML para sacar de l los datos de declaracin de la conexin\n     *\n     * @param value Nodo XML con los datos de la conexin.\n     */\n    public setNodeData(value: IXmlNode): void {\n        if (null != (this.m_xmlNodeData = value)) {// Sacar algunas cosas del nodo\n            // A11111101: Soportar plataformas a nivel de nodos de conexin.\n            // Comprobar si tiene nodo platform\n            if (!StringUtils.IsEmptyString(this.m_strPlatform)) {\n                this.m_platform = this.m_xmlNodeData.SelectSingleNode(\"platform\", \"name\", this.m_strPlatform);\n            }\n\n            let str = \"\";\n            // A11111101: Soportar plataformas a nivel de nodos de conexin.\n            // Sacar los valores usando GetNodeValue\n            // El prefijo se puede definir segn la sintaxis antigua\n            //////if (!StringUtils.IsEmptyString(str = XmlUtils.GetNodeAttr(this.m_xmlNodeData, \"prefix\")))\n            if (!StringUtils.IsEmptyString(str = this.GetNodeValue(\"prefix\"))) {\n                this.setPrefix(str);\n            }\n            // Los tags para encerrar nombres de campos y tablas\n            //////if (!StringUtils.IsEmptyString(str = XmlUtils.GetNodeAttr(this.m_xmlNodeData, \"tablequote\")))\n            if (!StringUtils.IsEmptyString(str = this.GetNodeValue(\"tablequote\"))) {// Sacar los datos\n                if (str.length == 1) {// Los dos son iguales\n                    this.setTableQuoteOpen(str);\n                    this.setTableQuoteClose(str);\n                }// Los dos son iguales\n                else {// Diferentes\n                    this.setTableQuoteOpen(str.substring(0, 1));\n                    // F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n                    this.setTableQuoteClose(str.substring(1, str.length));\n                }// Diferentes\n            }// Sacar los datos\n            //////if (!StringUtils.IsEmptyString(str = XmlUtils.GetNodeAttr(this.m_xmlNodeData, \"fieldquote\")))\n            if (!StringUtils.IsEmptyString(str = this.GetNodeValue(\"fieldquote\"))) {// Sacar los datos\n                if (str.length == 1) {// Los dos son iguales\n                    this.setFieldQuoteOpen(str);\n                    this.setFieldQuoteClose(str);\n                }// Los dos son iguales\n                else {// Diferentes\n                    this.setTableQuoteOpen(str.substring(0, 1));\n                    // F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n                    this.setTableQuoteClose(str.substring(1, str.length));\n                }// Diferentes\n            }// Sacar los datos\n            // A11092603: Permitir que la maquinaria utilice transacciones si la conexin lo permite.\n            // Ver si soportamos transacciones o no\n            //////m_bSupportsTransactions =StringUtils.ParseBoolValue(this.m_xmlNodeData.getAttrValue(\"transactions\"), false);\n            this.m_bSupportsTransactions = StringUtils.ParseBoolValue(this.GetNodeValue(\"transactions\"), false);\n            // F11041502:\tComo parte  de la asignacin del nodo XML sacar la cadena de conexin.\n            //////if (!StringUtils.IsEmptyString(str =this.m_xmlNodeData.getAttrValue(\"connstring\")))\n            if (!StringUtils.IsEmptyString(str = this.GetNodeValue(\"connstring\"))) {\n                this.m_strConnString = str;\n            }\n            if (!StringUtils.IsEmptyString(str = this.GetNodeValue(\"datemask\"))) {\n                this.setDatemask(str);\n            }\n        }// Sacar algunas cosas del nodo\n    }\n\n    /**\n     * Expone o asigna valor a la cadena de conexin\n     *\n     * @return Devuelve la cadena de conexin para este objeto.\n     */\n    // TAG 20050207: Luis: exponer el connstring a la humanidad para que puedan utilizarlo\n    //@ScriptAllowed\n    public getConnString(): string {\n        return this.m_strConnString;\n    }\n\n    /**\n     * Asigna valor a la cadena de conexin de este objeto.\n     *\n     * @param value Nuevo valor para la cadena de conexin.\n     */\n    // TAG 20050207: Luis: exponer el connstring a la humanidad para que puedan utilizarlo\n    //@ScriptAllowed\n    public setConnString(value: string): void {\n        this.m_strConnString = value;\n        this.m_nFlags |= XoneConnDataFlags.CONNSTRING_MODIFIED;\n    }\n\n    /**\n     * Expone o asigna valor a la banderilla que indica si la conexin replica o no.\n     *\n     * @return Devuelve la bandera que indica si esta conexin est replicando o no.\n     */\n    public getIsReplicating(): boolean {\n        return this.m_bIsReplicating;\n    }\n\n    /**\n     * Asigna valor a la bandera que indica si la conexin est replicando o no.\n     *\n     * @param value TRUE para indicar que la conexin replica a la hora de ejecutar sentencias SQL.\n     */\n    public setIsReplicating(value: boolean): void {\n        this.m_bIsReplicating = value;\n    }\n\n    /**\n     * Expone o asigna valor al MID que va a usar esta conexin para replicar\n     *\n     * @return Devuelve el valor del MID asignado a esta conexin.\n     */\n    public getMID(): number {\n        return this.m_nMid;\n    }\n\n    /**\n     * Asigna valor al MID de esta conexin.\n     *\n     * @param value Nuevo valor del MID para generar ROWIDs y dems cosillas.\n     */\n    public setMID(value: number): void {\n        this.m_nMid = value;\n    }\n\n    /**\n     * Expone o asigna valor al DBID que va a usar esta conexin para replicar\n     *\n     * @return Devuelve el valor del DBID asignado a esta conexin para la rplica.\n     */\n    public getDBID(): number {\n        return this.m_nDbId;\n    }\n\n    /**\n     * Asigna valor al DBID usado para generar ROWIDs y cosas por el estilo.\n     *\n     * @param value Nuevo valor del DBID para esta conexin.\n     */\n    public setDBID(value: number): void {\n        this.m_nDbId = value;\n    }\n\n    /**\n     * Expone o asigna valor al campo ROWID de la base de datos que se va a usar\n     *\n     * @return Devuelve el nombre del campo ROWID para esta conexin.\n     */\n    public getRowIdFieldName() {\n        return this.m_strRowIdFieldName;\n    }\n\n    /**\n     * Asigna valor al nombre del campo ROWID de esta conexin de datos.\n     *\n     * @param value Nuevo valor para el nombre del campo ROWID de la conexin.\n     */\n    public setRowIdFieldName(value: string): void {\n        this.m_strRowIdFieldName = value;\n        if (StringUtils.IsEmptyString(this.m_strRowIdFieldName)) {\n            this.m_strRowIdFieldName = \"ROWID\";\n        } else {\n            this.m_nFlags |= XoneConnDataFlags.ROWIDFIELD_MODIFIED;\n        }\n    }\n\n    /**\n     * Expone o asigna valor al campo SQL de la base de datos que se va a usar\n     *\n     * @return Devuelve el nombre del campo SQL para esta conexin.\n     */\n    public getSqlFieldName() {\n        return this.m_strSqlFieldName;\n    }\n\n    /**\n     * Asigna valor al nombre del campo SQL para esta conexin.\n     *\n     * @param value Nombre del nuevo campo SQL para esta conexin.\n     */\n    public setSqlFieldName(value: string) {\n        this.m_strSqlFieldName = value;\n        this.m_nFlags |= XoneConnDataFlags.SQLFIELD_MODIFIED;\n    }\n\n    /**\n     * Expone o asigna valor al tamao del ROWID en esta conexin\n     *\n     * @return Devuelve el tamao del campo ROWID para esta conexin.\n     */\n    public getRowIdLength() {\n        return this.m_nRowIdLength;\n    }\n\n    /**\n     * Asigna valor al tamao del campo ROWID de esta conexin.\n     *\n     * @param value Nuevo tamao del campo ROWID para esta conexin (ms de 35)\n     */\n    public setRowIdLength(value: number) {\n        this.m_nRowIdLength = value;\n        // No puede ser menor que 35.. es el tamao mnimo...\n        if (this.m_nRowIdLength < 35) {\n            this.m_nRowIdLength = 35;\n        } else {\n            this.m_nFlags |= XoneConnDataFlags.ROWIDLEN_MODIFIED;\n        }\n    }\n\n    /**\n     * Expone o asigna valor al tamao del OPERID en esta conexin\n     *\n     * @return Devuelve el tamao del campo OPERID para esta conexin.\n     */\n    public getOperIdLength() {\n        return this.m_nOperIdLength;\n    }\n\n    /**\n     * Asigna valor al tamao del campo OPERID de esta conexin.\n     *\n     * @param value Nuevo tamao del campo OPERID para esta conexin.\n     */\n    public setOperIdLength(value: number) {\n        this.m_nOperIdLength = value;\n        // El tamao no puede ser menor que el mnimo (50)\n        if (this.m_nOperIdLength < 50) {\n            this.m_nOperIdLength = 50;\n        } else {\n            this.m_nFlags |= XoneConnDataFlags.OPERIDLEN_MODIFIED;\n        }\n    }\n\n    /**\n     * Expone la lista de cadenas de inicializacin para esta conexin en concreto\n     *\n     * @return Devuelve una lista de cadenas de inicializacin para esta conexin.\n     */\n    public getInitStrings() {\n        return this.m_lstInitStrings;\n    }\n\n    /**\n     * Expone o asigna valor al datemask de esta conexin\n     *\n     * @return Devuelve la mscara de fecha para esta conexin.\n     */\n    public getDatemask() {\n        return this.m_strDatemask;\n    }\n\n    /**\n     * Asigna valor a la mscara de fecha para esta conexin.\n     *\n     * @param value Nuevo valor para la mscara de fecha de la conexin.\n     */\n    public setDatemask(value: string) {\n        this.m_strDatemask = value;\n        if (!StringUtils.IsEmptyString(this.m_strDatemask)) {\n            this.m_nFlags |= XoneConnDataFlags.DATEMASK_MODIFIED;\n        }\n    }\n\n    /**\n     * Expone las banderas que indican qu campos se han modificado desde el exterior.\n     *\n     * @return Devuelve el valor del campo de banderas de la conexin.\n     */\n    public getFlags() {\n        return this.m_nFlags;\n    }\n\n    /**\n     * Separador para encerrar nombres de tablas (apertura)\n     *\n     * @return Devuelve el separador de inicio para encerrar los nombres de tablas.\n     */\n    public getTableQuoteOpen() {\n        return this.m_strTableQuoteOpen;\n    }\n\n    /**\n     * Asigna valor para el separador de inicio de los nombres de tablas.\n     *\n     * @param value Caracter o secuencia de caracteres para iniciar los nombres de tablas.\n     */\n    public setTableQuoteOpen(value: string): void {\n        if (!StringUtils.IsEmptyString(this.m_strTableQuoteOpen = value)) {\n            this.m_nFlags |= XoneConnDataFlags.TABLEQUOTE_MODIFIED;\n        }\n    }\n\n    /**\n     * Separador para encerrar nombres de tablas (cierre)\n     *\n     * @return Devuelve el caracter o secuencia de caracteres para finalizar los nombres de tablas.\n     */\n    public getTableQuoteClose(): string {\n        return this.m_strTableQuoteOpen;\n    }\n\n    /**\n     * Asigna valor al caracter o secuencia de caracteres para finalizar los nombres de tablas.\n     *\n     * @param value Nuevo valor para el caracter o secuencia de caracteres de terminacin de los nombres de tablas.\n     */\n    public setTableQuoteClose(value: string): void {\n        if (!StringUtils.IsEmptyString(this.m_strTableQuoteClose = value)) {\n            this.m_nFlags |= XoneConnDataFlags.TABLEQUOTE_MODIFIED;\n        }\n    }\n\n    /**\n     * Separador para encerrar nombres de campos (apertura)\n     *\n     * @return Devuelve el caracter o secuencia de caracteres para iniciar los nombres de campos.\n     */\n    public getFieldQuoteOpen(): string {\n        return this.m_strFieldQuoteOpen;\n    }\n\n    /**\n     * Asigna valor al caracter o secuencia de caracteres para iniciar los nombres de campos.\n     *\n     * @param value Nuevo valor para la secuencia de caracteres de inicio de los nombres de campos.\n     */\n    public setFieldQuoteOpen(value: string): void {\n        if (!StringUtils.IsEmptyString(this.m_strFieldQuoteOpen = value)) {\n            this.m_nFlags |= XoneConnDataFlags.FIELDQUOTE_MODIFIED;\n        }\n    }\n\n    /**\n     * Separador para encerrar nombres de campos (cierre)\n     *\n     * @return Devuelve el caracter o secuencia de caracteres para finalizar los nombres de campos de esta conexin.\n     */\n    public getFieldQuoteClose(): string {\n        return this.m_strFieldQuoteClose;\n    }\n\n    /**\n     * Asigna valor al caracter o secuencia de caracteres para finalizar los nombres de campos.\n     *\n     * @param value Nuevo valor del caracter o secuencia de caracteres usados para terminar los nombres de campo.\n     */\n    public setFieldQuoteClose(value: string): void {\n        if (!StringUtils.IsEmptyString(this.m_strFieldQuoteClose = value)) {\n            this.m_nFlags |= XoneConnDataFlags.FIELDQUOTE_MODIFIED;\n        }\n    }\n\n    /**\n     * TRUE si esta conexin soporta subqueries\n     *\n     * @return Devuelve la bandera que indica si la conexin soporta subqueries.\n     */\n    public getSubqueries(): boolean {\n        return this.m_bSubqueries;\n    }\n\n    /**\n     * Asigna valor a la bandera que indica si la conexin soporta subqueries o no.\n     *\n     * @param value TRUE si la conexin soporta subqueries.\n     */\n    public setSubqueries(value: boolean): void {\n        this.m_bSubqueries = value;\n        this.m_nFlags |= XoneConnDataFlags.SUBQUERIES_MODIFIED;\n    }\n\n    /**\n     * Prefijo con el guin necesario para sustituir en las macros\n     *\n     * @return Devuelve el prefijo de las tablas con el guion ya colocado.\n     */\n    public getDevelopedPrefix(): string {\n        // Si no hay prefijo, devolvemos una cadena vaca utilizable\n        if (StringUtils.IsEmptyString(this.m_strPrefix)) {\n            return \"\";\n        }\n        // De lo contrario el prefijo con el guin\n        return this.m_strPrefix + \"_\";\n    }\n\n    /**\n     * Esta funcin obtiene una conexin fsica a la fuente de datos. Reintenta tantas veces como se indique. Llama a la abstracta GetNewConnection sin parmetros.\n     *\n     * @param RetryCount Cantidad de veces que se reintenta en caso de que no se pueda obtener ninguna conexin.\n     * @return Devuelve la conexin o NULL si no se ha podido crear ninguna.\n     * @throws Exception\n     */\n    public GetRetryConnection(RetryCount: number, ReadOnly: boolean): IConnection {\n        for (let i = 0; i < RetryCount; i++) {// Reintentar varias veces\n            let connection: IConnection;\n            if (null != (connection = this.GetNewConnection(ReadOnly))) {\n                return connection;\n            }\n            // Dormir un poco para esperar\n            //Thread.sleep(200);\n        }// Reintentar varias veces\n        // Na de na\n        return null;\n    }\n\n    /**\n     * Prepara una sentencia SQL sustituyendo las macros que contiene. Utiliza valores FALSE para los parmetros ChkGroup y Prefiltered.\n     *\n     * @param Sentence Sentencia SQL que se quiere desarrollar.\n     * @return Devuelve la sentencia SQL pasada como parmetro con las macros sustituidas (incluido prefijo y dems)\n     * @throws Exception\n     */\n    // public  PrepareSqlString(String Sentence) throws Exception {\n    //     return PrepareSqlString(Sentence, false, false);\n    // }\n\n    /**\n     * Prepara una sentencia SQL sustituyendo las macros que contiene.\n     * F13012403: Poner PrepareSqlString a nivel de clase base para que lo usen los hijos.\n     * Ahora esto no sera abstracto, sino virtual y tendra implementacin propia y comn para todos los que heredan\n     * de esta clase.\n     *\n     * @param Sentence    Sentencia SQL o cadena que se quiere desarrollar.\n     * @param ChkGroup    TRUE para efectuar verificacin de GROUP BY para sustituir WHERE por HAVING.\n     * @param Prefiltered TRUE si la sentencia viene prefiltrada, en cuyo caso no se sustituye WHERE por HAVING.\n     * @return Devuelve la sentencia original con el operador sustituido.\n     * @throws Exception\n     */\n    public PrepareSqlString(Sentence: string, ChkGroup?: boolean, Prefiltered?: boolean) {\n        let mn: IXoneObject;\n        let ent: IXoneObject;\n        let usr: IXoneObject;\n        let str;\n        let strSQL = Sentence;\n        if (strSQL.contains(\"##\")) {// Algo habr\n            // Buscar la empresa activa...\n            ent = this.m_owner.getCompany();\n            if (strSQL.contains(\"##ENTID##\")) // Tiene la macro de empresa\n            {// Empresa\n                if (ent != null) {\n                    strSQL = StringUtils.Replace(strSQL, \"##ENTID##\", ent.GetObjectIdString());\n                } else {\n                    strSQL = StringUtils.Replace(strSQL, \"##ENTID##\", \"NULL\");\n                }\n            }// Empresa\n            if (strSQL.contains(\"##MID##\")) {// MID solo si est replicando\n                if (this.m_bIsReplicating) {// Est replicando\n                    str = \"'\" + this.m_nMid + \"'\";\n                    strSQL = StringUtils.Replace(strSQL, \"##MID##\", str);\n                }// Est replicando\n            }// MID solo si est replicando\n            if (strSQL.contains(\"##ENTIDCOLL##\")) {// Coleccin de empresas\n                str = this.m_owner.getEntIdColl();\n                //\n                // Como los valores pueden venir de fuera, solamente considerara\n                // valor nico si\n                // adems de no tener comas no tiene espacios.\n                if (StringUtils.IsEmptyString(str)) {\n                    str = \"NULL\";\n                }\n                if (!str.contains(\",\") && !str.contains(\" \")) {\n                    strSQL = StringUtils.Replace(strSQL, \"=##ENTIDCOLL##\", \"=\"\n                        + str);\n                } else {\n                    strSQL = StringUtils.Replace(strSQL, \"=##ENTIDCOLL##\",\n                        \" IN (\" + str + \")\");\n                }\n            }// Coleccin de empresas\n            if (strSQL.contains(\"##ENTIDLEVEL##\")) {// Coleccin de\n                // empresas\n                str = this.m_owner.getEntIdLevel();\n                if (StringUtils.IsEmptyString(str)) {\n                    str = \"NULL\";\n                }\n                //\n                // Con este contina\n                // Como los valores pueden venir de fuera, solamente considerara\n                // valor nico si\n                // adems de no tener comas no tiene espacios.\n                if (!str.contains(\",\") && !str.contains(\" \")) {\n                    strSQL = StringUtils.Replace(strSQL, \"=##ENTIDLEVEL##\", \"=\" + str);\n                } else {\n                    strSQL = StringUtils.Replace(strSQL, \"=##ENTIDLEVEL##\", \" IN (\" + str + \")\");\n                }\n            }// Coleccin de empresas\n            if (strSQL.contains(\"##ENTIDOWNER##\")) {// ID de la empresa propietaria\n                str = this.m_owner.getEntIdOwner();\n                if (StringUtils.IsEmptyString(str)) {\n                    str = \"NULL\";\n                }\n                strSQL = StringUtils.Replace(strSQL, \"=##ENTIDOWNER##\", \"=\" + str);\n            }// ID de la empresa propietaria\n            if (strSQL.contains(\"##CURRID##\")) {// Moneda actual\n                if (null != (mn = this.m_owner.getCurrency())) {\n                    strSQL = StringUtils.Replace(strSQL, \"##CURRID##\", mn.GetObjectIdString());\n                } else {\n                    strSQL = StringUtils.Replace(strSQL, \"##CURRID##\", \"NULL\");\n                }\n            }// Moneda actual\n            if (strSQL.contains(\"##USERID##\")) {// ID de usuario\n                if (null != (usr = this.m_owner.getUser())) {\n                    strSQL = StringUtils.Replace(strSQL, \"##USERID##\", usr.GetObjectIdString());\n                } else {\n                    strSQL = StringUtils.Replace(strSQL, \"##USERID##\", \"NULL\");\n                }\n            }// ID de usuario\n            if (strSQL.contains(\"##USERIDCOLL##\")) {// Conjunto de usuarios\n                str = this.m_owner.getUserIdColl();\n                if (StringUtils.IsEmptyString(str)) {\n                    strSQL = StringUtils.Replace(strSQL, \"=##USERIDCOLL##\", \" IS NOT NULL\");\n                } else {// Reemplazar por la cadenilla correcta\n                    if (str.contains(\",\")) {\n                        str = \"=\" + str;\n                    } else {\n                        str = \" IN (\" + str + \")\";\n                    }\n                    strSQL = StringUtils.Replace(strSQL, \"=##USERIDCOLL##\", str);\n                }// Reemplazar por la cadenilla correcta\n            }// Conjunto de usuarios\n        }// Algo habr\n        // A12050301: Adicionar una macro en la conexin para generar un nuevo ROWID.\n        // Macro para ROWID.\n        if (strSQL.contains(\"##ROWID##\")) {// Tiene ROWID\n            strSQL = strSQL.replace(\"##ROWID##\", this.GenerateRowId(Utils.EMPTY_STRING));\n        }// Tiene ROWID\n        // Sustituir el prefijo\n        if (strSQL.contains(\"##PREF##\")) {\n            strSQL = StringUtils.Replace(strSQL, \"##PREF##\", this.getDevelopedPrefix());\n        }\n        // Sustituir las comillas\n        if (strSQL.contains(\"##QUOTES##\")) {\n            strSQL = StringUtils.Replace(strSQL, \"##QUOTES##\", \"\\\"\");\n        }\n        // Sustituir macros de fecha en el SQL si es que vienen\n        // El Now\n        if (strSQL.contains(\"##\")) {// Si quedan cosas\n            let dt = new Calendar();\n            // O11011201:\tOptimizar un poco PrepareSqlString.\n            // Optimizar un poco esto\n            if (strSQL.contains(\"##NOW_TIME##\")) {// NOW_TIME\n                str = this.DevelopObjectValue(dt);\n                strSQL = StringUtils.Replace(strSQL, \"##NOW_TIME##\", str);\n            }// NOW_TIME\n            if (strSQL.contains(\"##DAY##\")) {// DAY\n                str = String.format(\"%d\", dt.get(Calendar.DAY_OF_MONTH));\n                strSQL = StringUtils.Replace(strSQL, \"##DAY##\", str);\n            }// DAY\n            if (strSQL.contains(\"##MONTH##\")) {// MONTH\n                str = String.format(\"%d\", dt.get(Calendar.MONTH));\n                strSQL = StringUtils.Replace(strSQL, \"##MONTH##\", str);\n            }// MONTH\n            if (strSQL.contains(\"##YEAR##\")) {// YEAR\n                str = String.format(\"%d\", dt.get(Calendar.YEAR));\n                strSQL = StringUtils.Replace(strSQL, \"##YEAR##\", str);\n            }// YEAR\n            if (strSQL.contains(\"##NOW##\")) {// NOW\n                ObjUtils.ZeroCalendarTime(dt);\n                str = this.DevelopObjectValue(dt);\n                // O11011201:\tOptimizar un poco PrepareSqlString.\n                // Aqu hay replace, as que usarlo\n                str = str.replace(\"00:00:00\", \"\");////StringUtils.removeChars(str, \"00:00:00\");\n                ////str = StringUtils.removeChars(str, \" \");\n                strSQL = StringUtils.Replace(strSQL, \"##NOW##\", str);\n            }// NOW\n            if (strSQL.contains(\"##NBSP##\")) {\n                strSQL = StringUtils.Replace(strSQL, \"##NBSP##\", \" \");\n            }\n        }// Si quedan cosas\n        // Puede que tenga que chequear si usa GROUP BY y no hay subselects\n        // Agregar un chequeo si se trata de una cadenilla que viene prefiltrada\n        /*\n         * F12060703: Quitar sustituciones a nivel de cadena de filtrado en sqls.\n         * Esto no\n        if (!m_bSubqueries && ChkGroup && !Prefiltered)\n        {// Buscar dentro del SQL\n            str = strSQL.toLowerCase();\n            // K10052601:\tModificacin para sustituir WHERE por HAVING en los sql.\n            if (str.indexOf(\"group by \") !=-1 && str.indexOf(\"where \") !=-1) \n            {// Cambiar el WHERE por HAVING\n                int wherePos =  str.indexOf(\"where \");\n                int groupPos =  str.indexOf(\"group by \");\n                if (wherePos > groupPos)\n                    strSQL = StringUtils.Replace(strSQL, \" WHERE \", \" HAVING \");\n                else \n                {\n                    String whereClause = strSQL.substring(wherePos, groupPos);\n                    String groupClause = strSQL.substring(groupPos);\n                    strSQL = strSQL.substring(0, wherePos);\n                    strSQL = strSQL + \" \" + groupClause +  \" \" + whereClause;\n                    strSQL = StringUtils.Replace(strSQL, \" WHERE \", \" HAVING \");\n                }\n            }// Cambiar el WHERE por HAVING\n        }// Buscar dentro del SQL\n        */\n        return strSQL;\n    }\n\n    /**\n     * Dado un nombre de tabla u otro tipo de objeto de base de datos, lo devuelve formateado con su prefijo si este est definido.\n     *\n     * @param ObjectName Nombre de tabla, query, vista, etc, cuyo nombre se quiere formatear sustituyendo el prefijo, introduciendo los caracteres de inicio y fin, etc.\n     * @param Prefix     Prefijo opcional para usar en la sustitucin. NULL para usar el que tenga la conexin.\n     * @return Devuelve el nombre del objeto ya desarrollado.\n     */\n    public FixObjectName(ObjectName: string, Prefix: string = null): string {\n        let str = ObjectName, str1: string;\n        let strPrefix: string;\n\n        // Esto solo hay que hacerlo si tiene valor\n        if (StringUtils.IsEmptyString(str)) {\n            return str;\n        }\n        strPrefix = this.m_strPrefix;\n        // Si trae prefijo de fuera, sobrepasa al calculado dentro\n        if (!StringUtils.IsEmptyString(Prefix)) {\n            strPrefix = Prefix;\n        }\n        // Ahora s se puede\n        if (!StringUtils.IsEmptyString(str)) {// Solo si tiene nombre\n            // Si tiene prefijo y no es la macro de anulacin\n            if (!StringUtils.IsEmptyString(strPrefix) && !strPrefix.equals(\"##NONE##\")) {// Tiene prefijo\n                if (str.charAt(0) != '.') {\n                    str = strPrefix + \"_\" + str;\n                }\n            }// Tiene prefijo\n        }// Solo si tiene nombre\n        // Si lleva comillas ponrselas por qu no\n        if (!StringUtils.IsEmptyString(this.m_strTableQuoteOpen)) {// Montar los separadores\n            str1 = String.format(\"%s%s%s\", this.m_strTableQuoteOpen, str, this.m_strTableQuoteClose);\n            return str1;\n        }// Montar los separadores\n        // Devolver tal cual\n        return str;\n    }\n\n    /**\n     * ADD TAG Implemetar Develop Object en la clase base\n     * Desarrolla el valor de un objeto y lo devuelve como cadena lista para insertar en una sentencia SQL o un filtro.\n     * <p>\n     * K12102201: Modificacin de DevelopObjectValue para pasar ForceNulls como parmetro.\n     * Lo que redefinimos es la funcin con parmetro porque el resto la verdad es que no nos interesa :-P\n     *\n     * @param Value Valor que se quiere desarrollar. Se utilizar la mscara de fecha de la conexin.\n     */\n    // public DevelopObjectValue(Value:any, ForceNulls:boolean=true):string {\n    //     return this.m_developer.DevelopObjectValue(Value, this.m_strDatemask, ForceNulls);\n    // }\n\n    public DevelopObjectValue(Value: any, format?: string | boolean, ForceNulls?: boolean): string {\n        if (format == null)\n            return this.m_developer.DevelopObjectValue(Value, this.m_strDatemask, true);\n        if (typeof format === 'boolean')\n            return this.m_developer.DevelopObjectValue(Value, this.m_strDatemask, format);\n        return this.m_developer.DevelopObjectValue(Value, format, ForceNulls);\n    }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Ejecuta una sentencia SQL parseada.\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado.\n     *\n     * @param Sentence\n     * @return\n     * @throws Exception\n     */\n    public ExecuteLocalParsedSql(Sentence: any): any {\n        return this.ExecuteParsedSql(null, Sentence, false);\n    }\n\n\n    /**\n     * A14011501: Optimizaciones para obtener claves numricas de conexiones sqlite y dems.\n     * Devuelve la cantidad de registros que afect la ltima operacin de modificacin de datos\n     * si es que tenemos este valor, de lo contrario (por defecto) devuelve -1\n     *\n     * @param TableName\n     * @return\n     */\n    public LastAffectedRecords(TableName: string): number {\n        return -1;\n    }\n\n    /**\n     * A11092603: Permitir que la maquinaria utilice transacciones si la conexin lo permite.\n     * A nivel de esta estructura se soportan transacciones.. o no\n     *\n     * @return Devuelve un objeto indicando el resultado de la transaccin... o NULL\n     * @throws Exception\n     */\n    public commit(): any {\n        return null;\n    }\n\n    /**\n     * A11092603: Permitir que la maquinaria utilice transacciones si la conexin lo permite.\n     * Soportar transacciones a este nivel tambin.\n     *\n     * @throws Exception\n     */\n    public beginTrans(): void {\n    }\n\n    /**\n     * A11092603: Permitir que la maquinaria utilice transacciones si la conexin lo permite.\n     * Soportar transacciones tambin a este nivel.\n     *\n     * @throws Exception\n     */\n    public rollBack(): void {\n    }\n\n    /**\n     * A11111101: Soportar plataformas a nivel de nodos de conexin.\n     */\n    public SetPlatform(Platform: string): void {\n        this.m_strPlatform = Platform;\n    }\n\n    //A11111101: Soportar plataformas a nivel de nodos de conexin.\n    //Devuelve un valor de atributo del nodo teniendo en cuenta el platform.\n    protected GetNodeValue(Key: string): string {\n        let strValue;\n\n        if (this.m_xmlNodeData == null) {\n            return null;\n        }\n        if (this.m_platform != null) {// Tiene plataforma\n            if (!StringUtils.IsEmptyString(strValue = this.m_platform.getAttrValue(Key))) {\n                return strValue;\n            }\n        }// Tiene plataforma\n        // De lo contrario lo sacamos del nodo directamente\n        return this.m_xmlNodeData.getAttrValue(Key);\n    }\n\n\n    /**\n     * TODO ADD TAG\n     * Cancela los procesos asincrnicos o no asincrnicos que haya corriendo en este momento. Quienes\n     * estn esperando por algo recibirn cdigos de error o timeouts, pero la estructura volver a estar\n     * disponible para efectuar llamadas.\n     * <p>\n     * La clase base no hace nada.\n     *\n     * @param flags Dependiendo de la implementacin aqu vendrn cositas para parametrizar la cancelacin.\n     * @return\n     */\n    public cancelProcesses(flags: number): number {\n        return 0;\n    }\n\n\n    /**\n     * Aqui vamos a abstraer el mecanismo de autenticar en las conexiones online\n     * para poder tener un token de session. por ahora lo hacemos por la via sencilla\n     * de mandar un metod Auth para arriba pero podemos complicarlo para Auth2 o algo asi\n     */\n    public getTokenFromAuth(login: string, pass: string): string {\n        return Utils.EMPTY_STRING;\n    }\n\n\n\n    //@ScriptAllowed\n    // TAG 20050206: Luis: para la depuracion el valoor por defecto\n    public toString() {\n        return \"Connection: \" + this.m_strName;\n    }\n\n    // // TAG 20050205: Luis: exponer metodos script en esta clase\n    // private void addJavascriptFunctions() {\n    //     if (lstScriptAllowedMethods.size() <= 0) {\n    //         return;\n    //     }\n    //     for (final Method method : lstScriptAllowedMethods) {\n    //         ScriptableObject.putProperty(this, method.getName(), new BaseFunctionJavaMethodWrapper(this, method));\n    //     }\n    // }\n\n    /**\n     * Genera un ROWID para la conexin actual. Emplea los criterios de nmero de tabla, MID, DBID, etc.\n     *\n     * @param TableName Nombre de la tabla para la cual se quiere generar el ROWID.\n     * @return Devuelve un ROWID respetando los valores de rplica y el tamao del campo ROWID.\n     */\n    public GenerateRowId(TableName?: string): string { return Guid.create().toString(); }\n\n    /**\n     * TRUE si el DBMS soporta la sintaxis TOP x\n     *\n     * @return Esta funcin posiblemente no se redefina en esta plataforma.\n     */\n    public abstract TopAllowed(): boolean;\n\n    /**\n     * TRUE si el DBMS soporta la sintaxis LIMIT x\n     *\n     * @return Mirar arriba plis.\n     */\n    public abstract LimitAllowed(): boolean;\n\n    /**\n     * TRUE si la conexin tiene caracteres para escapear cadenas de caracteres.\n     *\n     * @return Devuelve TRUE si hay caracteres en la lista para sustituir.\n     */\n    public abstract HasEscapeChars(): boolean;\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Devuelve TRUE si la conexin acepta sentencias SQL parseadas para su ejecucin o para queries.\n     *\n     * @return\n     */\n    public abstract acceptsParsedSentences(): boolean;\n\n    public abstract acceptsEmptyQueries(): boolean;\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Devuelve TRUE si la conexin permite recuperar un ID autonumrico dado un ROWID.\n     *\n     * @return\n     */\n    public abstract retrievesAutonumericKeys(): boolean;\n\n\n    /**\n     * Obtiene una conexin fsica a la fuente de datos que encapsula esta clase. Es de obligatoria redefinicin por los derivados de esta clase.\n     *\n     * @return Devuelve una nueva conexin de datos (o la misma si solo se emplea una)\n     * @throws Exception\n     */\n    public abstract GetNewConnection(ReadOnly: boolean): IConnection;\n\n\n    /**\n     * Crea un conjunto de datos sin conexin original. Para ello crea una local y la devuelve como\n     * parte del conjunto que la cierra cuando lo cierran a l\n     *\n     * @param Sentence Sentencia SQL que se ejecuta para obtener el conjunto de datos.\n     * @return Devuelve un conjunto de datos o NULL si algo falla.\n     * @throws Exception\n     */\n    /// public CreateRecordset(Sentence:string): IResultSet {\n    //     return this.CreateRecordset(null, Sentence);\n    // }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Ejecuta una sentencia SQL parseada que devuelve datos.\n     *\n     * @param Sentence\n     * @return\n     * @throws Exception\n     */\n    /// public CreateRecordset(Sentence:any): IResultSet{\n    //     return this.CreateRecordset(null, Sentence);\n    // }\n\n    /**\n     * Crea un objeto de acceso a datos (recordset) para leer los datos de un objeto\n     *\n     * @param Connection Conexin que se quiere usar para abrir la fuente de datos. NULL para crear una local y usarla solamente para esta funcin.\n     * @param Sentence   Setencia SQL (SELECT) que se quiere ejecutar para abrir la fuente de datos.\n     * @param MaxRows    Mximo de registros para no usar el que tiene por defecto la clase.\n     * @return Devuelve el conjunto de datos creado o NULL si algo falla.\n     * @throws Exception\n     */\n    /// public abstract CreateRecordset(Connection Connection, String Sentence, int MaxRows): IResultSet;\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Esta implementacin permite la ejecucin de sentencias SQL parseadas con anterioridad.\n     *\n     * @param Connection\n     * @param Sentence\n     * @param MaxRows\n     * @return\n     * @throws Exception\n     */\n    /// public abstract ResultSet CreateRecordset(Connection: IConnection | string, ...args?:any) throws Exception;\n\n    /*\n     * TODO ADD TAG 17042014: Luis Un recordset a partir de la clase de parametros\n     */\n    public abstract CreateRecordset(Connection: IConnection | string, ...args: any): IResultSet;\n    /*\n     * TODO ADD TAG 17042014: Luis Un recordset a partir de la clase de parametros\n     */\n    public abstract CreateRecordsetAsync(Connection: IConnection | string, ...args: any): Promise<IResultSet>;\n    // Para contar los records\n    public abstract CountAsync(Connection: IConnection | string, ...args: any): Promise<IResultSet>;\n    /**\n     * Crea un objeto de acceso a datos (recordset) para leer los datos de un objeto\n     *\n     * @param Connection Conexin que se quiere usar para abrir la fuente de datos. NULL para crear una local y usarla solamente para esta funcin.\n     * @param Sentence   Setencia SQL (SELECT) que se quiere ejecutar para abrir la fuente de datos.\n     * @return Devuelve el conjunto de datos creado o NULL si algo falla.\n     * @throws Exception\n     */\n    //public abstract ResultSet CreateRecordset(Connection Connection, String Sentence) throws Exception;\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Ejecuta una sentencia SQL parseada que devuelve datos.\n     *\n     * @param conn\n     * @param Sentence\n     * @return\n     * @throws Exception\n     */\n    /// public abstract ResultSet CreateRecordset(Connection conn, SqlParser Sentence) throws Exception;\n\n    /**\n     * Ejecuta una sentencia SQL dentro de la conexin que manipula este objeto. No lleva conexin fsica como parmetro porque crea una temporal, trabaja con ella y la cierra.\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado.\n     *\n     * @param Sentence Sentencia SQL que se quiere ejecutar.\n     * @return Devuelve TRUE si la ejecucin de la sentencia SQL es correcta.\n     * @throws Exception\n     */\n    // public ExecuteSqlString(Sentence: string): any {\n    //     return ExecuteSqlString(null, Sentence, true);\n    // }\n\n    /**\n     * A10090601:\tIncluir el mecanismo de rplica selectiva por colecciones a la maquinaria.\n     * Ejecuta un SQL sin replicar\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado.\n     */\n    // public Object ExecuteLocalSqlString(String Sentence) throws Exception {\n    //     return ExecuteSqlString(null, Sentence, false);\n    // }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Ejecuta una sentencia SQL parseada con rplica.\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado.\n     *\n     * @param Sentence\n     * @return\n     * @throws Exception\n     */\n    // public Object ExecuteParsedSql(SqlParser Sentence) throws Exception {\n    //     return ExecuteParsedSql(null, Sentence, true);\n    // }\n\n    /**\n     * Ejecuta una sentencia SQL dentro de la conexin que manipula este objeto.\n     * A10090601:\tIncluir el mecanismo de rplica selectiva por colecciones a la maquinaria.\n     * Un parmetro para decir si replica.\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado\n     *\n     * @param Connection Conexin de datos que se quiere usar para ejecutar la sentencia. NULL para crear una temporal, ejecutar la sentencia y cerrarla.\n     * @param Sentence   Sentencia SQL que se va a ejecutar.\n     * @param Replicate  TRUE si replica.\n     * @return Devuelve TRUE si la sentencia se ejecuta correctamente.\n     * @throws SQLException\n     * @throws Exception\n     */\n    public abstract ExecuteSqlString(Connection: IConnection | string, Sentence?: SqlParser | string, Replicate?: boolean, ...args): any;\n    public abstract ExecuteSqlStringAsync(Connection: IConnection | string, Sentence?: SqlParser | string, Replicate?: boolean, ...args): Promise<any>;\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Esta implementacin opcional permite ejecutar una sentencia SQL parseada en vez de una cadena SQL.\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado.\n     *\n     * @param Connection\n     * @param Sentence\n     * @param Replicate\n     * @return\n     * @throws SQLException\n     * @throws Exception\n     */\n    public abstract ExecuteParsedSql(Connection: IConnection | string, Sentence?: SqlParser | string, Replicate?: boolean, ...args): any;\n    public abstract ExecuteParsedSqlAsync(Connection: IConnection | string, Sentence?: SqlParser | string, Replicate?: boolean, ...args): Promise<any>;\n\n\n\n    /**\n     * Reemplaza el valor del operador especfico dentro de la cadena SQL que se pasa como parmetro.\n     *\n     * @param Collection Coleccin con la que se est trabajando.\n     * @param Sentence   Sentencia SQL o cadena en la cual se quiere sustituir el operador.\n     * @param OperName   Nombre del operador que se quiere sustituir.\n     * @return Devuelve la sentencia original con el operador sustituido.\n     * @throws Exception\n     */\n    public abstract ReplaceCustomOper(Collection: IFieldProperties, Sentence: string, OperName: string): string;\n\n    /**\n     * Inserta una sentencia TOP dentro del SQL que se pasa como parmetro. Colocada aqu para mantener compatibilidad de interfaces\n     * pero no se implementar en esta plataforma.\n     *\n     * @param Sentence Sentencia SQL que se quiere modificar.\n     * @param Rows     Cantidad de filas que se quiere limitar en el TOP x o LIMIT x\n     * @return La misma sentencia pasada como parmetro.\n     */\n    public abstract InsertTop(Sentence: string, Rows: number): string;\n\n    /**\n     * Dado un nombre de campo lo formatea usando los caracteres de inicio y fin de campo.\n     *\n     * @param FieldName Nombre del campo a formatear.\n     * @return Devuelve el nombre del campo encerrado en sus secuencias de inicio y fin de campo.\n     */\n    public abstract QuoteFieldName(FieldName: string): string;\n\n    /**\n     * Dado un nombre de tabla u otro tipo de objeto de base de datos, lo devuelve formateado con su prefijo si este est definido.\n     *\n     * @param ObjectName Nombre de tabla u objeto en general de la base de datos para arreglar con el prefijo.\n     * @return Devuelve el nombre de objeto ya desarrollado con su prefijo si aplica.\n     */\n    // public String FixObjectName(String ObjectName):string {\n    //     return FixObjectName(ObjectName, null);\n    // }\n\n\n\n    /**\n     * Dada una cadena sustituye los caracteres para los cuales se hayan definido secuencias de escape por dichas secuencias.\n     *\n     * @param Value Cadena en la cual se van a sustituir los caracteres por secuencias de escape.\n     * @return Devuelve la cadena original con los caracteres sustituidos por sus secuencias de escape.\n     */\n    public abstract EscapeString(Value: string): string;\n\n    /**\n     * Desarrolla el valor de un objeto y lo devuelve como cadena lista para insertar en un SQL o un filtro\n     *\n     * @param Value Valor que se quiere desarrollar. Se usar la mscara de fecha de la conexin.\n     * @return CAdena representando el valor del objeto para escribir en una sentencia SQL o un filtro de datos.\n     */\n    // public DevelopObjectValue(Value:any):string {\n    //     return DevelopObjectValue(Value, true);\n    // }\n\n    /**\n     * Esta funcin se emplea para cerrar conexiones locales si es que las tiene. No necesariamente tiene por qu\n     * usarse para terminar la clase, simplemente cuando se quiera cerrar o destruir los objetos locales.\n     */\n    public abstract Terminate(): void;\n\n    /**\n     * Si el DBMS soporta left outer joins\n     */\n    public abstract IsOuterJoinSupported(): boolean;\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Devuelve una clave numrica dada una tabla y un ROWID. Permite abstraer la obtencin de la clave autonumrica\n     * en conexiones que no son offline.\n     *\n     * @param TableName\n     * @param RowIdFieldName\n     * @return\n     * @throws Exception\n     */\n    public abstract RetrieveNumericKey(TableName: string, KeyName: string, RowIdFieldName: string, RowId: string): number;\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Esta funcin permite calcular si un ROWID es nico dentro de la conexin de datos.\n     *\n     * @param tableName\n     * @param RowID\n     * @return\n     * @throws Exception\n     */\n    public abstract isUniqueRowID(tableName: string, RowID: string): boolean;\n\n    // A11120701: Mecanismo para exponer el DBMS de una conexin.\n    // Expone el tipo de DBMS que tiene debajo esta conexin. Obligatorio implementar.\n    public abstract getDbmsTag(): string;\n\n}","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Groups.vue?vue&type=style&index=0&id=6ef7afb2&scoped=true&lang=css\"","export default class SqlType {\n    public static SQLTYPE_ERROR = -1;        /// Error durante el parsing del SQL\n    public static SQLTYPE_UNKNOWN = 0;        /// An no se ha parseado o se trata de una operacin desconocida\n    public static SQLTYPE_INSERT = 1;        /// Sentencia INSERT\n    public static SQLTYPE_DELETE = 2;        /// Sentencia DELETE\n    public static SQLTYPE_UPDATE = 3;        /// Sentencia UPDATE\n    public static SQLTYPE_SELECT = 4;        /// Sentencia SELECT\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SnackBar.vue?vue&type=style&index=0&id=620f34b4&scoped=true&lang=css\"","import * as fs from \"fs\";\nexport default class FileLoaderNodeJS {\n  LoadFile(FileName, bIsCryptoFile) {\n    return fs.readFileSync(FileName).toString();\n  }\n  FileExist(FileName, bIsCryptoFile) {\n    return fs.existsSync(FileName);\n  }\n  getAbsolutePath(FileName) {\n    return FileName;\n  }\n  getIncludeFilePath(sPath, bIsCryptoFile) {\n    throw new Error(\"Method not implemented.\");\n  }\n}\n\n//# sourceMappingURL=FileLoaderNodeJS.js.map\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Web.vue?vue&type=style&index=0&id=5bcfca02&scoped=true&lang=css\"","import firebase from \"firebase/app\";\nimport \"firebase/messaging\";\nimport AppDataHandler from \"./AppDataHandler\";\nimport { generateUniqueId } from \"./helperFunctions/StringHelper\";\nimport { XoneDataCollection } from \"./appData/core/XoneDataCollection\";\n\nimport xoneUI from \"./XoneUI\";\n\n/** @type {string} */\nlet pushToken;\n\n/**\n * get firebase configuration\n * @returns {Promise<{firebaseConfig: string, vapidKey: string}>}\n */\nconst getFirebaseConfig = async () =>\n\tawait new Promise((resolve) => {\n\t\tconst /** @type {Worker} */ worker = Function(\"return new Worker('../tasks.js')\")();\n\t\tworker.addEventListener(\"message\", ({ data }) => resolve(data));\n\t\tworker.postMessage({ type: \"firebaseConfig\" });\n\t});\n\n/**\n * Init firebase\n */\nconst initFirebase = async () => {\n\ttry {\n\t\tconst { firebaseConfig, vapidKey } = await getFirebaseConfig();\n\n\t\tfirebase.initializeApp(firebaseConfig);\n\n\t\tconst messaging = firebase.messaging();\n\n\t\tconst firebaseToken = await messaging.getToken({ vapidKey });\n\n\t\tif (firebaseToken) {\n\t\t\tlocalStorage.setItem(\"_messagingToken\", firebaseToken);\n\t\t\tpushToken = firebaseToken;\n\t\t\tonPushRegisteredFunctions.forEach((onPushRegisteredFunction) => onPushRegisteredFunction({ pushToken }));\n\t\t} else {\n\t\t\tconst ex = \"No registration token available. Request permission to generate one.\";\n\t\t\tconsole.error(ex);\n\t\t\tthrow new Exception(ex);\n\t\t}\n\n\t\tmessaging.onMessage((payload) => {\n\t\t\tconst id = payload.data?.notification_id || generateUniqueId();\n\t\t\tconst title = payload.data?.title || payload.notification?.notification_title;\n\t\t\tconst body = payload.data?.body || payload.notification?.notification_message;\n\t\t\tconst onClickFunction = () =>\n\t\t\t\tAppDataHandler.getAppData()\n\t\t\t\t\t.getCollection(\"Empresas\")\n\t\t\t\t\t.then((/** @type {XoneDataCollection} */ coll) => coll.ExecuteCollAction(\"onpushnotificationclick\", null, payload).catch(console.error));\n\n\t\t\txoneUI.showNotification(id, title, body, null, onClickFunction);\n\n\t\t\tonPushReceivedFunctions.forEach((onPushReceivedFunction) => onPushReceivedFunction(payload));\n\t\t});\n\t} catch (ex) {\n\t\tconsole.error(\"An error occurred while retrieving token. \", ex);\n\t\tthrow new Exception(ex);\n\t}\n};\n\n/**\n * onPushRegisteredFunction\n * @type {Map<string,Function>}\n */\nconst onPushRegisteredFunctions = new Map();\n\n/**\n * onPushRegistrationFailureFunction\n * @type {Map<string,Function>}\n */\nconst onPushRegistrationFailureFunctions = new Map();\n\n/**\n * onPushReceivedFunction\n * @type {Map<string,Function>}\n */\nconst onPushReceivedFunctions = new Map();\n\n/**\n * register push\n * @param {Function} [callback]\n */\nexport const registerPush = (callback) =>\n\t!pushToken &&\n\tNotification.requestPermission().then(() =>\n\t\tinitFirebase()\n\t\t\t.then(() => pushToken && callback instanceof Function && callback({ pushToken }))\n\t\t\t.catch(() => onPushRegistrationFailureFunctions.forEach((onPushRegistrationFailureFunction) => onPushRegistrationFailureFunction()))\n\t);\n\n/**\n * OnPushRegistered binded event function\n * @param {Function} callback\n */\nexport const setOnPushRegisteredFunction = (callback) => {\n\tif (onPushRegisteredFunctions.has(callback.toString())) return;\n\tonPushRegisteredFunctions.set(callback.toString(), callback);\n\tif (pushToken) onPushRegisteredFunctions.forEach((onPushRegisteredFunction) => onPushRegisteredFunction({ pushToken }));\n};\n\n/**\n * onPushRegistrationFailure binded event function\n * @param {Function} callback\n */\nexport const setOnPushRegistrationFailureFunction = (callback) =>\n\t!onPushRegistrationFailureFunctions.has(callback.toString()) && onPushRegistrationFailureFunctions.set(callback.toString(), callback);\n\n/**\n * onPushReceived binded event function\n * @param {Function} callback\n */\nexport const setOnPushReceivedFunction = (callback) =>\n\t!onPushReceivedFunctions.has(callback.toString()) && onPushReceivedFunctions.set(callback.toString(), callback);\n","import { ref, Ref } from \"@vue/reactivity\";\nimport { watch } from \"@vue/runtime-core\";\n\nimport { XoneDataCollection } from \"./appData/core/XoneDataCollection\";\nimport { XoneDataObject } from \"./appData/core/XoneDataObject\";\nimport { XoneApplication } from \"../composables/appData/core/XoneApplication\";\n\nimport { generateUniqueId } from \"./helperFunctions/StringHelper\";\nimport xoneUI from \"./XoneUI\";\nimport XmlNode from \"./appData/Xml/JSONImpl/XmlNode\";\nimport { registerPush, setOnPushReceivedFunction, setOnPushRegisteredFunction, setOnPushRegistrationFailureFunction } from \"./Firebase\";\nimport { nextTick } from \"vue\";\nimport { xoneAttributesHandler } from \"./XoneAttributesHandler\";\nimport { RowInfo } from \"./ContentsLoaderHandler\";\n\n//\n// Add methods to XoneDataObject prototype\n\nXoneDataObject.prototype.changeModelValue = function(propName, newValue) {\n\tthis[propName] = newValue;\n};\n\nXoneDataObject.prototype.clone = function() {\n\tif (this[\"_ObjCloned\"]) return this;\n\n\tconst newObj = new XoneDataObject(this.getOwnerCollection());\n\tObject.entries(this).forEach(([key, value]) => (newObj[key] = value));\n\tnewObj[\"_ObjCloned\"] = this;\n\tnewObj[\"_XoneHashId\"] = undefined;\n\tnewObj[\"_XoneReactive\"] = undefined;\n\tnewObj.getObjectIndex = () => this.getObjectIndex();\n\treturn newObj;\n};\n\nXoneDataObject.prototype.doModelReactive = function() {\n\tif (this[\"_XoneReactive\"]) return this;\n\n\tthis.model = ref(this.model).value;\n\tthis[\"_XoneReactive\"] = true;\n\n\t// Si el objeto est clonado, propagamos el cambio\n\tif (!this[\"_ObjCloned\"] || !this[\"_ObjCloned\"][\"_XoneReactive\"]) return this;\n\tObject.keys(this.model).forEach((key) =>\n\t\twatch(\n\t\t\t() => this.model[key],\n\t\t\t(newValue) => this[\"_ObjCloned\"].changeModelValue(key, newValue)\n\t\t)\n\t);\n\n\treturn this;\n};\n\nXoneDataObject.prototype.isReactive = function() {\n\treturn this[\"_XoneReactive\"];\n};\n\nXoneDataObject.prototype.setCloneOnPush = function(value) {\n\tthis[\"_CloneOnPush\"] = value;\n};\n\nXoneDataObject.prototype.getCloneOnPush = function() {\n\treturn this[\"_CloneOnPush\"];\n};\n\nXoneDataObject.prototype.getHashId = function(createIfNull = true) {\n\tif (!this[\"_XoneHashId\"] && createIfNull) this[\"_XoneHashId\"] = Array(3).join(generateUniqueId());\n\treturn this[\"_XoneHashId\"];\n};\n\nXoneDataObject.prototype.getParent = function() {\n\treturn this.m_owner.getOwnerObject();\n};\n\nXoneDataObject.prototype.executeMethod = async function(method) {\n\tawait xoneAttributesHandler.executeMethod(`executenode(${method})`, this);\n};\n\n//\n// Add methods to XoneApplication prototipes\n\nXoneApplication.prototype.exit = () => xoneUI.exitApp();\n\nXoneApplication.prototype.exitApp = () => {\n\twindow.close();\n\txoneUI.exitApp();\n};\n\nXoneApplication.prototype.logout = () => xoneUI.exitApp();\n\nXoneApplication.prototype.pushValueAndExit = (arg) => xoneUI.openEditViewAndExit(arg);\n\nXoneApplication.prototype.registerPush = (callback) => registerPush(callback);\n\nXoneApplication.prototype.bind = (event, callback) => {\n\tif (event && event.toString().toLowerCase() === \"onpushregistered\") setOnPushRegisteredFunction(callback);\n\tif (event && event.toString().toLowerCase() === \"onpushregistrationfailure\") setOnPushRegistrationFailureFunction(callback);\n\tif (event && event.toString().toLowerCase() === \"onpushreceived\") setOnPushReceivedFunction(callback);\n};\n\n/**\n * @typedef {Object} Breadcrumb\n * @property {string} id\n * @property {string} xoneHashId\n * @property {string} type\n * @property {string} name\n * @property {string} title\n * @property {boolean} isWebLayout\n * @property {boolean} isMsgbox\n * @property {boolean} isContentsRow\n *\n * Nos da informacion del objeto\n * @typedef {Object} Objectinfo\n * @property {boolean} isContents\n * @property {number} recordIndex\n * @property {boolean} editInRow\n * @property {boolean} autosave\n * @property {function(number): void} onMsgBoxOptionSelected\n * @property {RowInfo} rowInfo\n */\n\n/** Class to handle appData, dataObjectsMap and breadcrumb stack */\nclass AppDataHandler {\n\t/**\n\t * _instance\n\t * @type {AppDataHandler}\n\t */\n\tstatic _instance;\n\n\t/**\n\t * appData\n\t * @type {XoneApplication}\n\t */\n\t_appData;\n\n\t// Separamos los breadcrumb de los dataObjects dado que no se puede hacer un stringify de objetos con estructura circular, as que no lo podemos expandir a los componentes hijo\n\t// queda con los dataobjects en la propiedad _dataObjectsMap y el indice de breadcrumbs en _breadcrumbs\n\n\t/**\n\t * dataObjectsMap\n\t * @type {Map<string, XoneDataObject>}\n\t */\n\t_dataObjectsMap = new Map();\n\n\t/**\n\t * breadcrumbs\n\t * @type {Ref<Breadcrumb[]>}\n\t */\n\t_breadcrumbs = ref([]);\n\n\tconstructor() {\n\t\tif (AppDataHandler._instance) return AppDataHandler._instance;\n\t\tAppDataHandler._instance = this;\n\t}\n\n\t/**\n\t * Set AppData\n\t * @param {XoneApplication} appData\n\t */\n\tsetAppData(appData) {\n\t\tthis._appData = appData;\n\t}\n\n\t/**\n\t * Get AppData\n\t * @returns {XoneApplication}\n\t */\n\tgetAppData() {\n\t\treturn this._appData;\n\t}\n\n\t/**\n\t * Get breadcrumb\n\t * @returns {Breadcrumb[]}\n\t */\n\tgetBreadcrumbs() {\n\t\treturn this._breadcrumbs.value;\n\t}\n\n\t/**\n\t * Set DataObject\n\t * @param {string} id\n\t * @param {XoneDataObject} value\n\t */\n\taddDataObject(id, value) {\n\t\tthis._dataObjectsMap.set(id, value);\n\t}\n\n\t/**\n\t * Get XOneDataObject from breadcrumb id\n\t * @param {string} id\n\t * @returns {XoneDataObject}\n\t */\n\tgetDataObject(id) {\n\t\treturn this._dataObjectsMap.get(id);\n\t}\n\n\t/**\n\t * get XOneDataObjects\n\t * @returns {XoneDataObject[]}\n\t */\n\tgetDataObjects() {\n\t\treturn Array.from(this._dataObjectsMap.values());\n\t}\n\n\t/**\n\t * Clear dataObjectsMap\n\t */\n\tcleardataObjectsMap() {\n\t\tthis._dataObjectsMap.clear();\n\t}\n\n\t/**\n\t * Clear breadcrumb\n\t * @param {boolean} [keepLayout ]\n\t */\n\tclearBreadcrumbs(keepLayout = false) {\n\t\t// Remove breadcrumb\n\t\tthis._breadcrumbs.value = keepLayout ? this._breadcrumbs.value.filter((e) => e.isWebLayout) : [];\n\t\t// Remove dataobjects\n\t\tthis.cleardataObjectsMap();\n\t}\n\n\t/**\n\t * Remove breadcrumb from breadcrumb id\n\t * @param {string} id\n\t */\n\tremoveBreadcrumb(id) {\n\t\tconst breadcrumb = this._breadcrumbs.value.find((e) => e.id === id);\n\t\tif (!breadcrumb) return;\n\n\t\tconst index = this._breadcrumbs.value.indexOf(breadcrumb);\n\t\t// Remove breadcrumb\n\t\tthis._breadcrumbs.value.splice(index, 1);\n\t\t// Remove dataobject\n\t\tthis._dataObjectsMap.delete(id);\n\t}\n\n\t/**\n\t * delete last breadcrumb\n\t */\n\tdeletelastBreadcrumb() {\n\t\tif (this._breadcrumbs.value.length === 0) return;\n\t\tconst lastBreadcrumb = [...this._breadcrumbs.value].reverse()[0];\n\t\tthis.removeBreadcrumb(lastBreadcrumb.id);\n\t}\n\n\t/**\n\t * Clear breadcrumb from key\n\t * @param {string} id\n\t */\n\tclearBreadcrumbsFrom(id) {\n\t\tconst breadcrumb = this._breadcrumbs.value.find((e) => e.id === id);\n\t\tif (!breadcrumb) return;\n\t\tconst index = this._breadcrumbs.value.indexOf(breadcrumb) + 1;\n\t\tthis._breadcrumbs.value.splice(index);\n\t}\n\n\t/**\n\t * clearBreadcrumbsFromXoneHashId\n\t * @param {string} xoneHashId\n\t */\n\tclearBreadcrumbsFromXoneHashId(xoneHashId) {\n\t\tthis._breadcrumbs.value = this._breadcrumbs.value.filter((e) => e.xoneHashId !== xoneHashId);\n\t}\n\n\t/**\n\t * Create new XoneDataObject and push it into dataObjectsMap Map\n\t * @param {string} collName\n\t * @param {string} [objectType]\n\t * @param {boolean} [isWebLayout]\n\t * @param {boolean} [addObject]\n\t * @returns {Promise<string>}\n\t */\n\tasync addNewXoneDataObject(collName, objectType = \"Coll\", isWebLayout = false, addObject = false) {\n\t\t/**\n\t\t * Create XoneDataObject\n\t\t * @type {XoneDataCollection}\n\t\t */\n\t\tconst xoneDataCollection = await this._appData.getCollection(collName);\n\n\t\tif (!xoneDataCollection) return;\n\n\t\t/**\n\t\t * xoneDataObject\n\t\t * @type {XoneDataObject}\n\t\t */\n\t\tconst xoneDataObject = await xoneDataCollection.CreateObject(true);\n\n\t\t// Para LoginColl, EntryPoint y WebLayout, si son special, se agrega el objeto\n\t\tif (addObject && xoneDataCollection.getProperties().getAttrValue(\"special\") === \"true\") {\n\t\t\txoneDataCollection.clear();\n\t\t\txoneDataCollection.addItem(xoneDataObject);\n\t\t}\n\n\t\treturn this.pushXoneDataObject(xoneDataObject, objectType, isWebLayout);\n\t}\n\n\t/**\n\t * Push new XoneDataObject into dataObjectsMap Map\n\t * @param {XoneDataObject} xoneDataObject\n\t * @param {string} [objectType]\n\t * @param {boolean} [isWebLayout]\n\t * @returns {string}\n\t */\n\tasync pushXoneDataObject(xoneDataObject, objectType = \"Coll\", isWebLayout = false, isMsgbox = false, isContentsRow = false) {\n\t\tif (!isContentsRow && !isMsgbox) {\n\t\t\txoneUI.showLoader();\n\t\t\tawait new Promise((resolve) => setTimeout(() => nextTick().then(() => resolve()), 1));\n\t\t\tsetTimeout(() => xoneUI.hideLoader(), 10000);\n\t\t}\n\n\t\tconst id = generateUniqueId();\n\n\t\tif (xoneDataObject.getCloneOnPush())\n\t\t\t// Si el objeto viene de un contents, tenemos que clonarlo para mantener la reactividad\n\t\t\txoneDataObject = xoneDataObject.clone();\n\n\t\t/** @type {{m_xmlNode:XmlNode}} */\n\t\tconst { m_xmlNode } = xoneDataObject.m_owner;\n\n\t\t// Set XOneDataObject\n\t\tthis.addDataObject(id, xoneDataObject);\n\t\t// Push breadcrumb\n\t\tthis._breadcrumbs.value.push({\n\t\t\tid,\n\t\t\txoneHashId: xoneDataObject.getHashId(),\n\t\t\ttype: objectType,\n\t\t\tname: xoneDataObject.m_owner.m_strName,\n\t\t\ttitle: m_xmlNode.getAttrValue(\"title\", xoneDataObject.m_owner.m_strName),\n\t\t\tisWebLayout,\n\t\t\tisMsgbox,\n\t\t\tisContentsRow,\n\t\t});\n\t\treturn id;\n\t}\n\n\t/**\n\t * setCookie\n\t * @param {string} name cookie name\n\t * @param {*} value cookie value\n\t * @param {number} expiration expiration days\n\t */\n\tsetCookie(name, value, expiration) {\n\t\tconst d = new Date();\n\t\td.setTime(d.getTime() + expiration * 24 * 60 * 60 * 1000);\n\t\tconst expires = \"expires=\" + d.toUTCString();\n\t\tdocument.cookie = name + \"=\" + value + \";\" + expires + \";path=/\";\n\t}\n\n\t/**\n\t * getCookie\n\t * @param {string} name cookie name\n\t */\n\tgetCookie(name) {\n\t\tconst cookies = document.cookie.split(\";\").map((e) => {\n\t\t\tconst [name, value] = e.split(\"=\");\n\t\t\treturn { name: name.trim(), value: value.trim() };\n\t\t});\n\t\treturn cookies.find((e) => e.name === name)?.value || \"\";\n\t}\n\n\t/**\n\t * removeCookie\n\t * @param {string} name\n\t */\n\tremoveCookie(name) {\n\t\tdocument.cookie = `${name}= ; expires = ${new Date().toUTCString()};`;\n\t}\n\n\t/**\n\t * getCircularReplacer\n\t */\n\tgetCircularReplacer() {\n\t\tconst seen = new WeakSet();\n\t\treturn (key, value) => {\n\t\t\tif (typeof value === \"object\" && value !== null) {\n\t\t\t\tif (seen.has(value)) {\n\t\t\t\t\tconsole.warn(\"Cache duplicado\", key, value);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tseen.add(value);\n\t\t\t}\n\t\t\treturn value;\n\t\t};\n\t}\n}\n\nexport default new AppDataHandler();\n","import Hashtable from \"../../Collections/HashMap/Hashtable\";\nimport IXoneAttributes from \"../../Interfaces/IXoneAttributes\";\n\nexport default class XmlAttributes implements IXoneAttributes {\n\n    private _attributes: Hashtable<string, string>\n\n    /**\n     *\n     */\n    constructor(attrs: any = null) {\n        this._attributes = new Hashtable<string, string>();\n        if (attrs) {\n            attrs.forEach(element => this._attributes.put(element[0], element[1]))\n        }\n    }\n\n    public toJSON() {\n        return this._attributes.toJSON();\n    }\n\n    public clone(): IXoneAttributes {\n        // let temp = new Hashtable<string, string>();\n        // this._attributes.entries.forEach(element => {\n        //     temp.put(element[0], element[1]);\n        // });\n        return new XmlAttributes(this._attributes.entrySet());\n    }\n\n    public get length(): number {\n        return this._attributes.length;\n    }\n\n    keys(): string[] {\n        return this._attributes.keys();\n    }\n    getIndex(AttrName: string) {\n        return this._attributes.keys().indexOf(AttrName);\n    }\n    getValue(sAttrName: string): string {\n        return this._attributes.get(sAttrName);\n    }\n    setValue(attrName: string, value: string): void {\n        this._attributes.put(attrName, value);\n        this[attrName] = value;\n    }\n    deleteAttribute(attrName: string): void {\n        this._attributes.delete(attrName);\n    }\n    clearAll(): void {\n        this._attributes.clear();\n    }\n\n}","import Hashtable from \"../Collections/HashMap/Hashtable\";\nimport XmlNode from \"../Xml/JSONImpl/XmlNode\";\nimport TextUtils from \"./TextUtils\";\nimport { Utils } from \"./Utils\";\n\nexport default class XmlUtils {\n\n\n    public static GetNodeAttr(node:XmlNode, AttrName:string, sDefault:string =\"\") {\n        return this.getNodeAttr(node,AttrName,sDefault);\n    }\n    public static getNodeAttr(node:XmlNode, AttrName:string, sDefault:string =\"\") {\n        if (node == null) {\n            return sDefault;\n        }\n        const s = node.getAttrValue(AttrName);\n        if (TextUtils.isEmpty(s)) {\n            return sDefault;\n        } else {\n            return s;\n        }\n    }\n\n    public static getValuesByConditions(map:Hashtable<String, String>, parent:XmlNode, defaultValue: string=\"\"):void {\n        if (parent == null) {\n            map.put(Utils.MACRO_DEFAULT, defaultValue);\n            return;\n        }\n        parent.getChildNodes().forEach(node => {\n            this.getNodeAttr(node, \"conditions\", Utils.MACRO_DEFAULT).split(\";\").forEach(s=> map.put(s, node.getAttrValue(Utils.PROP_ATTR_NAME)));\n        });;\n        // for (let node in list) {\n        //    const conditions = this.getNodeAttr(node, \"conditions\", Utils.MACRO_DEFAULT).split(\";\");\n        //     for (l s : conditions) {\n        //         map.put(s, GetNodeAttr(node, \"name\"));\n        //     }\n        // }\n        if (!map.containsKey(Utils.MACRO_DEFAULT)) {\n            map.put(Utils.MACRO_DEFAULT, defaultValue);\n        }\n    }\n}","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Map.vue?vue&type=style&index=0&id=0212dfac&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Url.vue?vue&type=style&index=0&id=054892a6&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./OverControl.vue?vue&type=style&index=0&id=725183bb&scoped=true&lang=css\"","import { Exception } from \"./Exception\";\n\nexport default class XoneGenericException extends Exception {\n    m_code: number;\n    m_extra: string;\n    /**\n     *\n     */\n    constructor(code: number, message: string, extra?:string) {\n        super(message);\n        this.m_code=code;\n        this.m_extra=extra;\n    }\n} ","import { Exception } from \"./Exception\"\n\nexport default class IllegalStateException extends Exception {\n\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Contents.vue?vue&type=style&index=0&id=1104ab42&scoped=true&lang=css\"","import { type } from \"os\";\nimport { Exception } from \"../../Exceptions/Exception\";\nimport IDataOptions from \"../../Interfaces/IDataOptions\";\nimport IResultSet from \"../../Interfaces/IResultSet\";\nimport { SqlParser } from \"../../Parsers/SQL/SqlParser\";\nimport NumberUtils from \"../../Utils/NumberUtils\";\nimport ObjUtils from \"../../Utils/ObjUtils\";\nimport StringUtils from \"../../Utils/StringUtils\";\nimport TextUtils from \"../../Utils/TextUtils\";\nimport XoneJSONConnection from \"./XoneJSONConnection\";\n\nexport default class XoneJSONResulset implements IResultSet {\n\tprivate m_nIterate: number;\n\tprivate m_parsed: SqlParser;\n\tprivate m_maxRows = 100;\n\tprivate m_data: any;\n\tprivate m_options: IDataOptions;\n\tprivate m_keys = [];\n\tprivate m_connection: XoneJSONConnection;\n\tprivate m_sentence: string;\n\t/**\n\t *\n\t */\n\tconstructor(connection?: XoneJSONConnection, Sentence?: string, options?: IDataOptions) {\n\t\tthis.m_connection = connection;\n\t\tthis.m_nIterate = -1;\n\t\tthis.m_sentence = Sentence;\n\t\tthis.m_options = options;\n\t\tthis.m_data = [];\n\t\tthis.m_maxRows = this.m_data.length;\n\t\tthis.m_keys = [];\n\t\t// this.m_parsed=new SqlParser(\"ROWID\");\n\t\t// this.m_parsed.ParseSqlString(strCmd)\n\t}\n\n\tpublic async populate(options?: IDataOptions): Promise<IResultSet> {\n\t\tvar result = await this.m_connection.fetchDataAsync(this.m_sentence, options || this.m_options);\n\t\tif (result.hasError == true) {\n\t\t\tthrow new Exception(result.err);\n\t\t}\n\t\tthis.m_data = Array.isArray(result.data) ? result.data : [];\n\t\tthis.m_maxRows = this.m_data.length;\n\t\tthis.m_keys = this.m_maxRows == 0 ? [] : Object.keys(this.m_data[0]);\n\t\treturn this;\n\t}\n\n\tisResultset: boolean = true;\n\n\tgetBytes(fld: string): number[] {\n\t\treturn null;\n\t}\n\tgetColumnCount(): number {\n\t\treturn this.m_maxRows == 0 ? 0 : this.m_keys.length;\n\t}\n\tgetColumnTypes(): number[] {\n\t\treturn [1, 2, 3, 4, 5, 6, 7, 8];\n\t}\n\tgetColumnName(ordinal: number): string {\n\t\treturn this.m_maxRows == 0 ? 0 : this.m_keys[ordinal];\n\t}\n\tgetData() {\n\t\treturn this.m_data;\n\t}\n\tclose(): void {\n\t\tthis.m_nIterate = -1;\n\t\tthis.m_data = null;\n\t\tthis.m_maxRows = 0;\n\t}\n\n\tprivate resolverField(fld: string | number): string {\n\t\tif (typeof fld == \"number\") return this.m_keys[fld as number];\n\t\treturn fld as string;\n\t}\n\n\tgetValue(fld: string | number, nType: number) {\n\t\tswitch (nType) {\n\t\t\tcase 0: // Numero\n\t\t\t\treturn NumberUtils.SafeToInt(this.m_data[this.m_nIterate][this.resolverField(fld)]);\n\t\t\tcase 2:\n\t\t\t\treturn NumberUtils.SafeToDouble(this.m_data[this.m_nIterate][this.resolverField(fld)]);\n\t\t\tcase 3:\n\t\t\t\treturn ObjUtils.SafeToDate(this.m_data[this.m_nIterate][this.resolverField(fld)]);\n\t\t\tdefault:\n\t\t\t\treturn StringUtils.SafeToString(this.m_data[this.m_nIterate][this.resolverField(fld)]);\n\t\t}\n\t}\n\tgetString(fld: string | number): string {\n\t\treturn this.getValue(fld, 1) as string;\n\t}\n\tgetInt(fld: string): number {\n\t\treturn this.getValue(fld, 0) as number;\n\t}\n\tgetDate(fld: string): Date {\n\t\treturn this.getValue(fld, 3) as Date;\n\t}\n\n\tprivate get PageLen() {\n\t\treturn this.m_options?.page?.length || -1;\n\t}\n\n\tprivate get PageCache() {\n\t\treturn this.m_options?.page?.cache || -1;\n\t}\n\n\tpublic async next(): Promise<boolean> {\n\t\t// if (this.PageLen > 0) {\n\t\t//     if (this.PageCache > 0) {\n\n\t\t//     } else {\n\t\t//         await this.populate();\n\t\t//     }\n\t\t// }\n\t\treturn ++this.m_nIterate < this.m_maxRows;\n\t}\n\n\tpublic async EOF(): Promise<boolean> {\n\t\treturn this.m_nIterate >= this.m_maxRows;\n\t}\n\tpublic async moveTo(position: number): Promise<boolean> {\n\t\treturn position == this.m_maxRows || (this.m_nIterate = position) == this.m_maxRows;\n\t}\n}\n","import { parse, resolve } from \"path\";\nimport Hashtable from \"../../Collections/HashMap/Hashtable\";\nimport { Exception } from \"../../Exceptions/Exception\";\nimport IConnection from \"../../Interfaces/IConnection\";\nimport IDataOptions from \"../../Interfaces/IDataOptions\";\nimport IResultSet from \"../../Interfaces/IResultSet\";\nimport { SqlParser } from \"../../Parsers/SQL/SqlParser\";\nimport ConnectionStringUtils from \"../../Utils/ConnectionStringUtils\";\nimport NumberUtils from \"../../Utils/NumberUtils\";\nimport SqlType from \"../../Utils/SqlType\";\nimport StringBuilder from \"../../Utils/StringBuilder\";\nimport StringUtils from \"../../Utils/StringUtils\";\nimport TextUtils from \"../../Utils/TextUtils\";\nimport { Utils } from \"../../Utils/Utils\";\nimport XoneJSONConnectionData from \"./XoneJSONConnectionData\";\nimport XoneJSONResulset from \"./XoneJSONResulset\";\n//import fetch from \"node-fetch\";\n\ninterface Token {\n\taccess_token: string;\n\texpires_in: Date;\n\ttoken_type: string;\n\tscope: string;\n}\n\nexport default class XoneJSONConnection implements IConnection {\n\tpublic static DEFAULT_CONTENT_TYPE = \"application/x-www-form-urlencoded\";\n\t// TAG 20050208: Luis: Permitir customizar mas las colecciones online\n\tpublic static DEFAULT_ACTION_NAME = \"Action\";\n\tpublic static DEFAULT_AUTHACTION_NAME = \"Auth\";\n\tpublic static FLAG_XONEJSONSQL = 1;\n\tpublic static FLAG_XONEJSONODATA = 2;\n\tpublic static FLAG_XONEJSONCUSTOM = 4;\n\n\t// Cliente para conectar con LogonTest\n\t// private m_clientId = \"XIdsAPIdUQMB9bzf5\";\n\t// private m_clientSecret = \"q5d007Ma19GM1jN0IMhl6uqjKt7PoO\";\n\n\t// Cliente para conectar con AllByxone\n\tprivate m_clientId = \"XIdsAPIXmITgixqqj\";\n\tprivate m_clientSecret = \"5M3c9Oae5A7ewzTDU2Z3xh1B9P0Z79\";\n\n\t// Prod\n\tprivate m_url = \"https://web.xonedev.cloud/api/itf/DoAction\";\n\t// local\n\t//private m_url = \"http://localhost:1854/api/itf/DoAction\";\n\n\tprivate m_idsUrl = \"https://ids.xonedev.cloud/connect/token\";\n\n\tprivate m_token: Token;\n\tprivate m_data: any;\n\tprivate m_resulset: XoneJSONResulset;\n\tprivate bIsLoginCall: boolean;\n\tprivate bIsJWTCall: boolean;\n\tprivate sToken: string;\n\tprivate nFlags: number = 1;\n\tprivate nTimeout: number = 60;\n\tprivate nSecurityLevel: number = 0;\n\tprivate sUrlAddress: string;\n\tprivate sMethod: string;\n\tprivate sUsername: string;\n\tprivate sPassword: string;\n\tprivate sEndpoint: string;\n\tprivate sAction: string;\n\tprivate sAuthAction: string;\n\tprivate sContentType: string;\n\tprivate bIsSqlQuery: boolean;\n\tprivate bPostUrlEncode: boolean;\n\tprivate bIsCertificatePinningEnabled: boolean;\n\tprivate sLocalCertPath: string;\n\tprivate bAuthenticate: boolean;\n\tprivate sAuthenticationUsername: string;\n\tprivate sAuthenticationPassword: string;\n\tprivate bUseRemoteBroker: boolean;\n\tprivate sRemoteMapped: string;\n\tprivate sRemoteDest: string;\n\tprivate bAllowUnsafeCertificates: boolean;\n\tprivate sAppName: string;\n\tprivate sExecutionPath: string;\n\tprivate cryptoData: Hashtable<String, Object>;\n\n\t/**\n\t *\n\t */\n\tconstructor(sConnectionString: string, sAppName?: string, sExecutionPath?: string, cryptoData?: Hashtable<String, Object>) {\n\t\tthis.sAppName = sAppName;\n\t\tthis.sExecutionPath = sExecutionPath;\n\t\tthis.bIsLoginCall = false;\n\t\tthis.cryptoData = cryptoData;\n\t\tthis.m_token = null;\n\t\tthis.parseConnectionString(sConnectionString);\n\t}\n\n\texecuteUpdateAsync(Sentence: any): Promise<number> {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tasync executeNonQuery(data: any): Promise<any> {\n\t\tvar token = await this.readBearerTokenAsync();\n\t\tif (TextUtils.isEmpty(token)) throw new Exception(\"No Auth\");\n\t\t// var parser=new SqlParser(\"ROWID\");\n\t\t// parser.ParseSqlString(Sentence as string);\n\t\t// var data= {\n\t\t//     coll: args[0],\n\t\t//     action: \"select\",\n\t\t//     where: parser.GetWhereSentence()\n\t\t// };\n\t\tconst response = await fetch(this.m_url, {\n\t\t\tmethod: \"POST\", // *GET, POST, PUT, DELETE, etc.\n\t\t\t//mode: 'no-cors', // no-cors, *cors, same-origin\n\t\t\t// cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n\t\t\t//credentials: 'omit', // include, *same-origin, omit\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\tAuthorization: \"Bearer \" + token,\n\t\t\t\t// 'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t},\n\t\t\t//redirect: 'follow', // manual, *follow, error\n\t\t\t// referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n\t\t\tbody: JSON.stringify(data), // body data type must match \"Content-Type\" header\n\t\t});\n\t\tconst result = await response.json();\n\t\treturn 1;\n\t}\n\n\tprivate getDataFromParser(parser: SqlParser): any {\n\t\treturn parser.GetFields().toJSON();\n\t\t// const data = [];\n\t\t// data.push(parser.GetFields().toJSON());\n\t\t// return data;\n\t}\n\n\tprivate formatOnlineData(parser: SqlParser, collName: string, keys: any) {\n\t\tif (parser.GetSqlType() == SqlType.SQLTYPE_SELECT) {\n\t\t\treturn {\n\t\t\t\tcoll: collName,\n\t\t\t\taction: \"select\",\n\t\t\t\twhere: parser.GetWhereSentence(),\n\t\t\t};\n\t\t}\n\t\tif (parser.GetSqlType() == SqlType.SQLTYPE_UPDATE || parser.GetSqlType() == SqlType.SQLTYPE_INSERT) {\n\t\t\treturn {\n\t\t\t\tcoll: collName,\n\t\t\t\taction: \"write\",\n\t\t\t\tdata: this.getDataFromParser(parser),\n\t\t\t\tkeys: parser.getKeys(),\n\t\t\t\twhere: parser.GetWhereSentence(),\n\t\t\t};\n\t\t}\n\t\tif (parser.GetSqlType() == SqlType.SQLTYPE_DELETE) {\n\t\t\treturn {\n\t\t\t\tcoll: collName,\n\t\t\t\taction: \"drop\",\n\t\t\t\tdata: this.getDataFromParser(parser),\n\t\t\t\tkeys: parser.getKeys(),\n\t\t\t\twhere: null, // SqlParser.getWhereOnlyFields(parser.GetWhereSentence())\n\t\t\t};\n\t\t}\n\t\treturn {};\n\t\t// if (parser.GetSqlType() == SqlType.SQLTYPE_INSERT) {\n\t\t//     return {\n\t\t//         coll: collName,\n\t\t//         action: \"write\",\n\t\t//         data: this.getDataFromParser(parser),\n\t\t//         keys: parser.getKeys(),\n\t\t//         data: this.getDataFromParser(parser)\n\t\t//     };\n\t\t// }\n\t}\n\n\tasync executeAsync(Sentence: any, MaxRows: number, ...args): Promise<any> {\n\t\tif (typeof Sentence == \"string\") {\n\t\t\tlet tmp = new SqlParser(\"ROWID\");\n\t\t\ttmp.ParseSqlString(Sentence);\n\t\t\tSentence = tmp;\n\t\t}\n\t\treturn await this.executeNonQuery(this.formatOnlineData(Sentence, args[0], args[1]));\n\t}\n\n\tprivate getAuthData(): string {\n\t\tlet bld = new StringBuilder(\"client_id=\");\n\t\tbld.append(this.m_clientId);\n\t\tbld.append(\"&client_secret=\");\n\t\tbld.append(this.m_clientSecret);\n\t\tbld.append(\"&grant_type=client_credentials\");\n\t\treturn bld.toString();\n\t}\n\n\tprivate async readBearerTokenAsync(): Promise<string> {\n\t\tif (this.m_token != null) {\n\t\t\tif (this.m_token.expires_in > new Date()) return this.m_token.access_token;\n\t\t}\n\t\tconst response = await fetch(this.m_idsUrl, {\n\t\t\tmethod: \"POST\", // *GET, POST, PUT, DELETE, etc.\n\t\t\t//mode: \"no-cors\",\n\t\t\t// cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n\t\t\t// credentials: 'same-origin', // include, *same-origin, omit\n\t\t\theaders: {\n\t\t\t\t//'Content-Type': 'application/json',\n\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\",\n\t\t\t},\n\t\t\t//redirect: 'follow', // manual, *follow, error\n\t\t\t//referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n\t\t\tbody: this.getAuthData(), // body data type must match \"Content-Type\" header\n\t\t});\n\t\tlet token = await response.json();\n\t\tif (token.error) {\n\t\t\tconsole.error(token.error);\n\t\t\treturn (this.m_token = null);\n\t\t}\n\t\tvar expire = new Date();\n\t\texpire.setSeconds(expire.getSeconds() + token.expires_in);\n\t\tthis.m_token = token;\n\t\tthis.m_token.expires_in = expire;\n\t\treturn token.access_token;\n\n\t\t//   return response.then((value)=> {\n\t\t//     return value.json().then((token)=> {\n\t\t//         if (token.error) {\n\t\t//             console.error(token.error);\n\t\t//             return this.m_token=null;\n\t\t//         }\n\t\t//         var expire=new Date();\n\t\t//         expire.setSeconds(expire.getSeconds()+token.expires_in);\n\t\t//         this.m_token=token;\n\t\t//         this.m_token.expires_in=expire;\n\t\t//         return token.access_token;\n\t\t//     })\n\t\t//     .catch((reason)=>{\n\t\t//         console.error(reason);\n\t\t//         return null;\n\t\t//     }); // parses JSON response into native JavaScript objects\n\t\t//   })\n\t\t//   .catch((reason)=> {\n\t\t//       console.error(reason);\n\t\t//       throw new Exception(reason);\n\t\t//   })\n\t}\n\n\texecuteQuery(Sentence: any): IResultSet {\n\t\treturn new XoneJSONResulset();\n\t}\n\n\tasync fetchDataAsync(Sentence: any, data: any): Promise<any> {\n\t\t// var token = await this.readBearerTokenAsync();\n\t\t// if (TextUtils.isEmpty(token))\n\t\t//     throw new Exception(\"No Auth\");\n\t\t// var parser = new SqlParser(\"ROWID\");\n\t\t// parser.ParseSqlString(Sentence as string);\n\t\t// var data = {\n\t\t//     //count:args.length>0?args[0]:false,\n\t\t//     //coll: args.length>1?args[1]:\"\",\n\t\t//     action: \"select\",\n\t\t//     where: parser.GetWhereSentence(),\n\t\t//     sort: parser.getOrderBySentence()\n\t\t//     //page: args.length>2?args[2]:{}\n\t\t// };\n\t\t// data = { ...data, ...options };\n\t\tconst response = await fetch(this.sUrlAddress, {\n\t\t\tmethod: this.sMethod, // *GET, POST, PUT, DELETE, etc.\n\t\t\t//mode: 'no-cors', // no-cors, *cors, same-origin\n\t\t\t// cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n\t\t\t//credentials: 'omit', // include, *same-origin, omit\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t\t//\"Authorization\": \"Bearer \" + token\n\t\t\t\t// 'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t},\n\t\t\t//redirect: 'follow', // manual, *follow, error\n\t\t\t// referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n\t\t\tbody: JSON.stringify(data), // body data type must match \"Content-Type\" header\n\t\t});\n\t\treturn await response.json();\n\t}\n\n\tasync executeQueryAsync(Sentence: any, ...args): Promise<IResultSet> {\n\t\t// if (((this.getFlags() & XoneJSONConnection.FLAG_XONEJSONODATA) > 0) || this.isSqlQueryDisabled() || \"GET\".equals(this.getMethod())) {\n\t\t//     let parser = new SqlParser(\"ROWID\");\n\t\t//     parser.ParseSqlString(Sentence);\n\t\t//     return executeQuery(parser, nMaxRecords);\n\t\t// } else {\n\t\t//     getJsonObject(this.getUrlAddress(), Sentence);\n\t\t//     return new JSONResultSet(this, jsonObject, connection.getFlags());\n\t\t// }\n\t\tvar parser = new SqlParser(\"ROWID\");\n\t\tparser.ParseSqlString(Sentence as string);\n\t\tvar data: IDataOptions = {\n\t\t\taction: \"select\",\n\t\t\twhere: parser.GetWhereSentence(),\n\t\t\tsort: parser.getOrderBySentence(),\n\t\t\t//page: args.length>2?args[2]:{}\n\t\t};\n\t\tdata = { ...data, ...args[0] };\n\t\tvar rs = new XoneJSONResulset(this, Sentence, data);\n\t\treturn await rs.populate();\n\t}\n\n\tprivate prepareNormalData(body: string) {}\n\n\t// async executeQueryAsyncOld(Sentence: any, ...args): Promise<IResultSet> {\n\t//     var token = await this.readBearerTokenAsync();\n\t//     if (TextUtils.isEmpty(token))\n\t//         throw new Exception(\"No Auth\");\n\t//     var parser = new SqlParser(\"ROWID\");\n\t//     parser.ParseSqlString(Sentence as string);\n\t//     var data = {\n\t//         //count:args.length>0?args[0]:false,\n\t//         //coll: args.length>1?args[1]:\"\",\n\t//         action: \"select\",\n\t//         where: parser.GetWhereSentence(),\n\t//         sort: parser.getOrderBySentence()\n\t//         //page: args.length>2?args[2]:{}\n\t//     };\n\t//     this.m_data = { ...data, ...args[0] };\n\t//     const response = await fetch(this.m_url, {\n\t//         method: 'POST', // *GET, POST, PUT, DELETE, etc.\n\t//         //mode: 'no-cors', // no-cors, *cors, same-origin\n\t//         // cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n\t//         //credentials: 'omit', // include, *same-origin, omit\n\t//         headers: {\n\t//             'Content-Type': 'application/json',\n\t//             \"Authorization\": \"Bearer \" + token\n\t//             // 'Content-Type': 'application/x-www-form-urlencoded',\n\t//         },\n\t//         //redirect: 'follow', // manual, *follow, error\n\t//         // referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n\t//         body: JSON.stringify(this.m_data) // body data type must match \"Content-Type\" header\n\t//     });\n\t//     const result = await response.json();\n\t//     return this.m_resulset = new XoneJSONResulset(result.data);\n\t//     // return this.readBearerTokenAsync().then((token) => {\n\t//     //     if (TextUtils.isEmpty(token))\n\t//     //         throw new Exception(\"No Auth\");\n\t//     //     var parser=new SqlParser(\"ROWID\");\n\t//     //     parser.ParseSqlString(Sentence as string);\n\t//     //     var data= {\n\t//     //         coll: args[0],\n\t//     //         action: \"select\",\n\t//     //         where: parser.GetWhereSentence()\n\t//     //     };\n\t//     //     const response = fetch(this.m_url, {\n\t//     //         method: 'POST', // *GET, POST, PUT, DELETE, etc.\n\t//     //         mode: 'no-cors', // no-cors, *cors, same-origin\n\t//     //         // cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n\t//     //         //credentials: 'omit', // include, *same-origin, omit\n\t//     //         headers: {\n\t//     //         'Content-Type': 'application/json',\n\t//     //         \"Authorization\": \"Bearer \"+token\n\t//     //         // 'Content-Type': 'application/x-www-form-urlencoded',\n\t//     //         },\n\t//     //         //redirect: 'follow', // manual, *follow, error\n\t//     //         // referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n\t//     //         body: JSON.stringify(data) // body data type must match \"Content-Type\" header\n\t//     //     });\n\t//     //     return response.then((value)=>\n\t//     //             value.json().then((result)=>\n\t//     //                 new XoneJSONResulset(result.data)))\n\t//     //             .catch((reason)=> {\n\t//     //                 console.error(reason);\n\t//     //                 return null;\n\t//     //             });\n\t//     // });\n\t// }\n\n\tasync countAsync(Sentence: any, ...args): Promise<IResultSet> {\n\t\t// var token = await this.readBearerTokenAsync();\n\t\t// if (TextUtils.isEmpty(token))\n\t\t//     throw new Exception(\"No Auth\");\n\t\tvar parser = new SqlParser(\"ROWID\");\n\t\tparser.ParseSqlString(Sentence as string);\n\t\tvar data: IDataOptions = {\n\t\t\taction: \"count\",\n\t\t\twhere: parser.GetWhereSentence(),\n\t\t\tsort: parser.getOrderBySentence(),\n\t\t};\n\t\tdata = { ...data, ...args[0] };\n\t\tvar rs = new XoneJSONResulset(this, Sentence, data);\n\t\treturn await rs.populate();\n\t\t// const response = await fetch(this.m_url, {\n\t\t//     method: 'POST', // *GET, POST, PUT, DELETE, etc.\n\t\t//     //mode: 'no-cors', // no-cors, *cors, same-origin\n\t\t//     // cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n\t\t//     //credentials: 'omit', // include, *same-origin, omit\n\t\t//     headers: {\n\t\t//         'Content-Type': 'application/json',\n\t\t//         \"Authorization\": \"Bearer \" + token\n\t\t//         // 'Content-Type': 'application/x-www-form-urlencoded',\n\t\t//     },\n\t\t//     //redirect: 'follow', // manual, *follow, error\n\t\t//     // referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n\t\t//     body: JSON.stringify(this.m_data) // body data type must match \"Content-Type\" header\n\t\t// });\n\t\t// const result = await response.json();\n\t\t// return this.m_resulset = new XoneJSONResulset(result.data);\n\t}\n\n\tprivate parseConnectionString(sConnection: string): void {\n\t\tlet parameters = ConnectionStringUtils.parseConnectionString(sConnection);\n\t\tthis.bIsLoginCall = StringUtils.ParseBoolValue(parameters.get(\"logincall\"));\n\t\t// TAG 20050201: Luis: Permitir una primera aproximacion a authorization por JWT\n\t\t// En el connstring debe ponerse jwtcall=true y el token que se tenga\n\t\tthis.bIsJWTCall = StringUtils.ParseBoolValue(parameters.get(\"jwtcall\"));\n\t\tthis.sToken = StringUtils.SafeToString(parameters.get(\"token\"), Utils.EMPTY_STRING);\n\t\tthis.nFlags =\n\t\t\tthis.nFlags |\n\t\t\t(StringUtils.ParseBoolValue(parameters.get(\"odataformat\")) ? XoneJSONConnection.FLAG_XONEJSONODATA : XoneJSONConnection.FLAG_XONEJSONSQL);\n\t\tthis.nFlags =\n\t\t\tthis.nFlags |\n\t\t\t(StringUtils.ParseBoolValue(parameters.get(\"customformat\")) ? XoneJSONConnection.FLAG_XONEJSONCUSTOM : XoneJSONConnection.FLAG_XONEJSONSQL);\n\t\tthis.nTimeout = NumberUtils.SafeToInt(parameters.get(\"timeout\"), 60);\n\t\tthis.nSecurityLevel = NumberUtils.SafeToInt(parameters.get(\"security level\"), 0);\n\t\tthis.sUrlAddress = parameters.get(\"data source\");\n\t\tif (this.sUrlAddress != null) {\n\t\t\tthis.sUrlAddress = this.sUrlAddress.trim();\n\t\t\tif (this.sUrlAddress.endsWith(\"?\")) {\n\t\t\t\tthis.sUrlAddress = this.sUrlAddress.substring(0, this.sUrlAddress.length - 1);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.sUrlAddress = Utils.EMPTY_STRING;\n\t\t}\n\t\tthis.sMethod = parameters.get(\"method\");\n\t\tif (this.sMethod == null) {\n\t\t\tthis.sMethod = \"POST\";\n\t\t}\n\t\tthis.sUsername = parameters.get(\"xoneuser\");\n\t\tif (this.sUsername == null) {\n\t\t\tthis.sUsername = Utils.EMPTY_STRING;\n\t\t}\n\t\tthis.sPassword = parameters.get(\"xonepass\");\n\t\tif (this.sPassword == null) {\n\t\t\tthis.sPassword = Utils.EMPTY_STRING;\n\t\t}\n\t\tthis.sEndpoint = parameters.get(\"endpoint\");\n\t\tif (this.sEndpoint == null) {\n\t\t\tthis.sEndpoint = Utils.EMPTY_STRING;\n\t\t}\n\t\t// TAG 20050208: Luis: Permitir customizar mas las colecciones online\n\t\t// en el connstring se puede poner Action=nombreaccion y AuthAction=nombreaccionauth\n\t\tthis.sAction = StringUtils.SafeToString(parameters.get(\"action\"), XoneJSONConnection.DEFAULT_ACTION_NAME);\n\t\tthis.sAuthAction = StringUtils.SafeToString(parameters.get(\"authaction\"), XoneJSONConnection.DEFAULT_AUTHACTION_NAME);\n\t\tthis.sContentType = StringUtils.SafeToString(parameters.get(\"content-type\"), XoneJSONConnection.DEFAULT_CONTENT_TYPE);\n\t\tthis.bIsSqlQuery = StringUtils.ParseBoolValue(parameters.get(\"sqlquery\"), true);\n\t\t// TAG: 0604201601 nuevo parametro en el connstring para poder codeficar el cupero del post en formato key=valeu&key=vale\n\t\tthis.bPostUrlEncode = StringUtils.ParseBoolValue(parameters.get(\"postencode\"), false);\n\t\tthis.bIsCertificatePinningEnabled = StringUtils.ParseBoolValue(parameters.get(\"enablecertificatepinning\"));\n\t\tthis.sLocalCertPath = StringUtils.SafeToString(parameters.get(\"localcertificatepath\"));\n\t\t// Para la autenticacion remota, puede ser por conexion o por llamada del script del metodo\n\t\tthis.bAuthenticate = StringUtils.ParseBoolValue(parameters.get(\"auth\"), false);\n\t\tif (this.bAuthenticate) {\n\t\t\tthis.sAuthenticationUsername = parameters.get(\"user id\");\n\t\t\tthis.sAuthenticationPassword = parameters.get(\"password\");\n\t\t}\n\t\tthis.bUseRemoteBroker = StringUtils.ParseBoolValue(parameters.get(\"remote broker\"), false);\n\t\tthis.sRemoteMapped = StringUtils.SafeToString(parameters.get(\"remote mapped\"));\n\t\tthis.sRemoteDest = StringUtils.SafeToString(parameters.get(\"remote destination\"));\n\t\tthis.bAllowUnsafeCertificates = StringUtils.ParseBoolValue(parameters.get(\"allowunsafecertificates\"), false);\n\t}\n\n\tcreateStatement() {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tisClosed(): boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tcommit() {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tbeginTrans(): void {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\trollback(): void {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\texecute(parameter: any, MaxRows: number) {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\texecuteUpdate(sql: string): number;\n\texecuteUpdate(Sentence: any): number;\n\texecuteUpdate(Sentence: any): number {\n\t\treturn 0;\n\t}\n\texecuteOperation(OperType: number, tableName: string, values: any, whereClause: string): number {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tgetDBMS(): string {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\touterJoinsSupported(): boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tacceptsParsedSentences(): boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tacceptsEmptyQueries(): boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tLastRowsAffected(): number {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tLastInsertedRowId(): number {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tcancelProcesses(flags: number): number {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tsetCryptoData(cryptoData: Hashtable<string, Object>): void {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tgetCryptoData(): Hashtable<string, Object> {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tcryptoSupported(): boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tgetTokenFromAuth(login: string, pass: string): string {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tpublic getFlags() {\n\t\treturn this.nFlags;\n\t}\n\n\tpublic isSqlQueryDisabled() {\n\t\treturn !this.bIsSqlQuery;\n\t}\n\n\tpublic getMethod() {\n\t\treturn this.sMethod;\n\t}\n\n\t/**\n\t * name\n\t */\n\tpublic name() {}\n\tgetUrlAddress() {\n\t\treturn this.sUrlAddress;\n\t}\n}\n","import { Ref, nextTick, watch } from \"vue\";\nimport { XoneDataObject } from \"./appData/core/XoneDataObject\";\nimport { getView } from \"./XoneViewsHandler\";\n\n/** @type {boolean} */\nlet _isScaleFontsize = false;\n\n/** @type {string} */\nlet _webFontFactor = \"6\";\n\n/**\n * setIsScaleFontsize\n * @param {boolean} value\n */\nexport const setIsScaleFontsize = (value) => (_isScaleFontsize = value);\n\n/**\n * setWebFontFactor\n * @param {number} value\n */\nexport const setWebFontFactor = (value) => (_webFontFactor = value);\n\n/**\n * Types Definitions\n *\n * @typedef {Object} Margins\n * @property {string} top\n * @property {string} right\n * @property {string} bottom\n * @property {string} left\n *\n * @typedef {Object} Paddings\n * @property {string} top\n * @property {string} right\n * @property {string} bottom\n * @property {string} left\n *\n * @typedef {Object} Borders\n * @property {boolean} top\n * @property {boolean} right\n * @property {boolean} bottom\n * @property {boolean} left\n *\n * @typedef {Object} ContainerAlign\n * @property {string} row\n * @property {string} column\n *\n * @typedef {Object} Floating\n * @property {boolean} floating\n * @property {string} [top]\n * @property {string} [left]\n *\n * @typedef {Object} ContainerAttributes\n * @property {Object} align\n * @property {string} animationIn\n * @property {string} animationOut\n * @property {string} bgColor\n * @property {string} bMargin\n * @property {string} borderColor\n * @property {string} borderCornerRadius\n * @property {Borders} borders\n * @property {number} borderWidth\n * @property {string} cellEvenColor\n * @property {string} cellOddColor\n * @property {string} cellSelectedBgColor\n * @property {string} disableVisible\n * @property {string} drawerOrientation\n * @property {number} elevation\n * @property {string} fixed\n * @property {Floating} floating\n * @property {string} foreColor\n * @property {boolean} framebox\n * @property {boolean} groupSwipe\n * @property {string} height\n * @property {string} href\n * @property {string} id\n * @property {string} image\n * @property {boolean} keepAspectRatio\n * @property {string} lMargin\n * @property {boolean} loadAll\n * @property {Margins} margins\n * @property {string} minHeight\n * @property {string} minWidth\n * @property {string} name\n * @property {boolean} newLine\n * @property {string} node\n * @property {boolean} noTab\n * @property {string} onClick\n * @property {string} onFocus\n * @property {string} onScroll\n * @property {string} orientation\n * @property {Paddings} paddings\n * @property {string} rMargin\n * @property {boolean} scroll\n * @property {string} scrollOrientation\n * @property {string} tabBgColor\n * @property {string} tabFontSize\n * @property {string} tabForecolor\n * @property {Paddings} tabPaddings\n * @property {string} tabSelectedForecolor\n * @property {string} tMargin\n * @property {string} viewMode\n * @property {string} width\n * @property {boolean} wrap\n *\n * @typedef {Object} PropAttributes\n * @property {ContainerAlign|string} align\n * @property {string} allowedExtensions\n * @property {boolean} autosave\n * @property {Number} autoslideDelay\n * @property {string} bgColor\n * @property {string} bMargin\n * @property {string} borderColor\n * @property {string} borderCornerRadius\n * @property {Borders} borders\n * @property {number} borderWidth\n * @property {number} breadcrumbFontSize\n * @property {number} breadcrumbForeColor\n * @property {number} breadcrumbSelectedFontSize\n * @property {number} breadcrumbSelectedForeColor\n * @property {string} buttonOption\n * @property {string} calendarViewMode\n * @property {string} cellBgColor\n * @property {string} cellBorderColor\n * @property {string} cellEvenColor\n * @property {string} cellForeColor\n * @property {string} cellOddColor\n * @property {string} cellOtherMonthBgColor\n * @property {string} cellSelectedBgColor\n * @property {string} cellSelectedBorderColor\n * @property {string} cellSelectedForeColor\n * @property {Object} contents\n * @property {string} disableEdit\n * @property {string} disableVisible\n * @property {boolean} editInRow\n * @property {number} elevation\n * @property {string} fieldSize\n * @property {boolean} fixedText\n * @property {Floating} floating\n * @property {boolean} floatingTooltip\n * @property {boolean} fluidLoad\n * @property {boolean} fontBold\n * @property {string} fontSize\n * @property {string} foreColor\n * @property {number} galleryColumns\n * @property {string} height\n * @property {string} href\n * @property {string} image\n * @property {string} imgChecked\n * @property {string} imgCheckedDisabled\n * @property {string} imgHeight\n * @property {string} imgUnchecked\n * @property {string} imgUncheckedDisabled\n * @property {string} imgWidth\n * @property {boolean} isRadio\n * @property {boolean|Number} isVisible\n * @property {boolean} keepAspectRatio\n * @property {string} labelAlign\n * @property {boolean} labelBox\n * @property {string} labelWidth\n * @property {string} lines\n * @property {string} linkedField\n * @property {string} linkedTo\n * @property {string} lMargin\n * @property {boolean} locked\n * @property {Object} margins\n * @property {Object} method\n * @property {string} minHeight\n * @property {string} minWidth\n * @property {boolean} multiLine\n * @property {string} name\n * @property {string} node\n * @property {Object} onClick\n * @property {string} onEditorAction\n * @property {Object} onFocusChanged\n * @property {string} onScroll\n * @property {Object} onTextChanged\n * @property {Paddings} paddings\n * @property {number} paginationSize\n * @property {string} postOnchange\n * @property {string} radioGroup\n * @property {boolean} readOnly\n * @property {string} rMargin\n * @property {number} rowsPerPage\n * @property {boolean} showInline\n * @property {boolean} showInlineKeyboard\n * @property {number} size\n * @property {string} textAlign\n * @property {string} textBgColor\n * @property {string} textBgColorDisabled\n * @property {Object} textBorder\n * @property {boolean} textBorderBottom\n * @property {boolean} textBorderLeft\n * @property {boolean} textBorderRight\n * @property {boolean} textBorderTop\n * @property {string} textFontSize\n * @property {string} textForeColor\n * @property {string} textForeColorDisabled\n * @property {string} title\n * @property {string} tMargin\n * @property {string} tooltip\n * @property {string} tooltipColor\n * @property {string} tooltipForeColor\n * @property {string} type\n * @property {string} viewMode\n * @property {boolean} weekdaysLongname\n * @property {string} width\n * @property {boolean} wrap\n *\n * @typedef {ContainerAttributes|PropAttributes} XoneAttributes\n */\n\n/**\n * Class to handle mappings attributes\n */\nclass XoneAttributesHandler {\n\t/**\n\t * _instance\n\t * @type {XoneAttributesHandler}\n\t */\n\tstatic _instance;\n\n\t/**\n\t * mapFormulaFunctions\n\t * @type {Map<string,Function>}\n\t */\n\t_mapFormulaFunctions = new Map();\n\n\tconstructor() {\n\t\tif (XoneAttributesHandler._instance) return XoneAttributesHandler._instance;\n\n\t\tXoneAttributesHandler._instance = this;\n\t}\n\n\t/**\n\t * Convert xone units to html units\n\t * @param {any} value\n\t * @param {boolean} [isLine]\n\t * @returns {string}\n\t */\n\tconvertUnits(value, isLine = false) {\n\t\tif (!value) return;\n\n\t\tif (value.toString().includes(\"px\") || value.toString().includes(\"%\")) return value;\n\n\t\tif (value.toString().includes(\"p\")) return value.toString().replace(\"p\", \"px\");\n\n\t\tif (isNaN(Number(value))) return value;\n\n\t\tconst num = Number(value);\n\t\tif (num < 0) return num === -1 ? \"grow\" : \"auto\";\n\n\t\tif (isLine) return num + 0.5 + \"em\";\n\n\t\treturn num === 0 ? \"0\" : `${num}em`;\n\t}\n\n\t/**\n\t * Get Paddings\n\t * @param {Object} attributes\n\t * @returns {Paddings}\n\t */\n\tgetPaddings(attributes) {\n\t\treturn {\n\t\t\ttop: this.convertUnits(attributes.tPadding ?? 0),\n\t\t\tright: this.convertUnits(attributes.rPadding ?? 0),\n\t\t\tbottom: this.convertUnits(attributes.bPadding ?? 0),\n\t\t\tleft: this.convertUnits(attributes.lPadding ?? 0),\n\t\t};\n\t}\n\t/**\n\t * Get Paddings\n\t * @param {Object} attributes\n\t * @returns {Paddings}\n\t */\n\tgetTabPaddings(attributes) {\n\t\treturn {\n\t\t\ttop: this.convertUnits(attributes.tabTPadding ?? 0),\n\t\t\tright: this.convertUnits(attributes.tabRPadding ?? 0),\n\t\t\tbottom: this.convertUnits(attributes.tabBPadding ?? 0),\n\t\t\tleft: this.convertUnits(attributes.tabLPadding ?? 0),\n\t\t};\n\t}\n\n\t/**\n\t * Resolve margins\n\t * @param {Object} attributes\n\t * @returns {Margins}\n\t */\n\tgetMargins(attributes) {\n\t\t/**\n\t\t * Margins\n\t\t * @type {Array<string>}\n\t\t */\n\t\tlet [top, right, bottom, left] = [\n\t\t\tattributes.tMargin ?? \"0\",\n\t\t\tattributes.rMargin ?? \"0\",\n\t\t\tattributes.bMargin ?? \"0\",\n\t\t\tattributes.lMargin ?? \"0\",\n\t\t].map((e) => this.convertUnits(e));\n\t\tif (attributes.node === \"prop\" && attributes.floatingTooltip && top === \"0\") top = \"1rem\";\n\t\treturn { top, right, bottom, left };\n\t}\n\n\t/**\n\t * Resolve borders\n\t * @param {Object} attributes\n\t * @returns {Borders}\n\t */\n\tgetBorders(attributes) {\n\t\tconst [top, right, bottom, left] = [\n\t\t\t(attributes.textBorder ?? \"true\") === \"true\" && (attributes.textBorderTop ?? \"true\") === \"true\",\n\t\t\t(attributes.textBorder ?? \"true\") === \"true\" && (attributes.textBorderRight ?? \"true\") === \"true\",\n\t\t\t(attributes.textBorder ?? \"true\") === \"true\" && (attributes.textBorderBottom ?? \"true\") === \"true\",\n\t\t\t(attributes.textBorder ?? \"true\") === \"true\" && (attributes.textBorderLeft ?? \"true\") === \"true\",\n\t\t];\n\n\t\treturn { top, right, bottom, left };\n\t}\n\n\t/**\n\t * Get label align\n\t * @param {*} align\n\t * @returns {\"flex-start\"|\"flex-end\"|\"center\"|undefined}\n\t */\n\tgetLabelAlign(align) {\n\t\tif (!align) return;\n\t\tif (align?.toString().includes(\"left\")) return \"flex-start\";\n\t\tif (align?.toString().includes(\"right\")) return \"flex-end\";\n\t\tif (align?.toString().includes(\"center\")) return \"center\";\n\t}\n\n\t/**\n\t * Get prop align\n\t * @param {string} align\n\t * @param {string} [type]\n\t * @returns {\"center\"|\"end\"|\"start\"|undefined}\n\t */\n\tgetPropAlign(align, type = \"T\") {\n\t\tif (!align) {\n\t\t\tif (type.startsWith(\"N\")) return \"end\";\n\t\t}\n\t\tif (align?.toString().includes(\"left\")) return \"start\";\n\t\tif (align?.toString().includes(\"right\")) return \"end\";\n\t\tif (align?.toString().includes(\"center\")) return \"center\";\n\t}\n\n\t/**\n\t * Resolve container align\n\t * @param {Object} attributes\n\t * @returns {ContainerAlign}\n\t */\n\tgetContainerAlign(attributes) {\n\t\tlet align = (attributes.align ?? \"\").toString(),\n\t\t\trow = \"\",\n\t\t\tcolumn = \"\";\n\t\tif (align.includes(\"left\")) row = \"flex-start\";\n\t\tif (align.includes(\"right\")) row = \"flex-end\";\n\t\tif (align.includes(\"top\")) column = \"flex-start\";\n\t\tif (align.includes(\"bottom\")) column = \"flex-end\";\n\t\tif (align.includes(\"center\")) {\n\t\t\tif (align === \"center\") {\n\t\t\t\trow = \"center\";\n\t\t\t\tcolumn = \"center\";\n\t\t\t} else if (row === \"\") row = \"center\";\n\t\t\telse column = \"center\";\n\t\t\tif (column === \"\" && align.replace(\"center\", \"\").includes(\"center\")) column = \"center\";\n\t\t}\n\n\t\treturn { row, column };\n\t}\n\n\t/**\n\t * Node visibility depending on the visibility bit\n\t * @param {Object} attributes\n\t * @param {Number} [visibilityBit]\n\t */\n\tisNodeVisible() {\n\t\t//(attributes, visibilityBit = 1) {\n\t\treturn true;\n\t\t// Comentado porque ya viene en el getLayout de appData\n\t\t// return (attributes.visible ?? 1) & Number(visibilityBit << 0 !== 0);\n\t}\n\n\t/**\n\t * Calculate control size depending on container size and attribute width/height\n\t * @param {string|Number|undefined} attributeSize\n\t * @param {Number} containerSize\n\t * @param {Number} scaleFactor\n\t */\n\tgetScaledSize(attributeSize, containerSize, scaleFactor) {\n\t\tlet size;\n\n\t\tif (!attributeSize) return;\n\n\t\tif (attributeSize.toString().includes(\"px\")) size = scaleFactor * Number(attributeSize.toString().replace(\"px\", \"\"));\n\t\telse if (attributeSize.toString().includes(\"%\")) size = (containerSize * Number(attributeSize.toString().replace(\"%\", \"\"))) / 100;\n\n\t\treturn size;\n\t}\n\n\t/**\n\t * Calculate control position on container depending on size and scale\n\t * @param {string} position\n\t * @param {number} scaleFactor\n\t * @returns {string}\n\t */\n\tgetScaledPosition(position, scaleFactor) {\n\t\t/**  @type {string|number} */\n\t\tlet value = position;\n\n\t\tif (!value) return;\n\n\t\tif (value.toString().includes(\"px\")) {\n\t\t\tvalue = value.replace(\"px\", \"\");\n\t\t\tif (isNaN(Number(value))) return;\n\t\t\treturn `${Number(value) * scaleFactor}px`;\n\t\t}\n\t\treturn value;\n\t}\n\n\t/**\n\t * Calculate and adjust height to parent container when height attribute is null or auto and height > containerHeight\n\t * @param {PropAttributes} attributes\n\t * @param {Ref<HTMLElement>} htmlElement\n\t * @param {boolean} [isResized]\n\t */\n\tfitHeightToContainer = async (attributes, htmlElement, isResized = false) => {\n\t\t// Si tenemos mrgenes negativos, no hacemos el fit por problemas de renderizado del html\n\t\tif (attributes.margins?.top?.toString().startsWith(\"-\") || attributes.margins?.bottom?.toString().startsWith(\"-\")) return;\n\n\t\ttry {\n\t\t\tif (attributes.height !== \"auto\" && attributes.width == \"auto\") return;\n\t\t\tawait nextTick();\n\n\t\t\t/**\n\t\t\t * frame / group parent element\n\t\t\t * @type {HTMLElement}\n\t\t\t */\n\t\t\tconst containerElement = htmlElement.value?.parentElement?.parentElement?.parentElement;\n\t\t\tif (!containerElement) return;\n\n\t\t\tif (isResized || (containerElement.parentElement && containerElement.parentElement.classList.contains(\"xone-contents-row\"))) {\n\t\t\t\t// If parent is contents row and  maxHeight is setted, reset and fit again\n\t\t\t\tif (htmlElement.value.style.maxHeight) {\n\t\t\t\t\thtmlElement.value.style.maxHeight = null; // button element\n\t\t\t\t\thtmlElement.value.parentElement.style.maxHeight = null; // prop element\n\t\t\t\t\thtmlElement.value.parentElement.parentElement.style.maxHeight = null; // row element\n\t\t\t\t\treturn setTimeout(() => this.fitHeightToContainer(attributes, htmlElement), 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!containerElement || containerElement.offsetHeight === 0) return;\n\n\t\t\tlet maxHeight = `calc(${containerElement.offsetHeight}px + var(--margin-top) + var(--margin-bottom))`; // container width\n\n\t\t\thtmlElement.value.style.maxHeight = maxHeight; // button element\n\t\t\t// htmlElement.value.style.objectFit = \"contain\";\n\t\t\thtmlElement.value.parentElement.style.maxHeight = maxHeight; // prop element\n\t\t\thtmlElement.value.parentElement.parentElement.style.maxHeight = maxHeight; // row element\n\t\t} catch {}\n\t};\n\n\t/**\n\t * Calculate and adjust width to parent container when width attribute is null or auto and width > containerWidth\n\t * @param {PropAttributes} attributes\n\t * @param {Ref<HTMLElement>} htmlElement\n\t * @param {boolean} [isResized]\n\t */\n\tfitWidthToContainer = async (attributes, htmlElement, isResized = false) => {\n\t\t// Si tenemos mrgenes negativos, no hacemos el fit por problemas de renderizado del html\n\t\tif (attributes.margins?.left?.toString().startsWith(\"-\") || attributes.margins?.right?.toString().startsWith(\"-\")) return;\n\n\t\ttry {\n\t\t\tif (attributes.height === \"auto\" && attributes.width !== \"auto\") return;\n\n\t\t\tawait nextTick();\n\n\t\t\t/**\n\t\t\t * frame / group parent element\n\t\t\t * @type {HTMLElement}\n\t\t\t */\n\t\t\tconst containerElement = htmlElement.value?.parentElement?.parentElement?.parentElement;\n\n\t\t\tif (!containerElement) return;\n\n\t\t\t// If parent is contents row and  maxWidth is setted, reset and fit again\n\t\t\tif (isResized || (containerElement.parentElement && containerElement.parentElement.classList.contains(\"xone-contents-row\"))) {\n\t\t\t\tif (htmlElement.value.style.maxWidth) {\n\t\t\t\t\thtmlElement.value.style.maxWidth = null; // button element\n\t\t\t\t\thtmlElement.value.parentElement.style.maxWidth = null; // prop element\n\t\t\t\t\thtmlElement.value.parentElement.parentElement.style.maxWidth = null; // row element\n\t\t\t\t\treturn setTimeout(() => this.fitWidthToContainer(attributes, htmlElement), 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!containerElement || containerElement.offsetWidth === 0) return;\n\n\t\t\tlet maxWidth = `calc(${containerElement.offsetWidth}px + var(--margin-right) + var(--margin-left))`; // container width\n\n\t\t\thtmlElement.value.style.maxWidth = maxWidth; // button element\n\t\t\t// htmlElement.value.style.objectFit = \"contain\";\n\t\t\thtmlElement.value.parentElement.style.maxWidth = maxWidth; // prop element\n\t\t\thtmlElement.value.parentElement.parentElement.style.maxWidth = maxWidth; // row element\n\t\t} catch {}\n\t};\n\n\t/**\n\t * Calculate font size\n\t * @param {string} fontSize\n\t */\n\tgetFontSize(fontSize) {\n\t\tif (fontSize && !isNaN(fontSize) && _isScaleFontsize) fontSize = Number(fontSize) + _webFontFactor;\n\t\tconst u = window.innerWidth > window.innerHeight ? \"vh\" : \"vw\";\n\t\tif (!fontSize) fontSize = \"8\";\n\t\tif (isNaN(Number(fontSize))) return fontSize;\n\t\treturn `calc(${Number(fontSize) + 3}px + .5${u})`;\n\t}\n\n\t/**\n\t * Get prop type\n\t * @param {Object} attributes\n\t */\n\tgetPropType(attributes) {\n\t\tlet type = attributes.type ?? \"T\";\n\t\tif (type === \"T\") {\n\t\t\tif ((attributes.mask ?? \"\") == \"Hh#:#Mm\") type = \"TT\";\n\t\t}\n\t\treturn type;\n\t}\n\n\t/**\n\t * Resolve image attribute\n\t * @param {string} img\n\t */\n\tgetImage(img) {\n\t\tif (!img) return null;\n\t\tif (img)\n\t\t\timg = img\n\t\t\t\t.replace(\"./icons/\", \"\")\n\t\t\t\t.replace(\"##APP##\", \"\")\n\t\t\t\t.replace(\"##APPPATH##\", \"\")\n\t\t\t\t.replace(\"\\\\icons\\\\\", \"\");\n\n\t\treturn img;\n\t}\n\n\t/**\n\t * Resolve floating / top / left attributes\n\t * @param {*} attributes\n\t * @returns {Floating}\n\t */\n\tgetFloating(attributes) {\n\t\tif (!attributes.floating || !attributes.top || !attributes.left || attributes.floating !== \"true\") return { floating: false };\n\t\tconst top = this.convertUnits(attributes.top);\n\t\tconst left = this.convertUnits(attributes.left);\n\t\treturn { floating: true, top, left };\n\t}\n\n\t/**\n\t * getAnimationIn\n\t * @param {string} animation\n\t */\n\tgetAnimationIn(animation) {\n\t\tswitch (animation) {\n\t\t\tcase \"##RIGHT_IN##\":\n\t\t\t\treturn \"\";\n\t\t\tcase \"##LEFT_IN##\":\n\t\t\t\treturn \"slideRight .3s\";\n\t\t\tcase \"##PUSH_DOWN_IN##\":\n\t\t\t\treturn \"slideDown .3s\";\n\t\t\tcase \"##PUSH_IN##\":\n\t\t\t\treturn \"slideUp .3s\";\n\t\t\tcase \"##ALPHA_IN##\":\n\t\t\t\treturn \"fadeIn .3s\";\n\t\t\tcase \"##ZOOM_IN##\":\n\t\t\t\treturn \"zoomIn .3s\";\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\t}\n\n\t/**\n\t * Attributes for prop\n\t * @param {Object} attributes\n\t * @param {Number} visibilityBit\n\t * @returns {PropAttributes}\n\t */\n\tgetPropAttributes(attributes, visibilityBit = 1) {\n\t\treturn {\n\t\t\talign: attributes.type === \"B\" ? this.getContainerAlign(attributes) : this.getPropAlign(attributes.align, attributes.type),\n\t\t\tallowedExtensions: attributes.allowedExtensions,\n\t\t\tautosave: attributes.autosave === \"true\",\n\t\t\tautoslideDelay: !isNaN(Number(attributes.autoslideDelay)) && Number(attributes.autoslideDelay),\n\t\t\tbgColor: attributes.bgColor,\n\t\t\tbMargin: attributes.bMargin,\n\t\t\tborderColor: attributes.borderColor || attributes.textForeColor || attributes.foreColor || \"black\",\n\t\t\tborderCornerRadius: `${attributes.borderCornerRadius ?? 2}px`,\n\t\t\tborders: this.getBorders(attributes),\n\t\t\tborderWidth: `${attributes.borderWidth ?? 1}px`,\n\t\t\tbreadcrumbFontSize: this.getFontSize(attributes.breadcrumbFontSize),\n\t\t\tbreadcrumbForeColor: attributes.breadcrumbForeColor,\n\t\t\tbreadcrumbSelectedFontSize: this.getFontSize(attributes.breadcrumbSelectedFontSize),\n\t\t\tbreadcrumbSelectedForeColor: attributes.breadcrumbSelectedForeColor,\n\t\t\tbuttonOption: attributes.buttonOption,\n\t\t\tcalendarViewMode: attributes.calendarViewMode,\n\t\t\tcellBgColor: attributes.cellBgColor,\n\t\t\tcellBorderColor: attributes.cellBorderColor,\n\t\t\tcellEvenColor: attributes.cellEvenColor ?? \"transparent\",\n\t\t\tcellForeColor: attributes.cellForeColor,\n\t\t\tcellOddColor: attributes.cellOddColor ?? \"transparent\",\n\t\t\tcellOtherMonthBgColor: attributes.cellOtherMonthBgColor,\n\t\t\tcellSelectedBgColor: attributes.cellSelectedBgColor,\n\t\t\tcellSelectedBorderColor: attributes.cellSelectedBorderColor,\n\t\t\tcellSelectedForeColor: attributes.cellSelectedForeColor,\n\t\t\tcontents: attributes.contents,\n\t\t\tdisableEdit: attributes.disableEdit,\n\t\t\tdisableVisible: attributes.disableVisible,\n\t\t\teditInRow: attributes.editInRow === \"true\",\n\t\t\televation: attributes.elevation ?? 0,\n\t\t\tfieldSize: this.convertUnits(attributes.fieldSize ?? 12),\n\t\t\tfixedText: attributes.fixedText === \"true\",\n\t\t\tfloating: this.getFloating(attributes),\n\t\t\tfloatingTooltip: attributes.floatingTooltip ?? false,\n\t\t\tfluidLoad: attributes.fluidLoad === \"true\",\n\t\t\tfontBold: attributes.fontBold === \"true\",\n\t\t\tfontSize: this.getFontSize(attributes.fontSize),\n\t\t\tforeColor: attributes.foreColor,\n\t\t\tgalleryColumns: Number(attributes.galleryColumns ?? 1),\n\t\t\theight: this.convertUnits(attributes.height),\n\t\t\thref: attributes.href,\n\t\t\timage: this.getImage(attributes.image),\n\t\t\timgChecked: this.getImage(attributes.imgChecked),\n\t\t\timgCheckedDisabled: this.getImage(attributes.imgCheckedDisabled),\n\t\t\timgHeight: this.convertUnits(attributes.imgHeight),\n\t\t\timgUnchecked: this.getImage(attributes.imgUnchecked),\n\t\t\timgUncheckedDisabled: this.getImage(attributes.imgUncheckedDisabled),\n\t\t\timgWidth: this.convertUnits(attributes.imgWidth),\n\t\t\tisRadio: attributes.checkType === \"radio\" || attributes.viewMode === \"radio\",\n\t\t\tisVisible: this.isNodeVisible(attributes, visibilityBit),\n\t\t\tkeepAspectRatio: attributes.keepAspectRatio === \"true\",\n\t\t\tlabelAlign: this.getLabelAlign(attributes.align),\n\t\t\tlabelBox: attributes.labelBox === \"true\",\n\t\t\tlabelWidth: attributes.type === \"TL\" && attributes.width ? \"100%\" : this.convertUnits(attributes.labelwidth ?? 8),\n\t\t\tlines: this.convertUnits(attributes.lines ?? \"auto\", true),\n\t\t\tlinkedField: attributes.linkedField,\n\t\t\tlinkedTo: attributes.linkedTo,\n\t\t\tlMargin: attributes.lMargin,\n\t\t\tlocked: attributes.locked === \"true\",\n\t\t\tmargins: this.getMargins(attributes),\n\t\t\tmethod: attributes.method,\n\t\t\tminHeight: this.convertUnits(attributes.minHeight),\n\t\t\tminWidth: this.convertUnits(attributes.minWidth),\n\t\t\tmultiLine: Number(attributes.lines ?? 1) !== 1,\n\t\t\tname: attributes.name,\n\t\t\tnode: attributes.node,\n\t\t\tonClick: attributes.onClick,\n\t\t\tonEditorAction: attributes.onEditorAction,\n\t\t\tonFocusChanged: attributes.onFocusChanged,\n\t\t\tonScroll: attributes.onScroll,\n\t\t\tonTextChanged: attributes.onTextChanged,\n\t\t\tpaddings: this.getPaddings(attributes),\n\t\t\tpaginationSize: !isNaN(attributes.paginationSize) ? Number(attributes.paginationSize) : undefined,\n\t\t\tpostOnchange: attributes.postOnchange,\n\t\t\tradioGroup: attributes.radioGroup,\n\t\t\treadOnly: (attributes.readOnly ?? \"true\") === \"true\",\n\t\t\trMargin: attributes.rMargin,\n\t\t\trowsPerPage: attributes.rowsPerPage,\n\t\t\tshowInline: attributes.showInline === \"true\",\n\t\t\tshowInlineKeyboard: attributes.showInlineKeyboard === \"true\",\n\t\t\tsize: attributes.size,\n\t\t\ttextAlign: this.getPropAlign(attributes.textAlign, attributes.type),\n\t\t\ttextBgColor: attributes.textBgColor,\n\t\t\ttextBgColorDisabled: attributes.textBgColorDisabled,\n\t\t\ttextBorder: attributes.textBorder,\n\t\t\ttextBorderBottom: attributes.textBorderBottom,\n\t\t\ttextBorderLeft: attributes.textBorderLeft,\n\t\t\ttextBorderRight: attributes.textBorderRight,\n\t\t\ttextBorderTop: attributes.textBorderTop,\n\t\t\ttextFontSize: this.getFontSize(attributes.textFontSize),\n\t\t\ttextForeColor: attributes.textForeColor || attributes.foreColor,\n\t\t\ttextForeColorDisabled: attributes.textForeColorDisabled,\n\t\t\ttitle: attributes.title,\n\t\t\ttMargin: attributes.tMargin,\n\t\t\ttooltip: attributes.tooltip,\n\t\t\ttooltipColor: attributes.tooltipColor,\n\t\t\ttooltipForeColor: attributes.tooltipForeColor,\n\t\t\ttype: this.getPropType(attributes),\n\t\t\tviewMode: attributes.viewMode,\n\t\t\tweekdaysLongname: attributes.weekdaysLongname === \"true\",\n\t\t\twidth: this.convertUnits(attributes.width),\n\t\t\twrap: attributes.wrap === \"true\",\n\t\t};\n\t}\n\n\t/**\n\t * Attributes for containers\n\t * @param {Object} attributes\n\t * @returns {ContainerAttributes}\n\t */\n\tgetContainerAttributes(attributes) {\n\t\treturn {\n\t\t\talign: this.getContainerAlign(attributes),\n\t\t\tanimationIn: this.getAnimationIn(attributes.animationIn),\n\t\t\tanimationOut: null, //this.getAnimation(attributes.animationOut),\n\t\t\tbgColor: attributes.bgColor,\n\t\t\tbMargin: attributes.bMargin,\n\t\t\tborderColor: attributes.borderColor ?? \"black\",\n\t\t\tborderCornerRadius: `${attributes.borderCornerRadius}px`,\n\t\t\tborders: this.getBorders(attributes),\n\t\t\tborderWidth: `${attributes.borderWidth ?? 1}px`,\n\t\t\tcellEvenColor: attributes.cellEvenColor ?? \"transparent\",\n\t\t\tcellOddColor: attributes.cellOddColor ?? \"transparent\",\n\t\t\tcellSelectedBgColor: attributes.cellSelectedBgColor,\n\t\t\tdisableVisible: attributes.disableVisible,\n\t\t\tdrawerOrientation: attributes.drawerOrientation,\n\t\t\televation: attributes.elevation ?? 0,\n\t\t\tfixed: attributes.fixed ?? \"\",\n\t\t\tfloating: this.getFloating(attributes),\n\t\t\tforeColor: attributes.foreColor,\n\t\t\tframebox: attributes.framebox === \"true\",\n\t\t\tgroupSwipe: attributes.groupSwipe === \"true\",\n\t\t\theight: this.convertUnits(attributes.height),\n\t\t\thref: attributes.href,\n\t\t\tid: attributes.id,\n\t\t\timage: this.getImage(attributes.image),\n\t\t\tkeepAspectRatio: attributes.keepAspectRatio === \"true\",\n\t\t\tlMargin: attributes.lMargin,\n\t\t\tloadAll: attributes.loadAll === \"true\",\n\t\t\tmargins: this.getMargins(attributes),\n\t\t\tminHeight: this.convertUnits(attributes.minHeight),\n\t\t\tminWidth: this.convertUnits(attributes.minWidth),\n\t\t\tname: attributes.name,\n\t\t\tnewLine: (attributes.newLine ?? \"true\") === \"true\",\n\t\t\tnode: attributes.node,\n\t\t\tnoTab: attributes.noTab === \"true\",\n\t\t\tonClick: attributes.onClick,\n\t\t\tonFocus: attributes.onFocus,\n\t\t\tonScroll: attributes.onScroll,\n\t\t\torientation: attributes.orientation ?? \"\",\n\t\t\tpaddings: this.getPaddings(attributes),\n\t\t\trMargin: attributes.rMargin,\n\t\t\tscroll: attributes.scroll === \"true\",\n\t\t\tscrollOrientation: attributes.scrollOrientation ?? \"vertical\",\n\t\t\ttabBgColor: attributes.tabBgColor ?? \"white\",\n\t\t\ttabFontSize: this.getFontSize(attributes.tabFontSize),\n\t\t\ttabForecolor: attributes.tabForecolor ?? \"black\",\n\t\t\ttabPaddings: this.getTabPaddings(attributes),\n\t\t\ttabSelectedForecolor: attributes.tabSelectedForecolor ?? \"#3273dc\",\n\t\t\ttMargin: attributes.tMargin,\n\t\t\tviewMode: attributes.viewMode,\n\t\t\twidth: this.convertUnits(attributes.width),\n\t\t\twrap: attributes.wrap === \"true\",\n\t\t};\n\t}\n\n\t/**\n\t * Execute method node (method, onfocus ...)\n\t * @param {string} method\n\t * @param {XoneDataObject} xoneDataObject\n\t * @param {string} [propName]\n\t * @returns {Promise<boolean>}\n\t */\n\tasync executeMethod(method, xoneDataObject, propName) {\n\t\ttry {\n\t\t\tconst lowerCaseMethod = method?.trim().toLowerCase();\n\n\t\t\t// Remove 'javascript:' if  exists\n\t\t\tif (lowerCaseMethod.startsWith(\"javascript:\")) method = method.trim().substring(11);\n\n\t\t\t//\n\t\t\t// Is not executeNode\n\t\t\tif (!lowerCaseMethod.includes(\"executenode\")) {\n\t\t\t\t// Refresh\n\t\t\t\tif (lowerCaseMethod.startsWith(\"refresh\")) {\n\t\t\t\t\tif (!propName) return;\n\t\t\t\t\treturn xoneDataObject.DoRunScriptAsync(`ui.refresh('${propName}')`);\n\t\t\t\t}\n\t\t\t\t// RunScript\n\t\t\t\treturn xoneDataObject.DoRunScriptAsync(method);\n\t\t\t}\n\n\t\t\t//\n\t\t\t// Is executeNode\n\n\t\t\t// Parse method\n\t\t\tlet params;\n\t\t\tmethod = method\n\t\t\t\t.substring(method.indexOf(\"(\"))\n\t\t\t\t.replace(\"(\", \"\")\n\t\t\t\t.replace(\")\", \"\");\n\n\t\t\t// with params\n\t\t\tif (method.includes(\"(\") && method.includes(\")\")) {\n\t\t\t\tparams = method.substring(method.indexOf(\"(\"));\n\t\t\t\tmethod = method.replace(params, \"\");\n\t\t\t\tparams = params\n\t\t\t\t\t.replace(\"(\", \"\")\n\t\t\t\t\t.replace(\")\", \"\")\n\t\t\t\t\t.split(\",\");\n\t\t\t\tparams = params.map((param) =>\n\t\t\t\t\t!param.toString().startsWith(\"'\") &&\n\t\t\t\t\t!param.toString().startsWith('\"') &&\n\t\t\t\t\t!param.toString().startsWith(\"'\") &&\n\t\t\t\t\t!param.toString().startsWith('\"')\n\t\t\t\t\t\t? `'${param}'`\n\t\t\t\t\t\t: param\n\t\t\t\t);\n\t\t\t\tawait xoneDataObject.ExecuteNode(method, ...params);\n\t\t\t}\n\t\t\t// without params\n\t\t\telse {\n\t\t\t\tawait xoneDataObject.ExecuteNode(method);\n\t\t\t}\n\t\t} catch (ex) {\n\t\t\tconsole.error(ex);\n\t\t}\n\t}\n\n\t/**\n\t * Evaluate disableedit / disablevisible\n\t * @param {string} formula\n\t * @param {Object} dataModel\n\t */\n\tevalFormula(formula, dataModel) {\n\t\ttry {\n\t\t\t/**\n\t\t\t * Eval Function\n\t\t\t * @type {Function}\n\t\t\t */\n\t\t\tlet fFunction = this._mapFormulaFunctions.get(formula);\n\n\t\t\t// Function exist -> execute and return result\n\t\t\tif (fFunction) return fFunction(dataModel);\n\n\t\t\t// Function does not exist -> parse formula (from XOne to javascript) and create function\n\t\t\tconst operators = [\n\t\t\t\t// xone conditions\n\t\t\t\t{ from: \"+\", to: \" + \" },\n\t\t\t\t{ from: \"-\", to: \" - \" },\n\t\t\t\t{ from: \"/\", to: \" / \" },\n\t\t\t\t{ from: \"*\", to: \" * \" },\n\t\t\t\t{ from: \"&\", to: \" + \" },\n\t\t\t\t{ from: \" and \", to: \" && \" },\n\t\t\t\t{ from: \" or \", to: \" || \" },\n\t\t\t\t{ from: \"<>\", to: \" != \" },\n\t\t\t\t{ from: \">\", to: \" > \" },\n\t\t\t\t{ from: \"<\", to: \" < \" },\n\t\t\t\t{ from: \"=\", to: \" == \" },\n\t\t\t];\n\t\t\tlet st = formula;\n\t\t\t// Eliminamos espacios entre operadores\n\t\t\tdo {\n\t\t\t\toperators.forEach(({ from }) => (st = st.replace(\" \" + from, from)));\n\t\t\t\toperators.forEach(({ from }) => (st = st.replace(from + \" \", from)));\n\t\t\t} while (operators.some(({ from }) => st.includes(\" \" + from) || st.includes(from + \" \")));\n\n\t\t\tconst replacedOperators = [];\n\n\t\t\t// returns if formula includes an oper\n\t\t\tconst replaceOperator = (operator) => {\n\t\t\t\tlet index;\n\t\t\t\twhile ((index = st.toLowerCase().indexOf(operator.from)) !== -1) {\n\t\t\t\t\treplacedOperators.push({\n\t\t\t\t\t\tindex,\n\t\t\t\t\t\toper: operator.to,\n\t\t\t\t\t});\n\t\t\t\t\tst = st.replace(\n\t\t\t\t\t\tst.substr(index, operator.from.length),\n\t\t\t\t\t\tArray(operator.from.length + 1).join(\"~\") // Replace operator's chars with ~\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Parse opers\n\t\t\toperators.forEach(replaceOperator);\n\n\t\t\t// Clear extra chars\n\t\t\twhile (st.includes(\"~~\")) st = st.replace(\"~~\", \"~\");\n\n\t\t\t// Sort replaced operators by index\n\t\t\tconst order = replacedOperators.map((e) => e.index).sort((a, b) => a - b);\n\n\t\t\t// Generate the final formula to be evaluated\n\t\t\tlet stFinal = \"\";\n\t\t\tlet i = 0;\n\t\t\tst.split(\"~\").forEach((e) => {\n\t\t\t\tif (stFinal !== \"\" && i < order.length) {\n\t\t\t\t\t// Add Operator\n\t\t\t\t\tstFinal += replacedOperators.find((e) => e.index === order[i]).oper;\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t\tlet prop = e\n\t\t\t\t\t.trim()\n\t\t\t\t\t.split(\"(\")\n\t\t\t\t\t.join(\"\")\n\t\t\t\t\t.split(\")\")\n\t\t\t\t\t.join(\"\");\n\t\t\t\tif (Object.keys(dataModel).find((e) => e === prop)) {\n\t\t\t\t\t// Replace prop\n\t\t\t\t\treturn (stFinal += e.replace(prop, `self['${prop.trim()}']`));\n\t\t\t\t}\n\t\t\t\tstFinal += e;\n\t\t\t});\n\n\t\t\t// Replace macros ##FLD_ ##\n\t\t\tif (stFinal.includes(\"##FLD_\")) stFinal = stFinal.replace(/##FLD_/g, \"self['\").replace(/##/g, \"']\");\n\n\t\t\t// create function\n\t\t\tthis._mapFormulaFunctions.set(\n\t\t\t\tformula,\n\t\t\t\t(fFunction = Function(\n\t\t\t\t\t\"self\",\n\t\t\t\t\t`try{return ${stFinal}}catch(ex){console.error(\"Error evaluating formula:\", \"'${stFinal}'\");console.warn(ex);throw \"Error evaluating formula\";}`\n\t\t\t\t))\n\t\t\t);\n\t\t\t// eval formula\n\t\t\treturn fFunction(dataModel);\n\t\t} catch (ex) {\n\t\t\tconsole.error(\"Error evaluating formula\", formula, ex);\n\t\t}\n\t}\n\n\t/**\n\t * Observe changes in attributes model and data model with ##FLD_ fields and fetch them to attributes\n\t * @param {Ref<XoneAttributes>} attributes\n\t * @param {Ref<Object>} attributesModel\n\t * @param {Ref<XoneAttributes>} dataModel\n\t */\n\twatchAttributes(attributes, attributesModel, dataModel) {\n\t\t/**\n\t\t * resolve Attribute\n\t\t * @param {string} e Attribute\n\t\t */\n\t\tconst resolveAttr = (e) => {\n\t\t\tif (e === \"disableVisible\" || e === \"disableEdit\") return (attributes.value[e] = attributesModel.value[e]);\n\n\t\t\tlet st = attributesModel.value[e];\n\t\t\twhile (st?.toString().includes(\"##FLD\")) {\n\t\t\t\t// Foreign key\n\t\t\t\tconst foreignKey = st.substring(st.indexOf(\"##FLD_\") + 6, st.indexOf(\"##\", st.indexOf(\"##\") + 6));\n\t\t\t\t// Resolve ##FLD_\n\t\t\t\tif (foreignKey && Object.keys(dataModel).includes(foreignKey)) st = st.replace(`##FLD_${foreignKey}##`, dataModel[foreignKey]);\n\t\t\t\telse\n\t\t\t\t\treturn console.warn(\n\t\t\t\t\t\t`Could not resolve ##FLD_ in ${attributes.value.node} | ${attributes.value.name} -> ${e}=\"${attributesModel.value[e]}\"`\n\t\t\t\t\t);\n\t\t\t}\n\t\t\t// Resolve attribute\n\t\t\tconst newAttrs =\n\t\t\t\tattributesModel.value.node === \"prop\"\n\t\t\t\t\t? this.getPropAttributes({ ...attributes.value, [e]: st })\n\t\t\t\t\t: this.getContainerAttributes({ ...attributes.value, [e]: st });\n\t\t\t// Si el valor del atributo lo convierto a un objeto (margins, paddings y borders), lo asigno\n\t\t\tif (e.toLowerCase().contains(\"padding\")) {\n\t\t\t\tattributes.value.paddings = newAttrs.paddings;\n\t\t\t\tif (attributesModel.value.node === \"coll\") attributes.value.tabPaddings = newAttrs.tabPaddings;\n\t\t\t} else if (e.toLowerCase().contains(\"margin\")) attributes.value.margins = newAttrs.margins;\n\t\t\telse if (e.toLowerCase().contains(\"border\")) attributes.value.borders = newAttrs.borders;\n\t\t\t// Asignamos el valor del atributo modificado\n\t\t\tattributes.value[e] = newAttrs[e];\n\t\t};\n\t\t// Watch Attributes Model\n\t\tObject.keys(attributesModel.value).forEach((e) => {\n\t\t\twatch(\n\t\t\t\t() => attributesModel.value[e],\n\t\t\t\t(newValue, oldValue) => {\n\t\t\t\t\t// Si es un objeto, comparamos que realmente haya cambiado algn valor...\n\t\t\t\t\tif (typeof newValue === \"object\") {\n\t\t\t\t\t\tif (JSON.stringify(newValue) !== JSON.stringify(oldValue)) resolveAttr(e);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolveAttr(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t\t// Watch Data Model\n\t\tObject.keys(dataModel).forEach((dMKey) => {\n\t\t\tconst resolveMapModels = () =>\n\t\t\t\tObject.entries(attributesModel.value).forEach(([attrKey, attrValue]) => {\n\t\t\t\t\tif (typeof attrValue === \"string\" && attrValue.includes(`##FLD_${dMKey}##`)) {\n\t\t\t\t\t\tresolveAttr(attrKey);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\twatch(\n\t\t\t\t() => dataModel[dMKey],\n\t\t\t\t() => resolveMapModels()\n\t\t\t);\n\t\t\tresolveMapModels();\n\t\t});\n\t}\n\n\t/**\n\t * executeBindedEvent\n\t * @param {XoneDataObject} xoneDataObject\n\t * @param {Object} attributes\n\t * @param {string} type\n\t * @param {Object} options\n\t */\n\tasync executeBindedEvent(xoneDataObject, attributes, type, options) {\n\t\ttry {\n\t\t\tconst objView = getView(xoneDataObject);\n\t\t\tif (!objView) return;\n\t\t\tconst event = objView.bindedEvents?.find((e) => e.fieldName === attributes.name && e.eventName === type);\n\n\t\t\tif (event && event.action) {\n\t\t\t\tif (typeof event.action === \"function\") {\n\t\t\t\t\t// Add params\n\t\t\t\t\tconst params = {\n\t\t\t\t\t\ttarget: attributes.name,\n\t\t\t\t\t\tobjItem: attributes.name,\n\t\t\t\t\t\tdata: event.params,\n\t\t\t\t\t};\n\n\t\t\t\t\tObject.keys(options).forEach((key) => (params[key] = options[key]));\n\t\t\t\t\t// Execute function\n\t\t\t\t\tawait event.action(params);\n\t\t\t\t}\n\t\t\t\t// TODO: revisar, creo que se ejecuta un nodo pero realmente no tengo ni idea de lo que debe de hacer eso...\n\t\t\t\telse xoneDataObject.DoRunScriptAsync(event.action).catch(console.error);\n\t\t\t}\n\t\t} catch (ex) {\n\t\t\tconsole.error(ex);\n\t\t}\n\t}\n\n\t/**\n\t * onScrollEvent\n\t * @param {HTMLDivElement} element\n\t * @param {XoneAttributes} attributes\n\t * @param {XoneDataObject} xoneDataObject\n\t */\n\tasync onScrollEvent(element, attributes, xoneDataObject) {\n\t\tif (!element) return;\n\t\tconst { scrollTop, scrollLeft } = element;\n\t\tif (attributes.onScroll) {\n\t\t\tawait xoneDataObject.DoRunScriptAsync(\n\t\t\t\t`let e = { target: '${attributes.name}',objItem: '${attributes.name}',dy: ${scrollTop},dx: ${scrollLeft} };\n        ${attributes.onScroll}`\n\t\t\t);\n\t\t}\n\t\t// Execute binded event in script\n\t\tawait this.executeBindedEvent(xoneDataObject, attributes.name, \"onscroll\", {\n\t\t\tdy: scrollTop,\n\t\t\tdx: scrollLeft,\n\t\t});\n\t}\n\n\t/**\n\t * onClick\n\t * @param {XoneAttributes} attributes\n\t * @param {XoneDataObject} xoneDataObject\n\t * @param {import(\"./AppDataHandler\").Objectinfo} objectInfo\n\t */\n\tasync onClick(attributes, xoneDataObject, objectInfo) {\n\t\t//\n\t\t// Execute method\n\t\tconst method = attributes.method;\n\t\tif (method) await xoneAttributesHandler.executeMethod(method, xoneDataObject);\n\n\t\t//\n\t\t// Execute onclick\n\t\tconst onClick = attributes?.onClick;\n\t\ttry {\n\t\t\tif (onClick)\n\t\t\t\tawait xoneDataObject.DoRunScriptAsync(\n\t\t\t\t\t`let e = { target: '${attributes.name}',objItem: '${attributes.name}' };\n              ${onClick}`\n\t\t\t\t);\n\t\t} catch (ex) {\n\t\t\tconsole.error(ex);\n\t\t}\n\n\t\t//\n\t\t// Execute binded event in script\n\t\tawait xoneAttributesHandler.executeBindedEvent(xoneDataObject, attributes, \"onclick\", {});\n\n\t\t//\n\t\t// Is Custom Msgbox\n\t\tif (objectInfo.isMsgBox && attributes.buttonOption)\n\t\t\tobjectInfo.onMsgBoxOptionSelected && objectInfo.onMsgBoxOptionSelected(attributes.buttonOption);\n\t}\n}\n\nexport const xoneAttributesHandler = new XoneAttributesHandler();\n","// import { type } from \"os\";\n// import {format as ft} from \"util\";\nimport {sprintf as pr} from \"sprintf-js\";\n\ndeclare global {\n  interface String {\n      equals(text: string): boolean;\n      equalsIgnoreCase(text: string): boolean;\n      contains(text: string): boolean;\n      compareToIgnoreCase(text:string):number;\n      compareTo(text:string):number;\n  }\n\n  interface StringConstructor {\n    format(...args):string;\n  }\n\n  interface Array<T> {\n    add(index:number, item: T): void;\n    remove(index: T | number):void;\n    contains(item:T):boolean;\n  }\n\n}\n\n \n String.prototype.equals = function (text: string): boolean {\n   return this.localeCompare(text)===0;\n };\n\n String.prototype.equalsIgnoreCase = function (text: string): boolean {\n  return this.compareToIgnoreCase(text)===0;\n};\n\n String.prototype.contains = function (text: string): boolean {\n  return this.indexOf(text)>=0;\n};\n\nString.prototype.compareToIgnoreCase = function (text: string): number {\n  return this.toLowerCase().localeCompare(text.toLocaleLowerCase());\n};\n\nString.prototype.compareTo = function (text: string): number {\n  return this.localeCompare(text);\n};\n\nString.format = function (text:string,...args): string {\n  return pr(text,...args);\n  //return ft(text,...args);\n};\n\n// function add<T>(this: T[],index:number, item: T) {\n//   this.splice(index, 0, item);\n// }\n\n// function remove<T>(this: T[], index:number)  {\n//      this.splice(index, 1);\n// };\n\n// function contains<T>(this: T[], item: T):boolean {\n//     return this.indexOf(item)>=0;\n// }\n\nArray.prototype.add= function<T>(this: T[],index:number, item: T) {\n  this.splice(index, 0, item);\n};\n\nArray.prototype.contains= function<T>(this: T[], item: T):boolean {\n     return this.indexOf(item)>=0;\n};\n\nArray.prototype.remove=function<T>(this: T[], index: T | number)  {\n  if (typeof index =='number')\n    this.splice(index, 1);\n  else\n  this.splice(this.indexOf(index as T), 1);\n};\n\n// Object.defineProperty(Array.prototype,\"contains\",{\n//     value: function<T>(this: T[],index:number,item:T) {\n//         return this.splice(index, 0, item);\n//       }\n// });\n\n\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Calendar.vue?vue&type=style&index=0&id=9e1f59f0&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Column.vue?vue&type=style&index=0&id=3c3c9289&scoped=true&lang=css\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ChartBar.vue?vue&type=style&index=0&id=3e8af944&scoped=true&lang=css\"","import StringUtils from \"../../Utils/StringUtils\";\nimport XmlNode from \"./XmlNode\";\n\nexport default class XmlNodeList extends Array<XmlNode> {\n\n    //private m_nodes: Array<XmlNode>\n    /**\n     *\n     */\n    constructor(...nodes) {\n        super(...nodes);\n        // if (nodes!=null)\n        //     super(nodes);\n        // else\n        //     super();\n        Object.setPrototypeOf(this, new.target.prototype);\n        // if (nodes==null || nodes.length==0)\n        //     this.m_nodes=new Array<XmlNode>();\n        // else\n        //     this.m_nodes=Array.from(nodes);\n    }\n\n    public count(): number {\n        return this.length;\n    }\n\n    public get(Index: number): XmlNode {\n        return this[Index];\n    }\n    public addNode(node: XmlNode): void {\n        this.push(node);\n    }\n\n    public exist(nodeName: string, attrName: string, attrValue: string): boolean {\n        let bFound: boolean=false;\n        this.forEach(node=> {\n            if (StringUtils.areEquals(node.getName(),nodeName) && node.attrExists(attrName) && StringUtils.areEquals(node.getAttrValue(attrName),attrValue))\n                bFound=true;\n        });\n        return bFound;\n    }\n    public clear(): void {\n        while (this.length>0)\n            this.pop();\n    }\n}","import Hashtable from \"../../Collections/HashMap/Hashtable\";\nimport { Exception } from \"../../Exceptions/Exception\";\nimport IXmlDocument from \"../../Interfaces/IXmlDocument\";\nimport IXoneAttributes from \"../../Interfaces/IXoneAttributes\";\nimport StringUtils from \"../../Utils/StringUtils\";\nimport TextUtils from \"../../Utils/TextUtils\";\nimport { Utils } from \"../../Utils/Utils\";\nimport XmlAttributes from \"./XmlAttributes\";\nimport XmlNodeList from \"./XmlNodeList\";\n\n\nexport default class XmlNode {\n\n    private serialVersionUID = 5009966220209540301;\n    protected m_strName: string;\n    protected m_strText: string;\n    protected m_children: Array<XmlNode>;\n    protected m_childrenNodes: Hashtable<String, XmlNode>;\n    // Luis: Utilizaremos estas caches para no perder la velocidad qeu tenia que el mapping fuera lineal\n    // y tanto los props, frames contents y elementos de primer nivel para encontrarlos pronto\n    protected m_cachePropNodes: Hashtable<String, XmlNode>;\n    protected m_cacheContainersNodes: Hashtable<String, XmlNode>;\n    // Los de primer nivel los pondre mas adelante\n    protected m_cacheOtherNodes: Hashtable<String, XmlNode>;\n    protected m_parent: XmlNode;\n    protected m_allChildren: XmlNodeList;\n    protected m_attrs: IXoneAttributes;\n    protected lstEvents: Array<String>;\n    //protected m_doc:IXmlDocument;\n\n\n\n    constructor(parentNode: XmlNode, nodeName: string, attrs: IXoneAttributes, defaultAttr?: string, defaultAttrValue?: string, events?: Array<String>) {\n        //this.m_doc = doc;\n        this.m_children = new Array<XmlNode>();\n        this.m_childrenNodes = new Hashtable<string, XmlNode>();\n        this.m_strName = nodeName;\n        this.m_parent = parentNode;\n        this.m_attrs = attrs || new XmlAttributes();\n        if (parentNode != null) {\n            parentNode.addChild(this, nodeName, defaultAttr, defaultAttrValue);\n        }\n        this.lstEvents = events;\n    }\n\n\n    /**\n     * A13081301: Funcionalidad para manejar XML a nivel de script y modificar estructuras en runtime.\n     * Construye un nodo XML a partir de otro similar. Copia los hijos, los atributos y el texto.\n     *\n     * @param Source\n     * @param ParentNode\n     */\n    // public XmlNode(IXmlDocument doc, XmlNode Source, parent: XmlNodeNode) {\n    //     m_doc = doc;\n    //     m_parent = ParentNode;\n    //     m_strName = Source.getName();\n    //     m_childrenNodes = new Hashtable<string,XmlNode>();\n    //     ArrayList<XmlNode> children = Source.getChildren();\n    //     if (children != null) {\n    //         // Copiar los hijos\n    //         m_children = new ArrayList<>();\n    //         for (int i = 0; i < children.size(); i++) {\n    //             XmlNode n = children.get(i);\n    //             XmlNode nc = new XmlNode(doc, n, this);\n    //             String name = n.getName();\n    //             if (n.attrExists(Utils.PROP_ATTR_NAME) && (Utils.COLL_COLL.equals(name) || Utils.PROP_ATTR_GROUP.equals(name) || Utils.PROP_NAME.equals(name) || Utils.PROP_ATTR_FRAME.equals(name) || Utils.PROP_ATTR_CONTENTNAME.equals(name))) {\n    //                 addChild(nc, name, Utils.PROP_ATTR_NAME, n.getAttrValue(Utils.PROP_ATTR_NAME));\n    //             } else {\n    //                 addChild(nc, name, null, null);\n    //             }\n    //         }\n    //     }\n    //     m_attrs = new XoneAttributesImpl((XoneAttributesImpl) Source.getAttrs());\n    //     m_strText = Source.getText();\n    // }\n\n    // public XmlNode(IXmlDocument doc, parent: XmlNodeNode, String name) {\n    //     m_doc = doc;\n    //     //m_node =SourceNode;\n    //     m_children = new ArrayList<>();\n    //     //m_attributes =new Hashtable<String,String> ();\n    //     m_childrenNodes = new Hashtable<string,XmlNode>();\n    //     if (ParentNode != null) {\n    //         ParentNode.addChild(this, name, null, null);\n    //     }\n    //     m_strName = name;\n    //     m_parent = ParentNode;\n    // }\n\n    private AddPropToRoot(parent: XmlNode, node: XmlNode, nodeName: string, defaultAttr: string, defaultAttrValue: string): void {\n        if (parent == null) {\n            return;\n        }\n        if (StringUtils.areEquals(parent.getName(), Utils.COLL_COLL)) {\n            parent.addFastChild(node, nodeName, defaultAttr, defaultAttrValue);\n        } else {\n            const tmp: XmlNode = parent.getParentNode();\n            if (tmp != null) {\n                this.AddPropToRoot(tmp, node, nodeName, defaultAttr, defaultAttrValue);\n            }\n        }\n    }\n\n\n\n    public get attrs(): any {\n        return this.m_attrs;\n    }\n\n    public addChild(node: XmlNode, nodeName: string, defaultAttr: string, defaultAttrValue: string): void {\n        if (!TextUtils.isEmpty(defaultAttr) && !TextUtils.isEmpty(defaultAttrValue)) {\n            this.m_childrenNodes.put(Utils.formatKey(nodeName, defaultAttr, defaultAttrValue), node);\n            if (nodeName.equals(Utils.PROP_NAME) || nodeName.equals(Utils.PROP_ATTR_FRAME) || nodeName.equals(Utils.PROP_ATTR_CONTENTNAME)) {\n                this.AddPropToRoot(this, node, nodeName, defaultAttr, defaultAttrValue);\n            }\n        } else {\n            const name: string = this.getName();\n            if (Utils.COLL_COLL.equals(name) || (Utils.PROP_ATTR_GROUP.equals(name) && !(nodeName.equals(Utils.PROP_NAME) || nodeName.equals(Utils.PROP_ATTR_FRAME) || nodeName.equals(Utils.PROP_ATTR_CONTENTNAME)))) {\n                this.AddPropToRoot(this, node, nodeName, defaultAttr, defaultAttrValue);\n            }\n        }\n        this.m_children.push(node);\n    }\n\n\n    public addFastChild(node: XmlNode, nodeName: string, defaultAttr: string, defaultAttrValue: string): void {\n        switch (nodeName) {\n            case Utils.PROP_NAME:\n                if (this.m_cachePropNodes == null) {\n                    this.m_cachePropNodes = new Hashtable<string, XmlNode>();\n                }\n                this.m_cachePropNodes.put(Utils.formatKey(nodeName, defaultAttr, defaultAttrValue), node);\n                break;\n            case Utils.PROP_ATTR_FRAME:\n            case Utils.PROP_ATTR_CONTENTNAME:\n                if (this.m_cacheContainersNodes == null) {\n                    this.m_cacheContainersNodes = new Hashtable<string, XmlNode>();\n                }\n                this.m_cacheContainersNodes.put(Utils.formatKey(nodeName, defaultAttr, defaultAttrValue), node);\n                break;\n            default:\n                if (this.m_cacheOtherNodes == null) {\n                    this.m_cacheOtherNodes = new Hashtable<string, XmlNode>();\n                }\n                this.m_cacheOtherNodes.put(nodeName, node);\n                break;\n        }\n    }\n\n    public appendChild(node: XmlNode): void {\n        let nodeName: string = node.getName();\n        let defaultAttr: string = \"name\";\n        let defaultAttrValue: string = \"\";\n        if (!TextUtils.isEmpty(defaultAttr) && !TextUtils.isEmpty(defaultAttrValue)) {\n            this.m_childrenNodes.put(Utils.formatKey(nodeName, defaultAttr, defaultAttrValue), node);\n            if (nodeName.equals(Utils.PROP_NAME) || nodeName.equals(Utils.PROP_ATTR_FRAME) || nodeName.equals(Utils.PROP_ATTR_CONTENTNAME)) {\n                this.AddPropToRoot(this, node, nodeName, defaultAttr, defaultAttrValue);\n            }\n        } else {\n            const name: string = this.getName();\n            if (Utils.COLL_COLL.equals(name) || (Utils.PROP_ATTR_GROUP.equals(name) && !(nodeName.equals(Utils.PROP_NAME) || nodeName.equals(Utils.PROP_ATTR_FRAME) || nodeName.equals(Utils.PROP_ATTR_CONTENTNAME)))) {\n                this.AddPropToRoot(this, node, nodeName, defaultAttr, defaultAttrValue);\n            }\n        }\n        this.m_children.push(node);\n    }\n\n    public getName(): string {\n        return this.nodeName;\n    }\n\n    public get nodeName(): string {\n        return this.m_strName;\n    }\n\n    public setName(value): void {\n        this.m_strName = value;\n    }\n\n\n    public getText(): string {\n        return this.m_strText;\n    }\n\n\n\n    public getBooleanText(bDefault: boolean): boolean {\n        return StringUtils.ParseBoolValue(this.m_strText, bDefault);\n    }\n\n\n    public setText(value: string): void {\n        this.m_strText = value;\n    }\n\n\n    public get attributes(): IXoneAttributes {\n        return this.m_attrs;\n    }\n\n    public getAttributes(): IXoneAttributes {\n        return this.m_attrs;\n    }\n\n    // Tag: L0610201502 Si tiene eventos en los atributos se devuelve la lista\n\n    public getEvents(): Array<String> {\n        return this.lstEvents;\n    }\n\n\n    public getChildren(): Array<XmlNode> {\n        return this.m_children;\n    }\n\n    public merge(parentNode: XmlNode): XmlNode {\n        return this.mergeObj(parentNode.clone(), this, [{ nodename: 'coll', attrname: '*' }, { nodename: 'group', attrname: 'id' }, { nodename: 'frame', attrname: 'name' }, { nodename: 'prop', attrname: 'name' }]);\n        //return this;\n    }\n\n    private addMergeChild(obj: XmlNode, child) {\n        obj.appendChild(child);\n    }\n\n    private findNodeAttr(obj: XmlNode, attrName: string) {\n        return { value: obj.getAttrValue(attrName, null) }\n        // var attrs = obj.attributes;\n\n        // for (var i = 0; i < attrs.length; ++i) {\n        //     if (attrs[i].nodeName == attrName) {\n        //         return attrs[i];\n        //     }\n        // }\n\n        // return null;\n    }\n\n    private isEquNode(obj1: XmlNode, obj2: XmlNode, config) {\n        if (obj1.nodeName == obj2.nodeName) {\n            var max = config.length;\n            for (var i = 0; i < max; ++i) {\n                if (config[i].nodename == obj1.nodeName) {\n                    if (config[i].attrname == '*') {\n                        return true;\n                    }\n\n                    var attr1 = this.findNodeAttr(obj1, config[i].attrname);\n                    if (attr1 == null) {\n                        return false;\n                    }\n\n                    var attr2 = this.findNodeAttr(obj2, config[i].attrname);\n                    if (attr2 == null) {\n                        return false;\n                    }\n\n                    if (attr1.value == attr2.value) {\n                        return true;\n                    }\n\n                    return false;\n                }\n            }\n        }\n\n        return false;\n    }\n\n    private findSameChild(obj: XmlNode, child: XmlNode, config) {\n        var nums = obj.getChildren().length;\n        var childs = obj.getChildren();\n        for (var i = 0; i < nums; ++i) {\n            var curobj = childs[i];\n            if (this.isEquNode(curobj, child, config)) {\n                return curobj;\n            }\n        }\n\n        return null;\n    }\n\n    private mergeAttrs(obj1: XmlNode, obj2: XmlNode) {\n        obj2.attributes.keys().forEach(element => {\n            obj1.attributes.setValue(element, obj2.attributes.getValue(element));\n        });\n    }\n\n    private mergeObj(obj1: XmlNode, obj2: XmlNode, config): XmlNode {\n        var isequ = this.isEquNode(obj1, obj2, config);\n        if (isequ) {\n            this.mergeAttrs(obj1, obj2);\n        } else {\n            obj1.appendChild(obj2);\n            return obj1;\n        }\n\n        if (!obj2.hasChildNodes()) {\n            return obj1;\n        }\n\n        var nums2 = obj2.getChildren().length;\n        var childs2 = obj2.getChildren();\n\n        for (var i = 0; i < nums2; ++i) {\n            var curobj = childs2[i];\n            if (curobj.getName() == '#text') {\n                continue;\n            }\n            //this.mergeObj(obj1child, curobj, config);\n            //logger.normal.log('info', 'obj2 ', curobj.nodeName);\n\n            var obj1child = this.findSameChild(obj1, curobj, config);\n            if (obj1child != null) {\n                //logger.normal.log('info', 'merge ', curobj.nodeName);\n\n                this.mergeObj(obj1child, curobj, config);\n            }\n            else {\n                obj1.appendChild(curobj);\n                //this.mergeObj(obj1, curobj, config);\n            }\n        }\n        return obj1;\n    }\n\n\n    public getDocument(): IXmlDocument {\n        throw new Exception(\"Not implement\")\n    }\n\n\n    public getAttrValue(sAttrName: string, sDefault: string = \"\"): string {\n        const sValue: string = this.m_attrs.getValue(sAttrName);\n        if (sValue == null) {\n            return sDefault;\n        }\n        return sValue;\n    }\n\n\n    public setAttrValue(AttrName: string, value: string): void {\n        this.m_attrs.setValue(AttrName, value);\n    }\n\n\n    public deleteAttribute(AttrName: string): void {\n        this.m_attrs.deleteAttribute(AttrName);\n    }\n\n    // Luis: Funcion comun para detectar condiciones rapidas para encontrar la cache\n    private CheckCacheConditions(map: any, NodeName: string, ...cacheNames: string[]): boolean {\n        if (map == null) {\n            return false;\n        }\n        if (map.isEmpty()) {\n            return false;\n        }\n        if (cacheNames.length == 1) {\n            return NodeName.equals(cacheNames[0]);\n        } else if (cacheNames.length > 1) {\n            return cacheNames.indexOf(NodeName) >= 0;\n        }\n        return false;\n    }\n\n    // Luis: Funcion comun para detectar condiciones rapidas para encontrar la cache\n    private CheckIfCacheExists(map: any, sKey: string): boolean {\n        if (map == null) {\n            return false;\n        }\n        if (map.isEmpty()) {\n            return false;\n        }\n        return map.containsKey(sKey);\n    }\n\n    public getParentNode(): XmlNode {\n        return this.m_parent;\n    }\n\n\n    public setParentNode(parentNode: XmlNode): void {\n        this.m_parent = parentNode;\n    }\n\n\n\n    public getChildNodes(): XmlNodeList {\n        if (this.m_allChildren != null) {\n            return this.m_allChildren;\n        }\n        // Si no, la creamos ahora\n        this.m_allChildren = new XmlNodeList();\n        for (let i = 0; i < this.m_children.length; i++) {// Comprobar cada nombre\n            let node: XmlNode = this.m_children[i];\n            this.m_allChildren.addNode(node);\n        }// Comprobar cada nombre\n        return this.m_allChildren;\n    }\n\n\n    public hasChildNodes(): boolean {\n        try {\n            if (this.m_allChildren != null && this.m_allChildren.count() > 0) {\n                return true;\n            }\n            if (this.m_children != null && this.m_children.length > 0) {\n                return true;\n            }\n            return false;\n        } catch (ex) {\n            ex.printStackTrace();\n            return false;\n        }\n    }\n\n\n    /**\n     * Devuelve TRUE si el atributo cuyo nombre se pasa como parmetro existe en la lista de atributos del nodo.\n     *\n     * @param AttrName Nobmre del atributo cuya existencia se quiere comprobar\n     * @return Devuelve TRUE si existe el atributo.\n     */\n\n    public attrExists(AttrName: string): boolean {\n        return this.m_attrs.getIndex(AttrName) >= 0;\n    }\n\n\n    /**\n     * @param m_attrs the m_attrs to set\n     */\n\n    public setAttrs(m_attrs: IXoneAttributes): void {\n        this.m_attrs = m_attrs;\n    }\n\n    /**\n     * @return the m_attrs\n     */\n\n    public getAttrs(): IXoneAttributes {\n        return this.m_attrs;\n    }\n\n    /**\n     * A13081301: Funcionalidad para manejar XML a nivel de script y modificar estructuras en runtime.\n     *\n     * @return\n     */\n    public getXml(): string {\n        return null;\n    }\n\n    /**\n     * A13081301: Funcionalidad para manejar XML a nivel de script y modificar estructuras en runtime.\n     * Inserta un nodo antes del que se diga como parmetro...\n     *\n     * @param NewChild Nodo a insertar\n     * @param Before   Nodo delante del que se inserta. NULL para agregar al final.\n     */\n\n    public InsertBefore(NewChild: XmlNode, Before: XmlNode): void {\n        this.addToCache(NewChild);\n        const idx = this.m_children.indexOf(Before);\n        if (idx == -1) {\n            this.m_children.push(NewChild);\n        } else {\n            this.m_children.add(idx, NewChild);\n        }\n    }\n\n    /**\n     * A0206201401: Luis. Funcionalidad para manejar XML a nivel de script y modificar estructuras\n     * en runtime. Inserta un nodo antes del que se diga como parmetro...\n     *\n     * @param NewChild Nodo a insertar\n     * @param After    Nodo detras del que se inserta. NULL para agregar al final.\n     */\n\n    public InsertAfter(NewChild: XmlNode, After: XmlNode): void {\n        this.addToCache(NewChild);\n        let idx = this.m_children.indexOf(After);\n        if (idx == -1) {\n            this.m_children.push(NewChild);\n        } else {\n            this.m_children.add(idx + 1, NewChild);\n        }\n    }\n\n    public addToCache(child: XmlNode): void {\n        const nodeName: string = child.getName();\n        if (child.attrExists(Utils.PROP_ATTR_NAME)) {\n            const defaultAttr: string = Utils.PROP_ATTR_NAME;\n            const defaultAttrValue: string = child.getAttrValue(Utils.PROP_ATTR_NAME);\n            if ((Utils.COLL_COLL.equals(nodeName) || Utils.PROP_ATTR_GROUP.equals(nodeName) || Utils.PROP_NAME.equals(nodeName) || Utils.PROP_ATTR_FRAME.equals(nodeName) || Utils.PROP_ATTR_CONTENTNAME.equals(nodeName))) {\n                if (!TextUtils.isEmpty(defaultAttr) && !TextUtils.isEmpty(defaultAttrValue)) {\n                    this.m_childrenNodes.put(Utils.formatKey(nodeName, defaultAttr, defaultAttrValue), child);\n                    if (nodeName.equals(Utils.PROP_NAME) || nodeName.equals(Utils.PROP_ATTR_FRAME) || nodeName.equals(Utils.PROP_ATTR_CONTENTNAME)) {\n                        this.AddPropToRoot(this, child, nodeName, defaultAttr, defaultAttrValue);\n                    }\n                } else {\n                    const name = this.getName();\n                    if (Utils.COLL_COLL.equals(name) || (Utils.PROP_ATTR_GROUP.equals(name) && !(nodeName.equals(Utils.PROP_NAME) || nodeName.equals(Utils.PROP_ATTR_FRAME) || nodeName.equals(Utils.PROP_ATTR_CONTENTNAME)))) {\n                        this.AddPropToRoot(this, child, nodeName, defaultAttr, defaultAttrValue);\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * A0206201402: Luis. Funcionalidad para manejar XML a nivel de script y modificar estructuras\n     * en runtime. Borra un nodo de las listas\n     *\n     * @param child Nodo a borrar\n     */\n\n    public Remove(child: XmlNode): boolean {\n        try {\n            const idx = this.m_children.indexOf(child);\n            if (idx > -1) {\n                this.m_children.remove(idx);\n                this.m_childrenNodes.entrySet().forEach(entry => {\n                    if (entry[1] == child) {\n                        this.m_childrenNodes.delete(entry[0]);\n                    }\n                });\n                return true;\n            }\n            return false;\n        } catch (e) {\n            e.printStackTrace();\n            return false;\n        }\n\n    }\n\n    /**\n     * A11121601: Implementacin del picato en los XML de las maquinarias modernas. Reemplaza un\n     * hijo en la lista de este nodo por el que se pase.\n     *\n     * @param Original Nodo que se quiere reemplazar.\n     * @param NewNode  Nuevo nodo para poner en el lugar del original.\n     */\n\n    public replaceChild(Original: XmlNode, NewNode: XmlNode): void {\n        if (this.m_children != null) {// Reemplazar\n            const nIndex = this.m_children.indexOf(Original);\n            if (nIndex >= 0) {// Est\n                this.m_children.add(nIndex, NewNode);\n                this.Remove(Original);\n            }// Est\n        }// Reemplazar\n        if (this.m_childrenNodes != null) {// Buscar y sustituir\n            this.m_childrenNodes.clear();\n            //\n            // TODO PROGRAMAR ESTO\n            // Si est en la lista organizada esta tenemos que quitarlo...\n            //\n        }// Buscar y sustituir\n    }\n\n    public clone(): XmlNode {\n        let objResult = new XmlNode(null, this.nodeName, this.attributes.clone(), null, null, this.lstEvents);\n        this.m_children.forEach(node => {\n            objResult.appendChild(node.clone());\n        });\n        return objResult;\n    }\n\n    public describeContents(): number {\n        return 0;\n    }\n\n    public selectNodes(NodeName: string, AttrName?: string, AttrValue?: string, Exist?: boolean): XmlNodeList {\n        return this.SelectNodes(NodeName, AttrName, AttrValue, Exist);\n    }\n\n    public SelectNodes(NodeName: string, AttrName?: string, AttrValue?: string, Exist?: boolean): XmlNodeList {\n        // Si tiene valor, es el de toda la vida\n        if (!TextUtils.isEmpty(AttrValue)) {\n            return this.SelectNodesInt3(NodeName, AttrName, AttrValue);\n        }\n        if (this.CheckCacheConditions(this.m_cachePropNodes, NodeName, Utils.PROP_NAME)) {\n            return this.SelectNodesHashExist(this.m_cachePropNodes, NodeName, AttrName, Exist);\n        }\n        if (this.CheckCacheConditions(this.m_cacheContainersNodes, NodeName, Utils.PROP_ATTR_CONTENTNAME, Utils.PROP_ATTR_FRAME)) {\n            return this.SelectNodesHashExist(this.m_cacheContainersNodes, NodeName, AttrName, Exist);\n        }\n        //\n        // Crear la lista\n        const list = new XmlNodeList();\n        for (let i = 0; i < this.m_children.length; i++) {// Comprobar cada nombre\n            const node: XmlNode = this.m_children[i];\n            if (node.getName().equals(NodeName)) {// Al menos el nombre lo tiene\n                const strAttr = node.getAttrValue(AttrName);\n                if (TextUtils.isEmpty(strAttr)) {// No existe\n                    if (Exist) {\n                        continue;\n                    }\n                }// No existe\n                else {// Existe\n                    if (!Exist) {\n                        continue;\n                    }\n                }// Existe\n                // A la lista\n                list.addNode(node);\n            }// Al menos el nombre lo tiene\n        }// Comprobar cada nombre\n        // Devolver la lista en cuestin\n        return list;\n    }\n\n\n    private SelectNodesInt1(NodeName: string): XmlNodeList {\n        // Como hemos hecho una cache de props y frames pues lo mejor es buscar ahi\n        if (this.CheckCacheConditions(this.m_cachePropNodes, NodeName, Utils.PROP_NAME)) {\n            return new XmlNodeList(this.m_cachePropNodes.values());\n        }\n        if (this.CheckCacheConditions(this.m_cacheContainersNodes, NodeName, Utils.PROP_ATTR_CONTENTNAME, Utils.PROP_ATTR_FRAME)) {\n            return this.SelectNodesHash2(this.m_cacheContainersNodes, NodeName);\n        }\n        const list = new XmlNodeList();\n        // Ahora buscar en los hijos\n        for (let i = 0; i < this.m_children.length; i++) {// Comprobar cada nombre\n            const node: XmlNode = this.m_children[i];\n            const localName = node.getName();\n            if (TextUtils.equals(localName, NodeName)) {\n                list.addNode(node);\n            }\n        }// Comprobar cada nombre\n        return list;\n    }\n\n    private SelectNodesHash2(nodeList: Hashtable<String, XmlNode>, NodeName: string): XmlNodeList {\n        const list = new XmlNodeList();\n        nodeList.values().forEach(node => {\n            const localName = node.getName();\n            if (TextUtils.equals(localName, NodeName)) {\n                list.addNode(node);\n            }\n        });\n        return list;\n    }\n\n\n\n    private SelectNodesHash4(nodeList: Hashtable<String, XmlNode>, NodeName: string, AttrName: string, AttrValue: string): XmlNodeList {\n        const list = new XmlNodeList();\n        nodeList.values().forEach(node => {\n            if (node.getName().equals(NodeName)) {// Al menos el nombre lo tiene\n                const strAttr = node.getAttrValue(AttrName);\n                if (TextUtils.equals(strAttr, AttrValue)) {\n                    list.addNode(node);\n                }\n            }// Al menos el nombre lo tiene\n        });// Comprobar cada nombre\n        // No aparece\n        return list;\n    }\n\n\n\n    private SelectNodesInt3(NodeName: string, AttrName: string, AttrValue: string): XmlNodeList {\n        if (this.CheckCacheConditions(this.m_cachePropNodes, NodeName, Utils.PROP_NAME)) {\n            return this.SelectNodesHash4(this.m_cachePropNodes, NodeName, AttrName, AttrValue);\n        }\n        if (this.CheckCacheConditions(this.m_cacheContainersNodes, NodeName, Utils.PROP_ATTR_CONTENTNAME, Utils.PROP_ATTR_FRAME)) {\n            return this.SelectNodesHash4(this.m_cacheContainersNodes, NodeName, AttrName, AttrValue);\n        }\n        const list = new XmlNodeList();\n        for (let i = 0; i < this.m_children.length; i++) {// Comprobar cada nombre\n            const node: XmlNode = this.m_children[i];\n            if (node.getName().equals(NodeName)) {// Al menos el nombre lo tiene\n                const strAttr = node.getAttrValue(AttrName);\n                if (TextUtils.equals(strAttr, AttrValue)) {\n                    list.addNode(node);\n                }\n            }// Al menos el nombre lo tiene\n        }// Comprobar cada nombre\n        // No aparece\n        return list;\n    }\n\n    /**\n     * Sobrecarga que permite buscar nodos con X atributo independientemente del valor de este.\n     *\n     * @param NodeName\n     * @param AttrName\n     * @return\n     */\n\n\n    private SelectNodesStr2(NodeName: string, AttrName: string): XmlNodeList {\n        return this.SelectNodes(NodeName, AttrName, null, true);\n    }\n\n    /**\n     * Equivalente de SelecNodes con la opcin de poder filtrar por la existencia o no existencia de un atributo determinado\n     * pasando NULL como valor del atributo\n     *\n     * @param NodeName  Nombre de los nodos que van a la lista.\n     * @param AttrName  Atributo por el que se quiere comparar o cuya existencia se quiere verificar.\n     * @param AttrValue Valor del atributo para comparacin. NULL si lo que se quiere es verificar existencia.\n     * @param Exist     Si AttrValue es NULL, TRUE para retornar nodos con el atributo, FALSE para retornar nodos sin el atributo.\n     * @return Devuelve la lista con los nodos que cumplen la condicin.\n     */\n\n    private SelectNodesHashExist(nodeList: Hashtable<String, XmlNode>, NodeName: string, AttrName: string, Exist: boolean): XmlNodeList {\n        //\n        // Crear la lista\n        const list = new XmlNodeList();\n        nodeList.values().forEach(node => {\n            if (node.getName().equals(NodeName)) {// Al menos el nombre lo tiene\n                const strAttr = node.getAttrValue(AttrName);\n                if (TextUtils.isEmpty(strAttr)) {// No existe\n                    if (Exist) {\n                        return;\n                    }\n                }// No existe\n                else {// Existe\n                    if (!Exist) {\n                        return;\n                    }\n                }// Existe\n                // A la lista\n                list.addNode(node);\n            }// Al menos el nombre lo tiene\n        });// Comprobar cada nombre\n        // Devolver la lista en cuestin\n        return list;\n    }\n\n    public selectSingleNode(NodeName: string, AttrName?: string, AttrValue?: string | boolean): XmlNode {\n        return this.SelectSingleNode(NodeName, AttrName, AttrValue);\n    }\n\n    public SelectSingleNode(NodeName: string, AttrName?: string, AttrValue?: string | boolean): XmlNode {\n        if (AttrName == null)\n            return this.SelectSingleNodeInt1(NodeName);\n        if (AttrValue == null)\n            return this.SelectSingleNodeIntExist(NodeName, AttrName, true);\n        if (typeof AttrValue === 'boolean')\n            return this.SelectSingleNodeIntExist(NodeName, AttrName, AttrValue);\n        return this.SelectSingleNodeInt3(NodeName, AttrName, AttrValue);\n    }\n\n\n    private SelectSingleNodeInt1(NodeName: string): XmlNode {\n        // Como hemos hecho una cache de props y frames pues lo mejor es buscar ahi\n        if (this.CheckCacheConditions(this.m_cachePropNodes, NodeName, Utils.PROP_NAME)) {\n            return this.m_cachePropNodes.values()[0];\n        }\n        if (this.CheckCacheConditions(this.m_cacheContainersNodes, NodeName, Utils.PROP_ATTR_CONTENTNAME, Utils.PROP_ATTR_FRAME)) {\n            return this.m_cacheContainersNodes.values()[0];\n        }\n        if (this.m_cacheOtherNodes != null) {\n            if (!this.m_cacheOtherNodes.isEmpty() && this.m_cacheOtherNodes.containsKey(NodeName)) {\n                return this.m_cacheOtherNodes.get(NodeName);\n            }\n        }\n        // Ahora buscar en los hijos\n        for (let i = 0; i < this.m_children.length; i++) {// Comprobar cada nombre\n            let node: XmlNode = this.m_children[i];\n            if (TextUtils.equals(node.getName(), NodeName)) {\n                return node;\n            }\n            if (Utils.PROP_ATTR_GROUP.equals(node.getName())) { // Vamos a buscar al menos en el primer nivel del group porque antes se permitia\n                node = node.SelectSingleNode(NodeName);\n                if (node != null) {\n                    return node;\n                }\n            }\n        }// Comprobar cada nombre\n        return null;\n    }\n\n    private SelectSingleNodeHash4(nodeList: Hashtable<String, XmlNode>, NodeName: string, AttrName: string, AttrValue: string): XmlNode {\n        nodeList.values().forEach(node => {\n            const localName = node.getName();\n            if (TextUtils.equals(localName, NodeName)) {\n                if (TextUtils.equals(node.getAttrValue(AttrName), AttrValue)) {\n                    return node;\n                }\n            }\n        });\n        return null;\n    }\n\n    private SelectSingleNodeInt3(NodeName: string, AttrName: string, AttrValue: string): XmlNode {\n        let node: XmlNode = null;\n        if (TextUtils.equals(Utils.PROP_ATTR_NAME, AttrName)) {\n            // Como hemos hecho una cache de props y frames pues lo mejor es buscar ahi\n            const sKey = Utils.formatKey(NodeName, AttrName, AttrValue);\n            if (this.CheckCacheConditions(this.m_cachePropNodes, NodeName, Utils.PROP_NAME) && this.CheckIfCacheExists(this.m_cachePropNodes, sKey)) {\n                return this.m_cachePropNodes.get(sKey);\n            }\n            if (this.CheckCacheConditions(this.m_cacheContainersNodes, NodeName, Utils.PROP_ATTR_CONTENTNAME, Utils.PROP_ATTR_FRAME) && this.CheckIfCacheExists(this.m_cacheContainersNodes, sKey)) {\n                return this.m_cacheContainersNodes.get(sKey);\n            }\n            node = this.m_childrenNodes.get(sKey);\n        } else if (this.CheckCacheConditions(this.m_cachePropNodes, NodeName, Utils.PROP_NAME)) { // Agregado soporte para buscar un nodo por un atributo\n            node = this.SelectSingleNodeHash4(this.m_cachePropNodes, NodeName, AttrName, AttrValue);\n        } else if (this.CheckCacheConditions(this.m_cacheContainersNodes, NodeName, Utils.PROP_ATTR_CONTENTNAME, Utils.PROP_ATTR_FRAME)) {\n            node = this.SelectSingleNodeHash4(this.m_cacheContainersNodes, NodeName, AttrName, AttrValue);\n        }\n        if (node != null) {\n            return node;\n        }\n        this.m_children.forEach(node => {// Comprobar cada nombre\n            const localName = node.getName();\n            if (localName.equals(NodeName)) {// Al menos el nombre lo tiene\n                const strAttr = node.getAttrValue(AttrName);\n                if (TextUtils.equals(strAttr, AttrValue)) {\n                    return node;\n                }\n            }// Al menos el nombre lo tiene\n        });// Comprobar cada nombre\n        // No aparece\n        return null;\n    }\n\n    private SelectSingleNodeHashExist(nodeList: Hashtable<String, XmlNode>, NodeName: string, AttrName: string, Exists: boolean): XmlNode {\n        nodeList.values().forEach(node => {\n            const localName = node.getName();\n            if (localName.equals(NodeName)) {// Al menos el nombre lo tiene\n                const strAttr = node.getAttrValue(AttrName);\n                if (Exists && !TextUtils.isEmpty(strAttr)) {\n                    return node;\n                } else if (!Exists && TextUtils.isEmpty(strAttr)) {\n                    return node;\n                }\n            }// Al menos el nombre lo tiene\n        });// Comprobar cada nombre\n        // No aparece\n        return null;\n    }\n\n    // A10100703:\tFuncin para pedir un nodo del fichero XML de la aplicacin.\n    // Esto hace falta para poner el GetNode a nivel de XoneApplication\n\n\n    private SelectSingleNodeIntExist(NodeName: string, AttrName: string, Exists: boolean): XmlNode {\n        if (this.CheckCacheConditions(this.m_cachePropNodes, NodeName, Utils.PROP_NAME)) {\n            return this.SelectSingleNodeHashExist(this.m_cachePropNodes, NodeName, AttrName, Exists);\n        }\n        if (this.CheckCacheConditions(this.m_cacheContainersNodes, NodeName, Utils.PROP_ATTR_CONTENTNAME, Utils.PROP_ATTR_FRAME)) {\n            return this.SelectSingleNodeHashExist(this.m_cacheContainersNodes, NodeName, AttrName, Exists);\n        }\n        this.m_children.forEach(node => {// Comprobar cada nombre\n            const localName = node.getName();\n            if (localName.equals(NodeName)) {// Al menos el nombre lo tiene\n                const strAttr = node.getAttrValue(AttrName);\n                if (Exists && !TextUtils.isEmpty(strAttr)) {\n                    return node;\n                } else if (!Exists && TextUtils.isEmpty(strAttr)) {\n                    return node;\n                }\n            }// Al menos el nombre lo tiene\n        });// Comprobar cada nombre\n        // No aparece\n        return null;\n    }\n\n\n\n    public toJSON() {\n        const nodesName = \"childs\";\n        let result = <any>{};\n        result[this.getName()] = <any>{};\n        result[this.getName()][\"attributes\"] = this.m_attrs.toJSON();\n        if (this.m_children.length > 0) {\n            result[this.getName()][nodesName] = [];\n            this.m_children.forEach(item => result[this.getName()][nodesName].push(item.toJSON()));\n        }\n        return result;\n    }\n\n    // protected XmlNode(Parcel parcel) {\n    //     m_strName = parcel.readString();\n    //     m_strText = parcel.readString();\n    //     Field fCreator = WrapReflection.SafeGetField(this.getClass(), \"CREATOR\");\n    //     Creator<XmlNode> creator = WrapReflection.SafeStaticInvokeGetField(fCreator);\n    //     m_children = new ArrayList<>();\n    //     parcel.readTypedList(m_children, creator);\n    //     m_childrenNodes = new Hashtable<string,XmlNode>();\n    //     String[] val = parcel.createStringArray();\n    //     m_allChildren = null;\n    //     int i = 0;\n    //     for (node: XmlNode : m_children) {\n    //         node.setParentNode(this);\n    //         if (val != null && i < val.length && !TextUtils.isEmpty(val[i])) {\n    //             String[] spl = val[i].split(\"##\");\n    //             if (node.getName().equals(spl[1]) && node.attrExists(spl[2]) && node.getAttrValue(spl[2]).equals(spl[3])) {\n    //                 m_childrenNodes.put(val[i], node);\n    //                 i++;\n    //             }\n    //         }\n    //     }\n    //     m_attrs = parcel.readParcelable(XoneAttributesImpl.class.getClassLoader());\n    //     lstEvents = parcel.createStringArrayList();\n    // }\n\n\n\n\n\n    // public void writeToParcel(Parcel parcel, int nFlags) {\n    //     parcel.writeString(m_strName);\n    //     parcel.writeString(m_strText);\n    //     parcel.writeTypedList(m_children);\n    //     parcel.writeStringArray(m_childrenNodes.keySet().toArray(new String[0]));\n    //     parcel.writeParcelable(m_attrs, nFlags);\n    //     if (lstEvents != null) {\n    //         parcel.writeStringList(new ArrayList<>(lstEvents));\n    //     } else {\n    //         parcel.writeStringList(new ArrayList<>());\n    //     }\n    // }\n\n    // public static final Creator<XmlNode> CREATOR = new Creator<XmlNode>() {\n\n\n    //     public XmlNode createFromParcel(Parcel source) {\n    //         return new XmlNode(source);\n    //     }\n\n\n    //     public XmlNode[] newArray(int size) {\n    //         return new XmlNode[size];\n    //     }\n    // };\n\n    /**\n     * A13081301: Funcionalidad para manejar XML a nivel de script y modificar estructuras en runtime.\n     * Copia el nodo y devuelve el nuevo...\n     */\n\n\n\n}","export const isMobile = () => (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));","import { Exception } from \"./Exception\";\n\nexport class XoneValidationException extends Exception {\n    public  code: number;\n\n    /**\n     *\n     */\n    constructor(code:number, message: string) {\n        super(message);\n        this.code=code;\n    }\n}","import { PrivateKeyInput } from \"crypto\";\nimport { ServerStreamFileResponseOptions } from \"http2\";\nimport { stringify } from \"querystring\";\nimport Hashtable from \"../Collections/HashMap/Hashtable\";\nimport Vector from \"../Collections/Vector\";\nimport { Exception } from \"../Exceptions/Exception\";\nimport XoneGenericException from \"../Exceptions/XoneGenericException\";\nimport { XoneMessageKeys } from \"../Exceptions/XoneMessageKeys\";\nimport { XoneValidationException } from \"../Exceptions/XoneValidationException\";\nimport IMessageHolder from \"../Interfaces/IMessageHolder\";\nimport IResultSet from \"../Interfaces/IResultSet\";\nimport IXmlNode from \"../Interfaces/IXmlNode\";\nimport IXoneObject from \"../Interfaces/IXoneObject\";\nimport { SqlParser } from \"../Parsers/SQL/SqlParser\";\nimport UITransform from \"../Transform/UITransform\";\nimport Calendar from \"../Utils/Calendar\";\nimport CXoneNameValuePair from \"../Utils/CXoneNameValuePair\";\nimport HashUtils from \"../Utils/HashUtils\";\nimport NumberUtils from \"../Utils/NumberUtils\";\nimport ObjUtils from \"../Utils/ObjUtils\";\nimport ScriptUtils from \"../Utils/ScriptUtils\";\nimport SqlType from \"../Utils/SqlType\";\nimport StringBuilder from \"../Utils/StringBuilder\";\nimport StringUtils from \"../Utils/StringUtils\";\nimport TextUtils from \"../Utils/TextUtils\";\nimport { Utils } from \"../Utils/Utils\";\nimport XmlUtils from \"../Utils/XmlUtils\";\nimport XmlNode from \"../Xml/JSONImpl/XmlNode\";\nimport XmlNodeList from \"../Xml/JSONImpl/XmlNodeList\";\nimport ScriptContext from \"../XoneScripts/ScriptContext\";\nimport { XoneApplication } from \"./XoneApplication\";\nimport { XoneDataCollection } from \"./XoneDataCollection\";\n\nexport class XoneDataObject implements IXoneObject {\n\t// Solo para identificar que una instancia es un objeto\n\tpublic get isDataObject(): boolean {\n\t\treturn true;\n\t}\n\n\t// Vamos a identificar nuestro objetos con un id unico\n\tprivate UNIQUE_ID: Symbol;\n\tprivate static PARSE_NODE_NAME = 0;\n\tprivate static PARSE_EXPECTING_OPEN_PAR = 1;\n\tprivate static PARSE_PARAM_VALUE = 2;\n\tprivate static PARSE_EXPECTING_COMMA = 3;\n\n\tprivate mapEvents: Hashtable<string, any>;\n\n\t/**\n\t * Lista con los valores de los campos normales\n\t * K13061901: Modificaciones para mejorar el soporte de concurrencia en la maquinaria.\n\t * Hacer esta lista concurrente...\n\t */\n\tprotected m_lstNormalProperties: Hashtable<string, any>;\n\t/**\n\t * Lista con las propiedades que se han modificado\n\t */\n\tprotected m_lstDirtyProperties: Vector<string>;\n\t/**\n\t * Coleccin a la cual pertenece este objeto (al menos la que se us como plantilla para crearlo)\n\t */\n\tprotected m_owner: XoneDataCollection;\n\t/**\n\t * Cadena clave del objeto. Generada cuando se carga o cuando se pide por primera vez.\n\t */\n\tprotected m_strObjectId: string;\n\t/**\n\t * ID numrico del objeto. -1 si la clave no es numrica. 0 si el objeto es de lectura solamente.\n\t */\n\tprotected m_lObjectId: number;\n\t/**\n\t * TRUE si el objeto no se puede almacenar en base de datos ni fuente de datos ninguna.\n\t */\n\tprotected m_bReadOnly: boolean;\n\t/**\n\t * TRUE si el objeto est \"sucio\", es decir, alguna de sus propiedades ha cambiado de valor\n\t */\n\tprotected m_bDirty: boolean;\n\t/**\n\t * TRUE si el objeto es el elemento actual de un recorrido SB/EB\n\t */\n\tprotected m_bIsCurrentItem: boolean;\n\t/**\n\t * Lista con las colecciones de contents de este objeto\n\t */\n\tprotected m_lstContents: Hashtable<string, XoneDataCollection>;\n\t/**\n\t * TRUE si ya se han cargado los contents\n\t */\n\tprotected m_bContentsLoaded: boolean;\n\t/// TRUE si el objeto est en proceso de carga\n\tprotected m_bIsLoading: boolean;\n\t/// Lista de valores antiguos para buscar OldValue (x)\n\tprotected m_lstOldValues: Hashtable<string, any>;\n\t/// TRUE si se han efectuado cambios durante la actualizacin de una propiedad.\n\tprotected m_bChangesMade: boolean;\n\t/// Lista con las propiedades que son xlat\n\tprotected m_lstXlatProperties: Vector<string>;\n\t/// Lista con los nombres de propiedades que se han desarrollado ya para no tener que volver a desarrollarlas.\n\tprotected m_lstDevelopedXlatProperties: Vector<string>;\n\t/// TRUE si el objeto se est clonando.\n\tprotected m_bIsCloning: boolean;\n\t/// TRUE si se est efectuando una validacin para evitar la reentrada.\n\tprotected m_bIsChecking: boolean;\n\t/// TRUE para forzar los cambios de monedas a la salida.\n\tprotected m_bForceCurrChanges: boolean;\n\t/// TRUE si el objeto debe emplear timestamp para sus actualizaciones\n\tprotected m_bUseTimestamp: boolean;\n\t/// Fecha y hora de la ltima modificacin (asignacin de propiedad) de este objeto\n\tprotected m_dtTimeStamp: Calendar;\n\t/// TRUE si el objeto propaga su estado de modificacin hacia sus propietarios\n\tprotected m_bPropagateDirty: boolean;\n\t/// TRUE si hay que buscar en base de datos para resolver los xlats.\n\tprotected m_bXlatExist: boolean;\n\t/// TRUE si se est resolviendo un campo xlat\n\tprotected m_bIsRestoring: boolean;\n\t/// TRUE si se est creando el objeto\n\tprotected m_bIsCreating: boolean;\n\t/// Aqu se almacena el nombre del campo para el que se est ejecutando Onchange, para permitir reentradas recursivas.\n\tprotected m_strChangeField: string;\n\t/// TRUE si el objeto es dependiente de su propietario para grabarse (no se graba si su padre no est en base de datos)\n\tprotected m_bDependent: boolean;\n\t/// TRUE si hay que seguir las reglas de eliminacin\n\tprotected m_bFollowRules: boolean;\n\t/// Lista con los enlaces pendientes de efectuar cuando se grabe el objeto\n\tprotected m_lstLinkItems: Vector<any>;\n\t/// Lista con los campos xlat que se estn desarrollando.\n\tprotected m_lstDevelopingFields: Vector<string>;\n\t/// TRUE si el objeto es un clon recin creado.\n\tprotected m_bNewClone: boolean;\n\t/// Lista de variables de la coleccin\n\tprotected m_lstVariables: Hashtable<string, Object>;\n\t/**\n\t * M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t * Aqu almacenamos una referencia al gestor de mensajes de la aplicacin.\n\t */\n\tprotected m_messages: IMessageHolder;\n\t/**\n\t * F11070701: Modificaciones para solucionar los enlaces y grabacin con claves no numricas.\n\t * Esta banderilla se resetea cuando se carga el objeto de disco, cuando se graba o cuando\n\t * se hace algo que implique que no es un nuevo objeto.\n\t */\n\tprotected m_bNewObject: boolean;\n\n\tprotected m_lstCachedAttributes: Hashtable<string, string>;\n\n\t/**\n\t * TODO Juan Carlos\n\t * Lista de atributos que se han modificado por script. Los mantenemos en una lista separada\n\t * para que no se borren al cambiar las condiciones visuales.\n\t */\n\tprotected m_lstOverridenFieldPropertyValueAttributes: Hashtable<string, string>;\n\n\t/**\n\t * A12122701: Sistema para gestionar la estructura lgica de vistas en la maquinaria.\n\t * Indica en qu nivel de profundidad de actualizacin de valores estamos. Cero indica nivel raz\n\t * y por tanto se pueden reevaluar las frmulas de visiblidad y tal.\n\t */\n\tprotected m_nSetValDepth = 0;\n\t/**\n\t * K13081201: Cambios en el tratamiento de frmulas para mejorar la concurrencia.\n\t * Parece que las frmulas son un problema coo...\n\t */\n\tprotected m_formulaLocker: Object;\n\t/**\n\t * A12122701: Sistema para gestionar la estructura lgica de vistas en la maquinaria.\n\t * Juegos de valores de visibilidad y habilitacin de campos. Contiene las referencias a las frmulas\n\t * parseadas y a sus valores para este objeto, se refrescan cada vez que un campo de disparo cambia\n\t * de valor.\n\t * A13022106: Mecanismo para abstraer ms el modelo de objetos usando interfaces.\n\t * Esto lo traemos a la clase base.\n\t */\n\tprotected m_formulas: Hashtable<string, any>;\n\tprivate mMapSysOrder: number;\n\n\tprivate m_model = <any>{};\n\n\tpublic get model(): any {\n\t\treturn this.m_model;\n\t}\n\n\tpublic set model(v: any) {\n\t\tthis.m_model = v;\n\t}\n\n\t/**\n\t * Construye un objeto de datos\n\t * @param OwnerCollection\t\tColeccin propietaria de este objeto.\n\t */\n\tconstructor(OwnerCollection: XoneDataCollection) {\n\t\t//super();\n\t\t// Cada objeto Xone le vamos a dar un valor unico consecutivo a partir de 0x10000000\n\t\tthis.UNIQUE_ID = Symbol(\"XoneDataObject\");\n\t\t// F11070701: Modificaciones para solucionar los enlaces y grabacin con claves no numricas.\n\t\t// Vale, si es nuevo es nuevo...\n\t\tthis.m_bIsLoading = true;\n\t\ttry {\n\t\t\tthis.m_bNewObject = true;\n\t\t\t// Constriye las cosas que se van a usar en el objeto\n\t\t\t// K13061901: Modificaciones para mejorar el soporte de concurrencia en la maquinaria.\n\t\t\t// Hacer esta lista concurrente.\n\t\t\tthis.m_lstNormalProperties = new Hashtable<string, Object>();\n\t\t\tthis.m_lstOldValues = new Hashtable<string, Object>();\n\t\t\tthis.m_lstDirtyProperties = new Vector<string>();\n\t\t\tthis.m_lstXlatProperties = new Vector<string>();\n\t\t\tthis.m_lstDevelopedXlatProperties = new Vector<string>();\n\t\t\tthis.m_owner = OwnerCollection;\n\t\t\tthis.m_bPropagateDirty = true; // Por defecto propagamos las modificaciones\n\t\t\tthis.m_lstLinkItems = new Vector<any>();\n\t\t\tthis.m_lstVariables = new Hashtable<string, Object>();\n\t\t\t// F09042302:\tLa lista de contents se asume creada en muchos lugares del objeto.\n\t\t\tthis.m_lstContents = new Hashtable<string, XoneDataCollection>();\n\t\t\tthis.m_lstDevelopingFields = new Vector<string>();\n\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t// Almacenar la referencia al gestor de mensajes\n\t\t\tthis.m_messages = this.getOwnerApp().getMessageHolder();\n\t\t\t// M12102401: Gestin de los atributos a nivel de objetos cacheando los valores.\n\t\t\t// Lista de atributos de propiedades cacheados si se usa, claro\n\t\t\tthis.m_lstCachedAttributes = new Hashtable<string, string>();\n\t\t\tthis.m_lstOverridenFieldPropertyValueAttributes = new Hashtable<string, string>();\n\t\t\t// ADD TAG TODO Inciaicilizar la varibal MAP_SYS_ORDER con -1 para saber que todavia no esta en la coleccion\n\t\t\tthis.mMapSysOrder = -1;\n\n\t\t\tthis.m_reactLayout = new Hashtable<string, any>();\n\t\t\t// A12122701: Sistema para gestionar la estructura lgica de vistas en la maquinaria.\n\t\t\t// Si la coleccin tiene frmulas, nosotros tambin\n\t\t\t// F13022104: El acceso a las frmulas de visibilidad de campos debe ser concurrente.\n\t\t\t// La verificacin tenemos que hacerla de otra forma... HasFormulas es el restraint para\n\t\t\t// que se nivelen los threads.\n\t\t\t// K13081201: Cambios en el tratamiento de frmulas para mejorar la concurrencia.\n\t\t\tthis.m_formulaLocker = new Object();\n\t\t\tthis.addObjectProperties();\n\t\t} finally {\n\t\t\tthis.m_bIsLoading = false;\n\t\t}\n\t\t// if (this.m_owner.HasFormulas())\n\t\t// {// Copiar\n\t\t//     // Una vez aqu dentro ya se han adicionado todas las frmulas\n\t\t//     ////////foreach (KeyValuePair<string, CFormulaParser> kvp in m_owner.Formulas)\n\t\t//     // K13081201: Cambios en el tratamiento de frmulas para mejorar la concurrencia.\n\t\t//     // Sacar el lock pafurida... usar el bloqueador bueno bueno\n\t\t//     synchronized (this.m_formulaLocker)\n\t\t//     {\n\t\t//         // Nos creamos la lista en plan serializado...\n\t\t//         this.m_formulas = new Hashtable<string, XoneEvalData>();\n\t\t//         synchronized (this.m_formulas)\n\t\t//         {\n\t\t//         \tHashtable<string, IFormulaParser> ofm =this.m_owner.getFormulas();\n\t\t//         \tEnumeration<string> enm =ofm.keys();\n\t\t//             while (enm.hasMoreElements())\n\t\t//             {// Copiar las frmulas y crear grupos de evaluacin\n\t\t//             \tstring key =enm.nextElement();\n\t\t//             \tIFormulaParser ifp =ofm.get(key);\n\t\t//             \tFormulaParser formula =(FormulaParser)ifp;\n\t\t//                 XoneEvalData ed = new XoneEvalData(formula, this);\n\t\t//                 // F13022104: El acceso a las frmulas de visibilidad de campos debe ser concurrente.\n\t\t//                 // No tiene sentido evaluar las frmulas porque todava el objeto no tiene valores\n\t\t//                 // F13022201: Arreglos en la gestin de frmulas.\n\t\t//                 // Trim a la frmula que ser clave...\n\t\t//                 ////////lock (m_formulas)\n\t\t//                 this.m_formulas.put(formula.getSourceText().trim(), ed);\n\t\t//             }// Copiar las frmulas y crear grupos de evaluacin\n\t\t//         }\n\t\t//     }\n\t\t// }// Copiar\n\t}\n\n\tprivate addSingleProperty(name: string): void {\n\t\tlet _this = this;\n\t\tlet value = _this.getValue(name);\n\t\t_this.m_lstNormalProperties.put(name, value);\n\t\t_this.m_model[name] = value;\n\t\tif (_this.hasOwnProperty(name)) return;\n\t\tObject.defineProperty(_this, name, {\n\t\t\tget: function (): any {\n\t\t\t\treturn _this.getNormalValue(name);\n\t\t\t},\n\t\t\tset: function (v: any) {\n\t\t\t\t//console.log(\"LLego\");\n\t\t\t\t// _this.m_model[name]=v;\n\t\t\t\t// _this.m_lstNormalProperties.put(name,v);\n\t\t\t\t_this.put(name, v);\n\t\t\t},\n\t\t});\n\t}\n\n\tprivate addObjectProperties(): void {\n\t\tlet _this = this;\n\t\t// Debemos agregar el idFieldname tambien a la reactividad\n\t\tif (!this.m_owner.getMultipleKey() && !TextUtils.isEmpty(this.getIdFieldName())) this.addSingleProperty(this.getIdFieldName());\n\t\t// Resto de propiedades\n\t\tthis.m_owner.getNodeList(\"prop\").forEach((node) => this.addSingleProperty(node.getAttrValue(\"name\")));\n\t\t//  {\n\t\t//     let name = node.getAttrValue(\"name\");\n\t\t//     let value = _this.getValue(name);\n\t\t//     _this.m_lstNormalProperties.put(name, value);\n\t\t//     _this.m_model[name] = value;\n\t\t//     Object.defineProperty(_this, name, {\n\t\t//         get: function (): any {\n\t\t//             return _this.getNormalValue(name);\n\t\t//         },\n\t\t//         set: function (v: any) {\n\t\t//             //console.log(\"LLego\");\n\t\t//             // _this.m_model[name]=v;\n\t\t//             // _this.m_lstNormalProperties.put(name,v);\n\t\t//             _this.setNormalValue(name, v);\n\t\t//         }\n\t\t//     });\n\t\t// });\n\t\t// let a = 9;\n\t}\n\n\tprivate getNormalValue(name: string): any {\n\t\treturn this.m_lstNormalProperties.get(name);\n\t}\n\n\tprivate setNormalValue(name: string, v: any): any {\n\t\tthis.m_model[name] = v;\n\t\tthis.m_lstNormalProperties.put(name, v);\n\t\tif (!this.m_lstDirtyProperties.contains(name)) this.m_lstDirtyProperties.push(name);\n\t\tthis.m_bDirty = true;\n\t}\n\n\tpublic PrepareSpecialCollection(arg0: XoneDataCollection) {\n\t\treturn true;\n\t}\n\n\tEvaluateRule(rule: IXmlNode): boolean {\n\t\tif (rule != null) {\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic async OnCreate(CreateNew: boolean): Promise<boolean> {\n\t\tlet nodeList: XmlNodeList;\n\t\tlet bAlways: boolean;\n\t\tlet coll: XoneDataCollection;\n\n\t\t// Indicar que estamos creando el objeto\n\t\tthis.m_bIsCreating = true;\n\t\ttry {\n\t\t\tif (this.m_owner.getSpecial()) this.m_bPropagateDirty = false;\n\t\t\t// Obtener el valor del tag de la coleccin\n\t\t\tthis.m_bPropagateDirty = StringUtils.ParseBoolValue(this.m_owner.CollPropertyValue(\"propagate-dirty\"), this.m_bPropagateDirty);\n\t\t\tif (this.FieldExists(\"OBJTIMESTAMP\")) this.m_bUseTimestamp = true;\n\t\t\tthis.m_bForceCurrChanges = StringUtils.ParseBoolValue(this.m_owner.CollPropertyValue(\"forcechanges\"), false);\n\t\t\tthis.m_bXlatExist = StringUtils.ParseBoolValue(this.m_owner.CollPropertyValue(\"xlat-exist\"), true);\n\t\t\t// Obtener las acciones de creacin y ejecutarlas...\n\t\t\tcoll = this.m_owner;\n\t\t\tlet nCount = 0;\n\t\t\tdo {\n\t\t\t\tnodeList = null;\n\t\t\t\tlet createNode = coll.getNode(\"create\");\n\t\t\t\tif (createNode != null) {\n\t\t\t\t\t// Existe el nodo padre\n\t\t\t\t\tnodeList = createNode.SelectNodes(\"action\");\n\t\t\t\t\tnCount = nodeList.count();\n\t\t\t\t} // Existe el nodo padre\n\t\t\t\tif (null == (coll = coll.getParentCollection())) break;\n\t\t\t} while (nCount == 0);\n\t\t\t// Ejecutar las acciones de creacin\n\t\t\tif (nodeList != null) {\n\t\t\t\t// Solo si hay lista de acciones\n\t\t\t\tfor (let i = 0; i < nodeList.count(); i++) {\n\t\t\t\t\t// Ejecutar las acciones\n\t\t\t\t\tlet node = nodeList.get(i);\n\t\t\t\t\t// Comprueba si las reglas se cumplen\n\t\t\t\t\tbAlways = StringUtils.ParseBoolValue(XmlUtils.getNodeAttr(node, \"always\"), false);\n\t\t\t\t\t//XmlUtils.GetNodeAttr(node, \"name\");\n\t\t\t\t\t// Solo si es nuevo\n\t\t\t\t\tif (CreateNew || bAlways) {\n\t\t\t\t\t\t// Es de nueva creacin\n\t\t\t\t\t\t// Ante todo revisar las reglas\n\t\t\t\t\t\tif (!this.EvaluateNodeRules(node)) continue;\n\t\t\t\t\t\t// A12081701: Mecanismo para pasar parmetros a un nodo de accin.\n\t\t\t\t\t\t// Esto no lleva argumentos... de momento\n\t\t\t\t\t\tif (!(await this.ExecuteNodeAction(null, node, null))) return false;\n\t\t\t\t\t} // Es de nueva creacin\n\t\t\t\t} // Ejecutar las acciones\n\t\t\t} // Solo si hay lista de acciones\n\t\t\t// Algunas propiedades que deben conocerse\n\t\t\tthis.m_bDependent = StringUtils.ParseBoolValue(this.m_owner.CollPropertyValue(\"dependent\"), true);\n\t\t\t// F13030602: Correcciones en la evaluacin de frmulas de visibilidad y habilitaciones.\n\t\t\t// Tenemos que evaluar las frmulas tambin aqu si el objeto es nuevo...\n\t\t\t// Evaluar las frmulas si las hubiere...\n\t\t\t// K13081201: Cambios en el tratamiento de frmulas para mejorar la concurrencia.\n\t\t\t// synchronized (this.m_formulaLocker)\n\t\t\t// {\n\t\t\t//     if (this.m_formulas != null && CreateNew)\n\t\t\t//     {// Tiene frmulas\n\t\t\t//     \tEnumeration<String> enm =this.m_formulas.keys();\n\t\t\t//         while (enm.hasMoreElements())\n\t\t\t//         {// Evaluar\n\t\t\t//         \tString key =enm.nextElement();\n\t\t\t//         \tXoneEvalData val =this.m_formulas.get(key);\n\t\t\t//             if (val.getDirty())\n\t\t\t//                 val.Evaluate();\n\t\t\t//         }// Evaluar\n\t\t\t//     }// Tiene frmulas\n\t\t\t// }\n\t\t\t// Completo\n\t\t\tthis.m_bIsCreating = false;\n\t\t\treturn true;\n\t\t} catch (ex) {\n\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_GENERALFAIL, \"{0} failed. \");\n\t\t\tsb = sb.replace(\"{0}\", \"CXoneDataObject::OnCreate\");\n\t\t\tlet sExtraMessage = ex.message;\n\t\t\tif (!TextUtils.isEmpty(sExtraMessage)) {\n\t\t\t\tsb = sb.concat(sExtraMessage);\n\t\t\t}\n\t\t\tthrow new XoneGenericException(-10181, ex, sb);\n\t\t}\n\t}\n\n\t// /**\n\t//  * A12042505: Permitir que se pueda hacer ExecuteNode de un nodo en vez de un nombre.\n\t//  * Ejecuta todas las acciones de un nodo siempre que se cumplan las reglas que contenga.\n\t//  *\n\t//  * A12081701: Mecanismo para pasar parmetros a un nodo de accin.\n\t//  * Pasar los argumentos de llamada.\n\t//  *\n\t//  * @param node\t\t\t\tNodo cuyas acciones se quieren ejecutar.\n\t//  * @return\t\t\t\t\tDevuelve TRUE si las acciones del nodo se ejecutan correctamente.\n\t//  * @throws Exception\n\t//  */\n\t// public ExecuteNode(node: XmlNode | string, ...Arguments): boolean {\n\t//     if (node == null)\n\t//         return false;\n\t//     if (typeof node == 'string') {\n\t//         node = this.getOwnerCollection().getNode(node);\n\t//     }\n\t//     if (ObjUtils.IsNothing(node)) {\n\t//         console.error(\"No se pudo ejecutar el nodo\");\n\t//         throw new Exception(\"Error ejecutando nodo\");\n\t//     }\n\t//     // Existe el nodo. Ejecutar las acciones\n\t//     return this.ExecuteNodeActions(node, \"action\", null, ...Arguments);\n\t// }\n\n\t// /**\n\t//  * Ejecuta todas las acciones de un nodo.\n\t//  * A12081701: Mecanismo para pasar parmetros a un nodo de accin.\n\t//  * Un parmetro con la lista de argumentos que tiene que traer el nodo en caso de necesitarlos.\n\t//  *\n\t//  * @param Node\t\t\tNodo XML cuyas acciones se quieren ejecutar.\n\t//  * @param Prefix\t\tPrefijo de las acciones a ejecutar. NULL para usar 'action'.\n\t//  * @param Scopes\t\tLista de mbitos para resolver los objetos sobre los que operan las acciones del nodo.\n\t//  * @return\t\t\t\tDevuelve TRUE si todas las acciones se ejecutan correctamente.\n\t//  * @throws Exception\n\t//  */\n\t// protected ExecuteNodeActions(Node: XmlNode, Prefix: string, Scopes: Array<any>, ...Arguments): boolean {\n\t//     let nodeList: XmlNodeList;\n\n\t//     if (StringUtils.IsEmptyString(Prefix))\n\t//         Prefix = \"action\";\n\n\t//     nodeList = Node.SelectNodes(Prefix);\n\t//     // Ejecuta cada una de las acciones\n\t//     for (let i = 0; i < nodeList.count(); i++) {// Ejecutar las acciones\n\t//         let node = nodeList.get(i);\n\t//         // Pasar la lista de scopes a la evaluacin, que para eso se ha pasado aqu\n\t//         try {\n\t//             if (!this.EvaluateNodeRules(node, Scopes))\n\t//                 continue;   // Puede ser que se quiere lanzar el error\n\t//         }\n\t//         catch (e) {\n\t//             continue;   // Ignorar la excepcin de validacin y seguir\n\t//         }\n\t//         // A12081701: Mecanismo para pasar parmetros a un nodo de accin.\n\t//         // Pasar los argumentos...\n\t//         if (!this.ExecuteNodeAction(null, node, 0, ...Arguments))\n\t//             return false;\n\t//     }// Ejecutar las acciones\n\t//     return true;\n\t// }\n\n\t// ExecuteNodeAction(FieldName: string, Action: XmlNode, ActionType: number = 0, ...Parameters) {\n\t//     // TODO:    Aqu hay que poner las acciones y cosas que faltan para que se llame desde todas partes.\n\t//     let str = XmlUtils.getNodeAttr(Action, \"name\");\n\t//     // F11083001: ExecuteNodeAction debera protegerse de acciones sin nombre.\n\t//     // Nombres vacos no por favor...\n\t//     if (StringUtils.IsEmptyString(str)) {\n\t//         return false;\n\t//     }\n\t//     switch (str) {\n\t//         // case \"link\":\n\t//         //     return DoLink(FieldName, Action);\n\t//         // case \"executesql\":\n\t//         //     return DoExecuteSql(Action);\n\t//         // case \"executecompsql\":\n\t//         //     return DoExecuteCompSql(Action);\n\t//         // case \"executenode\":\n\t//         //     return ExecuteNode(XmlUtils.getNodeAttr(Action, \"nodename\"));\n\t//         // case \"addval\":\n\t//         //     return DoAddVal(Action, null);\n\t//         // case \"mapval\":\n\t//         //     if (ActionType == ActionNodeType.NODETYPE_DELETE) {\n\t//         //         return DoDelMapVal(Action);\n\t//         //     } else {\n\t//         //         return DoMapVal(Action);\n\t//         //     }\n\t//         // case \"setfldval\":\n\t//         //     return DoSetFldVal(Action);\n\t//         // case \"updateobj\":\n\t//         //     return DoUpdateObj(Action);\n\t//         // case \"updateacc\":\n\t//         //     return DoUpdateAcc(Action);\n\t//         case \"setval\":\n\t//             return this.DoSetVal(Action);\n\t//         // case \"updatecnt\":\n\t//         //     return DoUpdateCnt(FieldName, Action);\n\t//         // case \"generatecnt\":\n\t//         //     return DoGenerateCnt(FieldName, Action);\n\t//         // case \"generatemember\":\n\t//         //     return DoGenerateMember(FieldName, Action);\n\t//         // case \"updatemember\":\n\t//         //     return DoUpdateMember(FieldName, Action);\n\t//         // case \"updatedepth\":\n\t//         //     return DoUpdateDepth(FieldName, Action);\n\t//         // case \"generate\":\n\t//         //     return DoGenerate(Action);\n\t//         // case \"executemethod\":\n\t//         //     return InvokeMethod(Action);\n\t//         // case \"for-each-contents\":\n\t//         //     return DoForEachContents(FieldName, Action);  // Tiene el contents definido\n\t//         // case \"add-content\":\n\t//         //     return DoAddContent(Action);\n\t//         // case \"remove-content\":\n\t//         //     return DoRemoveContent(Action);\n\t//         // A12081701: Mecanismo para pasar parmetros a un nodo de accin.\n\t//         // Pasamos los parmetros en cuestin...\n\t//         case \"runscript\":\n\t//             try {\n\t//                 this.DoRunScript(Action, ...Parameters);\n\t//                 return true;\n\t//             } catch (ex) {\n\t//                 console.error(ex);\n\t//                 return false;\n\t//             }\n\t//         // case \"msgbox\":\n\t//         //     return DoMessageBox(Action);\n\t//         default:\n\t//             // Mtodo desconocido\n\t//             // Si tiene funcionalidad propia, llamar a quien lo ejecuta\n\t//             return true; // ExecuteExternalAction(FieldName, Action);\n\t//     }\n\t// }\n\n\t/**\n\t * A12042505: Permitir que se pueda hacer ExecuteNode de un nodo en vez de un nombre.\n\t * Ejecuta todas las acciones de un nodo siempre que se cumplan las reglas que contenga.\n\t *\n\t * A12081701: Mecanismo para pasar parmetros a un nodo de accin.\n\t * Pasar los argumentos de llamada.\n\t *\n\t * @param node\t\t\t\tNodo cuyas acciones se quieren ejecutar.\n\t * @return\t\t\t\t\tDevuelve TRUE si las acciones del nodo se ejecutan correctamente.\n\t * @throws Exception\n\t */\n\tpublic async executeNode(node: XmlNode | string, ...Arguments): Promise<boolean> {\n\t\treturn await this.ExecuteNode(node, ...Arguments);\n\t}\n\tpublic async ExecuteNode(node: XmlNode | string, ...Arguments): Promise<boolean> {\n\t\t// Alejandro 02/07/2021: Parche para poder evaluar el executenode como lo evalua la gente que trabajar con el framework, enviando los parmetros concatenados como un nico string\n\t\tif (typeof node === \"string\" && node.includes(\"(\") && node.includes(\")\") && this[\"executeMethod\"]) return await this[\"executeMethod\"](node);\n\n\t\tif (node == null) return false;\n\t\tif (typeof node == \"string\") {\n\t\t\tnode = this.getOwnerCollection().getNode(node);\n\t\t}\n\t\tif (ObjUtils.IsNothing(node)) {\n\t\t\treturn false;\n\t\t\t// console.error(\"No se pudo ejecutar el nodo\");\n\t\t\t// throw new Exception(\"Error ejecutando nodo\");\n\t\t}\n\t\t// Existe el nodo. Ejecutar las acciones\n\t\treturn await this.ExecuteNodeActions(node, \"action\", null, ...Arguments);\n\t}\n\n\t/**\n\t * Ejecuta todas las acciones de un nodo.\n\t * A12081701: Mecanismo para pasar parmetros a un nodo de accin.\n\t * Un parmetro con la lista de argumentos que tiene que traer el nodo en caso de necesitarlos.\n\t *\n\t * @param Node\t\t\tNodo XML cuyas acciones se quieren ejecutar.\n\t * @param Prefix\t\tPrefijo de las acciones a ejecutar. NULL para usar 'action'.\n\t * @param Scopes\t\tLista de mbitos para resolver los objetos sobre los que operan las acciones del nodo.\n\t * @return\t\t\t\tDevuelve TRUE si todas las acciones se ejecutan correctamente.\n\t * @throws Exception\n\t */\n\tprotected async ExecuteNodeActions(Node: XmlNode, Prefix: string, Scopes: Array<any>, ...Arguments): Promise<boolean> {\n\t\tlet nodeList: XmlNodeList;\n\n\t\tif (StringUtils.IsEmptyString(Prefix)) Prefix = \"action\";\n\n\t\tnodeList = Node.SelectNodes(Prefix);\n\t\t// Ejecuta cada una de las acciones\n\t\tfor (let i = 0; i < nodeList.count(); i++) {\n\t\t\t// Ejecutar las acciones\n\t\t\tlet node = nodeList.get(i);\n\t\t\t// Pasar la lista de scopes a la evaluacin, que para eso se ha pasado aqu\n\t\t\ttry {\n\t\t\t\tif (!this.EvaluateNodeRules(node, Scopes)) continue; // Puede ser que se quiere lanzar el error\n\t\t\t} catch (e) {\n\t\t\t\tcontinue; // Ignorar la excepcin de validacin y seguir\n\t\t\t}\n\t\t\t// A12081701: Mecanismo para pasar parmetros a un nodo de accin.\n\t\t\t// Pasar los argumentos...\n\t\t\tif (!(await this.ExecuteNodeAction(null, node, 0, ...Arguments))) return false;\n\t\t} // Ejecutar las acciones\n\t\treturn true;\n\t}\n\n\tprotected async ExecuteNodeAction(FieldName: string, Action: XmlNode, ActionType: number = 0, ...Parameters): Promise<boolean> {\n\t\t// TODO:    Aqu hay que poner las acciones y cosas que faltan para que se llame desde todas partes.\n\t\tlet str = XmlUtils.getNodeAttr(Action, \"name\");\n\t\t// F11083001: ExecuteNodeAction debera protegerse de acciones sin nombre.\n\t\t// Nombres vacos no por favor...\n\t\tif (StringUtils.IsEmptyString(str)) {\n\t\t\treturn false;\n\t\t}\n\t\tswitch (str) {\n\t\t\t// case \"link\":\n\t\t\t//     return DoLink(FieldName, Action);\n\t\t\t// case \"executesql\":\n\t\t\t//     return DoExecuteSql(Action);\n\t\t\t// case \"executecompsql\":\n\t\t\t//     return DoExecuteCompSql(Action);\n\t\t\t// case \"executenode\":\n\t\t\t//     return ExecuteNode(XmlUtils.getNodeAttr(Action, \"nodename\"));\n\t\t\t// case \"addval\":\n\t\t\t//     return DoAddVal(Action, null);\n\t\t\t// case \"mapval\":\n\t\t\t//     if (ActionType == ActionNodeType.NODETYPE_DELETE) {\n\t\t\t//         return DoDelMapVal(Action);\n\t\t\t//     } else {\n\t\t\t//         return DoMapVal(Action);\n\t\t\t//     }\n\t\t\t// case \"setfldval\":\n\t\t\t//     return DoSetFldVal(Action);\n\t\t\t// case \"updateobj\":\n\t\t\t//     return DoUpdateObj(Action);\n\t\t\t// case \"updateacc\":\n\t\t\t//     return DoUpdateAcc(Action);\n\t\t\tcase \"setval\":\n\t\t\t\treturn await this.DoSetVal(Action);\n\t\t\t// case \"updatecnt\":\n\t\t\t//     return DoUpdateCnt(FieldName, Action);\n\t\t\t// case \"generatecnt\":\n\t\t\t//     return DoGenerateCnt(FieldName, Action);\n\t\t\t// case \"generatemember\":\n\t\t\t//     return DoGenerateMember(FieldName, Action);\n\t\t\t// case \"updatemember\":\n\t\t\t//     return DoUpdateMember(FieldName, Action);\n\t\t\t// case \"updatedepth\":\n\t\t\t//     return DoUpdateDepth(FieldName, Action);\n\t\t\t// case \"generate\":\n\t\t\t//     return DoGenerate(Action);\n\t\t\t// case \"executemethod\":\n\t\t\t//     return InvokeMethod(Action);\n\t\t\t// case \"for-each-contents\":\n\t\t\t//     return DoForEachContents(FieldName, Action);  // Tiene el contents definido\n\t\t\t// case \"add-content\":\n\t\t\t//     return DoAddContent(Action);\n\t\t\t// case \"remove-content\":\n\t\t\t//     return DoRemoveContent(Action);\n\t\t\t// A12081701: Mecanismo para pasar parmetros a un nodo de accin.\n\t\t\t// Pasamos los parmetros en cuestin...\n\t\t\tcase \"runscript\":\n\t\t\t\ttry {\n\t\t\t\t\treturn await this.DoRunScriptAsync(Action, ...Parameters);\n\t\t\t\t} catch (ex) {\n\t\t\t\t\tconsole.error(ex);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t// case \"msgbox\":\n\t\t\t//     return DoMessageBox(Action);\n\t\t\tdefault:\n\t\t\t\t// Mtodo desconocido\n\t\t\t\t// Si tiene funcionalidad propia, llamar a quien lo ejecuta\n\t\t\t\treturn true; // ExecuteExternalAction(FieldName, Action);\n\t\t}\n\t}\n\n\tEvaluateNodeRules(node: XmlNode, scopesList?: Array<any>) {\n\t\t// IXmlNodeList rules;\n\t\t// Object vl = null;\n\t\t// String strField, str;\n\t\t// boolean bRaiseError;\n\t\t// XoneDataObject exec;\n\t\t// XoneDataObject target;\n\n\t\t// if (Node == null)\n\t\t//     return true;\n\t\t// // Comprobar si este nodo tiene un atributo \"field\"\n\t\t// // para usar ese valor\n\t\t// if (!StringUtils.IsEmptyString(strField = XmlUtils.GetNodeAttr(Node, \"field\"))) // Obtener el valor que tenga ahora\n\t\t//     vl = GetPropertyValue(strField);\n\t\t// // Obtener las reglas\n\t\t// rules = Node.SelectNodes(\"rule\");\n\t\t// for (int i =0;i <rules.count();i++)\n\t\t// {// Evala cada regla\n\t\t// \tIXmlNode rule =rules.get(i);\n\t\t//     if (null != (exec = FindScopeObject(rule, ScopeList)))\n\t\t//     {// Solo si no se ha evaluado antes\n\t\t//         // Buscar si la regla tiene target-scope para los campos y valores de la derecha\n\t\t//         if (!StringUtils.IsEmptyString(str = XmlUtils.GetNodeAttr(rule, \"target-scope\")))\n\t\t//             target = FindScopeObject(str, ScopeList, true);\n\t\t//         else\n\t\t//             target = null;\n\t\t//         // Pasarlo como parmetro\n\t\t//         try\n\t\t//         {\n\t\t//         \tXoneRuleResult result;\n\t\t//         \tresult =exec.EvaluateRule(strField, vl, rule, target);\n\t\t//             if (!result.getRuleResult())\n\t\t//                 return false;\t\t// Error\n\t\t//         }\n\t\t//         catch (Exception e)\n\t\t//         {\n\t\t//             if (e instanceof XoneValidationException)\n\t\t//             {// Hay que dejarla seguir\n\t\t//                 str = XmlUtils.GetNodeAttr(rule, \"raise\");\n\t\t//                 bRaiseError = StringUtils.ParseBoolValue(str, false);\n\t\t//                 if (bRaiseError)\n\t\t//                     throw e;\n\t\t//                 else\n\t\t//                     return false;   // No lanzar error, directamente devolver que ha fallado la regla\n\t\t//             }// Hay que dejarla seguir\n\t\t//             // Otra excepcin, dejarla seguir\n\t\t//             throw e;\n\t\t//         }\n\t\t//     }// Solo si no se ha evaluado antes\n\t\t// }// Evala cada regla\n\t\t// Todas las reglas han triunfado.\n\t\treturn true;\n\t}\n\n\t/**\n\t * Ejecuta un nodo runscript pasando el script y el contexto a la aplicacin base.\n\t * @param ActionNode\t\tNodo script a ejecutar.\n\t * @return\t\t\t\t\tDevuelve TRUE si se ejecutan correctamente todos los scripts.\n\t * @throws Exception\n\t */\n\tpublic async doRunScript(ActionNode: XmlNode | string, ...Arguments): Promise<any> {\n\t\treturn await this.DoRunScriptAsync(ActionNode, ...Arguments);\n\t}\n\n\t// protected DoRunScript(ActionNode: XmlNode | string, ...Arguments): any {\n\t//     let data = this.prepareContext(ActionNode, ...Arguments);\n\t//     let n = data.scripts.length;\n\t//     for (let i = 0; i < n; i++) {\n\t//         this.getOwnerApp().RunScript(data.funcNames[i], data.slang, data.scripts[i], data.ctx, data.Arguments);\n\t//     }\n\t//     // OK\n\t//     return true;\n\t// }\n\n\tprotected async DoRunScriptAsync(ActionNode: XmlNode | string, ...Arguments): Promise<any> {\n\t\tlet data = this.m_owner.prepareContext(this, ActionNode, ...Arguments);\n\t\tlet n = data.scripts.length;\n\t\tlet promises: Promise<any>[] = new Array<Promise<any>>();\n\t\tfor (let i = 0; i < n; i++) {\n\t\t\tawait this.getOwnerApp().RunScriptAsync(\n\t\t\t\tdata.funcNames[i],\n\t\t\t\tdata.slang,\n\t\t\t\tdata.scripts[i],\n\t\t\t\tdata.ctx,\n\t\t\t\tdata.Arguments,\n\t\t\t\tdata.argsName,\n\t\t\t\tdata.argsValue\n\t\t\t);\n\t\t}\n\t\t// OK\n\t\treturn true;\n\t}\n\n\t/**\n\t * Asigna valor a un campo de este objeto a partir del valor sacado del nodo XML.\n\t * @param ActionNode\t\tNodo XML con los datos del campo y valor que se le va a asignar.\n\t * @return\t\t\t\t\tDevuelve TRUE si la asignacin es correcta.\n\t * @throws Exception\n\t */\n\tprivate async DoSetVal(ActionNode: XmlNode): Promise<boolean> {\n\t\tlet strField = \"\",\n\t\t\tstrValue = \"\",\n\t\t\tstrType = \"\";\n\t\tlet vl: any = null;\n\n\t\tstrField = XmlUtils.GetNodeAttr(ActionNode, \"field\");\n\t\tstrValue = XmlUtils.GetNodeAttr(ActionNode, \"value\");\n\n\t\t// Habra que analizar si es filosficamente correcto dejar el value\n\t\t// vaco e interpretarlo como EMPTY o disparar un error.. por ahora\n\t\t// no busquemos ms problemas.\n\t\tif (StringUtils.IsEmptyString(strValue)) return true;\n\t\t// 06/10/2016 Juan Carlos, check extra\n\t\tif (TextUtils.isEmpty(strField)) {\n\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_OBJ_SETVALFAIL, \"CXoneDataObject::DoSetVal failed. Field attribute is missing.\");\n\t\t\tthrow new XoneValidationException(-1991, sb);\n\t\t}\n\t\t// El campo tiene que existir\n\t\tif (!this.FieldExists(strField)) {\n\t\t\t// Error\n\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_OBJ_SETVALFAIL, \"{0} failed. Field '{1}' is not declared in collection '{2}.\");\n\t\t\tsb = sb.replace(\"{0}\", \"CXoneDataObject::DoSetVal\");\n\t\t\tsb = sb.replace(\"{1}\", strField);\n\t\t\tsb = sb.replace(\"{2}\", this.m_owner.getName());\n\t\t\tthrow new XoneValidationException(-1991, sb);\n\t\t} // Error\n\t\tstrType = this.FieldPropertyValue(strField, \"type\");\n\t\tif (StringUtils.IsEmptyString(strType)) strType = XmlUtils.GetNodeAttr(ActionNode, \"type\");\n\t\tvl = await this.GetValueFromString(strValue, strType);\n\t\t// Asignar el valor\n\t\tthis.put(strField, vl);\n\t\treturn true;\n\t}\n\n\tFieldExists(FieldName: string) {\n\t\treturn this.m_owner.FieldExists(FieldName);\n\t}\n\n\t/**\n\t * F11092606: Cuando se carga un objeto con Load, limpiar los contents.\n\t * Esta funcin limpia los contents del objeto.\n\t */\n\tpublic ClearContents(): void {\n\t\tif (this.m_lstContents == null) {\n\t\t\treturn;\n\t\t}\n\t\tthis.m_lstContents.values().forEach((content) => {\n\t\t\tif (!ObjUtils.IsNothing(content)) {\n\t\t\t\tcontent.unlock();\n\t\t\t\tcontent.clear();\n\t\t\t}\n\t\t});\n\t\t// let sAllKeys = this.m_lstContents.keys();\n\t\t// while (sAllKeys.hasMoreElements()) {\n\t\t//     XoneDataCollection content = this.m_lstContents.get(sAllKeys.nextElement());\n\t\t//     if (content == null) {\n\t\t//         continue;\n\t\t//     }\n\t\t//     content.Unlock();\n\t\t//     content.Clear();\n\t\t// }\n\t}\n\n\tprotected resolveFieldName(name: string): string {\n\t\t/*\n\t\t * Comprobamos que comienza como una macro de lo contrario\n\t\t * como siempre\n\t\t */\n\t\tif (!TextUtils.isEmpty(name) && !name.startsWith(Utils.MACRO_TAG)) return name;\n\t\tif (TextUtils.isEmpty(name)) return name;\n\t\tlet properties = this.m_owner.getProperties();\n\t\tif (properties == null) return name;\n\t\tlet n = name.indexOf(Utils.MACRO_TAG, 2);\n\t\tif (n < 0) n = name.length;\n\t\tlet index = name.substring(2, n);\n\t\tlet nd = properties.SelectSingleNode(Utils.PROP_NAME, Utils.PROP_ATTR_INDEX, index);\n\t\tif (nd == null) return name;\n\t\treturn nd.getAttrValue(Utils.PROP_ATTR_NAME);\n\t}\n\n\tprotected reverseResolveFieldName(name: string): string {\n\t\t/*\n\t\t * Comprobamos que comienza como una macro de lo contrario\n\t\t * como siempre\n\t\t */\n\t\tif (!this.m_owner.isIndexed()) return name;\n\t\tif (TextUtils.isEmpty(name)) return name;\n\t\tlet properties = this.m_owner.getProperties();\n\t\tif (properties == null) return name;\n\t\tlet index = \"\";\n\t\ttry {\n\t\t\tindex = this.m_owner.FieldPropertyValue(name, Utils.PROP_ATTR_INDEX);\n\t\t} catch (e) {\n\t\t\treturn name;\n\t\t}\n\t\tif (TextUtils.isEmpty(index)) return name;\n\t\telse {\n\t\t\tlet bld = new StringBuilder(Utils.MACRO_TAG);\n\t\t\tbld.append(index);\n\t\t\treturn bld.toString();\n\t\t}\n\t}\n\n\tpublic async Load(Source: IResultSet): Promise<boolean> {\n\t\ttry {\n\t\t\t// M11092601: Modificaciones para mejorar el soporte de objetos voltiles.\n\t\t\t// Limpiar la lista de valores por si el objeto era voltil y tena valores...\n\t\t\tthis.m_lstNormalProperties.clear();\n\t\t\t// F11092606: Cuando se carga un objeto con Load, limpiar los contents.\n\t\t\tthis.ClearContents();\n\t\t\tlet n = Source.getColumnCount();\n\t\t\t// Primero leer los valores\n\t\t\tfor (let i = 0; i < n; i++) {\n\t\t\t\t// Recorrer los campos y leer los valores\n\t\t\t\tlet strFieldName = this.resolveFieldName(Source.getColumnName(i));\n\t\t\t\t// K11010501:\tModificaciones para la versin 1.5 de Android.\n\t\t\t\tlet objVal = Source.getValue(i, this.m_owner.getTypeFromXml(this.m_owner.PropType(strFieldName)));\n\t\t\t\t// Almacenar las propiedades normales, siempre que el valor no sea nulo, claro\n\t\t\t\tif (objVal != null) {\n\t\t\t\t\t// Tiene valor\n\t\t\t\t\t// A11092602: Permitir el uso de resultsets jerrquicos en forma de rbol para cargas mltiples.\n\t\t\t\t\t// El dato podra de ser otro resultset...\n\t\t\t\t\tif (\n\t\t\t\t\t\tObjUtils.prototype.hasOwnProperty.call(objVal, \"isResultset\") &&\n\t\t\t\t\t\t!strFieldName.startsWith(Utils.MACRO_TAG) &&\n\t\t\t\t\t\t!strFieldName.equals(\"ID\")\n\t\t\t\t\t) {\n\t\t\t\t\t\t// Aqu tenemos que llenar contents\n\t\t\t\t\t\tlet rs = objVal as IResultSet;\n\t\t\t\t\t\tif (!this.LoadObjectContents(strFieldName, rs)) {\n\t\t\t\t\t\t\t// Error\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t} // Error\n\t\t\t\t\t} // Aqu tenemos que llenar contents\n\t\t\t\t\t// Otra cosa\n\t\t\t\t\telse this[strFieldName] = objVal;\n\t\t\t\t\t//this.m_lstNormalProperties.put(strFieldName, objVal);\n\t\t\t\t} // Tiene valor // F10052505:\tCuando se asigna valor a propiedades nulas en Load, limpiar la lista.\n\t\t\t\telse this.m_lstNormalProperties.delete(strFieldName);\n\t\t\t\t// Ver si se trata de la clave\n\t\t\t\tif (!this.m_owner.getMultipleKey()) {\n\t\t\t\t\t// Una sola clave\n\t\t\t\t\tif (strFieldName.equals(this.getIdFieldName())) {\n\t\t\t\t\t\t// Es el campo clave\n\t\t\t\t\t\tif (!this.m_owner.getStringKey()) {\n\t\t\t\t\t\t\t// Numrico\n\t\t\t\t\t\t\tif (0 == (this.m_lObjectId = NumberUtils.SafeToInt(objVal))) this.m_bReadOnly = true;\n\t\t\t\t\t\t\telse this.m_strObjectId = String.format(\"%d\", this.m_lObjectId);\n\t\t\t\t\t\t} // Numrico\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// Cadena\n\t\t\t\t\t\t\tif (objVal != null) this.m_strObjectId = objVal.toString();\n\t\t\t\t\t\t\tthis.m_lObjectId = -1;\n\t\t\t\t\t\t} // Cadena\n\t\t\t\t\t} // Es el campo clave\n\t\t\t\t} // Una sola clave\n\t\t\t} // Recorrer los campos y leer los valores\n\t\t\t// Ahora limpiar la lista de propiedades sucias\n\t\t\tthis.m_lstDirtyProperties = new Vector<string>();\n\t\t\t// Si son mltiples claves buscar la lista\n\t\t\tif (this.m_owner.getMultipleKey()) {\n\t\t\t\t// Clave mltiple\n\t\t\t\tthis.m_strObjectId = this.GetMultipleKeyString(); // Varias claves\n\t\t\t\tthis.m_lObjectId = -1; // Marcar que se ha cargado COO!!!\n\t\t\t} // Clave mltiple\n\t\t\tthis.setDirty(false);\n\t\t\t// F11070701: Modificaciones para solucionar los enlaces y grabacin con claves no numricas.\n\t\t\t// Indicar que el objeto no es nuevo\n\t\t\tthis.m_bNewObject = false;\n\t\t\t// Ejecutar los eventos de carga\n\t\t\treturn await this.OnLoad();\n\t\t} catch (e) {\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * A11092602: Permitir el uso de resultsets jerrquicos en forma de rbol para cargas mltiples.\n\t * Rellena un contents del objeto basado en un resultset que contiene los objetos.\n\t *\n\t * @param ContentsName\n\t * @param Source\n\t * @return\n\t * @throws Exception\n\t */\n\tprivate async LoadObjectContents(ContentsName: string, Source: IResultSet): Promise<boolean> {\n\t\t// Lo primero es ver si tenemos contents\n\t\tlet cnt = await this.getContents(ContentsName);\n\t\tif (cnt == null) {\n\t\t\t// Ver si es una propiedad y buscar contents\n\t\t\t//K11092602: Modificaciones para trabajar con conexiones online puras.\n\t\t\tlet ContentsFromProp = this.m_owner.FieldPropertyValue(ContentsName, Utils.PROP_ATTR_CONTENTNAME);\n\t\t\tif (TextUtils.isEmpty(ContentsFromProp)) {\n\t\t\t\tthis.getOwnerApp().RegisterError(-1, \"Cannot find contents with name '\" + ContentsName + \"'\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tcnt = await this.getContents(ContentsFromProp);\n\t\t\tif (cnt == null) {\n\t\t\t\t// Error\n\t\t\t\tthis.getOwnerApp().RegisterError(-1, \"Cannot find contents with name '\" + ContentsName + \"'\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} // Error\n\t\t// A11092602: Permitir el uso de resultsets jerrquicos en forma de rbol para cargas mltiples.\n\t\t// Limpiar el contents\n\t\tcnt.unlock();\n\t\tcnt.clear();\n\t\t// Ahora cargar...\n\t\twhile (await Source.next()) {\n\t\t\t// Cargar\n\t\t\tlet nobj = await cnt.CreateObject(false);\n\t\t\tif (nobj == null) {\n\t\t\t\t// Error\n\t\t\t\tif (this.getOwnerApp().getError().getNumber() != 0)\n\t\t\t\t\tthis.getOwnerApp().RegisterError(-1, \"Cannot create new object for contents '\" + ContentsName + \"'\");\n\t\t\t\treturn false;\n\t\t\t} // Error\n\t\t\tif (!(await nobj.Load(Source))) {\n\t\t\t\t// Error\n\t\t\t\tif (this.getOwnerApp().getError().getNumber() != 0)\n\t\t\t\t\tthis.getOwnerApp().RegisterError(-1, \"Error loading object data for contents '\" + ContentsName + \"'\");\n\t\t\t\treturn false;\n\t\t\t} // Error\n\t\t\t// Adicionarlo a la coleccin\n\t\t\tif (!cnt.addItem(nobj)) {\n\t\t\t\t// Error\n\t\t\t\tif (this.getOwnerApp().getError().getNumber() != 0)\n\t\t\t\t\tthis.getOwnerApp().RegisterError(-1, \"Cannot add new object to contents '\" + ContentsName + \"'\");\n\t\t\t\treturn false;\n\t\t\t} // Error\n\t\t} // Cargar\n\t\t// A11092602: Permitir el uso de resultsets jerrquicos en forma de rbol para cargas mltiples.\n\t\tcnt.setFull(true);\n\t\t//cnt.Lock();\n\t\t// Completio...\n\t\treturn true;\n\t}\n\n\t/**\n\t * Esta funcin se llama cuando se termina de cargar el objeto. La pueden redefinir los objetos derivados para modificar el comportamiento del objeto al cargarse.\n\t * @return\t\t\tDevuelve TRUE si las acciones de carga se ejecutan todas sin problemas.\n\t * @throws XoneGenericException\n\t */\n\tprotected async OnLoad(): Promise<boolean> {\n\t\tlet coll: XoneDataCollection;\n\t\tlet actions: XmlNodeList;\n\n\t\ttry {\n\t\t\t// F13022104: El acceso a las frmulas de visibilidad de campos debe ser concurrente.\n\t\t\t// Evaluar las frmulas si las hubiere...\n\t\t\t// K13081201: Cambios en el tratamiento de frmulas para mejorar la concurrencia.\n\t\t\t// locking.... usando el objeto adecuado...\n\t\t\t// TODO: Luis esto lo resolveremos en el UI\n\t\t\t// (this.m_formulaLocker)\n\t\t\t// {\n\t\t\t//     if (this.m_formulas != null)\n\t\t\t//     {// Tiene frmulas\n\t\t\t//     \tEnumeration<String> enm =this.m_formulas.keys();\n\t\t\t//         while(enm.hasMoreElements())\n\t\t\t//         {// Evaluar\n\t\t\t//         \tString key =enm.nextElement();\n\t\t\t//         \tXoneEvalData val =this.m_formulas.get(key);\n\t\t\t//             // F13030602: Correcciones en la evaluacin de frmulas de visibilidad y habilitaciones.\n\t\t\t//             // Solo si est sucio...\n\t\t\t//             if (val.getDirty())\n\t\t\t//                 val.Evaluate();\n\t\t\t//         }// Evaluar\n\t\t\t//     }// Tiene frmulas\n\t\t\t// }\n\t\t\tcoll = this.getOwnerCollection();\n\t\t\tdo {\n\t\t\t\tactions = coll.getNodeList(\"prop\", \"onload\", \"true\");\n\t\t\t\t// Ahora bar cada accin y ejecutar los cambios de valor para cada una de estas\n\t\t\t\t// propiedades\n\t\t\t\tfor (let i = 0; i < actions.count(); i++) {\n\t\t\t\t\t// Acciones\n\t\t\t\t\tlet action = actions.get(i);\n\t\t\t\t\tawait this.OnChange(XmlUtils.getNodeAttr(action, \"name\"));\n\t\t\t\t} // Acciones\n\t\t\t\tcoll = coll.getParentCollection();\n\t\t\t} while (coll != null);\n\t\t\t// Primero obtener los datos de la empresa\n\t\t\tcoll = this.getOwnerCollection();\n\t\t\tdo {\n\t\t\t\t// Primero obtener el nodo load\n\t\t\t\tactions = null;\n\t\t\t\tlet loadNode = coll.getNode(\"load\");\n\t\t\t\tif (loadNode != null) {\n\t\t\t\t\t// Solo si tiene el nodo padre, claro\n\t\t\t\t\tactions = loadNode.SelectNodes(\"action\");\n\t\t\t\t\tif (actions.count() > 0) break;\n\t\t\t\t} // Solo si tiene el nodo padre, claro\n\t\t\t\tcoll = coll.getParentCollection();\n\t\t\t} while (coll != null);\n\n\t\t\tif (actions != null) {\n\t\t\t\t// Tiene lista de acciones\n\t\t\t\tfor (let i = 0; i < actions.count(); i++) {\n\t\t\t\t\t// Ejecutar las acciones\n\t\t\t\t\tlet action = actions.get(i);\n\t\t\t\t\t//XmlUtils.GetNodeAttr(action, \"name\");\n\t\t\t\t\t// Ante todo revisar las reglas\n\t\t\t\t\tif (!this.EvaluateNodeRules(action)) continue;\n\t\t\t\t\t// Ejecutar las acciones\n\t\t\t\t\t// A12081701: Mecanismo para pasar parmetros a un nodo de accin.\n\t\t\t\t\t// Esto no lleva argumentos... por ahora.\n\t\t\t\t\tif (!(await this.ExecuteNodeAction(null, action))) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} // Ejecutar las acciones\n\t\t\t} // Tiene lista de acciones\n\t\t\treturn true;\n\t\t} catch (ex) {\n\t\t\tlet sDetails = ex.message;\n\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_GENERALFAIL, \"{0} failed. \");\n\t\t\tsb = sb.replace(\"{0}\", \"CXoneDataObject::AfterLoad\");\n\t\t\tif (!StringUtils.IsEmptyString(sDetails)) {\n\t\t\t\tsb = sb.concat(sDetails);\n\t\t\t}\n\t\t\tthrow new XoneGenericException(-10181, ex, sb);\n\t\t}\n\t}\n\n\t/**\n\t * Este mtodo se ejecuta cuando cambia el valor de un campo. Tiene en cuenta posibles reentradas recursivas.\n\t * @param FieldName\t\tNombre del campo que ha cambiado.\n\t * @throws Exception\n\t */\n\tprotected async OnChange(FieldName: string): Promise<void> {\n\t\tlet cnode: XmlNode;\n\t\tlet strOldChgField: string;\n\n\t\t// Obtener el nodo que contiene las acciones a realizar\n\t\t// al ocurrir un cambio\n\t\tlet onchangeNode = this.getNode(\"onchange\");\n\t\tif (onchangeNode == null) return;\n\t\t// Ahora tendremos que buscar si hay nodos onchange para este campo\n\t\tstrOldChgField = this.m_strChangeField;\n\t\tthis.m_strChangeField = FieldName;\n\t\tlet b = true;\n\t\t// A12081701: Mecanismo para pasar parmetros a un nodo de accin.\n\t\t// De momento aqu no llevamos argumentos... por ahora.\n\t\tlet args = [];\n\t\targs.push(new CXoneNameValuePair(\"ChgField\", this.m_strChangeField));\n\t\tif (null != (cnode = onchangeNode.SelectSingleNode(\"field\", \"name\", FieldName)))\n\t\t\tb = await this.ExecuteNodeActions(cnode, Utils.EMPTY_STRING, null, ...args);\n\t\tif (b) {\n\t\t\t// Si la vez anterior no ha fallado\n\t\t\tif (null != (cnode = onchangeNode.SelectSingleNode(\"field\", \"name\", \"##ANY##\")))\n\t\t\t\tawait this.ExecuteNodeActions(cnode, Utils.EMPTY_STRING, null, ...args);\n\t\t} // Si la vez anterior no ha fallado\n\t\tthis.m_strChangeField = strOldChgField;\n\t}\n\n\tpublic async ObjectItem(FieldName: string, SearchCollName: string = null): Promise<XoneDataObject> {\n\t\t// Buscar el nombre de la coleccin si no nos la dan\n\t\tlet strCollName = SearchCollName;\n\n\t\tif (StringUtils.IsEmptyString(strCollName)) {\n\t\t\t// Buscarla en la propiedad\n\t\t\tif (StringUtils.IsEmptyString((strCollName = this.FieldPropertyValue(FieldName, \"mapcol\")))) return null;\n\t\t} // Buscarla en la propiedad\n\t\t// Ahora tenemos que buscar la propiedad\n\t\tlet objId = this.get(FieldName);\n\t\tif (objId == null) return null; // Na de na...\n\t\tlet coll = await this.getOwnerApp().getCollection(strCollName);\n\t\tif (coll == null) return null;\n\t\t// Buscar en la coleccin el objeto cuyo campo clave sea el objeto que tiene nuestro campo ID\n\t\t// F12102208: La clave de ObjectItem podra venir vaca y hay que comprobarlo.\n\t\tlet strId = objId.toString();\n\t\tif (StringUtils.IsEmptyString(strId)) return null;\n\t\treturn coll.get(strId);\n\t}\n\n\t/**\n\t * Devuelve una coleccin contenida dentro de este objeto.\n\t * @param ContentsName\t\tIndice de la coleccin dentro del objeto.\n\t * @return\t\t\tDevuelve el contents cuyo nmero de orden se solicita o NULL si el nmero es mayor que la cantidad de contents.\n\t * @throws XoneGenericException\n\t */\n\tpublic async getContents(ContentsName: string | number): Promise<XoneDataCollection> {\n\t\t// Si no ha cargado los contents, los carga ahora\n\t\tif (!this.m_bContentsLoaded) if (!(await this.LoadContents())) return null;\n\t\t// Si el ndice se pasa, na de na...\n\t\tif (typeof ContentsName == \"number\") {\n\t\t\tif (ContentsName >= this.m_lstContents.length) return null;\n\t\t\tContentsName = this.m_lstContents.keys[ContentsName];\n\t\t}\n\n\t\tif (this.m_lstContents == null) {\n\t\t\tthis.m_lstContents = new Hashtable<string, XoneDataCollection>();\n\t\t}\n\t\tif (TextUtils.isEmpty(ContentsName as string)) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Si no est en lista, no hay nada que hacer...\n\t\tif (!this.m_lstContents.containsKey(ContentsName as string)) return null;\n\t\treturn this.m_lstContents.get(ContentsName as string);\n\t\t//return coll;\n\t\t// Enumeration<String> e =this.m_lstContents.keys();\n\t\t// for (let i =0; i <this.m_lstContents.size();i++)\n\t\t// {// Recorrer la lista, contar y devolver\n\t\t// \tString strKey =e.nextElement();\n\t\t//     if (i == Index)\n\t\t//         return this.m_lstContents.get(strKey);\t// La ha encontrado\n\t\t// }// Recorrer la lista, contar y devolver\n\t\t// // Completo\n\t\t// return null;\n\t}\n\n\t/**\n\t * Crea las colecciones contents del objeto y las introduce en la lista de contents del objeto.\n\t * @return\t\tDevuelve TRUE si el contents se carga correctamente.\n\t * @throws XoneGenericException\n\t */\n\tprivate async LoadContents(): Promise<boolean> {\n\t\tlet nodeList: XmlNodeList = null;\n\t\tlet str = \"\";\n\t\tlet newColl: XoneDataCollection, appColl: XoneDataCollection;\n\t\tlet FunctionName = \"CXoneDataObject::LoadContents\";\n\n\t\ttry {\n\t\t\t// Por si las moscas, aunque no debera ocurrir esto...\n\t\t\t// Crear la lista de contents si no existe\n\t\t\tif (this.m_lstContents == null) this.m_lstContents = new Hashtable<string, XoneDataCollection>();\n\t\t\t// En cualquier caso, limpiarla...\n\t\t\tthis.m_lstContents.clear();\n\t\t\tlet coll = this.m_owner;\n\t\t\tnodeList = coll.getNodeList(\"contents\");\n\t\t\t!ObjUtils.IsNothing((coll = coll.getParentCollection())) &&\n\t\t\t\tcoll.getNodeList(\"contents\").forEach((Node) => {\n\t\t\t\t\tif (!nodeList.exist(Node.getName(), Utils.PROP_ATTR_NAME, Node.getAttrValue(Utils.PROP_ATTR_NAME))) {\n\t\t\t\t\t\tnodeList.addNode(Node);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t// do\n\t\t\t// {\n\t\t\t//     if (coll == null)\n\t\t\t//         break;\n\t\t\t//     if ((coll = coll.getParentCollection ())!=null) {// Supuestamente tiene padre\n\t\t\t//         try {\n\t\t\t//             let tmpList = coll.getNodeList(\"contents\");\n\t\t\t//             for (IXmlNode Node : tmpList) {\n\t\t\t//                 if (!nodeList.exist(Node.getName(),Utils.PROP_ATTR_NAME,Node.getAttrValue(Utils.PROP_ATTR_NAME))) {\n\t\t\t//                     nodeList.addNode(Node);\n\t\t\t//                 }\n\t\t\t//             }\n\t\t\t//         } catch (e) {\n\t\t\t//             console.log(e.message);\n\t\t\t//         }\n\n\t\t\t//     }// Supuestamente tiene padre\n\t\t\t// } while (nodeList.count() == 0);\n\n\t\t\t// Si al final no hay tal lista, nos vamos\n\t\t\tif (nodeList == null) return false;\n\t\t\t// Crear los contents de este objeto\n\t\t\tfor (let i = 0; i < nodeList.count(); i++) {\n\t\t\t\t// Recorre cada nodo de la lista\n\t\t\t\tlet contNode = nodeList.get(i);\n\t\t\t\t// Buscar la coleccin y sacarle una copia\n\t\t\t\tif (null == (appColl = await this.getOwnerApp().getCollection((str = XmlUtils.getNodeAttr(contNode, \"src\"))))) {\n\t\t\t\t\t// Error\n\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\tlet sb = this.m_messages.GetMessage(\n\t\t\t\t\t\tXoneMessageKeys.SYS_MSG_OBJ_LOADCONTENTFAIL_01,\n\t\t\t\t\t\t\"{0} failed. Cannot find collection '{1}' to create contents '{2}'\"\n\t\t\t\t\t);\n\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\tsb = sb.replace(\"{1}\", str);\n\t\t\t\t\tsb = sb.replace(\"{2}\", contNode.getAttrValue(\"name\"));\n\t\t\t\t\tthrow new XoneGenericException(-9191, sb);\n\t\t\t\t} // Error\n\n\t\t\t\tif (null == (newColl = appColl.CreateClone())) {\n\t\t\t\t\t// Error\n\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_OBJ_LOADCONTENTFAIL_02, \"{0} failed. Cannot clone collection '{1}'\");\n\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\tsb = sb.replace(\"{1}\", str);\n\t\t\t\t\tthrow new XoneGenericException(-9192, sb);\n\t\t\t\t} // Error\n\t\t\t\t// Cambiar los parmetros de la nueva coleccin de acuerdo\n\t\t\t\t// a los valores que vienen en el nodo\n\t\t\t\tstr = XmlUtils.getNodeAttr(contNode, \"filter\");\n\t\t\t\tnewColl.setLinkFilter(str);\n\t\t\t\t// Ahora debe insertar esta coleccin en la lista\n\t\t\t\tstr = XmlUtils.getNodeAttr(contNode, \"name\");\n\t\t\t\tthis.AddContentsColl(str, newColl);\n\t\t\t\t// Incluir el atributo necesario para comprobar si se busca en BD o no\n\t\t\t\t//newColl.setXlatExist (StringUtils.ParseBoolValue(XmlUtils.getNodeAttr(contNode, \"xlat-exist\"), true));\n\t\t\t\tif (!StringUtils.IsEmptyString((str = XmlUtils.getNodeAttr(contNode, \"sort\")))) newColl.setSort(str);\n\t\t\t} // Recorre cada nodo de la lista\n\t\t\treturn (this.m_bContentsLoaded = true);\n\t\t} catch (ex) {\n\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\tlet sMessage = ex.message;\n\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_GENERALFAIL, \"{0} failed. \");\n\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\tif (!TextUtils.isEmpty(sMessage)) {\n\t\t\t\tsb = sb.concat(sMessage);\n\t\t\t}\n\t\t\tthrow new XoneGenericException(-10131, ex, sb);\n\t\t}\n\t}\n\n\t/**\n\t * Adiciona una coleccin contents a este objeto\n\t * @param ContentsName\t\t\tNombre del contents dentro de este objeto.\n\t * @param Collection\t\t\tColeccin que se usar como contents.\n\t */\n\tprivate AddContentsColl(ContentsName: string, Collection: XoneDataCollection): void {\n\t\t// Almacenar en la coleccin\n\t\tthis.m_lstContents.put(ContentsName, Collection);\n\t\t// Asignarle el objeto propietario (este)\n\t\tCollection.setOwnerObject(this);\n\t}\n\n\tgetId(): any {\n\t\treturn this.m_lObjectId;\n\t}\n\tgetIdFieldName(): any {\n\t\treturn this.m_owner.getIdFieldName();\n\t}\n\tgetObjectName(): any {\n\t\treturn this.m_owner.getObjectName();\n\t}\n\tPrepareSqlString(Sentence: string, bRemoveQuotes: boolean = false): string {\n\t\t// Primeramente intentar sustituir las macros de toda la vida.\n\t\t// Si es cadena vaca o no contiene macros, devolverla tal cual\n\t\tif (StringUtils.IsEmptyString(Sentence)) return Sentence;\n\t\tif (!Sentence.contains(\"##\")) return Sentence;\n\t\t// ADD TAG Como esto es mas comun, hacerlo de primero.\n\t\t// Sustituir los valores de macros FLD_ que son de este mismo objeto\n\t\tif (Sentence.contains(\"##FLD_\")) {\n\t\t\t// Sustituir macros de campo\n\t\t\t//TODO ADD TAG 13/05/2014 Juan Carlos. Aado sobrecarga a PrepareSqlString, hace falta para PropertyTitle. Buscar esta fecha para el resto de cambios.\n\t\t\tSentence = this.ReplaceFieldValueMacros(Sentence, \"##FLD_\", bRemoveQuotes);\n\t\t\tif (!Sentence.contains(\"##\")) return Sentence;\n\t\t} // Sustituir macros de campo\n\t\t// Ahora mandarla a sustituir en la coleccin\n\t\t// F12042601: PrepareSqlString no delega en la aplicacin cuando se llama a la coleccin.\n\t\tlet str = this.m_owner.PrepareSqlString(Sentence, false, false);\n\t\t// Si una vez tratada ya no contiene macros, no hacer nada ms\n\t\tif (!str.contains(\"##\")) return str;\n\t\t// De lo contrario procesar aqu...\n\t\tlet strTmp = str.trim();\n\t\tif (StringUtils.IsEmptyString(strTmp)) return str;\n\t\tlet strOut = str;\n\t\tstrOut = StringUtils.Replace(strOut, '\"', \"##QUOTES##\");\n\t\tstrOut = StringUtils.Replace(strOut, \"##ID##\", this.GetObjectIdString(true));\n\t\tif (!strOut.contains(\"##\")) return strOut;\n\t\t// Lista de clientes (si la tiene)\n\t\tlet str1;\n\t\t// Macro de clientes... muy poco usada, pero mantenemos compatibilidad\n\t\tif (strOut.contains(\"##CLIENTIDCOLL##\")) {\n\t\t\t// Evaluar dicha macro\n\t\t\tstr1 = this.GetClientIdColl();\n\t\t\tif (StringUtils.IsEmptyString(str1)) strOut = StringUtils.Replace(strOut, \"=##CLIENTIDCOLL##\", \" IS NOT NULL \");\n\t\t\telse {\n\t\t\t\t// Reemplazar la macro\n\t\t\t\tif (!str1.contains(\",\")) strTmp = \"=\" + str1;\n\t\t\t\telse strTmp = \" IN (\" + str1 + \")\";\n\t\t\t\tstrOut = StringUtils.Replace(strOut, \"=##CLIENTIDCOLL##\", strTmp);\n\t\t\t} // Reemplazar la macro\n\t\t\tif (!strOut.contains(\"##\")) return strOut;\n\t\t} // Evaluar dicha macro\n\t\t// Cadena de claves mltiples en caso de que el objeto las lleve...\n\t\tif (strOut.contains(\"##MULTIKEY##\")) strOut = StringUtils.Replace(strOut, \"##MULTIKEY##\", this.GetMultipleKeyString(true));\n\t\tif (!strOut.contains(\"##\")) return strOut;\n\n\t\tif (strOut.contains(\"##OWN_\")) {\n\t\t\t// Sustituir las macros de campo del objeto propietario\n\t\t\tlet owner = this.m_owner.getOwnerObject();\n\t\t\tif (owner != null) {\n\t\t\t\t// Sustituir\n\t\t\t\tstrOut = owner.ReplaceFieldValueMacros(strOut, \"##OWN_\", false);\n\t\t\t\tif (!strOut.contains(\"##\")) return strOut;\n\t\t\t} // Sustituir\n\t\t} // Sustituir las macros de campo del objeto propietario\n\t\t// Sustituir las comillas\n\t\tstrOut = strOut.replace('\"', \"'\");\n\t\t// Restablecer las comillas\n\t\tstrOut = StringUtils.Replace(strOut, \"##QUOTES##\", '\"');\n\t\tif (!strOut.contains(\"##\")) return strOut;\n\t\t// Operaciones de sustitucin con condiciones\n\t\tlet k = 0,\n\t\t\tx = 0;\n\t\tfor (; -1 != (x = strOut.indexOf(\"##ISNULL(\")); ) {\n\t\t\t// Existe\n\t\t\tif (-1 == (k = strOut.indexOf(\")##\", x + 8))) break;\n\t\t\t// Ahora buscar el nombre del campo\n\t\t\t// F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n\t\t\tstr = strOut.substring(x + 9, k);\n\t\t\tlet vl = this.get(str);\n\t\t\tif (typeof vl == \"string\") {\n\t\t\t\t// Cadena\n\t\t\t\tstrTmp = vl.toString();\n\t\t\t\tif (StringUtils.IsEmptyString(strTmp)) strTmp = \"(\" + str + \"='' OR {0} IS NULL)\";\n\t\t\t\telse strTmp = str + \"=\" + strTmp;\n\t\t\t} // Cadena\n\t\t\telse {\n\t\t\t\t// Ver si es entero\n\t\t\t\tif (ObjUtils.IsInt(vl)) {\n\t\t\t\t\t// Entero o long\n\t\t\t\t\tlet d = NumberUtils.SafeToDouble(vl);\n\t\t\t\t\tif (Math.abs(d) < 0.000001) strTmp = \"(\" + str + \"=0 OR {0} IS NULL)\";\n\t\t\t\t\telse {\n\t\t\t\t\t\t// No es cero\n\t\t\t\t\t\tvl = this.get(str);\n\t\t\t\t\t\tstrTmp = str + \"=\" + this.DevelopObjectValue(vl);\n\t\t\t\t\t} // No es cero\n\t\t\t\t\tbreak;\n\t\t\t\t} // Entero o long\n\t\t\t\telse strTmp = str + \"=\" + this.DevelopObjectValue(vl);\n\t\t\t} // Ver si es entero\n\t\t\t// Ahora sustituir la cadenilla\n\t\t\t// F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n\t\t\tstr = strOut.substring(0, x) + strTmp + strOut.substring(k, strOut.length - 3);\n\t\t\tstrOut = str;\n\t\t} // Existe\n\t\t// Devolver lo que quede\n\t\treturn strOut;\n\t}\n\n\tGetRawPropertyValue(arg0: string): Object {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tpublic ReplaceFieldValueMacros(Sentence: string, Prefix: string, SuppressQuotes: boolean = false): string {\n\t\tlet k = 0;\n\t\tlet FunctionName = \"CXoneDataObject::ReplaceFieldValueMacros\";\n\n\t\tfor (k = Sentence.indexOf(Prefix); k != -1; k = Sentence.indexOf(Prefix)) {\n\t\t\t// Mientras haya campos por sustituir\n\t\t\t//\n\t\t\t// Puede darse el caso de que se trate de un error de sintaxis en la declaracin\n\t\t\t// del filtro. En ese caso hay que sealar el error.\n\t\t\tlet x;\n\t\t\tif (-1 == (x = Sentence.indexOf(\"##\", k + 1))) {\n\t\t\t\t// Error\n\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_OBJ_REPLFLDVALUEMACROFAIL, \"{0} failed. Syntax error in expression '{1}'\");\n\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\tsb = sb.replace(\"{1}\", Sentence);\n\t\t\t\tthrow new XoneGenericException(-13667, sb);\n\t\t\t} // Error\n\t\t\t// F09042201: Substring no funciona igual en java que en .NET Arreglar Blackberry\n\t\t\t// F13022205: Arreglos varios en ReplaceFildValueMacros.\n\t\t\t// El tamao del prefijo, no un 6 fijo...\n\t\t\tlet strTmp = Sentence.substring(k + Prefix.length, x);\n\t\t\tif (strTmp.length > 1)\n\t\t\t\tif (strTmp.charAt(0) == \"$\" && strTmp.charAt(1) == \"$\") {\n\t\t\t\t\t// Descartar el primer $\n\t\t\t\t\tstrTmp = strTmp.substring(1, strTmp.length - 1);\n\t\t\t\t} // Descartar el primer $\n\t\t\tlet vl = this.get(strTmp);\n\t\t\tstrTmp = this.DevelopObjectValue(vl);\n\t\t\t// F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n\t\t\t// F13022205: Arreglos varios en ReplaceFildValueMacros.\n\t\t\t// Si hay que suprimir las comillas las suprimimos\n\t\t\tif (SuppressQuotes && !StringUtils.IsEmptyString(strTmp)) {\n\t\t\t\t// Pos eso\n\t\t\t\tif (strTmp.startsWith(\"'\") && strTmp.endsWith(\"'\")) {\n\t\t\t\t\t//TODO ADD TAG 13/05/2014 Juan Carlos strTemp.length() - 2? Eso se come una letra de ms...\n\t\t\t\t\t//strTmp = strTmp.substring(1, strTmp.length() - 2);\n\t\t\t\t\tstrTmp = strTmp.substring(1, strTmp.length - 1);\n\t\t\t\t}\n\t\t\t} // Pos eso\n\t\t\tlet strRpl = Sentence.substring(k, x + 2);\n\t\t\tSentence = StringUtils.Replace(Sentence, strRpl, strTmp);\n\t\t} // Mientras haya campos por sustituir\n\t\t// Completo\n\t\treturn Sentence;\n\t}\n\n\t/**\n\t * Devuelve el valor de un atributo de un campo de datos de la coleccin a la cual pertenece este objeto.\n\t *\n\t * M11060901: Permitir que FieldPropertyValue evale o no para los frameworks.\n\t * Un parmetro ms para indicar si se evala o no.\n\t *\n\t * @param FieldName\t\t\tNombre de la propiedad (campo) en el cual se quiere buscar un valor de atributo.\n\t * @param AttrName\t\t\tNombre del atributo cuyo valor se quiere obtener para el campo dado.\n\t * @return\t\t\t\t\tDevuelve el valor del atributo o NULL si el atributo no est definido.\n\t * @throws Exception\n\t */\n\tpublic FieldPropertyValue(FieldName: string, AttrName: string, bEvaluate: boolean = true): string {\n\t\t// Si no tiene propietario, no hacer nada\n\t\tif (this.m_owner == null) return null;\n\t\t// K11051801: Desarrollar macros en el FieldPropertyValue de los objetos.\n\t\t// M12102401: Gestin de los atributos a nivel de objetos cacheando los valores.\n\t\t// Primero buscar el valor cacheado si lo hubiere...\n\t\tlet sVal = \"\";\n\t\tlet sKey = FieldName + \":\" + AttrName;\n\t\tif (this.m_lstOverridenFieldPropertyValueAttributes.containsKey(sKey)) {\n\t\t\tsVal = this.m_lstOverridenFieldPropertyValueAttributes.get(sKey);\n\t\t} else if (this.m_lstCachedAttributes.containsKey(sKey)) {\n\t\t\tsVal = this.m_lstCachedAttributes.get(sKey);\n\t\t} else {\n\t\t\tsVal = this.m_owner.FieldPropertyValue(FieldName, AttrName);\n\t\t}\n\t\t// Ahora podemos seguir evaluando y tal y tal.\n\t\tif (bEvaluate) {\n\t\t\tif (!StringUtils.IsEmptyString(sVal))\n\t\t\t\tif (sVal.contains(\"##\")) {\n\t\t\t\t\t// Es una macro o la contiene\n\t\t\t\t\t// M11060902: Mejoras en el sistema de evaluacin de macros en el framework.\n\t\t\t\t\tif (sVal.equals(Utils.EMPTY_STRING)) return null;\n\t\t\t\t\tsVal = this.PrepareSqlString(sVal, false);\n\t\t\t\t\t// M11060902: Mejoras en el sistema de evaluacin de macros en el framework.\n\t\t\t\t\tif (sVal.equals(\"NULL\")) return null;\n\t\t\t\t\tif (!StringUtils.IsEmptyString(sVal)) {\n\t\t\t\t\t\t// Si viene entrecomillado limpiar un poco\n\t\t\t\t\t\t// F11111104: Los filtros de lnea pueden devolver un valor incorrecto.\n\t\t\t\t\t\t// Esto hay que retocarlo un poquito...\n\t\t\t\t\t\t// F13061905: Problemas de separadores y delimitadores en GetValueFromString.\n\t\t\t\t\t\t// Tiene que empezar y terminar con apstrofes...\n\t\t\t\t\t\t// TODO ADD TAG 280514 Luis es un and no un or en el inicio y fin de '\n\t\t\t\t\t\tif (sVal.startsWith(\"'\") && sVal.endsWith(\"'\") && sVal.length >= 2) {\n\t\t\t\t\t\t\t// Quitar las comillas\n\t\t\t\t\t\t\t// F11111104: Los filtros de lnea pueden devolver un valor incorrecto.\n\t\t\t\t\t\t\t// Solamente si no es un filtro...\n\t\t\t\t\t\t\t// F13061906: Al evaluar FieldPropertyValue hay que excluir filter y linkfilter.\n\t\t\t\t\t\t\t// linkfilter tambin es un filtro, as que tambin lo excluimos...\n\t\t\t\t\t\t\tif (!AttrName.equals(\"filter\") && !AttrName.equals(\"linkfilter\")) sVal = sVal.substring(1, sVal.length - 1);\n\t\t\t\t\t\t} // Quitar las comillas\n\t\t\t\t\t} // Si viene entrecomillado limpiar un poco\n\t\t\t\t} // Es una macro o la contiene\n\t\t}\n\t\treturn sVal;\n\t}\n\n\tpublic GetObjectIdString(Develop: boolean = false): string {\n\t\tlet str = \"\";\n\n\t\tif (!StringUtils.IsEmptyString(this.m_strObjectId) && !Develop) return this.m_strObjectId;\n\t\t// De lo contrario, la desarrollamos aqu\n\t\tif (this.m_lObjectId > 0) {\n\t\t\t// Clave nica y numrica\n\t\t\t// O11100301: Si ya el IDString de un objeto tiene valor no hay por qu volver a generarlo.\n\t\t\tif (StringUtils.IsEmptyString(this.m_strObjectId)) this.m_strObjectId = String.format(\"%d\", this.m_lObjectId);\n\t\t\treturn this.m_strObjectId;\n\t\t} // Clave nica y numrica\n\t\telse {\n\t\t\t// Mltiple o cadena\n\t\t\tif (!this.m_owner.getStringKey()) {\n\t\t\t\t// Numrica\n\t\t\t\tif (Develop) return \"NULL\";\n\t\t\t\t// De lo contrario, cadena vaca\n\t\t\t\treturn \"\";\n\t\t\t} // Numrica\n\t\t\t// Ver si es mltiple\n\t\t\tif (this.m_owner.getMultipleKey()) {\n\t\t\t\t// Mltiple\n\t\t\t\tthis.m_strObjectId = this.GetMultipleKeyString(false);\n\t\t\t\treturn this.GetMultipleKeyString(Develop);\n\t\t\t} // Mltiple\n\t\t\telse {\n\t\t\t\t// Cadena\n\t\t\t\tif (Develop) str = this.DevelopObjectValue(this.get(this.getIdFieldName()));\n\t\t\t\telse str = this.m_strObjectId = this.get(this.getIdFieldName()).toString();\n\t\t\t\treturn str;\n\t\t\t} // Cadena\n\t\t} // Mltiple o cadena\n\t}\n\n\tGetRawStringField(fieldName: string): string {\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * Desarrolla el valor de un objeto y lo devuelve como cadena lista para insertar en un SQL o un filtro.\n\t *\n\t * K12102201: Modificacin de DevelopObjectValue para pasar ForceNulls como parmetro.\n\t * Un parmetro para indicar el valor de ForceNulls, por si alguien lo necesita.\n\t *\n\t * @param Value\t\t\tValor que se quiere desarrollar.\n\t * @return\t\t\t\tDevuelve el valor en forma de cadena con sus comillas, formatos de fecha y etc. etc.\n\t */\n\tpublic DevelopObjectValue(Value: Object, ForceNulls: boolean = true): string {\n\t\treturn this.m_owner.DevelopObjectValue(Value, ForceNulls);\n\t}\n\n\t/**\n\t * Esta funcin se llama cuando se termina de cargar el objeto como consecuencia de una bsqueda.\n\t */\n\tpublic OnNormalSearh(): void {\n\t\t// En principio esta funcin de la clase base no hace nada... redefinirla en clases hijas.\n\t}\n\n\tpublic getOwnerApp(): XoneApplication {\n\t\treturn this.m_owner.getOwnerApp();\n\t}\n\n\t/**\n\t * @return\t\tDevuelve TRUE si se trata del elemento actual de un recorrido SB/EB para usar los datos sacados directamente del recordset.\n\t */\n\tpublic getIsCurrentItem(): boolean {\n\t\treturn this.m_bIsCurrentItem;\n\t}\n\n\t/**\n\t * Asigna valor a la bandera que indica que este objeto es el CurrentItem de una coleccin con carga diferida.\n\t * @param value\t\tTRUE para indicar que es el objeto actual del recorrido. FALSE para un comportamiento normal.\n\t */\n\tpublic async setIsCurrentItem(value: boolean): Promise<void> {\n\t\tlet bOldVal = this.m_bIsCurrentItem;\n\t\tlet vl = null;\n\n\t\tif ((this.m_bIsCurrentItem = value)) {\n\t\t\t// Es el actual\n\t\t\tvl = this.GetRawPropertyValue(this.getIdFieldName());\n\t\t\t// F11092601: Protegerse a la hora de armar las cadenas de IDs.\n\t\t\tthis.m_strObjectId = StringUtils.SafeToString(vl);\n\t\t\tif (this.m_owner.getStringKey()) {\n\t\t\t\t// Cadenilla\n\t\t\t\t////m_strObjectId = vl.toString();\n\t\t\t\tthis.m_lObjectId = -1;\n\t\t\t} // Cadenilla\n\t\t\telse {\n\t\t\t\t// Numrico\n\t\t\t\tthis.m_lObjectId = NumberUtils.SafeToLong(vl);\n\t\t\t\t// F11092601: Protegerse a la hora de armar las cadenas de IDs.\n\t\t\t\t////m_strObjectId = StringUtils.SafeToString(vl);\n\t\t\t} // Numrico\n\t\t\t// Limpiar los contents por si alguien usa LoadAll\n\t\t\tthis.ClearContents();\n\t\t\t// Enumeration<String> e =this.m_lstContents.keys();\n\t\t\t// while (e.hasMoreElements())\n\t\t\t// {// Cada coleccin\n\t\t\t// \tXoneDataCollection cnt =this.m_lstContents.get(e.nextElement());\n\t\t\t//     cnt.Clear();\n\t\t\t//     cnt.setFilter (null);\n\t\t\t// }// Cada coleccin\n\t\t\t// F10072611: Al asignar un objeto como CurrentItem deben limpiarse sus datos.\n\t\t\t// Limpiar posibles valores y dems coisas\n\t\t\tthis.m_lstNormalProperties.clear();\n\t\t\tthis.m_lstOldValues.clear();\n\t\t\tthis.ClearAllVariables();\n\t\t\tthis.setDirty(false); // Si somos currentitem ahora, entonces estamos limpios :-P\n\t\t\t// F12042506: Cuando se asigna valor TRUE a IsCurrentItem hay que ejecutar el OnLoad.\n\t\t\ttry {\n\t\t\t\tawait this.OnLoad();\n\t\t\t} catch (e1) {\n\t\t\t\tconsole.error(e1);\n\t\t\t}\n\t\t} // Es el actual\n\t\telse {\n\t\t\t// Ver si se ha reseteado\n\t\t\tif (bOldVal) {\n\t\t\t\t// Era un Deferred\n\t\t\t\tthis.m_lObjectId = 0;\n\t\t\t\tthis.m_strObjectId = null;\n\t\t\t} // Era un Deferred\n\t\t} // Ver si se ha reseteado\n\t}\n\n\t/**\n\t * Limpia todas las variables de este objeto (limpia la lista)\n\t */\n\tpublic ClearAllVariables(): void {\n\t\tthis.m_lstVariables.clear();\n\t}\n\n\t/**\n\t * @param Develop\tTRUE si se quiere que las parejas campo=valor estn separadas por AND en vez de por comas, para facilitar su uso en base de datos.\n\t * @return\t\t\tDevuelve una cadena con las parejas campo=valor de la clave mltiple del objeto usado para identificarlo de manera nica.\n\t * @throws Exception\n\t */\n\tprivate GetMultipleKeyString(Develop: boolean = false): string {\n\t\tlet strKey = \"\";\n\t\tif (this.m_owner.getMultipleKey()) {\n\t\t\t// Mltiples\n\t\t\t// Leer los valores de los campos claves y obtener una cadena que represente dicha clave\n\t\t\tfor (let i = 0; i < this.m_owner.getKeyFields().length; i++) {\n\t\t\t\t// Obtener cada valor de campo\n\t\t\t\tlet s = this.m_owner.getKeyFields()[i];\n\t\t\t\tlet value = this[s];\n\t\t\t\tif (value != null) {\n\t\t\t\t\t// Tiene valor\n\t\t\t\t\tlet strTmp = s + \"=\" + this.DevelopObjectValue(value);\n\t\t\t\t\tif (strKey.length > 0) strKey += Develop ? \" AND \" : \",\";\n\t\t\t\t\tstrKey += strTmp;\n\t\t\t\t} // Tiene valor\n\t\t\t} // Obtener cada valor de campo\n\t\t} // Mltiples\n\t\telse strKey = this.getIdFieldName() + \"=\" + this.GetObjectIdString(Develop);\n\t\t// Completo\n\t\treturn strKey;\n\t}\n\n\t/**\n\t * @return\t\tDevuelve la lista de IDs que forman la macro ENTIDCOLL.\n\t */\n\tpublic GetClientIdColl(): string {\n\t\t// En la clase base, lo que se devuelve es el ID del objeto\n\t\treturn String.format(\"%d\", this.m_lObjectId);\n\t}\n\n\t/**\n\t * Asigna un valor numrico a un campo del objeto\n\t * @param FieldName\t\tNombre del campo cuyo valor se quiere asignar.\n\t * @param value\t\t\tValor numrico que se quiere asignar al campo.\n\t * @throws Exception\n\t */\n\tpublic put(FieldName: string, value: any): void {\n\t\tthis.PutItem(FieldName, value);\n\t}\n\n\t/**\n\t * Asigna valor a una propiedad del objeto.\n\t * @param FieldName\t\tNombre del campo al que se quiere asignar valor.\n\t * @param Value\t\t\tValor que se quiere asignar al campo.\n\t * @throws XoneGenericException\n\t **/\n\tprotected PutItem(FieldName: string, Value: any): void {\n\t\tlet str = \"\",\n\t\t\tstrType = \"\",\n\t\t\tstrKey = \"\",\n\t\t\tstr1 = \"\",\n\t\t\tstrProtect = \"\";\n\t\tlet bMask = true,\n\t\t\tbAllow,\n\t\t\tbUpdate = true,\n\t\t\tbForce = false,\n\t\t\tbUpdated = false;\n\t\tlet oldVal: any;\n\t\tlet FunctionName = \"CXoneDataObject::PutItem\";\n\n\t\t// Asignar valor a una propiedad\n\t\tthis.m_bChangesMade = false;\n\t\ttry {\n\t\t\t// A12122701: Sistema para gestionar la estructura lgica de vistas en la maquinaria.\n\t\t\t// Cada vez que se entre tenemos un nivel mais...\n\t\t\tthis.m_nSetValDepth++;\n\t\t\t// Macros y detalles no plis...\n\t\t\tstr = FieldName;\n\t\t\tif (StringUtils.IsEmptyString(str)) return;\n\t\t\tif (str.startsWith(\"#\") || str.startsWith(\"@\")) return;\n\t\t\t// Igualmente bitmapped\n\t\t\tif (str.startsWith(\"%\")) {\n\t\t\t\t// Bitmapped\n\t\t\t\tthis.PutBitmappedProperty(FieldName, Value);\n\t\t\t\treturn;\n\t\t\t} // Bitmapped\n\t\t\t// Puede que sea un bitmapped\n\t\t\tstrType = this.FieldPropertyValue(str, \"bit\");\n\t\t\tif (!StringUtils.IsEmptyString(strType)) {\n\t\t\t\t// Bitmapped\n\t\t\t\tthis.PutBitmappedProperty(FieldName, Value);\n\t\t\t\treturn;\n\t\t\t} // Bitmapped\n\t\t\t// Puede que sea una propiedad calculada sin #\n\t\t\tstrType = this.FieldPropertyValue(str, \"method\");\n\t\t\tif (!StringUtils.IsEmptyString(strType)) return;\n\t\t\tstrType = this.FieldPropertyValue(str, \"volatile\");\n\t\t\tif (StringUtils.ParseBoolValue(strType, false)) bForce = true;\n\t\t\tif (str.startsWith(\"MAP_\")) bMask = false;\n\t\t\t// Propiedad normal...\n\t\t\tif (this.m_lstNormalProperties.containsKey(str)) oldVal = this.m_lstNormalProperties.get(str);\n\t\t\telse {\n\t\t\t\t// No existe la propiedad, as que ponerla\n\t\t\t\toldVal = null;\n\t\t\t\t// Buscar los atributos de esta propiedad que deben marcarse\n\t\t\t\tif (!StringUtils.IsEmptyString((strProtect = this.FieldPropertyValue(str, \"xlat\")))) this.m_lstXlatProperties.push(str);\n\t\t\t} // No existe la propiedad, as que ponerla\n\t\t\t// Buscar la propiedad de antiguo valor y si no est crearla\n\t\t\tstrKey = str;\n\t\t\t// F10072612: Al asignarse un valor a una propiedad, hay que quitar el valor viejo de los OldValues.\n\t\t\t// Buscar la propiedad de antiguo valor y si no est crearla\n\t\t\tthis.m_lstOldValues.delete(strKey);\n\t\t\tif (oldVal != null) this.m_lstOldValues.put(strKey, oldVal);\n\t\t\tif (typeof Value === \"string\") {\n\t\t\t\t// Cadena\n\t\t\t\tstr = Value.toString();\n\t\t\t\t// let bVal = StringUtils.ParseBoolValue(this.FieldPropertyValue(FieldName, \"validate\"), false);\n\t\t\t\t// // Cuando se est clonando no se valida\n\t\t\t\t// bVal &= (!this.m_bIsCloning);\n\t\t\t\t// if (bVal)\n\t\t\t\t// {// Validar\n\t\t\t\t//     let testVal = str;\n\t\t\t\t//     bAllow = false;\n\t\t\t\t//     let vd =new XoneValidateData (testVal);\n\t\t\t\t//     if (!ValidateFieldValue(FieldName, vd))\n\t\t\t\t//     {// Fallar, pero si hay que actualizar, hacerlo\n\t\t\t\t//         if (!vd.getAllow ())\n\t\t\t\t//             return;\n\t\t\t\t//         else\n\t\t\t\t//         {// No actualiza, pero no falla\n\t\t\t\t//             bUpdate = false;\n\t\t\t\t//         }// No actualiza, pero no falla\n\t\t\t\t//     }// Fallar, pero si hay que actualizar, hacerlo\n\t\t\t\t//     str = vd.getValue().toString();\n\t\t\t\t// }// Validar\n\t\t\t\tstrType = this.FieldPropertyValue(FieldName, \"type\");\n\t\t\t\t// Si no tiene tipo asumimos el ms flexible :-P\n\t\t\t\tif (StringUtils.IsEmptyString(strType)) strType = \"T\";\n\t\t\t\tif (strType.equals(\"X\")) {\n\t\t\t\t\t// Password\n\t\t\t\t\t// F11010301:\tNo codificar a Base64 los passwords vacos.\n\t\t\t\t\t// Si tenemos valor, lo convertimos\n\t\t\t\t\tif (!StringUtils.IsEmptyString(str)) {\n\t\t\t\t\t\t// Solo si tiene valor\n\t\t\t\t\t\tlet sHashType = this.FieldPropertyValue(FieldName, \"hash-type\");\n\t\t\t\t\t\tlet sEncode = this.FieldPropertyValue(FieldName, \"encode\");\n\t\t\t\t\t\t// byte[] buf = new byte[str.length()];\n\t\t\t\t\t\t// StringUtils.CopyAsBytes(str, buf, 0);\n\t\t\t\t\t\t// // A11042901: Modificaciones para adicionar nuevos algoritmos de comprobacin de claves.\n\t\t\t\t\t\t// // Si tenemos hash, tendremos que usarlo\n\n\t\t\t\t\t\t// if (!StringUtils.IsEmptyString(sHashType))\n\t\t\t\t\t\t// \tstr = CalculatePasswordHash(str, MessageDigestAlgorithm.getValue(sHashType), sEncode);\n\t\t\t\t\t\t// else\n\t\t\t\t\t\t//     str = Base64.encodeBytes(buf);\n\t\t\t\t\t\t// str = HashUtils.createHash(sHashType, sEncode, str);\n\t\t\t\t\t\t// F10091609:\tLas modificaciones en valores de cadena no actualizan el valor seteado.\n\t\t\t\t\t\tValue = str; // TODO: Alejandro 19/05/2021, esto lo comento porque explota, creo que con un btoa, seria codificacion en base64\n\t\t\t\t\t} // Solo si tiene valor\n\t\t\t\t} // Password\n\t\t\t\telse if (strType.equals(\"TD\")) {\n\t\t\t\t\t// Fecha cadenilla\n\t\t\t\t\t//  Las fechas al 'A.S.Roiz Style' se preprocesan aqu\n\t\t\t\t\t//  Tambin se arreglan otros casos de datos de tipo cadena.\n\t\t\t\t\t//  Aqu se ha optimizado un poco el proceso de comparacin\n\t\t\t\t\t//  porque se hacan todas las comparaciones aunque ya se hubiera\n\t\t\t\t\t//  eocntrado un caso. No es que mejore mucho, pero los tiempos\n\t\t\t\t\t//  sumados de la cantidad de datos de tipo cadena que hay\n\t\t\t\t\t//  puede darle alguna mejorilla a esto...\n\t\t\t\t\tstr = this.AdjustDate(str); // Fecha\n\t\t\t\t\t// F10091609:\tLas modificaciones en valores de cadena no actualizan el valor seteado.\n\t\t\t\t\tValue = str;\n\t\t\t\t} // Fecha cadenilla\n\t\t\t\telse if (strType.equals(\"TM\")) {\n\t\t\t\t\t// Mes/Ao\n\t\t\t\t\tstr = this.AdjustMonthYear(str);\n\t\t\t\t\t// F10091609:\tLas modificaciones en valores de cadena no actualizan el valor seteado.\n\t\t\t\t\tValue = str;\n\t\t\t\t} // Mes/Ao\n\t\t\t\telse if (strType.equals(\"TB\")) {\n\t\t\t\t\t// Contabilidad\n\t\t\t\t\tstr = this.FormatAcc(str); // Contabilidad\n\t\t\t\t\t// F10091609:\tLas modificaciones en valores de cadena no actualizan el valor seteado.\n\t\t\t\t\tValue = str;\n\t\t\t\t} // Contabilidad\n\t\t\t\telse if (strType.equals(\"TN\")) {\n\t\t\t\t\t// Por si las moscas\n\t\t\t\t\tstr = str.toUpperCase(); // Por si las moscas\n\t\t\t\t\t// F10091609:\tLas modificaciones en valores de cadena no actualizan el valor seteado.\n\t\t\t\t\tValue = str;\n\t\t\t\t} // Por si las moscas\n\t\t\t\telse if (strType.equals(\"TC\")) {\n\t\t\t\t\t// Cuenta bancaria\n\t\t\t\t\tstr = this.FormatCCC(str);\n\t\t\t\t\tstr = this.AdjustAccNumber(str); // Cuenta bancaria\n\t\t\t\t\t// F10091609:\tLas modificaciones en valores de cadena no actualizan el valor seteado.\n\t\t\t\t\tValue = str;\n\t\t\t\t} // Cuenta bancaria\n\t\t\t\telse if (strType.equals(\"D\")) {\n\t\t\t\t\t// Fecha\n\t\t\t\t\t// F11011203:\tAl asignarse cadena vaca a un campo de fecha, ponerle fecha nula.\n\t\t\t\t\tif (StringUtils.IsEmptyString(str)) Value = null;\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Lo de siempre\n\t\t\t\t\t\tValue = StringUtils.ParseDateString(this.getOwnerApp().currentContext(), str);\n\t\t\t\t\t} // Lo de siempre\n\t\t\t\t} // Fecha\n\t\t\t\telse {\n\t\t\t\t\t// Todo lo dems\n\t\t\t\t\tif (strType.startsWith(\"N\")) {\n\t\t\t\t\t\t// Convertir a lo que sea\n\t\t\t\t\t\tif (strType.length == 1) {\n\t\t\t\t\t\t\t// Entero\n\t\t\t\t\t\t\t//let l = NumberUtils.SafeToInt(str);\n\t\t\t\t\t\t\tValue = NumberUtils.SafeToInt(str);\n\t\t\t\t\t\t} // Entero\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// Decimal\n\t\t\t\t\t\t\t//let d = NumberUtils.SafeToDouble(str);\n\t\t\t\t\t\t\tValue = NumberUtils.SafeToDouble(str);\n\t\t\t\t\t\t} // Decimal\n\t\t\t\t\t} // Convertir a lo que sea\n\t\t\t\t} // Todo lo dems\n\t\t\t\t// Si sigue siendo una cadena entonces hacemos esto, de lo contrario nio nio nio\n\t\t\t\tif (typeof Value === \"string\") {\n\t\t\t\t\t// Es una cadena\n\t\t\t\t\t// Aplicar la proteccin si la tiene...\n\t\t\t\t\tstrProtect = this.FieldPropertyValue(FieldName, \"protect\");\n\t\t\t\t\tif (StringUtils.ParseBoolValue(strProtect, false)) {\n\t\t\t\t\t\t// Encriptar la cadena\n\t\t\t\t\t\tstr1 = this.FieldPropertyValue(FieldName, \"size\");\n\t\t\t\t\t\tif (!StringUtils.IsEmptyString(str1))\n\t\t\t\t\t\t\t// Tiene tamao declarado... imprescindible\n\t\t\t\t\t\t\tstr = this.ProtectString(str, NumberUtils.SafeToInt(str1));\n\t\t\t\t\t} // Encriptar la cadena\n\t\t\t\t\t// Si se han hecho cambios habr que indicarlos\n\t\t\t\t\tif (bUpdate) {\n\t\t\t\t\t\t// Solo actualiza si no hay error\n\t\t\t\t\t\t//  Si este valor est en los ndices, matar el valor actual, porque despus\n\t\t\t\t\t\t//  la bsqueda se puede poner muy mala\n\t\t\t\t\t\tthis.m_lstOldValues.put(FieldName, oldVal);\n\t\t\t\t\t\t// Solo puede marcar el campo como modificado si no est\n\t\t\t\t\t\t// cargando de disco, o si est clonando el objeto...\n\t\t\t\t\t\t// F11011204:\tAgregar el campo a la lista de modificados solo si ha cambiado.\n\t\t\t\t\t\t// En el dirtyproperties solo si ha cambiado\n\t\t\t\t\t\tif (!FieldName.startsWith(\"MAP_\") && (!this.m_bIsLoading || this.m_bIsCloning)) {\n\t\t\t\t\t\t\t// Indicar que est modificada\n\t\t\t\t\t\t\t// if (!this.m_lstDirtyProperties.contains(FieldName))\n\t\t\t\t\t\t\t//    this.m_lstDirtyProperties.addElement(FieldName);\n\t\t\t\t\t\t} // Indicar que est modificada\n\t\t\t\t\t\telse bMask = false;\n\t\t\t\t\t\t// F12112109: Hay una comparacin redundante cuando se asigna un valor de cadena.\n\t\t\t\t\t\t// Si estamos en instanceof String Value no puede ser NULL nunca.\n\t\t\t\t\t\t//////if (Value ==null)\n\t\t\t\t\t\t//////\tm_lstNormalProperties.remove(FieldName);\n\t\t\t\t\t\t//////else\n\t\t\t\t\t\tthis.setNormalValue(FieldName, Value);\n\t\t\t\t\t\t//this[FieldName] = Value;\n\t\t\t\t\t\t//this.m_lstNormalProperties.put(FieldName, Value);\n\t\t\t\t\t\tbUpdated = true;\n\t\t\t\t\t} // Solo actualiza si no hay error\n\t\t\t\t} // Es una cadena\n\t\t\t} // Cadena\n\t\t\t// Si no es una cadena o ha cambiado de jeta\n\t\t\tif (!(typeof Value === \"string\") && !bUpdated) {\n\t\t\t\t/*\n\t\t\t\t * TODO 17/03/2017 Juan Carlos\n\t\t\t\t * Hay campos ID que declara el propio desarrollador de mappings y no tienen nada\n\t\t\t\t * que ver. Esto lo cambio y lo pongo igual que iOS (startsWith pasa a ser un\n\t\t\t\t * equals).\n\t\t\t\t */\n\t\t\t\t// Comprobar si es un campo ID...\n\t\t\t\tif (FieldName.equals(\"ID\") && ObjUtils.IsNumeric(Value)) {\n\t\t\t\t\t// Es un ID algo\n\t\t\t\t\tlet l = NumberUtils.SafeToInt(Value);\n\t\t\t\t\tif (l == 0) Value = null; // Nulo\n\t\t\t\t} // Es un ID algo\n\t\t\t\t// Comprobar si es vlido\n\n\t\t\t\tstrProtect = this.FieldPropertyValue(FieldName, \"validate\");\n\t\t\t\tif (StringUtils.ParseBoolValue(strProtect, false) && !this.m_bIsCloning) {\n\t\t\t\t\t// Comprobar\n\t\t\t\t\tbAllow = false;\n\t\t\t\t\tlet testVal = Value;\n\t\t\t\t\t// Estructura para validar\n\t\t\t\t\t// XoneValidateData vd =new XoneValidateData (testVal);\n\t\t\t\t\t// if (!ValidateFieldValue(FieldName, vd))\n\t\t\t\t\t// {// Falla, pero puede que se permita cambiar valor\n\t\t\t\t\t//     if (!bAllow)\n\t\t\t\t\t//         return;\n\t\t\t\t\t//     else\n\t\t\t\t\t//     {// No actualiza y no falla\n\t\t\t\t\t//         bUpdate = false;\n\t\t\t\t\t//     }// No actualiza y no falla\n\t\t\t\t\t// }// Falla, pero puede que se permita cambiar valor\n\t\t\t\t\t// Value = vd.getValue();\n\t\t\t\t} // Comprobar\n\t\t\t\tif (bUpdate || bForce) {\n\t\t\t\t\t// Solo si no hubo error\n\t\t\t\t\t// Antes de almacenar el valor, guardar el anterior\n\t\t\t\t\tif (oldVal != null) this.m_lstOldValues.put(FieldName, oldVal);\n\t\t\t\t\telse this.m_lstOldValues.delete(FieldName);\n\t\t\t\t\t// Ahora asignar el nuevo valor\n\t\t\t\t\tif (Value == null) {\n\t\t\t\t\t\tthis.setNormalValue(FieldName, null);\n\t\t\t\t\t\t//this[FieldName] = null;\n\t\t\t\t\t\tthis.m_lstNormalProperties.delete(FieldName);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.setNormalValue(FieldName, Value);\n\t\t\t\t\t\t//this[FieldName] = Value;\n\t\t\t\t\t\t//this.m_lstNormalProperties.put(FieldName, Value);\n\t\t\t\t\t}\n\t\t\t\t\t// Si es una propiedad modificable...\n\t\t\t\t\t// F11011204:\tAgregar el campo a la lista de modificados solo si ha cambiado.\n\t\t\t\t\t// En el dirtyproperties solo si ha cambiado\n\t\t\t\t\t////if (bMask)\n\t\t\t\t\t////    m_lstDirtyProperties.addElement(FieldName);\n\t\t\t\t} // Solo si no hubo error\n\t\t\t} // Comprobar si es un campo ID...\n\t\t\tlet bCheck = false;\n\t\t\t// F12112105: No se estn haciendo los chequeos correctos al clonar objetos.\n\t\t\t// Verificar ms cosas aqu.\n\t\t\tbCheck = (!ObjUtils.EqualObj(oldVal, Value) || bForce) && (!this.m_bIsLoading || this.m_bIsCloning) && bUpdate;\n\t\t\tif (bCheck) {\n\t\t\t\t// Actualiza la banderilla\n\t\t\t\t// F11011204:\tAgregar el campo a la lista de modificados solo si ha cambiado.\n\t\t\t\t// En el dirtyproperties solo si ha cambiado\n\t\t\t\tif (bMask) {\n\t\t\t\t\t// Indicar el dirty\n\t\t\t\t\tthis.setDirty(true);\n\t\t\t\t\t// Si no est en lista, la agregamos\n\t\t\t\t\tif (!this.m_lstDirtyProperties.contains(FieldName)) this.m_lstDirtyProperties.push(FieldName);\n\t\t\t\t} // Indicar el dirty\n\t\t\t\tthis.m_bChangesMade = true; // Ha habido cambios\n\t\t\t\t// Marcar el timestamp de actualizacin, solo si se usa\n\t\t\t\tif (this.m_bUseTimestamp) {\n\t\t\t\t\t// Timestamp de la operacin\n\t\t\t\t\tlet d = new Date();\n\t\t\t\t\tif (this.m_dtTimeStamp == null) this.m_dtTimeStamp = Calendar.getInstance();\n\t\t\t\t\telse this.m_dtTimeStamp.setTime(d);\n\t\t\t\t\td = null;\n\t\t\t\t} // Timestamp de la operacin\n\t\t\t\t// // A12122701: Sistema para gestionar la estructura lgica de vistas en la maquinaria.\n\t\t\t\t// // Si el campo es trigger, ensuciar las frmulas :-P\n\t\t\t\t// // K13081201: Cambios en el tratamiento de frmulas para mejorar la concurrencia.\n\t\t\t\t// // Podemos tener problemas con esto...\n\t\t\t\t// synchronized (this.m_formulaLocker)\n\t\t\t\t// {\n\t\t\t\t//     if (this.m_formulas != null)\n\t\t\t\t//     {// Habemus\n\t\t\t\t//     \tEnumeration<String> enm =this.m_formulas.keys();\n\t\t\t\t//         while (enm.hasMoreElements())\n\t\t\t\t//         {\n\t\t\t\t//         \tString key =enm.nextElement();\n\t\t\t\t//         \tXoneEvalData val =this.m_formulas.get(key);\n\t\t\t\t//             if (val.getFormula().IsTrigger(FieldName))\n\t\t\t\t//                 val.Invalidate();\n\t\t\t\t//         }\n\t\t\t\t//     }// Habemus\n\t\t\t\t// }\n\t\t\t} // Actualiza la banderilla\n\t\t\t//\n\t\t\t// Si el objeto ha quedado sucio, marcar su propietario\n\t\t\t// Comprobar si hay que propagar el estado de modificacin\n\t\t\tif (this.m_bDirty && this.m_bPropagateDirty) {\n\t\t\t\t// Verificar si tiene objeto propietario\n\t\t\t\tif (null != this.m_owner.getOwnerObject())\n\t\t\t\t\t// Tiene propietario\n\t\t\t\t\tthis.m_owner.getOwnerObject().setDirty(this.m_bDirty);\n\t\t\t} // Verificar si tiene objeto propietario\n\t\t\t// Ahora la idea es buscar si esta propiedad mapea\n\t\t\t// hacia alguna otra y modificarla tambin\n\t\t\tif (this.m_bChangesMade) {\n\t\t\t\t// Como se han hecho cambios hay que mapear\n\t\t\t\tif (FieldName.equals(this.getIdFieldName())) {\n\t\t\t\t\t// Es el ID\n\t\t\t\t\tif (!this.m_owner.getStringKey()) {\n\t\t\t\t\t\t// Obtener el valor y ponerlo en el campo\n\t\t\t\t\t\tthis.m_lObjectId = NumberUtils.SafeToInt(Value);\n\t\t\t\t\t} // Obtener el valor y ponerlo en el campo\n\t\t\t\t} // Es el ID\n\t\t\t\tif (!StringUtils.IsEmptyString((strKey = this.FieldPropertyValue(FieldName, \"updates\")))) {\n\t\t\t\t\t// Tiene campo para cambiar\n\t\t\t\t\tlet o = this.PreprocessValue(FieldName, strKey, Value);\n\t\t\t\t\tthis.SetPropertyValue(strKey, o);\n\t\t\t\t} // Tiene campo para cambiar\n\t\t\t\t// Ahora debe verificar si hay que recargar algn mapeo\n\t\t\t\t// por si las moscas\n\t\t\t\tif (!this.m_bIsLoading && this.m_owner != null) {\n\t\t\t\t\t// No est cargando\n\t\t\t\t\tthis.RestoreMappedFields(FieldName)\n\t\t\t\t\t\t.then((value) => {\n\t\t\t\t\t\t\tif (!value) {\n\t\t\t\t\t\t\t\t// Error\n\t\t\t\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_OBJ_PUTITEMFAIL, \"{0} failed. Cannot update mapped fields.\");\n\t\t\t\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\t\t\t\tthrow new XoneGenericException(-23231, sb);\n\t\t\t\t\t\t\t} // Error\n\t\t\t\t\t\t\tconst onChange = async () => {\n\t\t\t\t\t\t\t\tawait this.OnChange(FieldName);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tonChange();\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((reason) => {\n\t\t\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_OBJ_PUTITEMFAIL, \"{0} failed. Cannot update mapped fields. Reason: {1}\");\n\t\t\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\t\t\tsb = sb.replace(\"{1}\", reason);\n\t\t\t\t\t\t\tthrow new XoneGenericException(-23231, sb);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t// Algo pudo haber fallado por all adentro\n\t\t\t\t} // No est cargando\n\t\t\t\t// Ver si se actualizan campos con esta cadena\n\t\t\t\t// Si se est usando el timestamp del objeto, marcar la fecha y hora\n\t\t\t\t// del cambio que se est realizando\n\t\t\t\t// F11100304: La comparacin del campo OBJTIMESTAMP no se hace con el valor correcto.\n\t\t\t\tif (this.m_bUseTimestamp && !FieldName.equals(\"OBJTIMESTAMP\")) {\n\t\t\t\t\t// Marcar esta fecha y hora\n\t\t\t\t\tif (!FieldName.startsWith(\"MAP_\") && (!this.m_bIsLoading || this.m_bIsCloning)) {\n\t\t\t\t\t\t// Solo aquellas que realmente proviquen cambios\n\t\t\t\t\t\tthis.PutItem(\"OBJTIMESTAMP\", this.m_dtTimeStamp);\n\t\t\t\t\t} // Solo aquellas que realmente proviquen cambios\n\t\t\t\t} // Marcar esta fecha y hora\n\t\t\t\t// Si estaba a TRUE para entrar a esta condicin, lo estar para salir\n\t\t\t\t// de manera que si lo ha llamado una clase hija, que mantenga el valor\n\t\t\t\tthis.m_bChangesMade = true;\n\t\t\t} // Como se han hecho cambios hay que mapear\n\t\t\tthis.postNewValue(FieldName, Value);\n\t\t} catch (ex) {\n\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\tlet sMessage = ex.message;\n\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_GENERALFAIL, \"{0} failed. \");\n\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\tif (!TextUtils.isEmpty(sMessage)) {\n\t\t\t\tsb = sb.concat(sMessage);\n\t\t\t}\n\t\t\tconsole.error(ex);\n\n\t\t\tthrow new XoneGenericException(-10101, ex, sb);\n\t\t}\n\t\t// finally\n\t\t// {\n\t\t//     // A12122701: Sistema para gestionar la estructura lgica de vistas en la maquinaria.\n\t\t//     // Estamos a nivel cero de evaluacin, momento de verificar si evaluamos las frmulas de\n\t\t//     // visibilidad, habilitacin y tal y tal...\n\t\t//     --this.m_nSetValDepth;\n\t\t//     if (this.m_nSetValDepth <= 0)\n\t\t//     {// Actualizar las frmulas\n\t\t//         // K13081201: Cambios en el tratamiento de frmulas para mejorar la concurrencia.\n\t\t//         synchronized (this.m_formulaLocker)\n\t\t//         {\n\t\t//         \tthis.m_nSetValDepth =0;\t\t\t// Por si las moscas...\n\t\t//             if (this.m_formulas != null)\n\t\t//             {// Anda\n\t\t//             \tEnumeration<String> enm =this.m_formulas.keys();\n\t\t//                 while (enm.hasMoreElements())\n\t\t//                 {// Evaluar cada una\n\t\t//                 \tString key =enm.nextElement ();\n\t\t//                 \tXoneEvalData val =this.m_formulas.get(key);\n\t\t//                     if (val.getDirty())\n\t\t// \t\t\t\t\t\ttry {\n\t\t// \t\t\t\t\t\t\tval.Evaluate();\n\t\t// \t\t\t\t\t\t} catch (Exception ex) {\n\t\t// \t\t\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t//                             String sMessage = ex.getMessage();\n\t\t//                             String sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_GENERALFAIL, \"{0} failed. \");\n\t\t//                             sb = sb.replace(\"{0}\", FunctionName);\n\t\t//                             if (!TextUtils.isEmpty(sMessage)) {\n\t\t//                                 sb = sb.concat(sMessage);\n\t\t//                             }\n\t\t//                             throw new XoneGenericException(-10108, ex, sb);\n\t\t//                         }\n\t\t//                 }// Evaluar cada una\n\t\t//             }// Anda\n\t\t//         }\n\t\t//     }// Actualizar las frmulas\n\t\t//}\n\t}\n\n\t/**\n\t * Esta funcin se llama desde get(x) para devolver el valor de una propiedad (campo) del objeto.\n\t * @param FieldName\t\t\tNombre del campo cuyo valor se quiere obtener.\n\t * @return\t\t\t\t\tDevuelve el valor de la propiedad. Si es NULL se ajustar al nulo de su tipo de datos.\n\t * @throws Exception\n\t */\n\tprotected GetItem(FieldName: string): any {\n\t\tlet FunctionName = \"GetItem\";\n\t\t// Si es una cadena vaca, nos famos...\n\t\tif (StringUtils.IsEmptyString(FieldName)) return null;\n\t\t// Primero efectuar algn anlisis para ver si tenemos propiedad con nombre especial\n\t\tswitch (FieldName.charAt(0)) {\n\t\t\t// K11041401: Declarar obsoletas las propiedades tipo method en el mappings.\n\t\t\t//////case '#':\n\t\t\t//////    return GetPropertyMacro(FieldName);\n\t\t\tcase \"%\":\n\t\t\t\treturn this.GetBitmappedProperty(FieldName);\n\t\t\tcase \"$\":\n\t\t\t\treturn this.GetFormulaProperty(FieldName);\n\t\t}\n\t\t// Puede que sea una propiedad de las anteriores con nombre comn\n\t\t// O12050702: Optimizacin al gestionas los campos que son de frmula o bit.\n\t\t// Saber si el campo es de frmula ahora es un peln diferente...\n\t\t//////String str = FieldPropertyValue(FieldName, \"formula\");\n\t\t//////if (!StringUtils.IsEmptyString(str))\n\t\tif (this.m_owner.IsFormulaProperty(FieldName)) {\n\t\t\t// Meter el pie\n\t\t\t// Ver si no se trata de un campo para generar con \"generates\"\n\t\t\t//////str = FieldPropertyValue(str, \"generated\");\n\t\t\t//////if (!StringUtils.ParseBoolValue(str, false))\n\t\t\t// O12050702: Optimizacin al gestionas los campos que son de frmula o bit.\n\t\t\t// Esto era deprecated.... ahora es obsolete....\n\t\t\treturn this.GetFormulaProperty(FieldName); // Es una frmula normal\n\t\t} // Meter el pie\n\t\t// K11041401: Declarar obsoletas las propiedades tipo method en el mappings.\n\t\t/*\n        if (!StringUtils.IsEmptyString(str = FieldPropertyValue(FieldName, \"method\")))\n            return GetPropertyMacro(FieldName);  // Mtodo sin caracter de inicio\n        */\n\t\t// O12050702: Optimizacin al gestionas los campos que son de frmula o bit.\n\t\t// Esto ahora es un poco diferente\n\t\t//////if (!StringUtils.IsEmptyString(str = FieldPropertyValue(FieldName, \"bit\")))\n\t\tif (this.m_owner.IsBitProperty(FieldName)) return this.GetBitmappedProperty(FieldName); // Igual que en la anterior\n\t\t// A09100501:   Permitir que las propiedades tengan un tipo button.\n\t\t// Si es un botn, coger el valor normal y si es nulo, devolver el property-title\n\t\tlet str = this.FieldPropertyValue(FieldName, \"type\");\n\t\tif (!StringUtils.IsEmptyString(str)) {\n\t\t\t// Tiene valor\n\t\t\tif (str.equals(\"B\")) {\n\t\t\t\t// Botoncillo\n\t\t\t\tlet v1, v2;\n\t\t\t\tv1 = this.PropertyTitle(FieldName);\n\t\t\t\tv2 = this.GetNormalProperty(FieldName);\n\t\t\t\tlet str2 = StringUtils.SafeToString(v2);\n\t\t\t\tif (!StringUtils.IsEmptyString(str2)) v1 = str2;\n\t\t\t\treturn v1;\n\t\t\t} // Botoncillo\n\t\t} // Tiene valor\n\t\t// Si es un current item con carga diferida, buscar el valor en la coleccin directamente\n\t\tlet vl = null;\n\t\tif (this.m_owner.getDeferredLoad() && this.m_bIsCurrentItem) {\n\t\t\t// Buscar en el recordset\n\t\t\t// F13012402: Si un valor de un CurrentItem ha variado, devolverlo cuando se lea.\n\t\t\t// Para los valores modificados en un C.I.\n\t\t\t// Si lo que devuelve es NULL, entonces ajustarlo y devolverlo\n\t\t\tif (this.m_lstNormalProperties.containsKey(FieldName)) vl = this.m_lstNormalProperties.get(FieldName);\n\t\t\tif (vl == null) {\n\t\t\t\tif (null == (vl = this.m_owner.GetCurrentItemValue(FieldName))) {\n\t\t\t\t\t// Si lo que hay en el recordset es nulo, podra ser un linkedto\n\t\t\t\t\t// Si el campo no existe, tendremos que ver si se trata de un campo xlat o un campo mapeado\n\t\t\t\t\tlet strLinkedTo = this.FieldPropertyValue(FieldName, \"linkedto\");\n\t\t\t\t\tif (!StringUtils.IsEmptyString(strLinkedTo) && !this.m_owner.getConnection().IsOuterJoinSupported()) {\n\t\t\t\t\t\t// Tiene linkedto\n\t\t\t\t\t\tif (!StringUtils.IsEmptyString(this.FieldPropertyValue(FieldName, \"linkedfield\"))) {\n\t\t\t\t\t\t\t// Leer valores y devolver lo que sea\n\t\t\t\t\t\t\tthis.RestoreMappedFields(strLinkedTo)\n\t\t\t\t\t\t\t\t.then((value) => {\n\t\t\t\t\t\t\t\t\tif (!value) {\n\t\t\t\t\t\t\t\t\t\t// Error\n\t\t\t\t\t\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t\t\t\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_OBJ_PUTITEMFAIL, \"{0} failed. Cannot update mapped fields.\");\n\t\t\t\t\t\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\t\t\t\t\t\tthrow new XoneGenericException(-23231, sb);\n\t\t\t\t\t\t\t\t\t} // Error\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch((reason) => {\n\t\t\t\t\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t\t\t\t\tlet sb = this.m_messages.GetMessage(\n\t\t\t\t\t\t\t\t\t\tXoneMessageKeys.SYS_MSG_OBJ_PUTITEMFAIL,\n\t\t\t\t\t\t\t\t\t\t\"{0} failed. Cannot update mapped fields. Reason: {1}\"\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\t\t\t\t\tsb = sb.replace(\"{1}\", reason);\n\t\t\t\t\t\t\t\t\tthrow new XoneGenericException(-23231, sb);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (this.m_lstNormalProperties.containsKey(FieldName)) return (vl = this.m_lstNormalProperties.get(FieldName));\n\t\t\t\t\t\t} // Leer valores y devolver lo que sea\n\t\t\t\t\t} // Tiene linkedto\n\t\t\t\t\treturn this.AdjustNullValue(FieldName);\n\t\t\t\t} // Si lo que hay en el recordset es nulo, podra ser un linkedto\n\t\t\t\t// De lo contrario devolverlo tal cual\n\t\t\t\tif (vl != null) {\n\t\t\t\t\tthis[FieldName] = vl;\n\t\t\t\t\t//this.m_lstNormalProperties.put(FieldName, vl);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// F11041504:\tAl devolver un valor que se saca del recordset, procesarlo como siempre.\n\t\t\t// Procesar\n\t\t\treturn this.ProcessValue(FieldName, vl);\n\t\t} // Buscar en el recordset\n\t\t// Finalmente ser posiblemente una propiedad normal...\n\t\treturn this.GetNormalProperty(FieldName);\n\t}\n\tGetFormulaProperty(FieldName: string): any {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tGetBitmappedProperty(FieldName: string): any {\n\t\t// Amiyares: 30/06/2021\n\t\tconst linked = this.getFieldPropertyValue(FieldName, \"linkedto\");\n\t\tconst bit = Number(this.getFieldPropertyValue(FieldName, \"bit\")) - 1;\n\t\treturn (this[linked] >> bit) % 2 != 0;\n\t}\n\tPropertyTitle(FieldName: string): any {\n\t\t// F11081105: Protegerse en el objeto cuando se trata de un objeto hurfano.\n\t\t// F13022109: No devolver nulos cuando los atributos no existen o tienen cadenas vacas.\n\t\t// No es lo mismo cadena vaca que NULL\n\t\t// TAG: 0512201601 : Luis He permitido cachear el title para si se cambia por script que se pueda devolver el correcto.\n\t\t// Antes solo se buscaba en la coleccin y cada objeto no podia teenr su porpio titulo personalizado\n\n\t\tlet sKey = FieldName + \":\" + Utils.PROP_ATTR_TITLE;\n\t\tif (this.m_lstOverridenFieldPropertyValueAttributes.containsKey(sKey)) {\n\t\t\treturn this.m_lstOverridenFieldPropertyValueAttributes.get(sKey);\n\t\t} else if (this.m_lstCachedAttributes.containsKey(sKey)) {\n\t\t\treturn this.m_lstCachedAttributes.get(sKey);\n\t\t} else if (this.m_owner == null) {\n\t\t\treturn this.FieldPropertyValue(FieldName, Utils.PROP_ATTR_TITLE);\n\t\t}\n\t\tlet sVal = this.m_owner.PropertyTitle(FieldName);\n\t\tif (!StringUtils.IsEmptyString(sVal)) {\n\t\t\tif (sVal.contains(\"##\")) {\n\t\t\t\t// Es una macro o la contiene\n\t\t\t\t// M11060902: Mejoras en el sistema de evaluacin de macros en el framework.\n\t\t\t\t// F13022109: No devolver nulos cuando los atributos no existen o tienen cadenas vacas.\n\t\t\t\t// No es lo mismo cadena vaca que NULL\n\t\t\t\tif (sVal.equals(StringUtils.XONE_EMPTY_STRING)) return Utils.EMPTY_STRING;\n\t\t\t\t//TODO ADD TAG 13/05/2014 Juan Carlos. Aado sobrecarga a PrepareSqlString, hace falta para PropertyTitle. Buscar esta fecha para el resto de cambios.\n\t\t\t\tsVal = this.PrepareSqlString(sVal, true);\n\t\t\t\tif (!StringUtils.IsEmptyString(sVal)) {\n\t\t\t\t\t// Si viene entrecomillado limpiar un poco\n\t\t\t\t\t// M11060902: Mejoras en el sistema de evaluacin de macros en el framework.\n\t\t\t\t\t// F13022109: No devolver nulos cuando los atributos no existen o tienen cadenas vacas.\n\t\t\t\t\t// No es lo mismo cadena vaca que NULL\n\t\t\t\t\tif (sVal.equals(\"NULL\")) return Utils.EMPTY_STRING;\n\t\t\t\t\tif (sVal.startsWith(\"'\") || (sVal.endsWith(\"'\") && sVal.length >= 2)) sVal = sVal.substring(1, sVal.length - 1);\n\t\t\t\t\t////return sVal.replace(\"'\", \"\");\n\t\t\t\t} // Si viene entrecomillado limpiar un poco\n\t\t\t} // Es una macro o la contiene\n\t\t}\n\t\t//SetFieldPropertyValue(FieldName,Utils.PROP_ATTR_TITLE,sVal,false);\n\t\treturn sVal;\n\t}\n\n\t/**\n\t * Devuelve el valor de una propiedad de datos \"normal\"\n\t * @param FieldName\t\tNombre del campo cuyo valor se quiere leer.\n\t * @return\t\t\t\tDevuelve el valor de una propiedad de datos \"normal\"\n\t * @throws Exception\n\t */\n\tprotected GetNormalProperty(FieldName: string): any {\n\t\tlet vl = null;\n\t\tconst FunctionName = \"GetNormalProperty\";\n\t\tif (!this.m_lstNormalProperties.containsKey(FieldName)) {\n\t\t\t// No tiene valor, ver si es xlat\n\t\t\t// TODO: Luis, por ahora el xlat nos lo quitamos\n\t\t\t// if (!StringUtils.IsEmptyString(this.FieldPropertyValue(FieldName, \"xlat\")))\n\t\t\t// {// Existe la propiedad\n\t\t\t//     if (!this.DevelopXlatProperties(FieldName, true))\n\t\t\t//     {// Error\n\t\t\t//         // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t//         let sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_OBJ_GETNORMALPROPFAIL, \"CXoneDataObject::GetNormalProperty failed. Cannot develop slat property '{0}'\");\n\t\t\t//         sb =sb.replace(\"{0}\", FieldName);\n\t\t\t//         throw new XoneGenericException(-19199, sb);\n\t\t\t//     }// Error\n\t\t\t//     // Obtener la de la lista\n\t\t\t//     if (this.m_lstNormalProperties.containsKey(FieldName))\n\t\t\t//         vl = this.m_lstNormalProperties.get(FieldName);\n\t\t\t// }// Existe la propiedad\n\t\t\t// else\n\t\t\t{\n\t\t\t\t// Ver si es una propiedad mapeada y resolverla ahora\n\t\t\t\tlet strLinkedTo;\n\t\t\t\tif (\n\t\t\t\t\t!this.m_owner.getConnection().IsOuterJoinSupported() &&\n\t\t\t\t\t!StringUtils.IsEmptyString((strLinkedTo = this.FieldPropertyValue(FieldName, \"linkedto\")))\n\t\t\t\t) {\n\t\t\t\t\t// Si est enlazada, buscar dicho valor\n\t\t\t\t\tlet strLinkedField = this.FieldPropertyValue(FieldName, \"linkedfield\");\n\t\t\t\t\tif (!StringUtils.IsEmptyString(strLinkedField) && !this.m_bIsLoading) {\n\t\t\t\t\t\t// Resolver y leer\n\t\t\t\t\t\t// Resolver los campos mapeados... esto se puede optimizar despus\n\t\t\t\t\t\t// usando algn mecanismo de carga que no cachee los datos del objeto\n\t\t\t\t\t\t// sino que use carga diferida y lea directamente del recordset... ya se\n\t\t\t\t\t\t// ver\n\t\t\t\t\t\tthis.RestoreMappedFields(strLinkedTo)\n\t\t\t\t\t\t\t.then((value) => {\n\t\t\t\t\t\t\t\tif (!value) {\n\t\t\t\t\t\t\t\t\t// Error\n\t\t\t\t\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t\t\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_OBJ_PUTITEMFAIL, \"{0} failed. Cannot update mapped fields.\");\n\t\t\t\t\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\t\t\t\t\tthrow new XoneGenericException(-23231, sb);\n\t\t\t\t\t\t\t\t} // Error\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((reason) => {\n\t\t\t\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_OBJ_PUTITEMFAIL, \"{0} failed. Cannot update mapped fields. Reason: {1}\");\n\t\t\t\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\t\t\t\tsb = sb.replace(\"{1}\", reason);\n\t\t\t\t\t\t\t\tthrow new XoneGenericException(-23231, sb);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tif (this.m_lstNormalProperties.containsKey(FieldName)) vl = this.m_lstNormalProperties.get(FieldName);\n\t\t\t\t\t} // Resolver y leer\n\t\t\t\t} // Si est enlazada, buscar dicho valor\n\t\t\t\telse {\n\t\t\t\t\t// No est mapeado\n\t\t\t\t\t// O10052504:\tLas propiedades no mapeadas que se sacan de recordset puede cachearse.\n\t\t\t\t\t// F11092602: No ir al resultset si este objeto no es CurrentItem.\n\t\t\t\t\t// Solo busca en el recordset si yo soy current item...\n\t\t\t\t\tif (this.m_bIsCurrentItem) {\n\t\t\t\t\t\t// Pozi\n\t\t\t\t\t\tvl = this.m_owner.GetCurrentItemValue(FieldName);\n\t\t\t\t\t\tif (vl != null) {\n\t\t\t\t\t\t\tthis[FieldName] = vl;\n\t\t\t\t\t\t\t//this.m_lstNormalProperties.put(FieldName, vl);\n\t\t\t\t\t\t}\n\t\t\t\t\t} // Pozi\n\t\t\t\t} // No est mapeado\n\t\t\t} // Ver si es una propiedad mapeada y resolverla ahora\n\t\t} // No tiene valor, ver si es xlat\n\t\telse vl = this.m_lstNormalProperties.get(FieldName);\n\n\t\treturn this.ProcessValue(FieldName, vl);\n\t}\n\n\t/**\n\t * Procesa un valor antes de devolverlo a quien lo est leyendo (aqu se decodifican los valores, se ajustan tipos, etc.)\n\t * @param FieldName\t\t\tNombre del campo al que pertenece el valor devuelto.\n\t * @param Value\t\t\t\tValor como tal.\n\t * @return\t\t\t\t\tDevuelve el valor ya procesado en funcin de su tipo de datos.\n\t * @throws Exception\n\t */\n\tprivate ProcessValue(FieldName: any, Value: any): any {\n\t\tif (Value == null && this.m_lstXlatProperties.contains(FieldName) && !this.m_lstDevelopedXlatProperties.contains(FieldName)) {\n\t\t\t// Desarrollar esta propiedad\n\t\t\t// TODO ADD TAG\n\t\t\t// Solo lectura... si no existe el objeto pos n...\n\t\t\tif (!this.DevelopXlatProperties(FieldName, true)) {\n\t\t\t\t// Error\n\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\tlet sb = this.m_messages.GetMessage(\n\t\t\t\t\tXoneMessageKeys.SYS_MSG_OBJ_PROCESSVALFAIL,\n\t\t\t\t\t\"CXoneDataObject::ProcessValue failed. Cannot develop xlat property '{0}'\"\n\t\t\t\t);\n\t\t\t\tsb = sb.replace(\"{0}\", FieldName);\n\t\t\t\tthrow new XoneGenericException(-19991, sb);\n\t\t\t} // Error\n\t\t\tthis.m_lstDevelopedXlatProperties.push(FieldName);\n\t\t} // Desarrollar esta propiedad\n\t\t// O12052901: No llamar a FieldPropertyValue cuando no sea necesario (optimizacin)\n\t\tlet str,\n\t\t\tstrType = null;\n\t\tif (Value == null) return this.AdjustNullValue(FieldName);\n\t\tlet vl = Value; // La salida de la funcin, por defecto lo mismo que viene...\n\t\tif (typeof Value === \"string\") {\n\t\t\t// Cadena\n\t\t\tstr = Value.toString();\n\t\t\tstrType = this.FieldPropertyValue(FieldName, \"type\");\n\t\t\t// F11041804: ProcessValue no est analizando los tipos con uno por defecto.\n\t\t\tif (StringUtils.IsEmptyString(strType)) strType = \"T\";\n\t\t\tif (strType.equals(\"TW\")) {\n\t\t\t\t// Weekday\n\t\t\t\tlet n = NumberUtils.SafeToInt(Value);\n\t\t\t\tstr = this.getOwnerApp().GetWeekDayName(n);\n\t\t\t} // Weekday\n\t\t\telse {\n\t\t\t\t// Probar otros\n\t\t\t\tif (strType.equals(\"X\")) {\n\t\t\t\t\t// Password viejo (sin codificar)\n\t\t\t\t\tif (!StringUtils.IsEmptyString(str)) {\n\t\t\t\t\t\t// Tiene valor\n\t\t\t\t\t\t// A11042901: Modificaciones para adicionar nuevos algoritmos de comprobacin de claves.\n\t\t\t\t\t\t// Puede que traiga hash... en ese caso devolvemos lo que hay y punto.\n\t\t\t\t\t\t// byte[] buffer = Base64.decode(str);\n\t\t\t\t\t\t// String strTmp =this.FieldPropertyValue (FieldName, \"hash-type\");\n\t\t\t\t\t\t// if (StringUtils.IsEmptyString(strTmp))\n\t\t\t\t\t\t//     str = StringUtils.ReadFromBytes(buffer);\n\t\t\t\t\t\tlet sHashType = this.FieldPropertyValue(FieldName, \"hash-type\");\n\t\t\t\t\t\tlet sEncode = this.FieldPropertyValue(FieldName, \"encode\");\n\t\t\t\t\t\t// str = HashUtils.createHash(sHashType, sEncode, str);\n\t\t\t\t\t\t// TODO: Alejandro 19/05/2021, Los tipo X explotan, a hacer: poner un atob, decodifica de BASE64\n\t\t\t\t\t} // Tiene valor\n\t\t\t\t} // Password viejo (sin codificar)\n\t\t\t\telse {\n\t\t\t\t\t// Cualquier otra cosa\n\t\t\t\t\t//\n\t\t\t\t\t// Ver si puede estar encriptado\n\t\t\t\t\tlet strProtect = this.FieldPropertyValue(FieldName, \"protect\");\n\t\t\t\t\tif (!StringUtils.IsEmptyString(strProtect) && !strProtect.equals(\"0\") && !strProtect.equals(\"false\"))\n\t\t\t\t\t\tstr = this.UnprotectString(str, strProtect); // Desproteger la cadenilla\n\t\t\t\t\t//\n\t\t\t\t\t// Seguir con el proceso\n\t\t\t\t\tlet nLen = str.length;\n\t\t\t\t\tswitch (nLen) {\n\t\t\t\t\t\tcase 8:\n\t\t\t\t\t\t\tif (strType.equals(\"TD\"))\n\t\t\t\t\t\t\t\t// F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n\t\t\t\t\t\t\t\tstr = String.format(\n\t\t\t\t\t\t\t\t\t\"%02d/%02d/%04d\",\n\t\t\t\t\t\t\t\t\tNumberUtils.SafeToInt(str.substring(6, 8)),\n\t\t\t\t\t\t\t\t\tNumberUtils.SafeToInt(str.substring(4, 6)),\n\t\t\t\t\t\t\t\t\tNumberUtils.SafeToInt(str.substring(0, 4))\n\t\t\t\t\t\t\t\t); // Transformar la cadenilla\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 22:\n\t\t\t\t\t\t\tif (strType.equals(\"TC\")) {\n\t\t\t\t\t\t\t\t// Ver si la cuenta viene con el formato adecuao\n\t\t\t\t\t\t\t\t// F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n\t\t\t\t\t\t\t\tif (str.substring(8, 9).equals(\"#\") && str.substring(11, 12).equals(\"#\")) {\n\t\t\t\t\t\t\t\t\t// Tiene el formato\n\t\t\t\t\t\t\t\t\t// F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n\t\t\t\t\t\t\t\t\tstrType = str.substring(0, 4) + \"-\" + str.substring(4, 8) + \"-\" + str.substring(9, 11) + \"-\" + str.substring(12, 22);\n\t\t\t\t\t\t\t\t\tstr = strType;\n\t\t\t\t\t\t\t\t} // Tiene el formato\n\t\t\t\t\t\t\t} // Ver si la cuenta viene con el formato adecuao\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} // Cualquier otra cosa\n\t\t\t}\n\t\t\tvl = str;\n\t\t} // Cadena\n\n\t\t// F10052506:\tEl procesamiento de valores NC que vienen double es incorrecto.\n\t\tif (ObjUtils.IsFloat(Value)) {\n\t\t\t// Double\n\t\t\tlet dbl = NumberUtils.SafeToDouble(Value);\n\t\t\t// O12052901: No llamar a FieldPropertyValue cuando no sea necesario (optimizacin)\n\t\t\t// Solo se llama FieldPropertyValue si hace falta...\n\t\t\tif (StringUtils.IsEmptyString(strType)) strType = this.FieldPropertyValue(FieldName, \"type\");\n\t\t\tif (\"N\".equals(strType) || \"NC\".equals(strType)) return NumberUtils.SafeToInt(dbl);\n\t\t} // Double\n\n\t\t// Los campos especiales read-once\n\t\tif (FieldName.equals(\"MAP_MULTIPLE\") || FieldName.equals(\"MAP_REFINE\"))\n\t\t\t// Limpiar esto\n\t\t\tthis.m_lstNormalProperties.delete(FieldName);\n\t\t// Devolver el valor ya ajustado\n\t\treturn vl;\n\t}\n\n\tpublic get ownerCollection() {\n\t\treturn this.m_owner;\n\t}\n\n\tpublic getOwnerCollection(): XoneDataCollection {\n\t\treturn this.ownerCollection;\n\t}\n\n\tgetValue(FieldName): any {\n\t\treturn this.GetItem(FieldName);\n\t}\n\n\tDevelopXlatProperties(FieldName: any, arg1: boolean): boolean {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tprotected AdjustNullValue(FieldName: string): Promise<any> {\n\t\tlet strType = this.FieldPropertyValue(FieldName, \"type\");\n\t\tlet Value = null;\n\t\t//\n\t\t// Comprobar los nulos\n\t\tif (StringUtils.IsEmptyString(strType)) {\n\t\t\t// Puede ser que sea una propiedad mapeada...\n\t\t\t// Esto es supuestamente ineficiente, pero puede\n\t\t\t// llegar a salvar el tipo cuando el usuario sea\n\t\t\t// indisciplinadillo...\n\t\t\tif (!StringUtils.IsEmptyString((strType = this.FieldPropertyValue(FieldName, \"linkedto\")))) {\n\t\t\t\t// Est enlazada a algn campo. Buscar por ah\n\t\t\t\t// Buscar la posible coleccin a que est mapeada la propiedad\n\t\t\t\t// linkedto de esta propiedad... enredao, pero yo me entiendo\n\t\t\t\tif (!StringUtils.IsEmptyString((strType = this.FieldPropertyValue(strType, \"mapcol\")))) {\n\t\t\t\t\t// La propiedad tiene valor\n\t\t\t\t\t// Buscar esta coleccin\n\t\t\t\t\t// let coll: XoneDataCollection =  await this.m_owner.getOwnerApp().getCollection(strType);\n\t\t\t\t\t// if (null != coll) // Vaya, el huevo en el conejo....\n\t\t\t\t\t//     // Obtener el linkedfield de este campo para buscarlo en aquella coleccin\n\t\t\t\t\t//     strType = coll.FieldPropertyValue(this.FieldPropertyValue(FieldName, \"linkedfield\"), \"type\");\n\t\t\t\t} // La propiedad tiene valor\n\t\t\t} // Est enlazada a algn campo. Buscar por ah\n\t\t} // Puede ser que sea una propiedad mapeada...\n\t\tif (StringUtils.IsEmptyString(strType)) {\n\t\t\t// Todava puede ser que no tenga tipo y sea el ID\n\t\t\tif (FieldName.equals(this.getIdFieldName())) {\n\t\t\t\t// Es la clave primaria\n\t\t\t\tif (this.m_owner.getStringKey()) Value = Utils.EMPTY_STRING;\n\t\t\t\telse Value = 0;\n\t\t\t} // Es la clave primaria\n\t\t\tif (FieldName.equals(this.m_owner.getConnection().getRowIdFieldName())) Value = \"\";\n\t\t} // Todava puede ser que no tenga tipo y sea el ID\n\t\telse {\n\t\t\t// Tiene tipo, puede operar :-P\n\t\t\tswitch (\n\t\t\t\tstrType.charAt(0) // Posibles tipos\n\t\t\t) {\n\t\t\t\tcase \"T\":\n\t\t\t\tcase \"X\":\n\t\t\t\t\tValue = Utils.EMPTY_STRING;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"N\":\n\t\t\t\t\t//\n\t\t\t\t\t// Comprobar si el tipo es entero o decimal. Si es decimal, asignar un REAL\n\t\t\t\t\tif (strType.length == 1) Value = 0;\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Ver si es NC o no\n\t\t\t\t\t\t// F10112402: AdjustNullValue no tiene en cuenta los campos NC para valores nulos.\n\t\t\t\t\t\tif (strType.equals(\"NC\")) Value = 0;\n\t\t\t\t\t\telse Value = 0.0;\n\t\t\t\t\t} // Ver si es NC o no\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"I\":\n\t\t\t\t\tif (strType.equalsIgnoreCase(\"img\")) Value = Utils.EMPTY_STRING;\n\t\t\t\t\tbreak;\n\t\t\t} // Posibles tipos\n\t\t} // Tiene tipo, puede operar :-P\n\t\t// Devolver lo que sea\n\t\treturn Value;\n\t}\n\n\tprivate m_reactLayout: any;\n\n\t//#region Transformaciones para el UI PWA\n\tpublic getLayout(visibility: number = 1): any {\n\t\treturn this.m_owner.getLayout(visibility);\n\t}\n\n\tpublic async getLayoutAsync(visibility: number = 1): Promise<any> {\n\t\treturn this.m_owner.getLayoutAsync(visibility);\n\t}\n\n\tpublic setLayout(value: any) {\n\t\tthis.m_reactLayout = value;\n\t\t// const attrs=value?.attributes;\n\t\t// if (attrs) {\n\t\t//     for (const key in attrs) {\n\t\t//         if (Object.prototype.hasOwnProperty.call(attrs, key)) {\n\t\t//             this.m_reactLayout.put(attrs.node + \":\" + attrs.name+\":\"+ key,attrs[key]);\n\t\t//         }\n\t\t//     }\n\t\t// }\n\t\t// if (value?.controls && Array.isArray(value.controls)) {\n\t\t//     value.controls.forEach(element => this.setLayout(element));\n\t\t// }\n\t}\n\n\tpublic getPropAttributes(Value: string | XmlNode, type: string = Utils.PROP_NAME): any {\n\t\treturn UITransform.getPropAttributes(this, Value, type);\n\t\t// let node: XmlNode;\n\t\t// let PropName: string\n\t\t// if (typeof Value == 'string') {\n\t\t//     node=this.m_owner.getNode(type,Utils.PROP_ATTR_NAME,Value);\n\t\t//     PropName=Value;\n\t\t// } else {\n\t\t//     node= Value as XmlNode;\n\t\t//     PropName=node.getAttrValue(Utils.PROP_ATTR_NAME);\n\t\t//     type=node.getName();\n\t\t// }\n\t\t// if (ObjUtils.IsNothing(node))\n\t\t//     return {};\n\t\t// let attrs=node.getAttrs();\n\t\t// let result=<any>{ node: type};\n\t\t// for (const key in UITransform.UI_ATTRIBUTES[type]) {\n\t\t//     if (Object.prototype.hasOwnProperty.call(UITransform.UI_ATTRIBUTES[type], key)) {\n\t\t//         const element = UITransform.UI_ATTRIBUTES[type][key];\n\t\t//         const value=node.getName().equalsIgnoreCase(Utils.PROP_NAME)?this.FieldPropertyValue(PropName,element):this.m_owner.NodePropertyValue(type,PropName,element);\n\t\t//         if (!TextUtils.isEmpty(value))\n\t\t//         {\n\t\t//             result[key]=UITransform.developValue(this,PropName,key,element);\n\t\t//         }\n\t\t//     }\n\t\t// }\n\t\t// return result;\n\t}\n\t//#endregion\n\n\tpublic NodePropertyValue(NodeName: string, ItemName: string, AttrName: string): string {\n\t\treturn this.getOwnerCollection().NodePropertyValue(NodeName, ItemName, AttrName);\n\t}\n\n\tQualifyField(FieldName: any, Sentence?: SqlParser): string {\n\t\treturn this.m_owner.QualifyField(FieldName, Sentence);\n\t}\n\n\tpublic getNodeList(NodeName: string, AttrName?: string, AttrValue?: string, Exist?: boolean): XmlNodeList {\n\t\treturn this.getOwnerCollection().getNodeList(NodeName, AttrName, AttrValue);\n\t}\n\n\t/**\n\t * @param NodeName\t\tNombre del nodo que se quiere buscar.\n\t * @param AttrName\t\tNombre del atributo que se quiere comparar.\n\t * @param AttrValue\t\tValor que tiene que tener el atributo para reconocer un nodo como vlido.\n\t * @return\t\t\t\tDevuelve un nodo XML dentro del nodo de esta coleccin con un atributo cuyo valor se solicita.\n\t */\n\tpublic getNode(NodeName: string, AttrName?: string, AttrValue?: string): XmlNode {\n\t\treturn this.getOwnerCollection().getNode(NodeName, AttrName, AttrValue);\n\t}\n\n\tUnprotectString(str: any, strProtect: string): any {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tAdjustDate(str: string): string {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tAdjustMonthYear(str: string): string {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tFormatAcc(str: string): string {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tFormatCCC(str: string): string {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tAdjustAccNumber(str: string): string {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tProtectString(str: string, arg1: number): string {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tPreprocessValue(FieldName: string, strKey: string, Value: any) {\n\t\t// TODO: Luis throw new Error(\"Method not implemented.\");\n\t}\n\n\tSetPropertyValue(FieldName: string, FieldValue: any) {\n\t\t// O10052503:\tLa actualizacin de MAP_SYS_ORDER se puede puentear.\n\t\tif (\"MAP_SYS_ORDER\".equals(FieldName)) {\n\t\t\t// Puentear la asignacin\n\t\t\t// ADD TAG TODO MAP_SYSY_ORDER no se trata como una prop normal, tendra un put y get propio\n\t\t\tthis.mMapSysOrder = NumberUtils.SafeToLong(FieldValue);\n\t\t\t//m_lstNormalProperties.put(FieldName, FieldValue);\n\t\t\treturn;\n\t\t} // Puentear la asignacin\n\t\t// De lo contrario comportamiento normal.\n\t\tlet strField = this.m_owner.MapField(FieldName);\n\t\tthis.put(strField, FieldValue);\n\t}\n\n\tpublic GetPropertyValue(FieldName: string): any {\n\t\tlet strField = this.MapField(FieldName);\n\t\treturn this.get(strField);\n\t}\n\n\t/**\n\t * Mapea el nombre de un campo al valor real en la coleccin o base de datos\n\t * @param FieldName\t\t\tNombre del campo que se quiere mapear.\n\t * @return\t\t\t\t\tDevuelve el campo mapeado por la coleccin propietaria.\n\t */\n\tprivate MapField(FieldName: string, DatabaseField: boolean = false): string {\n\t\treturn this.m_owner.MapField(FieldName, DatabaseField);\n\t}\n\n\t/**\n\t * Efecta el mapeo de valores enlazados una vez que se ha actualizado un campo ID mapeado a otra coleccin.\n\t * @param Collection\t\tColeccin a la cual est enlazado el campo que ha provocado el mapeo.\n\t * @param FieldName\t\t\tNombre del campo ID que ha provocado el mapeo.\n\t * @param Source\t\t\tObjeto del cual se sacarn los valores que se van a copiar hacia este.\n\t * @return\t\t\t\t\tDevuelve TRUE si todas las actualizaciones de campos son correctas.\n\t * @throws Exception\n\t */\n\tprivate async DoRestoreMapValues(Collection: XoneDataCollection, FieldName: string, Source: XoneDataObject | IResultSet): Promise<boolean> {\n\t\tlet strFieldFrom = \"\",\n\t\t\tstrFieldTo = \"\";\n\t\tlet nodeList: XmlNodeList;\n\t\tlet vl: any;\n\t\tlet bUpdate = true;\n\n\t\t// Alejandro 02/07=2021: Correccin de error al restaurar campos mapeados\n\t\tconst fieldValue = this[FieldName];\n\t\tconst mapfld = this.getFieldPropertyValue(FieldName, \"mapfld\");\n\n\t\tnodeList = this.m_owner.getNodeList(\"prop\", \"linkedto\", FieldName);\n\t\tfor (let i = 0; i < nodeList.count(); i++) {\n\t\t\t// Para cada nodo\n\t\t\tlet node = nodeList.get(i);\n\t\t\tif (!StringUtils.IsEmptyString(XmlUtils.getNodeAttr(node, \"bit\"))) continue;\n\t\t\tstrFieldTo = XmlUtils.getNodeAttr(node, \"name\");\n\t\t\tstrFieldFrom = XmlUtils.getNodeAttr(node, \"linkedfield\");\n\t\t\tif (Source && Source instanceof XoneDataObject) {\n\t\t\t\t// Comprobar si el campo existe en el objeto\n\t\t\t\tif (!Source.FieldExists(strFieldFrom)) {\n\t\t\t\t\t// Error\n\t\t\t\t\t// Crear nuestro propio error\n\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t// TODO ADD TAG Juan Carlos. Aado el nombre del objeto con su coleccin para que sea\n\t\t\t\t\t// ms fcil reparar este error.\n\t\t\t\t\tlet sb = this.m_messages.GetMessage(\n\t\t\t\t\t\tXoneMessageKeys.SYS_MSG_OBJ_RESTOREMAPFLDFAIL_03,\n\t\t\t\t\t\t\"{0} failed. Cannot find linked field '{1}' to restore field '{2}' in object {3}\"\n\t\t\t\t\t);\n\t\t\t\t\tsb = sb.replace(\"{0}\", \"CXoneDataObject::DoRestoreMapValues\");\n\t\t\t\t\tsb = sb.replace(\"{1}\", strFieldFrom);\n\t\t\t\t\tsb = sb.replace(\"{2}\", strFieldTo);\n\t\t\t\t\tsb = sb.replace(\"{3}\", Source.getName());\n\t\t\t\t\tthrow new XoneGenericException(-2444, sb);\n\t\t\t\t} // Error\n\t\t\t\tvl = Source.get(strFieldFrom);\n\t\t\t} // Comprobar si el campo existe en el objeto\n\t\t\telse if (Source && (Source as IResultSet).isResultset) {\n\t\t\t\t// Comprobar si el campo existe en el objeto\n\t\t\t\t//int index =-1;\n\t\t\t\ttry {\n\t\t\t\t\t// M10052401:\tModificaciones en la forma de acceso a bases de datos SQLite.\n\t\t\t\t\t// K11010501:\tModificaciones para la versin 1.5 de Android.\n\n\t\t\t\t\t// Alejandro 02/07=2021: Parche para corregir el error al restaurar campos mapeados, siempre devolva el primer registro. Comentar con Luis la solucin final.\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvl = (Source as IResultSet).getData().find((e: Object) => e[mapfld] === fieldValue)[strFieldFrom];\n\t\t\t\t\t} catch {\n\t\t\t\t\t\tvl = (Source as IResultSet).getValue(strFieldFrom, this.m_owner.getTypeFromXml(this.m_owner.PropType(strFieldFrom)));\n\t\t\t\t\t}\n\t\t\t\t} catch (ex) {\n\t\t\t\t\tconsole.error(ex);\n\t\t\t\t\t/*\n\t\t\t\t\t * En principio la coleccin no permitir usar un resultset como origen de\n\t\t\t\t\t * restauracin de campos mapeados\n\t\t\t\t\t */\n\t\t\t\t\tCollection.setUseObjectsInRestore(true);\n\t\t\t\t\t(Source as IResultSet).close();\n\t\t\t\t\treturn await this.RestoreMappedFields(FieldName);\n\t\t\t\t}\n\t\t\t} // Comprobar si el campo existe en el objeto\n\t\t\telse vl = null;\n\t\t\tif (bUpdate) this.put(strFieldTo, vl);\n\t\t} // Para cada nodo\n\t\treturn true;\n\t}\n\n\tprivate RestoreMapColValues(FieldName: string, mapcolValues: string): boolean {\n\t\tlet strFieldFrom = \"\",\n\t\t\tstrFieldTo = \"\";\n\t\tlet nodeList: XmlNodeList;\n\t\tlet pos: number = NumberUtils.SafeToInt(this.GetPropertyValue(FieldName), -1);\n\t\tif (pos < 0) return false;\n\t\tlet values = mapcolValues.split(\",\");\n\t\tlet vl = pos >= values.length ? \"\" : StringUtils.SafeToString(values[pos]).trim();\n\t\tnodeList = this.m_owner.getNodeList(\"prop\", \"linkedto\", FieldName);\n\t\tfor (let i = 0; i < nodeList.count(); i++) {\n\t\t\t// Para cada nodo\n\t\t\tlet node = nodeList.get(i);\n\t\t\tif (!StringUtils.IsEmptyString(XmlUtils.getNodeAttr(node, \"bit\"))) continue;\n\t\t\tstrFieldTo = XmlUtils.getNodeAttr(node, \"name\");\n\t\t\tthis.put(strFieldTo, vl);\n\t\t} // Para cada nodo\n\t\treturn true;\n\t}\n\n\tprivate async RestoreMappedFields(FieldName: string): Promise<boolean> {\n\t\tlet strSrch = \"\",\n\t\t\tstrFieldFrom = \"\",\n\t\t\tstrFieldTo = \"\",\n\t\t\tstrType = \"\";\n\t\tlet n = 0;\n\t\tlet bSearchDB = false;\n\t\tlet bXlatExist = false;\n\t\t// TAG: 2021022301: Luis Vamos a implementar los map-\n\t\tlet str = this.FieldPropertyValue(FieldName, \"mapcol-values\");\n\t\tif (!TextUtils.isEmpty(str)) return this.RestoreMapColValues(FieldName, str);\n\t\tstr = this.FieldPropertyValue(FieldName, \"mapcol\");\n\t\tif (TextUtils.isEmpty(str)) return true;\n\t\tlet coll: XoneDataCollection = null;\n\t\tlet vl = null,\n\t\t\tvl2 = null;\n\t\tlet obj: XoneDataObject;\n\t\tlet nullObj: XoneDataObject = null; // F11080903: Limpiar los campos enlazados cuando se pone NULL o cero en el campo ID.\n\t\tlet FunctionName = \"CXoneDataObject::RestoreMappedFields\";\n\n\t\t// M09072904: Optimizar el mecanismo de restauracin de campos mapeados.\n\t\t// Si la lista de campos enlazados a este no tiene ningn elemento, entonces\n\t\t// no tenemos nada que hacer\n\t\tlet nodeList = this.m_owner.getNodeList(\"prop\", \"linkedto\", FieldName);\n\t\t// M11092605: Mecanismo para limpiar colecciones en la resolucin de objetos enlazados.\n\t\t// Retain o no retain\n\t\tlet bRetain = StringUtils.ParseBoolValue(this.FieldPropertyValue(FieldName, \"retain\"), true);\n\t\tlet bClearColl = false;\n\t\tif (nodeList.count() > 0) {\n\t\t\t//Es un linkedto\n\t\t\t// De lo contrario se hace el mismo trabajo de siempre.\n\t\t\t//str = FieldPropertyValue(FieldName, \"mapcol\");\n\n\t\t\t//if (!StringUtils.IsEmptyString(str))\n\t\t\t//{// Tiene coleccin mapeada\n\t\t\tif (str.equals(\"##OWNERCOLL##\")) {\n\t\t\t\t// Ownercollection\n\t\t\t\tif (this.m_owner.getOwnerObject() != null) coll = this.m_owner.getOwnerObject().getOwnerCollection();\n\t\t\t\telse {\n\t\t\t\t\t// Si no est en un contents, buscar el default-mapcol\n\t\t\t\t\tstr = this.FieldPropertyValue(FieldName, \"default-mapcol\");\n\t\t\t\t\tif (!StringUtils.IsEmptyString(str)) coll = await this.getOwnerApp().getCollection(str);\n\t\t\t\t} // Si no est en un contents, buscar el default-mapcol\n\t\t\t} // Ownercollection\n\t\t\telse {\n\t\t\t\ttry {\n\t\t\t\t\tcoll = await this.getOwnerApp().getCollection(str);\n\t\t\t\t} catch (exx) {\n\t\t\t\t\tconsole.error(exx);\n\t\t\t\t\tcoll = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (null != coll) {\n\t\t\t\t// La coleccin existe\n\t\t\t\tvl2 = this.GetPropertyValue(FieldName);\n\t\t\t\t// M09072904:\tOptimizar el mecanismo de restauracin de campos mapeados.\n\t\t\t\t// Una pequea optimizacin para casos en los que el valor es nulo y por tanto\n\t\t\t\t// no hay nada que buscar\n\t\t\t\tif (vl2 == null) {\n\t\t\t\t\t// Resetear los campos a NULL y salir\n\t\t\t\t\t// F11080903: Limpiar los campos enlazados cuando se pone NULL o cero en el campo ID.\n\t\t\t\t\t// Optimizar, s pero no tanto...\n\t\t\t\t\treturn await this.DoRestoreMapValues(coll, FieldName, nullObj);\n\t\t\t\t} // Resetear los campos a NULL y salir\n\t\t\t\tstr = this.FieldPropertyValue(FieldName, \"mapfld\");\n\t\t\t\tstrType = coll.FieldPropertyValue(str, \"type\");\n\t\t\t\tif (StringUtils.IsEmptyString(strType)) {\n\t\t\t\t\t// Tratar de inferir el tipo\n\t\t\t\t\t// La clave de la coleccin\n\t\t\t\t\tif (str.equals(coll.getIdFieldName())) strType = coll.getStringKey() ? \"T\" : \"N\";\n\t\t\t\t} // Tratar de inferir el tipo\n\t\t\t\tif (strType.startsWith(\"N\")) {\n\t\t\t\t\t// Convertir\n\t\t\t\t\tn = NumberUtils.SafeToInt(vl2);\n\t\t\t\t\t// M09072904:\tOptimizar el mecanismo de restauracin de campos mapeados.\n\t\t\t\t\t// Una pequea optimizacin para casos en los que el valor es nulo y por tanto\n\t\t\t\t\t// no hay nada que buscar\n\t\t\t\t\tif (n <= 0) {\n\t\t\t\t\t\t// No hay objeto enlazado\n\t\t\t\t\t\t// F11080903: Limpiar los campos enlazados cuando se pone NULL o cero en el campo ID.\n\t\t\t\t\t\t// Restaurar con objeto nulo para vaciar los campos\n\t\t\t\t\t\treturn await this.DoRestoreMapValues(coll, FieldName, nullObj);\n\t\t\t\t\t} // No hay objeto enlazado\n\t\t\t\t} // Convertir\n\t\t\t\telse {\n\t\t\t\t\t// Cadenilla\n\t\t\t\t\tn = -1;\n\t\t\t\t\t// M09072904:\tOptimizar el mecanismo de restauracin de campos mapeados.\n\t\t\t\t\t// Una pequea optimizacin para casos en los que el valor es nulo y por tanto\n\t\t\t\t\t// no hay nada que buscar\n\t\t\t\t\t// F10052504:\tUsar una variable temporal para la conversin en RestoreMappedFields.\n\t\t\t\t\tlet strtmp = StringUtils.SafeToString(vl2);\n\t\t\t\t\tif (StringUtils.IsEmptyString(strtmp)) {\n\t\t\t\t\t\t// No hay objeto\n\t\t\t\t\t\t// F11080903: Limpiar los campos enlazados cuando se pone NULL o cero en el campo ID.\n\t\t\t\t\t\t// Asegurarse que se resetean los campos.\n\t\t\t\t\t\treturn await this.DoRestoreMapValues(coll, FieldName, nullObj);\n\t\t\t\t\t} // No hay objeto\n\t\t\t\t} // Cadenilla\n\n\t\t\t\t// Hay un caso particular en esta cosa y es que se est buscando\n\t\t\t\t// exactamente el objeto propietario...\n\t\t\t\tobj = null;\n\t\t\t\tlet ownercoll: XoneDataCollection;\n\t\t\t\tif (null != (obj = this.m_owner.getOwnerObject())) {\n\t\t\t\t\t// Tiene propietario\n\t\t\t\t\tif (null != (ownercoll = obj.getOwnerCollection())) {\n\t\t\t\t\t\t// Tiene coleccin propietaria\n\t\t\t\t\t\tif (coll.getName().equals(ownercoll.getName())) {\n\t\t\t\t\t\t\t// Puede ser que busquemos el puro, no?\n\t\t\t\t\t\t\tvl = obj.GetPropertyValue(str);\n\t\t\t\t\t\t\tif (n != -1) {\n\t\t\t\t\t\t\t\t// Numrico\n\t\t\t\t\t\t\t\tlet l = NumberUtils.SafeToLong(vl);\n\t\t\t\t\t\t\t\tif (l != n) obj = null;\n\t\t\t\t\t\t\t} // Numrico\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// Estarn en el mismo tipo que si no...\n\t\t\t\t\t\t\t\tif (!vl.equals(vl2)) obj = null;\n\t\t\t\t\t\t\t} // Estarn en el mismo tipo que si no...\n\t\t\t\t\t\t} // Puede ser que busquemos el puro, no?\n\t\t\t\t\t\telse obj = null;\n\t\t\t\t\t} // Tiene coleccin propietaria\n\t\t\t\t\telse obj = null;\n\t\t\t\t} // Tiene propietario\n\t\t\t\t// M09072903:\tProgramar un mecanismo de restauracin de campos para SQLs sin unin.\n\t\t\t\t// Buscar en la coleccin, solamente si el objeto est en memoria.\n\t\t\t\t// Si el objeto no est cargado habr que restaurar con un rowset de toda la vida\n\t\t\t\t// con lo cual evitamos que la coleccin enlazada se llene innecesariamente.\n\t\t\t\tif (obj == null) {\n\t\t\t\t\t// Buscar el objeto para resolver\n\t\t\t\t\tlet b = false;\n\t\t\t\t\tif (coll.getUseObjectsInRestore()) b = true;\n\t\t\t\t\t// Buscamos el objeto en la coleccin, en memoria o donde haga falta\n\t\t\t\t\tobj = await coll.getObject(str, vl2, b, b);\n\t\t\t\t\t// M11092605: Mecanismo para limpiar colecciones en la resolucin de objetos enlazados.\n\t\t\t\t\t// Ver si hay que limpiar la coleccin o no\n\t\t\t\t\tbClearColl = !bRetain;\n\t\t\t\t} // Buscar el objeto para resolver\n\t\t\t\t// Obtiene una lista con los nodos que son de esta propiedad\n\t\t\t\tif (obj != null) {\n\t\t\t\t\t// Algo tiene\n\t\t\t\t\tif (!(await this.DoRestoreMapValues(coll, FieldName, obj))) return false;\n\t\t\t\t} // Algo tiene\n\t\t\t\telse {\n\t\t\t\t\t// Habr que resolver con un rowset\n\t\t\t\t\tif (!coll.getUseObjectsInRestore() && !coll.getSpecial()) {\n\t\t\t\t\t\t// Si se puede buscar como rowset hacerlo\n\t\t\t\t\t\tlet rs = await coll.GetResultSet(str, vl2);\n\t\t\t\t\t\tif (rs == null) return false;\n\t\t\t\t\t\tif (!(await this.DoRestoreMapValues(coll, FieldName, rs))) return false;\n\t\t\t\t\t} // Si se puede buscar como rowset hacerlo\n\t\t\t\t} // Habr que resolver con un rowset\n\t\t\t\t// Idem para los objetos heredados\n\t\t\t\t// Add Tag: Luis esto ya no es necesario, porque el nodelist ya lo da\n\t\t\t\t/*\n                XoneDataCollection parent = m_owner.getParentCollection ();\n                while (parent != null)\n                {// Para cada posible nodo heredado\n                    if (!DoRestoreMapValues(parent, FieldName, obj))\n                        return false;\n                    // Al nivel anterior\n                    parent = parent.getParentCollection ();\n                }// Para cada posible nodo heredado*/\n\t\t\t} // La coleccin existe\n\t\t\telse {\n\t\t\t\t// Error, la coleccin no existe\n\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\tlet sb = this.m_messages.GetMessage(\n\t\t\t\t\tXoneMessageKeys.SYS_MSG_OBJ_RESTOREMAPFLDFAIL_01,\n\t\t\t\t\t\"{0} failed. Cannot get collection '{1}' to restore linked fields for field '{2}'.\"\n\t\t\t\t);\n\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\tsb = sb.replace(\"{1}\", str);\n\t\t\t\tsb = sb.replace(\"{2}\", FieldName);\n\t\t\t\tthrow new XoneGenericException(-3200, sb);\n\t\t\t} // Error, la coleccin no existe\n\t\t\t//}// Tiene coleccin mapeada\n\t\t\t// M09072904: Optimizar el mecanismo de restauracin de campos mapeados.\n\t\t\t// Nodo del propietario\n\t\t\t// Buscar si hay objeto propietario\n\t\t\tif (null == (obj = this.m_owner.getOwnerObject())) {\n\t\t\t\t// No hay objeto propietario\n\t\t\t\t// M11092605: Mecanismo para limpiar colecciones en la resolucin de objetos enlazados.\n\t\t\t\tif (bClearColl) coll.clear(); // Limpiar...\n\t\t\t\t//return true;\n\t\t\t} // No hay objeto propietario\n\t\t\telse {\n\t\t\t\t//Hay objeto propietario\n\t\t\t\tif (!this.m_bIsCreating) obj.RestoreTranslatedValues(this, (str = this.m_owner.getName()), (strFieldTo = FieldName));\n\t\t\t\t// M11092605: Mecanismo para limpiar colecciones en la resolucin de objetos enlazados.\n\t\t\t\tif (bClearColl) coll.clear(); // Limpiamos....\n\t\t\t} //Hay objeto propietario\n\t\t} //Es un linkedto\n\t\t//\n\t\t// Comprobar si es un campo traducido a columna\n\t\tif (!StringUtils.IsEmptyString((str = this.FieldPropertyValue(FieldName, \"xlat\")))) {\n\t\t\t// Est traducido\n\t\t\t// Buscar la coleccin\n\t\t\tcoll = await this.getContents(str);\n\t\t\tif (null != coll) {\n\t\t\t\t// Tiene coleccin\n\t\t\t\t// Ver si hay que buscar en la BD para este contents\n\t\t\t\tbXlatExist = false; // TODO: coll.getXlatExist();\n\t\t\t\tstrFieldFrom = this.FieldPropertyValue(FieldName, \"cmpfield\");\n\t\t\t\tstrSrch = this.FieldPropertyValue(FieldName, \"cmpvalue\");\n\t\t\t\tif (!StringUtils.IsEmptyString(strFieldFrom) && !StringUtils.IsEmptyString(strSrch)) {\n\t\t\t\t\t// Los valores son correctos\n\t\t\t\t\tif (strFieldFrom.equals(\"self\") && strSrch.equals(\"self\")) {\n\t\t\t\t\t\t// Es una comparacin\n\t\t\t\t\t\tif (!coll.getFull() && this.m_lObjectId > 0) coll.loadAll(); // Cargar la coleccin\n\t\t\t\t\t\tobj = await coll.get(0);\n\t\t\t\t\t} // Es una comparacin\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Solo habr uno\n\t\t\t\t\t\tstrType = coll.FieldPropertyValue(strFieldFrom, \"type\");\n\t\t\t\t\t\t// Ahora buscar el objeto basado en esa macro\n\t\t\t\t\t\tvl = await this.GetValueFromString(strSrch, strType);\n\t\t\t\t\t\t// Si el resultado de la evaluacin lleva comillas, quitrselas\n\t\t\t\t\t\tif (typeof vl === \"string\") {\n\t\t\t\t\t\t\t// Comprobar la cadenilla obtenida\n\t\t\t\t\t\t\tstrSrch = vl.toString();\n\t\t\t\t\t\t\tif (strType.equals(\"T\") && strSrch.startsWith(\"'\") && strSrch.endsWith(\"'\"))\n\t\t\t\t\t\t\t\t// F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n\t\t\t\t\t\t\t\tstrSrch = strSrch.substring(1, strSrch.length - 2);\n\t\t\t\t\t\t\tvl = strSrch;\n\t\t\t\t\t\t} // Comprobar la cadenilla obtenida\n\t\t\t\t\t\tif (bXlatExist) bSearchDB = !this.m_bXlatExist;\n\t\t\t\t\t\telse bSearchDB = true;\n\n\t\t\t\t\t\tbSearchDB = !this.m_bXlatExist;\n\t\t\t\t\t\tif (!bSearchDB) {\n\t\t\t\t\t\t\t// Si el objeto est grabado s puede buscar\n\t\t\t\t\t\t\tif (this.m_lObjectId > 0) bSearchDB = true;\n\t\t\t\t\t\t} // Si el objeto est grabado s puede buscar\n\t\t\t\t\t\tobj = await coll.getObject(strFieldFrom, vl, true, bSearchDB);\n\t\t\t\t\t} // Solo habr uno\n\t\t\t\t\tif (obj == null) {\n\t\t\t\t\t\t// Todava puede ser que nos permitan crearlo\n\t\t\t\t\t\tstr = this.FieldPropertyValue(FieldName, \"create\");\n\t\t\t\t\t\tif (StringUtils.ParseBoolValue(str, false)) {\n\t\t\t\t\t\t\t// Crearlo\n\t\t\t\t\t\t\tobj = await coll.CreateObject();\n\t\t\t\t\t\t\tif (null != obj) {\n\t\t\t\t\t\t\t\t// Crear este objeto\n\t\t\t\t\t\t\t\t// Creado\n\t\t\t\t\t\t\t\t// Poner el valor de comparacin\n\t\t\t\t\t\t\t\tthis.m_bIsRestoring = true;\n\t\t\t\t\t\t\t\tif (!strFieldFrom.equals(\"self\")) obj.SetPropertyValue(strFieldFrom, vl);\n\t\t\t\t\t\t\t\tthis.m_bIsRestoring = false;\n\t\t\t\t\t\t\t\t// La bsqueda por ndices se realiza basada en la propiedad anterior, as\n\t\t\t\t\t\t\t\t// que lo adicionamos despus de asignarle valor a la etiqueta\n\t\t\t\t\t\t\t\t// Esta mierda habr que revisarla ms tarde\n\t\t\t\t\t\t\t\tcoll.addItem(obj); // Insertarlo\n\t\t\t\t\t\t\t} // Creado\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// Puede que hubiera moa\n\t\t\t\t\t\t\t\t// Por la causa que sea no se ha creado el objeto, as que habr\n\t\t\t\t\t\t\t\t// que informar al pueblo\n\t\t\t\t\t\t\t\tstrFieldFrom = FieldName;\n\t\t\t\t\t\t\t\tvl = this.get(strFieldFrom); // El valor que acaban de poner\n\t\t\t\t\t\t\t\tstrFieldTo = this.DevelopObjectValue(vl);\n\t\t\t\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_OBJ_RESTOREMAPFLDFAIL_02, \"{0} failed. Field '{1}' Value: {2}\");\n\t\t\t\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\t\t\t\tsb = sb.replace(\"{1}\", strFieldFrom);\n\t\t\t\t\t\t\t\tsb = sb.replace(\"{2}\", strFieldTo);\n\t\t\t\t\t\t\t\tthrow new XoneGenericException(-9000, sb);\n\t\t\t\t\t\t\t} // Puede que hubiera moa\n\t\t\t\t\t\t} // Crearlo\n\t\t\t\t\t} // Todava puede ser que nos permitan crearlo\n\n\t\t\t\t\tif (obj != null) {\n\t\t\t\t\t\t// Lo ha encontrado\n\t\t\t\t\t\t// Asignar\n\t\t\t\t\t\tstr = FieldName;\n\t\t\t\t\t\t// Comprobar la validez de los campos\n\t\t\t\t\t\tif (StringUtils.IsEmptyString((strFieldTo = this.FieldPropertyValue(str, \"targetfield\")))) {\n\t\t\t\t\t\t\t// Campo incorrecto\n\t\t\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t\t\tlet sb = this.m_messages.GetMessage(\n\t\t\t\t\t\t\t\tXoneMessageKeys.SYS_MSG_OBJ_NOXLATTARGET,\n\t\t\t\t\t\t\t\t\"{0} failed. Field '{1}' has no 'targetfield' or it's misspelled.\"\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\t\t\tsb = sb.replace(\"{1}\", strFieldTo);\n\t\t\t\t\t\t\tthrow new XoneGenericException(-8888, sb);\n\t\t\t\t\t\t} // Campo incorrecto\n\t\t\t\t\t\t// Ver si el campo destino existe en el objeto derivado\n\t\t\t\t\t\tif (!obj.FieldExists(strFieldTo)) {\n\t\t\t\t\t\t\t// Error\n\t\t\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t\t\tlet sb = this.m_messages.GetMessage(\n\t\t\t\t\t\t\t\tXoneMessageKeys.SYS_MSG_OBJ_XLATMISSINGFLD,\n\t\t\t\t\t\t\t\t\"{0} failed. Field '{1}' is missing in derived object.\"\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\t\t\tsb = sb.replace(\"{1}\", strFieldTo);\n\t\t\t\t\t\t\tthrow new XoneGenericException(-8889, sb);\n\t\t\t\t\t\t} // Error\n\t\t\t\t\t\tvl = this.get(str);\n\t\t\t\t\t\tobj.put(strFieldTo, vl);\n\t\t\t\t\t\t//  Hay un caso particular de actualizacin de campos traducidos que es cuando el\n\t\t\t\t\t\t//  campo de bsqueda es el mismo campo que ha cambiado de valor. En este caso es\n\t\t\t\t\t\t//  necesario invocar la actualizacin de campos\n\t\t\t\t\t\t// TODO: Luis\n\t\t\t\t\t\t// if (strFieldTo.equals(this.FieldPropertyValue(str, \"cmpfield\")))\n\t\t\t\t\t\t//     RestoreTranslatedValues(obj, str = this.FieldPropertyValue(str, \"xlat\"), strFieldTo);\n\t\t\t\t\t} // Lo ha encontrado\n\t\t\t\t} // Los valores son correctos\n\t\t\t} // Tiene coleccin\n\t\t} // Est traducido\n\t\treturn true;\n\t}\n\n\t/**\n\t * Restaura los valores de los campos traducidos (xlat)\n\t * @param Source\t\t\tObjeto del cual se traen los valores traducidos.\n\t * @param Collection\t\tColeccin de la cual se han trado los valores.\n\t * @param TargetField\t\tNombre del campo que se trae del objeto enlazado.\n\t * @return\t\t\t\t\tDevuelve TRUE si la actualizacin de todos los campos es correcta.\n\t * @throws Exception\n\t */\n\tprivate async RestoreTranslatedValues(Source: XoneDataObject, Collection: string, TargetField: string): Promise<boolean> {\n\t\tlet propNode: XmlNode;\n\t\tlet nodeList: XmlNodeList, contList: XmlNodeList;\n\t\tlet str = \"\",\n\t\t\tstrFieldTo = \"\",\n\t\t\tstrFieldFrom = \"\",\n\t\t\tstrCnt = \"\",\n\t\t\tstrCmpType = \"\";\n\t\tlet vl: any, vl1: any;\n\t\tlet bUseThis = false;\n\n\t\t// Las propiedades de la coleccin\n\t\tif (Source == null || this.m_bIsRestoring) return true;\n\t\t// Buscar los contents que usen esta coleccin\n\t\tlet xlrNode = this.m_owner.getNode(\"xlatrefresh\");\n\t\tif (xlrNode == null) return true; // Al carajo, no hay xlatrefresh\n\t\tcontList = this.m_owner.getNodeList(\"contents\", \"src\", Collection);\n\t\t// Puede haber ms de un contents que use esta coleccin\n\t\tfor (let i = 0; i < contList.count(); i++) {\n\t\t\t// Coger cada una de las colecciones\n\t\t\tlet node = contList.get(i);\n\t\t\t// Buscar los nodos que cambian\n\t\t\tstrCnt = XmlUtils.getNodeAttr(node, \"name\");\n\t\t\t// Este es el nombre del contents, que es el que sale aqu\n\t\t\t//////str = string.Format(\"mp:xlatrefresh/mp:action[@coll='{0}' and @changefld='{1}']\", strCnt, TargetField);\n\t\t\tnodeList = xlrNode.SelectNodes(\"action\", \"coll\", strCnt);\n\t\t\tfor (let j = 0; j < nodeList.count(); j++) {\n\t\t\t\t// Para cada nodo\n\t\t\t\tlet xrnode = nodeList.get(j);\n\t\t\t\tstr = XmlUtils.getNodeAttr(xrnode, \"changefld\");\n\t\t\t\tif (!str.equals(TargetField)) continue; // Este nos lo saltamos\n\t\t\t\t// Ver si el objeto fuente es el apropiado\n\t\t\t\t//////str = string.Format(\"mp:prop[@name='{0}']\", strFieldTo = CXmlUtils.GetNodeAttr(xrnode, \"targetfld\"));\n\t\t\t\tstrFieldTo = XmlUtils.GetNodeAttr(xrnode, \"targetfld\");\n\t\t\t\tpropNode = this.m_owner.GetNode(\"prop\", \"name\", strFieldTo);\n\t\t\t\tXmlUtils.GetNodeAttr(propNode, \"type\");\n\t\t\t\tif (StringUtils.IsEmptyString((strFieldFrom = XmlUtils.GetNodeAttr(propNode, \"cmpfield\")))) continue; // Error\n\t\t\t\tif (!strFieldFrom.equals(\"self\")) {\n\t\t\t\t\t// Hay que comparar\n\t\t\t\t\tstr = XmlUtils.GetNodeAttr(propNode, \"cmpvalue\");\n\t\t\t\t\tstrCmpType = Source.FieldPropertyValue(strFieldFrom, \"type\");\n\t\t\t\t\tvl = await this.GetValueFromString(str, strCmpType);\n\t\t\t\t\t//  Si el valor es una cadena, debe quitar las comillas porque va a usarlo para\n\t\t\t\t\t//  comparar. Se ve que esto no se haba hecho nunca\n\t\t\t\t\tif (typeof vl === \"string\") {\n\t\t\t\t\t\t// Cadena\n\t\t\t\t\t\tstr = vl.toString();\n\t\t\t\t\t\tif (str.charAt(0) == \"'\" && str.charAt(str.length - 1) == \"'\") {\n\t\t\t\t\t\t\t// Comprobar\n\t\t\t\t\t\t\tif (str.length > 2) str = str.substring(1, str.length - 2);\n\t\t\t\t\t\t\telse str = \"\";\n\t\t\t\t\t\t} // Comprobar\n\t\t\t\t\t\tvl = str;\n\t\t\t\t\t} // Cadena\n\t\t\t\t\t// Ver si es este objeto\n\t\t\t\t\tvl1 = Source.GetPropertyValue(strFieldFrom);\n\t\t\t\t\tstr = vl1.getClass().getName().toLowerCase();\n\t\t\t\t\tif (str.equals(\"int\") || str.equals(\"byte\")) vl1 = NumberUtils.SafeToLong(vl1);\n\t\t\t\t\telse if (str.equals(\"single\") || str.equals(\"decimal\")) vl1 = NumberUtils.SafeToDouble(vl1);\n\t\t\t\t\tbUseThis = vl.equals(vl1);\n\t\t\t\t} // Hay que comparar\n\t\t\t\telse bUseThis = true;\n\t\t\t\t// Si tiene que usar este...\n\t\t\t\tif (bUseThis) {\n\t\t\t\t\t// Lo tiene que usar\n\t\t\t\t\tstrFieldFrom = XmlUtils.GetNodeAttr(xrnode, \"sourcefld\");\n\t\t\t\t\tif (Source != null) vl = Source.get(strFieldFrom);\n\t\t\t\t\telse vl = null;\n\t\t\t\t\tthis.put(strFieldTo, vl);\n\t\t\t\t} // Lo tiene que usar\n\t\t\t} // Para cada nodo\n\t\t} // Coger cada una de las colecciones\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Devuelve un valor a partir de una cadena y un identificador de tipo.\n\t * @param StringValue\t\tValor representado en forma de cadena.\n\t * @param Type\t\t\t\tIdentificador de tipo XONE usado para convertir el valor.\n\t * @param UseDatemask\t\tMscara de fecha a usar para formatear la cadena. NULL para usar el valor por defecto.\n\t * @return\t\t\t\t\tDevuelve el valor ya convertido segn el tipo de datos.\n\t * @throws XoneGenericException\n\t */\n\tpublic async GetValueFromString(StringValue: string, Type: string, UseDatemask?: string): Promise<string> {\n\t\tlet dt = Calendar.getInstance();\n\t\tlet str = \"\",\n\t\t\tstrSysDateMask = \"\";\n\t\tlet vl: any = null;\n\t\tlet strDay = \"\",\n\t\t\tstrMonth = \"\",\n\t\t\tstrYear = \"\";\n\t\tlet nFormat = 0;\n\n\t\ttry {\n\t\t\tlet strVal = StringValue;\n\t\t\t// Cadena vaca, NULL y palca\n\t\t\tif (StringUtils.IsEmptyString(strVal)) return strVal;\n\t\t\t// Macros primeramente\n\t\t\tif (strVal.equals(\"##NULL##\") || strVal.equals(\"##EMPTY##\")) return null; // Simplemente a NULL o EMPTY\n\t\t\t// En funcin del tipo\n\t\t\tif (StringUtils.IsEmptyString(Type)) Type = \"T\";\n\t\t\telse {\n\t\t\t\t// Caso especial\n\t\t\t\tif (Type.equals(\"type\")) Type = \"T\"; // Asumo texto\n\t\t\t} // Caso especial\n\t\t\t// F13061905: Problemas de separadores y delimitadores en GetValueFromString.\n\t\t\t// Cambiar este chequeo porque podra estar mal...\n\t\t\tif (strVal.startsWith(\"'\") && strVal.endsWith(\"'\") && strVal.length >= 2) strVal = strVal.substring(1, strVal.length - 1);\n\t\t\t// Valores especiales para fecha, hora y dems\n\t\t\tif (strVal.equals(\"##NOW##\") || strVal.equals(\"##NOW_NOTIME##\") || strVal.equals(\"##NOW_TIME##\"))\n\t\t\t\tif (Type.charAt(0) == \"D\") {\n\t\t\t\t\t// Fecha normal\n\t\t\t\t\tif (strVal.equals(\"##NOW##\") || strVal.equals(\"##NOW_NOTIME##\")) {\n\t\t\t\t\t\t// No lleva hora\n\t\t\t\t\t\tObjUtils.ZeroCalendarTime(dt);\n\t\t\t\t\t} // No lleva hora\n\t\t\t\t\tvl = dt;\n\t\t\t\t} // Fecha normal\n\t\t\t\telse if (Type.equals(\"TD\")) {\n\t\t\t\t\t// Fecha AS\n\t\t\t\t\tvl = String.format(\"%04d%02d%02d\", dt.get(Calendar.YEAR), dt.get(Calendar.MONTH), dt.get(Calendar.DAY_OF_MONTH));\n\t\t\t\t} // Fecha AS\n\t\t\t//\n\t\t\t// Macros para partes de fecha\n\t\t\tif (strVal.equals(\"##DAY##\")) vl = dt.get(Calendar.DAY_OF_MONTH);\n\t\t\tif (strVal.equals(\"##MONTH##\")) vl = dt.get(Calendar.MONTH);\n\t\t\tif (strVal.equals(\"##YEAR##\")) vl = dt.get(Calendar.YEAR);\n\t\t\t// Si no hay valor, sustituimos las macros y tratamos de hacer algo con esto\n\t\t\tif (vl == null) {\n\t\t\t\t// No ha asignado nada todava\n\t\t\t\t// Sustituir macros\n\t\t\t\tif (strVal.contains(\"##\")) strVal = this.PrepareSqlString(strVal);\n\t\t\t\t// M11011001:\tIncluir macros globales y evaluacin de dichas macros para IMEI y dems.\n\t\t\t\t// Sustituir macros a nivel de coleccin\n\t\t\t\tif (strVal.contains(\"##\")) strVal = await this.m_owner.EvaluateAllMacros(strVal);\n\t\t\t\t//TODO 31/05/2016 Juan Carlos\n\t\t\t\t//AT no funcionaba en los setval, es un texto normal, se debe tratar como T.\n\t\t\t\t//06/06/2016 PH y WEB tambien.\n\t\t\t\t//10/09/2020 Turno para el type IMG\n\t\t\t\tif (Type.startsWith(\"T\") || Type.equals(\"AT\") || Type.equals(\"PH\") || Type.equals(\"WEB\") || Type.equals(\"IMG\")) {\n\t\t\t\t\t// Texto\n\t\t\t\t\tif (strVal.equals(\"''\")) strVal = \"\";\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Quitar las comillas\n\t\t\t\t\t\tif (strVal.startsWith(\"'\") && strVal.endsWith(\"'\") && strVal.length > 1) {\n\t\t\t\t\t\t\t//TODO ADD TAG Juan Carlos Bugfix, antes no quitaba la comilla inicial.\n\t\t\t\t\t\t\tstrVal = strVal.substring(1, strVal.length - 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t} // Quitar las comillas\n\t\t\t\t\tvl = strVal;\n\t\t\t\t} // Texto\n\t\t\t\tif (Type.charAt(0) == \"N\") {\n\t\t\t\t\t// Numrico\n\t\t\t\t\t// Valor\n\t\t\t\t\tif (strVal.equals(\"NULL\")) vl = null;\n\t\t\t\t\telse {\n\t\t\t\t\t\t// No Nulo\n\t\t\t\t\t\t// El NC es un caso especial\n\t\t\t\t\t\tif (Type.equals(\"NC\")) {\n\t\t\t\t\t\t\t// Comprobar posibles casos de cadenas de valores\n\t\t\t\t\t\t\tif (strVal.equals(\"on\") || strVal.equals(\"1\") || strVal.equals(\"yes\") || strVal.equals(\"true\")) vl = 1;\n\t\t\t\t\t\t\telse vl = 0;\n\t\t\t\t\t\t} // Comprobar posibles casos de cadenas de valores\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// Numrico normal\n\t\t\t\t\t\t\tif (Type.length == 1) {\n\t\t\t\t\t\t\t\t// Los errores de conversin nos los tragamos\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tvl = NumberUtils.SafeToLong(strVal); // Entero\n\t\t\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t\t\tvl = 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} // Los errores de conversin nos los tragamos\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// Los errores de conversin nos los tragamos\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tvl = NumberUtils.SafeToDouble(strVal); // Decimal\n\t\t\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t\t\tvl = 0.0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} // Los errores de conversin nos los tragamos\n\t\t\t\t\t\t} // Numrico normal\n\t\t\t\t\t} // No Nulo\n\t\t\t\t} // Numrico\n\t\t\t\tif (Type.startsWith(\"D\")) {\n\t\t\t\t\t// Fecha\n\t\t\t\t\tstr = strVal.trim();\n\t\t\t\t\tif (!StringUtils.IsEmptyString(str)) {\n\t\t\t\t\t\t// Tiene valor\n\t\t\t\t\t\tvl = strVal;\n\t\t\t\t\t\tif (strVal.equals(\"NULL\")) {\n\t\t\t\t\t\t\t// NULL\n\t\t\t\t\t\t\tvl = null;\n\t\t\t\t\t\t} // NULL\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// Si es una fecha, ver si el datemask es diferente\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t// Comprobar si son diferentes\n\t\t\t\t\t\t\t// Si el datemask que se pasa como parmetro es nulo, usamos el de la conexin\n\t\t\t\t\t\t\tlet strDatemask = UseDatemask;\n\t\t\t\t\t\t\tif (StringUtils.IsEmptyString(strDatemask)) strDatemask = this.m_owner.getConnection().getDatemask();\n\t\t\t\t\t\t\t// Ver si est normalizado...\n\t\t\t\t\t\t\tif (strDatemask.startsWith(\"#\")) strDatemask = strDatemask.substring(2, strDatemask.length - 2);\n\t\t\t\t\t\t\tnFormat = strDatemask.equals(\"mdy\") ? 0 : strDatemask.equals(\"dmy\") ? 1 : 2;\n\t\t\t\t\t\t\tlet strComponents = strVal.split(\"/\");\n\t\t\t\t\t\t\tswitch (\n\t\t\t\t\t\t\t\tnFormat // Primer elemento\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\t\tstrMonth = strComponents[0];\n\t\t\t\t\t\t\t\t\tstrDay = strComponents[1];\n\t\t\t\t\t\t\t\t\tstrYear = strComponents[2];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t\t\tstrDay = strComponents[0];\n\t\t\t\t\t\t\t\t\tstrMonth = strComponents[1];\n\t\t\t\t\t\t\t\t\tstrYear = strComponents[2];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t\tstrYear = strComponents[0];\n\t\t\t\t\t\t\t\t\tstrMonth = strComponents[1];\n\t\t\t\t\t\t\t\t\tstrDay = strComponents[2];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} // Primer elemento\n\t\t\t\t\t\t\t// Armar la fecha segn lo que espera la mquina\n\t\t\t\t\t\t\tstrSysDateMask = this.getOwnerApp().getSysDatemask();\n\t\t\t\t\t\t\tnFormat = strSysDateMask.equals(\"mdy\") ? 0 : strSysDateMask.equals(\"dmy\") ? 1 : 2;\n\t\t\t\t\t\t\tswitch (\n\t\t\t\t\t\t\t\tnFormat // Segn el formato del sistema\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\t\tstr = strMonth + \"/\" + strDay + \"/\" + strYear;\n\t\t\t\t\t\t\t\t\tif (strComponents.length > 3) str += \" \" + strComponents[3];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t\t\tstr = strDay + \"/\" + strMonth + \"/\" + strYear;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t\tstr = strYear + \"/\" + strMonth + \"/\" + strDay;\n\t\t\t\t\t\t\t\t\tif (strComponents.length > 3) str += \" \" + strComponents[3];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t} // Segn el formato del sistema\n\t\t\t\t\t\t\tvl = StringUtils.ParseDateString(this.getOwnerApp().currentContext(), str);\n\t\t\t\t\t\t} // Si es una fecha, ver si el datemask es diferente\n\t\t\t\t\t} // Tiene valor\n\t\t\t\t} // Fecha\n\t\t\t} // No ha asignado nada todava\n\n\t\t\treturn vl;\n\t\t} catch (ex) {\n\t\t\tthrow new XoneGenericException(-7000, ex);\n\t\t}\n\t}\n\n\tprivate postNewValue(FieldName: string, Value: string) {\n\t\t// TODO: Luis\n\t}\n\n\tprivate postNewFieldProperty(node: string, name: string, AttrName: string, AttrValue: any, addToEvaluated: boolean = false) {\n\t\tUITransform.setLayoutFieldPropertyValue(this.m_reactLayout, node, name, AttrName, AttrValue);\n\t}\n\n\tPutBitmappedProperty(FieldName: string, Value: any) {\n\t\t// Amiyares: 30/06/2021\n\t\tconst linked = this.getFieldPropertyValue(FieldName, \"linkedto\");\n\t\tif (this[FieldName] === (Value === 1)) return;\n\t\tconst bit = Number(this.getFieldPropertyValue(FieldName, \"bit\")) - 1;\n\t\tthis[linked] &= ~(1 << bit);\n\t\tif (Value === 1) this[linked] |= 1 << bit;\n\t\tthis.setNormalValue(FieldName, Value);\n\t}\n\n\tpublic getParent(): XoneDataCollection {\n\t\treturn this.m_owner;\n\t}\n\n\tclone() {}\n\n\tgetContentsCount() {\n\t\treturn this.m_lstContents.length;\n\t}\n\n\tgetFieldPropertyValue(propiedad, atributo) {\n\t\treturn this.FieldPropertyValue(propiedad, atributo);\n\t}\n\n\tgetOldItem(propiedad) {}\n\n\tsetFieldPropertyValue(FieldName: string, AttrName: string, Value: string, addToEvaluated: boolean = false) {\n\t\tlet strKey = FieldName + \":\" + AttrName;\n\n\t\tif (Value != null) {\n\t\t\tif (!Value.startsWith(\"##FLD_\")) {\n\t\t\t\tthis.m_lstCachedAttributes.put(strKey, Value);\n\t\t\t}\n\t\t} else {\n\t\t\t// Lo quitamos si existe\n\t\t\tif (this.m_lstCachedAttributes.containsKey(strKey)) this.m_lstCachedAttributes.delete(strKey);\n\t\t} // Lo quitamos si existe\n\t\tif (addToEvaluated) this.m_owner.getOwnerApp().addEvaluatedAttributesList(this.m_owner.getName(), strKey);\n\n\t\tthis.postNewFieldProperty(Utils.PROP_NAME, FieldName, AttrName, Value, addToEvaluated);\n\t}\n\n\tpublic setNodePropertyValue(node: string, name: string, AttrName: string, AttrValue: string) {\n\t\tUITransform.setLayoutFieldPropertyValue(this.m_reactLayout, node, name, AttrName, AttrValue);\n\t\t// if (m_owner == null) {\n\t\t//     return;\n\t\t// }\n\t\t// m_owner.SetNodePropertyValue(NodeName, ItemName, AttrName, sValue);\n\t}\n\n\tpublic getName(): string {\n\t\tlet str = \"\";\n\n\t\ttry {\n\t\t\t// Aqu usamos un StringBuilder para optimizar un poco esto.\n\t\t\tlet bld = new StringBuilder(this.getOwnerCollection().getName());\n\t\t\tbld.append(\".\");\n\t\t\tlet sID = this.GetObjectIdString();\n\t\t\tif (TextUtils.isEmpty(sID)) bld.append(this.getOwnerCollection().getObjectIndex(this));\n\t\t\telse bld.append(sID);\n\t\t\tstr = bld.toString();\n\t\t} catch (e) {\n\t\t\tstr = \"DataObject.0\";\n\t\t}\n\t\treturn str;\n\t}\n\n\tsetOldItem(propiedad, valor) {}\n\n\tsetOwnerColl() {}\n\n\tsetValue(value) {}\n\n\tpublic get(FieldName: string): any {\n\t\treturn this.GetItem(FieldName);\n\t}\n\n\tgetDirty(): boolean {\n\t\treturn this.m_bDirty;\n\t}\n\n\tsetDirty(arg0: boolean) {\n\t\tthis.m_bDirty = arg0;\n\t}\n\n\tgetObjectIndex(): number {\n\t\treturn this.getOwnerCollection().getObjectIndex(this);\n\t}\n\n\t/**\n\t * @param sVariableName Nombre de la variable cuyo valor se quiere leer.\n\t * @return Devuelve la variable cuyo nombre se pasa como parmetro. Si la variable no existe devuelve NULL.\n\t */\n\n\tprivate SafeGetVariableList(): Hashtable<string, Object> {\n\t\tif (this.m_lstVariables != null) return this.m_lstVariables;\n\t\treturn (this.m_lstVariables = new Hashtable<string, Object>());\n\t}\n\n\tpublic getVariables(sVariableName): any {\n\t\treturn this.getVariable(sVariableName);\n\t}\n\n\t/**\n\t * Devuelve la variable cuyo nombre se pasa como parmetro.\n\t *\n\t * @param sVariableName Nombre de la variable cuyo valor se quiere conocer.\n\t * @return Devuelve el valor de la variable o NULL si esta no est definida.\n\t */\n\n\tpublic getVariable(sVariableName: string): any {\n\t\t// A04032903: <onchange> pudiera ser comn para todos los campos\n\t\tif (sVariableName.equals(\"##CHGFIELD##\")) {\n\t\t\treturn this.m_strChangeField;\n\t\t}\n\t\t// Buscar en lista...\n\t\tif (!this.SafeGetVariableList().containsKey(sVariableName)) {\n\t\t\treturn null;\n\t\t}\n\t\t// K11011201:\tModificaciones en el tratamiento de las variables.\n\t\treturn this.SafeGetVariableList().get(sVariableName);\n\t}\n\n\t/**\n\t * Asigna valor a la variable cuyo nombre se pasa como parmetro.\n\t * @param VarName\t\tNombre de la variable a la que se quiere asignar valor.\n\t * @param value\t\t\tValor que se quiere asignar a la variable.\n\t */\n\tpublic putVariables(sVariableName: string, value: any): void {\n\t\tthis.setVariable(sVariableName, value);\n\t}\n\n\t/**\n\t * Asigna valor a la variable cuyo nombre se pasa como parmetro.\n\t * K11011201:\tModificaciones en el tratamiento de las variables.\n\t * Poner esto pblico\n\t *\n\t * @param sVariableName Nombre de la variable que se quiere asignar.\n\t * @param value         Valor que se quiere asignar a la variable.\n\t */\n\tpublic setVariables(sVariableName: string, value: Object): void {\n\t\tthis.setVariable(sVariableName, value);\n\t}\n\n\t/**\n\t * Asigna valor a la variable cuyo nombre se pasa como parmetro.\n\t * K11011201:\tModificaciones en el tratamiento de las variables.\n\t * Poner esto pblico\n\t *\n\t * @param sVariableName Nombre de la variable que se quiere asignar.\n\t * @param value         Valor que se quiere asignar a la variable.\n\t */\n\n\tpublic setVariable(sVariableName: string, value: Object): void {\n\t\t// F12042505: Si se pasa NULL a SetVariables hay moa con las listas de valores.\n\t\tif (value == null) {\n\t\t\tif (this.SafeGetVariableList().containsKey(sVariableName)) {\n\t\t\t\tthis.SafeGetVariableList().delete(sVariableName);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.SafeGetVariableList().put(sVariableName, value);\n\t\t}\n\t}\n\n\t/**\n\t * F11070701: Modificaciones para solucionar los enlaces y grabacin con claves no numricas.\n\t *\n\t * @return\tDevuelve TRUE si el objeto es nuevo (recin creado y no se ha cargado ni grabado)\n\t */\n\tpublic IsNew(): boolean {\n\t\t// M11080901: El mecanismo para nuevos objetos se puede flexibilizar un poco.\n\t\t// Esto podra ser diferente en funcin de si es autonumrico o no.\n\t\tlet bNew = this.m_bNewObject;\n\t\t// Vale, si el objeto no es nuevo, entonces no hay nada ms que mirar\n\t\tif (!bNew) return bNew;\n\t\t// Si el objeto lleva clave de cadena el funcionamiento tambin es el de siempre.\n\t\tif (this.m_owner.getStringKey()) return bNew;\n\t\t// Ahora estamos en onda numrica, puede ser manual o no.\n\t\ttry {\n\t\t\tlet vl = this.GetPropertyValue(this.m_owner.getIdFieldName());\n\t\t\tlet l = NumberUtils.SafeToLong(vl);\n\t\t\tif (l <= 0) return bNew;\n\t\t\t// Si el objeto tiene valor en el campo ID en principio tenemos una moa\n\t\t\t// pero si el sistema es autonumrico entonces podemos considerar que el objeto no\n\t\t\t// es nuevo.\n\t\t\tlet b = StringUtils.ParseBoolValue(this.m_owner.CollPropertyValue(\"identity-key\"), true);\n\t\t\t// Si nos dicen que el campo de ID no es autonumrico entonces cambiarlo no cambia la condicin del objeto\n\t\t\tif (!b) return bNew;\n\t\t\t// Si el campo ID tiene valor y es autonumrico entonces el objeto no es nuevo.\n\t\t\treturn false;\n\t\t} catch (e) {\n\t\t\treturn bNew;\n\t\t}\n\t}\n\n\tisNew(): boolean {\n\t\treturn this.IsNew();\n\t}\n\n\tpublic async loadFromJson(jsonObject: any): Promise<XoneDataObject> {\n\t\tconst FunctionName = \"loadFromJson\";\n\t\t// Utils.CheckNullParameters(FunctionName, FunctionParams);\n\t\t// Utils.CheckIncorrectParamCount(FunctionName, FunctionParams, 1);\n\t\t// let jsonObject = FunctionParams[0];\n\t\tif (typeof jsonObject === \"string\") {\n\t\t\tjsonObject = JSON.parse(jsonObject);\n\t\t}\n\t\t// if (FunctionParams[0] instanceof Object) {\n\t\t//     String sJson = RhinoUtils.toJson(FunctionParams[0], false);\n\t\t//     jsonObject = new JSONObject(sJson);\n\t\t// } else if (FunctionParams[0] instanceof JSONObject) {\n\t\t//     jsonObject = (JSONObject) FunctionParams[0];\n\t\t// } else {\n\t\t//     String sJsonObject = StringUtils.SafeToString(FunctionParams[0]);\n\t\t//     jsonObject = new JSONObject(sJsonObject);\n\t\t// }\n\t\tawait this.loadFromJsonObject(this, jsonObject);\n\t\treturn this;\n\t}\n\n\tprivate async loadFromJsonObject(dataObject: XoneDataObject, jsonObject: any): Promise<void> {\n\t\tfor (let sPropertyName in jsonObject) {\n\t\t\tlet propertyValue = jsonObject[sPropertyName];\n\t\t\tif (Array.isArray(propertyValue)) {\n\t\t\t\tlet contentCollection = await dataObject.getContents(sPropertyName);\n\t\t\t\tif (contentCollection == null) {\n\t\t\t\t\tthrow new Exception(\"loadFromJson(): Content collection \" + sPropertyName + \" not found\");\n\t\t\t\t}\n\t\t\t\tawait this.loadFromJsonArray(contentCollection, propertyValue);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tdataObject[sPropertyName] = propertyValue;\n\t\t}\n\t\t// Iterator < String > iterator = jsonObject.keys();\n\t\t// while (iterator.hasNext()) {\n\t\t//     String sPropertyName = iterator.next();\n\t\t//     Object propertyValue = jsonObject.get(sPropertyName);\n\t\t//     if (propertyValue instanceof JSONArray) {\n\t\t//         XoneDataCollection contentCollection = dataObject.Contents(sPropertyName);\n\t\t//         if (contentCollection == null) {\n\t\t//             throw new Exception(\"loadFromJson(): Content collection \" + sPropertyName + \" not found\");\n\t\t//         }\n\t\t//         loadFromJsonArray(contentCollection, (JSONArray) propertyValue);\n\t\t//         continue;\n\t\t//     }\n\t\t//     dataObject.put(sPropertyName, propertyValue);\n\t\t// }\n\t}\n\n\tprivate async loadFromJsonArray(collection: XoneDataCollection, jsonArray: any): Promise<void> {\n\t\tfor (let i = 0; i < jsonArray.length(); i++) {\n\t\t\tlet itemDataObject = new XoneDataObject(collection);\n\t\t\tawait this.loadFromJsonObject(itemDataObject, jsonArray[i]);\n\t\t\t// let item = jsonArray[i];\n\t\t\t// Iterator < String > iterator = item.keys();\n\t\t\t// while (iterator.hasNext()) {\n\t\t\t//     String sPropertyName = iterator.next();\n\t\t\t//     Object propertyValue = item.get(sPropertyName);\n\t\t\t//     if (propertyValue instanceof JSONArray) {\n\t\t\t//         XoneDataCollection contentCollection = itemDataObject.Contents(sPropertyName);\n\t\t\t//         if (contentCollection == null) {\n\t\t\t//             throw new Exception(\"loadFromJson(): Content collection \" + sPropertyName + \" not found\");\n\t\t\t//         }\n\t\t\t//         loadFromJsonArray(contentCollection, (JSONArray) propertyValue);\n\t\t\t//         continue;\n\t\t\t//     }\n\t\t\t//     itemDataObject.put(sPropertyName, propertyValue);\n\t\t\t// }\n\t\t\tcollection.addItem(itemDataObject, i);\n\t\t}\n\t}\n\n\tbind(Prop, Evento, Funcion) {}\n\n\tgetObjectItem(indice) {}\n\n\tgetPropertyGroup(propiedad) {}\n\n\tgetPropertyTitle(propiedad) {}\n\n\t/**\n\t * @return\t\tDevuelve el nombre del objeto de datos en el cual se ejecutan las acciones de escritura en la fuente de datos.\n\t */\n\tpublic getFixedUpdateObjectName(): string {\n\t\treturn this.m_owner.getFixedUpdateObjectName();\n\t}\n\n\t/**\n\t * @return\t\tDevuelve una cadena con el nombre del objeto de datos ya preparado para usarse en una sentencia SQL.\n\t */\n\tpublic getFixedObjectName(): string {\n\t\treturn this.m_owner.getFixedObjectName();\n\t}\n\n\t//#region Grabar el objeto\n\t/**\n\t * Graba el objeto en la fuente de datos de la coleccin siemrpe que esta permita escritura\n\t * @return\t\tDevuelve TRUE si el objeto se graba correctamente, as como todos sus contents.\n\t * @throws Exception\n\t */\n\tpublic async save(): Promise<boolean> {\n\t\tlet strCmd = \"\",\n\t\t\tstrFields = \"\",\n\t\t\tstr = \"\",\n\t\t\tstrTmp = \"\",\n\t\t\tstrChkID = \"\",\n\t\t\tstrPK = \"\";\n\t\tlet strRowID = \"\",\n\t\t\tstrIDString = this.GetObjectIdString(true);\n\t\tlet rs: IResultSet = null;\n\t\tlet bUpdate = true,\n\t\t\tbRegister = false;\n\t\tlet lPossibleKey = 0;\n\t\tlet bNeedRowID = true;\n\t\tlet bNewObj = false;\n\t\tif (StringUtils.ParseBoolValue((str = this.m_owner.CollPropertyValue(\"readonly\")), false)) {\n\t\t\t// Pa otro momento\n\t\t\tthis.m_bReadOnly = true;\n\t\t\treturn true; // Read Only no se graba\n\t\t} // Pa otro momento\n\t\t// A11092603: Permitir que la maquinaria utilice transacciones si la conexin lo permite.\n\t\t// Comprobar si transaccionamos o no...\n\t\tlet bTransacted = StringUtils.ParseBoolValue(this.m_owner.CollPropertyValue(\"transactions\"), false);\n\t\t// Tenemos que traer esto pac porque lo necesitamos a nivel de transacciones\n\t\tlet conn = this.m_owner.getConnection();\n\n\t\tlet FunctionName = \"CXoneDataObject::Save\";\n\n\t\t// Averiguar si este objeto se puede grabar\n\t\t// Este chequeo se debe hacer antes de las operaciones que siguen. Es ms\n\t\t// eficiente y no se pierde tiempo haciendo operaciones por gusto si de entrada\n\t\t// el objeto es read-only\n\t\tif (this.m_bReadOnly || this.m_owner.getSpecial()) return true;\n\t\t// Si es un objeto derivado, y el propietario no est\n\t\t// grabado, no se graba\n\t\tif (this.m_owner.getOwnerObject() != null && this.m_bDependent) {\n\t\t\t// Ver si se ha grabado\n\t\t\t// F11070701: Modificaciones para solucionar los enlaces y grabacin con claves no numricas.\n\t\t\t// Si se trata de un objeto nuevo y el propietario tambin lo es... no grabamos nico...\n\t\t\tif (this.m_owner.getOwnerObject().IsNew()) return true;\n\t\t\t/*\n            strPK = m_owner.getOwnerObject().GetObjectIdString();\n            // F10082402:\tProtegerse de los runtimes que no cortocircuitan las expresiones.\n            if (StringUtils.IsEmptyString(strPK))\n                return true;\n            if (strPK.equals(\"NULL\"))\n                return true;\n            */\n\t\t} // Ver si se ha grabado\n\t\tstrPK = this.getIdFieldName();\n\n\t\tstrChkID = strIDString;\n\t\tif (strChkID.contains(\"'\")) strChkID = StringUtils.removeChars(strChkID, \"'\");\n\t\tif (strChkID.contains(\" \")) strChkID = StringUtils.removeChars(strChkID, \" \");\n\t\tif (strChkID.contains(\",\")) strChkID = StringUtils.removeChars(strChkID, \",\"); // Solo para comprobar si est vaca...\n\n\t\tif (this.m_bDirty) {\n\t\t\t// Hay que grabar\n\t\t\t// F11110812: No se puede grabar un CurrentItem que no tenga ID.\n\t\t\t// A ver, si el objeto es un current item, tiene que tener ID\n\t\t\tif (this.m_bIsCurrentItem) {\n\t\t\t\t// Verificar los IDs\n\t\t\t\tlet bNoId = false;\n\t\t\t\tif (!this.m_owner.getStringKey()) {\n\t\t\t\t\t// Numrica\n\t\t\t\t\tif (this.m_lObjectId <= 0) bNoId = true;\n\t\t\t\t} // Numrica\n\t\t\t\telse {\n\t\t\t\t\t// Cadena\n\t\t\t\t\tif (StringUtils.IsEmptyString(this.m_strObjectId)) bNoId = true;\n\t\t\t\t\telse if (this.m_strObjectId.compareToIgnoreCase(\"null\") == 0) bNoId = true;\n\t\t\t\t} // Cadena\n\t\t\t\tif (bNoId) {\n\t\t\t\t\t// Error\n\t\t\t\t\tlet sb = \"{0} failed. Object is current item and has no ID.\";\n\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\tthrow new XoneGenericException(-1990, sb);\n\t\t\t\t} // Error\n\t\t\t} // Verificar los IDs\n\t\t\t// Ejecutar primero las acciones antes de grabar...\n\t\t\t// F11070701: Modificaciones para solucionar los enlaces y grabacin con claves no numricas.\n\t\t\t// Ahora podemos usar nuestra banderilla....\n\t\t\tif (this.IsNew()) bRegister = true;\n\t\t\t// Verificar si la regla ha fallado pero no hay que devolver hResult\n\t\t\t// TODO: Lui\n\t\t\t// if (!BeforeSave())\n\t\t\t//     return false;    // Fallo de regla\n\t\t} // Hay que grabar\n\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\tlet sentence = new SqlParser(this.m_owner.getConnection().getRowIdFieldName(), this.m_messages);\n\t\tsentence.SetTableName(this.getFixedUpdateObjectName());\n\t\ttry {\n\t\t\tlet bStringKey = this.m_owner.getStringKey();\n\t\t\tlet bMultipleKey = this.m_owner.getMultipleKey();\n\t\t\tif (this.m_bDirty) {\n\t\t\t\t// Hay que grabar\n\t\t\t\t// F11010304:\tPara grabar hay que recorrer las propiedades modificadas, no las normales.\n\t\t\t\t// Para grabar hay que recorrer las propiedades modificadas, no las normales, porque all\n\t\t\t\t// no estn los valores que se han anulado...\n\t\t\t\t// A11092604: Permitir que la grabacin de un objeto pueda dejar de ser incremental.\n\t\t\t\tlet bIncremental = StringUtils.ParseBoolValue(this.m_owner.CollPropertyValue(\"incremental-save\"), true);\n\t\t\t\tlet keys = bIncremental ? this.m_lstDirtyProperties : this.m_lstNormalProperties.keys();\n\t\t\t\t// Ahora recorremos las propiedades que sean, que a fin de cuentas nos va a dar lo mismo.\n\t\t\t\tfor (let i = 0; i < keys.length; i++) {\n\t\t\t\t\t// Cada propiedad\n\t\t\t\t\tlet strKey = keys[i];\n\t\t\t\t\t// A09100501:   Permitir que las propiedades tengan un tipo button.\n\t\t\t\t\t// Si es un botn nos los saltamos directamente...\n\t\t\t\t\tstrTmp = this.FieldPropertyValue(strKey, \"type\");\n\t\t\t\t\tif (!StringUtils.IsEmptyString(strTmp)) {\n\t\t\t\t\t\t// Tiene tipo\n\t\t\t\t\t\tif (strTmp.equals(\"B\")) continue;\n\t\t\t\t\t} // Tiene tipo\n\t\t\t\t\t// F11010304:\tPara grabar hay que recorrer las propiedades modificadas, no las normales.\n\t\t\t\t\t// Ahora buscamos el valor usando la clave de la lista de normales...\n\t\t\t\t\t// Como la sacamos de la lista de modificadas, bUpdate en principio es TRUE.\n\t\t\t\t\tbUpdate = true;\n\t\t\t\t\tif (!bStringKey)\n\t\t\t\t\t\tif (!bMultipleKey && strKey.equals(strPK))\n\t\t\t\t\t\t\t// Esta comprobacin para autonumricos\n\t\t\t\t\t\t\tbUpdate = false;\n\t\t\t\t\tif (bUpdate) {\n\t\t\t\t\t\t// Solo si es actualizable\n\t\t\t\t\t\tif (!StringUtils.IsEmptyString(this.getObjectName())) {\n\t\t\t\t\t\t\t// Tabla de actualizacin diferente\n\t\t\t\t\t\t\tif (strKey.startsWith(\"MAP_\")) bUpdate = false;\n\t\t\t\t\t\t\tif (strKey.charAt(0) == \"$\" || strKey.charAt(0) == \"#\") bUpdate = false;\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\t// El ROWID tampoco lo ponemos...\n\t\t\t\t\t\t\tif (strKey.equals(this.m_owner.getConnection().getRowIdFieldName()) && !StringUtils.IsEmptyString(strChkID) && !strChkID.equals(\"NULL\"))\n\t\t\t\t\t\t\t\tbUpdate = false;\n\t\t\t\t\t\t} // Tabla de actualizacin diferente\n\t\t\t\t\t} // Solo si es actualizable\n\t\t\t\t\t// El campo puede ser excluible si est marcado como read-only\n\t\t\t\t\tif (bUpdate) {\n\t\t\t\t\t\t// Ver si es de solo lectura\n\t\t\t\t\t\tstr = this.FieldPropertyValue(strKey, \"readonly\");\n\t\t\t\t\t\tif (StringUtils.ParseBoolValue(str, false)) bUpdate = false;\n\t\t\t\t\t} // Ver si es de solo lectura\n\t\t\t\t\t// Si finalmente no es un campo excluible, se puede\n\t\t\t\t\t// actualizar la tabla completa\n\t\t\t\t\tif (bUpdate) {\n\t\t\t\t\t\t// No se puede insertar el ID\n\t\t\t\t\t\t// Comprobar si la tabla para actualizar es diferente\n\t\t\t\t\t\t// de la tabla de origen\n\t\t\t\t\t\t// Si es el campo ROWID, marcar que ya no se necesita\n\t\t\t\t\t\tif (strKey.equals(this.m_owner.getConnection().getRowIdFieldName())) bNeedRowID = false; // No necesita ROWID...\n\t\t\t\t\t\t// Si tiene alias, usarlo\n\t\t\t\t\t\tstrTmp = strKey;\n\t\t\t\t\t\tif (!StringUtils.IsEmptyString((str = this.FieldPropertyValue(strTmp, \"alias\")))) {\n\t\t\t\t\t\t\t// Tiene alias\n\t\t\t\t\t\t\tstrFields = str;\n\t\t\t\t\t\t} // Tiene alias\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// No tiene alias\n\t\t\t\t\t\t\t// Decir que est mapeando para B.D.\n\t\t\t\t\t\t\tstrFields = this.MapField(strTmp, true);\n\t\t\t\t\t\t} // No tiene alias\n\t\t\t\t\t\t// Adicionar el valor en dependencia del tipo\n\t\t\t\t\t\t// F11010304:\tPara grabar hay que recorrer las propiedades modificadas, no las normales.\n\t\t\t\t\t\t// Sacamos el nombre de la lista de normal. Si no est es NULL.\n\t\t\t\t\t\tlet vl = null;\n\t\t\t\t\t\tif (this.m_lstNormalProperties.containsKey(strKey)) vl = this.m_lstNormalProperties.get(strKey);\n\t\t\t\t\t\tif (!StringUtils.IsEmptyString((str = this.FieldPropertyValue(strKey, \"mapcol\")))) {\n\t\t\t\t\t\t\t// Es un ID, no puede ser 0\n\t\t\t\t\t\t\tif (vl != null) {\n\t\t\t\t\t\t\t\t// No nulo\n\t\t\t\t\t\t\t\t//  Esta conversin puede explotarse porque en el campo pueden haber puesto\n\t\t\t\t\t\t\t\t//  cualquier guarrera, por lo que hay que cerciorarse que si pasa algo malo\n\t\t\t\t\t\t\t\t//  caigamos en una situacin controlada, en la que asignemos un valor nulo al\n\t\t\t\t\t\t\t\t//  ID que estamos tratando de recolocar.\n\t\t\t\t\t\t\t\t//  Buscar el tipo de datos del campo para comprobar los valores vacos correctos\n\t\t\t\t\t\t\t\tif (ObjUtils.IsNumeric(vl)) {\n\t\t\t\t\t\t\t\t\t// Numricos\n\t\t\t\t\t\t\t\t\tlet l = NumberUtils.SafeToLong(vl);\n\t\t\t\t\t\t\t\t\tif (0 == l) vl = null;\n\t\t\t\t\t\t\t\t\telse vl = l;\n\t\t\t\t\t\t\t\t} // Numricos\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t// Cadena\n\t\t\t\t\t\t\t\t\tstr = vl.toString();\n\t\t\t\t\t\t\t\t\tif (StringUtils.IsEmptyString(str)) vl = null;\n\t\t\t\t\t\t\t\t\telse vl = str;\n\t\t\t\t\t\t\t\t} // Cadena\n\t\t\t\t\t\t\t} // No nulo\n\t\t\t\t\t\t} // Es un ID, no puede ser 0\n\t\t\t\t\t\tstr = this.DevelopObjectValue(vl);\n\t\t\t\t\t\tif (typeof vl === \"string\") {\n\t\t\t\t\t\t\t// Solo para valores de cadena\n\t\t\t\t\t\t\tif (!StringUtils.IsEmptyString(str) && str.length > 2 && this.m_owner.getConnection().HasEscapeChars()) {\n\t\t\t\t\t\t\t\t// Solo para las cadenas\n\t\t\t\t\t\t\t\tstr = this.m_owner.getConnection().EscapeString(str.substring(1, str.length - 2));\n\t\t\t\t\t\t\t\tstr = \"'\" + str + \"'\";\n\t\t\t\t\t\t\t} // Solo para las cadenas\n\t\t\t\t\t\t} // Solo para valores de cadena\n\t\t\t\t\t\t// Adicionar el valor al parser\n\t\t\t\t\t\t// K11092602: Modificaciones para trabajar con conexiones online puras.\n\t\t\t\t\t\t// Resolver el nombre real del campo, si la coleccin es indexada\n\t\t\t\t\t\tlet resolve = this.reverseResolveFieldName(strFields);\n\t\t\t\t\t\tsentence.SetFieldValue(resolve, str);\n\t\t\t\t\t\tif (StringUtils.ParseBoolValue(this.FieldPropertyValue(strKey, Utils.PROP_ATTR_EMBED), false)) sentence.SetFieldType(resolve, 1);\n\t\t\t\t\t} // No se puede insertar el ID\n\t\t\t\t} // Cada propiedad\n\t\t\t\tif (sentence.GetFields().length > 0) {\n\t\t\t\t\t// Hay modificaciones\n\t\t\t\t\t// F11070701: Modificaciones para solucionar los enlaces y grabacin con claves no numricas.\n\t\t\t\t\t// Utilizar nuestra marca para saber si es nuevo o no\n\t\t\t\t\t////if (!StringUtils.IsEmptyString(strChkID) && !strChkID.equals(\"NULL\"))\n\t\t\t\t\tif (!this.IsNew()) {\n\t\t\t\t\t\t// El objeto tiene ID\n\t\t\t\t\t\t// Objeto existente\n\t\t\t\t\t\tbNewObj = false;\n\t\t\t\t\t\tif (!bMultipleKey) sentence.SetWhereSentence(\"WHERE \" + strPK + \"=\" + strIDString);\n\t\t\t\t\t\telse sentence.SetWhereSentence(this.GetMultipleKeyString(true));\n\t\t\t\t\t\tsentence.SetSqlType(SqlType.SQLTYPE_UPDATE);\n\t\t\t\t\t\tsentence.SetFieldValue(strPK, this.getId());\n\t\t\t\t\t\tsentence.addkey(strPK);\n\t\t\t\t\t\tstrCmd = sentence.RegenerateSql();\n\t\t\t\t\t\tsentence.SetSqlType(SqlType.SQLTYPE_UPDATE);\n\t\t\t\t\t\t// K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n\t\t\t\t\t\t// A12042503: Mecanismo para registrar un modo debug global en la aplicacin.\n\t\t\t\t\t\tif (this.m_owner.getIsDebugging() || this.m_owner.getOwnerApp().isDebugMode()) Utils.DebugLog(Utils.TAG_DATABASE_LOG, strCmd);\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t(await this.m_owner.getConnection().ExecuteSqlStringAsync(null, sentence, false, this.m_owner.getName(), { [strPK]: strIDString })) ==\n\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.m_owner.getMultipleKey()) str = \" WHERE \" + this.GetMultipleKeyString(true);\n\t\t\t\t\t\telse str = \" WHERE \" + this.getIdFieldName() + \"=\" + this.GetObjectIdString(true);\n\t\t\t\t\t} // El objeto tiene ID\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Es un objeto nuevo\n\t\t\t\t\t\t// Objeto nuevo\n\t\t\t\t\t\tbNewObj = true;\n\t\t\t\t\t\tstrRowID = this.getRowId();\n\t\t\t\t\t\tif (this.m_owner.getConnection().getIsReplicating() || (!bStringKey && !bMultipleKey)) {\n\t\t\t\t\t\t\t// El ROWID solo si hace falta\n\t\t\t\t\t\t\t// En principio, si se trata de datos remotos, la verificacin se puede\n\t\t\t\t\t\t\t// hacer arriba\n\t\t\t\t\t\t\t// La existencia de campos de tipo unique-filter implica que se deben\n\t\t\t\t\t\t\t// chequear las reglas indicadas por las frmulas de unicidad antes de\n\t\t\t\t\t\t\t// grabar el objeto. Si alguna de las reglas de unicidad falla, falla\n\t\t\t\t\t\t\t// la grabacin incluso antes de generar el RowID.\n\t\t\t\t\t\t\t// TODO: Luis\n\t\t\t\t\t\t\t// if (!CheckUniqueFields())\n\t\t\t\t\t\t\t//     return false;\n\t\t\t\t\t\t\t// Incluir la banderilla en esta condicin para inhabilitar la generacin de varios ROWID\n\t\t\t\t\t\t\t// innecesariamente...\n\t\t\t\t\t\t\tif (bNeedRowID) {\n\t\t\t\t\t\t\t\t// Solo si hace falta generarlo\n\t\t\t\t\t\t\t\twhile (true) {\n\t\t\t\t\t\t\t\t\t// Comprobar unicidad\n\t\t\t\t\t\t\t\t\tstrRowID = this.m_owner.GenerateRowId();\n\t\t\t\t\t\t\t\t\tif (this.m_owner.IsUniqueRowId(strRowID)) break;\n\t\t\t\t\t\t\t\t} // Comprobar unicidad\n\t\t\t\t\t\t\t\tstr = this.DevelopObjectValue(strRowID);\n\t\t\t\t\t\t\t\tsentence.SetFieldValue(this.m_owner.getConnection().getRowIdFieldName(), str);\n\t\t\t\t\t\t\t\tsentence.addkey(this.m_owner.getConnection().getRowIdFieldName());\n\t\t\t\t\t\t\t\t// F13022203: Proeblemas a la hora de grabar objetos cuando ha fallado una grabacin previa.\n\t\t\t\t\t\t\t\t// Malo\n\t\t\t\t\t\t\t\tstr = strRowID;\n\t\t\t\t\t\t\t} // Solo si hace falta generarlo\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// Preparar las condiciones para usar el mismo ROWID\n\t\t\t\t\t\t\t\t// Como se puede haber borrado en la anterior, reutilizar el mismo ROWID\n\t\t\t\t\t\t\t\tlet idval = this.GetRawPropertyValue(this.m_owner.getConnection().getRowIdFieldName());\n\t\t\t\t\t\t\t\tif (idval != null) {\n\t\t\t\t\t\t\t\t\t// Solo si tiene valor\n\t\t\t\t\t\t\t\t\tstrRowID = idval.toString();\n\t\t\t\t\t\t\t\t\tstr = \"'\" + strRowID + \"'\";\n\t\t\t\t\t\t\t\t} // Solo si tiene valor\n\t\t\t\t\t\t\t} // Preparar las condiciones para usar el mismo ROWID\n\t\t\t\t\t\t\tsentence.SetSqlType(SqlType.SQLTYPE_INSERT);\n\t\t\t\t\t\t} // El ROWID solo si hace falta\n\t\t\t\t\t\t// Crear el INSERT y ejecutarlo\n\t\t\t\t\t\tstrCmd = sentence.RegenerateSql();\n\t\t\t\t\t\t// A11092606: Si la coleccin depura, mostrar los SQL de grabacin tambin.\n\t\t\t\t\t\t// A12042503: Mecanismo para registrar un modo debug global en la aplicacin.\n\t\t\t\t\t\tif (this.m_owner.getIsDebugging() || this.m_owner.getOwnerApp().isDebugMode()) {\n\t\t\t\t\t\t\t// Traza\n\t\t\t\t\t\t\tUtils.DebugLog(Utils.TAG_DATABASE_LOG, strCmd);\n\t\t\t\t\t\t\tthis.getOwnerApp().writeConsoleString(strCmd);\n\t\t\t\t\t\t} // Traza\n\t\t\t\t\t\t// La generacin de objetos a nivel central implica que las claves no se comprueban\n\t\t\t\t\t\t// Pasar la conexin\n\t\t\t\t\t\t// A10090601:\tIncluir el mecanismo de rplica selectiva por colecciones a la maquinaria.\n\t\t\t\t\t\t// Programar aqu el soporte para la rplica selectiva por colecciones\n\t\t\t\t\t\tlet bReplicate = false;\n\t\t\t\t\t\t// TODO: Luis por ahora esto no replica\n\t\t\t\t\t\t// if (conn.getIsReplicating ())\n\t\t\t\t\t\t// {// Si est replicando, podra ser selectiva\n\t\t\t\t\t\t//     bReplicate =true;\n\t\t\t\t\t\t//     if (this.m_owner.getOwnerApp().getSelectiveReplication())\n\t\t\t\t\t\t//     {// Ver si la coleccin replica\n\t\t\t\t\t\t//         if (!this.m_owner.getReplicate ())\n\t\t\t\t\t\t//             bReplicate =false;\n\t\t\t\t\t\t//     }// Ver si la coleccin replica\n\t\t\t\t\t\t// }// Si est replicando, podra ser selectiva\n\t\t\t\t\t\t// A11092603: Permitir que la maquinaria utilice transacciones si la conexin lo permite.\n\t\t\t\t\t\t// Buscar si la conexin soporta transacciones e iniciar una...\n\t\t\t\t\t\tif (bTransacted) bTransacted = conn.supportsTransactions();\n\t\t\t\t\t\tif (bTransacted) conn.beginTrans();\n\t\t\t\t\t\tlet b: any = false;\n\t\t\t\t\t\tif (conn.acceptsParsedSentences()) b = await conn.ExecuteParsedSqlAsync(null, sentence, bReplicate, this.m_owner.getName());\n\t\t\t\t\t\telse b = await conn.ExecuteSqlStringAsync(null, strCmd, bReplicate, this.m_owner.getName());\n\t\t\t\t\t\t// A11092603: Permitir que la maquinaria utilice transacciones si la conexin lo permite.\n\t\t\t\t\t\t// Comprobar el resultado y si hay transacciones echarlas patrs...\n\t\t\t\t\t\tif (typeof b === \"boolean\" && !(b as boolean)) {\n\t\t\t\t\t\t\t// Error\n\t\t\t\t\t\t\tif (bTransacted) conn.rollBack();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t} // Error\n\t\t\t\t\t\t// K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n\t\t\t\t\t\t// un popvalue del objeto que se load dependiendo del atributo save-result=\"NOMBRECOLECCION\"\n\t\t\t\t\t\tif (b.hasOwnProperty(\"isResultset\")) {\n\t\t\t\t\t\t\t// Si es un RS, ver si tenemos que crear un objeto\n\t\t\t\t\t\t\tlet save_result = this.m_owner.CollPropertyValue(\"save-result\");\n\t\t\t\t\t\t\tif (!TextUtils.isEmpty(save_result)) {\n\t\t\t\t\t\t\t\t// Tenemos coleccin de resultados\n\t\t\t\t\t\t\t\tlet coll = await this.m_owner.getOwnerApp().getCollection(save_result);\n\t\t\t\t\t\t\t\tif (coll != null) {\n\t\t\t\t\t\t\t\t\t// Y adems existe, di t\n\t\t\t\t\t\t\t\t\tlet obj = await coll.CreateObject();\n\t\t\t\t\t\t\t\t\tcoll.addItem(obj);\n\t\t\t\t\t\t\t\t\tawait obj.Load(b);\n\t\t\t\t\t\t\t\t\tthis.m_owner.getOwnerApp().pushValue(obj);\n\t\t\t\t\t\t\t\t} // Y adems existe, di t\n\t\t\t\t\t\t\t} // Tenemos coleccin de resultados\n\t\t\t\t\t\t} // Si es un RS, ver si tenemos que crear un objeto\n\t\t\t\t\t\tif (!bStringKey && !bMultipleKey) {\n\t\t\t\t\t\t\t// Obtener el ID si es autonumrico solamente\n\t\t\t\t\t\t\t// A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n\t\t\t\t\t\t\t// Si la conexin soporta la obtencin del valor de ID autonumrico, que lo haga ella.\n\t\t\t\t\t\t\tif (conn.retrievesAutonumericKeys()) {\n\t\t\t\t\t\t\t\t// Se lo pide a la conexin\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t//TODO ADD TAG Juan Carlos. RetrieveNumericKey() espera la SQL ya con comillas.\n\t\t\t\t\t\t\t\t\tlet sRowIDQuoted = str;\n\t\t\t\t\t\t\t\t\tif (!sRowIDQuoted.startsWith(\"'\")) {\n\t\t\t\t\t\t\t\t\t\tsRowIDQuoted = \"'\" + sRowIDQuoted;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (!sRowIDQuoted.endsWith(\"'\")) {\n\t\t\t\t\t\t\t\t\t\tsRowIDQuoted = sRowIDQuoted + \"'\";\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tlPossibleKey = conn.RetrieveNumericKey(this.getFixedObjectName(), strPK, this.m_owner.getRowIdFieldName(), sRowIDQuoted);\n\t\t\t\t\t\t\t\t} catch (e2) {\n\t\t\t\t\t\t\t\t\tlPossibleKey = -1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} // Se lo pide a la conexin\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// Como siempre, por lo que sea\n\t\t\t\t\t\t\t\tstrCmd = \"SELECT \" + strPK + \" FROM \" + this.getFixedObjectName() + \" WHERE \" + this.m_owner.getRowIdFieldName() + \"=\" + str;\n\t\t\t\t\t\t\t\t// A12042503: Mecanismo para registrar un modo debug global en la aplicacin.\n\t\t\t\t\t\t\t\tif (this.m_owner.getIsDebugging() || this.m_owner.getOwnerApp().isDebugMode())\n\t\t\t\t\t\t\t\t\tUtils.DebugLog(Utils.TAG_DATABASE_LOG, \"Save Find Record: \" + strCmd);\n\t\t\t\t\t\t\t\tif (null == (rs = this.m_owner.getConnection().CreateRecordset(strCmd))) {\n\t\t\t\t\t\t\t\t\t// Error\n\t\t\t\t\t\t\t\t\t// Eliminar este objeto de la base de datos... algo anduvo mal\n\t\t\t\t\t\t\t\t\tstrCmd = \"DELETE FROM \" + this.m_owner.getFixedObjectName() + \" WHERE \" + this.m_owner.getRowIdFieldName() + \"=\" + str;\n\t\t\t\t\t\t\t\t\t// Este no importa que falle... estamos haciendo lo que se puede\n\t\t\t\t\t\t\t\t\tthis.m_owner.getConnection().ExecuteSqlString(strCmd);\n\t\t\t\t\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t\t\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_OBJ_SAVEFAIL, \"{0} failed. Cannot get Object ID.\");\n\t\t\t\t\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\t\t\t\t\t// A11092603: Permitir que la maquinaria utilice transacciones si la conexin lo permite.\n\t\t\t\t\t\t\t\t\t// Estoooo, si hay transacciones, chungo\n\t\t\t\t\t\t\t\t\tif (bTransacted) conn.rollBack();\n\t\t\t\t\t\t\t\t\tthrow new XoneGenericException(-1999, sb);\n\t\t\t\t\t\t\t\t} // Error\n\t\t\t\t\t\t\t\tif (await rs.next()) {\n\t\t\t\t\t\t\t\t\t// Existe\n\t\t\t\t\t\t\t\t\tif (!bStringKey) {\n\t\t\t\t\t\t\t\t\t\t// Actualizar\n\t\t\t\t\t\t\t\t\t\tlet idval = null;\n\t\t\t\t\t\t\t\t\t\t// M10052401:\tModificaciones en la forma de acceso a bases de datos SQLite.\n\t\t\t\t\t\t\t\t\t\t// K11010501:\tModificaciones para la versin 1.5 de Android.\n\t\t\t\t\t\t\t\t\t\tidval = rs.getValue(strPK, this.m_owner.getIdFieldType());\n\t\t\t\t\t\t\t\t\t\t// Comprobar si viene vaco o no\n\t\t\t\t\t\t\t\t\t\tlPossibleKey = NumberUtils.SafeToLong(idval);\n\t\t\t\t\t\t\t\t\t\tif (lPossibleKey == 0) {\n\t\t\t\t\t\t\t\t\t\t\t// Error\n\t\t\t\t\t\t\t\t\t\t\t// A11092603: Permitir que la maquinaria utilice transacciones si la conexin lo permite.\n\t\t\t\t\t\t\t\t\t\t\t// Si est transaccionado, simplemente rollback\n\t\t\t\t\t\t\t\t\t\t\tif (bTransacted) conn.rollBack();\n\t\t\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\t\t\t// Como toda la vida\n\t\t\t\t\t\t\t\t\t\t\t\t// Primero lo primero... borremos este objeto en la base de datos...\n\t\t\t\t\t\t\t\t\t\t\t\tstrCmd =\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"DELETE FROM \" + this.m_owner.getFixedObjectName() + \" WHERE \" + this.m_owner.getRowIdFieldName() + \"='\" + strRowID + \"'\";\n\t\t\t\t\t\t\t\t\t\t\t\tif (this.m_owner.getConnection().ExecuteSqlString(strCmd) == null) return false;\n\t\t\t\t\t\t\t\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t\t\t\t\t\t\t\tlet sb = this.m_messages.GetMessage(\n\t\t\t\t\t\t\t\t\t\t\t\t\tXoneMessageKeys.SYS_MSG_OBJ_SAVEFAIL_02,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"{0} failed. Field '{1}' seems to be non-identity or it is not being updated.\"\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\t\t\t\t\t\t\t\tsb = sb.replace(\"{1}\", strPK);\n\t\t\t\t\t\t\t\t\t\t\t\tthrow new XoneGenericException(-19899, sb);\n\t\t\t\t\t\t\t\t\t\t\t} // Como toda la vida\n\t\t\t\t\t\t\t\t\t\t} // Error\n\t\t\t\t\t\t\t\t\t} // Actualizar\n\t\t\t\t\t\t\t\t\telse lPossibleKey = -1; // Al menos indicar que se grab\n\t\t\t\t\t\t\t\t} // Existe\n\t\t\t\t\t\t\t\trs.close();\n\t\t\t\t\t\t\t\trs = null;\n\t\t\t\t\t\t\t} // Como siempre, por lo que sea\n\t\t\t\t\t\t} // Obtener el ID si es autonumrico solamente\n\t\t\t\t\t\t// F11070701: Modificaciones para solucionar los enlaces y grabacin con claves no numricas.\n\t\t\t\t\t\t// Si hemos grabado, indicar que el objeto no es nuevo\n\t\t\t\t\t\tthis.m_bNewObject = false;\n\t\t\t\t\t} // Es un objeto nuevo\n\t\t\t\t} // Hay modificaciones\n\t\t\t} // Hay que grabar\n\t\t\t// Ahora debe asignar el valor al ID interno del objeto\n\t\t\t// porque ha llegado aqu si y solo si se ha ejecutado\n\t\t\t// correctamente...\n\t\t\tif (lPossibleKey > 0) {\n\t\t\t\t// Solo si ha grabado algo\n\t\t\t\tif (StringUtils.IsEmptyString(strRowID)) strRowID = this.getRowId();\n\t\t\t\tif (!bStringKey) {\n\t\t\t\t\t// Entero\n\t\t\t\t\tthis.put(strPK, lPossibleKey);\n\t\t\t\t\tthis.m_strObjectId = String.format(\"%s\", lPossibleKey);\n\t\t\t\t} // Entero\n\t\t\t\tthis.m_lObjectId = lPossibleKey;\n\t\t\t\t// Almacenar el ROWID\n\t\t\t\t// Esto solo har falta si se ha generado un nuevo ROWID, de lo contrario no\n\t\t\t\tif (bNeedRowID) {\n\t\t\t\t\t// Se ha generado uno nuevo\n\t\t\t\t\tthis.put(this.m_owner.getRowIdFieldName(), sentence.GetRowId());\n\t\t\t\t} // Se ha generado uno nuevo\n\t\t\t} // Solo si ha grabado algo\n\t\t\tlet bResult = true;\n\t\t\t// F10052701:\tEl mecanismo de recuperacin al fallar Save() tiene problemas.\n\t\t\t// Relocalizarse en la coleccin propietaria\n\t\t\t////m_owner.RelocateObject (this);\n\t\t\t// Puede ser que las colecciones que contiene el objeto\n\t\t\t// tengan datos que grabar, as que grabarlos\n\t\t\t// TODO: Luis ver esto\n\t\t\t// let bResult = false;\n\t\t\t// try\n\t\t\t// {\n\t\t\t//     bResult = OnSave();\n\t\t\t// }\n\t\t\t// catch (e)\n\t\t\t// {\n\t\t\t//     UndoSave(bNewObj, bTransacted);\n\t\t\t//     throw e;\n\t\t\t// }\n\t\t\t// if (!bResult)\n\t\t\t// {// Error\n\t\t\t//     UndoSave(bNewObj, bTransacted);\n\t\t\t//     return false;\n\t\t\t// }// Error\n\t\t\t// Trata de resolver los enlaces pendientes si es que los hay\n\t\t\t// Aqu se ha cambiado algo en el orden de ejecucin de las cosas\n\t\t\t// TODO: Luis ver esto\n\t\t\t// bResult = true;\n\t\t\t// if (this.m_lstLinkItems.length > 0)\n\t\t\t// {// Enlazar\n\t\t\t//     try\n\t\t\t//     {\n\t\t\t//         bResult = LinkItems();\n\t\t\t//     }\n\t\t\t//     catch ( e)\n\t\t\t//     {\n\t\t\t//         if (lPossibleKey > 0)\n\t\t\t//             UndoSave(bNewObj, bTransacted);\n\t\t\t//         throw e;\n\t\t\t//     }\n\t\t\t// }// Enlazar\n\t\t\t// if (bResult)\n\t\t\t// {\n\t\t\t//     try\n\t\t\t//     {\n\t\t\t//         bResult = SaveContents();\n\t\t\t//     }\n\t\t\t//     catch (e)\n\t\t\t//     {\n\t\t\t//         if (lPossibleKey > 0)\n\t\t\t//             UndoSave(bNewObj, bTransacted);\n\t\t\t//         throw e;\n\t\t\t//     }\n\t\t\t// }\n\t\t\t// // F10052701:\tEl mecanismo de recuperacin al fallar Save() tiene problemas.\n\t\t\t// // Intentar efectuar los enlaces nuevamente aqu y no donde se haca antes...\n\t\t\t// if (bResult)\n\t\t\t// {// Si an quedan enlaces, intentarlo de nuevo\n\t\t\t//     if (this.m_lstLinkItems.size() > 0)\n\t\t\t//     {// Enlazar\n\t\t\t//         try\n\t\t\t//         {\n\t\t\t//             bResult = LinkItems();\n\t\t\t//         }\n\t\t\t//         catch (e)\n\t\t\t//         {\n\t\t\t//             if (lPossibleKey > 0)\n\t\t\t//                 UndoSave(bNewObj, bTransacted);\n\t\t\t//             throw e;\n\t\t\t//         }\n\t\t\t//     }// Enlazar\n\t\t\t// }// Si an quedan enlaces, intentarlo de nuevo\n\t\t\t// // Grabar aquellos contenidos que se lo merezcan\n\t\t\t// if (bResult)\n\t\t\t// {// Solo ahora marca las propiedades como limpias\n\t\t\t// \t// A11092603: Permitir que la maquinaria utilice transacciones si la conexin lo permite.\n\t\t\t// \t// Si tenemos transacciones, hacer commit\n\t\t\t// \tlet obj=conn.commit();\n\t\t\t// \t// K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n\t\t\t// \tif (obj!=null)\n\t\t\t// \t{// Tiene resultado\n\t\t\t// \t\tif (obj instanceof ResultSet)\n\t\t\t// \t\t{// Es un resultset\n\t\t\t// \t\t\tlet rsResult=obj as IResultSet;\n\t\t\t//         \tlet save_result=this.m_owner.CollPropertyValue(\"save-result\");\n\t\t\t//         \tif (!TextUtils.isEmpty(save_result))\n\t\t\t//         \t{// Tiene definida una coleccin\n\t\t\t//         \t\tlet coll=this.m_owner.getOwnerApp().getCollection(save_result);\n\t\t\t//         \t\tif (coll !=null)\n\t\t\t//         \t\t{// Existe la coleccin\n\t\t\t//         \t\t\tlet objData=coll.CreateObject();\n\t\t\t//         \t\t\tcoll.addItem(objData);\n\t\t\t//         \t\t\tif (rsResult.next())\n\t\t\t//         \t\t\t\tobjData.Load(rsResult);\n\t\t\t//         \t\t\tthis.m_owner.getOwnerApp().PushValue(objData);\n\t\t\t//         \t\t}// Existe la coleccin\n\t\t\t//         \t}// Tiene definida una coleccin\n\t\t\t//         }// Es un resultset\n\t\t\t// \t}// Tiene resultado\n\t\t\t//     // Marcar todas las propiedades como listas, solamente si la grabacin\n\t\t\t//     // ha resultado exitosa. Esto permite que si falla la grabacin, no se queden\n\t\t\t//     // marcadas las propiedades como grabadas cuando en realidad no lo estn\n\t\t\t//     SetDirty(false);\n\t\t\t//     // F10052701:\tEl mecanismo de recuperacin al fallar Save() tiene problemas.\n\t\t\t//     // Registrar el objeto aqu si todo ha ido bien...\n\t\t\t//     // Las llamadas a RelocateObject y dems hay que hacerlas despus de grabar del todo\n\t\t\t//     // as que las quitamos de aqu...\n\t\t\t//     if (bRegister)\n\t\t\t//         this.m_owner.RegisterObjectKey(this);\n\t\t\t// }// Solo ahora marca las propiedades como limpias\n\t\t\t// else\n\t\t\t// {// To patrs\n\t\t\t//     if (lPossibleKey > 0)\n\t\t\t//     {// Solo si ha grabado algo\n\t\t\t//         // Borra el objeto de la base de datos con todo lo que se haya grabado de l\n\t\t\t//         UndoSave(bNewObj, bTransacted);\n\t\t\t//     }// Solo si ha grabado algo\n\t\t\t//     else\n\t\t\t//     {// Por si las moscas\n\t\t\t//     \tif (bTransacted)\n\t\t\t//     \t\tconn.rollBack();\n\t\t\t//     }// Por si las moscas\n\t\t\t// }// To patrs\n\t\t\treturn bResult;\n\t\t} catch (e) {\n\t\t\tif (rs != null) {\n\t\t\t\t// Tiene recordset\n\t\t\t\ttry {\n\t\t\t\t\trs.close();\n\t\t\t\t} catch (se) {\n\t\t\t\t\t// Ignorar esta excepcin\n\t\t\t\t}\n\t\t\t\trs = null;\n\t\t\t} // Tiene recordset\n\t\t\t// A11092603: Permitir que la maquinaria utilice transacciones si la conexin lo permite.\n\t\t\tif (bTransacted) conn.rollBack();\n\t\t\tthrow e;\n\t\t}\n\t}\n\t//#endregion\n\n\tpublic ClearCaches(): void {\n\t\tthis.m_lstCachedAttributes.clear();\n\t}\n\n\t//#region Borrar el objeto de la base de datos\n\t/**\n\t * Elimina este objeto de la base de datos\n\t * @return\t\tDevuelve TRUE si el objeto se puede eliminar correctamente.\n\t * @throws XoneGenericException\n\t */\n\tpublic async deleteObject(): Promise<boolean> {\n\t\tlet strCmd = \"\";\n\t\tlet bDelete = false;\n\t\tlet bDeleteActions = false;\n\t\tlet FunctionName = \"CXoneDataObject::DeleteObject\";\n\n\t\ttry {\n\t\t\t// O12050301: Si la coleccin es especial no hay que borrar el objeto de base de datos.\n\t\t\t// Si es un objeto de una coleccin especial, entonces turur\n\t\t\tif (this.m_owner.getSpecial()) return true;\n\t\t\t// Un objeto solo se tiene que borrar de la base de datos\n\t\t\t// si es que por alguna razn ha llegado a ella, claro est\n\t\t\tif (!this.m_bFollowRules) bDelete = true;\n\t\t\telse bDelete = this.CanDelete();\n\n\t\t\tif (bDelete) {\n\t\t\t\t// Si se puede borrar\n\t\t\t\tif (!this.m_owner.getSpecial()) bDeleteActions = true; // Puede tratarse de una coleccin especial\n\t\t\t} // Si se puede borrar\n\t\t\t// Primero ejecutar las acciones de borrado\n\t\t\t// contenidas\n\t\t\tif (bDeleteActions) {\n\t\t\t\t// Ejecutar las acciones\n\t\t\t\tif (!this.ExecuteDeleteActions()) {\n\t\t\t\t\t// Acciones de eliminacin\n\t\t\t\t\tthis.m_bFollowRules = true;\n\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_OBJ_DELETEOBJFAIL_01, \"{0} failed. Pre-delete actions have not been executed.\");\n\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\tthrow new XoneGenericException(-6000, sb);\n\t\t\t\t} // Acciones de eliminacin\n\t\t\t} // Ejecutar las acciones\n\t\t\t// Ahora s se verifica si el objeto est grabado o no, pues no tiene sentido lanzar\n\t\t\t// un DELETE contra una base de datos si no estn almacenados los datos en ella, digo yo...\n\t\t\tif (!StringUtils.IsEmptyString(this.getObjectName()) && !this.GetObjectIdString().equals(\"NULL\")) {\n\t\t\t\t// Este objeto debe tener datos\n\t\t\t\tif (bDelete) {\n\t\t\t\t\t// Si se puede borrar\n\t\t\t\t\t// Ahora eliminar el objeto de la base de datos...\n\t\t\t\t\tstrCmd = \"DELETE FROM \" + this.getFixedObjectName() + \" WHERE \" + this.getIdFieldName() + \"=\" + this.GetObjectIdString(true);\n\t\t\t\t\t// TODO: Luis\n\t\t\t\t\tif (this.m_owner.getIsDebugging() || this.m_owner.getOwnerApp().isDebugMode()) Utils.DebugLog(Utils.TAG_DATABASE_LOG, strCmd);\n\t\t\t\t\t// F10090306:\tNo se registra el error cuando falla DeleteObject.\n\t\t\t\t\t// El resultado no importa porque lanza una excepcin.\n\t\t\t\t\tlet sRowidName = this.m_owner.getConnection().getRowIdFieldName();\n\t\t\t\t\tlet sentence = new SqlParser(sRowidName);\n\t\t\t\t\tsentence.ParseSqlString(strCmd);\n\t\t\t\t\tsentence.SetFieldValue(this.getIdFieldName(), this.getId());\n\t\t\t\t\tsentence.addkey(this.getIdFieldName());\n\t\t\t\t\tawait this.m_owner.getConnection().ExecuteSqlStringAsync(null, sentence, false, this.m_owner.getName());\n\t\t\t\t} // Si se puede borrar\n\t\t\t\telse {\n\t\t\t\t\t// No se puede borrar\n\t\t\t\t\tthis.m_bFollowRules = true;\n\t\t\t\t\treturn false; // No se puede...\n\t\t\t\t} // No se puede borrar\n\t\t\t} // Este objeto debe tener datos\n\t\t\t// Este cdigo tambin se ha sacado de la condicin, ya que aunque el objeto no se borre\n\t\t\t// de la base de datos, las acciones post-eliminacin s deberan analizarse, ya que pueden\n\t\t\t// referirse a objetos que no necesariamente existan en el disco, sino en la memoria...\n\t\t\tif (bDelete && bDeleteActions) {\n\t\t\t\t// Ejecuta las acciones posteriores\n\t\t\t\tif (!this.ExecuteDeleteActions(true)) {\n\t\t\t\t\t// Ver qu ha pasado\n\t\t\t\t\tthis.m_bFollowRules = true;\n\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_OBJ_DELETEOBJFAIL_02, \"{0} failed. Could not execute post-delete actions.\");\n\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\tthrow new XoneGenericException(-6001, sb);\n\t\t\t\t} // Ver qu ha pasado\n\t\t\t} // Ejecuta las acciones posteriores\n\t\t\tthis.m_bFollowRules = true;\n\t\t\treturn true;\n\t\t} catch (ex) {\n\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\tlet sMessage = ex.message;\n\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_GENERALFAIL, \"{0} failed. \");\n\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\tif (!TextUtils.isEmpty(sMessage)) {\n\t\t\t\tsb = sb.concat(sMessage);\n\t\t\t}\n\t\t\tthrow new XoneGenericException(-1001, ex, sb);\n\t\t}\n\t}\n\n\t/**\n\t * @return\t\tDevuelve TRUE si se cumplen todas las reglas de borrado.\n\t * @throws Exception\n\t */\n\tprotected CanDelete(): boolean {\n\t\tlet nodeList: XmlNodeList;\n\t\tlet strIDString = this.GetObjectIdString(true);\n\t\tlet coll: XoneDataCollection;\n\t\t//  En principio si este objeto no tiene ID todava\n\t\t//  es seguro borrarlo. De todas maneras esta funcin es\n\t\t//  virtual, as que si no est usted de acuerdo redefnala\n\t\t//  y al carajo...\n\t\ttry {\n\t\t\tif (StringUtils.IsEmptyString(strIDString)) return true;\n\t\t\t//  Para evaluar reglas del tipo rule se debe tener coleccin\n\t\t\t//  propietaria.\n\t\t\tcoll = this.m_owner;\n\t\t\tdo {\n\t\t\t\tnodeList = null;\n\t\t\t\tlet deleteNode = coll.GetNode(\"delete\");\n\t\t\t\tif (deleteNode != null) {\n\t\t\t\t\t// Tiene delete\n\t\t\t\t\tnodeList = deleteNode.SelectNodes(\"rule\");\n\t\t\t\t\tif (nodeList.count() > 0) break;\n\t\t\t\t} // Tiene delete\n\t\t\t\tcoll = coll.getParentCollection();\n\t\t\t} while (coll != null);\n\t\t\t// Si tenemos lista de reglas, usarla\n\t\t\tif (nodeList != null) {\n\t\t\t\t// Ahora analizar lo que haya encontrado...\n\t\t\t\tfor (let i = 0; i < nodeList.count(); i++) {\n\t\t\t\t\t// Evaluar cada una de las reglas\n\t\t\t\t\tlet node = nodeList.get(i);\n\t\t\t\t\tif (!this.EvaluateRule(node)) return false; // Adquirir el mensaje de error\n\t\t\t\t} // Evaluar cada una de las reglas\n\t\t\t} // Ahora analizar lo que haya encontrado...\n\t\t\t// Antes de comprobar las reglas, ver si la coleccin propietaria es de solo lectura\n\t\t\tif (StringUtils.ParseBoolValue(/*str = */ this.m_owner.CollPropertyValue(\"readonly\"), false)) {\n\t\t\t\t// Read Only\n\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_OBJ_CANNOTDELETE, \"Cannot delete object. Collection '{0}' is read-only.\");\n\t\t\t\tsb = sb.replace(\"{0}\", this.m_owner.getName());\n\t\t\t\tthrow new XoneGenericException(-8101, sb);\n\t\t\t} // Read Only\n\t\t\treturn true;\n\t\t} catch (ex) {\n\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\tlet sMessage = ex.message;\n\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_GENERALFAIL, \"{0} failed. \");\n\t\t\tsb = sb.replace(\"{0}\", \"CXoneDataObject::CanDelete\");\n\t\t\tif (!TextUtils.isEmpty(sMessage)) {\n\t\t\t\tsb = sb.concat(sMessage);\n\t\t\t}\n\t\t\tthrow new XoneGenericException(-10151, ex, sb);\n\t\t}\n\t}\n\n\t/**\n\t * Ejecuta las acciones de eliminacin del objeto. EN funcin del parmetro ejecuta las anteriores o las posteriores.\n\t * @param AfterActions\t\tTRUE para ejecutar las acciones posteriores a la eliminacin del objeto.\n\t * @return\t\t\t\t\tDevuelve TRUE si todas las acciones se han ejecutado correctamente.\n\t * @throws Exception\n\t */\n\tpublic async ExecuteDeleteActions(AfterActions: boolean = false): Promise<boolean> {\n\t\tlet nodeList: XmlNodeList;\n\t\tlet strIDString = this.GetObjectIdString(true);\n\t\tlet coll: XoneDataCollection;\n\t\t//  En principio si este objeto no tiene ID todava\n\t\t//  es seguro borrarlo. De todas maneras esta funcin es\n\t\t//  virtual, as que si no est usted de acuerdo redefnala\n\t\t//  y al carajo...\n\t\ttry {\n\t\t\tif (StringUtils.IsEmptyString(strIDString)) return true;\n\t\t\t//  Para evaluar reglas del tipo rule se debe tener coleccin\n\t\t\t//  propietaria. A partir de ah se ejecutan todas las reglas\n\t\t\t//  heredadas de los padres...\n\t\t\tcoll = this.m_owner;\n\t\t\tdo {\n\t\t\t\t// Tiene coleccin propietaria\n\t\t\t\t// Primero tenemos que buscar el nodo delete\n\t\t\t\tlet deleteNode = coll.GetNode(\"delete\");\n\t\t\t\tif (deleteNode == null) return true; // No tiene nodo delete\n\t\t\t\t// Ahora buscar dentro del nodo aquellas acciones que nos interesen.\n\t\t\t\t// F11081106: El nodo del que se sacan las acciones de borrado no es el correcto.\n\t\t\t\tnodeList = deleteNode.SelectNodes(AfterActions ? \"afteraction\" : \"action\");\n\t\t\t\tfor (let i = 0; i < nodeList.count(); i++) {\n\t\t\t\t\t// Ejecutar las acciones\n\t\t\t\t\tlet node = nodeList.get(i);\n\t\t\t\t\tif (!this.EvaluateNodeRules(node)) continue;\n\t\t\t\t\t// A12081701: Mecanismo para pasar parmetros a un nodo de accin.\n\t\t\t\t\t// Esto no lleva argumentos... por ahora.\n\t\t\t\t\tif (!(await this.ExecuteNodeAction(null, node, 2, null))) return false;\n\t\t\t\t} // Ejecutar las acciones\n\t\t\t\tcoll = coll.getParentCollection();\n\t\t\t} while (coll != null);\n\n\t\t\treturn true;\n\t\t} catch (ex) {\n\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\tlet sMessage = ex.message;\n\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_GENERALFAIL, \"{0} failed. \");\n\t\t\tsb = sb.replace(\"{0}\", \"CXoneDataObject::ExecuteDeleteActions\");\n\t\t\tif (!TextUtils.isEmpty(sMessage)) {\n\t\t\t\tsb = sb.concat(sMessage);\n\t\t\t}\n\t\t\tthrow new XoneGenericException(-10171, ex, sb);\n\t\t}\n\t}\n\t//#endregion\n\t//#region ROWID\n\t/**\n\t * Devuelve o asigna valor al ROWID del objeto. Respeta los nombres de campos y dems cosas.\n\t * @return\t\tDevuelve el valor del ROWID de este objeto.\n\t * @throws Exception\n\t */\n\tpublic getRowId(): string {\n\t\treturn StringUtils.SafeToString(this.get(this.m_owner.getConnection().getRowIdFieldName()));\n\t}\n\n\t/**\n\t * Asigna valor al ROWID del objeto, colocndolo en su campo correspondiente.\n\t * @param value\t\tNuevo valor del ROWID (sin comillas)\n\t * @throws Exception\n\t */\n\tpublic setRowId(value: string): void {\n\t\tthis.put(this.m_owner.getConnection().getRowIdFieldName(), value);\n\t}\n\t//#endregion\n\n\t/**\n\t * Asigna valor a la bandera que indica si el objeto debe cumplir las reglas de borrado o no cuando se llama\n\t * a DeleteObject para eliminarlo de la base de datos.\n\t * @param value\t\tTRUE para indicar que se sigan las reglas (valor por defecto) FALSE para que no se cumplan.\n\t */\n\tpublic setFollowRules(value: boolean): void {\n\t\tthis.m_bFollowRules = value;\n\t}\n}\n","import IResultSet from \"../../Interfaces/IResultSet\";\nimport { SqlParser } from \"../../Parsers/SQL/SqlParser\";\nimport StringUtils from \"../../Utils/StringUtils\";\nimport TextUtils from \"../../Utils/TextUtils\";\n\nexport default class XoneTestResulset implements IResultSet {\n\n    private m_stringData = ['Valor prueba texto', 'Texto corto', '0002346', 'Otro texto', 'Un texto mas largo de prueba', 'Mas texto'];\n    private m_nIterate: number;\n    private m_parsed: SqlParser;\n    private m_maxRows = 100;\n\n    /**\n     *\n     */\n    constructor(strCmd: string) {\n        this.m_nIterate = 0;\n        this.m_parsed = new SqlParser(\"ROWID\");\n        this.m_parsed.ParseSqlString(strCmd)\n    }\n\n    isResultset: boolean = true;\n\n    getBytes(fld: string): number[] {\n        return null;\n    }\n    getColumnCount(): number {\n        return this.m_parsed.getQueryFields().length;\n    }\n    getColumnTypes(): number[] {\n        return [1, 2, 3, 4, 5, 6, 7, 8];\n    }\n    getColumnName(ordinal: number): string {\n        if (ordinal < this.m_parsed.getQueryFields().length) {\n            let name = this.m_parsed.getQueryFields()[ordinal].getResolvedName();\n            if (name.endsWith('*') || TextUtils.isEmpty(name))\n                name = \"Column\" + ordinal;\n            return name;\n        }\n        return \"Column\" + ordinal;\n    }\n    getData() {\n        return this.m_stringData;\n    }\n    close(): void {\n        this.m_nIterate = 0;\n    }\n    getValue(fld: string | number, nType: number) {\n        switch (nType) {\n            case 0: // Numero\n                return Math.floor(Math.random() * (1000 - 1)) + 1;\n            case 2:\n                return Math.random() * (1000 - 1) + 1;\n            case 3:\n                return new Date();\n            default:\n                return this.m_stringData[Math.floor(Math.random() * 6)];\n        }\n        return \"Test Value\";\n    }\n    getString(fld: string | number): string {\n        return \"test string\";\n    }\n    getInt(fld: string): number {\n        return Math.floor(Math.random() * (1000 - 1)) + 1;\n    }\n    getDate(fld: string): Date {\n        return new Date();\n    }\n    public async next(): Promise<boolean> {\n        return this.m_nIterate++ != this.m_maxRows;\n    }\n    public async EOF(): Promise<boolean> {\n        return this.m_nIterate == this.m_maxRows;\n    }\n    public async moveTo(position: number): Promise<boolean> {\n        return position == this.m_maxRows || (this.m_nIterate = position) == this.m_maxRows;\n    }\n\n}","window.isMobile = function() {\n  let check = false;\n  (function(a) {\n    if (\n      /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\n        a\n      ) ||\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(\n        a.substr(0, 4)\n      )\n    )\n      check = true;\n  })(navigator.userAgent || navigator.vendor || window.opera);\n  return check;\n};\n","import { timeStamp } from \"console\";\n\nexport class XoneError {\n\tprivate m_code: number;\n\tprivate m_description: string;\n\tprivate m_failedSql: string;\n\t\n\tclear() {\n\n\t}\n\n\tgetDescription() {\n\t\treturn this.m_description;\n\t}\n\n\tgetFailedSql() {\n\t\treturn this.m_failedSql;\n\t}\n\n\tsetFailedSql(failedSql:string) {\n\t\tthis.m_failedSql=failedSql;\n\t}\n\n\tgetNumber():number {\n\t\treturn this.m_code;\n\t}\n\n\tsetNumber(code:number) {\n\t\tthis.m_code=code;\n\t}\n\n\tsetDescription(description: string) {\n\t\tthis.m_description=description;\n\t}\n\n\n}","export const XoneMessageKeys = {\n    SYS_MSG_GENERALFAIL : \"SYS_MSG_GENERALFAIL\",\n    SYS_MSG_DATASRCFAIL : \"SYS_MSG_DATASRCFAIL\",\n    SYS_MSG_FILENOTFOUND : \"SYS_MSG_FILENOTFOUND\",\n    SYS_MSG_FILENOTFOUND_01 : \"SYS_MSG_FILENOTFOUND_01\",\n    SYS_MSG_FORMULAERROR : \"SYS_MSG_FORMULAERROR\",\n    SYS_MSG_COLL_CIRCULARCOLLDEF : \"SYS_MSG_COLL_CIRCULARCOLLDEF\",\n    SYS_MSG_COLL_UNDEFINEDFIELD : \"SYS_MSG_COLL_UNDEFINEDFIELD\",\n    SYS_MSG_COLL_NONAME : \"SYS_MSG_COLL_NONAME\",\n    SYS_MSG_COLL_CANNOTCREATEOBJ : \"SYS_MSG_COLL_CANNOTCREATEOBJ\",\n    SYS_MSG_COLL_SQLPARSEERROR : \"SYS_MSG_COLL_SQLPARSEERROR\",\n    SYS_MSG_COLL_SQLPARSEERROR_01 : \"SYS_MSG_COLL_SQLPARSEERROR_01\",\n    SYS_MSG_COLL_CANNOTQUALIFY : \"SYS_MSG_COLL_CANNOTQUALIFY\",\n    SYS_MSG_COLL_XPROPVALUEFAIL : \"SYS_MSG_COLL_XPROPVALUEFAIL\",\n    SYS_MSG_COLL_PREPARESQLFAIL : \"SYS_MSG_COLL_PREPARESQLFAIL\",\n    SYS_MSG_COLL_COLLCONNOPENERR : \"SYS_MSG_COLL_COLLCONNOPENERR\",\n    SYS_MSG_COLL_LOADALLFAIL_02 : \"SYS_MSG_COLL_LOADALLFAIL_02\",\n    SYS_MSG_COLL_LOADALLFAIL_03 : \"SYS_MSG_COLL_LOADALLFAIL_03\",\n    SYS_MSG_COLL_CREATECLONEFAIL : \"SYS_MSG_COLL_CREATECLONEFAIL\",\n    SYS_MSG_COLL_GETROWCOUNTFAIL : \"SYS_MSG_COLL_GETROWCOUNTFAIL\",\n    SYS_MSG_COLL_EXECUTENODEFAIL : \"SYS_MSG_COLL_EXECUTENODEFAIL\",\n    SYS_MSG_COLL_EMBEDFILTERFAIL : \"SYS_MSG_COLL_EMBEDFILTERFAIL\",\n    SYS_MSG_COLL_LOOKUPOBJFAIL_02 : \"SYS_MSG_COLL_LOOKUPOBJFAIL_02\",\n    SYS_MSG_COLL_LOOKUPOBJFAIL_03 : \"SYS_MSG_COLL_LOOKUPOBJFAIL_03\",\n    SYS_MSG_COLL_EVALMACROFAIL_01 : \"SYS_MSG_COLL_EVALMACROFAIL_01\",\n    SYS_MSG_COLL_EVALMACROFAIL_02 : \"SYS_MSG_COLL_EVALMACROFAIL_02\",\n    SYS_MSG_COLL_FIELDEXISTSFAIL : \"SYS_MSG_COLL_FIELDEXISTSFAIL\",\n    SYS_MSG_COLL_LOADCURRITEMFAIL_01 : \"SYS_MSG_COLL_LOADCURRITEMFAIL_01\",\n    SYS_MSG_OBJ_GENERATEFLDFAIL : \"SYS_MSG_OBJ_GENERATEFLDFAIL\",\n    SYS_MSG_OBJ_SAVEFAIL : \"SYS_MSG_OBJ_SAVEFAIL\",\n    SYS_MSG_OBJ_SAVEFAIL_02 : \"SYS_MSG_OBJ_SAVEFAIL_02\",\n    SYS_MSG_OBJ_DELETEOBJFAIL_01 : \"SYS_MSG_OBJ_DELETEOBJFAIL_01\",\n    SYS_MSG_OBJ_DELETEOBJFAIL_02 : \"SYS_MSG_OBJ_DELETEOBJFAIL_02\",\n    SYS_MSG_OBJ_CREATEFAIL_01 : \"SYS_MSG_OBJ_CREATEFAIL_01\",\n    SYS_MSG_OBJ_CREATEFAIL_02 : \"SYS_MSG_OBJ_CREATEFAIL_02\",\n    SYS_MSG_OBJ_CREATEFAIL_03 : \"SYS_MSG_OBJ_CREATEFAIL_03\",\n    SYS_MSG_OBJ_COPYPROPFAIL : \"SYS_MSG_OBJ_COPYPROPFAIL\",\n    SYS_MSG_OBJ_LINKFAIL_01 : \"SYS_MSG_OBJ_LINKFAIL_01\",\n    SYS_MSG_OBJ_LINKFAIL_02 : \"SYS_MSG_OBJ_LINKFAIL_02\",\n    SYS_MSG_OBJ_CANNOTDELETE : \"SYS_MSG_OBJ_CANNOTDELETE\",\n    SYS_MSG_OBJ_GETNORMALPROPFAIL : \"SYS_MSG_OBJ_GETNORMALPROPFAIL\",\n    SYS_MSG_OBJ_PROCESSVALFAIL : \"SYS_MSG_OBJ_PROCESSVALFAIL\",\n    SYS_MSG_OBJ_NOXLATTARGET : \"SYS_MSG_OBJ_NOXLATTARGET\",\n    SYS_MSG_OBJ_XLATMISSINGFLD : \"SYS_MSG_OBJ_XLATMISSINGFLD\",\n    SYS_MSG_OBJ_EXECUTEMETHODFAIL_01 : \"SYS_MSG_OBJ_EXECUTEMETHODFAIL_01\",\n    SYS_MSG_OBJ_EXECUTEMETHODFAIL_02 : \"SYS_MSG_OBJ_EXECUTEMETHODFAIL_02\",\n    SYS_MSG_OBJ_RESTOREMAPFLDFAIL_01 : \"SYS_MSG_OBJ_RESTOREMAPFLDFAIL_01\",\n    SYS_MSG_OBJ_RESTOREMAPFLDFAIL_02 : \"SYS_MSG_OBJ_RESTOREMAPFLDFAIL_02\",\n    SYS_MSG_OBJ_RESTOREMAPFLDFAIL_03 : \"SYS_MSG_OBJ_RESTOREMAPFLDFAIL_03\",\n    SYS_MSG_OBJ_LOADCONTENTFAIL_01 : \"SYS_MSG_OBJ_LOADCONTENTFAIL_01\",\n    SYS_MSG_OBJ_LOADCONTENTFAIL_02 : \"SYS_MSG_OBJ_LOADCONTENTFAIL_02\",\n    SYS_MSG_OBJ_REPLFLDVALUEMACROFAIL : \"SYS_MSG_OBJ_REPLFLDVALUEMACROFAIL\",\n    SYS_MSG_OBJ_PUTITEMFAIL : \"SYS_MSG_OBJ_PUTITEMFAIL\",\n    SYS_MSG_OBJ_GETFORMULAPROPFAIL_01 : \"SYS_MSG_OBJ_GETFORMULAPROPFAIL_01\",\n    SYS_MSG_OBJ_GETFORMULAPROPFAIL_02 : \"SYS_MSG_OBJ_GETFORMULAPROPFAIL_02\",\n    SYS_MSG_OBJ_GETEXTFORMULAFAIL : \"SYS_MSG_OBJ_GETEXTFORMULAFAIL\",\n    SYS_MSG_OBJ_CHKUNIQFLDFAIL_01 : \"SYS_MSG_OBJ_CHKUNIQFLDFAIL_01\",\n    SYS_MSG_OBJ_CHKUNIQFLDFAIL_02 : \"SYS_MSG_OBJ_CHKUNIQFLDFAIL_02\",\n    SYS_MSG_OBJ_UPDDEPTHFAIL_01 : \"SYS_MSG_OBJ_UPDDEPTHFAIL_01\",\n    SYS_MSG_OBJ_UPDDEPTHFAIL_02 : \"SYS_MSG_OBJ_UPDDEPTHFAIL_02\",\n    SYS_MSG_OBJ_UPDATECNTFAIL : \"SYS_MSG_OBJ_UPDATECNTFAIL\",\n    SYS_MSG_OBJ_SETVALFAIL : \"SYS_MSG_OBJ_SETVALFAIL\",\n    SYS_MSG_OBJ_DOLINKFAIL : \"SYS_MSG_OBJ_DOLINKFAIL\",\n    SYS_MSG_OBJ_SETFLDVALFAIL : \"SYS_MSG_OBJ_SETFLDVALFAIL\",\n    SYS_MSG_OBJ_MAPVALFAIL : \"SYS_MSG_OBJ_MAPVALFAIL\",\n    SYS_MSG_OBJ_EXECCOMPSQLFAIL_01 : \"SYS_MSG_OBJ_EXECCOMPSQLFAIL_01\",\n    SYS_MSG_OBJ_EXECCOMPSQLFAIL_02 : \"SYS_MSG_OBJ_EXECCOMPSQLFAIL_02\",\n    SYS_MSG_OBJ_RULEFAIL : \"SYS_MSG_OBJ_RULEFAIL\",\n    SYS_MSG_OBJ_RULEFAIL_02 : \"SYS_MSG_OBJ_RULEFAIL_02\",\n    SYS_MSG_OBJ_FAILIFNULLFAIL : \"SYS_MSG_OBJ_FAILIFNULLFAIL\",\n    SYS_MSG_OBJ_EOFRULEFAIL : \"SYS_MSG_OBJ_EOFRULEFAIL\",\n    SYS_MSG_OBJ_COMPARENUMBERFAIL : \"SYS_MSG_OBJ_COMPARENUMBERFAIL\",\n    SYS_MSG_OBJ_INCORRECTVALUE : \"SYS_MSG_OBJ_INCORRECTVALUE\",\n    SYS_MSG_CONN_CONNFACTORY : \"SYS_MSG_CONN_CONNFACTORY\",\n    SYS_MSG_CONN_LOADERROR : \"SYS_MSG_CONN_LOADERROR\",\n    SYS_MSG_CONN_RPLLOADERROR : \"SYS_MSG_CONN_RPLLOADERROR\",\n    SYS_MSG_CONN_INCORRECVALUE : \"SYS_MSG_CONN_INCORRECVALUE\",\n    SYS_MSG_CONN_INNERCMDNULL : \"SYS_MSG_CONN_INNERCMDNULL\",\n    SYS_MSG_CONN_INVALIDACTION : \"SYS_MSG_CONN_INVALIDACTION\",\n    SYS_MSG_CONN_CMDNOTINITIALIZED : \"SYS_MSG_CONN_CMDNOTINITIALIZED\",\n    SYS_MSG_CONN_CONNNOTINITIALIZED : \"SYS_MSG_CONN_CONNNOTINITIALIZED\",\n    SYS_MSG_CONN_CLIENTFILENOTFOUND : \"SYS_MSG_CONN_CLIENTFILENOTFOUND\",\n    SYS_MSG_CONN_SQLSYNTAXERROR : \"SYS_MSG_CONN_SQLSYNTAXERROR\",\n    SYS_MSG_CONN_SQLPARSEERROR : \"SYS_MSG_CONN_SQLPARSEERROR\",\n    SYS_MSG_CONN_INVALIDPARAMVAL : \"SYS_MSG_CONN_INVALIDPARAMVAL\",\n    SYS_MSG_CONN_QUEUEINSERTERROR_01 : \"SYS_MSG_CONN_QUEUEINSERTERROR_01\",\n    SYS_MSG_CONN_QUEUEINSERTERROR_02 : \"SYS_MSG_CONN_QUEUEINSERTERROR_02\",\n    SYS_MSG_CONN_INCORRECTPARAM_01 : \"SYS_MSG_CONN_INCORRECTPARAM_01\",\n    SYS_MSG_CONN_INCORRECTPARAM_02 : \"SYS_MSG_CONN_INCORRECTPARAM_02\",\n    SYS_MSG_CONN_INVALIDCONNSTRING : \"SYS_MSG_CONN_INVALIDCONNSTRING\",\n    SYS_MSG_APP_CANNOTCREATEMAINCONN : \"SYS_MSG_APP_CANNOTCREATEMAINCONN\",\n    SYS_MSG_APP_OPENCONNERROR : \"SYS_MSG_APP_OPENCONNERROR\",\n    SYS_MSG_APP_LOGONNOUSERCOLL : \"SYS_MSG_APP_LOGONNOUSERCOLL\",\n    SYS_MSG_APP_LOGONUSERNOTFOUND : \"SYS_MSG_APP_LOGONUSERNOTFOUND\",\n    SYS_MSG_APP_UNKNOWNSYSMACRO : \"SYS_MSG_APP_UNKNOWNSYSMACRO\",\n    SYS_MSG_APP_ONLOGONFAILED : \"SYS_MSG_APP_ONLOGONFAILED\",\n    SYS_MSG_APP_ENTIDLEVELFAILED_01 : \"SYS_MSG_APP_ENTIDLEVELFAILED_01\",\n    SYS_MSG_APP_NOCOMPANYCOLL : \"SYS_MSG_APP_NOCOMPANYCOLL\",\n    SYS_MSG_APP_NOCOMPANY : \"SYS_MSG_APP_NOCOMPANY\",\n    SYS_MSG_XERR_UNKNOWNMETHOD : \"SYS_MSG_XERR_UNKNOWNMETHOD\",\n    SYS_MSG_CTX_STAKUNDERFLOW : \"SYS_MSG_CTX_STAKUNDERFLOW\",\n    SYS_MSG_USR_READONLYFIELD : \"SYS_MSG_USR_READONLYFIELD\",\n    SYS_MSG_SQL_STRIPFIELDERROR : \"SYS_MSG_SQL_STRIPFIELDERROR\",\n    SYS_MSG_SQL_ADDFIELDERROR : \"SYS_MSG_SQL_ADDFIELDERROR\",\n    SYS_MSG_SQL_EMPTYBUFFERERROR : \"SYS_MSG_SQL_EMPTYBUFFERERROR\",\n    SYS_MSG_SQL_INCOMPLETETOKEN : \"SYS_MSG_SQL_INCOMPLETETOKEN\",\n    SYS_MSG_SQL_SYNTAXERROR : \"SYS_MSG_SQL_SYNTAXERROR\",\n    SYS_MSG_DBG_LINKDISCONNECTED : \"SYS_MSG_DBG_LINKDISCONNECTED\",\n    SYS_MSG_VBS_BADPARAMCOUNT : \"SYS_MSG_VBS_BADPARAMCOUNT\"\n}","import Hashtable from \"../Collections/HashMap/Hashtable\";\nimport Vector from \"../Collections/Vector\";\nimport XoneConnectionData from \"../Connection/XoneConnectionData\";\nimport { Exception } from \"../Exceptions/Exception\";\nimport XoneGenericException from \"../Exceptions/XoneGenericException\";\nimport { XoneMessageKeys } from \"../Exceptions/XoneMessageKeys\";\nimport IResultSet from \"../Interfaces/IResultSet\";\nimport { QueryTable } from \"../Parsers/SQL/QueryTable\";\nimport { SqlParser } from \"../Parsers/SQL/SqlParser\";\nimport Calendar from \"../Utils/Calendar\";\nimport DataUtils from \"../Utils/DataUtils\";\nimport NumberUtils from \"../Utils/NumberUtils\";\nimport ObjUtils from \"../Utils/ObjUtils\";\nimport SqlType from \"../Utils/SqlType\";\nimport StringBuilder from \"../Utils/StringBuilder\";\nimport StringUtils from \"../Utils/StringUtils\";\nimport TextUtils from \"../Utils/TextUtils\";\nimport { Utils } from \"../Utils/Utils\";\nimport { XoneDataCollection } from \"./XoneDataCollection\";\nimport { XoneDataObject } from \"./XoneDataObject\";\nimport XoneLookupObject from \"./XoneLookupObject\";\n\nenum MovePtrType {\n\tMOVE_PTR_FIRST = 1,\n\tMOVE_PTR_LAST,\n\tMOVE_PTR_NEXT,\n\tMOVE_PTR_PREV,\n}\n\n// type PageCall {\n//     start: number,\n//     length: number\n// }\n\n// type OnlineCall {\n//     count: number,\n//     coll: string,\n//     page: PageCall,\n//     loadall: boolean\n// }\n\nexport default class XoneBrowseData {\n\tprivate m_dataColl: XoneDataCollection;\n\tprivate m_nBrowseLength: number;\n\tprivate m_nCurrentIndex: number;\n\tprivate m_nCurrentRow: number;\n\tprivate m_rs: IResultSet;\n\tprivate m_bIsSpecial: boolean;\n\tprivate m_parsedAccessString: SqlParser;\n\tprivate m_connection: XoneConnectionData;\n\tprivate m_strConnectionName: string;\n\tprivate m_lstOrderedList: Array<XoneDataObject>;\n\tprivate m_lstObjectList: Hashtable<string, XoneDataObject>;\n\tprivate m_lookupObject: XoneLookupObject;\n\tprivate m_lstCopyList: Vector<XoneDataObject>;\n\tprivate m_lstObjectLru: Vector<XoneDataObject>;\n\tprivate m_nBrowseOrder: number;\n\t/**\n\t *  Lista con los mapeos de nombres de campos para el trabajo con nombres de sistema\n\t */\n\tprivate m_lstFieldMappings: Hashtable<string, string>;\n\tprivate m_pCurrentItem: any;\n\tprivate m_bDeferredLoad: any;\n\tprivate m_bSingleObject: any;\n\tprivate m_nMaxRows: number;\n\tprivate m_bHasTopRow: boolean;\n\tprivate m_pTopRowItem: any;\n\tprivate m_currentStart: number;\n\tprivate m_currentLength: number;\n\tprivate m_bIsFetchDataRunning: boolean;\n\n\t/**\n\t *\n\t */\n\tconstructor(dataColl: XoneDataCollection) {\n\t\tthis.m_dataColl = dataColl;\n\t\tlet str = \"\";\n\t\tthis.m_lookupObject = new XoneLookupObject(dataColl.getOwnerApp(), dataColl);\n\t\t// Crear la lista interna\n\t\tthis.m_lstObjectList = new Hashtable<string, XoneDataObject>();\n\t\tthis.m_lstOrderedList = new Array<XoneDataObject>();\n\t\tthis.m_lstObjectLru = new Vector<XoneDataObject>();\n\t\tthis.m_lstFieldMappings = new Hashtable<string, string>();\n\t\tthis.m_currentStart = 0;\n\t\tthis.m_currentLength = 1;\n\t\tthis.m_nCurrentIndex = 0;\n\t\tthis.m_bIsFetchDataRunning = false;\n\t\tif (!StringUtils.IsEmptyString((str = this.DataColl.CollPropertyValue(\"connection\")))) {\n\t\t\t// Guardar el nombre\n\t\t\tthis.m_strConnectionName = str;\n\t\t\t// Intenta obtener la conexin ya aqu... si no la encuentra, no pasa nada\n\t\t\tthis.m_connection = this.DataColl.getOwnerApp().getConnection(this.m_strConnectionName);\n\t\t} // Guardar el nombre\n\t\t// F11051804: Si hay atributo userawsql en una coleccin, no se coge la conexin correcta.\n\t\t// Esta es por defecto...\n\t\telse this.m_connection = this.DataColl.getOwnerApp().getConnection();\n\t}\n\n\tprivate get DataColl(): XoneDataCollection {\n\t\treturn this.m_dataColl;\n\t}\n\n\tprivate get Options(): any {\n\t\treturn this.m_dataColl.Options;\n\t}\n\n\tprivate isEquivalent(a, b) {\n\t\t// Create arrays of property names\n\t\tvar aProps = Object.getOwnPropertyNames(a);\n\t\tvar bProps = Object.getOwnPropertyNames(b);\n\n\t\t// If number of properties is different,\n\t\t// objects are not equivalent\n\t\tif (aProps.length != bProps.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (var i = 0; i < aProps.length; i++) {\n\t\t\tvar propName = aProps[i];\n\n\t\t\t// If values of same property are not equal,\n\t\t\t// objects are not equivalent\n\t\t\tif (a[propName] !== b[propName]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// If we made it this far, objects\n\t\t// are considered equivalent\n\t\treturn true;\n\t}\n\n\tpublic AddItem(Item: XoneDataObject, Index: number = -1): boolean {\n\t\tlet bAdd = true;\n\t\tlet str = \"\",\n\t\t\tstrKey = \"\";\n\t\tlet objLru: XoneDataObject;\n\t\tif (this.m_lstCopyList != null) {\n\t\t\tthis.m_lstCopyList = new Vector<XoneDataObject>();\n\t\t}\n\t\t//\n\t\t// Primero ver si hay clave\n\t\tif (\"NULL\".equals((strKey = Item.GetObjectIdString()))) strKey = null;\n\t\t//\n\t\t// Si ahora no la tiene, jodo est el pobre\n\t\tif (!StringUtils.IsEmptyString(strKey)) {\n\t\t\t// Tiene clave\n\t\t\t// Buscar si ya este objeto est en la coleccin\n\t\t\tif (this.m_lstObjectList.containsKey(strKey)) {\n\t\t\t\t// Ya hay un objeto con esta clave\n\t\t\t\tlet old = this.m_lstObjectList.get(strKey);\n\t\t\t\tif (old != null)\n\t\t\t\t\tif ((bAdd = !this.isEquivalent(old, Item))) {\n\t\t\t\t\t\tif (this.m_lstOrderedList.contains(old)) this.m_lstOrderedList.remove(old);\n\t\t\t\t\t\tif (this.m_lstObjectLru.contains(old)) this.m_lstObjectLru.removeElement(old);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t// Comprobar si es este mismo\n\t\t\t\t//bAdd = false; // Es diferente\n\t\t\t} // Ya hay un objeto con esta clave\n\t\t\tif (bAdd) {\n\t\t\t\t// Hay que adicionar\n\t\t\t\tthis.m_lstObjectList.put(strKey, Item);\n\t\t\t} // Hay que adicionar\n\t\t} // Tiene clave\n\t\t// Si la coleccin tiene lmite, tenemos que cargarnos el objeto menos recientemente\n\t\t// accedido, de manera que el nuevo pase a ser el ms recientemente usado...\n\t\tif (this.Options.nThreshold > 0) {\n\t\t\t// Ver si se ha sobrepasado el lmite\n\t\t\tif (this.m_lstObjectLru.contains(Item)) this.m_lstObjectLru.removeElement(Item); // Existe en el LRU, eliminarlo de la lista\n\t\t\t// Ahora buscar el menos recientemente usado y sacarlo de la lista\n\t\t\tif (this.m_lstOrderedList.length >= this.Options.nThreshold) {\n\t\t\t\t// Buscar el menos recientemente usado\n\t\t\t\tobjLru = this.m_lstObjectLru[0]; // El primero\n\t\t\t\tif (!StringUtils.IsEmptyString((str = objLru.GetObjectIdString()))) {\n\t\t\t\t\t// Si est en el hash, nos lo cargamos\n\t\t\t\t\tif (this.m_lstObjectList.containsKey(str)) this.m_lstObjectList.delete(str);\n\t\t\t\t} // Si est en el hash, nos lo cargamos\n\t\t\t\t// Ahora nos lo cargamos de la lista\n\t\t\t\tthis.m_lstOrderedList.remove(0);\n\t\t\t\t// Y del LRU\n\t\t\t\tthis.m_lstObjectLru.removeElement(objLru);\n\t\t\t} // Buscar el menos recientemente usado\n\t\t} // Ver si se ha sobrepasado el lmite\n\t\tif (Index >= 0) {\n\t\t\t// Tiene ndice\n\t\t\tif (this.m_lstOrderedList.length > Index) this.m_lstOrderedList.add(Index, Item);\n\t\t\telse this.m_lstOrderedList.push(Item);\n\t\t} // Tiene ndice\n\t\telse {\n\t\t\t// Adicionar a la lista\n\t\t\t// Si no est en lista, lo adicionamos\n\t\t\tif (!this.m_lstOrderedList.contains(Item)) this.m_lstOrderedList.push(Item);\n\t\t} // Adicionar a la lista\n\t\t// Si hay LRU, adicionar al final\n\t\tif (this.Options.nThreshold > 0) this.m_lstObjectLru.push(Item); // Adicionar este al final\n\t\t// Si se ha adicionado, actualizar el BL solo si es especial\n\t\tif (this.m_bIsSpecial) this.m_nBrowseLength = this.m_lstOrderedList.length;\n\t\t// Completo\n\t\treturn true;\n\t}\n\n\t/**\n\t * Devuelve el ndice de un objeto dentro de la coleccin\n\t * @param Item\t\t\tObjeto cuyo ndice se quiere conocer.\n\t * @return\t\t\t\tDevuelve el ndice del objeto o -1 si no est en la lista.\n\t */\n\tpublic ObjectIndex(Item: XoneDataObject): number {\n\t\t// Si no est, no est...\n\t\tif (!this.m_lstOrderedList.contains(Item)) return -1;\n\t\tfor (let i = 0; i < this.m_lstOrderedList.length; i++) if (this.m_lstOrderedList[i] === Item) return i;\n\t\t// Completo\n\t\treturn -1;\n\t}\n\n\tpublic GetObjectInt(Index: number): XoneDataObject {\n\t\t// Devolver el elemento indicado por Index\n\t\tif (this.m_lstOrderedList.length <= Index) return null;\n\t\tif (Index < 0) Index = 0;\n\t\treturn this.m_lstOrderedList[Index];\n\t}\n\n\tpublic get ObjectList(): Hashtable<string, Object> {\n\t\treturn this.m_lstObjectList;\n\t}\n\n\t/**\n\t * Devuelve un objeto cuya clave se pasa como parmetro. Busca en coleccin primero y si no se encuentra se busca\n\t * en la base de datos siguiendo el criterio de esta clave.\n\t * @param Key\t\tClave de acceso (ID llevado a cadena o clave de texto que lo identifica)\n\t * @return\t\t\tDevuelve el objeto cuya clave corresponde con el parmetro indicado.\n\t * @throws Exception\n\t */\n\tpublic async GetObjectSring(Key: string): Promise<XoneDataObject> {\n\t\t// Buscar en la lista de objetos en memoria por la clave\n\t\tif (this.m_lstObjectList.containsKey(Key)) return this.m_lstObjectList.get(Key);\n\t\t// De lo contrario habr que buscarlo...\n\t\tlet strField = this.DataColl.getIdFieldName();\n\t\tlet objVal: Object = null;\n\t\tif (this.Options.bStringPk) objVal = Key;\n\t\telse objVal = NumberUtils.SafeToInt(Key);\n\t\tif (objVal == null) return null;\n\t\t// Ahora tenemos que buscar usando esta pareja como si fuera una bsqueda normal\n\t\treturn await this.GetObject(strField, objVal);\n\t}\n\n\tpublic GetLocalObject(FieldName: string | number | Object, FieldValue?: Object): XoneDataObject {\n\t\t// Buscar un objeto por campo=valor tiene su moa\n\t\t//let obj: XoneDataObject = null;\n\t\tif (typeof FieldName === \"number\") return this.GetObjectInt(FieldName as number);\n\t\tif (FieldValue == null) {\n\t\t\tconst Key = FieldName as string;\n\t\t\tif (this.m_lstObjectList.containsKey(Key)) return this.m_lstObjectList.get(Key);\n\t\t}\n\t\t//return this.GetObjectSring(FieldName as string);\n\n\t\t// Primero buscar en la lista en memoria\n\t\t// F11110901: La bsqueda de objetos en cache debe hacerse en el OrderedList.\n\t\t// Busquemos en la lista ordenada porque igual es el mayor conjunto\n\t\t// Luis: Creo que debemos ser mas permisivos\n\t\tlet e = this.m_lstOrderedList.entries;\n\t\tfor (let i = 0; i < e.length; i++) {\n\t\t\t// Si alguno tiene este valor, lo devolvemos\n\t\t\tlet v = e[i];\n\t\t\t// F11092604: Al buscar un objeto por campo/valor, si el campo no existe lanzar un error.\n\t\t\t// v!=null && v.get(FieldName)!=null &&  Por Ahora no lo he puesto porque tenemos que ver\n\t\t\t// y creo que es mejor lanzar una error con que el campo no esta definido en el mapping, que es la causa casi segura\n\t\t\t// TODO ADD TAG Luis Proteccion cuando un valor es null\n\t\t\t//if (v.get(FieldName).equals(FieldValue))\n\t\t\tif (ObjUtils.EqualObj(v.get(FieldName), FieldValue)) return v;\n\t\t} // Si alguno tiene este valor, lo devolvemos\n\n\t\treturn null;\n\t}\n\n\tpublic async GetObject(\n\t\tFieldName: string | number | Object,\n\t\tFieldValue?: Object,\n\t\tUseFilters: boolean = true,\n\t\tSearchDb: boolean = true\n\t): Promise<XoneDataObject> {\n\t\t// Buscar un objeto por campo=valor tiene su moa\n\t\tlet obj: XoneDataObject = null;\n\t\tif (typeof FieldName === \"number\") return this.GetObjectInt(FieldName as number);\n\t\tif (FieldValue == null) return await this.GetObjectSring(FieldName as string);\n\n\t\t// Primero buscar en la lista en memoria\n\t\t// F11110901: La bsqueda de objetos en cache debe hacerse en el OrderedList.\n\t\t// Busquemos en la lista ordenada porque igual es el mayor conjunto\n\t\t// Luis: Creo que debemos ser mas permisivos\n\t\t// let e =this.m_lstOrderedList.entries;\n\t\t// for (let i=0;i<e.length;i++)\n\t\t// {// Si alguno tiene este valor, lo devolvemos\n\t\t// \tlet v =e[i];\n\t\t// \t// F11092604: Al buscar un objeto por campo/valor, si el campo no existe lanzar un error.\n\t\t// \t// v!=null && v.get(FieldName)!=null &&  Por Ahora no lo he puesto porque tenemos que ver\n\t\t// \t// y creo que es mejor lanzar una error con que el campo no esta definido en el mapping, que es la causa casi segura\n\t\t// \t// TODO ADD TAG Luis Proteccion cuando un valor es null\n\t\t//     //if (v.get(FieldName).equals(FieldValue))\n\t\t// \tif (ObjUtils.EqualObj(v.get(FieldName),FieldValue))\n\t\t//         return v;\n\t\t// }// Si alguno tiene este valor, lo devolvemos\n\n\t\t// M09072902:\tOptimizaciones varias en las bsquedas de objetos.\n\t\t// Mover esto para aqu... si no hay que buscar en base de datos habr que irse antes\n\t\t// Este tipo de campo es especial...\n\t\t// ADD TAG Luis si es especial no buscar en BD\n\t\tif ((FieldName as string)?.equals(\"MAP_$KEY\") || this.m_bIsSpecial) SearchDb = false;\n\t\t// Si no hay que buscar en base de datos no lo hacemos\n\t\tif (SearchDb && obj == null) {\n\t\t\t// Buscar en base de datos\n\t\t\t// M09072902:\tOptimizaciones varias en las bsquedas de objetos.\n\t\t\t// Mover estas cosas para dentro de esta condicin porque no tienen sentido si no hay\n\t\t\t// que buscar en base de datos.\n\t\t\t// No lo tiene, seguramente habr que buscar en base de datos\n\t\t\t// Comprobar si el campo es el de ID, en cuyo caso habr que hacer algunas conversiones\n\t\t\tlet strKeySearch = await this.GenerateKeySearch(FieldName as string, FieldValue);\n\t\t\tlet strCmd = await this.GenerateSearchSql(strKeySearch);\n\t\t\t// Buscar en base de datos\n\t\t\treturn await this.LookupObject(strCmd, strKeySearch, await this.IsSqlPrefiltered());\n\t\t\t//   if (\n\t\t\t//     null !=\n\t\t\t//     (obj =\n\t\t\t//   ) {\n\t\t\t//     // Lo tenemos\n\t\t\t//     obj.OnNormalSearh();\n\t\t\t//     return obj;\n\t\t\t//   } // Lo tenemos\n\t\t} // Buscar en base de datos\n\t\t//\n\t\t// TODO:    Ver si pasamos el mecanismo de helpers para otros tipos de bsqueda y tal...\n\t\t// Al final devolver lo que setenga\n\t\treturn obj;\n\t}\n\n\tpublic async LookupObject(strCmd: string, strKeySearch: string, arg2: boolean): Promise<XoneDataObject> {\n\t\treturn await this.m_lookupObject.LookupObject(strCmd, strKeySearch, arg2);\n\t}\n\n\t/**\n\t * Efecta una bsqueda en la base de datos dado un criterio de bsqueda tipo WHERE. Si se encuentra el objeto, se adiciona a la coleccin.\n\t * @param SearchCriteria\t\t\t\tCriteriors de bsqueda para armar la sentencia SQL\n\t * @return\t\t\t\t\t\t\t\tDevuelve el objeto buscado segn los criterios o NULL si no se puede encontrar.\n\t * @throws XoneGenericException\n\t */\n\tpublic async findObject(SearchCriteria: string): Promise<XoneDataObject> {\n\t\tlet strCmd = \"\",\n\t\t\tstr = \"\",\n\t\t\tstrTmp = \"\";\n\t\tlet obj: XoneDataObject = null;\n\n\t\ttry {\n\t\t\t// F11111103: FindObject debera limpiar el error antes de empezar a trabajar.\n\t\t\t//this.DataColl.getOwnerApp().ClearError();\n\n\t\t\tif (StringUtils.IsEmptyString(SearchCriteria)) return null;\n\t\t\t// str = await this.ApplyFilters(false);\n\t\t\t// if (!StringUtils.IsEmptyString(str))\n\t\t\t//     str = \" AND (\" + str + \")\";\n\t\t\t// Preparar los criterios\n\t\t\tstrTmp = await this.PrepareFilter(SearchCriteria);\n\t\t\t// str = strTmp + str;\t\t// Los parntesis por si las moscas\n\t\t\t// if (this.m_bSingleObject)\n\t\t\t//     strCmd = \"SELECT * FROM \" + this.DataColl.getAccessString() + \" rrss WHERE \" + str;\n\t\t\t// else {// Un query\n\t\t\t//     if (!this.DataColl.Options.bUseRaw)\n\t\t\t//         strCmd = \"SELECT * FROM (\" + this.DataColl.getAccessString() + \") rrss WHERE \" + str;\n\t\t\t//     else\n\t\t\t//         strCmd = await this.EmbedFilters(str);\n\t\t\t// }// Un query\n\t\t\tobj = await this.LookupObject(strCmd, strTmp, await this.IsSqlPrefiltered());\n\t\t\treturn obj;\n\t\t} catch (ex) {\n\t\t\t//TODO ADD TAG Juan Carlos. getMessage puede devolver null.\n\t\t\tlet sDetails = ex.message;\n\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t////throw new XoneGenericException(-1002, \"CXoneDataCollection::findObject ha fallado. \" + e.getMessage());\n\t\t\tlet sMessage = this.DataColl.GetMessage(XoneMessageKeys.SYS_MSG_GENERALFAIL, \"{0} failed. \");\n\t\t\tsMessage = sMessage.replace(\"{0}\", \"CXoneDataCollection::findObject\");\n\t\t\tif (!StringUtils.IsEmptyString(sDetails)) {\n\t\t\t\tsMessage = sMessage.concat(sDetails);\n\t\t\t}\n\t\t\tthrow new XoneGenericException(-1002, ex, sMessage);\n\t\t}\n\t}\n\n\tprivate PrepareSpecialCollection(): boolean {\n\t\t// F11090501: onprepare debe fallar si no hay nodo, porque es lo que se espera fuera.\n\t\t// Si no hay nodo, fallar...\n\t\tif (null == this.m_dataColl.getNode(\"onprepare\")) return false; // No hay nodo\n\t\t// Ejecutar las acciones de este nodo\n\t\treturn false; // TODO: ExecuteCollAction(\"onprepare\");\n\t}\n\n\tprivate async CountAsync(data: object): Promise<number> {\n\t\tlet rs = await this.DataColl.getConnection().CountAsync(null, data);\n\t\tif (rs) {\n\t\t\tif (await rs.next()) {\n\t\t\t\treturn rs.getInt(\"N\");\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\n\t/**\n\t * Inicializa un recorrido por los objetos en base de datos. Cuenta los elementos en funcin de lo que se indique como parmetro.\n\t * @param CountRecords\t\tTRUE para contar los elementos del recorrido\n\t * @return\t\t\t\t\tDevuelve TRUE si el recorrido se inicia correctamente.\n\t * @throws Exception\n\t */\n\tpublic async startBrowse(CountRecords: boolean = false, options?: any): Promise<XoneDataCollection> {\n\t\tthis.m_bIsSpecial = this.DataColl.Options.bIsSpecial;\n\t\tlet strCmd = \"\",\n\t\t\tstr = \"\",\n\t\t\tstr1 = \"\",\n\t\t\tstrAccString = \"\";\n\t\tlet bPrefiltered = false;\n\t\t//  Si es una coleccin especial, es el objeto\n\t\t//  propietario quien tiene que llenarla. Problema\n\t\t//  suyo...\n\t\tif (this.m_bIsSpecial) {\n\t\t\t// Preparar la coleccin para el recorrido\n\t\t\tif (!this.PrepareSpecialCollection()) {\n\t\t\t\t// No tiene nodo, prepararla en el propietario o fallar\n\t\t\t\tif (this.DataColl.getOwnerObject() != null) this.DataColl.getOwnerObject().PrepareSpecialCollection(this.DataColl);\n\t\t\t\tthis.m_nBrowseLength = this.m_lstOrderedList.length;\n\t\t\t\tthis.m_nCurrentIndex = 0;\n\t\t\t\tif (await this.LoadCurrentItem()) return this.DataColl;\n\t\t\t} // No tiene nodo, prepararla en el propietario o fallar\n\t\t} // Preparar la coleccin para el recorrido\n\t\telse this.EndBrowse();\n\t\twhile (this.m_bIsFetchDataRunning == true) await (() => new Promise<void>((resolve) => setTimeout(() => resolve(), 100)))();\n\t\t// Ahora hay que crear un nuevo recordset e iniciar el\n\t\t// recorrido\n\t\ttry {\n\t\t\tthis.m_bIsFetchDataRunning = true;\n\t\t\tthis.m_nCurrentRow = 0;\n\t\t\tthis.ClearCurrentItem(true); // El actual y el anterior\n\t\t\t//\n\t\t\t// Preparar el comando\n\t\t\t// Como en LoadAll, puede ser que la cadena SQL no sea vlida, as que\n\t\t\t// nos protegemos al menos de que sea una cadena vaca...\n\t\t\tif (StringUtils.IsEmptyString((strAccString = this.DataColl.getAccessString())) && !this.getConnection().acceptsEmptyQueries()) return null;\n\t\t\t// Preparar el comandillo\n\t\t\tstrCmd = \"\";\n\t\t\t// if (this.DataColl.Options.bParseSQL) {\n\t\t\t//     if (this.DataColl.Options.bSingleObject)\n\t\t\t//         strCmd = \"SELECT * FROM \" + strAccString + \" rrss\";\n\t\t\t//     else if (!this.DataColl.Options.bUseRaw)\n\t\t\t//         strCmd = \"SELECT * FROM (\" + strAccString + \") rrss\";\n\t\t\t//     // Comprobar si ya trae WHERE de antes, entonces no habr que cambiarlo por HAVING\n\t\t\t//     // porque estar bien, digo yo...\n\t\t\t//     if (this.DataColl.Options.bUseRaw && !this.DataColl.Options.bSingleObject) {// Ver si est prefiltrado\n\t\t\t//         bPrefiltered = await this.IsSqlPrefiltered();\n\t\t\t//     }// Ver si est prefiltrado\n\t\t\t//     // Aplica el filtro de enlace\n\t\t\t//     if (!this.DataColl.Options.bUseRaw)\n\t\t\t//         strCmd += await this.ApplyFilters(true);\n\t\t\t//     else\n\t\t\t//         strCmd = await this.EmbedFilters(this.m_parsedAccessString);\n\t\t\t// } else {\n\t\t\t//     strCmd = strAccString;\n\t\t\t//     bPrefiltered = false;\n\t\t\t// }\n\t\t\t// // Aplica el ordenamiento si existe\n\t\t\t// str1 = this.PrepareSort(this.DataColl.getSort());\n\t\t\t// if (!StringUtils.IsEmptyString(str1)) {// Tiene sort\n\t\t\t//     str = (\" ORDER BY \" + str1);\n\t\t\t//     strCmd += str;\n\t\t\t// }// Tiene sort\n\t\t\t// //\n\t\t\t// // Preparar las posibles macros globales\n\t\t\t// // F12042601: PrepareSqlString no delega en la aplicacin cuando se llama a la coleccin.\n\t\t\t// strCmd = this.PrepareSqlString(strCmd, false, bPrefiltered);\n\t\t\t// // Comprobar si es un contents\n\t\t\t// if (this.DataColl.getOwnerObject() != null && strCmd.contains(\"##\"))\n\t\t\t//     strCmd = this.DataColl.getOwnerObject().PrepareSqlString(strCmd);\n\t\t\t// //////if (strCmd.contains(\"##\"))\n\t\t\t// //////\tstrCmd =m_owner.PrepareSqlString(strCmd);\n\t\t\t// // Evaluar las macros\n\t\t\t// strCmd = await this.DataColl.EvaluateAllMacros(strCmd, true);\n\n\t\t\tconst swhere = await this.ResolveFilters(false, null);\n\t\t\tconst sSort = this.DataColl.getSort();\n\t\t\tthis.DataColl.ParseMacros(swhere);\n\t\t\tthis.DataColl.ParseMacros(sSort);\n\t\t\tthis.DataColl.ParseMacros(str);\n\t\t\tstrCmd = await this.DataColl.EvaluateAllMacros(str, true);\n\t\t\tconst data = {\n\t\t\t\tcoll: this.DataColl.getName(),\n\t\t\t\tmacros: this.DataColl.getMacros(),\n\t\t\t\twhere: swhere,\n\t\t\t\tsort: sSort,\n\t\t\t\tloadall: false,\n\t\t\t\tpage: {},\n\t\t\t};\n\n\t\t\t//  Los DBMS que usan el SQL tal cual no pueden sustituir el LIMIT usando macrosustitucin\n\t\t\t//  porque no se puede encerrar un SELECT dentro de otro, as que habr que ponerlo al final\n\t\t\t//  en esos casos...\n\t\t\tif (this.DataColl.Options.bDebug) {\n\t\t\t\t// Dejar traza del SQL\n\t\t\t\tstr = \"\\r\\n\" + strCmd + \"\\r\\n\";\n\t\t\t\tthis.DataColl.getOwnerApp().writeConsoleString(str);\n\t\t\t} // Dejar traza del SQL\n\t\t\t// Si estamos en debug, habr que sacar alguna cosilla\n\t\t\t// A12042503: Mecanismo para registrar un modo debug global en la aplicacin.\n\t\t\tif (this.DataColl.getIsDebugging() || this.DataColl.getOwnerApp().isDebugMode())\n\t\t\t\tUtils.DebugLog(Utils.TAG_DATABASE_LOG, \"StartBrowse: \" + strCmd);\n\t\t\t// Contar records de forma directa, por ahora no lo utilizo\n\t\t\tif (CountRecords == true)\n\t\t\t\tthis.m_nBrowseLength = await this.CountAsync({\n\t\t\t\t\t...{ count: true, page: {} },\n\t\t\t\t\t...data,\n\t\t\t\t});\n\t\t\telse this.m_nBrowseLength = -1;\n\t\t\tif (\n\t\t\t\tnull ==\n\t\t\t\t(this.m_rs = await this.getConnection().CreateRecordsetAsync(strCmd, {\n\t\t\t\t\t...{\n\t\t\t\t\t\tcount: CountRecords,\n\t\t\t\t\t\tpage: options != null ? options : {},\n\t\t\t\t\t},\n\t\t\t\t\t...data,\n\t\t\t\t}))\n\t\t\t) {\n\t\t\t\t// Error\n\t\t\t\t// Error\n\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t////throw new XoneGenericException(-1900, \"Error intentando abrir la conexin de datos de la coleccin '\" + m_strName + \"'\");\n\t\t\t\tlet sb = this.DataColl.GetMessage(XoneMessageKeys.SYS_MSG_COLL_COLLCONNOPENERR, \"Error opening connection in collection '{0}'\");\n\t\t\t\tsb = sb.replace(\"{0}\", this.DataColl.getName());\n\t\t\t\tthrow new XoneGenericException(-1900, sb);\n\t\t\t} // Error\n\t\t\t// // Obtener la cantidad de elementos\n\t\t\t// // cambio Sergio\n\t\t\t// if (CountRecords && !(this.m_rs.EOF()))\n\t\t\t//     this.m_nBrowseLength = await this.GetRowCount();    // Buscar la cantidad de elementos a recorrer\n\t\t\t// else\n\t\t\t//     this.m_nBrowseLength = -1;\n\n\t\t\t//\n\t\t\t// Supuestamente debe cargar el primer elemento de este\n\t\t\t// recorrido, no es necesario meter MoveFirst\n\t\t\t// Ahora tendr que seguir recorriendo la coleccin\n\t\t\t// Comprobar la mscara de visibilidad que tiene que comparar con cada\n\t\t\t// una de las propiedades para preparar la coleccin de campos a leer\n\t\t\tif (!(await this.MoveFirst())) {\n\t\t\t\t// Error\n\t\t\t\tthis.m_rs.close();\n\t\t\t\tthis.m_rs = null;\n\t\t\t\treturn null;\n\t\t\t} // Error\n\t\t\t// M11111701: Proteccin de colecciones abiertas por error en scripts.\n\t\t\t// Si tenemos recordset, entonces tenemos que notificarlo\n\t\t\tthis.DataColl.getOwnerApp().AddOpenColl(this.DataColl);\n\t\t\treturn this.DataColl;\n\t\t} catch (ex) {\n\t\t\tthis.m_bIsFetchDataRunning = false;\n\t\t\tconsole.error(ex);\n\t\t\t//ex.printStackTrace();\n\t\t\t// M11111701: Proteccin de colecciones abiertas por error en scripts.\n\t\t\t// Intento desesperado\n\t\t\tthis.EndBrowse();\n\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t/////throw new XoneGenericException(-1008, \"CXoneDataCollection::StartBrowse ha fallado en la coleccin '\" + m_strName + \"'. \" + e.getMessage());\n\t\t\tlet sb = this.DataColl.GetMessage(XoneMessageKeys.SYS_MSG_GENERALFAIL, \"{0} failed. \");\n\t\t\tsb = sb.replace(\"{0}\", \"CXoneDataCollection::StartBrowse\");\n\t\t\t//Juan Carlos: No todas las excepciones traen mensaje extra.\n\t\t\tlet message = ex.message;\n\t\t\tif (message != null) {\n\t\t\t\tsb = sb.concat(message);\n\t\t\t}\n\t\t\tthrow new XoneGenericException(-1008, ex, sb);\n\t\t} finally {\n\t\t\tthis.m_bIsFetchDataRunning = false;\n\t\t}\n\t}\n\n\tpublic browseLength(): number {\n\t\treturn this.m_nBrowseLength;\n\t}\n\n\t/**\n\t * @return\t\tDevuelve la cantidad de filas que se van a recorrer en un SB/EB\n\t */\n\tprivate async GetRowCount(): Promise<number> {\n\t\tlet nCount = 0;\n\t\tlet strCmd = \"\",\n\t\t\tstrAccString = \"\",\n\t\t\tstr = \"\";\n\t\tlet rs: IResultSet = null;\n\t\t// O10052501:\tPara contar las filas se pueden usar subqueries en sqlite.\n\t\tlet prefiltered = false;\n\t\tlet FunctionName = \"CXoneDataCollection::GetRowCount\";\n\n\t\ttry {\n\t\t\t// Si no hay cadena de acceso, ser que va a devolver cero filas, a menos que sea\n\t\t\t// especial, en ese caso devuelve el Count\n\t\t\tstrAccString = this.DataColl.getAccessString();\n\t\t\tif (StringUtils.IsEmptyString(strAccString)) {\n\t\t\t\t// Ver si es especial\n\t\t\t\tif (this.m_bIsSpecial) return this.getCount();\n\t\t\t} // Ver si es especial\n\t\t\t// Preparar el SQL para contar la cantidad de ocurrencias de la clave primaria\n\t\t\tif (this.m_bSingleObject) strCmd = \"SELECT COUNT(\" + this.DataColl.strPk + \") AS N FROM \" + strAccString + \" rrss \";\n\t\t\telse {\n\t\t\t\t// No es solo una tabla\n\t\t\t\t// O10052501:\tPara contar las filas se pueden usar subqueries en sqlite.\n\t\t\t\t// Usaremos un subquery aunque no est marcado para este caso concreto.\n\t\t\t\tif (!this.DataColl.Options.bUseRaw || strAccString.toLowerCase().contains(\"group by\")) {\n\t\t\t\t\t// Soporta subqueries\n\t\t\t\t\t// O10052501:\tPara contar las filas se pueden usar subqueries en sqlite.\n\t\t\t\t\t// Al haber agrupacin tendramos que cambiar WHERE por HAVING...\n\t\t\t\t\tlet tmpSql = strAccString + \" \" + StringUtils.Replace(await this.ApplyFilters(true), \" WHERE \", \" HAVING \");\n\t\t\t\t\tstrCmd = \"SELECT COUNT(\" + this.DataColl.strPk + \") AS N FROM (\" + tmpSql + \") rrss\";\n\t\t\t\t\tprefiltered = true;\n\t\t\t\t} // Soporta subqueries\n\t\t\t\telse {\n\t\t\t\t\t// No soporta subqueries\n\t\t\t\t\tif (this.m_parsedAccessString == null) if (!(await this.ParseAccessString())) return -1;\n\t\t\t\t\t// Con lo que ha sacado, armar un SQL nico para contar cada\n\t\t\t\t\t// miembro del UNION si lo hay\n\t\t\t\t\tlet lparser = new SqlParser(this.m_parsedAccessString);\n\t\t\t\t\tlparser.CopyData(this.m_parsedAccessString);\n\t\t\t\t\tif (!lparser.getIsUnionQuery()) {\n\t\t\t\t\t\t// Uno solo\n\t\t\t\t\t\tstr = \"COUNT(\" + this.QualifyField(this.DataColl.strPk) + \")\";\n\t\t\t\t\t\tlparser.clearQueryFields();\n\t\t\t\t\t\tlparser.AddField(str, \"N\");\n\t\t\t\t\t\t// Adicionar los filtros\n\t\t\t\t\t\tstrCmd = await this.EmbedFilters(lparser, null);\n\t\t\t\t\t} // Uno solo\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Unin\n\t\t\t\t\t\tfor (let i = 0; i < lparser.getUnionQueries().length; i++) {\n\t\t\t\t\t\t\t// Cada uno de los subqueries\n\t\t\t\t\t\t\tlet query = lparser.getUnionQueries()[i];\n\t\t\t\t\t\t\tstr = \"COUNT(\" + this.QualifyField(this.DataColl.strPk, query) + \")\";\n\t\t\t\t\t\t\tquery.clearQueryFields();\n\t\t\t\t\t\t\tquery.AddField(str, \"N\");\n\t\t\t\t\t\t} // Cada uno de los subqueries\n\t\t\t\t\t\t// Regenerar\n\t\t\t\t\t\tstrCmd = await this.EmbedFilters(lparser, null);\n\t\t\t\t\t} // Unin\n\t\t\t\t} // No soporta subqueries\n\t\t\t} // No es solo una tabla\n\t\t\t// Preparar las posibles macros globales\n\t\t\t// O10052501:\tPara contar las filas se pueden usar subqueries en sqlite.\n\t\t\t// Sustituciones propias de SQLITE para mejorar la ejecucin de la sentencia.\n\t\t\tstrCmd = this.getConnection().PrepareSqlString(strCmd, false, prefiltered);\n\t\t\t// M11011001:\tIncluir macros globales y evaluacin de dichas macros para IMEI y dems.\n\t\t\t// Macros y dems\n\t\t\tstrCmd = await this.DataColl.EvaluateAllMacros(strCmd, true);\n\t\t\tstrCmd = strCmd.replace(\"\\t\", \" \");\n\t\t\tstrCmd = strCmd.replace(\"\\r\", \" \");\n\t\t\tstrCmd = strCmd.replace(\"\\n\", \" \");\n\t\t\tif (this.DataColl.Options.bDebug) {\n\t\t\t\t// Dejar traza del SQL\n\t\t\t\tstr = \"\\r\\n\" + strCmd + \"\\r\\n\";\n\t\t\t\tthis.DataColl.getOwnerApp().writeConsoleString(str);\n\t\t\t} // Dejar traza del SQL\n\t\t\t// Ahora abre el recordset para contar\n\t\t\t// A12042503: Mecanismo para registrar un modo debug global en la aplicacin.\n\t\t\tif (this.DataColl.getIsDebugging() || this.DataColl.getOwnerApp().isDebugMode())\n\t\t\t\tUtils.DebugLog(Utils.TAG_DATABASE_LOG, \"GetRowCount: \" + strCmd);\n\t\t\tif (\n\t\t\t\tnull ==\n\t\t\t\t(rs = await this.DataColl.getConnection().CreateRecordsetAsync(strCmd, {\n\t\t\t\t\tcount: true,\n\t\t\t\t\tcoll: this.DataColl.getName(),\n\t\t\t\t\tmacros: this.DataColl.getMacros(),\n\t\t\t\t\tloadall: false,\n\t\t\t\t\tpage: {},\n\t\t\t\t}))\n\t\t\t) {\n\t\t\t\t// Error\n\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t////throw new XoneGenericException(-2000, \"XoneDataCollection::GetRowCount ha fallado. No se puede abrir la consulta para contar los registros.\");\n\t\t\t\tlet sb = this.DataColl.GetMessage(XoneMessageKeys.SYS_MSG_COLL_GETROWCOUNTFAIL, \"{0} failed. Row count query failed.\");\n\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\tthrow new XoneGenericException(-2000, sb);\n\t\t\t} // Error\n\t\t\t//\n\t\t\t// Recorrer el recordset abierto e ir sumando los resultados\n\t\t\twhile (await rs.next()) {\n\t\t\t\t// Para cada registro\n\t\t\t\tnCount += DataUtils.RsReadLong(rs, \"N\");\n\t\t\t\tif (this.m_nMaxRows > 0)\n\t\t\t\t\tif (nCount > this.m_nMaxRows) {\n\t\t\t\t\t\t// Pasado el mximo\n\t\t\t\t\t\tnCount = this.m_nMaxRows;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} // Pasado el mximo\n\t\t\t} // Para cada registro\n\t\t\trs.close();\n\t\t\trs = null;\n\t\t\treturn nCount;\n\t\t} catch (ex) {\n\t\t\tif (rs != null) {\n\t\t\t\t// Cerrar\n\t\t\t\ttry {\n\t\t\t\t\trs.close();\n\t\t\t\t} catch (se) {\n\t\t\t\t\t// Ignorar esta excepcin\n\t\t\t\t}\n\t\t\t\trs = null;\n\t\t\t} // Cerrar\n\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t////throw new XoneGenericException(-87878, \"CXoneDataCollection::GetRowCount ha fallado. \" + e.getMessage());\n\t\t\tlet sMessage = ex.message;\n\t\t\tlet sb = this.DataColl.GetMessage(XoneMessageKeys.SYS_MSG_GENERALFAIL, \"{0} failed. \");\n\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\tif (!TextUtils.isEmpty(sMessage)) {\n\t\t\t\tsb = sb.concat(sMessage);\n\t\t\t}\n\t\t\tthrow new XoneGenericException(-87878, ex, sb);\n\t\t}\n\t}\n\n\t/**\n\t * Mueve el recorrido hacia el primer objeto y lo carga en el CurrentItem\n\t *\n\t * K12112101: Cambios de interfaz en funciones de maquinaria para facilitar la gestin visual.\n\t * Poner esto pblico.\n\t *\n\t * @return\t\t\tDevuelve TRUE si la operacin es correcta.\n\t * @throws Exception\n\t */\n\tpublic async MoveFirst(): Promise<boolean> {\n\t\t// Iniciar el contador de objetos.\n\t\tthis.m_nBrowseOrder = 1;\n\t\tif (this.m_bIsSpecial) {\n\t\t\t// Especial\n\t\t\tthis.m_nCurrentIndex = 0;\n\t\t\treturn await this.LoadCurrentItem();\n\t\t} // Especial\n\t\treturn await this.MovePtr(MovePtrType.MOVE_PTR_FIRST);\n\t}\n\n\t/**\n\t * Mueve el recorrido hacia el siguiente objeto\n\t * @return\t\t\tDevuelve TRUE si la operacin es correcta.\n\t * @throws Exception\n\t */\n\tpublic async MoveNext(): Promise<boolean> {\n\t\tthis.m_nBrowseOrder++;\n\t\tif (this.m_bIsSpecial) {\n\t\t\t// Especial\n\t\t\tif (++this.m_nCurrentIndex >= this.m_nBrowseLength) this.m_nCurrentIndex = -1;\n\t\t\treturn await this.LoadCurrentItem();\n\t\t} // Especial\n\n\t\treturn await this.MovePtr(MovePtrType.MOVE_PTR_NEXT);\n\t}\n\n\t/**\n\t * Mueve el recorrido al ltimo objeto\n\t * @return\t\t\tDevuelve TRUE si la operacin es correcta.\n\t * @throws Exception\n\t */\n\tpublic async MoveLast(): Promise<boolean> {\n\t\tthis.m_nBrowseOrder = -1;\n\t\tif (this.m_bIsSpecial) {\n\t\t\t// Especial\n\t\t\tthis.m_nCurrentIndex = this.m_nBrowseLength > 0 ? this.m_nBrowseLength - 1 : 0;\n\t\t\treturn await this.LoadCurrentItem();\n\t\t} // Especial\n\n\t\treturn await this.MovePtr(MovePtrType.MOVE_PTR_LAST);\n\t}\n\n\t/**\n\t * Mueve el recorrido al objeto anterior\n\t * @return\t\t\tDevuelve TRUE si la operacin es correcta.\n\t * @throws Exception\n\t */\n\tpublic async MovePrevious(): Promise<boolean> {\n\t\tif (--this.m_nBrowseOrder < 1) this.m_nBrowseOrder = 1;\n\t\tif (this.m_bIsSpecial) {\n\t\t\t// Especial\n\t\t\tthis.m_nCurrentIndex -= this.m_nCurrentIndex > 0 ? 1 : 0;\n\t\t\treturn await this.LoadCurrentItem();\n\t\t} // Especial\n\n\t\treturn await this.MovePtr(MovePtrType.MOVE_PTR_PREV);\n\t}\n\n\t/**\n\t * Interna para mover el puntero de la base de datos o fuente externa en funcin del tipo de coleccin y dems.\n\t * @param Type\t\tTipo de movimiento que se quiere efectuar (direccin de movimiento, etc.)\n\t * @return\t\t\tDevuelve TRUE si la operacin es correcta.\n\t */\n\tprivate async MovePtr(Type: number): Promise<boolean> {\n\t\t//////boolean bFrst = false;\n\t\tlet bClear = false;\n\t\tlet bResult = false;\n\n\t\ttry {\n\t\t\tif (this.m_rs != null) {\n\t\t\t\t// Hay rs\n\t\t\t\tswitch (\n\t\t\t\t\tType // Qu tipo de movimiento\n\t\t\t\t) {\n\t\t\t\t\tcase MovePtrType.MOVE_PTR_FIRST:\n\t\t\t\t\t\tawait this.m_rs.next(); // Por ahora solamente leemos el primero\n\t\t\t\t\t\t//////m_bFrst = false;\n\t\t\t\t\t\tthis.m_nCurrentRow = 0;\n\t\t\t\t\t\tif (this.m_bHasTopRow && this.m_pTopRowItem != null) this.m_pTopRowItem = null; // El que sea se va del aire\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase MovePtrType.MOVE_PTR_LAST:\n\t\t\t\t\t\t// m_rs ->MoveLast ();\n\t\t\t\t\t\tif (this.m_nMaxRows > 0) this.m_nCurrentRow = this.m_nMaxRows - 1; // Moverse hasta la que es\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase MovePtrType.MOVE_PTR_NEXT:\n\t\t\t\t\t\tlet bHasNext = false;\n\t\t\t\t\t\tif (this.m_nMaxRows > 0) {\n\t\t\t\t\t\t\t// Ver si se mueve o no\n\t\t\t\t\t\t\tif (this.m_nCurrentRow < this.m_nMaxRows) {\n\t\t\t\t\t\t\t\t// Puede\n\t\t\t\t\t\t\t\tthis.m_nCurrentRow++;\n\t\t\t\t\t\t\t\tbHasNext = await this.m_rs.next();\n\t\t\t\t\t\t\t} // Puede\n\t\t\t\t\t\t} // Ver si se mueve o no\n\t\t\t\t\t\telse bHasNext = await this.m_rs.next();\n\t\t\t\t\t\t// Si no hay ms elementos, entonces cerramos\n\t\t\t\t\t\tif (!bHasNext) {\n\t\t\t\t\t\t\t// Cerrar\n\t\t\t\t\t\t\tthis.m_rs.close();\n\t\t\t\t\t\t\tthis.m_rs = null;\n\t\t\t\t\t\t\t// M11111701: Proteccin de colecciones abiertas por error en scripts.\n\t\t\t\t\t\t\t// Fundir...\n\t\t\t\t\t\t\tthis.DataColl.getOwnerApp().RemoveOpenColl(this.DataColl);\n\t\t\t\t\t\t} // Cerrar\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase MovePtrType.MOVE_PTR_PREV:\n\t\t\t\t\t\t// TODO Ver si esto se puede hacer\n\t\t\t\t\t\t//m_rs ->MovePrevious ();\n\t\t\t\t\t\tif (--this.m_nCurrentRow < 0) this.m_nCurrentRow = 0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t} // Qu tipo de movimiento\n\t\t\t\tbResult = await this.LoadCurrentItem();\n\t\t\t\t//////m_bFrst = bFrst;\n\t\t\t} // Hay rs\n\t\t\telse bClear = true;\n\t\t\t//\n\t\t\t// Si tiene que cargarse el elemento actual hacerlo sin miramientos\n\t\t\tif (bClear) this.ClearCurrentItem(true);\n\n\t\t\treturn bResult;\n\t\t} catch (ex) {\n\t\t\t// M11111701: Proteccin de colecciones abiertas por error en scripts.\n\t\t\t// Intentar dejar esto de manera ms o menos decente...\n\t\t\tthis.EndBrowse();\n\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t////throw new XoneGenericException(-1010, \"CXoneDataCollection::MovePtr ha fallado. \" + ex.getMessage());\n\t\t\tlet str = this.m_dataColl.GetMessage(XoneMessageKeys.SYS_MSG_GENERALFAIL, \"{0} failed. \");\n\t\t\tstr = str.replace(\"{0}\", \"CXoneDataCollection::MovePtr\");\n\t\t\t//TODO ADD TAG Juan Carlos: Evitar NullPointerException\n\t\t\tlet sMessage = ex.message;\n\t\t\tif (TextUtils.isEmpty(sMessage)) {\n\t\t\t\tconsole.error(ex);\n\t\t\t} else {\n\t\t\t\tstr = str.concat(sMessage);\n\t\t\t}\n\t\t\tthrow new XoneGenericException(-1010, ex, str);\n\t\t}\n\t}\n\n\t/**\n\t *  Cierra el recorrido actualmente activo.\n\t */\n\tpublic EndBrowse(): boolean {\n\t\ttry {\n\t\t\t/*\n\t\t\t * TODO ADD TAG\n\t\t\t * Cancelar todos los procesos que haya. La idea es que cuando esto retorne ya se pueda\n\t\t\t * usar todo lo dems.\n\t\t\t * TODO 28/07/2016 Juan Carlos\n\t\t\t * Si no hay conexion se tiene que explotar con un mensaje claro. Por ejemplo la\n\t\t\t * coleccion puede tener atributo connection pero el nodo puede no existir y\n\t\t\t * getCollection() devuelve null.\n\t\t\t */\n\t\t\tif (this.getConnection() == null) {\n\t\t\t\tlet sb = this.DataColl.GetMessage(XoneMessageKeys.SYS_MSG_GENERALFAIL, \"{0} failed. \");\n\t\t\t\tsb = sb.replace(\"{0}\", \"CXoneDataCollection::GetConnection\");\n\t\t\t\tsb = sb.concat(\"Cannot find connection \" + this.getConnectionName());\n\t\t\t\tthrow new XoneGenericException(-1900, sb);\n\t\t\t}\n\t\t\tthis.getConnection().cancelProcesses(0);\n\t\t\t//  Si es una coleccin especial, simplemente limpiar\n\t\t\t//  la coleccin de elementos\n\t\t\tif (this.m_bIsSpecial) {\n\t\t\t\t// Limpiar la coleccin\n\t\t\t\tthis.DataColl.clear();\n\t\t\t\treturn true;\n\t\t\t} // Limpiar la coleccin\n\t\t\t// Aqu contina el proceso si es una coleccin normal\n\t\t\tthis.ClearCurrentItem(true);\n\t\t\tif (this.m_rs != null) {\n\t\t\t\t// Hay un recordset\n\t\t\t\tthis.m_rs.close();\n\t\t\t\tthis.m_rs = null;\n\t\t\t} // Hay un recordset\n\t\t\t// M11111701: Proteccin de colecciones abiertas por error en scripts.\n\t\t\t// Terminamos esto\n\t\t\tthis.DataColl.getOwnerApp().RemoveOpenColl(this.DataColl);\n\t\t\treturn true;\n\t\t} catch (e) {\n\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t////throw new XoneGenericException(-1009, \"CXoneDataCollection::EndBrowse ha fallado. \" + e.getMessage());\n\t\t\tlet sb = this.DataColl.GetMessage(XoneMessageKeys.SYS_MSG_GENERALFAIL, \"{0} failed. \");\n\t\t\tsb = sb.replace(\"{0}\", \"CXoneDataCollection::EndBrowse\");\n\t\t\tsb = sb.concat(e.getMessage());\n\t\t\t//TODO 28/07/2016 Juan Carlos. Respetar la traza del stack original\n\t\t\tthrow new XoneGenericException(-1009, e, sb);\n\t\t}\n\t}\n\tgetConnectionName() {\n\t\treturn this.m_strConnectionName;\n\t}\n\n\tgetConnection(): XoneConnectionData {\n\t\tif (this.m_connection == null) this.m_connection = this.DataColl.getOwnerApp().getConnection(this.m_strConnectionName);\n\t\t// Devolver lo que sea\n\t\treturn this.m_connection;\n\t}\n\n\t//   loadAll(): boolean {\n\t//     let rs: IResultSet = null;\n\t//     let strCmd: string, str: string, str1: string;\n\t//     let obj: XoneDataObject = null;\n\t//     let nOrder: number = 1;\n\t//     let FunctionName = \"XoneDataCollection::LoadAll\";\n\t//     let bPrefiltered = false;\n\n\t//     if (this.DataColl.isLock() === true) return true;\n\t//         //\n\t//         // Cuando se hace LoadAll a una coleccin especial, ver si tiene <onprepare>\n\t//         // para llenarse. Ojo que el chequeo de bloqueo ahora ocurre ANTES\n\t//         // de este cdigo...\n\t//         if (this.m_bIsSpecial)\n\t//         {// Colecciones especiales, ePrepareSpecialCollectionsto no hace nada\n\t//             const b = this.PrepareSpecialCollection();\n\t//             this.DataColl.setFull(true);\n\t//             return b;\n\t//         }// Colecciones especiales, esto no hace nada\n\t//     // Cargar los datos\n\t//     try {\n\t//         this.DataColl.setFull(false);\n\t//             this.DataColl.clear();\n\t//             if (this.DataColl.Options.bCheckOwner)\n\t//             {// Hay que chequear el propietario\n\t//                 if (this.DataColl.getOwnerObject() != null)\n\t//                 {// Es derivado\n\t//                     if (this.DataColl.getOwnerObject().GetObjectIdString(true).equals(\"NULL\"))\n\t//                         return true;   // No se ha grabao el puro\n\t//                 }// Es derivado\n\t//             }// Hay que chequear el propietario\n\t//             //\n\t//             // Continuar\n\t//             if (TextUtils.isEmpty(str = this.DataColl.getAccessString()) && !this.getConnection().acceptsEmptyQueries())\n\t//                 return true;    // Cadena vaca\n\t//             strCmd = \"\";\n\t//             if (this.Options.bParseSQL) {\n\t//                 if (this.Options.bSingleObject)\n\t//                     strCmd = \"SELECT * FROM \" + str + \" rrss\";\n\t//                 else\n\t//                 {// Query\n\t//                     if (!this.Options.bUseRaw)\n\t//                         strCmd = \"SELECT * FROM (\" + str + \") rrss\";\n\t//                 }// Query\n\t//                 // Comprobar si ya trae WHERE de antes, entonces no habr que cambiarlo por HAVING\n\t//                 // porque estar bien, digo yo...\n\t//                 if (this.Options.bUseRaw && !this.Options.bSingleObject) {// Ver si est prefiltrado\n\t//                     bPrefiltered = this.IsSqlPrefiltered();\n\t//                 }// Ver si est prefiltrado\n\t//                 // Si hay filtro de enlace lo aplica\n\t//                 if (!this.Options.bUseRaw)\n\t//                     strCmd += this.ApplyFilters(true);\n\t//                 else\n\t//                     strCmd = this.EmbedFilters(null);\n\t//             } else {\n\t//                 strCmd  = str;\n\t//                 bPrefiltered=false;\n\t//             }\n\t//             // Aplica el orden si existe\n\t//             if (!StringUtils.IsEmptyString(str1 = this.PrepareSort(this.DataColl.getSort())))\n\t//             {// Tiene sort\n\t//                 str = (\" ORDER BY \" + str1);\n\t//                 strCmd += str;\n\t//             }// Tiene sort\n\n\t//             // Cambiando que primero lo pase por la coleccion\n\t//             strCmd = this.PrepareSqlString(strCmd,false,bPrefiltered); //getConnection().PrepareSqlString(strCmd,false,bPrefiltered);\n\t//             // Comprobar si es un contents\n\t//             if (this.DataColl.getOwnerObject() != null)\n\t//                 strCmd = this.PrepareSqlString(strCmd);\n\t//             // M11011001:\tIncluir macros globales y evaluacin de dichas macros para IMEI y dems.\n\t//             // Sustituir macros (no s por qu no se haca)\n\t//             // Evaluar las macros (globales incluidas)\n\t//             strCmd = this.DataColl.EvaluateAllMacros(strCmd, true);\n\t//             if (this.Options.bDebug)\n\t//             {// Dejar traza del SQL\n\t//                 str = \"\\r\\n\" + strCmd + \"\\r\\n\";\n\t//                 this.DataColl.getOwnerApp().writeConsoleString(str);\n\t//             }// Dejar traza del SQL\n\t//             // A12042503: Mecanismo para registrar un modo debug global en la aplicacin.\n\t//             if (this.DataColl.getIsDebugging() || this.DataColl.getOwnerApp().isDebugMode())\n\t//                 Utils.DebugLog(Utils.TAG_DATABASE_LOG,\"LoadAll: \"+strCmd);\n\t//             // TODO ADD TAG\n\t//             // Si hay procesos pendientes, cancelamos lo que sea que haya\n\t//             this.getConnection().cancelProcesses(0);\n\t//             // El recordset tiene que apuntar a la conexin correcta\n\t//             if (null == (rs = this.getConnection().CreateRecordset(strCmd)))\n\t//             {// Error\n\t//                 // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t//                 ////throw new XoneGenericException(-2999, \"CXoneDataCollection::LoadAll ha fallado. No se puede abrir la fuente de datos.\");\n\t//                 let sb = this.DataColl.GetMessage(XoneMessageKeys.SYS_MSG_DATASRCFAIL, \"{0} failed. Cannot open data source.\");\n\t//                 sb =sb.replace(\"{0}\", FunctionName);\n\t//                 throw new XoneGenericException(-2999, sb);\n\t//             }// Error\n\t//             // Ahora s est en condiciones de recorrer el lazo\n\t//             // Simular el orden en el LoadAll\n\t//             for (; rs.next(); nOrder++)\n\t//             {// Todos los records\n\t//                 //  Crear el objeto es toda una yerba en condiciones normales\n\t//                 //  pero asumiremos que si no hay un GUID vlido aqu sea\n\t//                 //  porque se va a usar el clsico. Al crear el objeto indicar que es solo para cargar...\n\t//                 if (null == (obj = this.DataColl.CreateObject(false)))\n\t//                 {// No se puede crear el objeto\n\t//                     // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t//                     ////throw new XoneGenericException(-1005, \"CXoneDataCollection::LoadAll no puede crear un nuevo objeto. CreateObject ha falldo.\");\n\t//                     let sb = this.DataColl.GetMessage(XoneMessageKeys.SYS_MSG_COLL_LOADALLFAIL_02, \"{0} cannot create a new object. CreateObject failed.\");\n\t//                     sb =sb.replace(\"{0}\", FunctionName);\n\t//                     throw new XoneGenericException(-1005, sb);\n\t//                 }// No se puede crear el objeto\n\t//                 // ADD TAG Cambiar de posicion el MAP_SYS_ORDER para que en el load ya este disponible en que posicion va a estar\n\t//                 obj.SetPropertyValue(\"MAP_SYS_ORDER\", nOrder-1);\n\t//                 // Cargar el objeto\n\t//                 if (!obj.Load(rs))\n\t//                 {// Error\n\t//                     // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t//                     ////throw new XoneGenericException(-10051, \"CXoneDataCollection::LoadAll ha fallado. Ha ocurrido un fallo llamando a MainObject::Load.\");\n\t//                     let sb = this.DataColl.GetMessage(XoneMessageKeys.SYS_MSG_COLL_LOADALLFAIL_03, \"{0} failed. Call to XoneDataObject::Load failed.\");\n\t//                     sb =sb.replace(\"{0}\", FunctionName);\n\t//                     throw new XoneGenericException(-10051, sb);\n\t//                 }// Error\n\t//                 obj.GetObjectIdString();\n\t//                 this.AddItem(obj);\n\n\t//             }// Todos los records\n\t//             //\n\t//             // Cerrar y liberar todo\n\t//             rs.close();\n\t//             rs = null;\n\t//             this.DataColl.setFull(true);\n\t//       return true;\n\t//     } catch (e) {\n\t//       if (rs != null)\n\t//       {// Cerrar\n\t//           try\n\t//           {\n\t//               rs.close();\n\t//           }\n\t//           catch (se)\n\t//           {\n\t//           }\n\t//           rs = null;\n\t//       }// Cerrar\n\t//       throw e;\n\t//     }\n\t//     return true;\n\t//   }\n\n\tpublic async loadAllAsyncWithParser(CountRecords: boolean = false, options?: any): Promise<XoneDataCollection> {\n\t\tlet rs: IResultSet = null;\n\t\tlet strCmd: string, str: string, str1: string;\n\t\tlet obj: XoneDataObject = null;\n\t\tlet nOrder: number = 1;\n\t\tlet FunctionName = \"XoneDataCollection::LoadAll\";\n\t\tlet bPrefiltered = false;\n\n\t\tif (this.DataColl.isLock() === true) return this.DataColl;\n\n\t\t//\n\t\t// Cuando se hace LoadAll a una coleccin especial, ver si tiene <onprepare>\n\t\t// para llenarse. Ojo que el chequeo de bloqueo ahora ocurre ANTES\n\t\t// de este cdigo...\n\t\tif (this.m_bIsSpecial) {\n\t\t\t// Colecciones especiales, ePrepareSpecialCollectionsto no hace nada\n\t\t\tconst b = this.PrepareSpecialCollection();\n\t\t\tthis.DataColl.setFull(true);\n\t\t\treturn this.DataColl;\n\t\t} // Colecciones especiales, esto no hace nada\n\t\twhile (this.m_bIsFetchDataRunning == true) await (() => new Promise<void>((resolve) => setTimeout(() => resolve(), 100)))();\n\t\t// Cargar los datos\n\t\ttry {\n\t\t\tthis.m_bIsFetchDataRunning = true;\n\t\t\tthis.DataColl.setFull(false);\n\t\t\tthis.Clear();\n\t\t\tif (this.Options.bCheckOwner) {\n\t\t\t\t// Hay que chequear el propietario\n\t\t\t\tif (this.DataColl.getOwnerObject() != null) {\n\t\t\t\t\t// Es derivado\n\t\t\t\t\tif (this.DataColl.getOwnerObject().GetObjectIdString(true).equals(\"NULL\")) return this.DataColl; // No se ha grabao el puro\n\t\t\t\t} // Es derivado\n\t\t\t} // Hay que chequear el propietario\n\t\t\t//\n\t\t\t// Continuar\n\t\t\tif (TextUtils.isEmpty((str = this.DataColl.getAccessString())) && !this.getConnection().acceptsEmptyQueries()) return this.DataColl; // Cadena vaca\n\t\t\tstrCmd = \"\";\n\t\t\tif (this.Options.bParseSQL) {\n\t\t\t\tif (this.Options.bSingleObject) strCmd = \"SELECT * FROM \" + str + \" rrss\";\n\t\t\t\telse {\n\t\t\t\t\t// Query\n\t\t\t\t\tif (!this.Options.bUseRaw) strCmd = \"SELECT * FROM (\" + str + \") rrss\";\n\t\t\t\t} // Query\n\t\t\t\t// Comprobar si ya trae WHERE de antes, entonces no habr que cambiarlo por HAVING\n\t\t\t\t// porque estar bien, digo yo...\n\t\t\t\tif (this.Options.bUseRaw && !this.Options.bSingleObject) {\n\t\t\t\t\t// Ver si est prefiltrado\n\t\t\t\t\tbPrefiltered = await this.IsSqlPrefiltered();\n\t\t\t\t} // Ver si est prefiltrado\n\t\t\t\t// Si hay filtro de enlace lo aplica\n\t\t\t\tif (!this.Options.bUseRaw) strCmd += await this.ApplyFilters(true);\n\t\t\t\telse strCmd = await this.EmbedFilters(null);\n\t\t\t} else {\n\t\t\t\tstrCmd = str;\n\t\t\t\tbPrefiltered = false;\n\t\t\t}\n\t\t\t// Aplica el orden si existe\n\t\t\tif (!StringUtils.IsEmptyString((str1 = this.PrepareSort(this.DataColl.getSort())))) {\n\t\t\t\t// Tiene sort\n\t\t\t\tstr = \" ORDER BY \" + str1;\n\t\t\t\tstrCmd += str;\n\t\t\t} // Tiene sort\n\n\t\t\t// Cambiando que primero lo pase por la coleccion\n\t\t\tstrCmd = this.PrepareSqlString(strCmd, false, bPrefiltered); //getConnection().PrepareSqlString(strCmd,false,bPrefiltered);\n\t\t\t// Comprobar si es un contents\n\t\t\tif (this.DataColl.getOwnerObject() != null) strCmd = this.DataColl.getOwnerObject().PrepareSqlString(strCmd);\n\t\t\t// M11011001:\tIncluir macros globales y evaluacin de dichas macros para IMEI y dems.\n\t\t\t// Sustituir macros (no s por qu no se haca)\n\t\t\t// Evaluar las macros (globales incluidas)\n\t\t\tstrCmd = await this.DataColl.EvaluateAllMacros(strCmd, true);\n\t\t\tif (this.Options.bDebug) {\n\t\t\t\t// Dejar traza del SQL\n\t\t\t\tstr = \"\\r\\n\" + strCmd + \"\\r\\n\";\n\t\t\t\tthis.DataColl.getOwnerApp().writeConsoleString(str);\n\t\t\t} // Dejar traza del SQL\n\t\t\t// A12042503: Mecanismo para registrar un modo debug global en la aplicacin.\n\t\t\tif (this.DataColl.getIsDebugging() || this.DataColl.getOwnerApp().isDebugMode()) Utils.DebugLog(Utils.TAG_DATABASE_LOG, \"LoadAll: \" + strCmd);\n\t\t\t// TODO ADD TAG\n\t\t\t// Si hay procesos pendientes, cancelamos lo que sea que haya\n\t\t\tthis.getConnection().cancelProcesses(0);\n\t\t\tif (CountRecords == true) this.m_nBrowseLength = await this.CountAsync(null);\n\t\t\telse this.m_nBrowseLength = -1;\n\t\t\t// El recordset tiene que apuntar a la conexin correcta\n\t\t\tif (\n\t\t\t\tnull ==\n\t\t\t\t(rs = await this.getConnection().CreateRecordsetAsync(strCmd, {\n\t\t\t\t\tcount: false,\n\t\t\t\t\tcoll: this.DataColl.getName(),\n\t\t\t\t\tmacros: this.DataColl.getMacros(),\n\t\t\t\t\tloadall: false,\n\t\t\t\t\tpage: options != null ? options : { start: 0, length: 1000 },\n\t\t\t\t}))\n\t\t\t) {\n\t\t\t\t// Error\n\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t////throw new XoneGenericException(-2999, \"CXoneDataCollection::LoadAll ha fallado. No se puede abrir la fuente de datos.\");\n\t\t\t\tlet sb = this.DataColl.GetMessage(XoneMessageKeys.SYS_MSG_DATASRCFAIL, \"{0} failed. Cannot open data source.\");\n\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\tthrow new XoneGenericException(-2999, sb);\n\t\t\t} // Error\n\t\t\t// Obtener la cantidad de elementos\n\t\t\t// cambio Sergio\n\t\t\t// if (CountRecords && !(this.m_rs.EOF()))\n\t\t\t//     this.m_nBrowseLength = await this.GetRowCount();    // Buscar la cantidad de elementos a recorrer\n\t\t\t// else\n\t\t\t//     this.m_nBrowseLength = -1;\n\t\t\t// Ahora s est en condiciones de recorrer el lazo\n\t\t\t// Simular el orden en el LoadAll\n\t\t\tfor (; await rs.next(); nOrder++) {\n\t\t\t\t// Todos los records\n\t\t\t\t//  Crear el objeto es toda una yerba en condiciones normales\n\t\t\t\t//  pero asumiremos que si no hay un GUID vlido aqu sea\n\t\t\t\t//  porque se va a usar el clsico. Al crear el objeto indicar que es solo para cargar...\n\t\t\t\tobj = await this.DataColl.CreateObject(false);\n\t\t\t\tif (null == obj) {\n\t\t\t\t\t// No se puede crear el objeto\n\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t////throw new XoneGenericException(-1005, \"CXoneDataCollection::LoadAll no puede crear un nuevo objeto. CreateObject ha falldo.\");\n\t\t\t\t\tlet sb = this.DataColl.GetMessage(XoneMessageKeys.SYS_MSG_COLL_LOADALLFAIL_02, \"{0} cannot create a new object. CreateObject failed.\");\n\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\tthrow new XoneGenericException(-1005, sb);\n\t\t\t\t} // No se puede crear el objeto\n\t\t\t\t// ADD TAG Cambiar de posicion el MAP_SYS_ORDER para que en el load ya este disponible en que posicion va a estar\n\t\t\t\tobj.SetPropertyValue(\"MAP_SYS_ORDER\", nOrder - 1);\n\t\t\t\t// Cargar el objeto\n\t\t\t\tif (!obj.Load(rs)) {\n\t\t\t\t\t// Error\n\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t////throw new XoneGenericException(-10051, \"CXoneDataCollection::LoadAll ha fallado. Ha ocurrido un fallo llamando a MainObject::Load.\");\n\t\t\t\t\tlet sb = this.DataColl.GetMessage(XoneMessageKeys.SYS_MSG_COLL_LOADALLFAIL_03, \"{0} failed. Call to XoneDataObject::Load failed.\");\n\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\tthrow new XoneGenericException(-10051, sb);\n\t\t\t\t} // Error\n\t\t\t\tobj.GetObjectIdString();\n\t\t\t\tthis.AddItem(obj);\n\t\t\t} // Todos los records\n\t\t\t//\n\t\t\t// Cerrar y liberar todo\n\t\t\trs.close();\n\t\t\trs = null;\n\t\t\tthis.DataColl.setFull(true);\n\t\t\treturn this.DataColl;\n\t\t} catch (e) {\n\t\t\tthis.m_bIsFetchDataRunning = true;\n\t\t\tif (rs != null) {\n\t\t\t\t// Cerrar\n\t\t\t\ttry {\n\t\t\t\t\trs.close();\n\t\t\t\t} catch (se) {}\n\t\t\t\trs = null;\n\t\t\t} // Cerrar\n\t\t\tthrow e;\n\t\t} finally {\n\t\t\tthis.m_bIsFetchDataRunning = false;\n\t\t}\n\t}\n\n\tpublic async loadAllAsync(CountRecords: boolean = false, options?: any): Promise<XoneDataCollection> {\n\t\tlet rs: IResultSet = null;\n\t\tlet strCmd: string, str: string, str1: string;\n\t\tlet obj: XoneDataObject = null;\n\t\tlet nOrder: number = 1;\n\t\tlet FunctionName = \"XoneDataCollection::LoadAll\";\n\t\tlet bPrefiltered = false;\n\n\t\tif (this.DataColl.isLock() === true) return this.DataColl;\n\n\t\t//\n\t\t// Cuando se hace LoadAll a una coleccin especial, ver si tiene <onprepare>\n\t\t// para llenarse. Ojo que el chequeo de bloqueo ahora ocurre ANTES\n\t\t// de este cdigo...\n\t\tif (this.m_bIsSpecial) {\n\t\t\t// Colecciones especiales, ePrepareSpecialCollectionsto no hace nada\n\t\t\tconst b = this.PrepareSpecialCollection();\n\t\t\tthis.DataColl.setFull(true);\n\t\t\treturn this.DataColl;\n\t\t} // Colecciones especiales, esto no hace nada\n\t\twhile (this.m_bIsFetchDataRunning == true) await (() => new Promise<void>((resolve) => setTimeout(() => resolve(), 100)))();\n\t\t// Cargar los datos\n\t\ttry {\n\t\t\tthis.m_bIsFetchDataRunning = true;\n\t\t\tthis.DataColl.setFull(false);\n\t\t\tthis.Clear();\n\t\t\tif (this.Options.bCheckOwner) {\n\t\t\t\t// Hay que chequear el propietario\n\t\t\t\tif (this.DataColl.getOwnerObject() != null) {\n\t\t\t\t\t// Es derivado\n\t\t\t\t\tif (this.DataColl.getOwnerObject().GetObjectIdString(true).equals(\"NULL\")) return this.DataColl; // No se ha grabao el puro\n\t\t\t\t} // Es derivado\n\t\t\t} // Hay que chequear el propietario\n\t\t\t//\n\t\t\t// Continuar\n\t\t\tif (TextUtils.isEmpty((str = this.DataColl.getAccessString())) && !this.getConnection().acceptsEmptyQueries()) return this.DataColl; // Cadena vaca\n\t\t\tstrCmd = \"\";\n\n\t\t\t// if (this.Options.bParseSQL) {\n\t\t\t//     if (this.Options.bSingleObject)\n\t\t\t//         strCmd = \"SELECT * FROM \" + str + \" rrss\";\n\t\t\t//     else {// Query\n\t\t\t//         if (!this.Options.bUseRaw)\n\t\t\t//             strCmd = \"SELECT * FROM (\" + str + \") rrss\";\n\t\t\t//     }// Query\n\t\t\t//     // Comprobar si ya trae WHERE de antes, entonces no habr que cambiarlo por HAVING\n\t\t\t//     // porque estar bien, digo yo...\n\t\t\t//     if (this.Options.bUseRaw && !this.Options.bSingleObject) {// Ver si est prefiltrado\n\t\t\t//         bPrefiltered = await this.IsSqlPrefiltered();\n\t\t\t//     }// Ver si est prefiltrado\n\t\t\t//     // Si hay filtro de enlace lo aplica\n\t\t\t//     if (!this.Options.bUseRaw)\n\t\t\t//         strCmd += await this.ApplyFilters(true);\n\t\t\t//     else\n\t\t\t//         strCmd = await this.EmbedFilters(null);\n\t\t\t// } else {\n\t\t\t//     strCmd = str;\n\t\t\t//     bPrefiltered = false;\n\t\t\t// }\n\t\t\t// Aplica el orden si existe\n\t\t\t// if (!StringUtils.IsEmptyString(str1 = this.PrepareSort(this.DataColl.getSort()))) {// Tiene sort\n\t\t\t//     str = (\" ORDER BY \" + str1);\n\t\t\t//     strCmd += str;\n\t\t\t// }// Tiene sort\n\n\t\t\t// // Cambiando que primero lo pase por la coleccion\n\t\t\t// strCmd = this.PrepareSqlString(strCmd, false, bPrefiltered); //getConnection().PrepareSqlString(strCmd,false,bPrefiltered);\n\t\t\t// // Comprobar si es un contents\n\t\t\t// if (this.DataColl.getOwnerObject() != null)\n\t\t\t//     strCmd = this.DataColl.getOwnerObject().PrepareSqlString(strCmd);\n\t\t\t// M11011001:\tIncluir macros globales y evaluacin de dichas macros para IMEI y dems.\n\t\t\t// Sustituir macros (no s por qu no se haca)\n\t\t\t// Evaluar las macros (globales incluidas)\n\t\t\tconst swhere = await this.ResolveFilters(false, null);\n\t\t\tconst sSort = this.DataColl.getSort();\n\t\t\tthis.DataColl.ParseMacros(swhere);\n\t\t\tthis.DataColl.ParseMacros(sSort);\n\t\t\tthis.DataColl.ParseMacros(str);\n\t\t\tstrCmd = await this.DataColl.EvaluateAllMacros(str, true);\n\t\t\tconst data = {\n\t\t\t\tcoll: this.DataColl.getName(),\n\t\t\t\tmacros: this.DataColl.getMacros(),\n\t\t\t\twhere: swhere,\n\t\t\t\tsort: sSort,\n\t\t\t\tloadall: false,\n\t\t\t\tpage: {},\n\t\t\t};\n\t\t\tif (this.Options.bDebug) {\n\t\t\t\t// Dejar traza del SQL\n\t\t\t\tthis.DataColl.getOwnerApp().writeConsoleString(data);\n\t\t\t} // Dejar traza del SQL\n\t\t\t// A12042503: Mecanismo para registrar un modo debug global en la aplicacin.\n\t\t\tif (this.DataColl.getIsDebugging() || this.DataColl.getOwnerApp().isDebugMode()) Utils.DebugLog(Utils.TAG_DATABASE_LOG, \"LoadAll: \" + data);\n\t\t\t// TODO ADD TAG\n\t\t\t// Si hay procesos pendientes, cancelamos lo que sea que haya\n\t\t\tthis.getConnection().cancelProcesses(0);\n\n\t\t\tif (CountRecords == true) this.m_nBrowseLength = await this.CountAsync({ ...{ count: true, page: {} }, ...data });\n\t\t\telse this.m_nBrowseLength = -1;\n\t\t\t// El recordset tiene que apuntar a la conexin correcta\n\t\t\tif (\n\t\t\t\tnull ==\n\t\t\t\t(rs = await this.getConnection().CreateRecordsetAsync(strCmd, {\n\t\t\t\t\t...{ count: false, page: options != null ? options : { start: 0, length: 1000 } },\n\t\t\t\t\t...data,\n\t\t\t\t}))\n\t\t\t) {\n\t\t\t\t// Error\n\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t////throw new XoneGenericException(-2999, \"CXoneDataCollection::LoadAll ha fallado. No se puede abrir la fuente de datos.\");\n\t\t\t\tlet sb = this.DataColl.GetMessage(XoneMessageKeys.SYS_MSG_DATASRCFAIL, \"{0} failed. Cannot open data source.\");\n\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\tthrow new XoneGenericException(-2999, sb);\n\t\t\t} // Error\n\t\t\t// Obtener la cantidad de elementos\n\t\t\t// cambio Sergio\n\t\t\t// if (CountRecords && !(this.m_rs.EOF()))\n\t\t\t//     this.m_nBrowseLength = await this.GetRowCount();    // Buscar la cantidad de elementos a recorrer\n\t\t\t// else\n\t\t\t//     this.m_nBrowseLength = -1;\n\t\t\t// Ahora s est en condiciones de recorrer el lazo\n\t\t\t// Simular el orden en el LoadAll\n\t\t\tfor (; await rs.next(); nOrder++) {\n\t\t\t\t// Todos los records\n\t\t\t\t//  Crear el objeto es toda una yerba en condiciones normales\n\t\t\t\t//  pero asumiremos que si no hay un GUID vlido aqu sea\n\t\t\t\t//  porque se va a usar el clsico. Al crear el objeto indicar que es solo para cargar...\n\t\t\t\tobj = await this.DataColl.CreateObject(false);\n\t\t\t\tif (null == obj) {\n\t\t\t\t\t// No se puede crear el objeto\n\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t////throw new XoneGenericException(-1005, \"CXoneDataCollection::LoadAll no puede crear un nuevo objeto. CreateObject ha falldo.\");\n\t\t\t\t\tlet sb = this.DataColl.GetMessage(XoneMessageKeys.SYS_MSG_COLL_LOADALLFAIL_02, \"{0} cannot create a new object. CreateObject failed.\");\n\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\tthrow new XoneGenericException(-1005, sb);\n\t\t\t\t} // No se puede crear el objeto\n\t\t\t\t// ADD TAG Cambiar de posicion el MAP_SYS_ORDER para que en el load ya este disponible en que posicion va a estar\n\t\t\t\tobj.SetPropertyValue(\"MAP_SYS_ORDER\", nOrder - 1);\n\t\t\t\t// Cargar el objeto\n\t\t\t\tif (!obj.Load(rs)) {\n\t\t\t\t\t// Error\n\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t////throw new XoneGenericException(-10051, \"CXoneDataCollection::LoadAll ha fallado. Ha ocurrido un fallo llamando a MainObject::Load.\");\n\t\t\t\t\tlet sb = this.DataColl.GetMessage(XoneMessageKeys.SYS_MSG_COLL_LOADALLFAIL_03, \"{0} failed. Call to XoneDataObject::Load failed.\");\n\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\tthrow new XoneGenericException(-10051, sb);\n\t\t\t\t} // Error\n\t\t\t\tobj.GetObjectIdString();\n\t\t\t\tthis.AddItem(obj);\n\t\t\t} // Todos los records\n\t\t\t//\n\t\t\t// Cerrar y liberar todo\n\t\t\trs.close();\n\t\t\trs = null;\n\t\t\tthis.DataColl.setFull(true);\n\t\t\treturn this.DataColl;\n\t\t} catch (e) {\n\t\t\tthis.m_bIsFetchDataRunning = true;\n\t\t\tif (rs != null) {\n\t\t\t\t// Cerrar\n\t\t\t\ttry {\n\t\t\t\t\trs.close();\n\t\t\t\t} catch (se) {}\n\t\t\t\trs = null;\n\t\t\t} // Cerrar\n\t\t\tthrow e;\n\t\t} finally {\n\t\t\tthis.m_bIsFetchDataRunning = false;\n\t\t}\n\t}\n\n\t// amiyares 10/06/2021 -> fallaba parseando un formato de fecha\n\tPrepareSort(Sort: string): string {\n\t\treturn Sort;\n\t}\n\n\t// PrepareSort(Sort: string): string {\n\t//     let i = 0, l = 0, k = 0;\n\t//     let str = \"\", str1 = \"\", strTmp = \"\", strField = \"\", strOut = \"\";\n\t//     let bFieldComplete = false, bIsField = false;\n\n\t//     if (StringUtils.IsEmptyString(Sort))\n\t//         return Sort;\n\t//     let strIn = Sort.trim();\n\t//     if (StringUtils.IsEmptyString(strIn))\n\t//         return strIn;\n\t//     for (i = 0, l = strIn.length; i < l; i++) {// Buscar cada caracter\n\t//         // F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n\t//         str = strIn.substring(i, i + 1);\n\t//         if (str.equals(\"%\") || str.equals(\"$\") || str.equals(\"#\")) {// Buscar la coma o el final y quitarlo\n\t//             k = strIn.indexOf(\",\", i);\n\t//             if (k == -1) {// En dependencia de si va a la mitad o no\n\t//                 if (i > 0)\n\t//                     // F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n\t//                     return strIn.substring(i - 1, i).equals(\",\") ? strIn.substring(0, i - 1) : strIn.substring(0, i);\n\t//                 else\n\t//                     return \"\";\n\t//             }// En dependencia de si va a la mitad o no\n\t//             if (i > 0)\n\t//                 // F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n\t//                 str = strIn.substring(i - 1, i).equals(\",\") ? strIn.substring(0, i - 1) : strIn.substring(0, i);\n\t//             else\n\t//                 str = \"\";\n\t//             // F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n\t//             str1 = strIn.substring(k + 1, strIn.length - k);\n\t//             strIn = str + str1;\n\t//             l = strIn.length;\n\t//             i = -1;\n\t//         }// Buscar la coma o el final y quitarlo\n\t//     }// Buscar cada caracter\n\t//     strIn = strIn.trim();\n\t//     if (StringUtils.IsEmptyString(strIn))\n\t//         return strIn;\n\t//     if (this.Options.bUseRaw && !this.IsUnionQuery()) {// Usa el SQL sin subqueries\n\t//         strOut = strField = \"\";\n\t//         for (i = 0, l = strIn.length, strTmp = \"\", bFieldComplete = false; i < l; i++) {// Cada caracter\n\t//             let c: string;\n\t//             switch (c = strIn.charAt(i)) {\n\t//                 case ' ': // Espacios\n\t//                 case ',':\n\t//                     if (bIsField) {// Se acab el campo\n\t//                         // F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n\t//                         for (strTmp = strIn.substring(i, i + 1); i < l && strIn.substring(i + 1, i + 2).equals(\" \"); strTmp += strIn.substring(i, i + 1), i++);\n\t//                         bFieldComplete = true;\n\t//                         bIsField = false;\n\t//                     }// Se acab el campo\n\t//                     else\n\t//                         strOut += c;\n\t//                     break;\n\t//                 default:\n\t//                     if (bIsField)\n\t//                         strField += c;\n\t//                     else {// No contar este\n\t//                         bIsField = true;\n\t//                         i--;\n\t//                     }// No contar este\n\t//                     break;\n\t//             }\n\t//             // Si ha terminado un campo procesarlo\n\t//             if (bFieldComplete) {// Comprobar si es un operador\n\t//                 str = strField.toLowerCase();\n\t//                 if (!(str.equals(\"asc\") || str.equals(\"desc\"))) {// Comprobar\n\t//                     // Puede que sea un campo\n\t//                     strField = this.QualifyField(strField);\n\t//                 }// Comprobar\n\t//                 // Adicionar a la cadena de salida\n\t//                 if (strTmp.contains(\"  \"))\n\t//                     strTmp = StringUtils.Replace(strTmp, \"  \", \" \");\n\t//                 if (strTmp.contains(\",,\"))\n\t//                     strTmp = StringUtils.Replace(strTmp, \",,\", \",\");\n\t//                 strOut += (strField + strTmp);\n\t//                 strField = \"\";\n\t//                 strTmp = \"\";\n\t//                 bFieldComplete = false;\n\t//             }// Comprobar si es un operador\n\t//         }// Cada caracter\n\t//         if (bFieldComplete || !StringUtils.IsEmptyString(strField)) {// Comprobar si es un operador\n\t//             str = strField.toLowerCase();\n\t//             if (!(str.equals(\"asc\") || str.equals(\"desc\"))) {// Puede que sea un campo\n\t//                 strField = this.QualifyField(strField);\n\t//             }// Puede que sea un campo\n\t//             // Adicionar a la cadena de salida\n\t//             strOut += (strField + strTmp);\n\t//             strField = \"\";\n\t//             strTmp = \"\";\n\t//             bFieldComplete = false;\n\t//         }// Comprobar si es un operador\n\t//         strIn = strOut;\n\t//     }// Usa el SQL sin subqueries\n\n\t//     return strIn;\n\t// }\n\tpublic async IsUnionQuery(Sentence?: SqlParser): Promise<boolean> {\n\t\tlet parser = Sentence;\n\n\t\tif (parser == null) {\n\t\t\t// Trabajar con la de la coleccin\n\t\t\tif (this.m_parsedAccessString == null)\n\t\t\t\tif (!(await this.ParseAccessString())) {\n\t\t\t\t\t// Error\n\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t////throw new Exception(\"No se puede interpretar la sentencia SQL de la coleccin '\" + m_strName + \"'\");\n\t\t\t\t\tlet sb = this.DataColl.GetMessage(\n\t\t\t\t\t\tXoneMessageKeys.SYS_MSG_COLL_SQLPARSEERROR_01,\n\t\t\t\t\t\t\"{0} failed. Cannot parse SQL sentence for collection '{1}'\"\n\t\t\t\t\t);\n\t\t\t\t\tsb = sb.replace(\"{0}\", \"CXoneDataCollection::IsUnionQuery\");\n\t\t\t\t\tsb = sb.replace(\"{1}\", this.DataColl.getName());\n\t\t\t\t\tthrow new XoneGenericException(-10990, sb);\n\t\t\t\t} // Error\n\t\t\tparser = this.m_parsedAccessString;\n\t\t} // Trabajar con la de la coleccin\n\t\tif (parser == null) return false;\n\t\t// De lo contrario ver lo que dice el parser en s y para s\n\t\treturn parser.getIsUnionQuery();\n\t}\n\n\t/**\n\t * Parsea la cadena de acceso a datos de la coleccin\n\t * @return\t\t\t\tDevuelve TRUE si la cadena se parsea correctamente.\n\t * @throws Exception\n\t */\n\tpublic async ParseAccessString(): Promise<boolean> {\n\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\tthis.m_parsedAccessString = new SqlParser(this.getConnection().getRowIdFieldName(), this.DataColl.getOwnerApp().getMessageHolder());\n\n\t\t// M09072901:\tPermitir que se puedan traducir los joins a formato where en blackberry\n\t\t// Indicar que las sentencias con inner join tienen que traducirse\n\t\t/////m_parsedAccessString.setTranslateJoins(true);\n\t\tlet s = this.DataColl.getAccessString();\n\t\tif (TextUtils.isEmpty(s)) return true;\n\t\t// Vamos a buscar las macros\n\t\tthis.DataColl.ParseMacros(s);\n\t\treturn true;\n\t\t// let b =\n\t\t//     this.m_parsedAccessString.ParseSqlString(s) == SqlType.SQLTYPE_SELECT;\n\t\t// // F10090805:\tSi falla el parsing del SQL de una coleccin, eliminar el parser.\n\t\t// // Si falla el parsing tenemos que cargarnos el parser.\n\t\t// if (!b) this.clearParsedAccessString();\n\t\t// return b;\n\t}\n\n\tpublic clearParsedAccessString() {\n\t\tthis.m_parsedAccessString = null;\n\t}\n\n\tpublic getParsedAccessString() {\n\t\treturn this.m_parsedAccessString;\n\t}\n\n\tprotected GenerateRowID(): string {\n\t\treturn this.getConnection().GenerateRowId();\n\t}\n\n\t/**\n\t * Devuelve el nombre real de un campo dado su nombre interno. La mayora de los campos no estn mapeados y devuelven el mismo nombre pasado como parmetro.\n\t * @param FieldName\t\t\tNombre del campo que se quiere mapear\n\t * @param DatabaseField\t\tTRUE si se trata de un campo de base de datos. En este caso si tiene espacios se encierra en separadores.\n\t * @return\t\t\t\t\tDevuelve el nombre del campo mapeado.\n\t */\n\tpublic MapField(FieldName: string, DatabaseField: boolean = false): string {\n\t\tlet strFldName = FieldName;\n\t\t// Si resulta que el nombre de campo que estn pasando es nulo o vaco no hacemos nada\n\t\tif (StringUtils.IsEmptyString(strFldName)) return FieldName;\n\t\t// De lo contrario ya se puede buscar en la lista...\n\t\tif (this.m_lstFieldMappings.containsKey(FieldName)) strFldName = this.m_lstFieldMappings.get(FieldName);\n\t\t// Comprobar si tiene espacios y encerrarlo entre caracteres delimitadores\n\t\tif (strFldName.indexOf(\" \") != -1 && DatabaseField) strFldName = this.getConnection().QuoteFieldName(strFldName);\n\t\t// Lo que sea\n\t\treturn strFldName;\n\t}\n\n\t/**\n\t * Dada una cadena SQL la prepara sustituyendo las macros que contiene\n\t * F12042601: PrepareSqlString no delega en la aplicacin cuando se llama a la coleccin.\n\t * Incluir los parmetros que le pasamos al PrepareSqlString de la conexin.\n\t *\n\t * @param Sentence\t\t\tSentencia SQL que se quiere preparar (sustituir macros y dems)\n\t * @return\t\t\t\t\tDevuelve la cadena con las macros sustituidas.\n\t * @throws Exception\n\t */\n\tpublic PrepareSqlString(Sentence: string, ChkGroup: boolean = false, Prefiltered: boolean = false): string {\n\t\t// Cadena vaca, no hacemos nada\n\t\tif (StringUtils.IsEmptyString(Sentence)) return Sentence;\n\t\t// No macros, tampoco\n\t\tif (!Sentence.contains(\"##\")) return Sentence;\n\t\t// No conexin, tampoco nada\n\t\tif (this.getConnection() == null) return Sentence;\n\t\t// Sustituir cosillas propias de la coleccin\n\t\tlet strOut = Sentence;\n\t\tif (strOut.contains(\"##FILTER##\")) {\n\t\t\t// Filtro\n\t\t\tstrOut = StringUtils.Replace(strOut, \"##FILTER##\", StringUtils.SafeToString(this.DataColl.getFilter())); // Filtro\n\t\t\tif (!strOut.contains(\"##\")) return strOut;\n\t\t} // Filtro\n\t\tif (strOut.contains(\"##LINKFILTER##\")) {\n\t\t\t// Filtro de enlace\n\t\t\tstrOut = StringUtils.Replace(strOut, \"##LINKFILTER##\", StringUtils.SafeToString(this.DataColl.getLinkFilter())); // Filtro de enlace\n\t\t\tif (!strOut.contains(\"##\")) return strOut;\n\t\t} // Filtro de enlace\n\t\t// ##ACCESS_STRING## completa, por si las moscas...\n\t\tif (strOut.contains(\"##ACCESS_STRING##\")) {\n\t\t\t// Cadena de acceso\n\t\t\tstrOut = StringUtils.Replace(\n\t\t\t\tstrOut,\n\t\t\t\t\"##ACCESS_STRING##\",\n\t\t\t\tUtils.EMPTY_STRING\n\t\t\t\t// Luis: Esto hay que ver si es necesario StringUtils.SafeToString(this.DataColl.getAccessString())\n\t\t\t);\n\t\t\tif (!strOut.contains(\"##\")) return strOut;\n\t\t} // Cadena de acceso\n\t\t// Si tiene ROWID, generarlo\n\t\tif (strOut.contains(\"##ROWID##\")) strOut = StringUtils.Replace(strOut, \"##ROWID##\", StringUtils.SafeToString(this.GenerateRowID())); // Generar un ROWID\n\n\t\t// Finalmente, lo que quiera amarosa\n\t\t// A11070101: Incluir la evaluacin de operadores custom (BIT) en las sentencias SQL.\n\t\tlet cd = this.getConnection();\n\t\t// F12042601: PrepareSqlString no delega en la aplicacin cuando se llama a la coleccin.\n\t\t// Pasar los parmetros a la conexin\n\t\tstrOut = cd.PrepareSqlString(strOut, ChkGroup, Prefiltered);\n\t\tif (strOut.contains(\"##BIT##\")) strOut = cd.ReplaceCustomOper(this.DataColl, strOut, \"##BIT##\");\n\t\t// F12042601: PrepareSqlString no delega en la aplicacin cuando se llama a la coleccin.\n\t\tif (strOut.contains(\"##\")) strOut = this.DataColl.getOwnerApp().PrepareSqlString(strOut);\n\t\treturn strOut;\n\t}\n\n\t/**\n\t * Dada una sentencia o cadena cualquiera, desarrolla en ella las macros de filtros\n\t * @param Sentence\t\t\tSentencia SQL o cadena cuyas macros se quieren desarrollar.\n\t * @return\t\t\t\t\tDevuelve la cadena con las macros de filtro desarrolladas.\n\t */\n\tprivate DevelopFilterMacros(Sentence: string): string {\n\t\tlet strTmp = \"\";\n\t\t// UN CAMBEO\n\t\t// En este momento se pueden sustituir otros valores\n\t\t// para las macros de fecha y esas cosas\n\t\tif (StringUtils.IsEmptyString(Sentence)) return Sentence; // No hay nada que hacer\n\t\t// Sacar una copia para sustituir las macros\n\t\tlet strSrcFilter = Sentence;\n\t\tif (strSrcFilter.contains(\"##\")) {\n\t\t\t// Solo si hay algo en el filtro\n\t\t\tif (strSrcFilter.contains(\"##NOW\")) {\n\t\t\t\t// Macros de fecha\n\t\t\t\tlet dt = Calendar.getInstance();\n\t\t\t\t// Primero la fecha con hora\n\t\t\t\tif (strSrcFilter.contains(\"##NOW_TIME##\")) {\n\t\t\t\t\t// Con hora\n\t\t\t\t\tstrTmp = this.DevelopObjectValue(dt);\n\t\t\t\t\tstrSrcFilter = StringUtils.Replace(strSrcFilter, \"##NOW_TIME##\", strTmp);\n\t\t\t\t} // Con hora\n\t\t\t\t//\n\t\t\t\tif (strSrcFilter.contains(\"##NOW\")) {\n\t\t\t\t\t// Sin hora\n\t\t\t\t\t//\n\t\t\t\t\tObjUtils.ZeroCalendarTime(dt);\n\t\t\t\t\tstrTmp = this.DevelopObjectValue(dt);\n\t\t\t\t\t// Quitar la hora nula de la macro\n\t\t\t\t\t// K10052501:\tCon SQLite hay que incluir siempre la hora en las fechas.\n\t\t\t\t\t// Quitar la bsqueda y sustitucin de la cadena de hora cero...\n\t\t\t\t\t////if (strTmp.indexOf(\" 00:00:00\") !=-1)\n\t\t\t\t\t////{// Tiene la hora nula, quitarla\n\t\t\t\t\t////    strTmp = StringUtils.Replace(strTmp, \" 00:00:00\", \"\").trim();\n\t\t\t\t\t////}// Tiene la hora nula, quitarla\n\t\t\t\t\tif (strSrcFilter.contains(\"##NOW_NOTIME##\")) strSrcFilter = StringUtils.Replace(strSrcFilter, \"##NOW_NOTIME##\", strTmp);\n\t\t\t\t\tif (strSrcFilter.contains(\"##NOW##\")) strSrcFilter = StringUtils.Replace(strSrcFilter, \"##NOW##\", strTmp);\n\t\t\t\t} // Sin hora\n\t\t\t} // Macros de fecha\n\t\t} // Solo si hay algo en el filtro\n\t\treturn strSrcFilter;\n\t}\n\n\t/**\n\t * Dada una sentencia o cadena cualquiera, desarrolla los filtros de coleccin incluidos en ella\n\t * @param Sentence\t\t\tSentencia SQL o cadena que se quiere desarrollar.\n\t * @return\t\t\t\t\tDevuelve una cadena con los filtros ya desarrollados.\n\t * @throws Exception\n\t */\n\tprivate DevelopCollFilters(Sentence: string): string {\n\t\tlet str = \"\",\n\t\t\tstrColl = \"\",\n\t\t\tstrUserIDColl = \"\",\n\t\t\tstrTmp = \"\";\n\t\tlet ent: XoneDataObject;\n\n\t\tif (!Sentence.contains(\"##\")) return Sentence; // Nada que hacer\n\t\t// Sacar una copia para efectuar las sustituciones...\n\t\tlet strFilter = Sentence;\n\t\tif (\n\t\t\tstrFilter.contains(\"##ENTID##\") ||\n\t\t\tstrFilter.contains(\"##ENTIDCOLL##\") ||\n\t\t\tstrFilter.contains(\"##USERID##\") ||\n\t\t\tstrFilter.contains(\"##USERIDCOLL##\") ||\n\t\t\tstrFilter.contains(\"##ENTIDLEVEL##\") ||\n\t\t\tstrFilter.contains(\"##ENTIDOWNER##\")\n\t\t) {\n\t\t\t// Macros de empresa o usuario\n\t\t\tif (null != (ent = this.DataColl.getOwnerApp().getCurrentCompany())) {\n\t\t\t\t// Tiene empresa\n\t\t\t\tstr = \"=\" + ent.GetObjectIdString(true);\n\t\t\t\t//\n\t\t\t\t// No es necesario incluir el ID de la propia empresa porque ya viene en el EntIDColl\n\t\t\t\t// De paso se comprueba que en caso de tratarse de un solo ID, no se incluya en un IN\n\t\t\t\t// sino que sea solo una igualdad...\n\t\t\t\t// Cuando se analiza el valor de la macro de ENTIDCOLL o ENTIDLEVEL hay que considerarla\n\t\t\t\t// valor nico solamente si no tiene espacios, pues puede ser cualquier cosa mandada de\n\t\t\t\t// fuera... ante la duda usar IN\n\t\t\t\tif (!StringUtils.IsEmptyString(this.DataColl.getOwnerApp().getIdColl())) {\n\t\t\t\t\t// Tiene algo\n\t\t\t\t\tstrTmp = this.DataColl.getOwnerApp().getIdColl();\n\t\t\t\t\tif (strTmp.indexOf(\",\") == -1 && strTmp.indexOf(\" \") == -1) strColl = \"=\" + strTmp;\n\t\t\t\t\telse strColl = \" IN (\" + strTmp + \") \";\n\t\t\t\t} // Tiene algo\n\t\t\t\telse strColl = str;\n\t\t\t\tif (!StringUtils.IsEmptyString(this.DataColl.getOwnerApp().getUserIdColl()))\n\t\t\t\t\tstrUserIDColl = \" IN (\" + this.DataColl.getOwnerApp().getUserIdColl() + \")\";\n\t\t\t\telse strUserIDColl = \" IS NULL\";\n\n\t\t\t\tstrFilter = StringUtils.Replace(strFilter, \"=##ENTID##\", str);\n\t\t\t\tstrFilter = StringUtils.Replace(strFilter, \"=##ENTIDCOLL##\", strColl);\n\t\t\t\tstrFilter = StringUtils.Replace(strFilter, \"=##USERIDCOLL##\", strUserIDColl);\n\t\t\t\t// Buscar la coleccin de empresas al mismo nivel y por esta rama hacia arriba\n\t\t\t\tif (strFilter.contains(\"##ENTIDLEVEL##\")) {\n\t\t\t\t\t// Tiene esta macro\n\t\t\t\t\tif (!StringUtils.IsEmptyString(this.DataColl.getOwnerApp().getEntIdLevel())) {\n\t\t\t\t\t\t// Tiene algo\n\t\t\t\t\t\tstrTmp = this.DataColl.getOwnerApp().getEntIdLevel();\n\t\t\t\t\t\tif (strTmp.indexOf(\",\") == -1 && strTmp.indexOf(\" \") == -1) strColl = \"=\" + strTmp;\n\t\t\t\t\t\telse strColl = \" IN (\" + strTmp + \") \";\n\t\t\t\t\t} // Tiene algo\n\t\t\t\t\telse strColl = str;\n\t\t\t\t\t//\n\t\t\t\t\t// Ahora hacer la sustitucin\n\t\t\t\t\tstrFilter = StringUtils.Replace(strFilter, \"=##ENTIDLEVEL##\", strColl);\n\t\t\t\t} // Tiene esta macro\n\t\t\t\t// Buscar la macro\n\t\t\t\tif (strFilter.contains(\"##ENTIDOWNER##\")) {\n\t\t\t\t\t// Tiene esta macro\n\t\t\t\t\tstrTmp = this.DataColl.getOwnerApp().getEntIdOwner();\n\t\t\t\t\tif (!StringUtils.IsEmptyString(strTmp)) strColl = \"=\" + strTmp;\n\t\t\t\t\t// Tiene algo\n\t\t\t\t\telse strColl = str;\n\t\t\t\t\t// Ahora hacer la sustitucin\n\t\t\t\t\tstrFilter = StringUtils.Replace(strFilter, \"=##ENTIDOWNER##\", strColl);\n\t\t\t\t} // Tiene esta macro\n\t\t\t\t//\n\t\t\t\tstrFilter = StringUtils.Replace(strFilter, '\"', \"'\");\n\t\t\t\t// Usuario\n\t\t\t\tlet n = NumberUtils.SafeToInt(ent.GetRawPropertyValue(\"MAP_IDCURRENTUSER\"));\n\t\t\t\tif (n == 0) str = \" IS NULL\";\n\t\t\t\telse str = \"=\" + n;\n\t\t\t\tstrFilter = StringUtils.Replace(strFilter, \"=##USERID##\", str);\n\t\t\t} // Tiene empresa\n\t\t} // Macros de empresa o usuario\n\t\t//\n\t\t// El MID si est replicando\n\t\tif (strFilter.contains(\"##MID##\")) {\n\t\t\t// El MID solo si est replicando\n\t\t\tif (this.getConnection().getIsReplicating()) {\n\t\t\t\t// Est replicando\n\t\t\t\tstr = \"'\" + this.getConnection().getMID() + \"'\";\n\t\t\t\tstrFilter = StringUtils.Replace(strFilter, \"##MID##\", str);\n\t\t\t} // Est replicando\n\t\t} // El MID solo si est replicando\n\t\t//\n\t\tif (strFilter.contains(\"##ID##\")) {\n\t\t\t// Solo si tiene que sustituirlo\n\t\t\tif (this.DataColl.getOwnerObject() != null) {\n\t\t\t\t// Objeto propietario\n\t\t\t\tstr = this.DataColl.getOwnerObject().GetObjectIdString(true);\n\t\t\t\tstrFilter = StringUtils.Replace(strFilter, \"=##ID##\", str.equals(\"NULL\") ? \" IS NULL\" : \"=\" + str);\n\t\t\t} // Objeto propietario\n\t\t} // Solo si tiene que sustituirlo\n\t\t//\n\t\t// Si dentro de algn filtro hay operadores bitwise, comprobar los datos\n\t\t// en el nodo DBMS para sustituir por la operacin correcta\n\t\tstrFilter = this.getConnection().ReplaceCustomOper(this.DataColl, strFilter, \"##BIT##\");\n\n\t\treturn strFilter;\n\t}\n\n\t//#endregion\n\t/**\n\t * Desarrolla el valor de un objeto y lo devuelve como cadena preparada para colocar en una sentencia SQL o filtro.\n\t *\n\t * K12102201: Modificacin de DevelopObjectValue para pasar ForceNulls como parmetro.\n\t * Un parmetro para indicar si se fuerzan los nulos o no.\n\t *\n\t * @param Value\t\t\tValor que se quiere desarrollar.\n\t * @return\t\t\t\tDevuelve el valor desarrollado como cadena con sus comillas y dems.\n\t */\n\tpublic DevelopObjectValue(Value: object, ForceNulls: boolean = true): string {\n\t\treturn this.getConnection().DevelopObjectValue(Value, ForceNulls);\n\t}\n\t//#region Preparar busquedas en el SQL\n\t/**\n\t * M09072903:\tProgramar un mecanismo de restauracin de campos para SQLs sin unin.\n\t * Dada una cadena de bsqueda se arma un SQL para ejecutar y buscar una o varias filas que\n\t * correspondan a dicha clave. Utilizado para las bsquedas de objetos en base de datos.\n\t * @param KeySearch\t\t\tClave que contiene los posibles filtros de bsqueda del elemento en base de datos.\n\t * @return\t\t\t\t\tDevuelve una sentencia SELECT Con la sintaxis adecuada y la clave pasada en su lugar correcto.\n\t * @throws Exception\n\t */\n\tpublic async GenerateSearchSql(KeySearch: string): Promise<string> {\n\t\tlet strCmd: string;\n\t\tif (this.Options.bUseRaw) {\n\t\t\t// No permite subqueries\n\t\t\t// F12042504: Una coleccin con un sql desconocido no debera generar sql de bsqueda.\n\t\t\t// Esto est hecho en PDA, habr que documentar\n\t\t\tif (!this.Options.bParseSQL) return this.DataColl.getAccessString();\n\t\t\tif (this.m_parsedAccessString == null) if (!(await this.ParseAccessString())) return \"\";\n\t\t\tif (this.m_parsedAccessString == null) strCmd = Utils.EMPTY_STRING;\n\t\t\telse if (this.m_parsedAccessString.GetSqlType() == SqlType.SQLTYPE_UNKNOWN) strCmd = Utils.EMPTY_STRING;\n\t\t\telse strCmd = await this.EmbedFilters(KeySearch);\n\t\t} // No permite subqueries\n\t\telse {\n\t\t\t// Permite subqueries\n\t\t\t// F12112103: Cuando se usan subqueries no se est generando el SQL adecuado.\n\t\t\t// Arreglar esto cuando hay subqueries.\n\t\t\tif (this.Options.bSingleObject) strCmd = \"SELECT * FROM \" + this.DataColl.getAccessString() + \" rrss WHERE \" + KeySearch;\n\t\t\telse strCmd = \"SELECT * FROM (\" + this.DataColl.getAccessString() + \") rrss WHERE \" + KeySearch;\n\t\t} // Permite subqueries\n\t\treturn strCmd;\n\t}\n\n\t/**\n\t * M09072903:\tProgramar un mecanismo de restauracin de campos para SQLs sin unin.\n\t * Esta funcin genera una cadena de bsqueda para efectuar una bsqueda en base de datos.\n\t * Incluye los filtros, las macros de bsqueda y dems.\n\t * @param FieldName\t\t\tNombre del campo por el que se va a armar la clave de bsqueda.\n\t * @param FieldValue\t\tValor que se quiere buscar.\n\t * @return\t\t\t\t\tDevuelve una cadena que se puede emplear para armar el SQL de bsqueda.\n\t * @throws Exception\n\t */\n\tpublic async GenerateKeySearch(FieldName: string, FieldValue: Object): Promise<string> {\n\t\tlet strKeySearch: string;\n\t\tlet strField = this.QualifyField(FieldName);\n\t\tif (FieldName.equals(this.DataColl.getIdFieldName())) {\n\t\t\tstrKeySearch = strField + \"=\" + this.FormatKeyValue(FieldValue.toString());\n\t\t\t// O10082401: Cuando el KeySearch es el campo clave no hacen falta ms filtros.\n\t\t\treturn strKeySearch;\n\t\t} else {\n\t\t\t// No es clave primaria\n\t\t\tstrKeySearch = strField + \"=\" + this.DevelopObjectValue(FieldValue); // Formatear la bsqueda\n\t\t\t// O10052502:\tAl armar la clave de bsqueda tener en cuenta la clave.\n\t\t\tif (this.DataColl.IsLinkedField(FieldName)) {\n\t\t\t\t// Si es un campo entero y el valor es cero, podra comparar con NULL tambin\n\t\t\t\tif (this.DataColl.FieldPropertyValue(FieldName, \"type\").equals(\"N\")) {\n\t\t\t\t\t// Convertir y preparar la cadenilla\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (NumberUtils.SafeToInt(FieldValue) == 0) strKeySearch = \"((\" + strKeySearch + \") OR (\" + strField + \" IS NULL))\";\n\t\t\t\t\t} catch (x) {\n\t\t\t\t\t\t// Ignorar\n\t\t\t\t\t}\n\t\t\t\t} // Convertir y preparar la cadenilla\n\t\t\t} // Si es un campo entero y el valor es cero, podra comparar con NULL tambin\n\t\t} // No es clave primaria\n\t\t// O10052502:\tAl armar la clave de bsqueda tener en cuenta la clave.\n\t\t// Incluir las declaraciones y llamada a ApplyFilters dentro de la condicin\n\t\tif (StringUtils.IsEmptyString(this.Options.strLookupMacroName)) {\n\t\t\t// Bsqueda sin macro de bsqueda\n\t\t\tlet strFilters: string = await this.ApplyFilters(false);\n\t\t\tif (!StringUtils.IsEmptyString(strFilters)) {\n\t\t\t\t// Concatenar ambos\n\t\t\t\tstrKeySearch = strKeySearch + \" AND (\" + strFilters + \")\";\n\t\t\t} // Concatenar ambos\n\t\t} // Bsqueda sin macro de bsqueda\n\t\treturn strKeySearch;\n\t}\n\n\t/**\n\t * Formatea y devuelve el valor de una clave de bsqueda de la coleccin en funcin de si es numrica o de cadena.\n\t * @param Key\t\t\tClave que se quiere formatear.\n\t * @return\t\t\t\tDevuelve la clave formateada en funcin de si la coleccin tiene clave numrica o no.\n\t */\n\tprivate FormatKeyValue(Key: string): string {\n\t\tif (this.DataColl.getStringKey()) return \"'\" + Key + \"'\";\n\t\t// De lo contrario, tal cual\n\t\treturn StringUtils.removeChars(Key, \"'\");\n\t}\n\n\t//#endregion\n\n\t//#region Para aplicar filtros a los queries\n\n\t/**\n\t * @return\t\t\tDevuelve TRUE si la cadena de acceso a datos de la coleccin tiene ya un filtro (WHERE, HAVING o algo por el estilo)\n\t * @throws Exception\n\t */\n\tpublic async IsSqlPrefiltered(): Promise<boolean> {\n\t\tif (!this.Options.bParseSQL) return false;\n\t\t// Si no est parseado el SQL, tendremos que parsearlo\n\t\tif (this.m_parsedAccessString == null || this.m_parsedAccessString.GetSqlType() == 0)\n\t\t\tif (!(await this.ParseAccessString())) {\n\t\t\t\t// Error\n\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t////throw new Exception(\"No se puede interpretar la sentencia SQL de la coleccin '\" + m_strName + \"' para XoneDataCollection::IsSqlPrefiltered\");\n\t\t\t\tlet sb = this.DataColl.GetMessage(\n\t\t\t\t\tXoneMessageKeys.SYS_MSG_COLL_SQLPARSEERROR_01,\n\t\t\t\t\t\"{0} failed. Cannot parse SQL sentence for collection '{1}'\"\n\t\t\t\t);\n\t\t\t\tsb = sb.replace(\"{0}\", \"CXoneDataCollection::IsSqlPrefiltered\");\n\t\t\t\tsb = sb.replace(\"{1}\", this.DataColl.getName());\n\t\t\t\tthrow new XoneGenericException(-6631, sb);\n\t\t\t} // Error\n\t\t// Buscar si ya est filtrado\n\t\t// Si tiene WHERE, entonces est prefiltrado\n\t\tif (!StringUtils.IsEmptyString(this.m_parsedAccessString.GetWhereSentence())) return true;\n\t\t// Si tiene HAVING entonces tambin est prefiltrado\n\t\tif (!StringUtils.IsEmptyString(this.m_parsedAccessString.getHavingSentence())) return true;\n\t\t// De lo contrario podra ser una unin\n\t\tif (this.m_parsedAccessString.getIsUnionQuery()) {\n\t\t\t// Analizar cada posible registro de la unin\n\t\t\tfor (let i = 0; i < this.m_parsedAccessString.getUnionQueries().length; i++) {\n\t\t\t\t// Basta con que uno de ellos est prefiltrado para considerar que lo est del todo\n\t\t\t\tlet sql = this.m_parsedAccessString.getUnionQueries()[i];\n\t\t\t\tif (!StringUtils.IsEmptyString(sql.GetWhereSentence())) return true;\n\t\t\t\tif (!StringUtils.IsEmptyString(sql.getHavingSentence())) return true;\n\t\t\t} // Basta con que uno de ellos est prefiltrado para considerar que lo est del todo\n\t\t} // Analizar cada posible registro de la unin\n\t\t// Finalmente es que no tenemos prefiltado ninguno...\n\t\treturn false;\n\t}\n\n\t/// Devuelve una sentencia SQL con los filtros de coleccin incluidos donde vayan dentro de ella (empleado para los DBMS que no usan subqueries)\n\t/// <param name=\"Sentence\">Sentencia SQL en la que se quieren incluir los filtros. NULL para usar la cadena de acceso de datos de la coleccin.</param>\n\t/// <param name=\"Filter\">Filtros que se quieren incluir dentro de la sentencia SQL</param>\n\tpublic async EmbedFilters(Sentence: SqlParser | string, Filter?: string): Promise<string> {\n\t\tlet sentence: SqlParser = null;\n\t\tif (typeof Sentence == \"string\") {\n\t\t\tFilter = Sentence as string;\n\t\t\tSentence = null;\n\t\t} else {\n\t\t\tsentence = Sentence;\n\t\t}\n\t\tconst FunctionName = \"CXoneDataCollection::EmbedFilters\";\n\t\t// Ver si nos han mandado los filtros. De lo contrario usamos los nuestros\n\t\tlet strFilter = StringUtils.IsEmptyString(Filter) ? await this.ApplyFilters(false) : Filter;\n\t\t// Ahora ver si nos mandan una sentencia en la cual insertar los filtros\n\t\tif (sentence == null) {\n\t\t\t// Obtener la de la coleccin\n\t\t\tif (this.m_parsedAccessString == null)\n\t\t\t\tif (!(await this.ParseAccessString())) {\n\t\t\t\t\t// Error\n\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t////throw new XoneGenericException(-1278, \"No se puede interpretar la sentencia SQL de la coleccin '\" + m_strName + \"'\");\n\t\t\t\t\tlet sb = this.DataColl.GetMessage(\n\t\t\t\t\t\tXoneMessageKeys.SYS_MSG_COLL_SQLPARSEERROR_01,\n\t\t\t\t\t\t\"{0} failed. Cannot parse SQL sentence for collection '{1}'\"\n\t\t\t\t\t);\n\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\tsb = sb.replace(\"{1}\", this.DataColl.getName());\n\t\t\t\t\tthrow new XoneGenericException(-1278, sb);\n\t\t\t\t} // Error\n\t\t\tsentence = this.m_parsedAccessString;\n\t\t} // Obtener la de la coleccin\n\t\t// Si no hay filtros que aplicar, no hacemos nada\n\t\tif (StringUtils.IsEmptyString(strFilter)) return sentence.RegenerateSql();\n\t\t// Ahora habr que trabajar diferente en funcin de si es una unin o no...\n\t\tlet output = new SqlParser(sentence);\n\t\tif (!output.CopyData(sentence)) {\n\t\t\t// Error\n\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t////throw new XoneGenericException(-1279, \"Error introduciendo los filtros en la sentencia SQL de la coleccin '\" + m_strName + \"'\");\n\t\t\tlet sb = this.DataColl.GetMessage(XoneMessageKeys.SYS_MSG_COLL_EMBEDFILTERFAIL, \"{0} failed. Error embedding filters in collection '{1}'\");\n\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\tsb = sb.replace(\"{1}\", this.DataColl.getName());\n\t\t\tthrow new XoneGenericException(-1279, sb);\n\t\t} // Error\n\t\t// Ahora meter aqu las cosillas\n\t\tlet strWhere: string;\n\t\tif (output.getIsUnionQuery()) {\n\t\t\t// Filtros a cada query de la unin\n\t\t\tfor (let i = 0; i < output.getUnionQueries().length; i++) {\n\t\t\t\t// Cada subquery\n\t\t\t\tlet uq = output.getUnionQueries()[i];\n\t\t\t\tif (!StringUtils.IsEmptyString(uq.GetWhereSentence())) strWhere = \"(\" + uq.GetWhereSentence() + \") AND \" + strFilter;\n\t\t\t\telse strWhere = strFilter;\n\t\t\t\tuq.SetWhereSentence(strWhere);\n\t\t\t} // Cada subquery\n\t\t} // Filtros a cada query de la unin\n\t\telse {\n\t\t\t// Un solo filtro\n\t\t\t// F12042503: Las sentencias que tienen grup by deben usar having en su filtro.\n\t\t\t// Las sentencias agrupadas llevan having\n\t\t\tlet strPrevFilter: string;\n\t\t\tlet bGroup = !TextUtils.isEmpty(output.getGroupBySentence());\n\t\t\tif (bGroup) strPrevFilter = output.getHavingSentence();\n\t\t\telse strPrevFilter = output.GetWhereSentence();\n\t\t\t// Concatenar o no\n\t\t\tif (!StringUtils.IsEmptyString(strPrevFilter)) strWhere = \"(\" + strPrevFilter + \") AND \" + strFilter;\n\t\t\telse strWhere = strFilter;\n\t\t\tif (bGroup) {\n\t\t\t\toutput.setHavingSentence(strWhere);\n\t\t\t\toutput.SetWhereSentence(Utils.EMPTY_STRING);\n\t\t\t} else {\n\t\t\t\toutput.SetWhereSentence(strWhere);\n\t\t\t\toutput.setHavingSentence(Utils.EMPTY_STRING);\n\t\t\t}\n\t\t} // Un solo filtro\n\t\t// Devolver la sentencia ya arreglada\n\t\treturn output.RegenerateSql();\n\t}\n\t/**\n\t * @param IncludeWhere\t\t\tTRUE si adems hay que devolverlo con la clave WHERE y listo para usarse como filtro.\n\t * @param Subquery\t\t\t\tSentencia SQL que se usar para cualificar los campos. NULL para usar la cadena de acceso de la coleccin.\n\t * @return\t\t\t\t\t\tDevuelve una cadena con los filtros de la coleccin ya desarrollados y con las macros sustituidas.\n\t * @throws Exception\n\t */\n\tprivate async ApplyFilters(IncludeWhere: boolean, Subquery: SqlParser = null): Promise<string> {\n\t\tlet strTmp = \"\",\n\t\t\tstr = \"\";\n\n\t\tif (!StringUtils.IsEmptyString(this.DataColl.getLinkFilter())) str = \"(\" + (await this.PrepareFilter(this.DataColl.getLinkFilter())) + \")\"; // Preparar y devolver el filtro\n\n\t\tif (!StringUtils.IsEmptyString(this.DataColl.getFilter())) {\n\t\t\t// Filtro normal\n\t\t\tif (!StringUtils.IsEmptyString(str)) str += \" AND \";\n\t\t\tstrTmp = \"(\" + (await this.PrepareFilter(this.DataColl.getFilter(), Subquery)) + \")\";\n\t\t\tstr += strTmp;\n\t\t} // Filtro normal\n\t\tif (!StringUtils.IsEmptyString(str)) {\n\t\t\t// Preparar el WHERE\n\t\t\tif (IncludeWhere) str = \" WHERE (\" + str + \") \";\n\t\t} // Preparar el WHERE\n\t\tif (!StringUtils.IsEmptyString(str)) {\n\t\t\t// Si no es vacia\n\t\t\t// Si lleva macros sustituirlas\n\t\t\tstr = this.DevelopCollFilters(str);\n\t\t\tstr = this.DevelopFilterMacros(str);\n\t\t\tstr = await this.DataColl.EvaluateAllMacros(str, true);\n\t\t\t//\n\t\t\t// Si la coleccin es un contents pasarle al propietario pa que evale las macros de campos\n\t\t\t/*\n                    Ocurre que desde que los filtros se evalan siempre dinmicamente es necesario\n                    reevaluar incluso los filtros de los contents, sobre todo porque cuando se crean\n                    objetos nuevos hay que poner los valores por defecto o los que vienen de las macros\n                    de campos\n                */\n\t\t\tif (this.DataColl.getOwnerObject() != null) str = this.DataColl.getOwnerObject().PrepareSqlString(str);\n\t\t\t// A11070101: Incluir la evaluacin de operadores custom (BIT) en las sentencias SQL.\n\t\t\t// F12042601: PrepareSqlString no delega en la aplicacin cuando se llama a la coleccin.\n\t\t\telse str = this.PrepareSqlString(str, false, false);\n\t\t\t/*\n                    Puede ser que despus de todo esto quedaran macros sin sustituir, por lo que\n                    en caso de tratarse de una coleccin de contents que est dentro de otro objeto\n                    se puedan resolver estas macros en la coleccin propietaria del otro objeto\n                */\n\t\t\tif (str.contains(\"##\") && this.DataColl.getOwnerObject() != null) {\n\t\t\t\t// Quedan cosas\n\t\t\t\tstr = await this.DataColl.getOwnerObject().getOwnerCollection().EvaluateAllMacros(str, true);\n\t\t\t} // Quedan cosas\n\t\t} // Si no es vacia\n\n\t\treturn str;\n\t}\n\n\t/**\n\t * @param IncludeWhere\t\t\tTRUE si adems hay que devolverlo con la clave WHERE y listo para usarse como filtro.\n\t * @param Subquery\t\t\t\tSentencia SQL que se usar para cualificar los campos. NULL para usar la cadena de acceso de la coleccin.\n\t * @return\t\t\t\t\t\tDevuelve una cadena con los filtros de la coleccin ya desarrollados y con las macros sustituidas.\n\t * @throws Exception\n\t */\n\tpublic async ResolveFilters(IncludeWhere: boolean, Subquery: SqlParser = null, keySearch: string = null): Promise<string> {\n\t\tlet strTmp = \"\",\n\t\t\tstr = \"\";\n\n\t\tif (!StringUtils.IsEmptyString(this.DataColl.getLinkFilter())) str = \"(\" + (await this.PrepareFilter(this.DataColl.getLinkFilter())) + \")\"; // Preparar y devolver el filtro\n\n\t\tif (keySearch) {\n\t\t\tif (!StringUtils.IsEmptyString(str)) str += \" AND \";\n\t\t\tstrTmp = \"(\" + keySearch + \")\";\n\t\t\tstr += strTmp;\n\t\t} else if (!StringUtils.IsEmptyString(this.DataColl.getFilter())) {\n\t\t\t// Filtro normal\n\t\t\tif (!StringUtils.IsEmptyString(str)) str += \" AND \";\n\t\t\tstrTmp = \"(\" + (await this.PrepareFilter(this.DataColl.getFilter(), Subquery)) + \")\";\n\t\t\tstr += strTmp;\n\t\t} // Filtro normal\n\t\tif (!StringUtils.IsEmptyString(str)) {\n\t\t\t// Preparar el WHERE\n\t\t\tif (IncludeWhere) str = \" WHERE (\" + str + \") \";\n\t\t} // Preparar el WHERE\n\t\tif (!StringUtils.IsEmptyString(str)) {\n\t\t\t// Si no es vacia\n\t\t\t// Si lleva macros sustituirlas\n\t\t\tstr = this.DevelopCollFilters(str);\n\t\t\tstr = this.DevelopFilterMacros(str);\n\t\t\tstr = await this.DataColl.EvaluateAllMacros(str, true);\n\t\t\t//\n\t\t\t// Si la coleccin es un contents pasarle al propietario pa que evale las macros de campos\n\t\t\t/*\n                    Ocurre que desde que los filtros se evalan siempre dinmicamente es necesario\n                    reevaluar incluso los filtros de los contents, sobre todo porque cuando se crean\n                    objetos nuevos hay que poner los valores por defecto o los que vienen de las macros\n                    de campos\n                */\n\t\t\tif (this.DataColl.getOwnerObject() != null) str = this.DataColl.getOwnerObject().PrepareSqlString(str);\n\t\t\t// A11070101: Incluir la evaluacin de operadores custom (BIT) en las sentencias SQL.\n\t\t\t// F12042601: PrepareSqlString no delega en la aplicacin cuando se llama a la coleccin.\n\t\t\telse str = this.PrepareSqlString(str, false, false);\n\t\t\t/*\n                    Puede ser que despus de todo esto quedaran macros sin sustituir, por lo que\n                    en caso de tratarse de una coleccin de contents que est dentro de otro objeto\n                    se puedan resolver estas macros en la coleccin propietaria del otro objeto\n                */\n\t\t\tif (str.contains(\"##\") && this.DataColl.getOwnerObject() != null) {\n\t\t\t\t// Quedan cosas\n\t\t\t\tstr = await this.DataColl.getOwnerObject().getOwnerCollection().EvaluateAllMacros(str, true);\n\t\t\t} // Quedan cosas\n\t\t} // Si no es vacia\n\n\t\treturn str;\n\t}\n\n\t/**\n\t * Prepara el filtro que se pasa como parmetro cualificando sus campos y dems.\n\t * @param Filter\t\t\t\tFiltro de datos que se quiere preparar.\n\t * @param Subquery\t\t\t\tSentencia SQL parseada que se usar para cualificar los campos del filtro.\n\t * @return\t\t\t\t\t\tDevuelve el filtro ya preparado con los campos cualificados y dems.\n\t * @throws Exception\n\t */\n\tpublic async PrepareFilter(Filter: string, Subquery?: SqlParser): Promise<string> {\n\t\tlet strField = \"\",\n\t\t\tstr = \"\";\n\t\tlet strOut = new StringBuilder();\n\t\tlet strTmp = new StringBuilder();\n\t\tlet c = \"\";\n\t\tlet i = 0,\n\t\t\tnCount = 0;\n\t\tlet bIsField = false,\n\t\t\tbFieldComplete = false,\n\t\t\tbIsTextToken = false;\n\n\t\tif (StringUtils.IsEmptyString(Filter)) return Filter;\n\t\t// Si no usa el SQL sin subqueries no es necesario hacer ningn preprocesamiento\n\t\t// del filtro, sino que se usa tal cual... ventajas de los DBMS decentes...\n\t\tif (!this.Options.bUseRaw) return Filter;\n\t\t// O11112401: Aquellas colecciones que usan una sola tabla no tienen que cualificar.\n\t\t// Si tenemos un sql de una sola tabla entonces no tenemos que cualificar los campos\n\t\tif (Subquery == null) {\n\t\t\t// Usar la parseada\n\t\t\tif (this.m_parsedAccessString == null) await this.ParseAccessString();\n\t\t\t// Usarla si la tenemos...\n\t\t\tSubquery = this.m_parsedAccessString;\n\t\t} // Usar la parseada\n\t\tif (Subquery != null) {\n\t\t\t// Tiene subquery\n\t\t\tlet table = Subquery.getTableFrom();\n\t\t\tif (table != null) {\n\t\t\t\t// Tabla\n\t\t\t\tif (null == table.getSecondTable()) return Filter;\n\t\t\t} // Tabla\n\t\t} // Tiene subquery\n\t\t// Ahora debe parsear el filtro, para ello usamos nuestro viejo formulaparser\n\t\t// empleando tambin como operadores los lgicos.\n\t\tfor (i = 0, nCount = Filter.length, bIsField = bFieldComplete = bIsTextToken = false; i < nCount; i++) {\n\t\t\t// Recorrer el filtro\n\t\t\tswitch ((c = Filter.charAt(i))) {\n\t\t\t\tcase \" \": // Espacios\n\t\t\t\tcase \"=\": // Operadores\n\t\t\t\tcase \">\":\n\t\t\t\tcase \"<\":\n\t\t\t\tcase \"(\":\n\t\t\t\tcase \")\":\n\t\t\t\tcase \",\" /* F10052503:\tIncluir la coma como separador en PrepareFilter. */:\n\t\t\t\t\tif (bIsField && !bIsTextToken) {\n\t\t\t\t\t\t// Se acab el campo\n\t\t\t\t\t\tstrTmp = new StringBuilder();\n\t\t\t\t\t\tfor (; i < nCount; strTmp.append(Filter.charAt(i)), i++) if (Filter.charAt(i) == \" \" || !this.IsClosingToken(Filter.charAt(i))) break;\n\t\t\t\t\t\tfor (; i < nCount; strTmp.append(Filter.charAt(i)), i++) if (Filter.charAt(i) != \" \") break;\n\t\t\t\t\t\tbFieldComplete = true;\n\t\t\t\t\t\tbIsField = false;\n\t\t\t\t\t\ti--;\n\t\t\t\t\t} // Se acab el campo\n\t\t\t\t\telse strOut.append(c);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"'\":\n\t\t\t\t\t/*\n                                Comprobar si est dentro de un literal de cadena, en cuyo caso no habr que\n                                realizar cualificaciones de ningn tipo\n                            */\n\t\t\t\t\t// F11112806: Problema con los filtros con operadores raros en sqlite.\n\t\t\t\t\t// Si estamos trabajando con un campo (szField tiene valor) entonces posiblemente fuera un operador, as\n\t\t\t\t\t// que lo que tenemos que hacer es ponerlo a la salida y abrir el literal de texto\n\t\t\t\t\tif (!StringUtils.IsEmptyString(strField)) {\n\t\t\t\t\t\t// Tiene valor\n\t\t\t\t\t\tstrOut.append(strField);\n\t\t\t\t\t\tstrField = Utils.EMPTY_STRING;\n\t\t\t\t\t\tbIsField = bFieldComplete = false;\n\t\t\t\t\t} // Tiene valor\n\t\t\t\t\tbIsTextToken = !bIsTextToken;\n\t\t\t\t\tstrOut.append(c);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tif (bIsField) strField += c;\n\t\t\t\t\telse {\n\t\t\t\t\t\t// No contar este\n\t\t\t\t\t\tif (bIsTextToken) strOut.append(c);\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// No es un token de texto\n\t\t\t\t\t\t\tbIsField = true;\n\t\t\t\t\t\t\ti--;\n\t\t\t\t\t\t} // No es un token de texto\n\t\t\t\t\t} // No contar este\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t//\n\t\t\t// Si ha terminado un campo procesarlo\n\t\t\tif (bFieldComplete) {\n\t\t\t\t// Comprobar si es un operador\n\t\t\t\tstr = strField.toLowerCase();\n\t\t\t\tif (!(str.equals(\"is\") || str.equals(\"and\") || str.equals(\"or\") || str.equals(\"in\") || str.equals(\"between\") || str.equals(\"not\"))) {\n\t\t\t\t\t// Comprobar\n\t\t\t\t\t// Puede que sea un campo\n\t\t\t\t\tstrField = this.QualifyField(strField, Subquery);\n\t\t\t\t} // Comprobar\n\t\t\t\t// Adicionar a la cadena de salida\n\t\t\t\tstrOut.append(strField);\n\t\t\t\tstrOut.append(strTmp.toString());\n\t\t\t\tstrField = \"\";\n\t\t\t\tbFieldComplete = false;\n\t\t\t} // Comprobar si es un operador\n\t\t} // Recorrer el filtro\n\t\t//\n\t\tstrOut.append(strField);\n\t\treturn strOut.toString();\n\t}\n\n\t/**\n\t * TRUE si el parmetro es un token que cierra una expresin\n\t * @param Token\t\t\tElemento que se quiere comprobar.\n\t * @return\t\t\t\tDevuelve TRUE si el parmetro vale para cerrar una expresin.\n\t */\n\tprivate IsClosingToken(Token: string): boolean {\n\t\treturn Token == \"=\" || Token == \")\" || Token == \"=\" || Token == \">\" || Token == \"<\" || Token == \" \";\n\t}\n\t//#endregion\n\n\t/**\n\t * M09072903:\tProgramar un mecanismo de restauracin de campos para SQLs sin unin.\n\t * Esta funcin tiene un objetivo bastante similar al de GetObject pero con algunas diferencias, a saber:\n\t * 1- Siempre busca en base de datos, por lo que no es necesario indicar un parmetro para eso.\n\t * 2- Siempre usa los filtros que tenga la coleccin, por lo que tampoco hace falta parmetro para eso.\n\t *\n\t * @param FieldName\t\t\tNombre del campo por el que se va a hacer la bsqueda.\n\t * @param FieldValue\t\tValor que se quiere usar como comparacin.\n\t * @return\t\t\t\t\tDevuelve un resultset con la lnea correspondiente al elemento a buscar.\n\t * @throws Exception\n\t */\n\tpublic async GetResultSet(FieldName: string, FieldValue: any): Promise<IResultSet> {\n\t\tlet strKeySearch = await this.GenerateKeySearch(FieldName, FieldValue);\n\t\tlet strCmd = await this.GenerateSearchSql(strKeySearch);\n\t\t// Preparar esta cosa, porque traer macros y dems\n\t\t// F12042601: PrepareSqlString no delega en la aplicacin cuando se llama a la coleccin.\n\t\tif (strCmd.contains(\"##\")) strCmd = this.PrepareSqlString(strCmd, false, await this.IsSqlPrefiltered());\n\t\t// Buscar en base de datos\n\t\tlet rs = await this.getConnection().CreateRecordsetAsync(strCmd, {\n\t\t\tcount: false,\n\t\t\tcoll: this.DataColl.getName(),\n\t\t\tmacros: this.DataColl.getMacros(),\n\t\t\tloadall: false,\n\t\t\tpage: {},\n\t\t});\n\t\t// Moverse para el primero, a fin de cuentas es lo que nos hace falta...\n\t\tawait rs.next();\n\t\treturn rs;\n\t}\n\n\t/**\n\t * @param FieldName\t\tValor que se quiere comparar. Si es un nombre de campo la funcin devuelve FALSE.\n\t * @return\t\t\t\tDevuelve TRUE si la cadena que se pasa como parmetro NO es un nombre de campo.\n\t */\n\tprivate IsNotFieldName(FieldName: string): boolean {\n\t\tlet strInvalid = \" /{}\\\\,;\\r\\n\\t:#\";\n\n\t\tfor (let i = 0; i < strInvalid.length; i++) {\n\t\t\t// Analiza cada caracter\n\t\t\tlet c = strInvalid.charAt(i);\n\t\t\tif (FieldName.indexOf(c) != -1) return true;\n\t\t} // Analiza cada caracter\n\t\t// De lo contrario posiblemente sea un campo\n\t\treturn false;\n\t}\n\n\tQualifyField(FieldName: any, Sentence?: SqlParser): string {\n\t\tlet str: string;\n\n\t\t// Primero ver si no hay que hacer nada\n\t\tif (!this.Options.bUseRaw || StringUtils.IsEmptyString(FieldName)) return FieldName;\n\t\t// Si no es un nombre de campo, tampoco devolvemos nada...\n\t\tif (this.IsNotFieldName(FieldName)) return FieldName;\n\t\t// Ante todo ver si ya est cualificado e insertado en una cache\n\t\tlet cache: Hashtable<string, string> = null;\n\t\tif (null != (cache = this.DataColl.getOwnerApp().GetQualifyCache(this.DataColl.getName()))) {\n\t\t\t// Si tenemos cache, buscar\n\t\t\t// K13061901: Modificaciones para mejorar el soporte de concurrencia en la maquinaria.\n\t\t\t// Esto puede dar problemas si hay concurrencia...\n\t\t\t//synchronized (cache)\n\t\t\t{\n\t\t\t\tif (cache.containsKey(FieldName)) return cache.get(FieldName);\n\t\t\t}\n\t\t} // Si tenemos cache, buscar\n\t\t// F11070101: No cualificar campos especiales en las colecciones.\n\t\t// Los campos especiales no se cualifican\n\t\t// O12050702: Optimizacin al gestionas los campos que son de frmula o bit.\n\t\t// Si es un campo frmula o bit estar en la lista de tales.\n\t\t//////str =FieldPropertyValue (FieldName, \"bit\");\n\t\t//////if (!StringUtils.IsEmptyString(str))\n\t\tif (this.DataColl.BitProps?.contains(FieldName)) return FieldName;\n\t\t//////str =FieldPropertyValue (FieldName, \"formula\");\n\t\t//////if (!StringUtils.IsEmptyString(str))\n\t\tif (this.DataColl.FormulaProps?.contains(FieldName)) return FieldName;\n\t\t// En principio seguimos como antes...\n\t\tlet strQualifier = this.DataColl.FieldPropertyValue(FieldName, \"qualifier\");\n\t\tif (!StringUtils.IsEmptyString(strQualifier)) {\n\t\t\t// Cachearlo y devolverlo\n\t\t\t// K13061901: Modificaciones para mejorar el soporte de concurrencia en la maquinaria.\n\t\t\t// Por si las concurrencias...\n\t\t\tif (cache != null) {\n\t\t\t\t// Tiene cache\n\t\t\t\t//synchronized (cache)\n\t\t\t\t{\n\t\t\t\t\tcache.put(FieldName, strQualifier);\n\t\t\t\t}\n\t\t\t} // Tiene cache\n\t\t\treturn strQualifier;\n\t\t} // Cachearlo y devolverlo\n\t\t// Para cualificar un campo tenemos que tener el AccessString parseado\n\t\t// ya que es ms eficiente buscar en la lista de campos que ponerse a parsear\n\t\t// cada vez que se vaya a cualificar un campo, algo que se hace bastante a menudo\n\t\tif (Sentence == null) {\n\t\t\t// Usar la cadena de conexin normal\n\t\t\tif (this.m_parsedAccessString == null) return FieldName;\n\t\t\t// if (!this.ParseAccessString())\n\t\t\t//     // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t//     ////throw new Exception(\"No se puede interpretar la sentencia de seleccin de datos de la coleccin.\");\n\t\t\t//     throw new XoneGenericException(\n\t\t\t//         -123343,\n\t\t\t//         this.DataColl.GetMessage(\n\t\t\t//             XoneMessageKeys.SYS_MSG_COLL_SQLPARSEERROR,\n\t\t\t//             \"Cannot parse SQL sentence for the collection.\"\n\t\t\t//         )\n\t\t\t//     );\n\t\t\t// Usar esta\n\t\t\tSentence = this.m_parsedAccessString;\n\t\t} // Usar la cadena de conexin normal\n\t\tif (ObjUtils.IsNothing(Sentence)) return FieldName;\n\t\t// Si el campo no est definido en la coleccin tenemos que ver si es especial.. de lo contrario\n\t\t// ser un error porque no se puede cualificar un campo desonocido.\n\t\tif (!FieldName.equals(this.DataColl.strPk) && !this.DataColl.FieldExists(FieldName)) {\n\t\t\t// No existe y no es la clave\n\t\t\tif (FieldName.startsWith(\"MAP_\")) {\n\t\t\t\t// No est definido en la coleccin\n\t\t\t\tstr = \"No se puede cualificar el campo '\" + FieldName + \"' porque no est definido en la coleccin '\" + this.DataColl.getName() + \"'\";\n\t\t\t\tthrow new Exception(str);\n\t\t\t} // No est definido en la coleccin\n\t\t\t// Si no es algn campo especial, devolverlo tal cual\n\t\t\tif (!FieldName.equals(this.m_connection.getRowIdFieldName()) && !FieldName.equals(\"OBJTIMESTAMP\")) return FieldName;\n\t\t} // No existe y no es la clave\n\t\tlet queryFields = Sentence.getQueryFields();\n\t\t// Ahora proceder con los campos en funcin de su nombre\n\t\tif (FieldName.startsWith(\"MAP_\")) {\n\t\t\t// Campos MAP\n\t\t\tfor (let i = 0; i < queryFields.length; i++) {\n\t\t\t\t// Comprobar los alias que son los que tienen lo que buscamos\n\t\t\t\tlet f = queryFields[i];\n\t\t\t\tif (f.getAlias().equals(FieldName)) {\n\t\t\t\t\t// Cachear si aplica y devolver\n\t\t\t\t\t// K13061901: Modificaciones para mejorar el soporte de concurrencia en la maquinaria.\n\t\t\t\t\t// Por si las concurrencias...\n\t\t\t\t\tif (cache != null) {\n\t\t\t\t\t\t// Cache\n\t\t\t\t\t\t//synchronized (cache)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcache.put(FieldName, f.getName());\n\t\t\t\t\t\t}\n\t\t\t\t\t} // Cache\n\t\t\t\t\treturn f.getName();\n\t\t\t\t} // Cachear si aplica y devolver\n\t\t\t} // Comprobar los alias que son los que tienen lo que buscamos\n\t\t} // Campos MAP\n\t\telse {\n\t\t\t// Campo directo\n\t\t\tstr = \".\" + FieldName;\n\n\t\t\tfor (let i = 0; i < queryFields.length; i++) {\n\t\t\t\t// Comprobar cmo termina cada nombre de campo\n\t\t\t\tlet f = queryFields[i];\n\t\t\t\tif (f.getName().endsWith(str)) {\n\t\t\t\t\t// Cachear si aplica y devolver\n\t\t\t\t\t// F11041503: Problemas para cualificar campos cuando no tienen aliases.\n\t\t\t\t\tlet result = null;\n\t\t\t\t\tif (StringUtils.IsEmptyString(f.getAlias())) result = f.getName();\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (f.getAlias().compareToIgnoreCase(FieldName) == 0) result = f.getName();\n\t\t\t\t\t}\n\t\t\t\t\tif (!StringUtils.IsEmptyString(result)) {\n\t\t\t\t\t\t// K13061901: Modificaciones para mejorar el soporte de concurrencia en la maquinaria.\n\t\t\t\t\t\t// Por si hay concurrencia\n\t\t\t\t\t\tif (cache != null) {\n\t\t\t\t\t\t\t// Cache\n\t\t\t\t\t\t\t//synchronized (cache)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcache.put(FieldName, result);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} // Cache\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t}\n\t\t\t\t} // Cachear si aplica y devolver\n\t\t\t} // Comprobar cmo termina cada nombre de campo\n\t\t} // Campo directo\n\t\t// Ahora tenemos que ver si el SQL tiene x.*\n\t\tfor (let i = 0; i < queryFields.length; i++) {\n\t\t\t// Ver si algn campo termina con .*\n\t\t\tlet f = queryFields[i];\n\t\t\tif (f.getName().endsWith(\".*\")) {\n\t\t\t\t// Este vale\n\t\t\t\tstr = f.getName().substring(0, f.getName().indexOf(\".*\")) + \".\" + FieldName;\n\t\t\t\t// K13061901: Modificaciones para mejorar el soporte de concurrencia en la maquinaria.\n\t\t\t\t// Por si hay concurrencia\n\t\t\t\tif (cache != null) {\n\t\t\t\t\t// Cache\n\t\t\t\t\t//synchronized (cache)\n\t\t\t\t\t{\n\t\t\t\t\t\tcache.put(FieldName, str);\n\t\t\t\t\t}\n\t\t\t\t} // Cache\n\t\t\t\treturn str;\n\t\t\t} // Este vale\n\t\t} // Ver si algn campo termina con .*\n\t\t// Finalmente cualificar con la primera tabla... algo es algo\n\t\tlet tbl: QueryTable;\n\t\tif (null != (tbl = Sentence.getTableFrom())) {\n\t\t\t// Obtener de la tabla solamente su alias\n\t\t\tif (!StringUtils.IsEmptyString((str = tbl.getAlias()))) {\n\t\t\t\t// Armar el cualificador\n\t\t\t\tstr = str + \".\" + FieldName;\n\t\t\t\t// K13061901: Modificaciones para mejorar el soporte de concurrencia en la maquinaria.\n\t\t\t\t// Por si hay concurrencia...\n\t\t\t\tif (cache != null) {\n\t\t\t\t\t// Cache\n\t\t\t\t\t//synchronized (cache)\n\t\t\t\t\t{\n\t\t\t\t\t\tcache.put(FieldName, str);\n\t\t\t\t\t}\n\t\t\t\t} // Cache\n\t\t\t\treturn str;\n\t\t\t} // Armar el cualificador\n\t\t\t// Armarlo con el nombre de la tabla\n\t\t\t// F11110811: QualifyField no debe usar el nombre completo de tabla en ningn caso.\n\t\t\t// Esto no por favor (el nombre de tabla no se usa como cualificador nunca)\n\t\t\t//////str = tbl.getActualName() + \".\" + FieldName;\n\t\t\t// F12060701: QualifyField no hace verificaciones antes de utilizar el valor por defecto.\n\t\t\tif (StringUtils.IsEmptyString(str)) str = FieldName;\n\t\t\t// K13061901: Modificaciones para mejorar el soporte de concurrencia en la maquinaria.\n\t\t\t// Por si hay concurrencia\n\t\t\tif (cache != null) {\n\t\t\t\t// Cache\n\t\t\t\t//synchronized (cache)\n\t\t\t\t{\n\t\t\t\t\tcache.put(FieldName, str);\n\t\t\t\t}\n\t\t\t} // Cache\n\t\t\treturn str;\n\t\t} // Obtener de la tabla solamente su alias\n\t\t// Finalmente, si no hay nada, devolver el campo tal cual\n\t\treturn FieldName;\n\t}\n\n\tpublic getCount(): number {\n\t\treturn this.m_lstOrderedList.length;\n\t}\n\n\t/**\n\t * Efecta la limpieza real de la coleccin aunque esta est bloqueada\n\t * @return\t\tDevuelve TRUE si la coleccin se limpia correctamente.\n\t */\n\tpublic Clear(): boolean {\n\t\ttry {\n\t\t\t// Ahora limpiar las colecciones porsi...\n\t\t\tthis.m_lstObjectList.clear();\n\t\t\tthis.m_lstOrderedList = new Array<XoneDataObject>();\n\t\t\tif (this.m_lstCopyList != null) {\n\t\t\t\tthis.m_lstCopyList = new Vector<XoneDataObject>();\n\t\t\t\t//this.m_lstCopyList = null;\n\t\t\t}\n\t\t\tthis.m_lstObjectLru = new Vector<XoneDataObject>();\n\t\t\t//   this.m_bFull = this.m_bIsClearing = false;\n\t\t\t// Si es especial esto es como un EB\n\t\t\tif (this.m_bIsSpecial) this.m_nBrowseLength = -1;\n\t\t} catch (e) {\n\t\t\t// Ignorar las excepciones a menos que sea debug\n\t\t\tif (this.Options.bDebug) {\n\t\t\t\t// Imprimir\n\t\t\t\t//this.m_ownerApp.WriteConsoleString(e.getMessage ());\n\t\t\t\tconsole.log(e.message);\n\t\t\t} // Imprimir\n\t\t}\n\t\treturn true;\n\t}\n\n\t//#region Load CurrentItem en StartBrowse\n\t/**\n\t * Carga el objeto actual en un recorrido SB/EB\n\t * @return\t\tDevuelve TRUE si la carga del elemento actual del recorrido es exitosa\n\t */\n\tprivate async LoadCurrentItem(): Promise<boolean> {\n\t\tlet FunctionName = \"CXoneDataCollection::LoadCurrentItem\";\n\t\tlet obj: XoneDataObject;\n\t\tlet bClear = true,\n\t\t\tbReturn = false;\n\n\t\ttry {\n\t\t\t//  Si es una coleccin especial, el recorrido\n\t\t\t//  StartBrowse-EndBrowse busca elementos en la\n\t\t\t//  lista normal no en la base de datos...\n\t\t\tif (this.m_bIsSpecial) {\n\t\t\t\t// Especial\n\t\t\t\tthis.m_pCurrentItem = null;\n\t\t\t\tif (this.m_nBrowseLength < 0) this.m_nBrowseLength = this.m_lstOrderedList.length;\n\t\t\t\tif (this.m_nBrowseLength == 0 || this.m_nCurrentIndex < 0) return true;\n\t\t\t\tthis.m_pCurrentItem = await this.GetObject(this.m_nCurrentIndex);\n\t\t\t\treturn true;\n\t\t\t} // Especial\n\t\t\t// Si ya hay uno y tenemos que usarlo para todo el recorrido indicar que no hay que marcar\n\t\t\tif (this.m_pCurrentItem != null) if (this.m_bDeferredLoad) bClear = false;\n\t\t\tif (this.m_rs == null) bClear = bReturn = true;\n\t\t\t// No hay recorrido activo\n\t\t\telse {\n\t\t\t\t// Hay recorrido\n\t\t\t\t// M10052401:\tModificaciones en la forma de acceso a bases de datos SQLite.\n\t\t\t\tif (await this.m_rs.EOF()) bClear = bReturn = true; // No se puede crear el objeto;\t// No hay record actual\n\t\t\t} // Hay recorrido\n\t\t\t//\n\t\t\t// Solo limpia si hay que hacerlo\n\t\t\tif (bClear) this.ClearCurrentItem(true, true); // El que haya se jodio\n\n\t\t\tif (bReturn) return true;\n\t\t\t//\n\t\t\t// Si hay record actual, cargarlo\n\t\t\tobj = bClear ? null : this.m_pCurrentItem;\n\t\t\tif (obj == null) {\n\t\t\t\t// Crearlo\n\t\t\t\t// Si no ha encontrado un GUID vlido pasar el ProgID\n\t\t\t\t// y que se explote pal carajo. Crear el objeto solo para cargarlo de BD\n\t\t\t\tobj = await this.DataColl.CreateObject(false);\n\t\t\t\tif (null == obj) {\n\t\t\t\t\t// Error\n\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t////throw new XoneGenericException(-1818, \"CXoneDataCollection::LoadCurrentItem ha fallado. No se puede crear un nuevo objeto para la coleccin '\" + m_strName + \"'\");\n\t\t\t\t\tlet sb = this.DataColl.GetMessage(\n\t\t\t\t\t\tXoneMessageKeys.SYS_MSG_COLL_LOADCURRITEMFAIL_01,\n\t\t\t\t\t\t\"{0} failed. Cannot create new object from collection '{1}'\"\n\t\t\t\t\t);\n\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\tsb = sb.replace(\"{1}\", this.DataColl.getName());\n\t\t\t\t\tthrow new XoneGenericException(-1818, sb);\n\t\t\t\t} // Error\n\t\t\t} // Crearlo\n\t\t\t// ADD TAG Para poder tener la posicion del objeto antes del load\n\t\t\t// Asignar el contador a este objeto.\n\t\t\tobj.SetPropertyValue(\"MAP_SYS_ORDER\", this.m_nBrowseOrder - 1);\n\t\t\t// Esto hay que hacerlo siempre...\n\t\t\tif (!this.m_bDeferredLoad) {\n\t\t\t\t// Normal\n\t\t\t\t// Si es una coleccin normal, cargar del recordset... si no, cargar remoto\n\t\t\t\tif (!(await obj.Load(this.m_rs))) return false;\n\t\t\t} // Normal // Diferido\n\t\t\telse obj.setIsCurrentItem(true);\n\t\t\tthis.m_pCurrentItem = obj;\n\n\t\t\t// Sergio\n\t\t\treturn true;\n\t\t} catch (ex) {\n\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t////throw new XoneGenericException(-10089, \"XoneDataCollection::LoadCurrentItem ha fallado. \" + e.getMessage());\n\t\t\tlet sMessage = ex.message;\n\t\t\tlet sb = this.DataColl.GetMessage(XoneMessageKeys.SYS_MSG_GENERALFAIL, \"{0} failed. \");\n\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\tif (!TextUtils.isEmpty(sMessage)) {\n\t\t\t\tsb = sb.concat(sMessage);\n\t\t\t}\n\t\t\tthrow new XoneGenericException(-10089, ex, sb);\n\t\t}\n\t}\n\n\t/**\n\t * Limpia el elemento actual del recorrido. Se mantiene por una cuestin de compatibilidad, porque aqu no se llevan los totales corridos.\n\t * @param ClearPrevious\t\tTRUE si hay que limpiar la referencia al objeto anterior del recorrido.\n\t * @param CopyPrevious\t\tTRUE si hay que copiar el objeto actual del recorrido al elemento anterior.\n\t */\n\tprivate ClearCurrentItem(ClearPrevious: boolean = false, CopyPrevious: boolean = false): void {\n\t\tthis.m_pCurrentItem = null;\n\t}\n\n\t/**\n\t * @return\t\t\tDevuelve el Objeto del recorrido actual SB/EB o NULL si no hay recorrido activo o se ha llegado al final.\n\t */\n\tpublic getCurrentItem(): XoneDataObject {\n\t\treturn this.m_pCurrentItem;\n\t}\n\t//#endregion\n\n\t//#region\n\t/**\n\t * Elimina un objeto de la coleccin dado su ndice numrico\n\t * @param Index\t\t\t\tIndice del objeto en la coleccin (comenzando por cero)\n\t * @return\t\t\t\t\tDevuelve TRUE si la operacin es correcta.\n\t * @throws Exception\n\t */\n\tpublic removeItem(key: number | string | XoneDataObject): boolean {\n\t\tlet obj: XoneDataObject = null;\n\t\tif (this.m_lstCopyList != null) {\n\t\t\tthis.m_lstCopyList = new Vector<XoneDataObject>();\n\t\t\tthis.m_lstCopyList = null;\n\t\t}\n\n\t\tif (typeof key == \"number\" && key < this.m_lstOrderedList.length) {\n\t\t\tobj = this.m_lstOrderedList[key as number];\n\t\t} else if (typeof key == \"string\") {\n\t\t\tobj = this.m_lstObjectList.get(key as string);\n\t\t} else {\n\t\t\tobj = key as XoneDataObject;\n\t\t}\n\t\tif (!obj) return false;\n\n\t\tthis.m_lstOrderedList.remove(obj);\n\t\t// Eliminar el objeto del mapa si es que existe\n\t\tlet str = obj.GetObjectIdString();\n\t\t// F11081103: Protecciones al eliminar objetos de una coleccin por si no tienen ID.\n\t\tif (!TextUtils.isEmpty(str)) if (this.m_lstObjectList.containsKey(str)) this.m_lstObjectList.delete(str);\n\t\t// Actualizar el BL si se trata de una coleccin especial\n\t\tif (this.m_bIsSpecial) this.m_nBrowseLength = this.m_lstOrderedList.length;\n\t\tthis.DataColl.setFull(false);\n\t\treturn true;\n\t}\n\t//#endregion\n}\n","import IResultSet from \"../Interfaces/IResultSet\";\nimport StringUtils from \"./StringUtils\";\nimport { Utils } from \"./Utils\";\n\nexport default class DataUtils {\n\n    /**\n     * Lee un  valor de un recordset y devuelve la conversin a entero\n     *\n     * @param DataSource Origen de datos del que se va a leer.\n     * @param FieldName  Nombre del campo a leer.\n     * @return Devuelve el valor del campo. Si no es numrico posiblemente devuelva cero.\n     */\n    public static RsReadLong( DataSource:IResultSet, FieldName:string):number {\n        let l = 0;\n        try {\n            l = DataSource.getInt(FieldName);\n        } catch (e) {\n            // Ignorar esta excepcin... puede ser que el campo no exista o algo as...\n        }\n        return l;\n    }\n\n\n    /**\n     * Lee un  valor de un recordset y devuelve la conversin a entero\n     *\n     * @param DataSource Origen de datos del que se va a leer.\n     * @param FieldName  Nombre del campo a leer.\n     * @return Devuelve el valor del campo. Si no es numrico posiblemente devuelva cero.\n     */\n    public static RsReadInt(DataSource:IResultSet, FieldName:string):number {\n        return this.RsReadLong(DataSource,FieldName);\n    }\n\n    /**\n     * A10031101:\tProgramacin del registro de operaciones en la cola para javoso.\n     * Esta funcin se usa para desdoblar la ejecucin de SQLs, as que haba que programarla.\n     * Leer una cadena de un resultset. Emplea mecanismos de seguridad para evitar que se\n     * devuelva un nulo.\n     *\n     * @param DataSource\n     * @param FieldName\n     * @return\n     */\n    public static RsReadString(DataSource:IResultSet, FieldName:string):string {\n        let str = Utils.EMPTY_STRING;\n\n        try {\n            str = DataSource.getString(FieldName);\n            str = StringUtils.SafeToString(str);\n        } catch (e) {\n            e.printStackTrace();\n        }\n        return str;\n    }\n}","import Hashtable from \"../../Collections/HashMap/Hashtable\";\nimport XoneGenericException from \"../../Exceptions/XoneGenericException\";\nimport { XoneMessageKeys } from \"../../Exceptions/XoneMessageKeys\";\nimport IConnection from \"../../Interfaces/IConnection\";\nimport IResultSet from \"../../Interfaces/IResultSet\";\nimport IXoneObject from \"../../Interfaces/IXoneObject\";\nimport DataUtils from \"../../Utils/DataUtils\";\nimport StringUtils from \"../../Utils/StringUtils\";\nimport { Utils } from \"../../Utils/Utils\";\nimport XmlUtils from \"../../Utils/XmlUtils\";\nimport XmlNode from \"../../Xml/JSONImpl/XmlNode\";\nimport XmlNodeList from \"../../Xml/JSONImpl/XmlNodeList\";\nimport { XoneApplication } from \"../XoneApplication\";\nimport { XoneDataCollection } from \"../XoneDataCollection\";\nimport { XoneDataObject } from \"../XoneDataObject\";\n\nexport default class MacrosEvaluator {\n\n    private m_lstMacros: Hashtable<string, string>;\n    private m_ownerApp: XoneApplication;\n    private m_ownerColl: XoneDataCollection;\n    private m_parsedMacros: Array<string>;\n    private m_evaluatedMacros: Hashtable<string, string>;\n\n    constructor(ownerApp: XoneApplication, ownerColl: XoneDataCollection) {\n        this.m_lstMacros = new Hashtable<string, string>();\n        this.m_parsedMacros = new Array<string>();\n        this.m_ownerApp = ownerApp;\n        this.m_ownerColl = ownerColl;\n    }\n\n    /**\n     * @return\t\t\t\tDevuelve el valor de la macro cuyo nombre se pasa como parmetro.\n     * @param MacroName\t\tNombre de la macro cuyo valor se quiere conocer\n     */\n    public getMacro(MacroName: string): string {\n        if (!this.m_lstMacros.containsKey(MacroName)) return null;\n        return this.m_lstMacros.get(MacroName);\n    }\n\n    /**\n     * @return\t\t\t\tDevuelve el valor de la macro cuyo nombre se pasa como parmetro.\n     * @param MacroName\t\tNombre de la macro cuyo valor se quiere conocer\n     */\n    public getMacros(): object {\n        if (this.m_evaluatedMacros)\n            return this.m_evaluatedMacros.toObject();\n        return {};\n    }\n\n    /**\n     * \n     * @param accessString \n     */\n    public ParseMacros(accessString: string): void {\n        if (!accessString)\n            return;\n        var s = accessString.slice();\n        var n = -1;\n        while ((n = s.indexOf(\"##\")) >= 0) {\n            var n2 = s.indexOf(\"##\", n + 1);\n            if (n2 > n) {\n                const macroName = s.substr(n, n2 - n + 2).trim();\n                if (this.m_parsedMacros.indexOf(macroName) < 0 && !macroName.equals(\"##PREF##\"))\n                    this.m_parsedMacros.push(macroName);\n                s = s.replace(macroName, \"\");\n            }\n        }\n    }\n\n    /**\n     * Asigna valor a la macro cuyo nombre se pasa como parmetro.\n     * @param MacroName\t\tNombre de la macro que se quiere asignar.\n     * @param MacroValue\tValor que se quiere asignar a la macro. Si se pasa NULL se sustituir por cadena vaca.\n     */\n    public setMacro(MacroName: string, MacroValue: string) {\n        let value = MacroValue;\n        if (value == null) value = \"\";\n        this.m_lstMacros.put(MacroName, value);\n        if (this.m_parsedMacros && this.m_parsedMacros.indexOf(MacroName) < 0)\n            this.m_parsedMacros.push(MacroName);\n        // F10051901:   Cuando se modifican macros hay que descartar el SQL parseado.\n        // Invalidar el sql parseado\n        var parsedAccessString = this.m_ownerColl.BrowseData.getParsedAccessString();\n        if (parsedAccessString != null)\n            if (parsedAccessString.GetSentence().contains(MacroName))\n                this.m_ownerColl.BrowseData.clearParsedAccessString();\n    }\n\n    /**\n     * Copia todas las macros de esta coleccin hacia la que se pase como parmetro.\n     * @param DestColl\t\t\tColeccin hacia la que se quieren copiar las macros de esta.\n     */\n    public CopyMacros(DestColl: XoneDataCollection): void {\n        this.m_lstMacros\n            .entrySet()\n            .forEach((item) => DestColl.setMacro(item[0], item[1]));\n        // Enumeration<String> e =this.m_lstMacros.keys();\n        // while (e.hasMoreElements())\n        // {// Recorrer la lista de variables y pasarla a la otra coleccin\n        // \tString k =e.nextElement();\n        // \tString v =(String) this.m_lstMacros.get(k);\n        //     DestColl.setMacro(k, v);\n        // }// Recorrer la lista de variables y pasarla a la otra coleccin\n    }\n\n    /**\n     * Evala todas las macros incluidas dentro de la sentencia que se pasa como parmetro\n     *\n     * M11011001:\tIncluir macros globales y evaluacin de dichas macros para IMEI y dems.\n     * Hace falta que esta funcin sea pblica para usarla desde fuera\n     *\n     * @param Sentence\t\t\t\tSentencia SQL o cadena en la que se quieren evaluar las macros.\n     * @param EvalLookupMacro\t\tTRUE si se va a evaluar la macro de acceso a datos (macro de bsqueda)\n     * @return\t\t\t\t\t\tDevuelve la cadena con todas las macros evaluadas.\n     * @throws Exception\n     */\n    public async EvaluateAllMacrosOld(Sentence: string, EvalLookupMacro: boolean = false): Promise<string> {\n        if (Sentence == null) {\n            return null;\n        }\n        let strLookupMacroName = this.m_ownerColl.getLookupMacroName();\n        let str = Sentence;\n        let k1: number, k2: number;\n\n        for (k1 = 0; k1 < str.length;) {// Tericamente debera sustituir todo...\n            k1 = str.indexOf(\"##\", k1);\n\n            //TODO ADD TAG Juan Carlos Cambio return por breaks para que evale OK macros.\n            if (k1 == -1)\n                break;\n            k2 = str.indexOf(\"##\", k1 + 2);\n            if (k2 == -1)\n                break;\n\n            //\n            // Buscar la cadenilla entre los dos kases...\n            // F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n            let strMacro = str.substring(k1, k2 + 2);\n            // Buscar en el XML si est definida esta macro\n            let bEval = true;\n            if (!EvalLookupMacro) {// Hay que saltarla\n                if (!StringUtils.IsEmptyString(strLookupMacroName)) {// Tiene macro de bsqueda\n                    if (strLookupMacroName.equals(strMacro))\n                        bEval = false;\n                }// Tiene macro de bsqueda\n            }// Hay que saltarla\n            // Si hay que evaluar se evala, de lo contrario se deja tal cual\n            let strValue: string;\n            if (bEval)\n                strValue = await this.EvaluateMacro(strMacro);\n            else\n                strValue = strMacro;\n            //\n            // Comprobar si el valor de la macro es el mismo que tena antes...\n            if (!strMacro.equals(strValue))\n                //\n                // Ahora sustituir esta cosa\n                str = StringUtils.Replace(str, strMacro, strValue);\n            else\n                k1 = k2 + 2;\n            //\n            // Seguimos buscando aqu, por si las macros son recursivas\n            // as que k1 se queda donde vena...\n        }// Tericamente debera sustituir todo...\n        // M11011001:\tIncluir macros globales y evaluacin de dichas macros para IMEI y dems.\n        if (str.contains(\"##\"))\n            str = this.m_ownerApp.PrepareSqlString(str);\n        // Completo\n        return str;\n    }\n\n    public async EvaluateAllMacros(Sentence: string = \"\", EvalLookupMacro: boolean = false): Promise<string> {\n        if (Sentence == null) {\n            return null;\n        }\n\n        // this.m_parsedMacros.forEach(element => {\n\n        // });\n        let strLookupMacroName = this.m_ownerColl.getLookupMacroName();\n        let str = Sentence;\n        let k1: number, k2: number;\n        this.m_evaluatedMacros = new Hashtable<string, string>();\n        await this.m_parsedMacros.forEach(async strMacro => {// Tericamente debera sustituir todo...\n            // k1 = str.indexOf(\"##\", k1);\n\n            // //TODO ADD TAG Juan Carlos Cambio return por breaks para que evale OK macros.\n            // if (k1 == -1)\n            //     break;\n            // k2 = str.indexOf(\"##\", k1 + 2);\n            // if (k2 == -1)\n            //     break;\n\n            // //\n            // // Buscar la cadenilla entre los dos kases...\n            // // F09042201:\tSubstring no funciona igual en java que en .NET Arreglar Blackberry\n            // let strMacro = str.substring(k1, k2 + 2);\n            // Buscar en el XML si est definida esta macro\n            let bEval = true;\n            if (!EvalLookupMacro) {// Hay que saltarla\n                if (!StringUtils.IsEmptyString(strLookupMacroName)) {// Tiene macro de bsqueda\n                    if (strLookupMacroName.equals(strMacro))\n                        bEval = false;\n                }// Tiene macro de bsqueda\n            }// Hay que saltarla\n            // Si hay que evaluar se evala, de lo contrario se deja tal cual\n            let strValue: string = await this.EvaluateMacro(strMacro);\n            if (bEval)\n                this.m_evaluatedMacros.put(strMacro, strValue);\n            // strValue = await this.EvaluateMacro(strMacro);\n            if (strValue.startsWith(\"##\"))\n                this.m_evaluatedMacros.put(strMacro, this.m_ownerApp.EvaluateMacro(strMacro));\n            // //\n            // // Comprobar si el valor de la macro es el mismo que tena antes...\n            // if (!strMacro.equals(strValue))\n            //     //\n            //     // Ahora sustituir esta cosa\n            //     str = StringUtils.Replace(str, strMacro, strValue);\n            // else\n            //     k1 = k2 + 2;\n            //\n            // Seguimos buscando aqu, por si las macros son recursivas\n            // as que k1 se queda donde vena...\n        });// Tericamente debera sustituir todo...\n        // M11011001:\tIncluir macros globales y evaluacin de dichas macros para IMEI y dems.\n        // if (str.contains(\"##\"))\n        //     str = this.m_ownerApp.PrepareSqlString(str);\n        // Completo\n        return str;\n    }\n\n    /// Evala la macro cuyo nombre se pasa como parmetro.\n    /// <param name=\"MacroName\">Nombre de la macro que se quiere evaluar.</param>\n    private async EvaluateMacro(MacroName: string): Promise<string> {\n        const FunctionName = \"CXoneDataCollection::EvaluateMacro\";\n        let strTmp: string;\n        let bIsFilter = false;\n        let strValue: string;\n        let node = this.m_ownerColl.getNode(\"macro\", \"name\", MacroName);\n        //\n        // Comprobar si esta macro es un filtro\n        if (node != null) {// Tiene nodo\n            strTmp = XmlUtils.getNodeAttr(node, \"filter\");\n            bIsFilter = StringUtils.ParseBoolValue(strTmp, false);\n        }// Tiene nodo\n        // Primero obtener el valor real de la macro antes de ir al mappings\n        if (this.m_lstMacros.containsKey(MacroName)) {// Procesar este valor\n            // F13022202: Las macros pueden contener valores de cualquier tipo, no solo cadenas.\n            // Las macros pueden contener cualquier cosa, no solo cadenillas\n            let value = this.m_lstMacros.get(MacroName);\n            if (bIsFilter)\n                strValue = this.m_ownerColl.DevelopObjectValue(value);\n            else\n                strValue = StringUtils.SafeToString(value);\n            if (!StringUtils.IsEmptyString(strValue) && this.m_ownerColl.getConnection()) {// Preparar el valor\n                //\n                // Si es un filtro, habr que prepararlo antes\n                strTmp = this.m_ownerColl.getConnection().PrepareSqlString(strValue);\n                if (bIsFilter)\n                    strTmp = await this.m_ownerColl.BrowseData.PrepareFilter(strTmp);\n                return strTmp;\n            }// Preparar el valor\n        }// Procesar este valor\n        //\n        // Si no existe el nodo simplemente se devuelve el nombre de lo que se ha pedido\n        if (node == null)\n            return MacroName;\t\t// Nada ms que hacer con esta...\n        //\n        // Buscar en este nodo el valor\n        strValue = XmlUtils.getNodeAttr(node, \"value\");\n        let strSQL = \"\";\n        let ent: XoneDataObject = null;\n        if (StringUtils.IsEmptyString(strValue)) {// Puede ser que el valor venga en algn nodo\n            strValue = \"\";\n            let actions = node.SelectNodes(\"Node\");\n            for (let i = 0; i < actions.count(); i++) {// Revisa las acciones\n                let action = actions.get(i);\n                if (this.EvaluateNodeRules(action)) {// Esta vale\n                    if (\"id-list\".equals(XmlUtils.getNodeAttr(action, \"name\"))) {// Lista de IDs\n                        strValue = XmlUtils.getNodeAttr(action, \"mask\");\n                        strSQL = XmlUtils.getNodeAttr(action, \"sql\");\n                        if (null != (ent = this.m_ownerApp.getCurrentCompany()))\n                            strSQL = ent.PrepareSqlString(strSQL);\n                        let rs: IResultSet = null;\n                        let conn: IConnection = null;\n                        try {\n                            if (null == (conn = this.m_ownerColl.getConnection().GetNewConnection(true))) {// Error\n                                // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n                                ////throw new Exception(\"Error evaluando la macro '\" + MacroName + \"' No se puede crear una nueva conexin de acceso a datos.\");\n                                let sb = this.m_ownerColl.GetMessage(XoneMessageKeys.SYS_MSG_COLL_EVALMACROFAIL_01, \"{0} failed. Error evaluating macro '{1}'. Cannot create new data connection.\");\n                                sb = sb.replace(\"{0}\", FunctionName);\n                                sb = sb.replace(\"{1}\", MacroName);\n                                throw new XoneGenericException(-3998, sb);\n                            }// Error\n                            // Obtener una conexin\n                            // A12042503: Mecanismo para registrar un modo debug global en la aplicacin.\n                            // if (this.getIsDebugging() || this.m_ownerApp.isDebugMode())\n                            // \tUtils.DebugLog(Utils.TAG_DATABASE_LOG,\"EvaluateMacros (id-list): \"+strSQL);\n                            if (null == (rs = await this.m_ownerColl.getConnection().CreateRecordsetAsync(conn, strSQL))) {// Error\n                                conn = null;\n                                // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n                                ////throw new Exception(\"Error evaluando la macro '\" + MacroName + \"'\");\n                                let sb = this.m_ownerColl.GetMessage(XoneMessageKeys.SYS_MSG_COLL_EVALMACROFAIL_02, \"{0} failed. Error evaluating macro '{1}'. Error executing SQL query.\");\n                                sb = sb.replace(\"{0}\", FunctionName);\n                                sb = sb.replace(\"{1}\", MacroName);\n                                throw new XoneGenericException(-3999, sb);\n                            }// Error\n                            strTmp = \"\";\n                            while (await rs.next()) {// Cada uno de los elementos\n                                let str1 = StringUtils.SafeToString(DataUtils.RsReadLong(rs, \"N\"));\n                                if (!StringUtils.IsEmptyString(strTmp))\n                                    strTmp += \",\";\n                                strTmp += str1;\n                            }// Cada uno de los elementos\n                            rs.close();\n                            rs = null;\n                            // Cerrar la conexin\n                            //////conn.close();\n                            conn = null;\n                        }\n                        catch (e) {\n                            if (rs != null) {// Cerrar\n                                try {\n                                    rs.close();\n                                }\n                                catch (se) {\n                                    // Ignorar esta excepcin\n                                }\n                                rs = null;\n                            }// Cerrar\n                            /*\n                            if (conn != null)\n                            {// Cerrar\n                                try\n                                {\n                                    conn.close();\n                                }\n                                catch (SQLException se)\n                                {\n                                    // Ignorar esta excepcin\n                                }\n                                conn = null;\n                            }// Cerrar\n                            */\n                            throw e;\n                        }\n                        //\n                        // Si ha encontrado alguna lista\n                        if (StringUtils.IsEmptyString(strTmp))\n                            strTmp = \"NULL\";\n                        // Sustituir los valores\n                        strValue = StringUtils.Replace(strValue, \"##LIST##\", strTmp);\n                        break;\n                    }// Lista de IDs\n                }// Esta vale\n            }// Revisa las acciones\n        }// Puede ser que el valor venga en algn nodo\n        //\n        // Si quedan cosas por solucionar, intentar reemplazar operadores custom\n        // No se retorna directamente, sino que se analiza si quedan cosas\n        // por sustituir\n        strSQL = this.m_ownerColl.getConnection().PrepareSqlString(strValue);\n        if (strSQL.contains(\"##\")) {// Llamar la funcin\n            strSQL = this.m_ownerColl.getConnection().ReplaceCustomOper(this.m_ownerColl, strSQL, \"##BIT##\");\n        }// Llamar la funcin\n        //\n        if (bIsFilter)\n            strSQL = this.m_ownerColl.getConnection().PrepareFilter(strSQL);\n        //\n        // Habr que mirar otros...\n        return strSQL;\n    }\n\n    /**\n     * Evala todas las reglas que contiene el nodo que se pasa como parmetro.\n     * En esta implementacin solamente se evalan las reglas para el scope current-enterprise.\n     * @param Node\t\t\tNodo XML cuyas reglas se quieren evaluar.\n     * @return\t\t\t\tDevuelve TRUE si todas las reglas son exitosas.\n     * @throws Exception\n     */\n    private EvaluateNodeRules(Node: XmlNode): boolean {\n        let rules: XmlNodeList;\n        let strScope: string;\n        let ent: IXoneObject = null;\n\n        rules = Node.SelectNodes(\"rule\");\n        for (let i = 0; i < rules.count(); i++) {// Verificar cada regla\n            let rule = rules.get(i);\n            strScope = XmlUtils.getNodeAttr(rule, \"scope\");\n            if (strScope.equals(\"current-enterprise\")) {// Empresa\n                if (ent == null)\n                    ent = this.m_ownerApp.getCompany();\n                if (ent == null)\n                    return false;\t\t// No tiene empresa\n                if (!ent.EvaluateRule(rule)) {// Limpiar el error y retornar\n                    return false;\n                }// Limpiar el error y retornar\n                continue;\n            }// Empresa\n        }// Verificar cada regla\n        return true;\n    }\n}","import { XoneDataObject } from \"./XoneDataObject\";\n\nexport default class XoneCompany extends XoneDataObject {\n    \n}","export default class Base64 {\n    public static encodeBytes(ck: string): any {\n        return Base64.encode(ck);\n    }\n\n    // private property\n    private static get _keyStr(): string { return \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\" };\n\n    // public method for encoding\n    public static encode(input) {\n        var output = \"\";\n        var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n        var i = 0;\n\n        input = Base64._utf8_encode(input);\n\n        while (i < input.length) {\n\n            chr1 = input.charCodeAt(i++);\n            chr2 = input.charCodeAt(i++);\n            chr3 = input.charCodeAt(i++);\n\n            enc1 = chr1 >> 2;\n            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n            enc4 = chr3 & 63;\n\n            if (isNaN(chr2)) {\n                enc3 = enc4 = 64;\n            } else if (isNaN(chr3)) {\n                enc4 = 64;\n            }\n\n            output = output +\n                Base64._keyStr.charAt(enc1) + Base64._keyStr.charAt(enc2) +\n                Base64._keyStr.charAt(enc3) + Base64._keyStr.charAt(enc4);\n\n        }\n\n        return output;\n    }\n\n    // public method for decoding\n    public static decode(input) {\n        var output = \"\";\n        var chr1, chr2, chr3;\n        var enc1, enc2, enc3, enc4;\n        var i = 0;\n\n        input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\n        while (i < input.length) {\n\n            enc1 = Base64._keyStr.indexOf(input.charAt(i++));\n            enc2 = Base64._keyStr.indexOf(input.charAt(i++));\n            enc3 = Base64._keyStr.indexOf(input.charAt(i++));\n            enc4 = Base64._keyStr.indexOf(input.charAt(i++));\n\n            chr1 = (enc1 << 2) | (enc2 >> 4);\n            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n            chr3 = ((enc3 & 3) << 6) | enc4;\n\n            output = output + String.fromCharCode(chr1);\n\n            if (enc3 != 64) {\n                output = output + String.fromCharCode(chr2);\n            }\n            if (enc4 != 64) {\n                output = output + String.fromCharCode(chr3);\n            }\n\n        }\n\n        output = Base64._utf8_decode(output);\n\n        return output;\n\n    }\n\n    // private method for UTF-8 encoding\n    private static _utf8_encode(string) {\n        string = string.replace(/\\r\\n/g, \"\\n\");\n        var utftext = \"\";\n\n        for (var n = 0; n < string.length; n++) {\n\n            var c = string.charCodeAt(n);\n\n            if (c < 128) {\n                utftext += String.fromCharCode(c);\n            }\n            else if ((c > 127) && (c < 2048)) {\n                utftext += String.fromCharCode((c >> 6) | 192);\n                utftext += String.fromCharCode((c & 63) | 128);\n            }\n            else {\n                utftext += String.fromCharCode((c >> 12) | 224);\n                utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n                utftext += String.fromCharCode((c & 63) | 128);\n            }\n\n        }\n\n        return utftext;\n    }\n\n    // private method for UTF-8 decoding\n    private static _utf8_decode(utftext) {\n        var string = \"\";\n        var i = 0;\n        var c = 0, c1 = 0, c2 = 0, c3 = 0;\n\n        while (i < utftext.length) {\n\n            c = utftext.charCodeAt(i);\n\n            if (c < 128) {\n                string += String.fromCharCode(c);\n                i++;\n            }\n            else if ((c > 191) && (c < 224)) {\n                c2 = utftext.charCodeAt(i + 1);\n                string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\n                i += 2;\n            }\n            else {\n                c2 = utftext.charCodeAt(i + 1);\n                c3 = utftext.charCodeAt(i + 2);\n                string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n                i += 3;\n            }\n\n        }\n        return string;\n    }\n}","import { createHash } from \"crypto\";\nimport TextUtils from \"./TextUtils\";\nimport { Utils } from \"./Utils\";\nimport Base64 from \"./Base64\";\n\nexport default class HashUtils {\n\n    public static createHash(algorithm: string, encode: string, value: string): string {\n        if (TextUtils.isEmpty(value)) {\n            return Utils.EMPTY_STRING;\n        }\n        if (TextUtils.isEmpty(algorithm)) {\n            return Base64.encodeBytes(value);\n        }\n        if (TextUtils.isEmpty(encode) || \"BASE64\".compareToIgnoreCase(encode)) {\n            return createHash(algorithm).update(value).digest(\"base64\");\n        }\n        if (\"hex\".equals(encode)) {\n            return createHash(algorithm).update(value).digest(\"hex\").toLowerCase();\n        }\n        if (\"HEX\".equals(encode)) {\n            return createHash(algorithm).update(value).digest(\"hex\").toUpperCase();\n        }\n        return createHash(algorithm).update(value).digest(\"base64\");\n    }\n\n    public static encodeHash(buff: Buffer, encode: string) {\n        if (buff == null || buff.length == 0) {\n            return Utils.EMPTY_STRING;\n        }\n        if (TextUtils.isEmpty(encode) || \"BASE64\".compareToIgnoreCase(encode)) {\n            return buff.toString('base64');\n        }\n        if (\"hex\".equals(encode)) {\n            return buff.toString('hex').toLowerCase();\n        }\n        if (\"HEX\".equals(encode)) {\n            return buff.toString('hex').toUpperCase();\n        }\n        return buff.toString('base64');\n    }\n}","import IUserCredentialValidator from \"../Interfaces/IUserCredentialValidator\";\nimport HashUtils from \"../Utils/HashUtils\";\nimport StringUtils from \"../Utils/StringUtils\";\nimport { XoneDataCollection } from \"./XoneDataCollection\";\nimport { XoneDataObject } from \"./XoneDataObject\";\n\nexport default class XoneUser extends XoneDataObject implements IUserCredentialValidator{\n\n    /**\n     * A11042901: Modificaciones para adicionar nuevos algoritmos de comprobacin de claves. Tipo\n     * de hash usado para gestionar la clave.\n     */\n    protected m_strHashType:string;\n    /**\n     * K13022601: Modificaciones en el manejo de claves de usuario usando hash. El encode tambin\n     * podemos definirlo\n     */\n    private m_strEncode:string;\n\n    /**\n     * Construye un objeto de datos que representa un usuario de aplicacin.\n     *\n     * @param OwnerCollection Coleccin propietaria de este objeto.\n     */\n    constructor(OwnerCollection:XoneDataCollection) {\n        super(OwnerCollection);\n        // A11042901: Modificaciones para adicionar nuevos algoritmos de comprobacin de claves.\n        // Obtener el modelo de hash que lleva el campo que nos interesa\n        try {\n            this.m_strHashType = OwnerCollection.FieldPropertyValue(\"PWD\", \"hash-type\");\n            // K13022601: Modificaciones en el manejo de claves de usuario usando hash.\n            // El encoding\n            if (StringUtils.IsEmptyString(this.m_strEncode = OwnerCollection.FieldPropertyValue(\"PWD\", \"encode\"))) {\n                // Por defecto base64\n                this.m_strEncode = \"base64\";\n            }\n        } catch (ex) {\n            throw ex;\n        }\n    }\n\n    public ValidateUserCredentials(UserData: Object[]): boolean {\n        // Aqu solamente esperamos un parmetro que ser la clave o el hash\n        let strPwd = StringUtils.SafeToString(UserData[0]);\n        let strObjPwd = StringUtils.SafeToString(this.get(\"PWD\"));\n        if (StringUtils.IsEmptyString(strPwd)) {\n            // Clave vaca\n            return StringUtils.IsEmptyString(strObjPwd);\n        }\n        // A11042901: Modificaciones para adicionar nuevos algoritmos de comprobacin de claves.\n        if (!StringUtils.IsEmptyString(this.m_strHashType)) {\n            /*\n             * K13022601: Modificaciones en el manejo de claves de usuario usando hash. El atributo\n             * hash-type y encode debe ser case insensitive\n             */\n            strPwd=HashUtils.createHash(this.m_strHashType,this.m_strEncode,strPwd);\n            // this.MessageDigest md = this.getMessageDigest(this.m_strHashType);\n            // if (md != null) {\n            //     byte[] source = new byte[strPwd.length()];\n            //     StringUtils.CopyAsBytes(strPwd, source, 0);\n            //     md.update(source);\n            //     byte[] btmp = md.digest();\n            //     strPwd = StringUtils.encodeHash(btmp, this.m_strEncode);\n            // }\n        }\n        // Ahora comparamos... clave con clave o hash con hash... lo que sea...\n        return strObjPwd.equals(strPwd);\n    }\n    \n\n    // private getMessageDigest(sHashType:string): MessageDigest  {\n    //     switch (sHashType.toLowerCase()) {\n    //         case \"md5\":\n    //             return MessageDigest.getInstance(\"MD5\");\n    //         case \"sha1\":\n    //             return MessageDigest.getInstance(\"SHA1\");\n    //         case \"sha2\":\n    //             return MessageDigest.getInstance(\"SHA2\");\n    //         case \"sha3\":\n    //             return MessageDigest.getInstance(\"SHA3\");\n    //         case \"sha256\":\n    //             return MessageDigest.getInstance(\"SHA256\");\n    //         case \"sha384\":\n    //             return MessageDigest.getInstance(\"SHA384\");\n    //         case \"sha512\":\n    //             return MessageDigest.getInstance(\"SHA512\");\n    //         default:\n    //             return null;\n    //     }\n    // }\n}","import XoneGenericException from \"../Exceptions/XoneGenericException\";\nimport { XoneMessageKeys } from \"../Exceptions/XoneMessageKeys\";\nimport IResultSet from \"../Interfaces/IResultSet\";\nimport IXoneObject from \"../Interfaces/IXoneObject\";\nimport NumberUtils from \"../Utils/NumberUtils\";\nimport ObjUtils from \"../Utils/ObjUtils\";\nimport StringUtils from \"../Utils/StringUtils\";\nimport TextUtils from \"../Utils/TextUtils\";\nimport { XoneApplication } from \"./XoneApplication\";\nimport { XoneDataCollection } from \"./XoneDataCollection\";\nimport { XoneDataObject } from \"./XoneDataObject\";\n\nexport default class XoneLookupObject {\n\tprivate m_ownerApp: XoneApplication;\n\tprivate m_ownerColl: XoneDataCollection;\n\n\tconstructor(ownerApp: XoneApplication, ownerColl: XoneDataCollection) {\n\t\tthis.m_ownerApp = ownerApp;\n\t\tthis.m_ownerColl = ownerColl;\n\t}\n\n\t/**\n\t * Efecta la bsqueda de un objeto en la base de datos\n\t * @param Sentence\t\t\tSentencia SQL que se ejecutar contra la conexin de la coleccin.\n\t * @param KeySearch\t\t\tClave simple de bsqueda usada para pasarle a los objetos de bsqueda que la necesiten.\n\t * @param Prefiltered\t\tTRUE si la sentencia de acceso ya viene prefiltrada por lo que hay que tener cuidado a la hora de adicionarle los filtros de coleccin.\n\t * @return\t\t\t\t\tDevuelve el objeto si se encuentra en base de datos o NULL si no se encuentra.\n\t * @throws Exception\n\t */\n\tpublic async LookupObject(Sentence: string, KeySearch: string, Prefiltered: boolean): Promise<XoneDataObject> {\n\t\tlet strKey: string = null,\n\t\t\tstr: string;\n\t\tlet obj: XoneDataObject = null;\n\t\tlet rs: IResultSet = null;\n\t\tlet val1: Object = null;\n\t\tconst FunctionName = \"CXoneDataCollection::LookupObject\";\n\n\t\ttry {\n\t\t\t//\n\t\t\t// Asignar valor a la macro de bsqueda. La sintaxis corre a cuenta del desarrollador\n\t\t\tif (!StringUtils.IsEmptyString(this.m_ownerColl.getLookupMacroName()))\n\t\t\t\tthis.m_ownerColl.setMacro(this.m_ownerColl.getLookupMacroName(), KeySearch);\n\t\t\tif (TextUtils.isEmpty((str = this.m_ownerColl.getAccessString()))) return null; // Cadena vaca\n\t\t\t// // Pasar el prefiltered al prepare\n\t\t\t// let strCmd = this.m_ownerColl.getConnection().PrepareSqlString(Sentence, false, Prefiltered);\n\t\t\t// // Evaluar las macros por si las moscas las hay fuera de los filtros...\n\t\t\t// strCmd = await this.m_ownerColl.EvaluateAllMacros(strCmd);\n\t\t\t//\n\t\t\t// Restaurar el valor de la macro para las otras operaciones\n\t\t\tif (!StringUtils.IsEmptyString(this.m_ownerColl.getLookupMacroName())) this.m_ownerColl.setMacro(this.m_ownerColl.getLookupMacroName(), null);\n\t\t\t//\n\t\t\t// if (m_bDebug)\n\t\t\t// {// Dejar traza del SQL\n\t\t\t//     str = \"\\r\\n\" + strCmd + \"\\r\\n\";\n\t\t\t//     m_owner.WriteConsoleString(str);\n\t\t\t// }// Dejar traza del SQL\n\t\t\t// A12042503: Mecanismo para registrar un modo debug global en la aplicacin.\n\t\t\t// if (this.getIsDebugging() || this.m_ownerColl.getOwnerApp().isDebugMode())\n\t\t\t// \tUtils.DebugLog(Utils.TAG_DATABASE_LOG,\"LookupObject: \"+strCmd);\n\t\t\t//////strCmd = InsertTop(strCmd, 1);\n\t\t\tconst swhere = await this.m_ownerColl.BrowseData.ResolveFilters(false, null, KeySearch);\n\t\t\tconst sSort = this.m_ownerColl.getSort();\n\t\t\tthis.m_ownerColl.ParseMacros(swhere);\n\t\t\tthis.m_ownerColl.ParseMacros(sSort);\n\t\t\tthis.m_ownerColl.ParseMacros(str);\n\t\t\tconst strCmd = await this.m_ownerColl.EvaluateAllMacros(str, true);\n\t\t\tconst data = {\n\t\t\t\tcoll: this.m_ownerColl.getName(),\n\t\t\t\tmacros: this.m_ownerColl.getMacros(),\n\t\t\t\twhere: swhere,\n\t\t\t\tsort: sSort,\n\t\t\t\tloadall: false,\n\t\t\t\tpage: {},\n\t\t\t};\n\t\t\tif (\n\t\t\t\tnull ==\n\t\t\t\t(rs = await this.m_ownerColl.getConnection().CreateRecordsetAsync(strCmd, { ...{ count: false, page: { start: 0, length: 2 } }, ...data }))\n\t\t\t) {\n\t\t\t\t// Error\n\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t////throw new Exception(\"XoneDataCollection::LookupObject ha fallado. Error ejecutando la sentencia de acceso a los datos.\");\n\t\t\t\tlet sb = this.m_ownerColl.GetMessage(XoneMessageKeys.SYS_MSG_COLL_LOOKUPOBJFAIL_02, \"{0} failed. Error executing data access query.\");\n\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\tthrow new XoneGenericException(-5634, sb);\n\t\t\t} // Error\n\t\t\t//\n\t\t\t// Ver si ha encontrado algo\n\t\t\tif (await rs.next()) {\n\t\t\t\t// Lo ha encontrado\n\t\t\t\t//\n\t\t\t\t// Comprobar la cantidad de records que se encontraron\n\t\t\t\tif (!this.m_ownerColl.strPk.contains(\",\")) {\n\t\t\t\t\t// Una sola\n\t\t\t\t\tstrKey = \"\";\n\t\t\t\t\t// M10052401:\tModificaciones en la forma de acceso a bases de datos SQLite.\n\t\t\t\t\t// K11010501:\tModificaciones para la versin 1.5 de Android.\n\t\t\t\t\tval1 = rs.getValue(this.m_ownerColl.strPk, this.m_ownerColl.Options.nPkType);\n\t\t\t\t\t// Los datos de tipo VT_DECIMAL tienen que convertirse a LONG para que no haya\n\t\t\t\t\t// ambiguedades con las claves\n\t\t\t\t\tif (!this.m_ownerColl.Options.bStringPk) val1 = NumberUtils.SafeToInt(val1);\n\t\t\t\t\tstrKey = this.m_ownerColl.BrowseData.DevelopObjectValue(val1);\n\t\t\t\t} // Una sola\n\t\t\t\telse {\n\t\t\t\t\t// Es mltiple, desarrollar este valor\n\t\t\t\t\t// TODO Ver si las claves mltiples sern usadas o no... a fin de cuentas eso no lo usa nadie en otras plataformas.\n\t\t\t\t\t/*\n                    strKey = \"\";\n                    str1 = this.m_ownerColl.strPk;\n                    String[] strFields = str1.Split(',');\n                    foreach (string fn in strFields)\n                    {// Todos los campos\n                        val1 = rs[fn];\n                        //\n                        str2 = string.Format(\"{0}={1}\", fn, DevelopObjectValue(val1));\n                        if (!CStringUtils.IsEmptyString(strKey))\n                            strKey += \",\";\n                        strKey += str2;\n                    }// Todos los campos\n                    */\n\t\t\t\t} // Es mltiple, desarrollar este valor\n\t\t\t\tif (!StringUtils.IsEmptyString(strKey)) {\n\t\t\t\t\t// Ver si ya est en lista\n\t\t\t\t\tif (this.m_ownerColl.BrowseData.ObjectList.containsKey(strKey)) obj = this.m_ownerColl.BrowseData.ObjectList.get(strKey) as XoneDataObject;\n\t\t\t\t} // Ver si ya est en lista\n\t\t\t\t/*\n                    Puede ser que ya este objeto ande por la lista\n                    aunque con otros valores. A los efectos esto viene\n                    a ser una especie de Refresh. La idea sera recargar\n                    el original y devolver ese, pues puede haber referencias\n                    a l en alguna otra parte. As que primero hay que\n                    buscar este ID en la lista\n                */\n\t\t\t\t// M11092601: Modificaciones para mejorar el soporte de objetos voltiles.\n\t\t\t\t// Volatile debera ser\n\t\t\t\tlet bNewObject = false;\n\t\t\t\tif (obj == null) {\n\t\t\t\t\t// No existe, as que crear nuevo\n\t\t\t\t\t//  Primero tiene que comprobar que haya un GUID vlido\n\t\t\t\t\t//  o al menos una cadenilla ProgID para construir los\n\t\t\t\t\t//  objetos. Indicar que se trata de un objeto creado solo para cargarlo.\n\t\t\t\t\tobj = await this.m_ownerColl.CreateObject(false);\n\t\t\t\t\tif (null == obj) {\n\t\t\t\t\t\t// Error\n\t\t\t\t\t\trs.close();\n\t\t\t\t\t\trs = null;\n\t\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t\t////throw new Exception(\"CASDataColl::LookupObject ha fallado. CreateObject ha devuelto NULL.\");\n\t\t\t\t\t\tlet sb = this.m_ownerColl.GetMessage(XoneMessageKeys.SYS_MSG_COLL_LOOKUPOBJFAIL_03, \"{0} failed. CreateObject returned NULL.\");\n\t\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\t\tthrow new XoneGenericException(-5635, sb);\n\t\t\t\t\t} // Error\n\t\t\t\t\t// M11092601: Modificaciones para mejorar el soporte de objetos voltiles.\n\t\t\t\t\tbNewObject = true;\n\t\t\t\t} // No existe, as que crear nuevo\n\t\t\t\t// Cargar el objeto\n\t\t\t\t// M11092601: Modificaciones para mejorar el soporte de objetos voltiles.\n\t\t\t\t// Cargar el objeto solamente si es nuevo o voltil...\n\t\t\t\tlet bLoadOk = true;\n\t\t\t\tif (bNewObject || this.m_ownerColl.Options.bVolatile) bLoadOk = await obj.Load(rs);\n\t\t\t\trs.close();\n\t\t\t\trs = null;\n\t\t\t\tif (!bLoadOk) {\n\t\t\t\t\t// Error\n\t\t\t\t\tobj = null;\n\t\t\t\t\treturn null;\n\t\t\t\t} // Error\n\t\t\t\t// M11092601: Modificaciones para mejorar el soporte de objetos voltiles.\n\t\t\t\t// Si el objeto es nuevo o voltil lo adicionamos a la lista...\n\t\t\t\tif (bNewObject) {\n\t\t\t\t\t// Nuevo. Adicionar a la lista\n\t\t\t\t\t//\n\t\t\t\t\t// Adicionar el objeto a la coleccin y a los posibles\n\t\t\t\t\t// ndices\n\t\t\t\t\tif (!this.m_ownerColl.addItem(obj)) {\n\t\t\t\t\t\t// Error\n\t\t\t\t\t\tobj = null;\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t} // Error\n\t\t\t\t} // Nuevo. Adicionar a la lista\n\t\t\t\t//\n\t\t\t\t// Si haba ms de un objeto, particularizar\n\t\t\t\t// la bsqueda segn los otros campos\n\t\t\t\t// Esta cosa finalmente nunca se usa para lo que\n\t\t\t\t// fue creada, as que en WInCE nadie la echar de menos\n\t\t\t} // Lo ha encontrado\n\t\t\telse {\n\t\t\t\t// Nionionio\n\t\t\t\t// F12110901: No se cierra en recordset cuando no se encuentra un objeto.\n\t\t\t\t// Cerramos\n\t\t\t\trs.close();\n\t\t\t\trs = null;\n\t\t\t} // Nionionio\n\t\t\t//\n\t\t\t// Retornar el objeto encontrado\n\t\t\treturn obj;\n\t\t} catch (e) {\n\t\t\t// Si hay recordset tenemos que cerrarlo\n\t\t\tif (rs != null) {\n\t\t\t\t// Hay recordset\n\t\t\t\ttry {\n\t\t\t\t\trs.close();\n\t\t\t\t} catch (se) {\n\t\t\t\t\t// Ignorar esta excepcin\n\t\t\t\t}\n\t\t\t\trs = null;\n\t\t\t} // Hay recordset\n\t\t\t/*\n            if (conn != null)\n            {// Cerrarla\n                try\n                {\n                    conn.close();\n                }\n                catch (SQLException se)\n                {\n                    // Ignorar esta excepcin\n                }\n                conn = null;\n            }// Cerrarla\n            */\n\t\t\t// Lanzar la excepcin\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\t/**\n\t * Efecta la bsqueda de un objeto en la base de datos\n\t *\n\t * @return\t\t\t\t\tDevuelve el objeto si se encuentra en base de datos o NULL si no se encuentra.\n\t * @throws Exception\n\t */\n\tprivate async LookupObjectByObject(objFind: IXoneObject): Promise<XoneDataObject> {\n\t\tlet strKey: string = null;\n\t\tlet obj: XoneDataObject = null;\n\t\tlet rs: IResultSet = null;\n\t\tlet val1: Object = null;\n\t\tconst FunctionName = \"CXoneDataCollection::LookupObject\";\n\n\t\ttry {\n\t\t\t/*if (m_bDebug)\n            {// Dejar traza del SQL\n                str = \"\\r\\n\" + strCmd + \"\\r\\n\";\n                m_owner.WriteConsoleString(str);\n            }// Dejar traza del SQL\n            // A12042503: Mecanismo para registrar un modo debug global en la aplicacin.\n            if (this.getIsDebugging() || this.getOwnerApp().isDebugMode())\n                Utils.DebugLog(Utils.TAG_DATABASE_LOG,\"LookupObject: \"+strCmd);*/\n\t\t\t//////strCmd = InsertTop(strCmd, 1);\n\t\t\tif (\n\t\t\t\tnull ==\n\t\t\t\t(rs = await this.m_ownerColl.getConnection().CreateRecordsetAsync(null, {\n\t\t\t\t\tcount: true,\n\t\t\t\t\tcoll: this.m_ownerColl.getName(),\n\t\t\t\t\tloadall: true,\n\t\t\t\t\tpage: {},\n\t\t\t\t}))\n\t\t\t) {\n\t\t\t\t//  this.m_ownerColl.getName(), null, -1 new CallParameter(objFind), -1)))\n\t\t\t\t// Error\n\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t////throw new Exception(\"XoneDataCollection::LookupObject ha fallado. Error ejecutando la sentencia de acceso a los datos.\");\n\t\t\t\tlet sb = this.m_ownerColl.GetMessage(XoneMessageKeys.SYS_MSG_COLL_LOOKUPOBJFAIL_02, \"{0} failed. Error executing data access query.\");\n\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\tthrow new XoneGenericException(-5634, sb);\n\t\t\t} // Error\n\t\t\t//\n\t\t\t// Ver si ha encontrado algo\n\t\t\tif (await rs.next()) {\n\t\t\t\t// Lo ha encontrado\n\t\t\t\t//\n\t\t\t\t// Comprobar la cantidad de records que se encontraron\n\t\t\t\tif (!this.m_ownerColl.strPk.contains(\",\")) {\n\t\t\t\t\t// Una sola\n\t\t\t\t\tstrKey = \"\";\n\n\t\t\t\t\t// M10052401:\tModificaciones en la forma de acceso a bases de datos SQLite.\n\t\t\t\t\t// K11010501:\tModificaciones para la versin 1.5 de Android.\n\t\t\t\t\ttry {\n\t\t\t\t\t\tval1 = rs.getValue(this.m_ownerColl.strPk, this.m_ownerColl.Options.nPkType);\n\t\t\t\t\t\t// Los datos de tipo VT_DECIMAL tienen que convertirse a LONG para que no haya\n\t\t\t\t\t\t// ambiguedades con las claves\n\t\t\t\t\t\tif (!this.m_ownerColl.Options.bStringPk) val1 = NumberUtils.SafeToInt(val1);\n\t\t\t\t\t\tstrKey = this.m_ownerColl.BrowseData.DevelopObjectValue(val1);\n\t\t\t\t\t} catch (ex) {}\n\t\t\t\t} // Una sola\n\t\t\t\telse {\n\t\t\t\t\t// Es mltiple, desarrollar este valor\n\t\t\t\t\t// TODO Ver si las claves mltiples sern usadas o no... a fin de cuentas eso no lo usa nadie en otras plataformas.\n\t\t\t\t\t/*\n                    strKey = \"\";\n                    str1 = this.m_ownerColl.strPk;\n                    String[] strFields = str1.Split(',');\n                    foreach (string fn in strFields)\n                    {// Todos los campos\n                        val1 = rs[fn];\n                        //\n                        str2 = string.Format(\"{0}={1}\", fn, DevelopObjectValue(val1));\n                        if (!CStringUtils.IsEmptyString(strKey))\n                            strKey += \",\";\n                        strKey += str2;\n                    }// Todos los campos\n                    */\n\t\t\t\t} // Es mltiple, desarrollar este valor\n\t\t\t\tif (!StringUtils.IsEmptyString(strKey)) {\n\t\t\t\t\t// Ver si ya est en lista\n\t\t\t\t\tif (this.m_ownerColl.BrowseData.ObjectList.containsKey(strKey)) obj = this.m_ownerColl.BrowseData.ObjectList.get(strKey) as XoneDataObject;\n\t\t\t\t} // Ver si ya est en lista\n\t\t\t\t/*\n                    Puede ser que ya este objeto ande por la lista\n                    aunque con otros valores. A los efectos esto viene\n                    a ser una especie de Refresh. La idea sera recargar\n                    el original y devolver ese, pues puede haber referencias\n                    a l en alguna otra parte. As que primero hay que\n                    buscar este ID en la lista\n                */\n\t\t\t\t// M11092601: Modificaciones para mejorar el soporte de objetos voltiles.\n\t\t\t\t// Volatile debera ser\n\t\t\t\tlet bNewObject = false;\n\t\t\t\tif (obj == null) {\n\t\t\t\t\t// No existe, as que crear nuevo\n\t\t\t\t\t//  Primero tiene que comprobar que haya un GUID vlido\n\t\t\t\t\t//  o al menos una cadenilla ProgID para construir los\n\t\t\t\t\t//  objetos. Indicar que se trata de un objeto creado solo para cargarlo.\n\t\t\t\t\tobj = await this.m_ownerColl.CreateObject(false);\n\t\t\t\t\tif (null == obj) {\n\t\t\t\t\t\t// Error\n\t\t\t\t\t\trs.close();\n\t\t\t\t\t\trs = null;\n\t\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t\t////throw new Exception(\"CASDataColl::LookupObject ha fallado. CreateObject ha devuelto NULL.\");\n\t\t\t\t\t\tlet sb = this.m_ownerColl.GetMessage(XoneMessageKeys.SYS_MSG_COLL_LOOKUPOBJFAIL_03, \"{0} failed. CreateObject returned NULL.\");\n\t\t\t\t\t\tsb = sb.replace(\"{0}\", FunctionName);\n\t\t\t\t\t\tthrow new XoneGenericException(-5635, sb);\n\t\t\t\t\t} // Error\n\t\t\t\t\t// M11092601: Modificaciones para mejorar el soporte de objetos voltiles.\n\t\t\t\t\tbNewObject = true;\n\t\t\t\t} // No existe, as que crear nuevo\n\t\t\t\t// Cargar el objeto\n\t\t\t\t// M11092601: Modificaciones para mejorar el soporte de objetos voltiles.\n\t\t\t\t// Cargar el objeto solamente si es nuevo o voltil...\n\t\t\t\tlet bLoadOk = true;\n\t\t\t\tif (bNewObject || this.m_ownerColl.Options.bVolatile) bLoadOk = await obj.Load(rs);\n\t\t\t\trs.close();\n\t\t\t\trs = null;\n\t\t\t\tif (!bLoadOk) {\n\t\t\t\t\t// Error\n\t\t\t\t\tobj = null;\n\t\t\t\t\treturn null;\n\t\t\t\t} // Error\n\t\t\t\t// M11092601: Modificaciones para mejorar el soporte de objetos voltiles.\n\t\t\t\t// Si el objeto es nuevo o voltil lo adicionamos a la lista...\n\t\t\t\tif (bNewObject) {\n\t\t\t\t\t// Nuevo. Adicionar a la lista\n\t\t\t\t\t//\n\t\t\t\t\t// Adicionar el objeto a la coleccin y a los posibles\n\t\t\t\t\t// ndices\n\t\t\t\t\tif (!this.m_ownerColl.addItem(obj)) {\n\t\t\t\t\t\t// Error\n\t\t\t\t\t\tobj = null;\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t} // Error\n\t\t\t\t} // Nuevo. Adicionar a la lista\n\t\t\t\t//\n\t\t\t\t// Si haba ms de un objeto, particularizar\n\t\t\t\t// la bsqueda segn los otros campos\n\t\t\t\t// Esta cosa finalmente nunca se us para lo que\n\t\t\t\t// fue creada, as que en WInCE nadie la echar de menos\n\t\t\t} // Lo ha encontrado\n\t\t\telse {\n\t\t\t\t// Nionionio\n\t\t\t\t// F12110901: No se cierra en recordset cuando no se encuentra un objeto.\n\t\t\t\t// Cerramos\n\t\t\t\trs.close();\n\t\t\t\trs = null;\n\t\t\t} // Nionionio\n\t\t\t//\n\t\t\t// Retornar el objeto encontrado\n\t\t\treturn obj;\n\t\t} catch (e) {\n\t\t\t// Si hay recordset tenemos que cerrarlo\n\t\t\tif (rs != null) {\n\t\t\t\t// Hay recordset\n\t\t\t\ttry {\n\t\t\t\t\trs.close();\n\t\t\t\t} catch (se) {\n\t\t\t\t\t// Ignorar esta excepcin\n\t\t\t\t}\n\t\t\t\trs = null;\n\t\t\t} // Hay recordset\n\t\t\t/*\n            if (conn != null)\n            {// Cerrarla\n                try\n                {\n                    conn.close();\n                }\n                catch (SQLException se)\n                {\n                    // Ignorar esta excepcin\n                }\n                conn = null;\n            }// Cerrarla\n            */\n\t\t\t// Lanzar la excepcin\n\t\t\tthrow e;\n\t\t}\n\t}\n}\n","import XmlNode from \"../Xml/JSONImpl/XmlNode\";\nimport StringBuilder from \"./StringBuilder\";\nimport StringUtils from \"./StringUtils\";\nimport { Utils } from \"./Utils\";\n\nexport default class ScriptUtils {\n    static GenerateFunctionName(xmlNode: XmlNode) {\n        let strName = new StringBuilder();\n        let strNodeName=\"\";\n        /*\n         * Armar el nombre de la funcin de la forma ms inteligente posible.\n         * Comprobar primero si este est solo en la coleccin del padre\n         */\n        let parentList = xmlNode.getParentNode().SelectNodes(xmlNode.getName());\n        if (parentList.count() == 1) {\n            // Ver si tiene nombre\n            // F11051002: El nombre de funcin para nodos debera tener en cuenta el nombre.\n            strNodeName = xmlNode.getAttrValue(Utils.PROP_ATTR_NAME);\n            strName.append(xmlNode.getName());\n            if (!StringUtils.IsEmptyString(strNodeName)) {\n                strName.append(\"[@\");\n                strName.append(Utils.PROP_ATTR_NAME);\n                strName.append(\"='\");\n                strName.append(strNodeName);\n                strName.append(\"']\");\n            }\n        } else {\n            // Varios\n            // F11051002: El nombre de funcin para nodos debera tener en cuenta el nombre.\n            // Estoooo, si el nodo tiene name, es el que nos vale...\n            strName.append(xmlNode.getName());\n            // F13080702: La generacin de nombres de funcin de nodo puede repetirse.\n            // Quitamos el if que haba aqu...\n            for (let i = 0; i < parentList.count(); i++) {\n                let node = parentList.get(i);\n                if (node===xmlNode) {\n                    // Este es\n                    if (strName.length() > 0) {\n                        strName.append(\"[\");\n                    }\n                    strName.append(StringUtils.SafeToString(i + 1));\n                    strName.append(\"]\");\n                    break;\n                }\n            }\n        }\n        if (xmlNode.hasChildNodes() && xmlNode.getChildren() != null && xmlNode.getChildren().length > 0 && xmlNode.SelectSingleNode(\"script\") != null) {\n            strName.append(\"/script\");\n        }\n        if (strName.length() == 0) {\n            strName.append(xmlNode.getName());\n        }\n        let parent = xmlNode.getParentNode();\n        while (true) {\n            // Recorrer el rbol hacia atrs\n            let strTmp = parent.getName();\n            strNodeName = parent.getAttrValue(\"name\");\n            if (!StringUtils.IsEmptyString(strNodeName)) {\n                // Concatenar\n                strTmp += \"[@\";\n                strName.append(Utils.PROP_ATTR_NAME);\n                strName.append(\"='\");\n                strTmp += strNodeName;\n                strName.append(\"']\");\n            }\n            //strTmp = strTmp.replace(\"-\", \"_\");\n            strName.insert(0, \"/\");\n            strName.insert(0, strTmp); // + \".\" + strName;\n            parent = parent.getParentNode();\n            if (parent.getName().equals(\"coll\")) {\n                // El nombre de la coleccin tambin\n                strName.insert(0, \"|//\");\n                strName.insert(0, parent.getAttrValue(\"name\"));\n                break;\n            } else {\n                strName.insert(0, \"/\");\n            }\n        }\n        // Indicar que es un nombre de mdulo y no de fichero\n        strName.insert(0, \"@\");\n        return strName.toString();\n    }\n\n    static GenerateFunctionNameDebug(xmlNode: XmlNode) {\n        let strName = new StringBuilder();\n        let strNodeName=\"\";\n        /*\n         * Armar el nombre de la funcin de la forma ms inteligente posible.\n         * Comprobar primero si este est solo en la coleccin del padre\n         */\n        let parentList = xmlNode.getParentNode().SelectNodes(xmlNode.getName());\n        if (parentList.count() == 1) {\n            // Ver si tiene nombre\n            // F11051002: El nombre de funcin para nodos debera tener en cuenta el nombre.\n            strNodeName = xmlNode.getAttrValue(Utils.PROP_ATTR_NAME);\n            strName.append(xmlNode.getName());\n            if (!StringUtils.IsEmptyString(strNodeName)) {\n                strName.append(\"[@\");\n                strName.append(Utils.PROP_ATTR_NAME);\n                strName.append(\"='\");\n                strName.append(strNodeName);\n                strName.append(\"']\");\n            }\n        } else {\n            // Varios\n            // F11051002: El nombre de funcin para nodos debera tener en cuenta el nombre.\n            // Estoooo, si el nodo tiene name, es el que nos vale...\n            strName.append(xmlNode.getName());\n            // F13080702: La generacin de nombres de funcin de nodo puede repetirse.\n            // Quitamos el if que haba aqu...\n            for (let i = 0; i < parentList.count(); i++) {\n                let node = parentList.get(i);\n                if (node===xmlNode) {\n                    // Este es\n                    if (strName.length() > 0) {\n                        strName.append(\"[\");\n                    }\n                    strName.append(StringUtils.SafeToString(i + 1));\n                    strName.append(\"]\");\n                    break;\n                }\n            }\n        }\n        if (xmlNode.hasChildNodes() && xmlNode.getChildren() != null && xmlNode.getChildren().length > 0 && xmlNode.SelectSingleNode(\"script\") != null) {\n            strName.append(\"/script\");\n        }\n        if (strName.length() == 0) {\n            strName.append(xmlNode.getName());\n        }\n        let parent = xmlNode.getParentNode();\n        while (true) {\n            // Recorrer el rbol hacia atrs\n            let strTmp = parent.getName();\n            strNodeName = parent.getAttrValue(\"name\");\n            if (!StringUtils.IsEmptyString(strNodeName)) {\n                // Concatenar\n                strTmp += \"[@\";\n                strName.append(Utils.PROP_ATTR_NAME);\n                strName.append(\"='\");\n                strTmp += strNodeName;\n                strName.append(\"']\");\n            }\n            //strTmp = strTmp.replace(\"-\", \"_\");\n            strName.insert(0, \"/\");\n            strName.insert(0, strTmp); // + \".\" + strName;\n            parent = parent.getParentNode();\n            if (parent.getName().equals(\"coll\")) {\n                // El nombre de la coleccin tambin\n                strName.insert(0, \"|//\");\n                strName.insert(0, parent.getAttrValue(\"name\"));\n                break;\n            } else {\n                strName.insert(0, \"/\");\n            }\n        }\n        // Indicar que es un nombre de mdulo y no de fichero\n        strName.insert(0, \"@\");\n        return strName.toString();\n    }\n\n}","import TextUtils from \"../Utils/TextUtils\";\nimport StringUtils from \"../Utils/StringUtils\";\nimport Hashtable from \"../Collections/HashMap/Hashtable\";\nimport { Utils } from \"../Utils/Utils\";\nimport { XoneApplication } from \"./XoneApplication\";\nimport { XoneDataObject } from \"./XoneDataObject\";\nimport { XoneDataSource } from \"./XoneDataSource\";\nimport { Exception } from \"../Exceptions/Exception\";\nimport XoneGenericException from \"../Exceptions/XoneGenericException\";\nimport { XoneMessageKeys } from \"../Exceptions/XoneMessageKeys\";\nimport IMessageHolder from \"../Interfaces/IMessageHolder\";\nimport NumberUtils from \"../Utils/NumberUtils\";\nimport IXmlDocument from \"../Interfaces/IXmlDocument\";\nimport XoneConnectionData from \"../Connection/XoneConnectionData\";\nimport IFieldProperties from \"../Interfaces/IField\";\nimport MacrosEvaluator from \"./Macros/MacrosEvaluator\";\nimport { SqlParser } from \"../Parsers/SQL/SqlParser\";\nimport StringBuilder from \"../Utils/StringBuilder\";\nimport SqlType from \"../Utils/SqlType\";\nimport Calendar from \"../Utils/Calendar\";\nimport ObjUtils from \"../Utils/ObjUtils\";\nimport { Hash } from \"crypto\";\nimport XoneCompany from \"./XoneCompany\";\nimport XoneUser from \"./XoneUser\";\nimport Vector from \"../Collections/Vector\";\nimport XoneLookupObject from \"./XoneLookupObject\";\nimport XmlUtils from \"../Utils/XmlUtils\";\nimport XmlNodeList from \"../Xml/JSONImpl/XmlNodeList\";\nimport XmlNode from \"../Xml/JSONImpl/XmlNode\";\nimport IllegalArgumentException from \"../Exceptions/IllegalArgumentException\";\nimport { Console } from \"console\";\nimport UITransform from \"../Transform/UITransform\";\nimport XoneCssRule from \"./CSS/XoneCssRule\";\nimport { QueryTable } from \"../Parsers/SQL/QueryTable\";\nimport IResultSet from \"../Interfaces/IResultSet\";\nimport XoneBrowseData from \"./XoneBrowseData\";\nimport ScriptUtils from \"../Utils/ScriptUtils\";\nimport ScriptContext from \"../XoneScripts/ScriptContext\";\n\ntype ScriptParams = {\n\tctx: any;\n\tslang: string;\n\tscripts: string[];\n\tfuncNames: string[];\n\tArguments: any[];\n\targsName: string[];\n\targsValue: any[];\n};\n\nexport interface DataCollectionOptions {\n\tbisIndexed: boolean;\n\tbCheckOwner: boolean;\n\tbIsSpecial: boolean;\n\tbStringPk: boolean;\n\tbObjLoadAll: boolean;\n\tbVolatile: boolean;\n\tbDeferredLoad: boolean;\n\tbDebug: boolean;\n\tbUseRaw: boolean;\n\tbParseSQL: boolean;\n\tnPkType: number;\n\tbMultipleKey: boolean;\n\tstrPrefix: string;\n\tstrLookupMacroName: string;\n\tstrAccessString: string;\n\tbSingleObject: boolean;\n\tstrProgId: string;\n\tstrClassName: string;\n\tnThreshold: number;\n\tnMaxRows: number;\n\tstrObjectName: string;\n\tstrUpdateObject: string;\n\tbHasXlatProps: boolean;\n\tbLoadLayouts: boolean;\n\tstrParentCollection: string;\n}\n\nexport class XoneDataCollection implements IFieldProperties {\n\t// Solo para identificar que una instancia es una coleccin\n\tpublic get isDataCollection(): boolean {\n\t\treturn true;\n\t}\n\n\tpublic static PROP_TYPE_INTEGER = 0;\n\tpublic static PROP_TYPE_STRING = 1;\n\tpublic static PROP_TYPE_DOUBLE = 2;\n\tpublic static PROP_TYPE_DATE = 3;\n\tpublic static PROP_TYPE_RESULTSET = 0;\n\n\tprivate m_ownerApp: XoneApplication;\n\tprivate m_xmlNode: XmlNode;\n\tprivate m_version: number;\n\tprivate m_bLocked: boolean;\n\tprivate m_bIsSpecial: boolean;\n\tprivate m_bFull: boolean;\n\tprivate m_pOwnerObject: XoneDataObject;\n\tprivate m_strName: string;\n\tprivate m_messages: IMessageHolder;\n\tprivate m_options: DataCollectionOptions;\n\tprivate m_parent: XoneDataCollection;\n\tprivate m_lstFormulaProps: string[];\n\tprivate m_lstBitProps: string[];\n\n\tprivate m_macrosEvaluator: MacrosEvaluator;\n\tprivate m_strLinkFilter: string;\n\tprivate m_strFilter: string;\n\tprivate m_lstVariables: Hashtable<string, Object>;\n\t// private m_lstMacros: Hashtable<string, string>;\n\tprivate m_strPk: string;\n\tprivate m_nPkType: number;\n\tprivate m_nBrowseLength: number;\n\tprivate m_lstKeyFields: Vector<string>;\n\tprivate m_browserData: XoneBrowseData;\n\tprivate UNIQUE_ID: symbol;\n\tprivate m_bIsClearing: boolean;\n\tprivate m_strSort: string;\n\t// Voy a cachear el plaform node que se pide un monton de veces por gusto\n\tprivate m_cachePlatformNodes: Hashtable<String, XmlNode>;\n\n\tprivate m_strContentsName: string;\n\tprivate m_bUseObjectsInRestore: boolean;\n\tprivate m_bFollowRules: boolean;\n\n\tconstructor(appData: XoneApplication, source: XmlNode, version: number) {\n\t\tthis.UNIQUE_ID = Symbol(\"XoneDataCollection\");\n\t\tthis.m_ownerApp = appData;\n\t\tthis.m_xmlNode = source; // new XoneDataSource(null,source);\n\t\tthis.m_version = version;\n\t\tthis.m_messages = appData.getMessageHolder();\n\t\tthis.m_options = <any>{};\n\t\tthis.m_strPk = \"ID\";\n\t\tthis.m_nPkType = 0;\n\t\tthis.m_parent = null;\n\t\tthis.m_bLocked = false;\n\t\tthis.m_macrosEvaluator = new MacrosEvaluator(this.m_ownerApp, this);\n\t\t// this.m_lstMacros = new Hashtable<string, string>();\n\t\t// Si la coleccin no tiene nombre nos explotamos...\n\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\tif (StringUtils.IsEmptyString((this.m_strName = this.m_xmlNode.getAttrValue(\"name\"))))\n\t\t\t////throw new Exception(\"No se puede crear una coleccin sin nombre o con nombre vaco.\");\n\t\t\tthrow new Exception(this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_COLL_NONAME, \"Cannot create a collection with an empty name.\"));\n\t\t// Crear la lista de claves mltiples por si las moscas\n\t\tthis.m_lstKeyFields = new Vector<string>();\n\t\t// O12050702: Optimizacin al gestionas los campos que son de frmula o bit.\n\t\tthis.m_lstFormulaProps = new Array<string>();\n\t\tthis.m_lstBitProps = new Array<string>();\n\t\tthis.m_cachePlatformNodes = new Hashtable<String, XmlNode>();\n\t\t// Iniciar el browserdata\n\t\tthis.m_browserData = new XoneBrowseData(this);\n\t}\n\n\tpublic getVersion(): number {\n\t\treturn this.m_version;\n\t}\n\n\tpublic get BrowseData(): XoneBrowseData {\n\t\treturn this.m_browserData;\n\t}\n\t/**\n\t * Devuelve el valor del atributo cuyo nombre se indica en la propiedad deseada.\n\t * @param FieldName\t\t\tNombre de la propiedad o campo de la coleccin cuyo atributo se quiere extraer.\n\t * @param AttrName\t\t\tNombre del atributo cuyo valor se quiere leer en el campo AttrName.\n\t * @return\t\t\t\t\tDevuelve el valor del atributo de la propiedad solicitada. NULL o cadena vaca si no existe dicho atributo.\n\t * @throws Exception\n\t */\n\tpublic FieldPropertyValue(FieldName: string, AttrName: string): string {\n\t\tif (!AttrName) return; //TAG 20201123 (Alejandro) parche temporal, he agregado esta clausula para evitar un error al llegar AttrName null\n\t\tif (TextUtils.isEmpty(FieldName) || TextUtils.isEmpty(AttrName)) {\n\t\t\t/*\n\t\t\t * TODO 25/02/2019 Juan Carlos\n\t\t\t * Antes no haba check de esto y el cdigo siempre acababa explotndose mucho despus\n\t\t\t * y sin una descripcin clara. Mejor ponerlo aqu, comentarlo si resulta que null es\n\t\t\t * un valor vlido, que no creo.\n\t\t\t */\n\t\t\tthrow new IllegalArgumentException(\"Empty field name passed to XoneDataCollection.FieldPropertyValue(). Collection name: \" + this.getName());\n\t\t}\n\n\t\t// Si no tiene nodo XML, no hacemos nada\n\t\tlet strTmp = \"\";\n\n\t\t// F13022109: No devolver nulos cuando los atributos no existen o tienen cadenas vacas.\n\t\t// No es lo mismo cadena vaca que NULL\n\t\tif (this.m_xmlNode == null) return Utils.EMPTY_STRING;\n\n\t\tlet xprop: XmlNode = null;\n\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t// Armar la cadena a buscar para resolver el cacheo\n\t\t// O11110801: Cache multinivel para las propiedades de nodos XML para acelerar la bsqueda.\n\t\t// Cambiamos esto para usar cache multinivel\n\t\t//////StringBuilder sb =new StringBuilder();\n\t\t//////sb.append(\"##prop|\").append(FieldName).append(\"|\").append(AttrName);\n\t\t// Ver si es una propiedad que no est definida\n\t\t// O11081101: Optimizar las estructuras de datos de las caches de atributos inexistentes.\n\t\t//////Set<String> ucache =m_owner.GetCollPropUndefinedValues(m_strName);\n\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t//////if (ucache !=null)\n\t\t//////\tif (ucache.contains(sb.toString()))\n\t\t//////\t\treturn null;\n\t\t// Obtiene la cache para buscar los atributos.\n\t\t// O11110801: Cache multinivel para las propiedades de nodos XML para acelerar la bsqueda.\n\t\tlet cache = this.m_ownerApp.GetCollPropValueCache(this.m_strName, \"prop\", FieldName);\n\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\tif (cache != null) {\n\t\t\t// Tiene cache\n\t\t\t//synchronized (cache)\n\t\t\t{\n\t\t\t\tif (cache.containsKey(AttrName)) return cache.get(AttrName);\n\t\t\t}\n\t\t} // Tiene cache\n\t\t// De lo contrario buscar el nodo de la propiedad para sacar el atributo\n\t\txprop = this.m_xmlNode.SelectSingleNode(\"prop\", \"name\", FieldName);\n\t\t// M10090801:\tModificaciones para permitir que los <button> sean considerados propiedades.\n\t\t// Comprobar si no tenemos prop, al menos si hay button\n\t\tif (xprop == null) xprop = this.m_xmlNode.SelectSingleNode(\"button\", \"name\", FieldName);\n\n\t\t// Si tenemos la propiedad, devolver su valor...\n\t\tif (xprop != null) {\n\t\t\t// Tiene la propiedad\n\t\t\t// test sergio*\n\t\t\t////m_propertyHashNamesValues.put(FieldName, xprop);\n\t\t\t// Obtener la plataforma\n\t\t\tif (!StringUtils.IsEmptyString((strTmp = this.getOwnerApp().getPlatform()))) {\n\t\t\t\t// Ver si la puede sacar de aqu\n\t\t\t\tlet platNode = xprop.SelectSingleNode(\"platform\", \"name\", strTmp);\n\t\t\t\tif (platNode != null)\n\t\t\t\t\tif (!StringUtils.IsEmptyString((strTmp = XmlUtils.getNodeAttr(platNode, AttrName)))) {\n\t\t\t\t\t\t// Este vale\n\t\t\t\t\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t\t\t\t\t// Cachear el valor para ahorrarnos esto despus.\n\t\t\t\t\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t\t\t\t\t// O11110801: Cache multinivel para las propiedades de nodos XML para acelerar la bsqueda.\n\t\t\t\t\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\t\t\t\t\tif (cache != null) {\n\t\t\t\t\t\t\t// Tiene cache\n\t\t\t\t\t\t\t//synchronized (cache)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcache.put(AttrName, strTmp);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} // Tiene cache\n\t\t\t\t\t\t// O13080801: Mecanismo de optimizacin para la gestin de controles visuales y atributos.\n\t\t\t\t\t\treturn this.CheckIfEvaluated(FieldName, AttrName, strTmp);\n\t\t\t\t\t} // Este vale\n\t\t\t} // Ver si la puede sacar de aqu\n\t\t\t// De lo contrario lo sacamos del propio nodo...\n\t\t\t// M10090801:\tModificaciones para permitir que los <button> sean considerados propiedades.\n\t\t\t// Contemplar casos especiales (type en los botones, por ejemplo)\n\t\t\tlet strAttrVal = XmlUtils.getNodeAttr(xprop, AttrName);\n\t\t\tif (!StringUtils.IsEmptyString(strAttrVal)) {\n\t\t\t\t// Este nos vale\n\t\t\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t\t\t// Cachear el valor para ahorrarnos esto despus.\n\t\t\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t\t\t// O11110801: Cache multinivel para las propiedades de nodos XML para acelerar la bsqueda.\n\t\t\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\t\t\tif (cache != null) {\n\t\t\t\t\t// Tiene cache\n\t\t\t\t\t//synchronized (cache)\n\t\t\t\t\t{\n\t\t\t\t\t\tcache.put(AttrName, strAttrVal);\n\t\t\t\t\t}\n\t\t\t\t} // Tiene cache\n\t\t\t\t// O13080801: Mecanismo de optimizacin para la gestin de controles visuales y atributos.\n\t\t\t\treturn this.CheckIfEvaluated(FieldName, AttrName, strAttrVal);\n\t\t\t} // Este nos vale\n\t\t\t// Si es un botn, comprobar el caso especial\n\t\t\tif (AttrName.equals(\"type\")) {\n\t\t\t\t// Ver si es un botn\n\t\t\t\tlet strName = xprop.getName();\n\t\t\t\tif (strName.equals(\"button\")) {\n\t\t\t\t\t// Botn\n\t\t\t\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t\t\t\t// Cachear el valor.\n\t\t\t\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t\t\t\t// O11110801: Cache multinivel para las propiedades de nodos XML para acelerar la bsqueda.\n\t\t\t\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\t\t\t\tif (cache != null) {\n\t\t\t\t\t\t// Tiene cache\n\t\t\t\t\t\t//synchronized (cache)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcache.put(AttrName, \"B\");\n\t\t\t\t\t\t}\n\t\t\t\t\t} // Tiene cache\n\t\t\t\t\treturn \"B\";\n\t\t\t\t} // Botn\n\t\t\t} // Ver si es un botn\n\t\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t\t// Comprobar si hay hojas de estilo para hacer bsquedas...\n\t\t\t// TODO: Luis Esto es lo mas grave que es utilizar nuestro CSS\n\t\t\tif (this.getOwnerApp().hasStylesheets()) {\n\t\t\t\t// Tiene CSS\n\t\t\t\t// A12042502: Los selectores de CSS pueden estar tipificados.\n\t\t\t\tlet strType = xprop.getAttrValue(\"type\");\n\t\t\t\tlet css: XoneCssRule = null;\n\t\t\t\tlet strClass = xprop.getAttrValue(\"class\");\n\t\t\t\tif (StringUtils.IsEmptyString(strClass)) strClass = this.m_xmlNode.getAttrValue(\"class\");\n\t\t\t\tif (!StringUtils.IsEmptyString(strClass)) {\n\t\t\t\t\t// Buscar por clase\n\t\t\t\t\t// A12042502: Los selectores de CSS pueden estar tipificados.\n\t\t\t\t\t// ADD Tag: Luis 1604201801 Modificaco para permitir las clases en cascadas\n\t\t\t\t\t// Separadas por coma.\n\t\t\t\t\t// TODO: Permitir los atributos con !important se necesita doble pasada\n\t\t\t\t\tlet clsArr = strClass.split(\" \");\n\t\t\t\t\tclsArr.reverse();\n\t\t\t\t\tfor (let i = 0; i < clsArr.length; i++) {\n\t\t\t\t\t\tlet cls = clsArr[i].trim();\n\t\t\t\t\t\tif (TextUtils.isEmpty(cls)) continue;\n\t\t\t\t\t\t// Buscar primero por subtipo (i.e. prop.kaka:T)\n\t\t\t\t\t\tif (null == (css = this.m_ownerApp.FindStylesheetByClassName(\"prop.\" + cls + \":\" + strType, AttrName))) {\n\t\t\t\t\t\t\t// No est por subtipo\n\t\t\t\t\t\t\tif (null == (css = this.m_ownerApp.FindStylesheetByClassName(\"prop.\" + cls, AttrName)))\n\t\t\t\t\t\t\t\tcss = this.m_ownerApp.FindStylesheetByClassName(\".\" + cls, AttrName);\n\t\t\t\t\t\t} // No est por subtipo\n\t\t\t\t\t\tif (css != null) break;\n\t\t\t\t\t}\n\t\t\t\t} // Buscar por clase\n\t\t\t\telse {\n\t\t\t\t\t// Buscar por el prop\n\t\t\t\t\t// A12042502: Los selectores de CSS pueden estar tipificados.\n\t\t\t\t\t// Buscar primero por subtipo (i.e. prop:B)\n\t\t\t\t\tif (null == (css = this.m_ownerApp.FindStylesheetByClassName(\"prop:\" + strType, AttrName)))\n\t\t\t\t\t\tcss = this.m_ownerApp.FindStylesheetByClassName(\"prop\", AttrName);\n\t\t\t\t} // Buscar por el prop\n\t\t\t\tif (css != null) {\n\t\t\t\t\t// Buscar en el stylesheet\n\t\t\t\t\tstrTmp = css.getRuleValue(AttrName);\n\t\t\t\t\tif (!StringUtils.IsEmptyString(strTmp)) {\n\t\t\t\t\t\t// Anda\n\t\t\t\t\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t\t\t\t\t// O11110801: Cache multinivel para las propiedades de nodos XML para acelerar la bsqueda.\n\t\t\t\t\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\t\t\t\t\tif (cache != null) {\n\t\t\t\t\t\t\t// Tiene cache\n\t\t\t\t\t\t\t//synchronized (cache)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcache.put(AttrName, strTmp);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} // Tiene cache\n\t\t\t\t\t\t// O13080801: Mecanismo de optimizacin para la gestin de controles visuales y atributos.\n\t\t\t\t\t\treturn this.CheckIfEvaluated(FieldName, AttrName, strTmp);\n\t\t\t\t\t} // Anda\n\t\t\t\t} // Buscar en el stylesheet\n\t\t\t} // Tiene CSS\n\t\t\t// Vale, se acaban los casos especiales, as que NULL pall\n\t\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t\t// Pero antes guardamos el descriptor de esta propiedad para decir que es nulo siempre\n\t\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t\t// O11110801: Cache multinivel para las propiedades de nodos XML para acelerar la bsqueda.\n\t\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\t\tif (cache != null) {\n\t\t\t\t// Tiene cache\n\t\t\t\t//synchronized (cache)\n\t\t\t\t{\n\t\t\t\t\tcache.put(AttrName, Utils.EMPTY_STRING);\n\t\t\t\t}\n\t\t\t} // Tiene cache\n\t\t\t// F13022109: No devolver nulos cuando los atributos no existen o tienen cadenas vacas.\n\t\t\t// No es lo mismo cadena vaca que NULL\n\t\t\treturn Utils.EMPTY_STRING;\n\t\t} // Tiene la propiedad\n\t\t// De lo contrario tenemos que ver si es una coleccin heredada, y llamar a la del padre\n\t\tif (!StringUtils.IsEmptyString(this.m_options.strParentCollection)) {\n\t\t\t// Supuestamente tiene padre\n\t\t\tif (this.getParentCollection() == null) {\n\t\t\t\t// Error\n\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t////throw new XoneGenericException(-17171, \"CXoneDataCollection::FieldPropertyValue ha fallado en la coleccin '\" + m_strName + \"'. La coleccin padre ('\" + m_strParentCollection + \"') no se puede obtener.\");\n\t\t\t\tlet strMsg = this.m_messages.GetMessage(\n\t\t\t\t\tXoneMessageKeys.SYS_MSG_COLL_XPROPVALUEFAIL,\n\t\t\t\t\t\"{0} failed for collection '{1}'. Cannot get parent collection '{2}'\"\n\t\t\t\t);\n\t\t\t\tstrMsg = strMsg.replace(\"{0}\", \"CXoneDataCollection::FieldPropertyValue\");\n\t\t\t\tstrMsg = strMsg.replace(\"{1}\", this.m_strName);\n\t\t\t\tstrMsg = strMsg.replace(\"{2}\", this.m_options.strParentCollection);\n\t\t\t\tthrow new XoneGenericException(-17171, strMsg);\n\t\t\t} // Error\n\t\t\treturn this.getParentCollection().FieldPropertyValue(FieldName, AttrName);\n\t\t} // Supuestamente tiene padre\n\t\t// De lo contrario nanai...\n\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t// Pero antes cachear que no tenemos valor\n\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t// O11110801: Cache multinivel para las propiedades de nodos XML para acelerar la bsqueda.\n\t\tif (cache != null) cache.put(AttrName, Utils.EMPTY_STRING);\n\t\t// F13022109: No devolver nulos cuando los atributos no existen o tienen cadenas vacas.\n\t\t// No es lo mismo cadena vaca que NULL\n\t\treturn Utils.EMPTY_STRING;\n\t}\n\n\tpublic getName() {\n\t\treturn this.m_strName;\n\t}\n\n\t// A10090601:\tIncluir el mecanismo de rplica selectiva por colecciones a la maquinaria.\n\t// TRUE si la coleccin replica (solo cuando la rplica es selectiva por colecciones)\n\tpublic getReplicate(): boolean {\n\t\treturn StringUtils.ParseBoolValue(this.CollPropertyValue(\"replicate\"), false);\n\t}\n\n\tCheckIfEvaluated(FieldName: string, AttrName: string, sVal: string): string {\n\t\ttry {\n\t\t\tif (!StringUtils.IsEmptyString(sVal)) {\n\t\t\t\tif (sVal.contains(\"##\")) {\n\t\t\t\t\t// Es una macro o la contiene\n\t\t\t\t\t// M11060902: Mejoras en el sistema de evaluacin de macros en el framework.\n\t\t\t\t\tif (sVal.equals(StringUtils.XONE_EMPTY_STRING)) return Utils.EMPTY_STRING;\n\t\t\t\t\t// O13080801: Mecanismo de optimizacin para la gestin de controles visuales y atributos.\n\t\t\t\t\tlet key = FieldName + \":\" + AttrName;\n\t\t\t\t\tthis.m_ownerApp.addEvaluatedAttributesList(this.m_strName, key);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(e);\n\t\t}\n\t\treturn sVal;\n\t}\n\n\t//#region Transformaciones para el UI PWA\n\tpublic getLayout(visibility: number = 1, parent: XmlNode = null): any {\n\t\treturn UITransform.getLayout(this, parent || this.getHierarchyXml(), visibility);\n\t}\n\n\tpublic async getLayoutAsync(visibility: number = 1, parent: XmlNode = null): Promise<any> {\n\t\treturn await UITransform.getLayoutAsync(this, parent || this.getHierarchyXml(), visibility);\n\t}\n\n\t// Vamos a leer la herencia en formato de XML para arriba\n\tpublic getHierarchyXml(): XmlNode {\n\t\tif (this.getParentCollection() == null) return this.getProperties();\n\t\treturn this.getProperties().merge(this.getParentCollection().getHierarchyXml());\n\t}\n\n\tQualifyField(FieldName: string, Sentence?: SqlParser): string {\n\t\treturn this.BrowseData.QualifyField(FieldName, Sentence);\n\t}\n\n\tpublic getPropAttributes(Value: string | XmlNode, type: string = Utils.PROP_NAME): any {\n\t\treturn UITransform.getPropAttributes(this, Value, type);\n\t\t// let node: XmlNode;\n\t\t// let PropName: string\n\t\t// if (typeof Value == 'string') {\n\t\t//     node=this.m_xmlNode.SelectSingleNode(type,Utils.PROP_ATTR_NAME,Value);\n\t\t//     PropName=Value;\n\t\t// } else {\n\t\t//     node= Value as XmlNode;\n\t\t//     PropName=node.getAttrValue(Utils.PROP_ATTR_NAME);\n\t\t//     type=node.getName();\n\t\t// }\n\t\t// if (ObjUtils.IsNothing(node))\n\t\t//     return {};\n\t\t// let attrs=node.getAttrs();\n\t\t// let result=<any>{ node: type};\n\t\t// for (const key in UITransform.UI_ATTRIBUTES[type]) {\n\t\t//     if (Object.prototype.hasOwnProperty.call(UITransform.UI_ATTRIBUTES[type], key)) {\n\t\t//         const element = UITransform.UI_ATTRIBUTES[type][key];\n\t\t//         const value=node.getName().equalsIgnoreCase(Utils.PROP_NAME)?this.FieldPropertyValue(PropName,element):this.NodePropertyValue(type,PropName,element);\n\t\t//         if (!TextUtils.isEmpty(value))\n\t\t//         {\n\t\t//             result[key]=UITransform.developValue(this,PropName,key,element);\n\t\t//         }\n\t\t//     }\n\t\t// }\n\t\t// return result;\n\t}\n\t//#endregion\n\n\t/**\n\t * A14040101: Funcin sobrecargada de NodePropertyValue jerrquica.\n\t * Sobrecarga de NodePropertyValue para poder sacar valores de jerarquas de nodos.\n\t *\n\t * @param BaseNode\t\tNodo usado como base para buscar el se pide.\n\t * @param NodeName\t\tNombre del nodo xml cuyo atributo se quiere obtener.\n\t * @param ItemName\t\tNombre del atributo name del nodo que se quiere buscar.\n\t * @param AttrName\t\tNombre del atributo cuyo valor se quiere obtener.\n\t * @return\n\t * @throws Exception\n\t */\n\tpublic NodePropertyValueBase(BaseNode: XmlNode, NodeName: string, ItemName: string, AttrName: string): string {\n\t\tlet strTmp = \"\";\n\n\t\t// Si no tiene nodo XML, no hacemos nada\n\t\tif (this.m_xmlNode == null) return Utils.EMPTY_STRING;\n\t\t// Obtener la cache correspondiente para el nodo en cuestin.... dando patrs hasta que llegue a coll\n\t\tlet sbCacheTag = new StringBuilder(NodeName);\n\t\tlet parent = BaseNode;\n\t\twhile (!parent.getName().equals(Utils.COLL_COLL)) {\n\t\t\t// Lo que tengamos lo arreglamos\n\t\t\tsbCacheTag.insert(0, \"/\");\n\t\t\tsbCacheTag.insert(0, parent.getName());\n\t\t\tparent = parent.getParentNode();\n\t\t} // Lo que tengamos lo arreglamos\n\t\t// Ahora buscamos la cache...\n\t\tlet cache = this.m_ownerApp.GetCollPropValueCache(this.m_strName, sbCacheTag.toString(), ItemName);\n\t\tif (cache != null) {\n\t\t\t//synchronized (cache)\n\t\t\tif (cache.containsKey(AttrName)) return cache.get(AttrName);\n\t\t}\n\t\t// Ahora tendremos que buscar el nodo en cuestin dentro del que nos han mandado, no en la lista general\n\t\tlet xprop: XmlNode = null;\n\t\tif (StringUtils.IsEmptyString(ItemName)) xprop = BaseNode.SelectSingleNode(NodeName);\n\t\telse xprop = BaseNode.SelectSingleNode(NodeName, Utils.PROP_ATTR_NAME, ItemName);\n\t\t// Si tenemos la propiedad, devolver su valor...\n\t\tif (xprop != null) {\n\t\t\t// Tiene la propiedad\n\t\t\t// Obtener la plataforma\n\t\t\tif (!StringUtils.IsEmptyString((strTmp = this.getOwnerApp().getPlatform()))) {\n\t\t\t\t// Ver si la puede sacar de aqu\n\t\t\t\tlet platNode = xprop.SelectSingleNode(\"platform\", Utils.PROP_ATTR_NAME, strTmp);\n\t\t\t\tif (platNode != null)\n\t\t\t\t\tif (!StringUtils.IsEmptyString((strTmp = platNode.getAttrValue(AttrName)))) {\n\t\t\t\t\t\t// Tiene valor\n\t\t\t\t\t\t// Cachear el valor.\n\t\t\t\t\t\tif (cache != null) {\n\t\t\t\t\t\t\t///synchronized (cache)\n\t\t\t\t\t\t\tcache.put(AttrName, strTmp);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn this.CheckIfEvaluated(ItemName, AttrName, strTmp); //strTmp;\n\t\t\t\t\t} // Tiene valor\n\t\t\t} // Ver si la puede sacar de aqu\n\t\t\t// De lo contrario lo sacamos del propio nodo...\n\t\t\t// Cachear o cachear...\n\t\t\tstrTmp = xprop.getAttrValue(AttrName);\n\t\t\tif (!StringUtils.IsEmptyString(strTmp)) {\n\t\t\t\t// Tiene valor\n\t\t\t\tif (cache != null) {\n\t\t\t\t\t//synchronized (cache)\n\t\t\t\t\tcache.put(AttrName, strTmp);\n\t\t\t\t}\n\t\t\t\t// Cualquier otro valor de nodo, no hay verificacin...\n\t\t\t\treturn this.CheckIfEvaluated(ItemName, AttrName, strTmp); //strTmp;\n\t\t\t} // Tiene valor\n\t\t\t// Comprobar si hay hojas de estilo para hacer bsquedas...\n\t\t\tif (this.m_ownerApp.hasStylesheets()) {\n\t\t\t\t// Tiene CSS\n\t\t\t\tlet css: XoneCssRule = null;\n\t\t\t\tlet strClass = xprop.getAttrValue(\"class\");\n\t\t\t\tif (StringUtils.IsEmptyString(strClass)) strClass = this.m_xmlNode.getAttrValue(\"class\");\n\t\t\t\tif (!StringUtils.IsEmptyString(strClass)) {\n\t\t\t\t\t// Buscar por clase\n\t\t\t\t\t// ADD Tag: Luis 1604201801 Modificaco para permitir las clases en cascadas\n\t\t\t\t\t// Separadas por coma.\n\t\t\t\t\t// TODO: Permitir los atributos con !important se necesita doble pasada\n\t\t\t\t\tlet clsArr = strClass.split(\" \");\n\t\t\t\t\tclsArr.reverse();\n\t\t\t\t\tfor (let i = 0; i < clsArr.length; i++) {\n\t\t\t\t\t\tlet cls = clsArr[i].trim();\n\t\t\t\t\t\tif (TextUtils.isEmpty(cls)) continue;\n\t\t\t\t\t\tif (null == (css = this.m_ownerApp.FindStylesheetByClassName(NodeName + \".\" + cls, AttrName))) {\n\t\t\t\t\t\t\tcss = this.m_ownerApp.FindStylesheetByClassName(\".\" + cls, AttrName);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (css != null) break;\n\t\t\t\t\t}\n\t\t\t\t\t//                    if (null == (css = m_owner.FindStylesheetByClassName(NodeName + \".\" + strClass, AttrName)))\n\t\t\t\t\t//                        css = m_owner.FindStylesheetByClassName(\".\" + strClass, AttrName);\n\t\t\t\t} // Buscar por clase\n\t\t\t\telse css = this.m_ownerApp.FindStylesheetByClassName(NodeName, AttrName);\n\t\t\t\tif (css != null) {\n\t\t\t\t\t// Buscar en el stylesheet\n\t\t\t\t\tstrTmp = css.getRuleValue(AttrName);\n\t\t\t\t\tif (!StringUtils.IsEmptyString(strTmp)) {\n\t\t\t\t\t\t// Anda\n\t\t\t\t\t\tif (cache != null) {\n\t\t\t\t\t\t\t//synchronized (cache)\n\t\t\t\t\t\t\tcache.put(AttrName, strTmp);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn this.CheckIfEvaluated(ItemName, AttrName, strTmp); //strTmp;\n\t\t\t\t\t} // Anda\n\t\t\t\t} // Buscar en el stylesheet\n\t\t\t} // Tiene CSS\n\t\t\t// Cachear idicando que no hay valor.\n\t\t\t// Guardamos en la misma cache una constante vaca\n\t\t\tif (cache != null) {\n\t\t\t\t//synchronized (cache)\n\t\t\t\tcache.put(AttrName, Utils.EMPTY_STRING);\n\t\t\t}\n\t\t\t// No es lo mismo cadena vaca que NULL\n\t\t\treturn Utils.EMPTY_STRING;\n\t\t} // Tiene la propiedad\n\t\t// De lo contrario tenemos que ver si es una coleccin heredada, y llamar a la del padre\n\t\tif (!StringUtils.IsEmptyString(this.Options.strParentCollection)) {\n\t\t\t// Supuestamente tiene padre\n\t\t\tif (this.getParentCollection() == null)\n\t\t\t\tthrow new XoneGenericException(\n\t\t\t\t\t-17171,\n\t\t\t\t\t\"CXoneDataCollection::NodePropertyValue ha fallado en la coleccin '\" +\n\t\t\t\t\t\tthis.m_strName +\n\t\t\t\t\t\t\"'. La coleccin padre ('\" +\n\t\t\t\t\t\tthis.Options.strParentCollection +\n\t\t\t\t\t\t\"') no se puede obtener.\"\n\t\t\t\t);\n\t\t\treturn this.getParentCollection().NodePropertyValueBase(BaseNode, NodeName, ItemName, AttrName);\n\t\t} // Supuestamente tiene padre\n\t\t// De lo contrario nanai...\n\t\t// Cachear para indicar que no hay valor\n\t\tif (cache != null) {\n\t\t\t//synchronized (cache)\n\t\t\tcache.put(AttrName, Utils.EMPTY_STRING);\n\t\t}\n\t\t// No es lo mismo cadena vaca que NULL\n\t\treturn Utils.EMPTY_STRING;\n\t}\n\n\t// M10082302:\tCrear una funcin para sacar cualquier atributo de cualquier nodo de la coleccin.\n\t// Propiedades de un nodo dado su nombre y su atributo\n\tpublic NodePropertyValue(NodeName: string, ItemName: string, AttrName: string): string {\n\t\t// Si no tiene nodo XML, no hacemos nada\n\t\tlet strTmp = \"\";\n\n\t\t// F13022109: No devolver nulos cuando los atributos no existen o tienen cadenas vacas.\n\t\t// No es lo mismo cadena vaca que NULL\n\t\tif (this.m_xmlNode == null) return Utils.EMPTY_STRING;\n\n\t\tlet xprop: XmlNode = null;\n\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t// Armar la cadena a buscar para resolver el cacheo\n\t\t// O11110801: Cache multinivel para las propiedades de nodos XML para acelerar la bsqueda.\n\t\t//////StringBuilder sb =new StringBuilder();\n\t\t//////sb.append(\"##\").append(NodeName).append(\"|\").append(ItemName).append(\"|\").append(AttrName);\n\t\t// Ver si es una propiedad que no est definida\n\t\t// O11081101: Optimizar las estructuras de datos de las caches de atributos inexistentes.\n\t\t//////Set<String> ucache =m_owner.GetCollPropUndefinedValues(m_strName);\n\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t//////if (ucache !=null)\n\t\t//////\tif (ucache.contains(sb.toString()))\n\t\t//////\t\treturn null;\n\t\t// Obtener la cache con los valores de los atributos de la coleccin.\n\t\tlet cache = this.m_ownerApp.GetCollPropValueCache(this.m_strName, NodeName, ItemName);\n\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\tif (cache != null) {\n\t\t\t// Tiene cache\n\t\t\t//synchronized (cache)\n\t\t\t{\n\t\t\t\tif (cache.containsKey(AttrName)) return cache.get(AttrName);\n\t\t\t}\n\t\t} // Tiene cache\n\t\t// De lo contrario buscar el nodo de la propiedad para sacar el atributo\n\t\txprop = NodeName.equals(this.m_xmlNode.getName()) ? this.m_xmlNode : this.m_xmlNode.SelectSingleNode(NodeName, Utils.PROP_ATTR_NAME, ItemName);\n\n\t\t// Si tenemos la propiedad, devolver su valor...\n\t\tif (xprop != null) {\n\t\t\t// Tiene la propiedad\n\t\t\t// Obtener la plataforma\n\t\t\tif (!StringUtils.IsEmptyString((strTmp = this.getOwnerApp().getPlatform()))) {\n\t\t\t\t// Ver si la puede sacar de aqu\n\t\t\t\tlet platNode = xprop.SelectSingleNode(Utils.PLATFORM_NAME, Utils.PROP_ATTR_NAME, strTmp);\n\t\t\t\tif (platNode != null)\n\t\t\t\t\tif (!StringUtils.IsEmptyString((strTmp = XmlUtils.getNodeAttr(platNode, AttrName)))) {\n\t\t\t\t\t\t// Tiene valor\n\t\t\t\t\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t\t\t\t\t// Cachear el valor.\n\t\t\t\t\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t\t\t\t\t// O11110801: Cache multinivel para las propiedades de nodos XML para acelerar la bsqueda.\n\t\t\t\t\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\t\t\t\t\tif (cache != null) {\n\t\t\t\t\t\t\t// Tiene cache\n\t\t\t\t\t\t\t//synchronized (cache)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcache.put(AttrName, strTmp);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} // Tiene cache\n\t\t\t\t\t\treturn this.CheckIfEvaluated(ItemName, AttrName, strTmp); //strTmp;\n\t\t\t\t\t} // Tiene valor\n\t\t\t} // Ver si la puede sacar de aqu\n\t\t\t// De lo contrario lo sacamos del propio nodo...\n\t\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t\t// Cachear o cachear...\n\t\t\tstrTmp = xprop.getAttrValue(AttrName);\n\t\t\tif (!StringUtils.IsEmptyString(strTmp)) {\n\t\t\t\t// Tiene valor\n\t\t\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t\t\t// O11110801: Cache multinivel para las propiedades de nodos XML para acelerar la bsqueda.\n\t\t\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\t\t\tif (cache != null) {\n\t\t\t\t\t// Tiene cache\n\t\t\t\t\t//synchronized (cache)\n\t\t\t\t\t{\n\t\t\t\t\t\tcache.put(AttrName, strTmp);\n\t\t\t\t\t}\n\t\t\t\t} // Tiene cache\n\t\t\t\treturn this.CheckIfEvaluated(ItemName, AttrName, strTmp); //strTmp;\n\t\t\t} // Tiene valor\n\t\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t\t// Comprobar si hay hojas de estilo para hacer bsquedas...\n\t\t\tif (this.m_ownerApp.hasStylesheets()) {\n\t\t\t\t// Tiene CSS\n\t\t\t\tlet css: XoneCssRule = null;\n\t\t\t\tlet strClass = xprop.getAttrValue(\"class\");\n\t\t\t\tif (StringUtils.IsEmptyString(strClass)) strClass = this.m_xmlNode.getAttrValue(\"class\");\n\t\t\t\tif (!StringUtils.IsEmptyString(strClass)) {\n\t\t\t\t\t// Buscar por clase\n\t\t\t\t\t// F11072901: La bsqueda en NodePropertyValue no usa el tag apropiado.\n\t\t\t\t\t// ADD Tag: Luis 1604201801 Modificaco para permitir las clases en cascadas\n\t\t\t\t\t// Separadas por coma.\n\t\t\t\t\t// TODO: Permitir los atributos con !important se necesita doble pasada\n\t\t\t\t\tlet clsArr = strClass.split(\" \");\n\t\t\t\t\tclsArr.reverse();\n\t\t\t\t\tfor (let i = 0; i < clsArr.length; i++) {\n\t\t\t\t\t\tlet cls = clsArr[i].trim();\n\t\t\t\t\t\tif (TextUtils.isEmpty(cls)) continue;\n\t\t\t\t\t\tif (null == (css = this.m_ownerApp.FindStylesheetByClassName(NodeName + \".\" + cls, AttrName))) {\n\t\t\t\t\t\t\tcss = this.m_ownerApp.FindStylesheetByClassName(\".\" + cls, AttrName);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (css != null) break;\n\t\t\t\t\t}\n\t\t\t\t\t//\t    \t\t\tif (null ==(css =m_owner.FindStylesheetByClassName (NodeName + \".\" + strClass, AttrName)))\n\t\t\t\t\t//\t    \t\t\t\tcss =m_owner.FindStylesheetByClassName(\".\" + strClass, AttrName);\n\t\t\t\t} // Buscar por clase\n\t\t\t\telse css = this.m_ownerApp.FindStylesheetByClassName(NodeName, AttrName);\n\t\t\t\tif (css != null) {\n\t\t\t\t\t// Buscar en el stylesheet\n\t\t\t\t\tstrTmp = css.getRuleValue(AttrName);\n\t\t\t\t\tif (!StringUtils.IsEmptyString(strTmp)) {\n\t\t\t\t\t\t// Anda\n\t\t\t\t\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t\t\t\t\t// O11110801: Cache multinivel para las propiedades de nodos XML para acelerar la bsqueda.\n\t\t\t\t\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\t\t\t\t\tif (cache != null) {\n\t\t\t\t\t\t\t// Tiene cache\n\t\t\t\t\t\t\t//synchronized (cache)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcache.put(AttrName, strTmp);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} // Tiene cache\n\t\t\t\t\t\treturn this.CheckIfEvaluated(ItemName, AttrName, strTmp); //strTmp;\n\t\t\t\t\t} // Anda\n\t\t\t\t} // Buscar en el stylesheet\n\t\t\t} // Tiene CSS\n\t\t\t// Cachear idicando que no hay valor.\n\t\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t\t// O11110801: Cache multinivel para las propiedades de nodos XML para acelerar la bsqueda.\n\t\t\t// Guardamos en la misma cache una constante vaca\n\t\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\t\tif (cache != null) {\n\t\t\t\t// Tiene cache\n\t\t\t\t//synchronized (cache)\n\t\t\t\t{\n\t\t\t\t\tcache.put(AttrName, Utils.EMPTY_STRING);\n\t\t\t\t}\n\t\t\t} // Tiene cache\n\t\t\t// F13022109: No devolver nulos cuando los atributos no existen o tienen cadenas vacas.\n\t\t\t// No es lo mismo cadena vaca que NULL\n\t\t\treturn Utils.EMPTY_STRING;\n\t\t} // Tiene la propiedad\n\t\t// De lo contrario tenemos que ver si es una coleccin heredada, y llamar a la del padre\n\t\tif (!StringUtils.IsEmptyString(this.Options.strParentCollection)) {\n\t\t\t// Supuestamente tiene padre\n\t\t\tif (this.getParentCollection() == null) {\n\t\t\t\t// Error\n\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\tlet str = this.m_messages.GetMessage(\n\t\t\t\t\tXoneMessageKeys.SYS_MSG_COLL_XPROPVALUEFAIL,\n\t\t\t\t\t\"{0} failed for collection '{1}'. Cannot get parent collection '{2}'.\"\n\t\t\t\t);\n\t\t\t\tstr = str.replace(\"{0}\", \"CXoneDataCollection::NodePropertyValue\");\n\t\t\t\tstr = str.replace(\"{1}\", this.m_strName);\n\t\t\t\tstr = str.replace(\"{2}\", this.Options.strParentCollection);\n\t\t\t\tthrow new XoneGenericException(-17171, str);\n\t\t\t} // Error\n\t\t\t////throw new XoneGenericException(-17171, \"CXoneDataCollection::FieldPropertyValue ha fallado en la coleccin '\" + m_strName + \"'. La coleccin padre ('\" + m_strParentCollection + \"') no se puede obtener.\");\n\t\t\treturn this.getParentCollection().NodePropertyValue(NodeName, ItemName, AttrName);\n\t\t} // Supuestamente tiene padre\n\t\t// De lo contrario nanai...\n\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t// Cachear para indicar que no hay valor\n\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t// O11110801: Cache multinivel para las propiedades de nodos XML para acelerar la bsqueda.\n\t\t// Guardamos en la misma cache una constante vaca\n\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\tif (cache != null) {\n\t\t\t// Tiene cache\n\t\t\t//synchronized (cache)\n\t\t\t{\n\t\t\t\tcache.put(AttrName, Utils.EMPTY_STRING);\n\t\t\t}\n\t\t} // Tiene cache\n\t\t// F13022109: No devolver nulos cuando los atributos no existen o tienen cadenas vacas.\n\t\t// No es lo mismo cadena vaca que NULL\n\t\treturn Utils.EMPTY_STRING;\n\t}\n\n\tpublic SetNodePropertyValue(NodeName: string, ItemName: string, AttrName: string, sValue: string): void {\n\t\tif (this.m_xmlNode == null) {\n\t\t\treturn;\n\t\t}\n\t\tlet cache = this.m_ownerApp.GetCollPropValueCache(this.m_strName, NodeName, ItemName);\n\t\tif (cache == null) {\n\t\t\treturn;\n\t\t}\n\t\tcache.put(AttrName, sValue);\n\t}\n\n\t/// Devuelve el valor del atributo del grupo cuyo id se indica en la propiedad deseada.\n\t/// A09100502:   Adicionar un equivalente a FieldPropertyValue para los grupos\n\t/// <param name=\"GroupId\">Id del grupo de la coleccin cuyo atributo se quiere extraer</param>\n\t/// <param name=\"AttrName\">Nombre del atributo cuyo valor se quiere leer en el campo AttrName</param>\n\tpublic GroupPropertyValue(GroupId: string, AttrName: string): string {\n\t\t// Si no tiene nodo XML, no hacemos nada\n\t\tlet strTmp = \"\";\n\n\t\t// F13022109: No devolver nulos cuando los atributos no existen o tienen cadenas vacas.\n\t\t// No es lo mismo cadena vaca que NULL\n\t\tif (this.m_xmlNode == null) return Utils.EMPTY_STRING;\n\n\t\tlet xprop: XmlNode = null;\n\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t// Armar la cadena a buscar para resolver el cacheo\n\t\t// O11110801: Cache multinivel para las propiedades de nodos XML para acelerar la bsqueda.\n\t\t// Cambiar un poco esto como se hace.\n\t\t//////StringBuilder sb =new StringBuilder();\n\t\t//////sb.append(\"##group|\").append(GroupId).append(\"|\").append(AttrName);\n\t\t// Ver si es una propiedad que no est definida\n\t\t// O11081101: Optimizar las estructuras de datos de las caches de atributos inexistentes.\n\t\t//////Set<String> ucache =m_owner.GetCollPropUndefinedValues(m_strName);\n\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t//////if (ucache !=null)\n\t\t//////\tif (ucache.contains(sb.toString()))\n\t\t//////\t\treturn null;\n\t\t// Obtener la cache con los atributos de la coleccin.\n\t\tlet cache = this.m_ownerApp.GetCollPropValueCache(this.m_strName, \"group\", GroupId);\n\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\tif (cache != null) {\n\t\t\t// Tiene cache\n\t\t\t//synchronized (cache)\n\t\t\t{\n\t\t\t\tif (cache.containsKey(AttrName)) return cache.get(AttrName);\n\t\t\t}\n\t\t} // Tiene cache\n\t\t// De lo contrario buscar el nodo de la propiedad para sacar el atributo\n\t\txprop = this.m_xmlNode.SelectSingleNode(\"group\", \"id\", GroupId);\n\t\t// Si tenemos la propiedad, devolver su valor...\n\t\tif (xprop != null) {\n\t\t\t// Tiene la propiedad\n\t\t\t// Obtener la plataforma\n\t\t\tif (!StringUtils.IsEmptyString((strTmp = this.getOwnerApp().getPlatform()))) {\n\t\t\t\t// Ver si la puede sacar de aqu\n\t\t\t\tlet platNode = xprop.SelectSingleNode(\"platform\", \"name\", strTmp);\n\t\t\t\tif (platNode != null)\n\t\t\t\t\tif (!StringUtils.IsEmptyString((strTmp = XmlUtils.getNodeAttr(platNode, AttrName)))) {\n\t\t\t\t\t\t// Tiene valor\n\t\t\t\t\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t\t\t\t\t// Cachear el valor.\n\t\t\t\t\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t\t\t\t\t// O11110801: Cache multinivel para las propiedades de nodos XML para acelerar la bsqueda.\n\t\t\t\t\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\t\t\t\t\tif (cache != null) {\n\t\t\t\t\t\t\t// Tiene cache\n\t\t\t\t\t\t\t//synchronized (cache)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcache.put(AttrName, strTmp);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} // Tiene cache\n\t\t\t\t\t\treturn strTmp;\n\t\t\t\t\t} // Tiene valor\n\t\t\t} // Ver si la puede sacar de aqu\n\t\t\t// De lo contrario lo sacamos del propio nodo...\n\t\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t\t// Cachear o cachear...\n\t\t\tstrTmp = XmlUtils.getNodeAttr(xprop, AttrName);\n\t\t\tif (StringUtils.IsEmptyString(strTmp) && !StringUtils.IsEmptyString(this.Options.strParentCollection)) {\n\t\t\t\t// Supuestamente tiene padre\n\t\t\t\tif (this.getParentCollection() != null) {\n\t\t\t\t\tstrTmp = this.getParentCollection().GroupPropertyValue(GroupId, AttrName);\n\t\t\t\t}\n\t\t\t} // Supuestamente tiene padre\n\t\t\tif (!StringUtils.IsEmptyString(strTmp)) {\n\t\t\t\t// Tiene valor\n\t\t\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t\t\t// O11110801: Cache multinivel para las propiedades de nodos XML para acelerar la bsqueda.\n\t\t\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\t\t\tif (cache != null) {\n\t\t\t\t\t// Tiene cache\n\t\t\t\t\t//synchronized (cache)\n\t\t\t\t\t{\n\t\t\t\t\t\tcache.put(AttrName, strTmp);\n\t\t\t\t\t}\n\t\t\t\t} // Tiene cache\n\t\t\t\treturn strTmp;\n\t\t\t} // Tiene valor\n\n\t\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t\t// Comprobar si hay hojas de estilo para hacer bsquedas...\n\t\t\tif (this.m_ownerApp.hasStylesheets()) {\n\t\t\t\t// Tiene CSS\n\t\t\t\tlet css: XoneCssRule = null;\n\t\t\t\tlet strClass = xprop.getAttrValue(\"class\");\n\t\t\t\tif (StringUtils.IsEmptyString(strClass)) strClass = this.m_xmlNode.getAttrValue(\"class\");\n\t\t\t\tif (!StringUtils.IsEmptyString(strClass)) {\n\t\t\t\t\t// Buscar por clase\n\t\t\t\t\t// ADD Tag: Luis 1604201801 Modificaco para permitir las clases en cascadas\n\t\t\t\t\t// Separadas por coma.\n\t\t\t\t\t// TODO: Permitir los atributos con !important se necesita doble pasada\n\t\t\t\t\tlet clsArr = strClass.split(\" \");\n\t\t\t\t\tclsArr.reverse();\n\t\t\t\t\tfor (let i = 0; i < clsArr.length; i++) {\n\t\t\t\t\t\tlet cls = clsArr[i].trim();\n\t\t\t\t\t\tif (TextUtils.isEmpty(cls)) continue;\n\t\t\t\t\t\tif (null == (css = this.m_ownerApp.FindStylesheetByClassName(\"group.\" + cls, AttrName))) {\n\t\t\t\t\t\t\tcss = this.m_ownerApp.FindStylesheetByClassName(\".\" + cls, AttrName);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (css != null) break;\n\t\t\t\t\t}\n\t\t\t\t\t//\t    \t\t\tif (null ==(css =m_owner.FindStylesheetByClassName (\"group.\" + strClass, AttrName)))\n\t\t\t\t\t//\t    \t\t\t\tcss =m_owner.FindStylesheetByClassName(\".\" + strClass, AttrName);\n\t\t\t\t} // Buscar por clase\n\t\t\t\telse css = this.m_ownerApp.FindStylesheetByClassName(\"group\", AttrName);\n\t\t\t\tif (css != null) {\n\t\t\t\t\t// Buscar en el stylesheet\n\t\t\t\t\tstrTmp = css.getRuleValue(AttrName);\n\t\t\t\t\tif (!StringUtils.IsEmptyString(strTmp)) {\n\t\t\t\t\t\t// Anda\n\t\t\t\t\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t\t\t\t\t// O11110801: Cache multinivel para las propiedades de nodos XML para acelerar la bsqueda.\n\t\t\t\t\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\t\t\t\t\tif (cache != null) {\n\t\t\t\t\t\t\t// Tiene cache\n\t\t\t\t\t\t\t//synchronized (cache)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcache.put(AttrName, strTmp);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} // Tiene cache\n\t\t\t\t\t\treturn strTmp;\n\t\t\t\t\t} // Anda\n\t\t\t\t} // Buscar en el stylesheet\n\t\t\t} // Tiene CSS\n\t\t\t// Cachear idicando que no hay valor.\n\t\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t\t// O11110801: Cache multinivel para las propiedades de nodos XML para acelerar la bsqueda.\n\t\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\t\tif (cache != null) {\n\t\t\t\t// Tiene cache\n\t\t\t\t//synchronized (cache)\n\t\t\t\t{\n\t\t\t\t\tcache.put(AttrName, Utils.EMPTY_STRING);\n\t\t\t\t}\n\t\t\t} // Tiene cache\n\t\t\t// F13022109: No devolver nulos cuando los atributos no existen o tienen cadenas vacas.\n\t\t\t// No es lo mismo cadena vaca que NULL\n\t\t\treturn Utils.EMPTY_STRING;\n\t\t} // Tiene la propiedad\n\t\t// De lo contrario tenemos que ver si es una coleccin heredada, y llamar a la del padre\n\t\telse if (!StringUtils.IsEmptyString(this.Options.strParentCollection)) {\n\t\t\t// Supuestamente tiene padre\n\t\t\tif (this.getParentCollection() == null) {\n\t\t\t\t// Error\n\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t////throw new XoneGenericException(-17171, \"CXoneDataCollection::GroupPropertyValue ha fallado en la coleccin '\" + m_strName + \"'. La coleccin padre ('\" + m_strParentCollection + \"') no se puede obtener.\");\n\t\t\t\tlet str = this.m_messages.GetMessage(\n\t\t\t\t\tXoneMessageKeys.SYS_MSG_COLL_XPROPVALUEFAIL,\n\t\t\t\t\t\"{0} failed for collection '{1}'. Cannot get parent collection '{2}'\"\n\t\t\t\t);\n\t\t\t\tstr = str.replace(\"{0}\", \"CXoneDataCollection::GroupPropertyValue\");\n\t\t\t\tstr = str.replace(\"{1}\", this.m_strName);\n\t\t\t\tstr = str.replace(\"{2}\", this.Options.strParentCollection);\n\t\t\t\tthrow new XoneGenericException(-17171, str);\n\t\t\t} // Error\n\t\t\treturn this.getParentCollection().GroupPropertyValue(GroupId, AttrName);\n\t\t} // Supuestamente tiene padre\n\t\t// De lo contrario nanai...\n\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t// Indicar que no hay valor y cachear...\n\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t// O11110801: Cache multinivel para las propiedades de nodos XML para acelerar la bsqueda.\n\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\tif (cache != null) {\n\t\t\t// Tiene cache\n\t\t\t//synchronized (cache)\n\t\t\t{\n\t\t\t\tcache.put(AttrName, Utils.EMPTY_STRING);\n\t\t\t}\n\t\t} // Tiene cache\n\t\t// F13022109: No devolver nulos cuando los atributos no existen o tienen cadenas vacas.\n\t\t// No es lo mismo cadena vaca que NULL\n\t\treturn Utils.EMPTY_STRING;\n\t}\n\n\tpublic CollPropertyValue(AttrName: string) {\n\t\tlet str = \"\";\n\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t// Para los CSS\n\t\t// O11081101: Optimizar las estructuras de datos de las caches de atributos inexistentes.\n\t\tconst ncache = this.m_ownerApp.GetCollPropUndefinedValues(this.m_strName);\n\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\tif (ncache != null) if (ncache.contains(AttrName)) return str; // Cadena vaca.\n\t\tconst cache = this.m_ownerApp.GetCollPropValueCache(this.m_strName);\n\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\tif (cache != null) if (cache.containsKey(AttrName)) return cache.get(AttrName);\n\t\t// A11120701: Mecanismo para exponer el DBMS de una conexin.\n\t\t// Si es un tipo reservado atenderlo\n\t\tif (AttrName.equals(\"##DBMS##\")) return this.BrowseData.getConnection().getDbmsTag();\n\t\t// Primero nos hacemos con el platform\n\t\tconst strPlatform = this.m_ownerApp.getPlatform();\n\t\tif (!StringUtils.IsEmptyString(strPlatform)) {\n\t\t\t// Ver si hay nodo platform en la coleccin\n\t\t\tlet nd = null;\n\t\t\tif (this.m_cachePlatformNodes.containsKey(strPlatform)) nd = this.m_cachePlatformNodes.get(strPlatform);\n\t\t\telse {\n\t\t\t\tthis.m_cachePlatformNodes.put(strPlatform, (nd = this.m_xmlNode.SelectSingleNode(\"platform\", \"name\", strPlatform)));\n\t\t\t}\n\t\t\tif (nd != null) str = nd.getAttrValue(AttrName);\n\t\t} // Ver si hay nodo platform en la coleccin\n\t\tif (StringUtils.IsEmptyString(str)) str = XmlUtils.getNodeAttr(this.m_xmlNode, AttrName);\n\t\t// Cachear el valor que sea para no tener que montar esta despus...\n\t\tif (StringUtils.IsEmptyString(str)) {\n\t\t\t// Ver si hay CSS\n\t\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t\t// Comprobar si hay hojas de estilo para hacer bsquedas...\n\t\t\tif (this.m_ownerApp.hasStylesheets()) {\n\t\t\t\t// Tiene CSS\n\t\t\t\tlet css: XoneCssRule = null;\n\t\t\t\tlet strClass = this.m_xmlNode.getAttrValue(\"class\");\n\t\t\t\tif (!StringUtils.IsEmptyString(strClass)) {\n\t\t\t\t\t// Buscar por clase\n\t\t\t\t\tif (null == (css = this.m_ownerApp.FindStylesheetByClassName(\"coll.\" + strClass, AttrName)))\n\t\t\t\t\t\tcss = this.m_ownerApp.FindStylesheetByClassName(\".\" + strClass, AttrName);\n\t\t\t\t} // Buscar por clase\n\t\t\t\telse css = this.m_ownerApp.FindStylesheetByClassName(\"coll\", AttrName);\n\t\t\t\tif (css != null) {\n\t\t\t\t\t// Buscar en el stylesheet\n\t\t\t\t\tlet strTmp = css.getRuleValue(AttrName);\n\t\t\t\t\tif (!StringUtils.IsEmptyString(strTmp)) {\n\t\t\t\t\t\t// Anda\n\t\t\t\t\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t\t\t\t\tif (cache != null) cache.put(AttrName, strTmp);\n\t\t\t\t\t\treturn strTmp;\n\t\t\t\t\t} // Anda\n\t\t\t\t} // Buscar en el stylesheet\n\t\t\t} // Tiene CSS\n\t\t\ttry {\n\t\t\t\tif (!StringUtils.IsEmptyString(this.Options.strParentCollection)) {\n\t\t\t\t\t// Supuestamente tiene padre\n\t\t\t\t\tif (this.getParentCollection() == null) {\n\t\t\t\t\t\t// Error\n\t\t\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t\t\t//String str = m_messages.GetMessage(XoneMessageKeys.SYS_MSG_COLL_XPROPVALUEFAIL, \"{0} failed for collection '{1}'. Cannot get parent collection '{2}'.\");\n\t\t\t\t\t\t//str = str.replace(\"{0}\", \"CXoneDataCollection::NodePropertyValue\");\n\t\t\t\t\t\t//str = str.replace(\"{1}\", m_strName);\n\t\t\t\t\t\t//str = str.replace(\"{2}\", m_strParentCollection);\n\t\t\t\t\t\t//throw new XoneGenericException(-17171, str);\n\t\t\t\t\t} // Error\n\t\t\t\t\telse {\n\t\t\t\t\t\t////throw new XoneGenericException(-17171, \"CXoneDataCollection::FieldPropertyValue ha fallado en la coleccin '\" + m_strName + \"'. La coleccin padre ('\" + m_strParentCollection + \"') no se puede obtener.\");\n\t\t\t\t\t\treturn this.getParentCollection().CollPropertyValue(AttrName);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (ee) {\n\t\t\t\tconsole.error(ee);\n\t\t\t}\n\t\t\t// Finalmente no tenemos nada...\n\t\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t\t// if (ncache !=null)\n\t\t\t// \tncache.add(AttrName);\n\t\t\tstr = \"\";\n\t\t} // Propiedad que no est\n\t\telse {\n\t\t\t// Est\n\t\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\t\t// if (cache !=null)\n\t\t\t// \tcache.put(AttrName, str);\n\t\t} // Est\n\t\treturn str;\n\t}\n\n\tpublic async getFirstParentCollection(): Promise<XoneDataCollection> {\n\t\t// Directamente, si ya est cargada, la cargamos aqu...\n\t\tif (this.m_parent != null) return this.m_parent;\n\t\t// Si no tiene coleccin padre, NULL\n\t\tif (StringUtils.IsEmptyString(this.Options.strParentCollection)) return null;\n\t\t// De lo contrario trataremos de buscar el propietario...\n\t\tif (this.m_strName.equals(this.Options.strParentCollection))\n\t\t\tthrow new XoneGenericException(\n\t\t\t\t-2322,\n\t\t\t\t\"CXoneDataCollection::ParentCollection has failed for collection \" + this.m_strName + \". Cannot define a parent collection as its own.\"\n\t\t\t);\n\t\t// Cargar la coleccin\n\t\treturn await this.m_ownerApp.getCollection(this.Options.strParentCollection);\n\t}\n\n\tpublic getParentCollection(): XoneDataCollection {\n\t\t// Directamente, si ya est cargada, la cargamos aqu...\n\t\t//     if (this.m_parent != null) return this.m_parent;\n\t\t//      // Si no tiene coleccin padre, NULL\n\t\t//      if (StringUtils.IsEmptyString(this.Options.strParentCollection))\n\t\t//      return null;\n\t\t//  // De lo contrario trataremos de buscar el propietario...\n\t\t//     if (this.m_strName.equals(this.Options.strParentCollection))\n\t\t//         throw new XoneGenericException(-2322, \"CXoneDataCollection::ParentCollection has failed for collection \" + this.m_strName + \". Cannot define a parent collection as its own.\");\n\t\t//     // Cargar la coleccin\n\t\t//     this.m_parent = await this.m_ownerApp.getCollection(this.Options.strParentCollection);\n\t\treturn this.m_parent;\n\t}\n\n\tExtractConnections(): boolean {\n\t\tlet xl = this.m_xmlNode.SelectNodes(\"connection\") as XmlNodeList;\n\t\t// Buscar cada conexin\n\t\tfor (let i = 0; i < xl.count(); i++) {\n\t\t\t// Cargar los datos de cada conexin\n\t\t\tlet xn = xl.get(i);\n\t\t\t// F12051401: Cuando se extraen las conexiones de una coleccin se pueden repetir.\n\t\t\t// Las conexiones solo las creamos si hace falta, claro est\n\t\t\tconst strName = xn.getAttrValue(\"name\");\n\t\t\tif (!StringUtils.IsEmptyString(strName)) {\n\t\t\t\t// Solo las creamos si tienen nombre\n\t\t\t\tif (this.m_ownerApp.getConnection(strName) == null) {\n\t\t\t\t\t// La creamos\n\t\t\t\t\tif (!this.m_ownerApp.LoadConnection(xn)) return false;\n\t\t\t\t} // La creamos\n\t\t\t} // Solo las creamos si tienen nombre\n\t\t} // Cargar los datos de cada conexin\n\t\treturn true;\n\t}\n\n\tpublic GetNodeList(NodeName: string, AttrName?: string, AttrValue?: string, Exist?: boolean): XmlNodeList {\n\t\treturn this.getNodeList(NodeName, AttrName, AttrValue, Exist);\n\t}\n\n\tpublic getNodeList(NodeName: string, AttrName?: string, AttrValue?: string, Exist?: boolean): XmlNodeList {\n\t\t// SI no hay nodo... nanai...\n\t\tif (this.m_xmlNode == null) return null;\n\t\treturn this.m_xmlNode.SelectNodes(NodeName, AttrName, AttrValue, Exist);\n\t}\n\n\t/**\n\t * @param NodeName\t\tNombre del nodo que se quiere buscar.\n\t * @param AttrName\t\tNombre del atributo que se quiere comparar.\n\t * @param AttrValue\t\tValor que tiene que tener el atributo para reconocer un nodo como vlido.\n\t * @return\t\t\t\tDevuelve un nodo XML dentro del nodo de esta coleccin con un atributo cuyo valor se solicita.\n\t */\n\tpublic GetNode(NodeName: string, AttrName?: string, AttrValue?: string): XmlNode {\n\t\treturn this.getNode(NodeName, AttrName, AttrValue);\n\t}\n\n\tpublic getNode(NodeName: string, AttrName?: string, AttrValue?: string): XmlNode {\n\t\t// No tiene nodo, no hacemos nada\n\t\tif (this.m_xmlNode == null) return null;\n\t\t// A15091003\n\t\tlet node = this.m_xmlNode.SelectSingleNode(NodeName, AttrName, AttrValue);\n\t\tif (node == null) {\n\t\t\t// De lo contrario tenemos que ver si es una coleccin heredada, y llamar a la del padre\n\t\t\tif (!StringUtils.IsEmptyString(this.m_options.strParentCollection)) {\n\t\t\t\t// Supuestamente tiene padre\n\t\t\t\ttry {\n\t\t\t\t\tlet parentCollection = this.getParentCollection();\n\t\t\t\t\tif (parentCollection != null) {\n\t\t\t\t\t\t// Error\n\t\t\t\t\t\tnode = parentCollection.getNode(NodeName, AttrName, AttrValue);\n\t\t\t\t\t} // Error\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t} // Supuestamente tiene padre\n\t\t}\n\t\treturn node;\n\t}\n\n\tpublic getNodeAttr(NodeName: string, AttrName: string): string {\n\t\t// No tiene nodo, no hacemos nada\n\t\tif (this.m_xmlNode == null) return null;\n\t\t// A15091003\n\t\tlet node = this.getNode(NodeName);\n\t\tif (node == null) {\n\t\t\t// De lo contrario tenemos que ver si es una coleccin heredada, y llamar a la del padre\n\t\t\tif (!StringUtils.IsEmptyString(this.m_options.strParentCollection)) {\n\t\t\t\t// Supuestamente tiene padre\n\t\t\t\ttry {\n\t\t\t\t\tlet parentCollection = this.getParentCollection();\n\t\t\t\t\tif (parentCollection != null) {\n\t\t\t\t\t\t// Error\n\t\t\t\t\t\tnode = parentCollection.getNode(NodeName);\n\t\t\t\t\t} // Error\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t} // Supuestamente tiene padre\n\t\t}\n\t\tif (node == null) return null;\n\t\tlet attrValue = node.getAttrValue(AttrName);\n\t\tif (attrValue == null && !StringUtils.IsEmptyString(this.m_options.strParentCollection)) {\n\t\t\t// Supuestamente tiene padre\n\t\t\ttry {\n\t\t\t\tlet parentCollection = this.getParentCollection();\n\t\t\t\tif (parentCollection != null) {\n\t\t\t\t\t// Error\n\t\t\t\t\tattrValue = parentCollection.getNodeAttr(NodeName, AttrName);\n\t\t\t\t} // Error\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t} // Supuestamente tiene padre\n\t\treturn attrValue;\n\t}\n\n\tasync Load(): Promise<boolean> {\n\t\t// Si no hay nodo XML se trata de una coleccin intermedia que no lleva plantilla\n\t\tif (this.m_xmlNode === null) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// // Si la coleccin no tiene nombre nos explotamos...\n\t\t// // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t// if (\n\t\t//     StringUtils.IsEmptyString(\n\t\t//         (this.m_strName = this.m_xmlNode.getAttrValue(\"name\"))\n\t\t//     )\n\t\t// )\n\t\t//     ////throw new Exception(\"No se puede crear una coleccin sin nombre o con nombre vaco.\");\n\t\t//     throw new Exception(\n\t\t//         this.m_messages.GetMessage(\n\t\t//             XoneMessageKeys.SYS_MSG_COLL_NONAME,\n\t\t//             \"Cannot create a collection with an empty name.\"\n\t\t//         )\n\t\t//     );\n\t\t// Obtener la declaracin de conexiones que haya en la coleccin\n\t\tlet str: string;\n\t\tif (!this.ExtractConnections()) {\n\t\t\tUtils.DebugLog(Utils.TAG_FRAMEWORK, \"DataCollection.Load(): Cannot extract connections from collection \" + this.m_xmlNode);\n\t\t\treturn false;\n\t\t}\n\t\t// Leer otras cosas del nodo XML para tenerlas ya en variables antes de usarlas...\n\t\t// Booleanas\n\t\tthis.m_options.bLoadLayouts = StringUtils.ParseBoolValue(this.CollPropertyValue(\"load-layouts\"), true);\n\t\t// K11092602: Modificaciones para trabajar con conexiones online puras.\n\t\t// Obtener el valor de atributo que indica si la coleccin es indexada...\n\t\tthis.m_options.bisIndexed = StringUtils.ParseBoolValue((str = this.CollPropertyValue(\"indexed\")), false);\n\t\tthis.m_options.bCheckOwner = StringUtils.ParseBoolValue((str = this.CollPropertyValue(\"check-owner\")), false);\n\t\tthis.m_options.bIsSpecial = StringUtils.ParseBoolValue((str = this.CollPropertyValue(\"special\")), false);\n\t\tthis.m_options.bStringPk = StringUtils.ParseBoolValue((str = this.CollPropertyValue(\"stringkey\")), false);\n\t\tthis.m_options.bObjLoadAll = StringUtils.ParseBoolValue((str = this.CollPropertyValue(\"obj-loadall\")), true);\n\t\tthis.m_options.bVolatile = StringUtils.ParseBoolValue(this.CollPropertyValue(\"volatile\"), false);\n\t\t// En esta plataforma tendremos carga diferida por defecto\n\t\tthis.m_options.bDeferredLoad = StringUtils.ParseBoolValue(this.CollPropertyValue(\"deferred-load\"), true);\n\t\tthis.m_options.bDebug = StringUtils.ParseBoolValue(this.CollPropertyValue(\"sql-debug\"), false);\n\t\t// En esta plataforma tendremos por defecto que no se soportan subqueries.\n\t\tthis.m_options.bUseRaw = StringUtils.ParseBoolValue((str = this.CollPropertyValue(\"userawsql\")), true);\n\t\tif (StringUtils.IsEmptyString(str)) {\n\t\t\t// Si UseRaw no est definido en la coleccin tenemos que sacarlo del DBMS\n\t\t\tif (this.BrowseData.getConnection() != null) {\n\t\t\t\t// Sacar el dato de los subqueries de all\n\t\t\t\tthis.m_options.bUseRaw = !this.BrowseData.getConnection().getSubqueries();\n\t\t\t} // Sacar el dato de los subqueries de all\n\t\t} // Si UseRaw no est definido en la coleccin tenemos que sacarlo del DBMS\n\t\t// TAG 3010201501 Permitir usar el atributo sql sin parsearlo. Ojo si se sustituyen las macros\n\t\tthis.m_options.bParseSQL = StringUtils.ParseBoolValue(this.CollPropertyValue(\"sql-parser\"), true);\n\t\t// Cadenillas\n\t\tthis.m_strPk = \"ID\";\n\t\tif (!StringUtils.IsEmptyString((str = this.CollPropertyValue(\"idfieldname\")))) {\n\t\t\t// Guardar el nombre del campo clave\n\t\t\tthis.m_strPk = str;\n\t\t\t// K11010501:\tModificaciones para la versin 1.5 de Android.\n\t\t\tthis.m_options.nPkType = StringUtils.ParseBoolValue(this.CollPropertyValue(\"stringkey\"), false) ? 1 : 0;\n\t\t\t// Comprobar si se trata de una clave mltiple\n\t\t\tif (this.m_strPk.contains(\",\")) {\n\t\t\t\t// Indicar que tenemos varias claves y separarlas\n\t\t\t\tthis.m_options.bMultipleKey = true;\n\t\t\t} // Indicar que tenemos varias claves y separarlas\n\t\t} // Guardar el nombre del campo clave\n\t\tif (!StringUtils.IsEmptyString((str = this.CollPropertyValue(\"object-prefix\")))) this.m_options.strPrefix = str;\n\t\t// Sacar los filtros\n\t\tthis.m_strLinkFilter = this.CollPropertyValue(\"filter\");\n\t\tthis.m_strSort = this.CollPropertyValue(\"sort\");\n\t\tthis.m_options.strLookupMacroName = this.CollPropertyValue(\"lookup-macro\");\n\t\t// SQL de la coleccin\n\t\tthis.m_options.strAccessString = this.CollPropertyValue(\"sql\");\n\t\tif (!StringUtils.IsEmptyString(this.m_options.strAccessString)) this.m_options.bSingleObject = this.m_options.strAccessString.indexOf(\" \") == -1;\n\t\t// ProgId\n\t\tthis.m_options.strProgId = this.CollPropertyValue(\"progid\");\n\t\tthis.m_options.strClassName = this.CollPropertyValue(\"classname\");\n\t\tthis.m_options.strParentCollection = this.CollPropertyValue(\"inherits\");\n\t\t// *\n\t\t//  * TODO 02/10/2018\n\t\t//  * Si una coleccin se define a s misma como padre, ignorarlo.\n\t\t//  *\n\t\tif (!TextUtils.isEmpty(this.m_options.strParentCollection) && this.m_options.strParentCollection.equals(this.m_xmlNode.getName())) {\n\t\t\tthis.m_options.strParentCollection = Utils.EMPTY_STRING;\n\t\t}\n\t\t// Si no tiene coleccin padre, NULL\n\t\tif (!StringUtils.IsEmptyString(this.m_options.strParentCollection)) {\n\t\t\t// De lo contrario trataremos de buscar el propietario...\n\t\t\tif (!StringUtils.areEquals(this.m_strName, this.m_options.strParentCollection)) {\n\t\t\t\t// throw new XoneGenericException(\n\t\t\t\t//     -2322,\n\t\t\t\t//     \"CXoneDataCollection::ParentCollection has failed for collection \" +\n\t\t\t\t//     this.m_strName +\n\t\t\t\t//     \". Cannot define a parent collection as its own.\"\n\t\t\t\t// );\n\t\t\t\t// Cargar la coleccin\n\t\t\t\tthis.m_parent = await this.getFirstParentCollection();\n\t\t\t\t// this.m_parent = await this.m_ownerApp.getCollection(\n\t\t\t\t//     this.m_options.strParentCollection\n\t\t\t\t// );\n\t\t\t}\n\t\t}\n\t\t// threshold\n\t\tif (!StringUtils.IsEmptyString((str = this.CollPropertyValue(\"threshold\")))) this.m_options.nThreshold = NumberUtils.SafeToInt(str);\n\t\tif (!StringUtils.IsEmptyString((str = this.CollPropertyValue(\"maxrows\")))) this.m_options.nMaxRows = NumberUtils.SafeToInt(str);\n\t\tthis.m_options.strObjectName = this.CollPropertyValue(\"objname\");\n\t\t// F11112404: La coleccin que no tenga objectname debera usar un valor por defecto.\n\t\tif (StringUtils.IsEmptyString(this.m_options.strObjectName)) {\n\t\t\t// Puede ser un error\n\t\t\tif (!this.m_options.bIsSpecial) {\n\t\t\t\t// Error\n\t\t\t\tthis.m_options.strObjectName = this.m_xmlNode.getName();\n\t\t\t} // Error\n\t\t} // Puede ser un error\n\t\tthis.m_options.strUpdateObject = this.CollPropertyValue(\"updateobj\");\n\t\t// De otra naturaleza...\n\t\t// Comprobar si tiene propiedades xlat\n\t\tif (this.getParentCollection() != null) this.m_options.bHasXlatProps = false; // this.getParentCollection().getHasXlatProperties ();\n\t\tif (!this.m_options.bHasXlatProps) {\n\t\t\t// Leerlo de las propiedades locales\n\t\t\tconst list = this.getNodeList(\"prop\", \"xlat\", null, true);\n\t\t\tif (list.count() > 0) this.m_options.bHasXlatProps = true;\n\t\t} // Leerlo de las propiedades locales\n\t\t// O12050702: Optimizacin al gestionas los campos que son de frmula o bit.\n\t\t// Guarda las propiedades que son frmulas o bits...\n\t\tlet lst = this.m_xmlNode.SelectNodes(\"prop\", \"formula\", Utils.EMPTY_STRING, true);\n\t\tfor (let i = 0; i < lst.count(); i++) {\n\t\t\t// Copiar\n\t\t\tlet node = lst.get(i);\n\t\t\tthis.m_lstFormulaProps.push(node.getAttrValue(\"name\"));\n\t\t} // Copiar\n\t\tlst = this.m_xmlNode.SelectNodes(\"prop\", \"bit\", Utils.EMPTY_STRING, true);\n\t\tfor (let i = 0; i < lst.count(); i++) {\n\t\t\t// Copiar\n\t\t\tlet node = lst.get(i);\n\t\t\tthis.m_lstBitProps.push(node.getAttrValue(\"name\"));\n\t\t} // Copiar\n\n\t\t// TODO ADD TAG 29/03/2016 Juan Carlos Implementacion de nodos include-layout\n\t\t//LoadIncludeLayoutNodes();\n\n\t\t// A12122701: Sistema para gestionar la estructura lgica de vistas en la maquinaria.\n\t\t// Lanzar una tarea en segundo plano para armar el layout de la coleccin...\n\t\t// TODO ADD TAG\n\t\t// Estas cosas solo hay que hacerlas si hace falta y est autorizado\n\t\t// if (LoadLayouts())\n\t\t// {// Lo soporta\n\t\t//     if (m_layout == null)\n\t\t//     {// All va eso\n\t\t//         // Lo creamos por aquello de que no sea nulo...\n\t\t//         m_layout = new XoneViewLayoutV2();\n\t\t//         // O13061301: Carajal de optimizaciones de todo tipo en maquinaria y dems.\n\t\t//         // Mover esto pac para hacerlo en segundo plano...\n\t\t//         // F13022104: El acceso a las frmulas de visibilidad de campos debe ser concurrente.\n\t\t//         // Recolecta las propiedades en una lista que podamos usar para PropertyCount y dems.\n\t\t//         // Evita que se llame esta funcin en entornos concurrentes que puedan traer explotes.\n\t\t//         CollectCollProperties();\n\t\t//         // Nos creamos el layout de todas las propiedades... que sean visibles, claro\n\t\t//         m_layout.build(this, -1);\n\t\t//         // A13022107: Mecanismo para gestionar el ColorView de manera abstracta desde la maquinaria.\n\t\t//         // Poner el colorview...\n\t\t//         m_layout.setColorViewField (m_strColorViewField);\n\t\t//         // A13030601: Gestin de campos especiales en el modelo de Views de la maquinaria.\n\t\t//         // Campos de inicio y fin de rango de fechas.\n\t\t//         m_layout.DateFromField = m_strDateFromField;\n\t\t//         m_layout.DateToField = m_strDateToField;\n\t\t//         // Adicionar los campos que son subject...\n\t\t//         for (int i =0;i <m_lstProperties.count();i++)\n\t\t//         {// Si es subject adicionamos\n\t\t//             XmlNode n =m_lstProperties.get(i);\n\t\t//             if (StringUtils.ParseBoolValue(n.getAttrValue(\"subject\"), false))\n\t\t//                 m_layout.AddSubjectField(n.getAttrValue(Utils.PROP_ATTR_NAME));\n\t\t//         }// Si es subject adicionamos\n\t\t//     }// All va eso\n\t\t// }// Lo soporta\n\t\t// else\n\t\t// {// No lo soporta\n\t\t//     // Recolecta las propiedades en una lista que podamos usar para PropertyCount y dems.\n\t\t//     // Evita que se llame esta funcin en entornos concurrentes que puedan traer explotes.\n\t\t// \tif (!m_bPropsCollected)\n\t\t// \t\tCollectCollProperties();\n\t\t// }// No lo soporta\n\t\t// TAG 2710201502 Cuando se terminade cargar la coleccion\n\t\t// cargar su sincludes, ahora en el scope principal mas adelante veremos\n\t\t// LoadIncludeFiles();\n\t\treturn true;\n\t}\n\n\tpublic get BitProps() {\n\t\treturn this.m_lstBitProps;\n\t}\n\n\tpublic get FormulaProps() {\n\t\treturn this.m_lstFormulaProps;\n\t}\n\n\tgetIsDebugging(): boolean {\n\t\treturn this.Options.bDebug;\n\t}\n\n\t//#region Obtener objetos de la coleccion\n\n\tpublic getLocalObject(FieldName: string | number | Object, FieldValue: Object = null) {\n\t\treturn this.BrowseData.GetLocalObject(FieldName, FieldValue);\n\t}\n\n\tpublic async get(FieldName: string | number | Object, FieldValue: Object = null): Promise<XoneDataObject> {\n\t\treturn this.getObject(FieldName, FieldValue);\n\t}\n\n\tpublic async getObject(\n\t\tFieldName: string | number | Object,\n\t\tFieldValue?: Object,\n\t\tUseFilters: boolean = true,\n\t\tSearchDb: boolean = true\n\t): Promise<XoneDataObject> {\n\t\treturn this.BrowseData.GetObject(FieldName, FieldValue, UseFilters, SearchDb);\n\t}\n\n\tpublic async findObject(SearchCriteria: string): Promise<XoneDataObject> {\n\t\treturn await this.BrowseData.findObject(SearchCriteria);\n\t}\n\t/**\n\t * Genera un ROWID a partir de los datos de rplica y tablas de esta coleccin\n\t * @return\t\t\tDevuelve un nuevo ROWID para la tabla a que pertenece esta coleccin.\n\t */\n\tpublic GenerateRowId(): string {\n\t\treturn this.getConnection().GenerateRowId(this.getFixedObjectName());\n\t}\n\n\t/**\n\t * TRUE si el valor que se pasa como parmetro es un ROWID nico (no existe en la tabla afectada ningn registro con este ROWID)\n\t * @param RowId\t\t\t\tValor de ROWID que se quiere comprobar en la tabla de esta coleccin.\n\t * @return\t\t\t\t\tDevuelve TRUE si el ROWID no existe en la tabla (se puede usar para un nuevo registro.)\n\t * @throws Exception\n\t */\n\tpublic IsUniqueRowId(RowId: string): boolean {\n\t\t// A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n\t\t// El trabajo debera hacerlo la conexin y no nosotros...\n\t\treturn this.getConnection().isUniqueRowID(this.getFixedObjectName(), RowId);\n\t}\n\n\t/**\n\t * @return\t\t\tDevuelve el nombre del campo ROWID usado por esta coleccin.\n\t */\n\tpublic getRowIdFieldName(): string {\n\t\treturn this.getConnection().getRowIdFieldName();\n\t}\n\n\t/**\n\t * @return\t\t\tDevuelve el nombre del objeto en la fuente de datos ya con el prefijo sustituido y dems.\n\t */\n\tpublic getFixedObjectName(): string {\n\t\treturn this.getFixedUpdateObjectName();\n\t}\n\n\tpublic getFixedUpdateObjectName(): string {\n\t\treturn this.getConnection().FixObjectName(this.getObjectName());\n\t}\n\n\tpublic MapField(FieldName: string, DatabaseField: boolean = false): string {\n\t\treturn this.BrowseData.MapField(FieldName, DatabaseField);\n\t}\n\n\tpublic async GetResultSet(FieldName: string, FieldValue: any): Promise<IResultSet> {\n\t\treturn await this.BrowseData.GetResultSet(FieldName, FieldValue);\n\t}\n\n\tpublic DevelopObjectValue(Value: any, ForceNulls: boolean = true): string {\n\t\treturn this.BrowseData.DevelopObjectValue(Value, ForceNulls);\n\t}\n\tpublic getObjectName(): string {\n\t\treturn this.Options.strObjectName;\n\t}\n\n\t/**\n\t * Adiciona un objeto a la coleccin\n\t * @param Item\t\t\tObjeto de datos que se va a adicionar a la coleccin.\n\t * @param Index\t\t\tIndice en el cual se quiere insertar el objeto. Si es mayor que la cantidad de elementos lo inserta al final.\n\t * @return\t\t\t\tDevuelve TRUE si se ha insertado el objeto correctamente.\n\t * @throws Exception\n\t */\n\tpublic addItem(Item: XoneDataObject, Index: number = -1): boolean {\n\t\treturn this.BrowseData.AddItem(Item, Index);\n\t}\n\n\t//#endregion\n\n\t/**\n\t * TRUE si el campo cuyo nombre se indica es un campo enlazado (tiene mapcol)\n\t * @param FieldName\t\t\tNombre del campo que se quiere comprobar.\n\t * @return\t\t\t\t\tDevuelve TRUE si el campo es enlazado de verdad.\n\t */\n\tpublic IsLinkedField(FieldName: string): boolean {\n\t\ttry {\n\t\t\t// Ver si tiene mapcol.\n\t\t\tif (StringUtils.IsEmptyString(this.FieldPropertyValue(FieldName, \"mapcol\"))) return false;\n\t\t\t// Ver si tiene mapfld\n\t\t\tif (StringUtils.IsEmptyString(this.FieldPropertyValue(FieldName, \"mapfld\"))) return false;\n\t\t\t// OK\n\t\t\treturn true;\n\t\t} catch (e) {\n\t\t\t// Las excepciones nos cagamos en ellas\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tpublic getIdFieldName(): string {\n\t\treturn this.m_strPk;\n\t}\n\n\t/**\n\t * K11010501:\tModificaciones para la versin 1.5 de Android.\n\t * @return\n\t */\n\tpublic getIdFieldType(): number {\n\t\treturn this.m_nPkType;\n\t}\n\n\tpublic getAccessString(): string {\n\t\treturn this.m_options.strAccessString;\n\t\t// Si no tiene ningn caracter de macro, no tenemos que sustituir nada...\n\t\t// if (!EvalMacros || !str.contains(\"##\")) return str;\n\t\t// return await this.m_macrosEvaluator.EvaluateAllMacros(str);\n\t}\n\n\t// public setAccessString(value: string) { this.m_options.strAccessString = value; }\n\n\tpublic get accessString(): string {\n\t\treturn this.m_options.strAccessString;\n\t}\n\n\tgetCollPropertyValue(propiedad: string) {\n\t\treturn this.CollPropertyValue(propiedad);\n\t}\n\n\t/**\n\t * @return\t\t\tDevuelve TRUE si el campo clave principal de la coleccin es de tipo texto.\n\t */\n\tpublic getStringKey(): boolean {\n\t\treturn this.m_options.bStringPk;\n\t}\n\n\tpublic getLookupMacroName() {\n\t\treturn this.m_options.strLookupMacroName;\n\t}\n\n\tpublic async EvaluateAllMacros(Sentence: string, EvalLookupMacro: boolean = false): Promise<string> {\n\t\treturn await this.m_macrosEvaluator.EvaluateAllMacros(Sentence, EvalLookupMacro);\n\t}\n\n\t/**\n\t * @param sVariableName Nombre de la variable cuyo valor se quiere leer.\n\t * @return Devuelve la variable cuyo nombre se pasa como parmetro. Si la variable no existe devuelve NULL.\n\t */\n\n\tprivate SafeGetVariableList(): Hashtable<string, Object> {\n\t\tif (this.m_lstVariables != null) return this.m_lstVariables;\n\t\treturn (this.m_lstVariables = new Hashtable<string, Object>());\n\t}\n\n\tpublic getVariables(sVariableName: string): Object {\n\t\treturn this.getVariable(sVariableName);\n\t}\n\n\tpublic getVariable(sVariableName: string): Object {\n\t\tif (!this.SafeGetVariableList().containsKey(sVariableName)) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.SafeGetVariableList().get(sVariableName);\n\t}\n\n\t/**\n\t * Asigna valor a la variable cuyo nombre se pasa como parmetro.\n\t * K11011201:\tModificaciones en el tratamiento de las variables.\n\t * Poner esto pblico\n\t *\n\t * @param sVariableName Nombre de la variable que se quiere asignar.\n\t * @param value         Valor que se quiere asignar a la variable.\n\t */\n\tpublic setVariables(sVariableName: string, value: Object): void {\n\t\tthis.setVariable(sVariableName, value);\n\t}\n\n\t/**\n\t * Asigna valor a la variable cuyo nombre se pasa como parmetro.\n\t * K11011201:\tModificaciones en el tratamiento de las variables.\n\t * Poner esto pblico\n\t *\n\t * @param sVariableName Nombre de la variable que se quiere asignar.\n\t * @param value         Valor que se quiere asignar a la variable.\n\t */\n\n\tpublic setVariable(sVariableName: string, value: Object): void {\n\t\t// F12042505: Si se pasa NULL a SetVariables hay moa con las listas de valores.\n\t\tif (value == null) {\n\t\t\tif (this.SafeGetVariableList().containsKey(sVariableName)) {\n\t\t\t\tthis.SafeGetVariableList().delete(sVariableName);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.SafeGetVariableList().put(sVariableName, value);\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @param AccessString\n\t */\n\tpublic ParseMacros(AccessString: string): void {\n\t\t// if (!this.m_lstMacros.containsKey(MacroName)) return null;\n\t\t// return this.m_lstMacros.get(MacroName);\n\t\tthis.m_macrosEvaluator.ParseMacros(AccessString);\n\t}\n\n\t/**\n\t * @return\t\t\t\tDevuelve el valor de la macro cuyo nombre se pasa como parmetro.\n\t * @param MacroName\t\tNombre de la macro cuyo valor se quiere conocer\n\t */\n\tpublic getMacro(MacroName: string): string {\n\t\t// if (!this.m_lstMacros.containsKey(MacroName)) return null;\n\t\t// return this.m_lstMacros.get(MacroName);\n\t\treturn this.m_macrosEvaluator.getMacro(MacroName);\n\t}\n\n\t/**\n\t * @return\t\t\t\tDevuelve el valor de la macro cuyo nombre se pasa como parmetro.\n\t * @param MacroName\t\tNombre de la macro cuyo valor se quiere conocer\n\t */\n\tpublic getMacros(): object {\n\t\t// if (!this.m_lstMacros.containsKey(MacroName)) return null;\n\t\t// return this.m_lstMacros.get(MacroName);\n\t\t// return this.m_macrosEvaluator.getMacros();\n\n\t\t// Amiyares 13/08/2021, agrego resolucin de macros\n        const macros = this.m_macrosEvaluator.getMacros();\n        Object.entries(macros).forEach(([key, value]) => macros[key] = this.BrowseData.PrepareSqlString(value));\n        return macros;\n\t}\n\n\t/**\n\t * Asigna valor a la macro cuyo nombre se pasa como parmetro.\n\t * @param MacroName\t\tNombre de la macro que se quiere asignar.\n\t * @param MacroValue\tValor que se quiere asignar a la macro. Si se pasa NULL se sustituir por cadena vaca.\n\t */\n\tpublic setMacro(MacroName: string, MacroValue: string) {\n\t\t// let value = MacroValue;\n\t\t// if (value == null) value = \"\";\n\t\tthis.m_macrosEvaluator.setMacro(MacroName, MacroValue); //.m_lstMacros.put(MacroName, value);\n\t\t// F10051901:   Cuando se modifican macros hay que descartar el SQL parseado.\n\t\t// Invalidar el sql parseado\n\t\t// if (this.accessString != null)\n\t\t//     if (this.accessString.contains(MacroName))\n\t\t//         this.BrowseData.clearParsedAccessString();\n\t}\n\n\tpublic get strPk(): string {\n\t\treturn this.m_strPk;\n\t}\n\tpublic set strPk(value: string) {\n\t\tthis.m_strPk = value;\n\t}\n\n\tpublic GetMessage(sKey: string, sDefault: string): string {\n\t\treturn this.m_messages.GetMessage(sKey, sDefault);\n\t}\n\n\tpublic get Options(): DataCollectionOptions {\n\t\treturn this.m_options;\n\t}\n\n\tpublic async createObject(initialize: object = null, addToColl: boolean = false): Promise<XoneDataObject> {\n\t\tlet obj = await this.CreateObject();\n\t\tif (addToColl) {\n\t\t\tthis.addItem(obj);\n\t\t}\n\t\tif (typeof initialize == \"object\") {\n\t\t\tfor (let key in initialize) {\n\t\t\t\t// TAG: 19032019 Luis para cuando se inicializa por un native object poder convertir bien\n\t\t\t\tlet value = initialize[key];\n\t\t\t\t// if (value instanceof ConsString) {\n\t\t\t\t//     value = TypeConverter.toJava((ConsString) value);\n\t\t\t\t// } else if (value instanceof NativeDate) {\n\t\t\t\t//     value = TypeConverter.toJava((NativeDate) value);\n\t\t\t\t// }\n\t\t\t\tobj.put(key.toString(), value);\n\t\t\t}\n\t\t}\n\t\treturn obj;\n\t}\n\n\t/**\n\t * Crea un objeto de datos usando el ClassName o ProgId de la coleccin.\n\t * @param CreateNew\t\tTRUE si se quiere crear un objeto nuevo. FALSE para crear un objeto que se cargar de base de datos.\n\t * @return\t\t\t\tDevuelve el objeto recin creado. NULL si no se puede crear el objeto o no se conoce la clase.\n\t * @throws XoneGenericException\n\t */\n\tpublic async CreateObject(CreateNew: boolean = true): Promise<XoneDataObject> {\n\t\tlet item: XoneDataObject = null;\n\t\t//\n\t\t// Primero tenemos que ver si tenemos declarado un nombre de clase\n\t\tlet strClassName: string = Utils.EMPTY_STRING;\n\t\tif (StringUtils.IsEmptyString((strClassName = this.Options.strClassName)))\n\t\t\tstrClassName = this.Options.strClassName = this.m_ownerApp.GetClassName(this.Options.strProgId);\n\t\telse strClassName = this.m_ownerApp.CheckClassName(this.Options.strClassName);\n\t\t// A12122701: Sistema para gestionar la estructura lgica de vistas en la maquinaria.\n\t\t// Si el layout no est construido del todo entonces tendremos que esperar\n\t\t// TODO ADD TAG\n\t\t// if (m_layout !=null)\n\t\t// \tm_layout.waitUntilReady();\n\t\t// F10100704:\tProteccin contra ProgIds vacos en las colecciones.\n\t\t// Si el progid est vaco ser el de toda la vida\n\t\t// Aqu habr que hacer algo para aquellas clases que sean diferentes... por el momento creamos\n\t\t// solamente el equivalente del BasicDataObj\n\t\t// Esto hay que cacharrearlo su poco\n\t\t// TODO Ver si esto se puede hacer con alguna forma de carga por nombre o algo as.\n\t\tif (StringUtils.IsEmptyString(strClassName)) item = new XoneDataObject(this);\n\t\telse if (strClassName.equalsIgnoreCase(\"xonedataobject\")) item = new XoneDataObject(this);\n\t\telse if (strClassName.equalsIgnoreCase(\"xoneuser\")) item = new XoneUser(this);\n\t\telse if (strClassName.equalsIgnoreCase(\"xonecompany\")) item = new XoneCompany(this);\n\t\telse item = new XoneDataObject(this);\n\t\tawait item.OnCreate(CreateNew); // Est creando el objeto nuevo...\n\t\treturn item;\n\t}\n\n\tpublic getOwnerApp(): XoneApplication {\n\t\treturn this.m_ownerApp;\n\t}\n\n\tpublic getMultipleKey(): boolean {\n\t\treturn this.Options.bMultipleKey;\n\t}\n\n\t/**\n\t * @return\t\t\tDevuelve una lista de claves cuando la coleccin tiene claves mltiples\n\t */\n\tpublic getKeyFields(): Vector<string> {\n\t\treturn this.m_lstKeyFields;\n\t}\n\n\t/**\n\t * Devuelve el tipo de la propiedad o campo cuyo nombre se pasa como parmetro.\n\t * @param FieldName\t\t\tNombre del campo o propiedad cuyo tipo se quiere conocer.\n\t * @return\t\t\t\t\tDevuelve el tipo declarado en la propiedad o \"absent\" si no est definida.\n\t * @throws Exception\n\t */\n\tpublic PropType(FieldName: string): string {\n\t\t// Primero buscarlo en esta coleccin...\n\t\tlet strType = this.FieldPropertyValue(FieldName, \"type\");\n\t\t// K11010501:\tModificaciones para la versin 1.5 de Android.\n\t\t// Si es la  clave primaria ser texto o nmero\n\t\tif (FieldName.equals(this.m_strPk)) return this.Options.bStringPk ? \"T\" : \"N\";\n\t\t// De lo contrario asumimos que es texto\n\t\tif (StringUtils.IsEmptyString(strType)) strType = \"T\";\n\t\treturn strType;\n\t}\n\n\t/**\n\t * Devuelve la visibilidad de una propiedad teniendo en cuenta plataformas y dems.\n\t * @param FieldName\t\t\tNombre del campo o propiedad cuya visibilidad se quiere conocer.\n\t * @return\t\t\t\t\tDevuelve el valor de \"visible\" para este campo, o \"1\" si no est definido.\n\t * @throws Exception\n\t */\n\tpublic PropVisibility(FieldName: string): string {\n\t\tlet str = this.FieldPropertyValue(FieldName, \"visible\");\n\t\t// A09100501:   Permitir que las propiedades tengan un tipo button.\n\t\t// En los button la visibilidad vena como true o false, as que tenemos que permitirlo para mantener\n\t\t// la compatibilidad...\n\t\t// Si no hay plataforma, o el atributo no est definido, buscarlo en el original\n\t\tif (StringUtils.IsEmptyString(str)) str = \"1\";\n\t\telse {\n\t\t\t// Caso especial true/false\n\t\t\tif (str.equals(\"true\")) str = \"1\";\n\t\t\telse if (str.equals(\"false\")) str = \"0\";\n\t\t} // Caso especial true/false\n\t\treturn str;\n\t}\n\n\tisIndexed() {\n\t\treturn false;\n\t}\n\tgetProperties() {\n\t\treturn this.m_xmlNode;\n\t}\n\n\t/**\n\t * Esta funcin devuelve la bandera que indica si hay que usar objetos en la restauracin de mapeos\n\t * cuando se trata de colecciones complejas en las que hay varios niveles de objetos en la restauracin.\n\t * @return\t\tDevuelve el valor de la bandera (TRUE por defecto, se cambia durante la ejecucin si es necesario)\n\t */\n\tpublic getUseObjectsInRestore(): boolean {\n\t\treturn this.m_bUseObjectsInRestore;\n\t}\n\n\t/**\n\t * Asigna valor a la bandera que indica que en vez de lanzar una SQL y devolver una fila de base de datos hay\n\t * que cargar el objeto y utilizarlo tal cual porque en las restauraciones se usan campos que estn a varios niveles\n\t * de anidamiento.\n\t * @param value\t\tTRUE para usar objetos, FALSE para utilizar una fila en base de datos (ms rpido y eficiente)\n\t */\n\tpublic setUseObjectsInRestore(value: boolean) {\n\t\tthis.m_bUseObjectsInRestore = value;\n\t}\n\n\tPropertyTitle(FieldName: string): string {\n\t\tlet strProp = \"\",\n\t\t\tstr = \"\";\n\t\tlet node: XmlNode = null,\n\t\t\tplatNode: XmlNode = null;\n\n\t\tif (!StringUtils.IsEmptyString((strProp = this.FieldPropertyValue(FieldName, \"title\")))) return strProp; // Este mismo y pa la pinga\n\t\t// M10090801:\tModificaciones para permitir que los <button> sean considerados propiedades.\n\t\t// El atributo caption tambin vale (en el caso de los botones, sentiende)\n\t\tif (!StringUtils.IsEmptyString((strProp = this.FieldPropertyValue(FieldName, \"caption\")))) return strProp;\n\t\t//\n\t\t// Buscarlo sin ms...\n\t\tlet coll: XoneDataCollection = this;\n\t\tdo {\n\t\t\tif (null != (node = coll.getNode(\"prop\", \"name\", FieldName))) break;\n\t\t\t// M10090801:\tModificaciones para permitir que los <button> sean considerados propiedades.\n\t\t\t// Comprobar si se trata de un botoncejo antiguo\n\t\t\tif (null != (node = coll.getNode(\"button\", \"name\", FieldName))) break;\n\t\t\tcoll = coll.getParentCollection();\n\t\t} while (coll != null);\n\t\tif (node == null) return FieldName;\n\t\t// Cambiar el chequeo pues el puntero puede ser nulo. No se soportan\n\t\t// cadenas vacas.\n\t\tif (!StringUtils.IsEmptyString((str = this.getOwnerApp().getPlatform()))) {\n\t\t\t// Buscar el nodo\n\t\t\tplatNode = node.SelectSingleNode(\"platform\", \"name\", str);\n\t\t} // Buscar el nodo\n\t\tstr = \"\";\n\t\t// M10090801:\tModificaciones para permitir que los <button> sean considerados propiedades.\n\t\t// En caso de los botones, vale caption tambin\n\t\tif (platNode != null) {\n\t\t\t// Comprobar title y caption\n\t\t\tif (StringUtils.IsEmptyString((str = XmlUtils.getNodeAttr(platNode, \"title\")))) str = platNode.getAttrValue(\"caption\");\n\t\t} // Comprobar title y caption\n\t\tif (StringUtils.IsEmptyString(str)) {\n\t\t\t// No est en el nodo de plataforma\n\t\t\tstr = XmlUtils.getNodeAttr(node, \"title\");\n\t\t\tif (StringUtils.IsEmptyString(str)) {\n\t\t\t\t// Si no tiene title, ver si tiene texto\n\t\t\t\t// M10090801:\tModificaciones para permitir que los <button> sean considerados propiedades.\n\t\t\t\t// Comprobar tambin caption, que para los botones vale lo mismo\n\t\t\t\tstr = node.getAttrValue(\"caption\");\n\t\t\t\tif (StringUtils.IsEmptyString(str)) str = node.getText();\n\t\t\t\tif (StringUtils.IsEmptyString(str)) {\n\t\t\t\t\t// Si es un botn, no devolver el nombre\n\t\t\t\t\t// F10100708:\tLos botones que no tengan texto deberan devolver ttulo vaco.\n\t\t\t\t\t// Cambiar este mecanismo porque puede explotarse si no hay Type.\n\t\t\t\t\tlet bButton = false;\n\t\t\t\t\tif (node.getName().equals(\"button\")) bButton = true;\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Obtener el tipo\n\t\t\t\t\t\tlet strType = node.getAttrValue(\"type\");\n\t\t\t\t\t\tif (!StringUtils.IsEmptyString(strType)) {\n\t\t\t\t\t\t\t// Ver si es un botn\n\t\t\t\t\t\t\tif (strType.equals(\"B\")) bButton = true;\n\t\t\t\t\t\t} // Ver si es un botn\n\t\t\t\t\t} // Obtener el tipo\n\t\t\t\t\tif (!bButton) str = FieldName;\n\t\t\t\t} // Si es un botn, no devolver el nombre\n\t\t\t} // Si no tiene title, ver si tiene texto\n\t\t} // No est en el nodo de plataforma\n\n\t\treturn StringUtils.SafeToString(str);\n\t}\n\n\tIsFormulaProperty(FieldName: string): boolean {\n\t\tif (this.m_lstFormulaProps.length == 0) return false;\n\t\treturn this.m_lstFormulaProps.contains(FieldName) ? true : false;\n\t}\n\n\tIsBitProperty(FieldName: string): boolean {\n\t\tif (this.m_lstBitProps.length == 0) return false;\n\t\treturn this.m_lstBitProps.contains(FieldName) ? true : false;\n\t}\n\n\tgetDeferredLoad(): boolean {\n\t\treturn this.Options.bDeferredLoad;\n\t}\n\n\tGetCurrentItemValue(FieldName: string): any {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tpublic FieldExists(FieldName: string): boolean {\n\t\t// Buscar si el campo existe en la lista del nodo XML\n\t\tif (null != this.m_xmlNode.SelectSingleNode(\"prop\", \"name\", FieldName)) return true;\n\t\t// M10090801:\tModificaciones para permitir que los <button> sean considerados propiedades.\n\t\t// Lo mismo con los botones\n\t\tif (null != this.m_xmlNode.SelectSingleNode(\"button\", \"name\", FieldName)) return true;\n\t\t// F10052502:\tFieldExists no debe comprobar existencia del campo clave.\n\t\tif (this.m_strPk.equals(FieldName)) return true;\n\t\t// Buscar si heredamos de alguna, en ese caso buscar en el parent\n\t\tif (!StringUtils.IsEmptyString(this.Options.strParentCollection)) {\n\t\t\t// Comprobar\n\t\t\tif (this.getParentCollection() == null) {\n\t\t\t\t// Error\n\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t////throw new XoneGenericException(-17778, \"CXoneDataCollection::FieldExists ha fallado. La coleccin '\" + m_strName + \"' hereda de '\" + m_strParentCollection + \"' y no se encuentra la coleccin padre.\");\n\t\t\t\tlet sb = this.m_messages.GetMessage(\n\t\t\t\t\tXoneMessageKeys.SYS_MSG_COLL_FIELDEXISTSFAIL,\n\t\t\t\t\t\"CXoneDataCollection::FieldExists failed. Collection '{0}' inherits '{1}' and it cannot be found.\"\n\t\t\t\t);\n\t\t\t\tsb = sb.replace(\"{0}\", this.m_strName);\n\t\t\t\tsb = sb.replace(\"{1}\", this.Options.strParentCollection);\n\t\t\t\tthrow new XoneGenericException(-17778, sb);\n\t\t\t} // Error\n\t\t\treturn this.getParentCollection().FieldExists(FieldName);\n\t\t} // Comprobar\n\t\t// De lo contrario.. nanai...\n\t\treturn false;\n\t}\n\n\tgetSpecial() {\n\t\treturn this.isSpecial;\n\t}\n\n\tpublic get isSpecial(): boolean {\n\t\treturn this.m_options.bIsSpecial;\n\t}\n\n\tpublic getObjectIndex(Item: XoneDataObject): number {\n\t\treturn this.BrowseData.ObjectIndex(Item);\n\t}\n\n\t/**\n\t * K11010501:\tModificaciones para la version 1.5 de Android.\n\t *\n\t * TODO 24/01/2019 Juan Carlos\n\t * Esta funcin no est teniendo en cuenta los types que inventamos posteriormente que no\n\t * siguen la regla de la primera letra indicado el tipo de dato en base de datos. Corrijo el\n\t * switch y pongo constantes pblicas, que el resto del cdigo debera empezar a usar. Dejo la\n\t * funcin antigua comentada abajo por si acaso.\n\t *\n\t * PROP_TYPE_INTEGER = Integer (Type N)\n\t * PROP_TYPE_STRING = String (Type T, IMG, PH, DR)\n\t * PROP_TYPE_DOUBLE = Double (Type N2, N3, N4, etc...)\n\t * PROP_TYPE_DATE = Fecha (Type D, DT, TT)\n\t * PROP_TYPE_RESULTSET = ResultSet (Type Z) Su valor es 0 como integer, no s porqu esto est\n\t * as pero seguramente sea malo.\n\t *\n\t * @param sTypeName\n\t * @return\n\t */\n\n\tpublic getTypeFromXml(sTypeName: string): number {\n\t\tif (TextUtils.isEmpty(sTypeName)) {\n\t\t\treturn XoneDataCollection.PROP_TYPE_STRING;\n\t\t}\n\t\tswitch (sTypeName) {\n\t\t\tcase \"T\":\n\t\t\tcase \"TN\":\n\t\t\tcase \"DR\":\n\t\t\tcase \"IMG\":\n\t\t\tcase \"PH\":\n\t\t\tcase \"TT\":\n\t\t\t\treturn XoneDataCollection.PROP_TYPE_STRING;\n\t\t\tcase \"N\":\n\t\t\tcase \"NC\":\n\t\t\t\treturn XoneDataCollection.PROP_TYPE_INTEGER;\n\t\t\tcase \"D\":\n\t\t\tcase \"DT\":\n\t\t\t\treturn XoneDataCollection.PROP_TYPE_DATE;\n\t\t\tcase \"Z\":\n\t\t\t\t// A11092602: Permitir el uso de resultsets jerrquicos en forma de rbol para cargas mltiples.\n\t\t\t\treturn XoneDataCollection.PROP_TYPE_RESULTSET;\n\t\t\tdefault:\n\t\t\t\tlet sTypeFirstLetter = sTypeName.charAt(0);\n\t\t\t\tif (sTypeFirstLetter == \"N\") {\n\t\t\t\t\treturn XoneDataCollection.PROP_TYPE_DOUBLE;\n\t\t\t\t}\n\t\t\t\treturn XoneDataCollection.PROP_TYPE_STRING;\n\t\t}\n\t}\n\n\t/**\n\t *  Bloquea la coleccin para que no se pueda limpiar ni recargar\n\t */\n\tpublic lock(): void {\n\t\tthis.m_bLocked = true;\n\t}\n\n\t/**\n\t *  Desbloquea la coleccin para que se puede vaciar y/o llenar\n\t */\n\tpublic unlock(): void {\n\t\tthis.m_bLocked = false;\n\t}\n\n\tpublic isLock(): boolean {\n\t\treturn this.m_bLocked;\n\t}\n\n\t/**\n\t * Limpia la coleccin de los objetos que hay en memoria. Si la coleccin est bloqueada no hace nada.\n\t * @return\t\t\tTRUE si la operacin es correcta.\n\t */\n\tpublic clear(): boolean {\n\t\t// Si est bloqueada, no hacemos nada...\n\t\tif (this.m_bLocked) return true;\n\t\treturn this.ClearCollection();\n\t}\n\n\t/**\n\t * Efecta la limpieza real de la coleccin aunque esta est bloqueada\n\t * @return\t\tDevuelve TRUE si la coleccin se limpia correctamente.\n\t */\n\tprivate ClearCollection(): boolean {\n\t\tif (this.m_bIsClearing || this.m_bLocked) return true; // Ya est dentro...\n\t\ttry {\n\t\t\tthis.m_bIsClearing = true;\n\t\t\t// Ahora limpiar las colecciones porsi...\n\t\t\tthis.BrowseData.Clear();\n\t\t\tthis.m_bFull = this.m_bIsClearing = false;\n\t\t\t// Si es especial esto es como un EB\n\t\t\tif (this.m_bIsSpecial) this.m_nBrowseLength = -1;\n\t\t} catch (e) {\n\t\t\t// Ignorar las excepciones a menos que sea debug\n\t\t\tif (this.Options.bDebug) {\n\t\t\t\t// Imprimir\n\t\t\t\t//this.m_ownerApp.WriteConsoleString(e.getMessage ());\n\t\t\t\tconsole.log(e.message);\n\t\t\t} // Imprimir\n\t\t}\n\t\treturn true;\n\t}\n\n\t/**\n\t * @return\t\t\tDevuelve la cadena para el ordenamiento de los datos.\n\t */\n\tpublic getSort(): string {\n\t\treturn this.m_strSort;\n\t}\n\n\t/**\n\t * Asigna valor a la cadena de ordenamiento de los datos de la coleccin.\n\t * @param value\t\tNuevo valor de la cadena de ordenamiento de los datos de la coleccin.\n\t */\n\tpublic setSort(value: string): void {\n\t\tthis.m_strSort = value;\n\t}\n\n\tpublic setLinkFilter(str: string): void {\n\t\tthis.m_strLinkFilter = str;\n\t}\n\n\t/**\n\t * @return\t\t\tDevuelve el filtro interno, ledo del atributo filter del mappings y usado para enlazar contents\n\t */\n\tpublic getLinkFilter() {\n\t\treturn this.m_strLinkFilter;\n\t}\n\n\t/**\n\t * @return\t\t\tDevuelve el filtro externo usado por los frameworks para limitar las bsquedas\n\t */\n\tpublic getFilter() {\n\t\treturn this.m_strFilter;\n\t}\n\t/**\n\t * Asigna valor al filtro de usuario de la coleccin.\n\t * @param value\t\tNuevo valor para el filtro de la coleccin.\n\t */\n\tpublic setFilter(value: string): void {\n\t\tthis.m_strFilter = value;\n\t}\n\n\t/**\n\t * @return\t\t\tDevuelve el Objeto propietario de la coleccin cuando se usa como contents\n\t */\n\tpublic getOwnerObject(): XoneDataObject {\n\t\treturn this.m_pOwnerObject;\n\t}\n\t/**\n\t * Permite asignar el objeto propietario de la coleccin en tiempo de ejecucin.\n\t * @param value\t\tNuevo objeto propietario de la coleccin (i.e. de la cual es contents)\n\t */\n\tpublic setOwnerObject(value: XoneDataObject): void {\n\t\tthis.m_pOwnerObject = value;\n\t}\n\n\t/**\n\t * Crea un clon de esta coleccin (no copia el contenido)\n\t * @return\t\t\t\tDevuelve la coleccin creada con los datos de esta coleccin tambin clonados\n\t * @throws Exception\n\t */\n\tpublic createClone(): XoneDataCollection {\n\t\treturn this.CreateClone();\n\t}\n\n\tpublic CreateClone(): XoneDataCollection {\n\t\tlet newColl: XoneDataCollection = null;\n\t\t// A12122701: Sistema para gestionar la estructura lgica de vistas en la maquinaria.\n\t\t// Para clonar nos creamos la nueva coleccin a partir de esta...\n\t\tnewColl = new XoneDataCollection(this.getOwnerApp(), this.getProperties(), this.getVersion());\n\t\t// // M10051901:  Los scripts deben almacenarse parseados en la maquinaria.\n\t\t// // El evento no nos hace falta, as que nos lo cargamos y tal y tal\n\t\t// m_propsCollected = null;\n\t\t// // Copiamos el layout...\n\t\t// //m_layout = Origin.getViewLayout();\n\t\t// // O13061301: Carajal de optimizaciones de todo tipo en maquinaria y dems.\n\t\t// // Referenciar las propiedades... a fin de cuentas sern las mismas... digo yo...\n\t\t// // Con la lista de tipos... ms de lo mismo... Tambin copiamos otras cositas.\n\t\t// m_lstProperties = this.getPropertyList();\n\t\t// m_lstPropTypes = this.getTypeList();\n\t\t// m_lstPropTitles = this.getTitleList();\n\t\t// m_bPropsCollected = true;   // Ya nos lo ha hecho otro, claro...\n\t\t// this.m_parent = this.getParentCollection();\n\t\t// // A13071201: Control de macros a nivel de coleccin de contents.\n\t\t// // Si nos han indicado el nombre del contents, lo guardamos aqu\n\t\t// this.m_strContentsName = ContentsName;\n\t\t/////////////\n\t\t// F13022104: El acceso a las frmulas de visibilidad de campos debe ser concurrente.\n\t\t// Copiar las frmulas\n\t\t// if (Origin.HasFormulas())\n\t\t// {// Tiene frmulas\n\t\t//     m_formulas = new Hashtable<String, IFormulaParser>();\n\t\t//     Enumeration<String> enm =Origin.getFormulas().keys ();\n\t\t//     while (enm.hasMoreElements())\n\t\t//     {// Copiar\n\t\t//     \tString key =enm.nextElement();\n\t\t//     \tIFormulaParser ipf =Origin.getFormulas().get(key);\n\t\t//     \tif (ipf instanceof FormulaParser)\n\t\t//     \t\tm_formulas.put (key, (FormulaParser)ipf);\n\t\t//     }// Copiar\n\t\t// }// Tiene frmulas\n\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t////throw new XoneGenericException(-11123, \"XoneDataCollection::CreateClone ha fallado. No se puede crear una nueva coleccin.\");\n\t\t////throw new XoneGenericException(-11123, m_messages.GetMessage (XoneMessageKeys.SYS_MSG_COLL_CREATECLONEFAIL, \"CXoneDataCollection::CreateClone failed. Cannot create new collection.\"));\n\t\t// Cargar las cosas\n\t\tif (!newColl.Load()) return null;\n\t\t// En el constructor se copian las cosas que normalmente habra que poner a mano..\n\t\t// Estas cosas podran haber cambiado, as que las asignamos aqu otra vez...\n\t\tnewColl.setSort(this.m_strSort);\n\t\tnewColl.setFilter(this.m_strFilter);\n\t\tthis.CopyMacros(newColl);\n\t\tthis.CopyVariables(newColl);\n\t\treturn newColl;\n\t}\n\n\t/**\n\t * Copia todas las variables de esta coleccin hacia la que se pasa como parmetro\n\t * @param DestColl\t\tColeccin hacia la que se quieren copiar las variables de esta coleccin.\n\t */\n\tprivate CopyVariables(DestColl: XoneDataCollection): void {\n\t\tthis.SafeGetVariableList()\n\t\t\t.entrySet()\n\t\t\t.forEach((item) => DestColl.setVariables(item[0], item[1]));\n\t\t// this.m_lstVariables.keys();\n\t\t// while (e.hasMoreElements())\n\t\t// {// Recorrer la lista de variables y pasarla a la otra coleccin\n\t\t// \tString k =(String) e.nextElement();\n\t\t// \tObject v =this.m_lstVariables.get(k);\n\t\t//     DestColl.setVariables(k, v);\n\t\t// }// Recorrer la lista de variables y pasarla a la otra coleccin\n\t}\n\n\t/**\n\t * Copia todas las macros de esta coleccin hacia la que se pase como parmetro.\n\t * @param DestColl\t\t\tColeccin hacia la que se quieren copiar las macros de esta.\n\t */\n\tpublic CopyMacros(DestColl: XoneDataCollection): void {\n\t\tthis.m_macrosEvaluator.CopyMacros(DestColl);\n\t\t// this.m_lstMacros\n\t\t//     .entrySet()\n\t\t//     .forEach((item) => DestColl.setMacro(item[0], item[1]));\n\t\t// Enumeration<String> e =this.m_lstMacros.keys();\n\t\t// while (e.hasMoreElements())\n\t\t// {// Recorrer la lista de variables y pasarla a la otra coleccin\n\t\t// \tString k =e.nextElement();\n\t\t// \tString v =(String) this.m_lstMacros.get(k);\n\t\t//     DestColl.setMacro(k, v);\n\t\t// }// Recorrer la lista de variables y pasarla a la otra coleccin\n\t}\n\n\tpublic async loadAll(CountRecords: boolean = false, options?: any): Promise<XoneDataCollection> {\n\t\treturn this.BrowseData.loadAllAsync(CountRecords, options);\n\t}\n\n\tpublic async loadAllAsync(CountRecords: boolean = false, options?: any): Promise<XoneDataCollection> {\n\t\treturn this.BrowseData.loadAllAsync(CountRecords, options);\n\t}\n\n\tpublic async startBrowse(CountRecords: boolean = false, options?: any): Promise<XoneDataCollection> {\n\t\treturn this.BrowseData.startBrowse(CountRecords, options);\n\t}\n\n\tpublic async moveNext(): Promise<boolean> {\n\t\treturn this.BrowseData.MoveNext();\n\t}\n\n\tpublic endBrowse(): boolean {\n\t\treturn this.BrowseData.EndBrowse();\n\t}\n\n\tpublic get currentItem(): XoneDataObject {\n\t\treturn this.getCurrentItem();\n\t}\n\n\tpublic getCurrentItem(): XoneDataObject {\n\t\treturn this.BrowseData.getCurrentItem();\n\t}\n\n\tpublic getConnection(): XoneConnectionData {\n\t\treturn this.BrowseData.getConnection();\n\t}\n\n\tpublic isFull(): boolean {\n\t\treturn this.getFull();\n\t}\n\n\t/**\n\t * @return\t\tDevuelve TRUE si la coleccin se ha cargado completamente con LoadAll.\n\t */\n\tpublic getFull(): boolean {\n\t\treturn this.m_bFull;\n\t}\n\n\t/**\n\t * A11092602: Permitir el uso de resultsets jerrquicos en forma de rbol para cargas mltiples.\n\t * Hacer que la coleccin est llena a la fuerza.\n\t * @param isFull\n\t */\n\tpublic setFull(isFull: boolean): void {\n\t\tthis.m_bFull = isFull;\n\t}\n\n\tpublic getCount(): number {\n\t\treturn this.BrowseData.getCount();\n\t}\n\n\tpublic count(): number {\n\t\treturn this.getCount();\n\t}\n\n\tpublic get length() {\n\t\treturn this.getCount();\n\t}\n\n\tPrepareSqlString(Sentence: string, ChkGroup: boolean = false, Prefiltered: boolean = false): string {\n\t\treturn this.BrowseData.PrepareSqlString(Sentence, ChkGroup, Prefiltered);\n\t}\n\n\t// addItem(param0) {\n\n\t// }\n\n\t// browseDeleteAll() {\n\n\t// }\n\n\t// browseDeleteWithNoRules() {\n\n\t// }\n\n\tpublic browseLength(): number {\n\t\treturn this.BrowseData.browseLength();\n\t}\n\n\t/**\n\t * K13080701: La ejecucin de scripts con argumentos a nivel de coleccin falta en algunos casos.\n\t * Esta accin podra llevar argumentos...\n\t */\n\tpublic async ExecuteCollAction(ActionNode: string, ActionName: string, ...Arguments): Promise<any> {\n\t\treturn await this.executeCollAction(ActionNode, ActionName, ...Arguments);\n\t}\n\tpublic async executeCollAction(ActionNode: string, ActionName: string, ...Arguments): Promise<any> {\n\t\tlet node: XmlNode = null;\n\t\tlet str = \"\";\n\n\t\tif (StringUtils.IsEmptyString(ActionNode)) return null;\n\t\t// Primero tenemos que buscar el nodo correspondiente al prefijo\n\t\tlet prefix = this.GetNode(ActionNode);\n\t\tif (prefix == null) {\n\t\t\t// No existe el nodo\n\t\t\tif (this.Options.bDebug) console.log(\"Coleccin '\" + this.getName() + \"' ExecuteCollAction no encuentra el nodo '\" + ActionNode + \"'\");\n\t\t\t// Esto en s no es un fallo de ejecucin\n\t\t\treturn null;\n\t\t} // No existe el nodo\n\n\t\tif (!StringUtils.IsEmptyString(ActionName)) node = prefix.SelectSingleNode(\"action\", \"name\", ActionName);\n\t\telse node = prefix.SelectSingleNode(\"action\");\n\n\t\tif (null != node) {\n\t\t\t// Comprobar qu tipo de accin es\n\t\t\tstr = XmlUtils.GetNodeAttr(node, \"type\");\n\t\t\t// F11051805: Permitir que los nodos coll-action no tengan tipo.\n\t\t\t// Por defecto...\n\t\t\tif (StringUtils.IsEmptyString(str)) str = \"runscript\";\n\t\t\t// K13080701: La ejecucin de scripts con argumentos a nivel de coleccin falta en algunos casos.\n\t\t\t// Pasar los argumentos que nos han mandado (puede ser nulo)\n\t\t\tif (str.equals(\"runscript\")) return await this.doRunScript(node, Arguments);\n\t\t} // Comprobar qu tipo de accin es\n\t\telse {\n\t\t\t// Si est en debug, dejar traza\n\t\t\tif (this.Options.bDebug) {\n\t\t\t\t// Mostrar mensaje\n\t\t\t\tif (StringUtils.IsEmptyString((str = ActionName))) str = \"\";\n\t\t\t\tconsole.log(\"Coleccin '\" + this.getName() + \"' ExecuteCollAction no encuentra el nodo action[name='\" + str + \"']\");\n\t\t\t} // Mostrar mensaje\n\t\t} // Si est en debug, dejar traza\n\t\t// No hacer nada de nada...\n\t\treturn null;\n\t}\n\n\tpublic prepareContext(scope: XoneDataCollection | XoneDataObject, ActionNode: XmlNode | string, ...Arguments): ScriptParams {\n\t\tlet scripts: XmlNodeList;\n\t\tlet strScript = \"\",\n\t\t\tstrLang = \"\",\n\t\t\tstr = \"\";\n\t\tlet ctx = new ScriptContext(scope);\n\n\t\t// K10090801:\tCarga de includes locales en los nodos de acciones.\n\t\t// Adicionar scripts locales de los nodos <action>\n\t\t// TODO: Luis los includes se manejaran de forma distintas\n\t\t// let includes:XmlNodeList = ActionNode.SelectNodes(\"include\");\n\t\t// for (let i =0;i <includes.count();i++)\n\t\t// {// Cargar todos los includes\n\t\t// \tlet include =includes.get(i);\n\t\t// \tlet strFilename =include.getAttrValue(\"file\");\n\n\t\t// \t// 27/02/2017 Los include dentro de un action no hacan caso al language\n\t\t//     let strIncludeLanguage = StringUtils.SafeToString(include.getAttrValue(\"language\"), this.getOwnerApp().getDefaultScriptLanguage());\n\n\t\t// \t// Que se pueda definir desde fuera el charset correcto. ISO-8859-1 permite tildes y ees.\n\t\t// \tlet strCharsetEncoding = include.getAttrValue(\"encoding\");\n\n\t\t// \t// TODO Permitir que la compilacin de scripts se ejecute en background mientras temporalmente ejecutamos en modo intrprete\n\t\t//     let bDelayCompilation = StringUtils.ParseBoolValue(include.getAttrValue(\"delay-compilation\"), false);\n\t\t//     let bCompile = StringUtils.ParseBoolValue(include.getAttrValue(\"compile\"), true);\n\n\t\t//     if (!StringUtils.IsEmptyString(strFilename))\n\t\t// \t{// Cargar el fichero\n\t\t//         if(strIncludeLanguage.compareToIgnoreCase(Utils.JAVASCRIPT_LANGUAGE) == 0) {\n\t\t//             this.getOwnerApp().LoadJavascriptIncludeFile(strFilename, strCharsetEncoding, bDelayCompilation, bCompile, ctx);\n\t\t//         } else {\n\t\t//             VbsScript script = this.getOwnerApp().LoadIncludeFile(strFilename, null, \"vbscript\", strCharsetEncoding);\n\t\t//             if (script == null) {// Error\n\t\t//                 // TODO PROGRAMAR ESTO\n\t\t//                 // Indicar el error\n\t\t//                 // Y retornar con error...\n\t\t//                 throw new XoneScriptFailedException(-1, \"Script execution failed in LoadIncludeFile(), file name \" + strFilename);\n\t\t//             }// Error\n\t\t//             // Incluirlo en el contexto\n\t\t//             ctx.getLocalIncludes().addElement(script);\n\t\t//         }\n\t\t// \t}// Cargar el fichero\n\t\t// }// Cargar todos los includes\n\t\tlet strFunctionName = \"\";\n\t\tlet aScripts = [];\n\t\tlet aFunctionsName = [];\n\t\tlet argsName = [];\n\t\tlet argsValue = [];\n\t\tif (ActionNode instanceof XmlNode) {\n\t\t\t// A12081701: Mecanismo para pasar parmetros a un nodo de accin.\n\t\t\t// Sacar los nodos de parmetros si es que los necesitamos\n\t\t\tif (Arguments && Array.isArray(Arguments) && Arguments.length > 0) {\n\t\t\t\t// Sacar nodos\n\t\t\t\t// K13080701: La ejecucin de scripts con argumentos a nivel de coleccin falta en algunos casos.\n\t\t\t\t// Sacar los argumentos a nivel de contexto para poder usarlo tambin a nivel de coleccin\n\n\t\t\t\tctx.ExtractArguments(ActionNode, ...Arguments);\n\t\t\t} // Sacar nodos\n\t\t\telse {\n\t\t\t\tArguments = null;\n\t\t\t}\n\t\t\tscripts = ActionNode.SelectNodes(\"script\");\n\n\t\t\t// Si hay scripts precompilados, tratemos de usarlos\n\t\t\t// De lo contrario usar el mecanismo de toda la vida\n\t\t\tfor (let i = 0; i < scripts.count(); i++) {\n\t\t\t\t// Recorre los scripts y los ejecuta\n\t\t\t\tlet script = scripts.get(i);\n\t\t\t\tlet xs = script;\n\t\t\t\tstr = XmlUtils.getNodeAttr(script, \"name\");\n\t\t\t\tif (!StringUtils.IsEmptyString(str)) {\n\t\t\t\t\t// Buscar el script en otra parte\n\t\t\t\t\t//////strScript = string.Format(\"mp:script[@name='{0}']\", str);\n\t\t\t\t\tif (null == (xs = this.getNode(\"script\", \"name\", str))) continue;\n\t\t\t\t\tstrScript = null;\n\t\t\t\t} // Buscar el script en otra parte\n\t\t\t\t// Obtener el lenguaje\n\t\t\t\tstrLang = XmlUtils.getNodeAttr(xs, \"language\");\n\t\t\t\tif (StringUtils.IsEmptyString(strLang)) strLang = this.getOwnerApp().getDefaultLanguage();\n\t\t\t\t// Ejecuta el script que sea\n\t\t\t\tstrScript = xs.getText();\n\t\t\t\tlet index: number = 0;\n\t\t\t\tif (ctx.GetParams() && !ctx.GetParams().isEmpty()) {\n\t\t\t\t\tctx\n\t\t\t\t\t\t.GetParams()\n\t\t\t\t\t\t.entrySet()\n\t\t\t\t\t\t.forEach((e) => {\n\t\t\t\t\t\t\t// Amiyares 18/06/2021: modificaciones en el intrprete de scripts\n\t\t\t\t\t\t\tstrScript = \"\\t\" + `let ${e[0]}=XArguments[${index}];` + \"\\n\" + strScript;\n\t\t\t\t\t\t\targsName.push(e[0]);\n\t\t\t\t\t\t\tif (e[1].toString().startsWith(\"'\") && e[1].toString().endsWith(\"'\")) e[1] = e[1].toString().slice(1, e[1].toString().length - 1);\n\t\t\t\t\t\t\targsValue.push(e[1]);\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// A10051901:   Componentes de depuracin y modificacin de maquinaria XOne para depurar.\n\t\t\t\t// Lo cierto es que este cdigo no se va a llamar, pero por lo que sea...\n\t\t\t\tstrFunctionName = ScriptUtils.GenerateFunctionName(ActionNode);\n\t\t\t\taScripts.push(strScript);\n\t\t\t\taFunctionsName.push(strFunctionName);\n\t\t\t\t//var sct=require(\"__\"+this.getOwnerCollection().getName()+\"__\");\n\t\t\t\t//return this.getOwnerApp().RunScript(strFunctionName, strLang, strScript, ctx, Arguments);\n\t\t\t}\n\t\t} else {\n\t\t\tstrScript = ActionNode.replace(\"javascript:\", \"\");\n\t\t\taScripts.push(strScript);\n\t\t\taFunctionsName.push(strFunctionName);\n\t\t\t//return this.getOwnerApp().RunScript(strFunctionName, strLang, strScript, ctx, Arguments);\n\t\t} // Recorre los scripts y los ejecuta\n\t\t// OK\n\t\treturn {\n\t\t\tctx: ctx,\n\t\t\tscripts: aScripts,\n\t\t\tfuncNames: aFunctionsName,\n\t\t\tslang: strLang,\n\t\t\tArguments: Arguments,\n\t\t\targsName: argsName,\n\t\t\targsValue: argsValue,\n\t\t};\n\t}\n\n\t/**\n\t * Ejecuta un nodo runscript pasando el script y el contexto a la aplicacin base.\n\t * @param ActionNode\t\tNodo script a ejecutar.\n\t * @return\t\t\t\t\tDevuelve TRUE si se ejecutan correctamente todos los scripts.\n\t * @throws Exception\n\t */\n\tpublic async doRunScript(ActionNode: XmlNode | string, ...Arguments): Promise<any> {\n\t\treturn await this.DoRunScriptAsync(ActionNode, ...Arguments);\n\t}\n\n\t// protected DoRunScript(ActionNode: XmlNode | string, ...Arguments): any {\n\t//     let data = this.prepareContext(ActionNode, ...Arguments);\n\t//     let n = data.scripts.length;\n\t//     for (let i = 0; i < n; i++) {\n\t//         this.getOwnerApp().RunScript(data.funcNames[i], data.slang, data.scripts[i], data.ctx, data.Arguments);\n\t//     }\n\t//     // OK\n\t//     return true;\n\t// }\n\n\tprotected async DoRunScriptAsync(ActionNode: XmlNode | string, ...Arguments): Promise<any> {\n\t\tlet data = this.prepareContext(this, ActionNode, ...Arguments);\n\t\tlet n = data.scripts.length;\n\t\tlet promises: Promise<any>[] = new Array<Promise<any>>();\n\t\tfor (let i = 0; i < n; i++) {\n\t\t\t// Amiyares 18/06/2021: modificaciones en el intrprete de scripts\n\t\t\tawait this.getOwnerApp().RunScriptAsync(\n\t\t\t\tdata.funcNames[i],\n\t\t\t\tdata.slang,\n\t\t\t\tdata.scripts[i],\n\t\t\t\tdata.ctx,\n\t\t\t\tdata.Arguments,\n\t\t\t\tdata.argsName,\n\t\t\t\tdata.argsValue\n\t\t\t);\n\t\t}\n\t\t// OK\n\t\treturn true;\n\t}\n\n\tpublic async getItem(...FunctionParams): Promise<XoneDataObject> {\n\t\treturn await this.WrapGetItem(FunctionParams);\n\t}\n\n\tprivate async WrapGetItem(...FunctionParams): Promise<XoneDataObject> {\n\t\tlet obj: XoneDataObject = null;\n\t\t// En funcin de la cantidad de parmetros\n\t\t//CheckNullParameters(\"Item\", FunctionParams);\n\t\tswitch (FunctionParams.length) {\n\t\t\tcase 1:\n\t\t\t\t// Puede ser entero o cadenilla\n\t\t\t\tif (typeof FunctionParams[0] === \"string\") {\n\t\t\t\t\t// Cadena\n\t\t\t\t\tobj = await this.get(FunctionParams[0].toString());\n\t\t\t\t\tbreak;\n\t\t\t\t} // Cadena\n\t\t\t\t// TODO ADD TAG 17042014: Luis si es un objeto de datos\n\t\t\t\t// if (FunctionParams[0] instanceof IRuntimeObject)\n\t\t\t\t// {// Cadena\n\t\t\t\t//     obj = GetObject((IRuntimeObject)FunctionParams[0]);\n\t\t\t\t//     break;\n\t\t\t\t// }// Cadena\n\t\t\t\t// De lo contrario ser un nmero\n\t\t\t\tlet n = NumberUtils.SafeToInt(FunctionParams[0]);\n\t\t\t\tobj = await this.get(n);\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tlet strFieldName = FunctionParams[0].toString();\n\t\t\t\tobj = await this.get(strFieldName, FunctionParams[1]);\n\t\t\t\tbreak;\n\t\t\tdefault: {\n\t\t\t\t// Error\n\t\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t\t////throw new XoneGenericException(-91111, \"XoneDataCollection::GetItem ha fallado. Nmero incorrecto de parmetros.\");\n\t\t\t\tlet sb = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_VBS_BADPARAMCOUNT, \"VBS Runtime Error. Incorrect number of parameters for '{0}'\");\n\t\t\t\tsb = sb.replace(\"{0}\", \"Item\");\n\t\t\t\tthrow new XoneGenericException(-91111, sb);\n\t\t\t} // Error\n\t\t}\n\t\t// De lo contrario lo encarsulamos\n\t\treturn obj;\n\t}\n\n\tpublic async deleteItem(key: number | string | XoneDataObject) {\n\t\tif (key instanceof XoneDataObject) key = key.getObjectIndex();\n\t\tlet obj = await this.get(key);\n\t\tif (obj) {\n\t\t\t// Lo ha encontrado\n\t\t\tobj.setFollowRules(this.m_bFollowRules);\n\t\t\t// O12050301: Si la coleccin es especial no hay que borrar el objeto de base de datos.\n\t\t\t// Si la coleccin es especial no tenemos nada que borrar\n\t\t\tif (!this.m_options.bIsSpecial) {\n\t\t\t\t// Solo si no es especial\n\t\t\t\tif (!obj.deleteObject())\n\t\t\t\t\t// Elimina el objeto de la base de datos\n\t\t\t\t\treturn false;\n\t\t\t} // Solo si no es especial\n\t\t\t// Ahora borra el objeto de la lista\n\t\t\tthis.removeItem(key);\n\t\t\t// Ejecuta las acciones posteriores a la eliminacin\n\t\t\t// del objeto\n\t\t\t// F10090804:\tDeleteItem (const char*) invoca las acciones de borrado de ms.\n\t\t\t// Esto ya lo hace DeleteObject... adems, RemoveItem ya lo ha borrado as que esto est mal\n\t\t\t////if (!obj.ExecuteDeleteActions(true))    // Error\n\t\t\t////    throw new XoneGenericException(-8001, \"CXoneDataCollection::DeleteItem ha fallado. Ha fallado la ejecucin de acciones despus de eliminar el objeto.\");\n\t\t} // Lo ha encontrado\n\t}\n\n\t/**\n\t * Elimina un objeto de la coleccin dado su ndice numrico\n\t * @param Index\t\t\t\tIndice del objeto en la coleccin (comenzando por cero)\n\t * @return\t\t\t\t\tDevuelve TRUE si la operacin es correcta.\n\t * @throws Exception\n\t */\n\tpublic removeItem(Index: number | string | XoneDataObject): boolean {\n\t\tthis.BrowseData.removeItem(Index);\n\t\tthis.m_bFull = false;\n\t\treturn true;\n\t}\n\n\tpublic async loadFromJson(...FunctionParams): Promise<XoneDataCollection> {\n\t\tconst FunctionName = \"loadFromJson\";\n\t\tUtils.CheckNullParameters(FunctionName, FunctionParams);\n\t\tUtils.CheckIncorrectParamRange(FunctionName, FunctionParams, 1, 2);\n\t\tlet jsonArray = FunctionParams[0];\n\t\tlet jsParams = FunctionParams.length > 1 ? FunctionParams[1] : null;\n\t\t// TAG 2020031801: Luis Aadida la posibilidad de modo estricto o no.\n\t\tlet bStrictMode = jsParams && StringUtils.ParseBoolValue(jsParams[\"strictMode\"], false);\n\t\tif (typeof jsonArray === \"string\") {\n\t\t\tjsonArray = JSON.parse(jsonArray);\n\t\t}\n\t\t// if (value instanceof NativeArray) {\n\t\t//     return loadFromJsonInternal((NativeArray) value, bStrictMode);\n\t\t// } else if (value instanceof JSONArray) {\n\t\t//     jsonArray = (JSONArray) value;\n\t\t// } else {\n\t\t//     String sJsonObject = StringUtils.SafeToString(value);\n\t\t//     jsonArray = new JSONArray(sJsonObject);\n\t\t// }\n\t\tthis.ClearCollection();\n\t\tawait this.loadFromJsonArray(this, jsonArray, bStrictMode);\n\t\treturn this;\n\t}\n\n\t//     public async loadFromJson(value: any): Promise<XoneDataCollection> {\n\t//         const sFunctionName = \"loadFromJson\";\n\t//         if (value == null) {\n\t//             throw new IllegalArgumentException(sFunctionName + \"(): Empty value\");\n\t//         }\n\t//         return await this.loadFromJsonInternal(value, false);\n\t//     }\n\n\t// public XoneDataCollection loadFromJson(NativeArray value, NativeObject jsParams) throws Exception {\n\t//     String sFunctionName = \"loadFromJson\";\n\t//     if (value == null) {\n\t//         throw new IllegalArgumentException(sFunctionName + \"(): Empty value\");\n\t//     }\n\t//     // TAG 2020031801: Luis Aadida la posibilidad de modo estricto o no.\n\t//     boolean bStrictMode = RhinoUtils.SafeGetBoolean(jsParams, \"strictMode\", false);\n\t//     return loadFromJsonInternal(value, bStrictMode);\n\t// }\n\n\t// public XoneDataCollection loadFromJsonInternal(NativeArray jsArray, boolean bStrictMode) throws Exception {\n\t//     JSONArray jsonArray = RhinoUtils.toJsonArray(jsArray);\n\t//     ClearCollection();\n\t//     loadFromJsonArray(this, jsonArray, bStrictMode);\n\t//     return this;\n\t// }\n\n\tprivate async loadFromJsonArray(collection: XoneDataCollection, jsonArray: any, bStrictMode: boolean): Promise<void> {\n\t\tfor (let i = 0; i < jsonArray.length; i++) {\n\t\t\tlet itemDataObject = new XoneDataObject(collection);\n\t\t\t//let item = jsonArray[i];\n\t\t\titemDataObject.loadFromJson(jsonArray[i]);\n\t\t\t// for (let sPropertyName in item) {\n\t\t\t//     let propertyValue = item[sPropertyName];\n\t\t\t//     if (bStrictMode) {\n\t\t\t//         let sPropertyType = collection.FieldPropertyValue(sPropertyName, Utils.PROP_ATTR_TYPE);\n\t\t\t//         if (TextUtils.isEmpty(sPropertyType)) {\n\t\t\t//             continue;\n\t\t\t//         }\n\t\t\t//     }\n\t\t\t//     if (Array.isArray(propertyValue)) {\n\t\t\t//         let contentCollection = await itemDataObject.getContents(sPropertyName);\n\t\t\t//         if (!contentCollection) {\n\t\t\t//             throw new Exception(\"loadFromJson(): Content collection \" + sPropertyName + \" not found\");\n\t\t\t//         }\n\t\t\t//         this.loadFromJsonArray(contentCollection, propertyValue, bStrictMode);\n\t\t\t//         continue;\n\t\t\t//     }\n\t\t\t//     /*\n\t\t\t//      * 15/07/2020\n\t\t\t//      * No insertar este null extrao de este parser de JSON. Dejar el null de java para\n\t\t\t//      * que las maquinarias de script y cualquier otra cosa tenga mejor oportunidad de\n\t\t\t//      * defenderse\n\t\t\t//      */\n\t\t\t//     if (propertyValue == null) {\n\t\t\t//         propertyValue = null;\n\t\t\t//     }\n\t\t\t//     itemDataObject[sPropertyName] = propertyValue;\n\t\t\t// }\n\t\t\t// Iterator < String > iterator = item.keys();\n\t\t\t// while (iterator.hasNext()) {\n\t\t\t//     String sPropertyName = iterator.next();\n\t\t\t//     Object propertyValue = item.get(sPropertyName);\n\t\t\t//     if (bStrictMode) {\n\t\t\t//         String sPropertyType = collection.FieldPropertyValue(sPropertyName, Utils.PROP_ATTR_TYPE);\n\t\t\t//         if (TextUtils.isEmpty(sPropertyType)) {\n\t\t\t//             continue;\n\t\t\t//         }\n\t\t\t//     }\n\t\t\t//     if (propertyValue instanceof JSONArray) {\n\t\t\t//         XoneDataCollection contentCollection = itemDataObject.Contents(sPropertyName);\n\t\t\t//         if (contentCollection == null) {\n\t\t\t//             throw new Exception(\"loadFromJson(): Content collection \" + sPropertyName + \" not found\");\n\t\t\t//         }\n\t\t\t//         loadFromJsonArray(contentCollection, (JSONArray) propertyValue, bStrictMode);\n\t\t\t//         continue;\n\t\t\t//     }\n\t\t\t//     /*\n\t\t\t//      * 15/07/2020\n\t\t\t//      * No insertar este null extrao de este parser de JSON. Dejar el null de java para\n\t\t\t//      * que las maquinarias de script y cualquier otra cosa tenga mejor oportunidad de\n\t\t\t//      * defenderse\n\t\t\t//      */\n\t\t\t//     if (propertyValue == JSONObject.NULL) {\n\t\t\t//         propertyValue = null;\n\t\t\t//     }\n\t\t\t//     itemDataObject.put(sPropertyName, propertyValue);\n\t\t\t// }\n\t\t\tcollection.addItem(itemDataObject);\n\t\t}\n\t}\n\n\t// clear() {\n\n\t// }\n\n\t// count() {\n\n\t// }\n\n\t// createObject() {\n\n\t// }\n\n\t// currentItem() {\n\n\t// }\n\n\t// deleteAll() {\n\n\t// }\n\n\t// endBrowse() {\n\n\t// }\n\n\t// findObject(param0) {\n\n\t// }\n\n\t// full() {\n\n\t// }\n\n\t// getFilter(param0) {\n\n\t// }\n\n\t// getLinkFilter(param0) {\n\n\t// }\n\n\t// group() {\n\n\t// }\n\n\t// isBrowsing() {\n\n\t// }\n\n\t// isLocked() {\n\n\t// }\n\n\t// Item() {\n\n\t// }\n\n\t// lock() {\n\n\t// }\n\n\t// macro(param0) {\n\n\t// }\n\n\t// macroCount() {\n\n\t// }\n\n\t// moveFirst() {\n\n\t// }\n\n\t// moveLast() {\n\n\t// }\n\n\t// moveNext() {\n\n\t// }\n\n\t// movePrevious() {\n\n\t// }\n\n\t// name() {\n\n\t// }\n\n\t// ownerApp() {\n\n\t// }\n\n\t// ownerObject() {\n\n\t// }\n\n\t// propertyCount() {\n\n\t// }\n\n\t// propertyName() {\n\n\t// }\n\n\t// propType() {\n\n\t// }\n\n\t// removeItem() {\n\n\t// }\n\n\t// saveAll() {\n\n\t// }\n\n\t// setFilter(param0) {\n\n\t// }\n\n\t// setLinkFilter(param0) {\n\n\t// }\n\n\t// sort(param0) {\n\n\t// }\n\n\t// startBrowse(booleano) {\n\n\t// }\n\n\t// stringKey(param0) {\n\n\t// }\n\n\t// unlock() {\n\n\t// }\n\n\t// loadFromJson(param0) {\n\n\t// }\n\n\t// getName() {\n\n\t// }\n\n\t// getOwnerApp() {\n\n\t// }\n\n\t// isFull() {\n\n\t// }\n\n\t// getOwnerObject() {\n\n\t// }\n\n\t// getCurrentItem() {\n\n\t// }\n\n\t// getMultipleKey() {\n\n\t// }\n\n\t// getCount() {\n\n\t// }\n\n\t// getSort() {\n\n\t// }\n\n\t// setSort(param0) {\n\n\t// }\n\n\t// doSort() {\n\n\t// }\n\n\t// createSearchIndex() {\n\n\t// }\n\n\t// createPersistData() {\n\n\t// }\n\n\t// doSearch() {\n\n\t// }\n\n\t// getVariables(variable) {\n\n\t// }\n\n\t// setVariables(param0) {\n\n\t// }\n\n\t// getMacro(macro) {\n\n\t// }\n\n\t// setMacro(macro, value) {\n\n\t// }\n\n\t// getGroupCount() {\n\n\t// }\n\n\t// getMacroCount() {\n\n\t// }\n\n\t// getDevelopedFilter() {\n\n\t// }\n\n\t// getDevelopedLinkFilter() {\n\n\t// }\n\n\t// getDevelopedAccessString() {\n\n\t// }\n\n\t// getObjectIndex() {\n\n\t// }\n\n\t// executeSqlString(param0) {\n\n\t// }\n\n\t// getObject() {\n\n\t// }\n\n\t// getPropertyTitle(prop) {\n\n\t// }\n\n\t// getPropertyGroup(grupo) {\n\n\t// }\n\n\t// getPropType() {\n\n\t// }\n\n\t// getPropVisibility() {\n\n\t// }\n\n\t// reload() {\n\n\t// }\n\n\t// getXmlNode(param0) {\n\n\t// }\n\n\t// getGroup(param0) {\n\n\t// }\n\n\t// getDataConnector(param0) {\n\n\t// }\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Video.vue?vue&type=style&index=0&id=42c3aa31&scoped=true&lang=css\"","/** @type {string} */\nlet appPath = \"\";\n\n/**\n * setAppPath\n * @param {string} value\n * @returns\n */\nexport const setAppPath = (value) => (appPath = value);\n\nexport const getAppPath = () => appPath;\n\n/** @type {Map<string, Object>} */\nconst mapPaths = new Map();\n\n/**\n * get Image Path\n * @param {string} imgPath\n * @param {string} [initialPath]\n * @param {number} [checkNumber]\n * @param {string} [mapPathName]\n * @returns {Promise<string|null>}\n */\nexport const getImagePath = async (imgPath, initialPath = \"icons\", checkNumber = 0, mapPathName) => {\n\tif (!imgPath) return;\n\n\tif (!mapPathName) mapPathName = `getImagePath:${imgPath}-${initialPath}`;\n\n\tif (mapPaths.has(mapPathName)) {\n\t\treturn mapPaths.get(mapPathName);\n\t}\n\n\tconst image = new Image();\n\tlet finalPath = imgPath;\n\n\ttry {\n\t\tif (checkNumber == 2) finalPath = finalPath.replace(\"icons/\", \"source/\").replace(\"images/\", \"source/\");\n\n\t\tawait new Promise((resolve, reject) => {\n\t\t\tif (\n\t\t\t\t!finalPath?.includes(\"icons/\") &&\n\t\t\t\t!finalPath?.includes(\"files/\") &&\n\t\t\t\t!finalPath?.includes(\"source/\") &&\n\t\t\t\t!imgPath.startsWith(\"http\") &&\n\t\t\t\t!imgPath.startsWith(\"www.\")\n\t\t\t)\n\t\t\t\tfinalPath = `/${initialPath}/${finalPath}`;\n\n\t\t\tif (appPath && !finalPath.startsWith(appPath)) finalPath = `${appPath}${finalPath}`;\n\n\t\t\timage.src = finalPath;\n\n\t\t\timage.onload = function() {\n\t\t\t\tresolve();\n\t\t\t};\n\t\t\timage.onerror = () => reject();\n\t\t});\n\t} catch {\n\t\tcheckNumber++;\n\t\tif (checkNumber > 2 || imgPath.trim().startsWith(\"http\") || imgPath.trim().startsWith(\"www.\")) return null;\n\t\tif (finalPath?.includes(\"icons/\")) return getImagePath(finalPath.replace(\"icons/\", \"files/\"), \"\", checkNumber, mapPathName);\n\t\treturn getImagePath(finalPath.replace(\"files/\", \"icons/\"), \"\", checkNumber);\n\t}\n\n\tif (!mapPaths.has(mapPathName)) mapPaths.set(mapPathName, finalPath);\n\n\treturn finalPath;\n};\n\n/**\n * getImagePathAndSize\n * @param {string} imgPath\n * @param {string} [initialPath]\n * @param {number} [checkNumber]\n * @param {string} [mapPathName]\n * @returns {Promise<{path:string,imgSize:{width:number,height:number}}|null>}\n */\nexport const getImagePathAndSize = async (imgPath, initialPath = \"icons\", checkNumber = 0, mapPathName) => {\n\tif (!imgPath) return;\n\n\tif (!mapPathName) mapPathName = `getImagePathAndSize:${imgPath}-${initialPath}`;\n\n\tif (mapPaths.has(mapPathName)) {\n\t\treturn mapPaths.get(mapPathName);\n\t}\n\n\tconst image = new Image();\n\tlet finalPath = imgPath;\n\tlet imgSize = { width: 0, height: 0 };\n\n\ttry {\n\t\tif (checkNumber == 2) finalPath = finalPath.replace(\"icons/\", \"source/\").replace(\"images/\", \"source/\");\n\n\t\timgSize = await new Promise((resolve, reject) => {\n\t\t\tif (\n\t\t\t\t!finalPath?.includes(\"icons/\") &&\n\t\t\t\t!finalPath?.includes(\"files/\") &&\n\t\t\t\t!finalPath?.includes(\"source/\") &&\n\t\t\t\t!imgPath.startsWith(\"http\") &&\n\t\t\t\t!imgPath.startsWith(\"www.\")\n\t\t\t)\n\t\t\t\tfinalPath = `/${initialPath}/${finalPath}`;\n\n\t\t\tif (appPath && !finalPath.startsWith(appPath)) finalPath = `${appPath}${finalPath}`;\n\n\t\t\timage.src = finalPath;\n\n\t\t\timage.onload = function() {\n\t\t\t\t// @ts-ignore\n\t\t\t\tresolve({ width: this.width, height: this.height });\n\t\t\t};\n\t\t\timage.onerror = () => reject();\n\t\t});\n\t} catch {\n\t\tcheckNumber++;\n\t\tif (checkNumber > 2 || imgPath.trim().startsWith(\"http\") || imgPath.trim().startsWith(\"www.\")) return null;\n\t\tif (finalPath?.includes(\"icons/\")) return getImagePathAndSize(finalPath.replace(\"icons/\", \"files/\"), \"\", checkNumber, mapPathName);\n\t\treturn getImagePathAndSize(finalPath.replace(\"files/\", \"icons/\"), \"\", checkNumber);\n\t}\n\n\tif (!mapPaths.has(mapPathName)) mapPaths.set(mapPathName, { path: finalPath, imgSize });\n\n\treturn { path: finalPath, imgSize };\n};\n","let appData, self, ui, selfDataColl;\n\nexport const __SCRIPT_WRAPPER = function(\n  appDataVal,\n  uiVal,\n  selfVal,\n  functionString,\n  Arguments\n) {\n  appData = appDataVal;\n  ui = uiVal;\n  self = selfVal;\n  if (typeof functionString == \"string\") eval(functionString);\n  else functionString.call(this, Arguments);\n};\n\nexport const __SCRIPT_WRAPPERASYNC = async function(\n  appDataVal,\n  uiVal,\n  selfVal,\n  selfDataCollVal,\n  functionString,\n  Arguments\n) {\n  appData = appDataVal;\n  ui = uiVal;\n  self = selfVal;\n  selfDataColl = selfDataCollVal;\n  if (typeof functionString == \"string\") await eval(functionString);\n  else await functionString.call(this, Arguments);\n};\n\n/***\n *\n * Code from funciones_varias.js\n *\n ***/\n\n//Funcion para guardar las coordenadas GPS en un objeto dado.\nasync function GetPosGPS(tipo, auxcollobj) {\n  var latitud = 0;\n  var longitud = 0;\n  var distinta = 0;\n  //Activamos el GPS\n  ui.startGps();\n  // Capturamos las coordenadas GPS\n  var collGPS = await appData.getCollection(\"ContentConectarGPS\");\n  await collGPS.startBrowse();\n  var x = await collGPS.getCurrentItem();\n  if (typeof x !== \"undefined\") {\n    if (x !== null) {\n      if (x.STATUS == 1) {\n        // si status vale 1 significa que no hay error de conexion con el servicio\n        if (x.HGPS.length > 0) {\n          if (x.LATITUD !== \"\") latitud = parseFloat(x.LATITUD);\n          if (x.LONGITUD.length > 0) longitud = parseFloat(x.LONGITUD);\n        }\n      } else {\n        latitud = appData.getCurrentEnterprise().getVariables(\"LATITUD\");\n        longitud = appData.getCurrentEnterprise().getVariables(\"LONGITUD\");\n      }\n    } else {\n      latitud = appData.getCurrentEnterprise().getVariables(\"LATITUD\");\n      longitud = appData.getCurrentEnterprise().getVariables(\"LONGITUD\");\n    }\n  }\n  collGPS = null;\n  x = null;\n\n  // La guardamos en variable global si es distinta\n  if (\n    appData.getCurrentEnterprise().getVariables(\"LATITUD\") !== latitud ||\n    appData.getCurrentEnterprise().getVariables(\"LONGITUD\") !== longitud\n  ) {\n    appData.getCurrentEnterprise().setVariables(\"LATITUD\", latitud);\n    appData.getCurrentEnterprise().setVariables(\"LONGITUD\", longitud);\n    distinta = 1;\n  }\n\n  if (tipo === \"tracking\") {\n    if (distinta === 1) {\n      var colltracking = await appData.getCollection(auxcollobj);\n      var objtracking = await colltracking.createObject();\n      colltracking.addItem(objtracking);\n      objtracking.LATITUD = latitud;\n      objtracking.LONGITUD = longitud;\n      await objtracking.save();\n      replica.start();\n      colltracking.clear();\n      colltracking = null;\n      objtracking = null;\n    }\n  } else {\n    // Aqui se guarda solo la coordenada para saber donde se hizo la visita\n    auxcollobj.LATITUD = latitud;\n    auxcollobj.LONGITUD = longitud;\n  }\n}\n\nasync function PosicionamientoGPS() {\n  var latitud, longitud, veces, x;\n  if (appData.getCurrentEnterprise().getVariables(\"MIUBICACION\") === 0) {\n    latitud = 38.886442;\n    longitud = -7.004351;\n  } else {\n    //var collGPS =appData.getCollection(\"ContentConectarGPS\");\n    var coordenadas = 0;\n    ui.setMaxWaitDialog(2);\n    ui.updateWaitDialog(\"Detectando localizacion del dispositivo\", 1);\n    veces = 0;\n    //collGPS.startBrowse();\n\n    var collGPS = await appData.getCollection(\"GPSColl\");\n    await collGPS.loadAll();\n    var objGPS = collGPS.getObject(0);\n    //collGPS.clear();\n\n    while (coordenadas == 0) {\n      collGPS.clear();\n      if (objGPS != undefined) {\n        if (objGPS.STATUS != 1) {\n          //ui.showToast(\"El campo STATUS vale \" + objGPS.STATUS);\n        } else {\n          // si status vale 1 significa que no hay error de conexion con el servicio\n          if (objGPS.HGPS.length > 0) {\n            if (objGPS.LATITUD !== \"\") latitud = parseFloat(objGPS.LATITUD);\n            if (objGPS.LONGITUD.length > 0)\n              longitud = parseFloat(objGPS.LONGITUD);\n          }\n        }\n      }\n      veces++;\n      if (veces === 200) {\n        coordenadas = 1;\n        latitud = 38.886442;\n        longitud = -7.004351;\n      }\n    }\n    if (veces === 200)\n      appData.getCurrentEnterprise().setVariables(\"MIUBICACION\", 10);\n\n    collGPS = null;\n  }\n  ui.updateWaitDialog(\"Localizacion Terminada\", 2);\n}\n\n//FUNCION PARA COMPROBAR SI TIENE CONEXION CON EL SERVIDOR PARA LAS COLL ONLINE\nasync function ComprobarConexion() {\n  var conexion = 0;\n  try {\n    //appdata.Error.Clear\n    //on error resume next\n    var coll = await appData.getCollection(\"ContentComprobarConexion\");\n    await coll.startBrowse();\n    //appdata.Error.Clear\n    if ((await coll.getCurrentItem()) !== null)\n      if ((await coll.getCurrentItem()).RESULTADO === \"##OK##\") conexion = 1;\n    coll.endBrowse();\n    coll.clear();\n    coll = null;\n    return conexion;\n  } catch (err) {\n    return conexion;\n  }\n}\n\n/***\n *\n * Code from funciones_openStreetMap.js\n *\n ***/\n\nvar bBreakUpdateGpsLoop = false;\nlet allMarkers = [];\n\nfunction startUpdateGpsLoop() {\n  let myPromise = new Promise(function(bien, mal) {\n    bBreakUpdateGpsLoop = false;\n    let ventana = ui.getView(self);\n    while (!bBreakUpdateGpsLoop) {\n      if (!ventana) {\n        break;\n      }\n      try {\n        actualizarGps();\n      } catch (error) {\n        ui.showToast(\"Hubo un error\");\n      }\n      ventana.refreshValue(\"MAP_LONGITUD\", \"MAP_LATITUD\", \"MAP_FGPS\");\n    }\n  });\n  myPromise.then(\n    function() {\n      ui.showToast(\"Todo OK en promesa\");\n    },\n    function() {\n      ui.showToast(\"Error en promesa\");\n    }\n  );\n}\n\nfunction stopUpdateGpsLoop() {\n  bBreakUpdateGpsLoop = true;\n}\n\nfunction startGpsCallback() {\n  let jsParams = {\n    nodeName: \"callbackgps\",\n    timeBetweenUpdates: 10000,\n    minimumMetersDistanceRange: 0,\n    foreground: true,\n    title: \"Titulo\",\n    text: \"Texto\",\n  };\n  ui.startGps(jsParams);\n  ui.showSnackbar(\"Invocado con callback 50 segs\");\n}\n\nfunction startGpsInterval() {\n  let jsParams = {\n    timeBetweenUpdates: 0,\n    minimumMetersDistanceRange: 0,\n  };\n  ui.startGps(jsParams);\n}\n\nfunction comprobarEstadoGps() {\n  let sDeviceOs = appData.getGlobalMacro(\"##DEVICE_OS##\");\n  if (sDeviceOs == \"android\") {\n    let nStatus = ui.checkGpsStatus();\n    if (nStatus === 0) {\n      ui.showToast(\"No hay GPS, no se puede activar.\");\n    }\n    if (nStatus == 1) {\n      ui.showToast(\"Est activada la localizacin por GPS.\");\n    }\n    if (nStatus == 2) {\n      ui.showToast(\n        \"Est activada la localizacin por redes wifi y de telefona.\"\n      );\n    }\n    if (nStatus == 3) {\n      ui.showToast(\n        \"No est activado el GPS ni la ubicacin por redes wifi y telefona, a ver si nos lo activan.\"\n      );\n      ui.askUserForGpsPermission();\n    }\n    if (nStatus == 4) {\n      ui.showToast(\n        \"Est activada la localizacin por GPS y redes wifi y de telefona.\"\n      );\n    }\n    if (nStatus == -1) {\n      ui.showToast(\"Error inesperado, compruebe la consola de mensajes.\");\n    }\n  }\n}\n\nasync function actualizarGps() {\n  let collGps, objCollGps;\n  collGps = await appData.getCollection(\"GPSColl\");\n  await collGps.startBrowse();\n  try {\n    objCollGps = await collGps.getCurrentItem();\n    if (!objCollGps) {\n      throw \"GPS no disponible. objCollGps es: \" + objCollGps;\n    }\n    if (objCollGps.STATUS != 1) {\n      throw \"GPS no disponible. STATUS vale: \" + objCollGps.STATUS;\n    }\n    if (!objCollGps.LONGITUD) {\n      throw \"Sin cobertura GPS\";\n    }\n    self.MAP_LONGITUD = objCollGps.LONGITUD;\n    self.MAP_LATITUD = objCollGps.LATITUD;\n    self.MAP_ALTITUD = objCollGps.ALTITUD;\n    self.MAP_VELOCIDAD = objCollGps.VELOCIDAD;\n    self.MAP_RUMBO = objCollGps.RUMBO;\n    self.MAP_FGPS = objCollGps.FGPS;\n    self.MAP_HGPS = objCollGps.HGPS;\n    self.MAP_STATUS = objCollGps.STATUS;\n    self.MAP_SATELITES = objCollGps.SATELITES;\n    self.MAP_FUENTE = objCollGps.FUENTE;\n    self.MAP_PRECISION = objCollGps.PRECISION;\n    ui.getView(self).refresh(\n      \"MAP_LONGITUD,MAP_LATITUD,MAP_ALTITUD,MAP_VELOCIDAD,MAP_RUMBO,MAP_FGPS,MAP_HGPS,MAP_STATUS,MAP_SATELITES,MAP_FUENTE,MAP_PRECISION\"\n    );\n  } finally {\n    collGps.endBrowse();\n  }\n}\n\nfunction onMapClicked(evento) {\n  ui.showToast(\n    \"onMapClicked(): latitude: \" +\n      evento.latitude +\n      \" longitude: \" +\n      evento.longitude\n  );\n  let mapControl = getControl(evento.target);\n  let params = {\n    latitude: evento.latitude,\n    longitude: evento.longitude,\n    //rotation: 100,\n    //alpha: 0.5,\n    draggable: true,\n    icon: \"icon.png\",\n    tag: \"Soy un marker\",\n  };\n  let marker = mapControl.addMarker(params);\n  allMarkers.push(marker);\n}\n\nfunction onMapLongClicked(evento) {\n  ui.showToast(\n    \"onMapLongClicked(): latitude: \" +\n      evento.latitude +\n      \" longitude: \" +\n      evento.longitude\n  );\n}\n\nasync function onMarkerDraggedEnd(evento) {\n  let nResult = await ui.msgBox(\"Aqu est bien?\", \"Mensaje\", 4);\n  if (nResult != 6) {\n    // Moverlo a un sitio particular\n    // evento.marker.setPosition(38.8685452, -6.8170906);\n    // Quitarlo\n    evento.marker.remove();\n  }\n  ui.showToast(\n    \"Tag: \" +\n      evento.tag +\n      \" latitude: \" +\n      evento.latitude +\n      \" longitude: \" +\n      evento.longitude\n  );\n}\n\nfunction onMapReady(evento) {\n  ui.showToast(\"El mapa ha sido creado\");\n}\n\nfunction onLocationReady(evento) {\n  ui.showToast(\n    \"Localizacin encontrada por primera vez.\\nLatitud: \" +\n      evento.latitude +\n      \"\\nLongitud:\" +\n      evento.longitude\n  );\n}\n\nfunction onLocationChanged(evento) {\n  ui.showToast(\n    \"Localizacin cambiada.\\nLatitud: \" +\n      evento.latitude +\n      \"\\nLongitud:\" +\n      evento.longitude\n  );\n}\n\nfunction onDistanceMeter(evento) {\n  ui.showToast(\"Distancia en metros: \" + evento.distance);\n}\n\nfunction showMarkers() {\n  let nLength = allMarkers.length;\n  for (let i = 0; i < nLength; i++) {\n    let marker = allMarkers[i];\n    marker.setVisible(true);\n  }\n}\n\nfunction hideMarkers() {\n  let nLength = allMarkers.length;\n  for (let i = 0; i < nLength; i++) {\n    let marker = allMarkers[i];\n    marker.setVisible(false);\n  }\n}\n\nfunction setMarkersDraggable(bDraggable) {\n  let nLength = allMarkers.length;\n  for (let i = 0; i < nLength; i++) {\n    let marker = allMarkers[i];\n    marker.setDraggable(bDraggable);\n  }\n}\n\nfunction removeMarkers() {\n  let nLength = allMarkers.length;\n  for (let i = 0; i < nLength; i++) {\n    let marker = allMarkers[i];\n    marker.remove();\n  }\n  allMarkers.splice(0, allMarkers.length);\n}\n\nasync function doChangeMapPois(sMapControl) {\n  let mapContent = await self.getContents(\"ClientesCoord\");\n  if (mapContent.getFilter() == \"t1.NOMBRE = 'Madrid'\") {\n    mapContent.setFilter(\"\");\n  } else {\n    mapContent.setFilter(\"t1.NOMBRE = 'Madrid'\");\n  }\n  mapContent.unlock();\n  mapContent.clear();\n  await mapContent.loadAll();\n  mapContent.lock();\n  ui.refresh(sMapControl);\n}\n\nfunction doRefresh(sControl) {\n  if (!sControl) {\n    throw \"El nombre del control no puede estar vaco\";\n  }\n  ui.refresh(sControl);\n}\n\nfunction getUserLocation(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  let userLocation = mapControl.getUserLocation();\n  if (userLocation === null) {\n    ui.showToast(\"No se ha podido obtener la localizacin del usuario\");\n  } else {\n    ui.showToast(\n      \"Latitud: \" +\n        userLocation.latitude +\n        \"\\nLongitud: \" +\n        userLocation.longitude\n    );\n  }\n}\n\nfunction isUserLocationEnabled(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  ui.showToast(\"Enabled: \" + mapControl.isUserLocationEnabled());\n}\n\nfunction enableUserLocation(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  mapControl.enableUserLocation();\n}\n\nfunction disableUserLocation(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  mapControl.disableUserLocation();\n}\n\nfunction drawLine(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  mapControl.drawLine(\n    \"ruta 1\",\n    \"#FF0000\",\n    \"normal\",\n    37.348394305664385,\n    -9.723497182130814,\n    37.348394305664385,\n    -0.002672821283340454\n  );\n  mapControl.drawLine(\n    \"ruta 1\",\n    \"#00FF00\",\n    \"dashed\",\n    38.47718888472095,\n    -9.644861854612827,\n    38.63807799294125,\n    -0.1756015419960022\n  );\n  mapControl.drawLine(\n    \"ruta 2\",\n    \"#0000FF\",\n    \"dotted\",\n    41.053614029734,\n    -9.531369879841805,\n    40.98011827779008,\n    0.7152241095900536\n  );\n  mapControl.drawLine(\n    \"ruta 2\",\n    \"#FFFF00\",\n    \"mixed\",\n    43.67910133655382,\n    -10.153294019401073,\n    43.03194923828824,\n    3.0807440355420117\n  );\n}\n\nfunction drawLine2(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  let params = {\n    line: \"ruta 1\",\n    strokeColor: \"#FF0000\",\n    mode: \"normal\",\n    locations: [\n      {\n        latitude: 37.348394305664385,\n        longitude: -9.723497182130814,\n      },\n      {\n        latitude: 37.348394305664385,\n        longitude: -0.002672821283340454,\n      },\n    ],\n  };\n  mapControl.drawLine(params);\n  params = {\n    line: \"ruta 1\",\n    strokeColor: \"#00FF00\",\n    mode: \"dashed\",\n    locations: [\n      {\n        latitude: 38.47718888472095,\n        longitude: -9.644861854612827,\n      },\n      {\n        latitude: 38.63807799294125,\n        longitude: -0.1756015419960022,\n      },\n    ],\n  };\n  mapControl.drawLine(params);\n  params = {\n    line: \"ruta 2\",\n    strokeColor: \"#0000FF\",\n    mode: \"dotted\",\n    locations: [\n      {\n        latitude: 41.053614029734,\n        longitude: -9.531369879841805,\n      },\n      {\n        latitude: 40.98011827779008,\n        longitude: 0.7152241095900536,\n      },\n    ],\n  };\n  mapControl.drawLine(params);\n  params = {\n    line: \"ruta 2\",\n    strokeColor: \"#FFFF00\",\n    mode: \"mixed\",\n    locations: [\n      {\n        latitude: 43.67910133655382,\n        longitude: -10.153294019401073,\n      },\n      {\n        latitude: 43.03194923828824,\n        longitude: 3.0807440355420117,\n      },\n    ],\n  };\n  mapControl.drawLine(params);\n}\n\nfunction drawRoute(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  let params = {\n    route: \"ruta 1\",\n    // Estos dos parmetros solo estn soportados con OpenStreetMap\n    // urlType             : \"osm2po\",\n    // url                 : \"http://127.0.0.1:8888/Osm2poService\",\n    // urlType             : \"osrm\",\n    // url                 : \"http://127.0.0.1:5000/route/v1/\",\n    // Usar accurate para tener una ruta precisa con Google Maps. Consume bastante ms recursos y puede hacer el mapa de Google lento\n    // accurate            : true,\n    // Badajoz\n    sourceLatitude: 38.8685452,\n    sourceLongitude: -6.8170906,\n    // Madrid\n    destinationLatitude: 40.4167747,\n    destinationLongitude: -3.70379019,\n    /*\n     * Usar waypoints para indicar una ruta con ms de dos posiciones (no\n     * soportado con osm2po)\n     */\n\n    // waypoints: [{\n    //     // Madrid\n    //     latitude : 40.4893538,\n    //     longitude: -3.6827461\n    // }, {\n    //     // Badajoz\n    //     latitude : 38.8685452,\n    //     longitude: -6.8170906\n    // }, {\n    //     // Barcelona\n    //     latitude : 41.3850632,\n    //     longitude: 2.1734035\n    // }],\n    mode: \"driving\",\n    strokeColor: \"#FFFF00\",\n    strokeWidth: 5.0,\n  };\n  mapControl.drawRoute(params);\n  //mapControl.zoomTo(40.4167747, -3.70379019);\n}\n\nfunction drawArea(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  let params = {\n    id: \"Area #2\",\n    fillcolor: \"#7F00FF00\",\n    color: \"#FF0000FF\",\n    width: 5,\n    pattern: \"normal\",\n    // El polgono a dibujar (La Corua -> Bilbao -> Lisboa)\n    data: [\n      \"43.3712591, -8.4188010\",\n      \"43.2603479, -2.9334110\",\n      \"38.7166700, -9.1333300\",\n    ],\n  };\n  mapControl.drawArea(params);\n}\n\nfunction drawEncodeArea(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  let params = {\n    id: \"Area #1\",\n    fillcolor: \"#7F0000FF\",\n    color: \"#FFFF0000\",\n    width: 5,\n    pattern: \"normal\",\n    // El polgono a dibujar (Badajoz -> Madrid -> Barcelona -> Valencia)\n    data: toEncoded([\n      \"38.8685452, -6.8170906\",\n      \"40.4167747, -3.70379019\",\n      \"41.3850632, 2.1734035\",\n      \"39.4561165, -0.3545661\",\n    ]),\n  };\n  mapControl.drawEncodeArea(params);\n}\n\nfunction removeArea(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  mapControl.removeArea(\"Area #1\");\n}\n\nfunction clearAllAreas(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  mapControl.clearAllAreas();\n}\n\nfunction routeTo(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  let params = {\n    route: \"ruta 1\",\n    sourceLatitude: 40.4167747,\n    sourceLongitude: -3.70379019,\n    destinationLatitude: 41.3850632,\n    destinationLongitude: 2.1734035,\n    mode: \"driving\",\n    strokeColor: \"#FFFF00\",\n    strokeWidth: 5.0,\n    //Valores posibles: internal, external, google_maps, osmand, osmand_plus\n    source: \"external\",\n  };\n  mapControl.routeTo(params);\n  //mapControl.zoomTo(40.4167747, -3.70379019);\n}\n\nfunction clearRoute(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  mapControl.clearRoute(\"ruta 1\");\n}\n\nfunction clearAllRoutes(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  mapControl.clearAllRoutes();\n}\n\nfunction clearLine(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  mapControl.clearLine(\"ruta 1\");\n}\n\nfunction clearAllLines(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  mapControl.clearAllLines();\n}\n\nfunction showPoisMenu(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  mapControl.showPoisMenu();\n}\n\nfunction hidePoisMenu(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  mapControl.hidePoisMenu();\n}\n\nfunction togglePoisMenu(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  mapControl.togglePoisMenu();\n}\n\nfunction zoomTo(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  mapControl.zoomTo(38.886546, -7.0043193);\n}\n\nfunction zoomToEncodeData(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  mapControl.zoomToEncodeData(\n    toEncoded([\"38.8685452, -6.8170906\", \"40.4167747, -3.70379019\"])\n  );\n}\n\nfunction zoomToBounds(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  mapControl.zoomToBounds([\n    \"35.946850084, -9.39288367353\",\n    \"43.7483377142, 3.03948408368\",\n  ]);\n}\n\nfunction zoomToMyLocation(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  mapControl.zoomToMyLocation(20);\n}\n\nfunction restrictMapToBounds(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  mapControl.restrictMapToBounds([\n    \"35.946850084, -9.39288367353\",\n    \"43.7483377142, 3.03948408368\",\n  ]);\n}\n\nfunction startDistanceMeter(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  let jsParams = {\n    latitude: 38.886546,\n    longitude: -7.0043193,\n    startMarkerIcon: \"start_distance_marker_icon.png\",\n    endMarkerIcon: \"end_distance_marker_icon.png\",\n  };\n  mapControl.startDistanceMeter(jsParams);\n  // mapControl.startDistanceMeter(\"38.886546,-7.0043193\");\n  mapControl.zoomTo(38.886546, -7.0043193);\n}\n\nfunction stopDistanceMeter(sMapControl) {\n  let mapControl = getControl(sMapControl);\n  if (!mapControl) {\n    return;\n  }\n  mapControl.stopDistanceMeter();\n}\n\nasync function testInexistente(sMapControl) {\n  let contents = await self.getContents(\"ClientesCoord\");\n  let newObject = await contents.createObject();\n  newObject.NOMBRE = \"Test POI\";\n  newObject.DIRECCION = \"Calle Falsa\";\n  contents.unlock();\n  contents.clear();\n  contents.addItem(newObject);\n  contents.lock();\n  let window = ui.getView(self);\n  if (!window) {\n    return;\n  }\n  window.refresh(sMapControl);\n}\n\nfunction distanceTo() {\n  //let jsParams = [\"38.8685452, -6.8170906\", \"40.4167747, -3.70379019\"];\n  let jsParams = [\n    {\n      latitude: 38.8685452,\n      longitude: -6.8170906,\n    },\n    {\n      latitude: 40.4167747,\n      longitude: -3.70379019,\n    },\n  ];\n  let nMeters = new GpsTools().distanceTo(jsParams);\n  ui.showToast(\"Distancia entre Badajoz y Madrid: \" + nMeters + \" metros.\");\n}\n\nasync function getAddressFromPosition() {\n  let result = new GpsTools().getAddressFromPosition(\"38.8862106, -7.0040345\");\n  let str =\n    \"Localidad: \" +\n    result.locality +\n    \"\\nSublocalidad: \" +\n    result.subLocality +\n    \"\\nrea administracin: \" +\n    result.adminArea +\n    \"\\nSubrea de administracin: \" +\n    result.subAdminArea +\n    \"\\nCaractersticas: \" +\n    result.features +\n    \"\\nPas: \" +\n    result.country +\n    \"\\nCdigo pas: \" +\n    result.countryCode +\n    \"\\nCalle: \" +\n    result.street +\n    \"\\nNmero: \" +\n    result.number +\n    \"\\nDireccin: \" +\n    result.address +\n    \"\\nCdigo postal: \" +\n    result.postal;\n  await ui.msgBox(str, \"Resultado\", 0);\n}\n\nasync function containsLocation() {\n  let bResult;\n  await ui.msgBox(\n    \"Es Teruel una ciudad contenida en un polgono formado por La Corua -> Bilbao -> Lisboa?\",\n    \"Mensaje\",\n    0\n  );\n  bResult = new GpsTools().containsLocation(\"40.3633442, -1.0893794\", [\n    \"43.3712591, -8.4188010\",\n    \"43.2603479, -2.9334110\",\n    \"38.7166700, -9.1333300\",\n  ]);\n  if (bResult) {\n    await ui.msgBox(\"Por ah anda Teruel\", \"Mensaje\", 0);\n  } else {\n    await ui.msgBox(\"No, Teruel no est ah\", \"Mensaje\", 0);\n  }\n  await ui.msgBox(\n    \"Es Teruel una ciudad contenida en un polgono formado por Badajoz -> Madrid -> Barcelona -> Valencia?\",\n    \"Mensaje\",\n    0\n  );\n  bResult = new GpsTools().containsLocation(\"40.3633442, -1.0893794\", [\n    \"38.8685452, -6.8170906\",\n    \"40.4167747, -3.70379019\",\n    \"41.3850632, 2.1734035\",\n    \"39.4561165, -0.3545661\",\n  ]);\n  if (bResult) {\n    await ui.msgBox(\"Por ah anda Teruel\", \"Mensaje\", 0);\n  } else {\n    await ui.msgBox(\"No, Teruel no est ah\", \"Mensaje\", 0);\n  }\n}\n\nasync function getLastKnownLocation() {\n  let location = new GpsTools().getLastKnownLocation();\n  if (!location) {\n    ui.showToast(\"No hay ltima localizacin conocida\");\n    return;\n  }\n  await ui.msgBox(\n    \"Latitud: \" +\n      location.latitude +\n      \"\\nLongitud: \" +\n      location.longitude +\n      \"\\nPrecisin (metros): \" +\n      location.accuracy +\n      \"\\nAltitud (metros elipsis WSG 84): \" +\n      location.altitude +\n      \"\\nRumbo (grados): \" +\n      location.bearing +\n      \"\\nVelocidad (metros/segundo): \" +\n      location.speed +\n      \"\\nFecha: \" +\n      location.time.toString(),\n    \"Mensaje\",\n    0\n  );\n}\n\nfunction encoded() {\n  let sEncoded = toEncoded([\n    \"38.8685452, -6.8170906\",\n    \"40.4167747, -3.70379019\",\n  ]);\n  ui.showToast(sEncoded);\n}\n\nfunction toEncoded(lstCoords) {\n  if (!lstCoords) {\n    return null;\n  }\n  return new GpsTools().encode(lstCoords);\n}\n\nfunction doFollowUserLocation(sControl, bFollow) {\n  let control = getControl(sControl);\n  if (!control) {\n    return;\n  }\n  control.setFollowUserLocation(bFollow);\n}\n\nfunction doSetMapType(sControl, sMapType) {\n  let control = getControl(sControl);\n  if (!control) {\n    return;\n  }\n  control.setMapType(sMapType);\n}\n\nfunction getControl(sControl) {\n  if (!sControl) {\n    throw \"El nombre del control no puede estar vaco\";\n  }\n  let window = ui.getView(self);\n  if (!window) {\n    return null;\n  }\n  let control = window[sControl];\n  if (!control) {\n    return null;\n  }\n  if (control === undefined) {\n    return null;\n  }\n  return control;\n}\n\n/***\n *\n * Code from pdf.js\n *\n ***/\n\nfunction AddTableCellText(\n  pdf,\n  cellText,\n  leftBorder,\n  topBorder,\n  rightBorder,\n  bottomBorder\n) {\n  pdf.setCellBorder(\"none\");\n  if (leftBorder === true) pdf.setCellBorder(\"left\");\n  if (rightBorder === true) pdf.setCellBorder(\"right\");\n  if (topBorder === true) pdf.setCellBorder(\"top\");\n\n  if (bottomBorder) pdf.setCellBorder(\"bottom\");\n  pdf.addCellText(cellText);\n}\n\nasync function GeneratePDFDocument() {\n  var pdf01 = createObject(\"XOnePDF\");\n  pdf01.create(\"PDFbyXOne.pdf\");\n  pdf01.open();\n\n  pdf01.setFont(\"helvetica\");\n  pdf01.setFontSize(12);\n  pdf01.setFontStyle(\"normal\");\n  pdf01.setFontColor(\"#000000\");\n\n  pdf01.createTable(1);\n  pdf01.setTableCellWidths(400);\n  AddTableCellText(pdf01, \"\", 0, 0, 0, 0);\n  pdf01.setAlignment(\"center\");\n  AddTableCellText(pdf01, \"Prueba Crear PDF\", 0, 0, 0, 0);\n  pdf01.addTable();\n\n  pdf01.setFontSize(9);\n\n  pdf01.createTable(1);\n  pdf01.setTableCellWidths(400);\n  AddTableCellText(pdf01, \" \", 0, 0, 0, 0);\n  pdf01.addTable();\n\n  pdf01.createTable(3);\n  pdf01.setTableCellWidths(280, 70, 50);\n  AddTableCellText(pdf01, \"\", 0, 0, 0, 0);\n  pdf01.setAlignment(\"left\");\n  AddTableCellText(pdf01, \"Serie: \", 1, 1, 0, 0);\n  pdf01.setAlignment(\"center\");\n  AddTableCellText(pdf01, self.MAP_PDFSERIE, 0, 1, 1, 0);\n  pdf01.addTable();\n\n  pdf01.createTable(6);\n  pdf01.setTableCellWidths(60, 70, 60, 90, 30, 90);\n  pdf01.setAlignment(\"left\");\n  AddTableCellText(pdf01, \"FECHA \", 1, 1, 0, 1);\n  pdf01.setAlignment(\"center\");\n  AddTableCellText(pdf01, getDate(self.MAP_PDFFECHA), 0, 1, 1, 1);\n  pdf01.setAlignment(\"left\");\n  AddTableCellText(pdf01, \" \", 0, 1, 0, 1);\n  pdf01.setAlignment(\"center\");\n  AddTableCellText(pdf01, \"\", 0, 1, 1, 1);\n  pdf01.setAlignment(\"left\");\n  AddTableCellText(pdf01, \"N \", 0, 1, 0, 1);\n  pdf01.setAlignment(\"center\");\n  AddTableCellText(pdf01, self.MAP_PDFNUMERO, 0, 1, 1, 1);\n  pdf01.addTable();\n\n  pdf01.createTable(1);\n  pdf01.setTableCellWidths(400);\n  AddTableCellText(pdf01, \"\", 0, 0, 0, 0);\n  pdf01.setAlignment(\"left\");\n  AddTableCellText(pdf01, cstr(self.MAP_PDFTEXT), 0, 0, 0, 0);\n  pdf01.addTable();\n\n  pdf01.addImageSetXY(\"faro.jpg\", 200, 100, 150, 75);\n\n  pdf01.close();\n\n  pdf01.flattenPdf(\"\");\n\n  //var a=ui.mgBox (\"Quiere Abrir el PDF?\",\"PDF GENERADO\",4);\n  if ((await ui.msgBox(\"Quiere Abrir el PDF?\", \"PDF GENERADO\", 4)) === 6)\n    pdf01.launchPDF(\"PDFbyXOne.pdf\");\n\n  pdf01 = null;\n}\n\nfunction getDate(stdate) {\n  return stdate.toString().substr(0, 11);\n\n  // \tgetDate = \"\"\n  // \tgetDate = mid(cstr(stdate),1,11)\n  // \texit function\n}\n\n/***\n *\n * Code from vbscriptsupport.js\n *\n ***/\n\nfunction VBScriptSupport() {\n  this.cstr = function(value) {\n    return safeToString(value);\n  };\n\n  this.now = function() {\n    return new Date();\n  };\n\n  this.len = function(str) {\n    return safeToString(str).length;\n  };\n\n  this.cint = function(value) {\n    return parseInt(value);\n  };\n\n  this.left = function(str, n) {\n    if (n <= 0) {\n      return new String();\n    } else if (n > String(str).length) {\n      return safeToString(str);\n    } else {\n      return safeToString(str).substring(0, n);\n    }\n  };\n\n  this.replace = function(source, search, replacement) {\n    source = safeToString(source);\n    search = safeToString(search);\n    replacement = safeToString(replacement);\n    search = escapeRegularExpression(search);\n    source.replace(search, replacement);\n    return source;\n  };\n\n  this.day = function(mDate) {\n    mDate = safeToDate(mDate);\n    return mDate.getDate();\n  };\n\n  this.month = function(mDate) {\n    mDate = safeToDate(mDate);\n    return mDate.getMonth();\n  };\n\n  this.year = function(mDate) {\n    mDate = safeToDate(mDate);\n    return mDate.getFullYear();\n  };\n\n  this.right = function(str, n) {\n    str = new String(str);\n    if (n <= 0 || n > str.length) {\n      return str;\n    } else {\n      var iLen = str.length;\n      return str.substring(iLen, iLen - n);\n    }\n  };\n\n  this.mid = function(str, start, len) {\n    if (start < 0 || len < 0) {\n      return str;\n    }\n    var iEnd,\n      iLen = new String(str).length;\n    if (start + len > iLen) {\n      iEnd = iLen;\n    } else {\n      iEnd = start + len;\n    }\n    return new String(str).substring(start, iEnd);\n  };\n\n  this.inStr = function(strSearch, charSearchFor) {\n    for (i = 0; i < len(strSearch); i++) {\n      if (charSearchFor == mid(strSearch, i, 1)) {\n        return i;\n      }\n    }\n    return -1;\n  };\n\n  this.lcase = function(str) {\n    if (isString(str)) {\n      return str.toLowerCase();\n    }\n    return new String(str).toLowerCase();\n  };\n\n  this.ucase = function(str) {\n    if (isString(str)) {\n      return str.toUpperCase();\n    }\n    return new String(str).toUpperCase();\n  };\n\n  this.abs = function(value) {\n    return Math.abs(value);\n  };\n\n  this.trim = function(str) {\n    str = safeToString(str);\n    return str.trim();\n  };\n\n  this.split = function(str, delimiter) {\n    return str.split(delimiter);\n  };\n\n  this.dateDiff = function(sPeriod, mDate1, mDate2) {\n    mDate1 = safeToDate(mDate1);\n    mDate2 = safeToDate(mDate2);\n    nDiff = Math.abs(mDate1.getTime() - mDate2.getTime());\n    switch (sPeriod) {\n      case \"h\":\n        return nDiff / 3600000;\n      case \"n\":\n        return nDiff / 60000;\n      default:\n        throw new Error(\"dateDiff(): Unknown date period \" + sPeriod);\n    }\n  };\n\n  this.dateAdd = function(sPeriod, nNumber, mDate) {\n    mDate = safeToDate(mDate);\n    switch (sPeriod) {\n      case \"yyyy\":\n        //Year\n        mDate.setYear(mDate.getYear() + nNumber);\n        return mDate;\n      case \"q\":\n        //Quarter\n        return mDate;\n      case \"m\":\n        //Month\n        mDate.setMonth(mDate.getMonth() + nNumber);\n        return mDate;\n      case \"y\":\n        //Day of year\n        return mDate;\n      case \"d\":\n        //Day\n        mDate.setDate(mDate.getDate() + nNumber);\n        return mDate;\n      case \"w\":\n        //Weekday\n        return mDate;\n      case \"ww\":\n        //Week of year\n        return mDate;\n      case \"h\":\n        //Hour\n        mDate.setHours(mDate.getHours() + nNumber);\n        return mDate;\n      case \"n\":\n        //Minute\n        mDate.setMinutes(mDate.getMinutes() + nNumber);\n        return mDate;\n      case \"s\":\n        //Second\n        mDate.setSeconds(mDate.getSeconds() + nNumber);\n        return mDate;\n      default:\n        throw new Error(\"dateAdd(): Unknown date period \" + sPeriod);\n    }\n  };\n}\n\nvar vbSupport = new VBScriptSupport();\n\nfunction isNothing(obj) {\n  if (obj === null) {\n    return true;\n  }\n  if (obj == \"undefined\") {\n    return true;\n  }\n  return false;\n}\n\nfunction isSomething(obj) {\n  if (obj === null) {\n    return false;\n  }\n  if (obj == \"undefined\") {\n    return false;\n  }\n  return true;\n}\n\nfunction getClassName(obj) {\n  if (isNothing(obj)) {\n    return null;\n  }\n  return obj.constructor.name;\n}\n\nfunction isFloatNumber(n) {\n  return n === +n && n !== (n | 0);\n}\n\nfunction isIntegerNumber(n) {\n  return n === +n && n === (n | 0);\n}\n\nfunction isNumber(obj) {\n  if (isNothing(obj)) {\n    return false;\n  }\n  return !isNaN(parseFloat(obj)) && isFinite(obj);\n}\n\nfunction isString(obj) {\n  return typeof obj === \"string\" || obj instanceof String;\n}\n\nfunction isEmptyString(obj) {\n  if (!isString(obj)) {\n    return false;\n  }\n  return !obj || 0 === obj.length;\n}\n\nfunction isDate(obj) {\n  if (obj instanceof Date) {\n    return true;\n  }\n  return false;\n}\n\nfunction safeToString(value) {\n  if (isNothing(value)) {\n    return new String();\n  }\n  return new String(value);\n}\n\nfunction safeToDate(mDate) {\n  if (isDate(mDate)) {\n    return mDate;\n  }\n  return new Date(replaceAll(safeToString(mDate), \"-\", \"/\"));\n}\n\nfunction escapeRegularExpression(str) {\n  return str.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\n}\n\nfunction replaceAll(sSource, sSearch, sReplacement) {\n  sSearch = escapeRegularExpression(sSearch);\n  return sSource.split(sSearch).join(sReplacement);\n}\n\n/***\n *\n * Code from nfc.js\n *\n ***/\n\nfunction ponerCallbackNfc() {\n  let nfc = new XOneNFC();\n  nfc.setOnTagDiscoveredCallback(tagNfcEncontrado);\n}\n\nfunction tagNfcEncontrado(tag) {\n  let sMessage = \"ID tag NFC (hex): \" + tag.getHexId();\n  if (tag.isTechnologyAvailable(\"ndef\")) {\n    // Vamos a manipular NDEF, decrselo al frame\n    tag.setType(\"ndef\");\n    let ndefMessage = tag.getNdefMessage();\n    let allRecords = ndefMessage.getAllRecords();\n    if (!allRecords || allRecords.length <= 0) {\n      sMessage = sMessage + \"\\nNo hay records NDEF en este tag\";\n    } else {\n      for (let i = 0; i < allRecords.length; i++) {\n        let record = allRecords[i];\n        let sMimeType = record.getMimeType();\n        let sText = record.getText();\n        sMessage =\n          sMessage +\n          \"\\nRecord #1\\nMime type: \" +\n          sMimeType +\n          \"\\nText: \" +\n          sText;\n      }\n    }\n    self.MAP_DATA = sMessage;\n    ui.refreshValue(\"MAP_DATA\");\n  } else if (tag.isTechnologyAvailable(\"nfc_v\")) {\n    tag.setType(\"nfc_v\");\n    tag.connect();\n    ui.showToast(\"Es NFC-V: \" + tag.readNfcV());\n  } else {\n    ui.showToast(\"Tag NFC invlido\");\n  }\n}\n\n/***\n *\n * Code from dnie.js\n *\n ***/\n\n// Lectura de DNI datos personales\nfunction enableDnieReader() {\n  if (self.MAP_CAN_NUMBER === \"\") {\n    ui.showSnackbar(\"Introduzca el CAN del DNI electrnico\");\n    return;\n  }\n  var options = {\n    readProfileData: true,\n    // Recuperar la foto del usuario, la de la firma y los certificados de autenticacin y firma es lento. Hacerlo slo cuando sea necesario.\n    readUserImage: true,\n    readSignatureImage: true,\n    canNumber: self.MAP_CAN_NUMBER,\n    onDnieRead: function(dnieReadResult) {\n      self.MAP_TEXT = \"DNI number: \" + dnieReadResult.getDniNumber() + \"\\n\";\n      self.MAP_TEXT =\n        self.MAP_TEXT +\n        \"Document type: \" +\n        dnieReadResult.getDocumentType() +\n        \"\\n\";\n      self.MAP_TEXT =\n        self.MAP_TEXT + \"Name: \" + dnieReadResult.getName() + \"\\n\";\n      self.MAP_TEXT =\n        self.MAP_TEXT + \"Surname: \" + dnieReadResult.getSurname() + \"\\n\";\n      self.MAP_TEXT =\n        self.MAP_TEXT +\n        \"Date of birth: \" +\n        dnieReadResult.getDateOfBirth() +\n        \"\\n\";\n      self.MAP_TEXT =\n        self.MAP_TEXT +\n        \"Date of expiry: \" +\n        dnieReadResult.getDateOfExpiry() +\n        \"\\n\";\n      self.MAP_TEXT =\n        self.MAP_TEXT +\n        \"Nationality: \" +\n        dnieReadResult.getNationality() +\n        \"\\n\";\n      self.MAP_TEXT =\n        self.MAP_TEXT + \"Issuer: \" + dnieReadResult.getIssuer() + \"\\n\";\n      self.MAP_TEXT =\n        self.MAP_TEXT +\n        \"Optional data: \" +\n        dnieReadResult.getOptionalData() +\n        \"\\n\";\n      self.MAP_TEXT = self.MAP_TEXT + \"Sex: \" + dnieReadResult.getSex() + \"\\n\";\n      self.MAP_TEXT =\n        self.MAP_TEXT + \"Birth place: \" + dnieReadResult.getBirthPlace() + \"\\n\";\n      self.MAP_TEXT =\n        self.MAP_TEXT + \"Address: \" + dnieReadResult.getAddress() + \"\\n\";\n      self.MAP_TEXT =\n        self.MAP_TEXT +\n        \"Custody info: \" +\n        dnieReadResult.getCustodyInfo() +\n        \"\\n\";\n      self.MAP_TEXT =\n        self.MAP_TEXT + \"Icao name: \" + dnieReadResult.getIcaoName() + \"\\n\";\n      self.MAP_TEXT =\n        self.MAP_TEXT + \"Other info: \" + dnieReadResult.getOtherInfo() + \"\\n\";\n      self.MAP_TEXT =\n        self.MAP_TEXT + \"Profession: \" + dnieReadResult.getProfession() + \"\\n\";\n      self.MAP_TEXT =\n        self.MAP_TEXT + \"Phone: \" + dnieReadResult.getPhone() + \"\\n\";\n      self.MAP_TEXT =\n        self.MAP_TEXT + \"Title: \" + dnieReadResult.getTitle() + \"\\n\";\n      self.MAP_TEXT = self.MAP_TEXT + \"Summary: \" + dnieReadResult.getSummary();\n      self.MAP_USER_IMAGE = dnieReadResult.getUserImage(\n        appData.getFilesPath() +\n          \"user_\" +\n          dnieReadResult.getDniNumber() +\n          \".png\"\n      );\n      self.MAP_SIGNATURE_IMAGE = dnieReadResult.getSignatureImage(\n        appData.getFilesPath() +\n          \"signature_\" +\n          dnieReadResult.getDniNumber() +\n          \".png\"\n      );\n      ui.refreshValue(\"MAP_TEXT\");\n      ui.refresh(\"MAP_TEXT\", \"MAP_USER_IMAGE\", \"MAP_SIGNATURE_IMAGE\");\n    },\n    onDnieReadError: function(sReadError) {\n      self.MAP_TEXT = \"Error: \" + sReadError;\n      ui.refreshValue(\"MAP_TEXT\");\n    },\n    onProgressUpdated: function(sMessage, nProgress) {\n      self.MAP_TEXT = \"Reading DNIe.\\nProgress: \" + nProgress + \"\\n\" + sMessage;\n      ui.refreshValue(\"MAP_TEXT\");\n    },\n  };\n  var nfc = createObject(\"XOneNFC\");\n  nfc.enableDnieReader(options);\n  ui.showSnackbar(\"Pase su DNI electrnico por el lector NFC\");\n}\n\nfunction disableDnieReader() {\n  var nfc = createObject(\"XOneNFC\");\n  nfc.disableDnieReader();\n}\n\n// Ejemplo de PDFs\nfunction generatePdfDemo() {\n  var source =\n    \"<P> <TABLE border='1'> <CAPTION align='top'> A more complex table-within-a table. </CAPTION> <TR> <TH> Outer Table </TH> <TD> <TABLE border='1'> <CAPTION align='top'> An inner table showing a variety of headings and data items. </CAPTION> <TR> <TH colspan='5'> Inner Table </TH> </TR> <TR> <TH rowspan='2' colspan='2'> CORNER </TH> <TH colspan='3'> Head1 </TH> </TR> <TR> <TH rowspan='2'> Head2 </TH> <TH colspan='2'> Head3 </TH> </TR> <TR> <TH> Head4 </TH> <TH> Head5 </TH> <TH> Head6 </TH> </TR> <TR> <TD> A </TD> <TD rowspan='2' valign='middle' bgcolor= 'yellow'> Two Tall </TD> <TD bgcolor='green'> <UL> <LI> Lists can be table data </LI> <LI> Images can be table data </LI> </UL> </TD> <TD colspan='2' align='center'> Two Wide </TD> </TR> <TR valign='middle'> <TD> aaaaa </TD> <TD align='center'> A <A href='form.html'>Form</A> in a table: <FORM Method='POST' Action= 'http://www.december.com/cgi-bin/formmail.secure.cgi'> <INPUT type='hidden' name='recipient' value='nobody@december.com'><INPUT type= 'hidden' name='subject' value= 'Table Example'> Your age: <INPUT type= 'text' name='user-age' size='2'><BR> What is your favorite ice cream?<BR> <SELECT name='favorite-icecream'> <OPTION> Vanilla </OPTION> <OPTION> Chocolate </OPTION> <OPTION> Cherry Garcia </OPTION> <OPTION> Pizza Pancake </OPTION> <OPTION> None of the above! </OPTION> </SELECT><BR> <INPUT type='submit' value='OK'> <INPUT type='reset' value='Cancel'> </FORM> </TD> <TD> <TABLE> <CAPTION> No border </CAPTION> <TR> <TH> Little </TH> </TR> <TR> <TD> Table </TD> </TR> </TABLE> </TD> <TD> Multiple<BR> line<BR> item </TD> </TR> </TABLE> </TD> </TR> </TABLE> <P> For more practical examples, see the Periodic Table of the Elements, <A href= 'http://www.webelements.com/'>WebElements</A>. </P> <P> You can see a <A href='tablem.html'>variety of table cellspacing and cellpadding attributes demonstrated</A>. </P>\";\n  var pdf = createObject(\"XOnePDF\");\n  pdf.permissions(\"assembly\");\n  pdf.create(appData.getFilesPath() + \"PDFbyXOne.pdf\");\n  pdf.open();\n  pdf.fromHtml(source);\n  pdf.close();\n  pdf.launchPDF();\n}\n\n// Lectura de DNIs (firma digital)\nfunction signPdfDemo() {\n  var fm = createObject(\"FileManager\");\n  var nResult = fm.fileExists(appData.getFilesPath() + \"PDFbyXOne.pdf\");\n  if (nResult != 0) {\n    ui.showSnackbar(\"El fichero PDF a firmar no existe. Genrelo primero.\");\n    return;\n  }\n  if (self.MAP_CAN_NUMBER == \"\") {\n    ui.showSnackbar(\"Introduzca el CAN del DNI electrnico\");\n    return;\n  }\n  if (self.MAP_PIN == \"\") {\n    ui.showSnackbar(\"Introduzca el PIN del DNI electrnico\");\n    return;\n  }\n  var options = {\n    readSignatureCertificate: true,\n    canNumber: self.MAP_CAN_NUMBER,\n    pin: self.MAP_PIN,\n    onDnieRead: function(dnieReadResult) {\n      var pdf = createObject(\"XOnePDF\");\n      var sSourcePdf = appData.getFilesPath() + \"PDFbyXOne.pdf\";\n      var sSignedPdf = appData.getFilesPath() + \"PDFbyXOne_signed.pdf\";\n      pdf.signPdfWithKey(\n        sSourcePdf,\n        sSignedPdf,\n        dnieReadResult.getSignatureKey(),\n        dnieReadResult.getSignatureCertificateChain()\n      );\n      pdf.launchPDF(sSignedPdf);\n    },\n    onDnieReadError: function(sReadError) {\n      self.MAP_TEXT = \"Error: \" + sReadError;\n      ui.refreshValue(\"MAP_TEXT\");\n    },\n    onProgressUpdated: function(sMessage, nProgress) {\n      self.MAP_TEXT =\n        \"Reading DNIe.\\nProgress: \" + nProgress + \"%\\n\" + sMessage;\n      ui.refreshValue(\"MAP_TEXT\");\n    },\n  };\n  var nfc = createObject(\"XOneNFC\");\n  nfc.enableDnieReader(options);\n  ui.showSnackbar(\"Pase su DNI electrnico por el lector NFC\");\n}\n\nfunction sendSignedPdf() {\n  var fm = createObject(\"FileManager\");\n  var sSignedPdf = appData.getFilesPath() + \"PDFbyXOne_signed.pdf\";\n  var nResult = fm.fileExists(sSignedPdf);\n  if (nResult != 0) {\n    ui.showSnackbar(\"El fichero PDF firmado no existe. Frmelo primero.\");\n    return;\n  }\n  ui.sendMail(\n    \"\",\n    \"\",\n    \"PDF firmado\",\n    \"Adjunto PDF firmado con DNI electrnico\",\n    sSignedPdf\n  );\n}\n\n/***\n *\n * Code from funciones_calendario.js\n *\n ***/\n\nasync function inicializarCal() {\n  //Primero eliminamos los registros que haya. Lo hacemos de forma logica.\n  //Habra algun mantenimiento programado que elimine estos registros, de forma que los borrados no entren en replica.\n  var cCal = await appData.getCollection(\"ContentdatosCalendario\");\n  var objCalendario;\n  var stDia, fecha;\n  for (var k = 1; k <= 5; k++) {\n    fecha = new Date();\n    objCalendario = await cCal.createObject();\n    cCal.addItem(objCalendario);\n    //  Vamos a agregar algunos eventos en distintos das para probar.\n    stDia = \"00\" + k * 5;\n    stDia = Right(stDia, 2);\n    objCalendario.FECHA =\n      \"\" + fecha.getFullYear() + \"-\" + fecha.getMonth() + \"-\" + stDia;\n    objCalendario.HORAINI = \"19:00\";\n    objCalendario.HORAFIN = \"23:00\";\n    if (k === 1 || k === 3) {\n      objCalendario.TIPO = \"Info: Azul\";\n      objCalendario.DESCRIPCION = \"Tarea de informacin\";\n    } else {\n      if (k === 2 || k === 5) {\n        objCalendario.TIPO = \"Visita: Naranja\";\n        objCalendario.DESCRIPCION = \"Visita al cliente\";\n      } else {\n        objCalendario.TIPO = \"Pedido: Verde\";\n        objCalendario.DESCRIPCION = \"Visita con pedido creado\";\n      }\n    }\n    await objCalendario.save();\n  }\n  objCalendario = null;\n  cCal = null;\n}\n\nasync function ShowMessageDebug(mode, stmsg) {\n  //Para poder utilizar esta funcion tenemos que tener una variable global \"Debug\"\n  if (appData.getCurrentEnterprise().getVariables(\"Debug\") === true) {\n    if (mode === \"msgbox\") await ui.msgBox(stmsg, \"App_log_xone!\", 0);\n    else if (mode === \"showtoast\") ui.showToast(\"App_log_xone->\" + stmsg);\n    else if (mode === \"consola\")\n      appdata.writeConsoleString(\"App_log_xone->\" + stmsg);\n  }\n}\n\n/***\n *\n * Code from funciones_chat.js\n *\n ***/\n\n// Funcion para bloquear un listado de contents.\n// listContents: Listado de contents\nasync function lockContents(listContents) {\n  var content = null;\n  for (var i = 0; i < listContents.length; i++) {\n    content = await self.getContents(listContents[i]);\n    if (content != null) {\n      content.lock();\n    }\n  }\n}\n\n// Funcion para inicializar los parametros de la coleccion EspecialChat\nasync function inicializeChats() {\n  self.MAP_GRUPOSEL = 1;\n  self.MAP_VERFLOTANTE = 0;\n  self.MAP_RECORDON = 0;\n  self.MAP_PHONE = \"\";\n  self.MAP_USERLOGIN = user.LOGIN;\n  (await self.getContents(\"Chat\")).setMacro(\"##MACRO##\", user.LOGIN);\n  self.MAP_FOTO_FONDO = \"fondo_chat.png\";\n}\n\n// Function para crear el chat ...\nasync function createChat(userFrom, userTo) {\n  var index = 0;\n  var coll = await self.getContents(\"Chat\");\n  coll.unlock();\n  var obj = await coll.findObject(\n    \"(USUARIO='\" +\n      userFrom +\n      \"' AND USUARIO2='\" +\n      userTo +\n      \"') OR (USUARIO='\" +\n      userTo +\n      \"' AND USUARIO2='\" +\n      userFrom +\n      \"')\"\n  );\n  if (obj == null) {\n    obj = await coll.createObject();\n    obj.USUARIO = userFrom;\n    obj.USUARIO2 = userTo;\n    obj.FECHA = new Date();\n    await obj.save();\n  }\n  index = obj.getObjectIndex();\n  coll.lock();\n  return index;\n}\n\nasync function openChat(index, mSelf) {\n  var coll = await mSelf.getContents(\"Chat\");\n  coll.unlock();\n  await coll.loadAll();\n  var obj = coll.get(index);\n  mSelf.MAP_INDICESEL = index;\n  mSelf.MAP_IDCHATSEL = obj.ID;\n  mSelf.MAP_IMGTIPO = obj.MAP_IMAGEN;\n  mSelf.MAP_CHATTITULO = obj.MAP_TITULO;\n  mSelf.MAP_CCUSUARIO = obj.USUARIO2;\n  coll.lock();\n  ui.getView(mSelf).refresh(\"MAP_BTVERGENTE\", \"MAP_IMGTIPO\", \"MAP_CHATTITULO\");\n  await mSelf.executeNode(\"abrirDrawer(2)\");\n}\n\nasync function openListUser() {\n  // habilitamos la visibilidad de la ventana flotante ...\n  self.MAP_VERFLOTANTE = 1;\n  // desbloqueamos el content que contiene a los usuarios ya que lo hemos bloqueado en el nodo after-edit ...\n  (await self.getContents(\"nUsuarios\")).unlock();\n  await (await self.getContents(\"nUsuarios\")).loadAll();\n  (await self.getContents(\"nUsuarios\")).lock();\n  // creamos el indice despues de cargar los usuarios, para poder buscar en memoria ...\n  (await self.getContents(\"nUsuarios\")).createSearchIndex([\"NOMBRE,\"]);\n  // usamos refreshAll porque queremos que se refresquen todos sus hijos y no solo la visibilidad del frame ...\n  ui.getView(self).refreshAll(\"frmnuevochat\");\n}\n\nfunction closeListUser() {\n  self.MAP_VERFLOTANTE = 0;\n  ui.getView(self).refresh(\"frmnuevochat\");\n}\n\nfunction salir() {\n  //ui.showToast(\"MAP_VERFLOTANTE: \"+ self.MAP_VERFLOTANTE);\n  //ui.showToast(\"MAP_GRUPOSEL: \"+ self.MAP_GRUPOSEL);\n  if (self.MAP_VERFLOTANTE != 0) {\n    self.MAP_VERFLOTANTE = 0;\n    ui.refresh(\"frmnuevochat,frmInfoCentralfloating\");\n  } else {\n    if (self.MAP_GRUPOSEL == 1) {\n      appData.failWithMessage(-11888, \"##EXIT##\");\n    } else {\n      ui.refresh(\"Chat\");\n      self.MAP_GRUPOSEL = 1;\n      irGrupo(1);\n    }\n  }\n}\n\nfunction setTimeRecording(sTime) {\n  var v = self[sTime].split(\":\");\n  var m = Number(v[0]);\n  var s = Number(v[1]);\n  if (s < 60) {\n    s++;\n  } else {\n    m++;\n    s = 0;\n  }\n  if (s < 10) {\n    s = \"0\" + s.toString();\n  }\n  self[sTime] = m.toString() + \":\" + s.toString();\n  ui.refreshValue(sTime);\n  if (self.MAP_RECORDON == 1) {\n    ui.executeActionAfterDelay(\"onSetTime\", 1);\n  }\n}\n\nasync function AccionesChatEspecial(parametro, evento) {\n  var coll, obj, fecha;\n  switch (parametro) {\n    case \"nuevochat\":\n      // Aqui es donde vamos a crear un nuevo chat ...\n      await openListUser();\n      break;\n    case \"ok\":\n      // Aqui es donde ese crea el chat y se abre ...\n      // creamos el chat, si no existiera ...\n      var index = await createChat(user.LOGIN, self.MAP_CCUSUARIO);\n      // cerramos el menu de seleccion de usuarios ...\n      closeListUser();\n      // abrirmos el chat ...\n      await openChat(index, self);\n      break;\n    case \"llamada\":\n      //ver a quien llamamos\n      //si es unico, es decir, personal, se llama al USUARIO\n      //si es grupo: mostrar frame flotante, para llamar a uno de ellos\n      if (self.MAP_PHONE.toString().length == 0) {\n        await ui.msgBox(\n          \"La persona con la que quiere contactar no tiene relleno el nmero de telfono\",\n          \"Notificacin\",\n          0\n        );\n      } else {\n        ui.makePhoneCall(self.MAP_PHONE);\n      }\n      break;\n    case \"fotoabrir\":\n      self.MAP_TIPO = 1;\n      ui.startCamera(\"MAP_FOTO\", \"photo\");\n      break;\n    case \"voz\":\n      if (self.MAP_RECORDON == 0) {\n        self.MAP_TIPO = 2;\n        self.MAP_RECORDON = 1;\n        self.MAP_SHOWADDTEXT = 1;\n        self.MAP_TIMERECORD = \"0:00\";\n        ui.startAudioRecord(\"onrecordfinished\", \"MAP_VOZGRABADA\", 0);\n        ui.executeActionAfterDelay(\"onSetTime\", 1);\n        ui.refresh(\"frmNormal,MAP_ADDTEXT\");\n        ui.getView(self).refreshAll(\"frmRecording\");\n      } else {\n        self.MAP_TIPO = 0;\n        self.MAP_RECORDON = 0;\n        self.MAP_SHOWADDTEXT = 0;\n        self.MAP_TIMERECORD = \"0:00\";\n        ui.stopAudioRecord();\n        ui.refresh(\"frmRecording,MAP_ADDTEXT\");\n        ui.getView(self).refreshAll(\"frmNormal\");\n      }\n      break;\n    //Revisar esto en sistema operativo Android-10\n    case \"textoChange\":\n      if (evento != null) {\n        var w;\n        self.MAP_TIPO = 0;\n        if (evento.newText.length > 0 && self.MAP_SHOWADDTEXT == 0) {\n          self.MAP_SHOWADDTEXT = 1;\n          w = self.getFieldPropertyValue(\"MAP_TITLE\", \"width\");\n          w = w.replace(\"p\", \"\");\n          w = parseInt(w) + 100;\n          self.setFieldPropertyValue(\"MAP_TITLE\", \"width\", w.toString() + \"p\");\n          self.MAP_TITLE = evento.newText;\n          ui.refresh(\"MAP_TITLE,MAP_ADDFOTO,MAP_ADDRECORD,MAP_ADDTEXT\");\n        } else {\n          if (evento.newText.length == 0) {\n            self.MAP_SHOWADDTEXT = 0;\n            w = self.getFieldPropertyValue(\"MAP_TITLE\", \"width\");\n            w = w.replace(\"p\", \"\");\n            w = parseInt(w) - 100;\n            self.setFieldPropertyValue(\n              \"MAP_TITLE\",\n              \"width\",\n              w.toString() + \"p\"\n            );\n            self.MAP_TITLE = evento.newText;\n            ui.refresh(\"MAP_TITLE,MAP_ADDFOTO,MAP_ADDRECORD,MAP_ADDTEXT\");\n          }\n        }\n      }\n      break;\n    case \"enviar\":\n      switch (self.MAP_TIPO) {\n        case 0:\n          await sendMessage(\n            await self.getContents(\"Chatear\"),\n            self,\n            \"MAP_TITLE\",\n            true\n          );\n          self.MAP_TIPO = 0;\n          break;\n        case 1:\n          await sendMessage(\n            await self.getContents(\"Chatear\"),\n            self,\n            \"MAP_FOTO\",\n            true\n          );\n          self.MAP_TIPO = 0;\n          break;\n        case 2:\n          ui.stopAudioRecord();\n          await sendMessage(\n            await self.getContents(\"Chatear\"),\n            self,\n            \"MAP_VOZGRABADA\",\n            true\n          );\n          self.MAP_TIPO = 0;\n          self.MAP_RECORDON = 0;\n          self.MAP_SHOWADDTEXT = 0;\n          self.MAP_TIMERECORD = \"0:00\";\n          ui.refresh(\"frmRecording,MAP_ADDTEXT\");\n          ui.getView(self).refreshAll(\"frmNormal\");\n          break;\n      }\n      break;\n    case \"textoU\":\n      if (evento != null) {\n        (await self.getContents(\"nUsuarios\")).doSearch(evento.newText);\n        ui.refresh(\"@nUsuarios\");\n      }\n      break;\n  }\n}\n\nasync function AccionesChat(parametro) {\n  switch (parametro) {\n    case \"ver\":\n      // abrirmos el chat ...\n      await openChat(\n        self.getObjectIndex(),\n        self.getOwnerCollection().getOwnerObject()\n      );\n      break;\n    // case 'veradjunto':\n    //     ui.openFile(self.ADJUNTO);\n    //     break;\n    case \"verfoto\":\n      ui.openFile(self.MAP_FOTO);\n      break;\n    case \"vervoz\":\n      ui.openFile(self.MAP_VOZ);\n      break;\n    // case 'compartir':\n    //     break;\n  }\n}\n\nasync function sendMessage(colMUser, obj, title, isFromUser) {\n  if (obj[title].length != 0) {\n    var CollCV = await appData.getCollection(\"MensajesReader\");\n    var ObjCV = await CollCV.createObject();\n    if (isFromUser) {\n      ObjCV.USUARIOTO = self.MAP_CCUSUARIO;\n      ObjCV.USUARIOFROM = user.LOGIN;\n    } else {\n      ObjCV.USUARIOTO = user.LOGIN;\n      ObjCV.USUARIOFROM = self.MAP_CCUSUARIO;\n    }\n    ObjCV.FECHA = new Date();\n    ObjCV.MENSAJE = self[title];\n    ObjCV.TIPO = self.MAP_TIPO;\n    ObjCV.IDCHAT = self.MAP_IDCHATSEL;\n    await ObjCV.save();\n\n    ui.startReplica();\n\n    colMUser.unlock();\n    await addUserMessage(colMUser, ObjCV, -1, ObjCV.ROWID);\n    colMUser.lock();\n\n    //limpiamos\n    self[title] = \"\";\n    ObjCV = null;\n    CollCV.clear();\n    CollCV = null;\n\n    ui.refresh(\"MensajesUsuarios\", title);\n  }\n}\n\nasync function fillMessagesContent(colMUser, page, cant) {\n  var colMsg, obj, n, i, nInit, nEnd, ObjB;\n  colMsg = await appData.getCollection(\"MensajesReader\");\n  colMsg.setFilter(\"IDCHAT=\" + self.MAP_IDCHATSEL + \"\");\n  colMUser.unlock();\n  colMUser.clear();\n  await colMUser.loadAll();\n  colMsg.setSort(\"FECHA ASC\");\n  await colMsg.startBrowse();\n  while (\n    (await colMsg.getCurrentItem()) !== undefined &&\n    (await colMsg.getCurrentItem()) != null\n  ) {\n    obj = await colMsg.getCurrentItem();\n    await addUserMessage(colMUser, obj, 0, obj.ROWID);\n    await colMsg.moveNext();\n  }\n  colMsg.endBrowse();\n  colMsg.clear();\n  colMsg = null;\n  colMUser.lock();\n  ui.refresh(\"Chatear\");\n}\n\nasync function addUserMessage(colMUser, obj, index, sRowid) {\n  var omuser, queue, fecha, dia, mes, anio;\n  omuser = await colMUser.createObject();\n  colMUser.addItem(omuser);\n  omuser.FECHA = obj.FECHA;\n  omuser.USUARIOFROM = obj.USUARIOFROM;\n  omuser.USUARIOTO = obj.USUARIOTO;\n  switch (obj.TIPO) {\n    case 0:\n      omuser.MENSAJE = obj.MENSAJE;\n      break;\n    case 1:\n      omuser.MAP_FOTO = obj.MENSAJE;\n      break;\n    case 2:\n      if (obj.MENSAJE != null) {\n        var msgVoz = obj.MENSAJE.substring(obj.MENSAJE.lastIndexOf(\"/\") + 1);\n        omuser.MAP_VOZ = msgVoz;\n      }\n      break;\n    case 3:\n      omuser.MAP_ADJUNTO = obj.MENSAJE;\n      break;\n  }\n  omuser.TIPO = obj.TIPO;\n  omuser.IDCHAT = obj.IDCHAT;\n  omuser.MAP_FECHAHORA = obj.FECHA;\n\n  if (obj.USUARIOFROM == user.LOGIN) {\n    omuser.MAP_COLORVIEW = \"#A5DF00\";\n    omuser.MAP_FORECOLOR = \"#666666\";\n    omuser.MAP_FORECOLORFECHA = \"#B3FFFFFF\";\n    omuser.MAP_ESPACIO = 1;\n    //Comprobar que se ha replicado el mensaje, para mostrar mensaje enviado o no\n    // \t\tqueue=appData.getCollection(\"MasterReplicaQueue\").findObject(\"ROWID='\" + obj.ROWID.toString() + \"'\");\n    // \t\tif (queue !== undefined && queue != null) {\n    // \t\t    omuser.MAP_IMAGE=\"trasparente.png\";\n    // \t\t} else {\n    // \t\t    omuser.MAP_IMAGE=\"Icon_Enviar.png\";\n    // \t\t}\n    // \t\tqueue=null;\n  } else {\n    omuser.MAP_COLORVIEW = \"#e5e5ea\";\n    omuser.MAP_FORECOLOR = \"#000000\";\n    omuser.MAP_FORECOLORFECHA = \"#80000000\";\n    omuser.MAP_ESPACIO = 0;\n    omuser.MAP_IMAGE = \"trasparente.png\";\n  }\n  // colMUser.setVariables(\"refreshindex\",0);\n  ui.refresh(\"Chatear\");\n}\n\nfunction irGrupo(grupo) {\n  ui.showGroup(grupo, \"##RIGHTN##\", 150, \"##RIGHTN_OUT##\", 150);\n}\n\n/***\n *\n * Code from strings.js\n *\n ***/\n\nvar literales = null;\niniciarLiterales();\n\n/* Se pone en una funcion porque para que lo coja el traductor*/\nfunction iniciarLiterales() {\n  literales = {\n    /*##XONE_TRANSLATE_NEXT_LINE##*/\n    stVersionLog: \"- Version Log.\",\n    /*##XONE_TRANSLATE_NEXT_LINE##*/\n    stScreensRework: \"- Screens rework.\",\n    /*##XONE_TRANSLATE_NEXT_LINE##*/\n    stNewSup: \"- New supervisor option.\",\n    /*##XONE_TRANSLATE_NEXT_LINE##*/\n    stMustIndicateWarehouse: \"You must indicate the warehouse.\",\n  };\n}\n\n/***\n *\n * Code from funciones.js\n *\n ***/\n\nString.prototype.repeat = function(n) {\n  var aux = \"\";\n  for (var i = 0; i < n; i++) {\n    aux += this;\n  }\n  return aux;\n};\n\nvar MAP_OBJETO_HIJO = null;\n\n/* ***********************************\n         FUNCIONES DE FECHA              \n   *********************************** */\n// Hacer pad zero\nfunction addZero(i) {\n  if (i < 10) {\n    i = \"0\" + i;\n  }\n  return i;\n}\n\nfunction doAuthLogout() {\n  new OAuth2()\n    .withOptions({\n      authority: \"https://gaccess-int.gamesacorp.com/identity/\",\n      clientID: \"APP_0275_GOTMOBILITY\",\n      clientSecret: \"C7331D93-9109-4F87-B2BA-17C77711B54E\",\n      scope: \"openid profile\",\n      persistenceKey: \"key_1234\",\n      responseType: \"code id_token\",\n      redirectUri: \"com.xone.oauth2:/gamesaredirect\",\n    })\n    .logout();\n}\n\nfunction doAuthLogin() {\n  new OAuth2()\n    .withOptions({\n      authority: \"https://gaccess-int.gamesacorp.com/identity/\",\n      clientID: \"APP_0275_GOTMOBILITY\",\n      clientSecret: \"C7331D93-9109-4F87-B2BA-17C77711B54E\",\n      scope: \"openid profile\",\n      responseType: \"code id_token\",\n      persistenceKey: \"key_1234\",\n      redirectUri: \"com.xone.oauth2:/gamesaredirect\",\n    })\n    .authenticate({\n      onSuccess: function(result) {\n        console.log(result);\n      },\n      onError: function(err) {\n        console.log(err);\n      },\n    });\n}\n\nasync function doLoginNew() {\n  var params = {\n    userName: self.MAP_USER,\n    password: self.MAP_PASSWORD,\n    entryPoint: \"Menu\",\n    // entryPoint: \"EspecialChat\",\n\n    // Opcional\n    onLoginSuccessful: function() {\n      ui.showToast(\"Login OK!\");\n    },\n\n    // Opcional\n    onLoginFailed: function() {\n      ui.showToast(\"Login failed!\");\n    },\n  };\n  await appData.login(params);\n}\n\nfunction doLogout() {\n  appData.logout();\n}\n\nfunction exit() {\n  appData.exit();\n}\n\nfunction funcionesFecha() {\n  //Funciones Fecha Local\n  var d = new Date();\n  var diasSemana = new Array(\n    \"Domingo\",\n    \"Lunes\",\n    \"Martes\",\n    \"Mircoles\",\n    \"Jueves\",\n    \"Viernes\",\n    \"Sbado\"\n  );\n  var anio = d.getFullYear();\n  var mes = addZero(d.getMonth() + 1);\n  var diames = addZero(d.getDate());\n  var diasemana = d.getDay() + \", \" + diasSemana[d.getDay()];\n  var h = addZero(d.getHours());\n  var m = addZero(d.getMinutes());\n  var s = addZero(d.getSeconds());\n  var ms = d.getMilliseconds();\n  var t = d.getTime();\n  var GMTminutes = d.getTimezoneOffset();\n\n  var mensaje = \"Fecha local: \" + diames + \"/\" + mes + \"/\" + anio;\n  mensaje += \"\\nDia semana: \" + d.getDay() + \", \" + diasSemana[d.getDay()];\n  mensaje += \"\\nHora: \" + h + \":\" + m + \":\" + s + \".\" + ms;\n  mensaje += \"\\nMilisegundos desde 1970: \" + t;\n  mensaje += \"\\nDiferencia GMT minutos: \" + GMTminutes;\n\n  //Funciones Fecha UTC\n  var dUTC = new Date();\n  var anioUTC = dUTC.getUTCFullYear();\n  var mesUTC = addZero(dUTC.getUTCMonth() + 1);\n  var diamesUTC = addZero(dUTC.getUTCDate());\n  var diasemanaUTC = dUTC.getUTCDay() + \", \" + diasSemana[dUTC.getUTCDay()];\n  var hUTC = addZero(dUTC.getUTCHours());\n  var mUTC = addZero(dUTC.getUTCMinutes());\n  var sUTC = addZero(dUTC.getUTCSeconds());\n  var msUTC = dUTC.getUTCMilliseconds();\n  var tUTC = Date.UTC(anioUTC, mesUTC, diamesUTC, hUTC, mUTC, sUTC, msUTC);\n\n  var mensajeUTC = \"\\nFecha UTC: \" + diamesUTC + \"/\" + mesUTC + \"/\" + anioUTC;\n  mensajeUTC += \"\\nDia semana UTC: \" + diasemanaUTC;\n  mensajeUTC += \"\\nHora UTC: \" + hUTC + \":\" + mUTC + \":\" + sUTC + \".\" + msUTC;\n  mensajeUTC += \"\\nMilisegundos desde 1970 en UTC: \" + tUTC;\n\n  //Convertir a String y otros\n  var str = d.toString();\n  var strUTC = dUTC.toUTCString();\n  var strDate = d.toDateString();\n  var strLocaleDate = d.toLocaleString();\n  var strLocaleDateOnly = d.toLocaleDateString();\n  var strTime = d.toTimeString();\n  var strLocaleTime = d.toLocaleTimeString();\n  var strIso = d.toISOString();\n  var sJson = d.toJSON();\n\n  var mensajeString = \"\\ntoString(): \\n\" + str;\n  mensajeString += \"\\ntoUTCString(): \\n    \" + strUTC;\n  mensajeString += \"\\ntoDateString(): \" + strDate;\n  mensajeString += \"\\ntoLocaleString(): \\n\" + strLocaleDate;\n  mensajeString += \"\\ntoLocaleDateString(): \\n    \" + strLocaleDateOnly;\n  mensajeString += \"\\ntoTimeString(): \\n    \" + strTime;\n  mensajeString += \"\\ntoLocaleTimeString(): \" + strLocaleTime;\n  mensajeString += \"\\ntoISOString(): \\n    \" + strIso;\n  mensajeString += \"\\ntoJSON(): \\n    \" + sJson;\n\n  mensaje += \"\\n\" + mensajeUTC;\n  mensaje += \"\\n\" + mensajeString;\n  return mensaje;\n}\n\n/* ***********************************\n         FUNCIONES VARIAS             \n   *********************************** */\n\nasync function userMsgBox(title, msg, type) {\n  var collMsgBox, objMsgBox, nResult;\n  collMsgBox = (await appData.getCollection(\"EspecialMsgbox\")).createClone();\n  objMsgBox = await collMsgBox.createObject();\n  collMsgBox.addItem(objMsgBox);\n  objMsgBox.MAP_TITULO = title;\n  objMsgBox.MAP_MENSAJE = msg;\n  objMsgBox.MAP_TIPO = type;\n\n  nResult = await ui.msgBox(objMsgBox);\n  return nResult;\n}\n\nfunction frameScroll(e) {\n  if (e.dy <= 10 && self.MAP_SHOWOVERSCROLL === 1) {\n    self.MAP_SHOWOVERSCROLL = 0;\n    ui.getView(self).refresh(\"froverscroll\");\n  } else {\n    if (e.dy > 10 && self.MAP_SHOWOVERSCROLL === 0) {\n      self.MAP_SHOWOVERSCROLL = 1;\n      ui.getView(self).refresh(\"froverscroll\");\n    }\n  }\n}\n\nfunction EscanearMatricula(RutaImagen) {\n  var ocr = createObject(\"XOneOCR\");\n  return ocr.scanLicensePlate(RutaImagen);\n}\n\nfunction EscanearTexto(RutaImagen) {\n  var ocr = createObject(\"XOneOCR\");\n  return ocr.scanText(\n    RutaImagen,\n    \"qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM\"\n  );\n}\n\n/*\n * Next an previous helper\n */\nfunction prev(obj, execNode, refresh) {\n  if (obj.MAP_GROUP > 1) goPage(obj, obj.MAP_GROUP - 1, refresh);\n}\n\nfunction next(obj, execNode, refresh) {\n  if (obj.MAP_GROUP < obj.MAP_TOTAL_PAGES)\n    goPage(obj, obj.MAP_GROUP + 1, refresh);\n}\n\nfunction goPage(obj, index, refresh) {\n  ui.showGroup(index, \"##ALPHA_IN##\", 500, \"##ALPHA_OUT##\", 500);\n  obj.MAP_GROUP = index;\n  /*if (refresh!==undefined) {\n        ui.refresh(refresh);\n    }else{\n        ui.refresh();\n    }*/\n}\n\nfunction cstr(val) {\n  if (val === undefined || val === null) return \"\";\n  return val.toString();\n}\n\nfunction formatDateTime(date, type) {\n  var hours = date.getHours();\n  var minutes = date.getMinutes();\n  var ampm = hours >= 12 ? \"pm\" : \"am\";\n  hours = hours % 12;\n  hours = hours ? hours : 12; // the hour '0' should be '12'\n  minutes = minutes < 10 ? \"0\" + minutes : minutes;\n  var strTime = hours + \":\" + minutes + \" \" + ampm;\n\n  switch (type) {\n    case 0:\n      return (\n        date.getMonth() +\n        1 +\n        \"/\" +\n        date.getDate() +\n        \"/\" +\n        date.getFullYear() +\n        \"  \" +\n        strTime\n      );\n    case 1:\n      return (\n        date.getDate() + 1 + \"/\" + date.getMonth() + \"/\" + date.getFullYear()\n      );\n    case 2:\n      return (\n        date.getDate() +\n        1 +\n        \"/\" +\n        date.getMonth() +\n        \"/\" +\n        date\n          .getFullYear()\n          .toString()\n          .substring(2, 4)\n      );\n    case 3:\n      return strTime;\n    case 4:\n      return hours + \":\" + minutes;\n  }\n  return (\n    date.getMonth() +\n    1 +\n    \"/\" +\n    date.getDate() +\n    \"/\" +\n    date.getFullYear() +\n    \"  \" +\n    strTime\n  );\n}\n\nfunction len(val) {\n  return cstr(val).length;\n}\n\nfunction Left(str, n) {\n  if (n <= 0) return \"\";\n  else if (n > String(str).length) return str;\n  else return String(str).substring(0, n);\n}\nfunction Right(str, n) {\n  if (n <= 0) return \"\";\n  else if (n > String(str).length) return str;\n  else {\n    var iLen = String(str).length;\n    return String(str).substring(iLen, iLen - n);\n  }\n}\n\nasync function testClick(e) {\n  await ui.msgBox(e.target, \"Test\", 0);\n}\n\nasync function scanAvailableNetworks() {\n  try {\n    self.MAP_LOADING = 1;\n    ui.refresh(\"frmLoading\");\n    (await self.getContents(\"ContentWifis\")).clear();\n\n    var wifiManager = new WifiManager();\n    if (wifiManager.isWifiAdapterEnabled()) {\n      onWifiNetworksFound.OBJETO = self;\n      var lstAvailable = wifiManager.scanAvailableNetworks(onWifiNetworksFound);\n      ui.showToast(\"Escaneando redes WiFi...\");\n    } else {\n      ui.executeActionAfterDelay(\"scanAvailableNetworks\", 5);\n    }\n  } catch (ex) {\n    //ui.msgBox(\"ex: \"+ex,\"aa\",0);\n  }\n}\n\nasync function onWifiNetworksFound(wifiNetworks) {\n  self = onWifiNetworksFound.OBJETO;\n  var sMessage = \"\";\n  var wifiManager = new WifiManager();\n  var orden = 1;\n  for (var i = 0; i < wifiNetworks.length; i++) {\n    //sMessage = sMessage + \"SSID: \" + wifiNetworks[i].getSsid() + \"\\n\";\n    var wifi = wifiNetworks[i];\n    var isOpen = false;\n    var coll = await self.getContents(\"ContentWifis\");\n    if (coll != null) {\n      var obj2 = coll.getItem(\"MAP_SSID\", wifi.getSsid());\n      if (!obj2) {\n        coll.lock();\n        var obj = await coll.createObject();\n        coll.addItem(obj);\n\n        if (obj) {\n          if (wifi.getNetworkSecurity() == \"OPEN\") {\n            obj.MAP_IMAGE = \"wifi-open.png\";\n            isOpen = true;\n          } else {\n            obj.MAP_IMAGE = \"wifi-lock.png\";\n            isOpen = false;\n          }\n\n          if (saberSiWifiGuardada(wifi.getSsid())) {\n            obj.MAP_ESTADO = \"Guardado\";\n            obj.MAP_ORDEN = orden;\n            orden++;\n            obj.MAP_IDESTADO = 0;\n          } else {\n            obj.MAP_ESTADO = \"\";\n            obj.MAP_ORDEN = 99999;\n            obj.MAP_IDESTADO = -1;\n          }\n\n          var wifiInfo = wifiManager.getActiveWifiInfo();\n\n          if (wifiInfo != null) {\n            if (wifiInfo.getSsid() == wifi.getSsid()) {\n              obj.MAP_ESTADO = \"Conexin establecida\";\n              if (isOpen) {\n                obj.MAP_IMAGE = \"wifi-open-conected.png\";\n              } else {\n                obj.MAP_IMAGE = \"wifi-lock-conected.png\";\n              }\n              obj.MAP_ORDEN = 0;\n              obj.MAP_IDESTADO = 1;\n            }\n          }\n\n          if (wifi.getSsid().length > 0) {\n            obj.MAP_SSID = wifi.getSsid();\n          } else {\n            obj.MAP_SSID = \"Red desconocida\";\n          }\n          obj.MAP_SECURITY = wifi.getNetworkSecurity();\n        }\n\n        coll.unlock();\n      }\n    }\n  }\n  self.MAP_LOADING = 0;\n  ui.refresh(\"ContentWifis,frmLoading\");\n\n  (await self.getContents(\"ContentWifis\")).doSort(\"MAP_ORDEN ASC\");\n  //ui.msgBox(sMessage, \"Redes\", 0);\n}\n\nfunction saberSiWifiGuardada(wifi) {\n  var wifiManager = createObject(\"WifiManager\");\n  var lstSaved = wifiManager.listSavedNetworks();\n  var sMessage = \"\";\n  for (var i = 0; i < lstSaved.length; i++) {\n    if (wifi == lstSaved[i].getSsid()) return true;\n  }\n  return false;\n}\n\n//Para mayor simplicidad, todas las diferentes lneas son tablas, que nos permiten alinear el texto ms facilmente.\n//El documento es una grilla cuyo punto 0,0 es la ESQUINA INFERIOR IZQUIERDA.\n//Para mejor desarrollo, activar showGridDebug(pdf)\n//addNewLine(pdf) Aade una tabla de una lnea vaca y sin bordes\nasync function GenerarPDFBasico(nameFile, pdf, createGrid) {\n  //Creamos el PDF, borramos si existe ya el fichero, le indicamos el nombre y la encriptacin a utilizar\n\n  pdf.create(nameFile);\n  pdf.permissions(\"assembly\");\n  pdf.permissions(\"print\");\n  pdf.setEncryption(\"\", \"1234\", \"128bits\");\n\n  pdf.open();\n\n  pdf.setFont(\"gillsans.ttf\");\n  pdf.setFontStyle(\"normal\");\n  pdf.setAlignment(\"center\");\n  pdf.setFontSize(9);\n  pdf.setFontColor(\"#000000\");\n\n  //**************************************************************\n  // Muestra una rejilla de ayuda para posicionar cosas en el PDF\n  //**************************************************************\n  if (createGrid == 1) {\n    showGridDebug(pdf);\n  }\n\n  //********************************************\n  //    Comenzamos a pintar en el documento\n  //********************************************\n  pdf.setFont(\"helvetica\");\n  pdf.setFontSize(9);\n  pdf.setFontStyle(\"normal\");\n  pdf.setFontColor(\"#000000\");\n  pdf.addText(\n    \"Esto es un ejemplo de texto, en la posicion: \" +\n      pdf.getVerticalPosition().toString()\n  );\n  pdf.newLine();\n  pdf.addText(\n    \"Segunda Lnea, en la posicion: \" + pdf.getVerticalPosition().toString()\n  );\n  pdf.newLine();\n\n  //Se especifica que vamos a crear una tabla con 3 columnas sin bordes\n  pdf.createTable(3);\n  pdf.setCellBorder(\"none\");\n  pdf.setTableWidth(100);\n  pdf.setTableCellWidths(33, 33, 33);\n  pdf.setAlignment(\"left\");\n  pdf.addCellText(\"Texto a la izquierda\");\n  pdf.setAlignment(\"center\");\n  pdf.addCellText(\"Texto centrado\");\n  pdf.setAlignment(\"right\");\n  pdf.addCellText(\"Texto a la derecha\");\n  pdf.addTable();\n\n  //Se especifica que vamos a crear una tabla con 3 columnas sin bordes\n  pdf.createTable(1);\n  //Las posibilidades para los bordes son: all, top, left, right, bottom\n  pdf.setCellBorder(\"all\");\n  //Da igual el ancho que se le indique a la tabla\n  pdf.setTableWidth(100);\n  pdf.setAlignment(\"center\");\n  pdf.setFontStyle(\"bold\");\n  pdf.setFontSize(12);\n  pdf.setFontColor(\"#FFFFFF\");\n  //Al tener la letra de color blanco, ponemos el fondo de la celda en negro\n  pdf.addCellText(\"Con las tablas es ms sencillo alinear el texto\", \"#000000\");\n  pdf.setAlignment(\"left\");\n  pdf.setFontStyle(\"normal\");\n  pdf.setFontSize(10);\n  pdf.setFontColor(\"#000000\");\n  pdf.addCellText(\n    \"El ancho de una tabla NO FLOTANTE es 418, desde la posicin 88 hasta la 506, da igual el ancho que se especifique para la tabla  para las columnas\"\n  );\n  pdf.setAlignment(\"center\");\n  pdf.setFontStyle(\"bold\");\n  pdf.setFontSize(12);\n  pdf.setFontColor(\"#FFFFFF\");\n  //Al tener la letra de color blanco, ponemos el fondo de la celda en negro\n  pdf.addCellText(\n    \"El ancho de las celdas ser un porcentaje con respecto a la suma de los anchos de las columnas\",\n    \"#000000\"\n  );\n  pdf.setFontColor(\"#000000\");\n  pdf.setAlignment(\"left\");\n  pdf.setFontStyle(\"normal\");\n  pdf.setFontSize(10);\n  pdf.addCellText(\n    \"Da igual el ancho que se ponga para una tabla NO FLOTANTE, el ancho de la celda ser determinado mediante una regla de 3 para averiguar el porcentaje correspondiente a la cantidad asignada.\"\n  );\n  pdf.addCellText(\n    \"Por ejemplo: 3 columnas 60 de ancho para cada una:\" +\n      String.fromCharCode(10) +\n      \"SetTableCellWidths 60,60,60  ->  60+60+60 = 180 que sera el 100% de la tabla\" +\n      String.fromCharCode(10) +\n      \"Para averiguar el porcentaje, calculamos 60x100 / 180 = 33.3%.\"\n  );\n  pdf.addTable();\n\n  //Creamos una tabla con 3 columnas\n  pdf.createTable(3);\n  pdf.setTableCellWidths(60, 60, 60);\n  pdf.setAlignment(\"center\");\n  pdf.addCellText(\"SetTableCellWidths 60,60,60\");\n  pdf.addCellText(\"60+60+60=180 -> 100%\");\n  pdf.addCellText(\"60x100 / 180 = 33.3%\");\n  pdf.addTable();\n\n  pdf.createTable(1);\n  pdf.setCellBorder(\"all\");\n  pdf.setAlignment(\"center\");\n  pdf.setFontStyle(\"bold\");\n  pdf.setFontColor(\"#FFFFFF\");\n  //Al tener la letra de color blanco, ponemos el fondo de la celda en negro\n  pdf.addCellText(\n    \"Lo ms sencillo ser hacer coincidir los anchos de las columnas con 100 y as tendremos el porcentaje que tomar cada celda de ancho.\",\n    \"#000000\"\n  );\n  pdf.setAlignment(\"left\");\n  pdf.setFontColor(\"#000000\");\n  pdf.setFontStyle(\"normal\");\n  pdf.addCellText(\"Por ejemplo: SetTableCellWidths 20,50,15,15.\");\n  pdf.addTable();\n\n  //Creamos una tabla con 4 columnas\n  pdf.setAlignment(\"center\");\n\n  pdf.createTable(4);\n  pdf.setTableCellWidths(20, 50, 15, 15);\n  pdf.addCellText(\"20%\");\n  pdf.addCellText(\"50%\");\n  pdf.addCellText(\"15%\");\n  pdf.addCellText(\"15%\");\n  pdf.addTable();\n\n  //****************************************************\n  // Para hacer una tabla posicionada de forma absoluta\n  //****************************************************\n  //Esta tabla al pintarse no actualiza pdf.getVerticalPosition() porque se pinta \"flotando\" encima del documento\n  pdf.createTable(1);\n  // Muy importante, a la hora de hacer una tabla posicionada de forma absoluta\n  // es necesario definir previamente el ancho de la tabla.\n  pdf.setTableWidth(418);\n  pdf.setAlignment(\"center\");\n  pdf.setFontStyle(\"bold\");\n  pdf.setFontSize(12);\n  pdf.setFontColor(\"#000000\");\n  pdf.addCellText(\"Tabla 'FLOTANTE' de 418 de ancho\");\n  pdf.addTableSetXY(88, 542);\n\n  //Se especifica que vamos a crear una tabla con 2 columnas\n  pdf.setFontColor(\"#000000\");\n  pdf.setFontStyle(\"normal\");\n  pdf.setAlignment(\"left\");\n\n  pdf.createTable(2);\n  // Muy importante, a la hora de hacer una tabla posicionada de forma absoluta\n  // es necesario definir previamente el ancho de la tabla.\n  pdf.setTableWidth(340);\n  pdf.setTableCellWidths(180, 160);\n  pdf.addCellText(\n    \"Texto en tabla 'flotante', el alto de la tabla lo marcar el contenido.\"\n  );\n  pdf.setAlignment(\"center\");\n  pdf.addCellText(\n    \"Situada en:\" +\n      String.fromCharCode(10) +\n      String.fromCharCode(13) +\n      \"Eje X=120, Eje Y=500\"\n  );\n  pdf.addTableSetXY(120, 500);\n\n  pdf.createTable(3);\n  // Muy importante, a la hora de hacer una tabla posicionada de forma absoluta\n  // es necesario definir previamente el ancho de la tabla.\n  pdf.setAlignment(\"center\");\n  pdf.setTableWidth(460);\n  pdf.setTableCellWidths(30, 40, 30);\n  pdf.addCellText(\"Una flotante puede ocupar lo que se quiera.\", \"#99FFFF\");\n  pdf.addCellText(\"Y posicionarla en cualquier lugar.\", \"#99FFFF\");\n  pdf.addCellText(\"Los anchos definidos 30,40,30\", \"#99FFFF\");\n  pdf.addTableSetXY(60, 430);\n\n  //Ponemos la imagen de la flecha apuntando a la coordenada 0,0 en una posicin absoluta, tambin \"flotando\" sobre el documento\n  pdf.addImageSetXY(\"./icons/coordenada00.png\", 0, 0);\n\n  pdf.close();\n\n  var a = await ui.msgBox(\"ABRIR PDF?\", \"PDF GENERADO\", 4);\n  if (a == 6) {\n    //Si queremos abrir el PDF una vez generado.\n    pdf.launchPDF();\n  }\n}\n\nfunction showGridDebug(pdf) {\n  var i, j;\n  //Tabla para saber las posiciones X e Y de un PDF\n\n  //Para el EJE X\n  pdf.setAlignment(\"center\");\n  pdf.setFontSize(9);\n  pdf.setFontStyle(\"bold\");\n  pdf.setFontColor(\"#0000CC\");\n  for (j = 2; j < 26; j++) {\n    i = parseInt(j * 20);\n    //Esta es la primera fila del Eje X, Arriba, Y=840\n    pdf.createTable(1);\n    pdf.setTableWidth(20);\n    pdf.addCellText(i.toString());\n    pdf.addTableSetXY(i, 840);\n    //pdf.addRectangle(PosX, posY, Ancho, Alto, Grosor, ColorFondo, ColorLinea\n    pdf.addRectangle(i, 20, 0, 820, 0, \"#FF0000\", \"#FF0000\");\n\n    //Esta es la segunda fila del Eje X, Abajo, Y=20\n    pdf.createTable(1);\n    pdf.setTableWidth(20);\n    pdf.addCellText(i.toString());\n    pdf.addTableSetXY(i, 20);\n  }\n\n  //Para el EJE Y\n  pdf.setFontColor(\"#009900\");\n  for (j = 0; j < 42; j++) {\n    i = parseInt(j * 20);\n\n    //Esta es la primera columna del Eje Y, en la izquierda X=10\n    pdf.createTable(1);\n    //pdf.addCellText(\"10,\"+i\n    pdf.setTableWidth(30);\n    pdf.addCellText(i.toString());\n    pdf.addTableSetXY(10, i);\n    //pdf.addRectangle(PosX, posY, Ancho, Alto, Grosor, ColorFondo, ColorLinea\n    pdf.addRectangle(10, i, 540, 0, 0, \"#FF0000\", \"#FF0000\");\n\n    //Esta es la segunda columna del Eje Y, en la derecha X=540\n    pdf.createTable(1);\n    pdf.setTableWidth(30);\n    //pdf.addCellText(\"540,\"+i\n    pdf.addCellText(i.toString());\n    pdf.addTableSetXY(540, i);\n  }\n\n  pdf.setFontStyle(\"normal\");\n  pdf.setFontColor(\"#000000\");\n}\n\n//PARAMETROS:\n//Pdf01 -- el objeto pdf\n//Total de lineas\n//Numero actual de linea\n//Si es final de linea.\n//Texto a poner.\nfunction AddCellTexttable(Pdf01, nColumT, nColum, isFinLine, textLine) {\n  //le quitamos todos los bordes\n  Pdf01.setCellBorder(\"none\");\n  //dibujamos la liena de arriba o de abajo dependiendo de donde estemos.\n  if (isFinLine == 0) {\n    //dibujamos top\n    Pdf01.setCellBorder(\"top\");\n  } else {\n    if (isFinLine == 1) {\n      //dibujamos bottom\n      Pdf01.setCellBorder(\"bottom\");\n    }\n  }\n\n  //if nColum = 1 then\n  //dibujamos el borde left|top si no es finline\n  //\tPdf01.setCellBorder(\"left\"\n  //end if\n\n  //if nColum = nColumT then\n  //dibujamos el borde left|top si no es finline\n  //\tPdf01.setCellBorder(\"right\"\n  //end if\n  Pdf01.addCellText(textLine);\n}\n\nfunction addNewLine(Pdf01) {\n  Pdf01.createTable(1);\n  Pdf01.setCellBorder(\"none\");\n  Pdf01.addCellText(\" \");\n  Pdf01.addTable();\n}\n\n//crearPDF\nfunction CreatePDF(nameFile, pdf) {\n  //creamos el pdf\n\n  //namefile=\"/mnt/sdcard/xone/\"+namefile\n  try {\n    appData.error.clear();\n    pdf.delete(nameFile);\n    appData.error.clear();\n  } catch (e) {}\n  pdf.permissions(\"assembly\");\n  pdf.create(nameFile);\n  pdf.setEncryption(\"\", \"1234\", \"128bits\");\n}\n\n//devolvemos la hora sin fecha\nfunction getTime(stdate) {\n  stdate = getEmptyFromNull(stdate);\n  return stdate.toString().substring(11);\n}\n\n//Para mayor simplicidad, todas las diferentes lneas son tablas, que nos permiten alinear el texto muy facilmente.\n//AddCellTexttable(Pdf01,nColumTotales,nColumActual,isFinLine,texto)\n//addNewLine(Pdf01) Aade una tabla de una lnea vaca y sin bordes\nasync function GenerarPDF1(nameFile, pdf, createGrid) {\n  //Creamos el PDF, borramos si existe ya el fichero, le indicamos el nombre y la encriptacin a utilizar\n  CreatePDF(nameFile, pdf);\n\n  //pdf.BeginHeader\n\n  //pdf.endHeader()\n\n  pdf.open();\n  pdf.setFont(\"gillsans.ttf\");\n  pdf.setFontStyle(\"normal\");\n\n  //**************************************************************\n  // Muestra una rejilla de ayuda para posicionar cosas en el PDF\n  //**************************************************************\n  if (createGrid == 1) {\n    showGridDebug(pdf);\n  }\n\n  //addNewLine pdf\n  //1er recuadro\n  pdf.createTable(1);\n  pdf.setTableWidth(150);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 1, 1, 1, \"\");\n  pdf.addTable();\n\n  addNewLine(pdf);\n  pdf.createTable(1);\n  pdf.setTableWidth(150);\n  //pdf01.setTableCellWidths(450,550\n  pdf.setCellBorder(\"none\");\n  pdf.setAlignment(\"left\");\n  pdf.addCellImage(\"./icons/LogoPrint.png\", 150, 73);\n  pdf.addTable();\n\n  pdf.createTable(1);\n  pdf.setTableWidth(150);\n  pdf.setAlignment(\"right\");\n  AddCellTexttable(pdf, 1, 1, 1, \" CIF: B01234567\");\n  pdf.addTable();\n\n  //Fecha\n  pdf.createTable(2);\n  pdf.setTableWidth(150);\n  pdf.setFontStyle(\"bold\");\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, -1, getDate(new Date()));\n  pdf.setAlignment(\"right\");\n  AddCellTexttable(pdf, 2, 1, -1, getTime(new Date()));\n  pdf.addTable();\n\n  pdf.createTable(2);\n  pdf.setFont(\"gillsans.ttf\");\n  pdf.setFontStyle(\"normal\");\n  pdf.setTableWidth(150);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, -1, \" Ticket: \");\n  pdf.setAlignment(\"right\");\n  AddCellTexttable(pdf, 2, 1, -1, nameFile);\n  pdf.addTable();\n\n  pdf.createTable(2);\n  pdf.setTableWidth(150);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, -1, \" Montador: \");\n  pdf.setAlignment(\"right\");\n  //AddCellTexttable pdf,2,1,-1,self.MAP_ENCARGADO\")\n  AddCellTexttable(pdf, 2, 1, -1, \"Manuel Chaves\");\n  pdf.addTable();\n\n  pdf.createTable(1);\n  pdf.setTableWidth(150);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, 1, \"\");\n  pdf.addTable();\n\n  //primer apartado\n\n  pdf.createTable(1);\n  pdf.setTableWidth(150);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, 0, \"\");\n  pdf.addTable();\n\n  pdf.createTable(2);\n  pdf.setTableWidth(150);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, -1, \" Cliente: \");\n  pdf.setAlignment(\"right\");\n  //AddCellTexttable pdf,2,1,-1,self.MAP_CLIENTE\")\n  AddCellTexttable(pdf, 2, 1, -1, \"Cliente del curso\");\n  pdf.addTable();\n\n  pdf.createTable(2);\n  pdf.setTableWidth(150);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, -1, \" Cod.Cliente: \");\n  pdf.setAlignment(\"right\");\n  AddCellTexttable(pdf, 2, 1, -1, \"378-522\");\n  pdf.addTable();\n\n  pdf.createTable(2);\n  pdf.setTableWidth(150);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, -1, \" Finca: \");\n  pdf.setAlignment(\"right\");\n  AddCellTexttable(pdf, 2, 1, -1, \"La finca 3\");\n  pdf.addTable();\n\n  pdf.createTable(2);\n  pdf.setTableWidth(150);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, -1, \" Cod.Proyecto: \");\n  pdf.setAlignment(\"right\");\n  AddCellTexttable(pdf, 2, 1, -1, \"123-456\");\n  pdf.addTable();\n\n  pdf.createTable(2);\n  pdf.setTableWidth(150);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, -1, \" N.ORDEN: \");\n  pdf.setAlignment(\"right\");\n  AddCellTexttable(pdf, 2, 1, -1, \"123456\");\n  pdf.addTable();\n\n  pdf.createTable(1);\n  pdf.setTableWidth(150);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, 1, \"\");\n  pdf.addTable();\n\n  //segundo apartado\n\n  pdf.createTable(3);\n  pdf.setFontStyle(\"bold\");\n  pdf.setTableCellWidths(100, 25, 25);\n  pdf.setAlignment(\"left|bottom\");\n  AddCellTexttable(pdf, 2, 1, 0, \" Tarea \");\n  AddCellTexttable(pdf, 2, 1, 0, \" Inicio \");\n  AddCellTexttable(pdf, 2, 1, 0, \" Fin \");\n  pdf.addTable();\n\n  pdf.createTable(1);\n  pdf.setFont(\"gillsans.ttf\");\n  pdf.setFontStyle(\"normal\");\n  pdf.setTableWidth(150);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, 1, \"\");\n  pdf.addTable();\n\n  addNewLine(pdf);\n\n  //Recorreremos con un FOR para ir poniendo las tareas, para el ejemplo las ponemos fijas\n  //set coll = this.Contents(\"@MaestroTareas\")\n  //coll.Macro(\"##MACRO1##\") = \"IDORDEN=\"+numOrden\n  //coll.LoadAll\n  //tot=coll.count\n  //if not coll is nothing then\n  //\tfor i=0 to tot\n  //\t\tset obj = coll(cint(i))\n  //\t\tpdf.createTable(3\n  //\t\tpdf.setTableCellWidths(100,25,25\n  //\t\tpdf.setAlignment(\"left\"\n  //\t\tAddCellTexttable pdf,2,1,-1,cstr(obj(\"MAP_TAREADESC\"))\n  //\t\tAddCellTexttable pdf,2,1,-1,cstr(obj(\"HORAINICIO\"))\n  //\t\tAddCellTexttable pdf,2,1,-1,cstr(obj(\"HORAFIN\"))\n  //\t\tpdf.addTable();\n  //\tnext\n  //end if\n\n  //Aqui ponemos fijo lo anterior para no necesitar Base de datos\n  pdf.createTable(3);\n  pdf.setTableCellWidths(100, 25, 25);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, -1, \"Tarea Numero Uno\");\n  AddCellTexttable(pdf, 2, 1, -1, \"11:45\");\n  AddCellTexttable(pdf, 2, 1, -1, \"12:00\");\n  pdf.addTable();\n\n  pdf.createTable(3);\n  pdf.setTableCellWidths(100, 25, 25);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, -1, \"Tarea Numero Dos\");\n  AddCellTexttable(pdf, 2, 1, -1, \"12:00\");\n  AddCellTexttable(pdf, 2, 1, -1, \"12:30\");\n  pdf.addTable();\n\n  pdf.createTable(3);\n  pdf.setTableCellWidths(100, 25, 25);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, -1, \"Tarea Numero Tres\");\n  AddCellTexttable(pdf, 2, 1, -1, \"12:30\");\n  AddCellTexttable(pdf, 2, 1, -1, \"13:00\");\n  pdf.addTable();\n\n  //datos del total horas.\n  pdf.createTable(2);\n  pdf.setTableCellWidths(110, 40);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, -1, \"Total Horas\");\n  pdf.setAlignment(\"right\");\n  //AddCellTexttable pdf,2,1,-1,cstr(round(self.TOTALHORAS\")))+\"h\"\n  AddCellTexttable(pdf, 2, 1, -1, \"1.15\" + \" h\");\n  pdf.addTable();\n\n  addNewLine(pdf);\n  addNewLine(pdf);\n\n  //datos del total.\n  //calculos del subtotal\n  pdf.createTable(2);\n  pdf.setTableCellWidths(110, 40);\n  pdf.setAlignment(\"left\");\n  //AddCellTexttable pdf,2,1,-1,\" Subtotal = \" + cstr(round(self.TOTALHORAS\"),2)) + \"h * \" + cstr(user(\"PRECIOHORA\")) + cstr(user(\"MONEDA\"))+ \"/h =\"\n  AddCellTexttable(\n    pdf,\n    2,\n    1,\n    -1,\n    \" Subtotal = \" + \"1.15\" + \"h x \" + \"40 \" + \"?\" + \"/h =\"\n  );\n  pdf.setAlignment(\"right\");\n  AddCellTexttable(pdf, 2, 1, -1, \"46 Eur\");\n  pdf.addTable();\n  //calculos gastos\n  pdf.createTable(2);\n  pdf.setTableCellWidths(110, 40);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, -1, \" Gastos\");\n  pdf.setAlignment(\"right\");\n  AddCellTexttable(pdf, 2, 1, -1, \"12 Eur\");\n  pdf.addTable();\n  //calculos desplazamiento\n  pdf.createTable(2);\n  pdf.setTableCellWidths(110, 40);\n  pdf.setAlignment(\"left\");\n  //AddCellTexttable pdf,2,1,-1,\" Desplazamiento = \" + cstr(round(self.UNIDADESDESPLAZ\"),2)) + \"Ud * \" + cstr(user(\"PRECIOHORA\")) + cstr(user(\"MONEDA\"))+\"/Ud =\"\n  AddCellTexttable(pdf, 2, 1, -1, \" Desplazamiento = 1 Ud * 20 Eur/Ud =\");\n  pdf.setAlignment(\"right\");\n  //AddCellTexttable pdf,2,1,-1,cstr(round(self.UNIDADESDESPLAZ\") * user(\"PRECIOHORA\"),2))\t+ cstr(user(\"MONEDA\"))\n  AddCellTexttable(pdf, 2, 1, -1, \"20 ?\");\n  pdf.addTable();\n\n  pdf.createTable(1);\n  pdf.setTableWidth(150);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, 1, \"\");\n  pdf.addTable();\n\n  //total\n  pdf.createTable(2);\n  pdf.setTableCellWidths(110, 40);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, -1, \" TOTAL \");\n  pdf.setFontStyle(\"bold\");\n  pdf.setAlignment(\"right\");\n  //AddCellTexttable pdf,2,1,-1,cstr(round(self.MAP_TOTAL\"),2)) + cstr(user(\"MONEDA\"))\n  AddCellTexttable(pdf, 2, 1, -1, \"78 ?\");\n  pdf.addTable();\n\n  addNewLine(pdf);\n\n  //CLIENTE QUE FIRMA\n  pdf.createTable(2);\n  pdf.setTableWidth(150);\n  pdf.setFont(\"gillsans.ttf\");\n  pdf.setFontStyle(\"normal\");\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, -1, \" Cliente: \");\n  pdf.setAlignment(\"right\");\n  //AddCellTexttable pdf,2,1,-1,self.NOMBRERECEPTOR\")\n  AddCellTexttable(pdf, 2, 1, -1, \"Antonio Rodriguez Lpez\");\n  pdf.addTable();\n\n  pdf.createTable(2);\n  pdf.setTableWidth(150);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, -1, \" DNI: \");\n  pdf.setAlignment(\"right\");\n  AddCellTexttable(pdf, 2, 1, -1, \"08.123.456\");\n  pdf.addTable();\n\n  pdf.createTable(1);\n  pdf.setTableWidth(150);\n  pdf.setAlignment(\"left\");\n  AddCellTexttable(pdf, 2, 1, -1, \" Firma del cliente: \");\n  pdf.addTable();\n\n  pdf.createTable(1);\n  pdf.setTableWidth(150);\n  pdf.setCellBorder(\"none\");\n  pdf.setAlignment(\"left\");\n  //pdf.addCellImage(self.FIRMACLIENTE\"),120,120\n  //Si no especificamos una ruta para el fichero de imagen, lo busca en files.\n  pdf.addCellImage(\"4b0a07e4-2213-47eb-83a1-e28d15662f0a.jpg\", 120, 120);\n  pdf.addTable();\n\n  pdf.close();\n\n  //Si queremos abrir el PDF una vez generado.\n  var a = await ui.msgBox(\"ABRIR PDF?\", \"PDF GENERADO\", 4);\n  if (a == 6) {\n    //Si queremos abrir el PDF una vez generado.\n    pdf.launchPDF();\n  }\n}\n\nasync function CrearPdf_Factura(nameFile, pdf01, createGrid) {\n  ui.updateWaitDialog(\"Generando PDF...\", 0);\n\n  try {\n    pdf01.delete(nameFile);\n  } catch (e) {}\n\n  pdf01.create(nameFile);\n  pdf01.setEncryption(\"\", \"1234\", \"128bits\");\n\n  // INICIO CABECERA\n  pdf01.beginHeader();\n\n  pdf01.createTable(1);\n  pdf01.setCellBorder(\"none\");\n  pdf01.setAlignment(\"left\");\n  pdf01.setTableCellWidths(100);\n  //pdf01.addCellImage(\"logo_cabecera_pdf.png\", 110, 40 //, 40,40\n  pdf01.addImageSetXY(\"logo_cabecera_pdf.png\", 86, 750, 80, 40);\n\n  pdf01.setFont(\"courier\");\n  pdf01.setFontSize(15);\n  pdf01.setFontColor(\"#0000AA\");\n  pdf01.setFontStyle(\"bold\");\n\n  pdf01.addCellText(\" \");\n  pdf01.addCellText(\"FACTURA:  123.123\");\n  pdf01.addCellText(\"23569   Crnicas del Suroeste S.L.\");\n  pdf01.setFontSize(12);\n  pdf01.setFontStyle(\"normal\");\n  pdf01.addCellText(\"CIF: 08.123.123    TLF: +34 123 123 456\");\n  pdf01.addCellText(\"La direccin del cliente, 34 A  06001\");\n  pdf01.addCellText(\"MERIDA  -  BADAJOZ\");\n  pdf01.addCellText(\"ESPAA\");\n  pdf01.addCellText(\"FECHA: 03/02/2015\");\n  pdf01.setFontSize(7);\n  pdf01.addCellText(\n    \"Bens constantes desta factura, colocados  disposio do adquirente nesta data\"\n  );\n  pdf01.addCellText(\" \");\n  pdf01.addTable();\n\n  pdf01.createTable(3);\n  pdf01.setTableWidth(250);\n  pdf01.setTableCellWidths(25, 20, 55);\n\n  pdf01.setCellBorder(\"all\");\n  pdf01.setAlignment(\"center\");\n  pdf01.addCellText(\"FACTURA\", \"#EEEEEE\");\n  pdf01.addCellText(\"FECHA\", \"#EEEEEE\");\n  pdf01.setAlignment(\"left\");\n  pdf01.addCellText(\"FORMA PAGO\", \"#EEEEEE\");\n\n  pdf01.setAlignment(\"center\");\n  pdf01.addCellText(\"123.123\");\n  pdf01.addCellText(\"03/02/2015\");\n  pdf01.setAlignment(\"left\");\n  pdf01.addCellText(\"90 das\");\n  pdf01.addTableSetXY(90, 700);\n\n  //pdf01.addTableSetXY(90,820\n\n  pdf01.setFont(\"helvetica\");\n  pdf01.setFontSize(8);\n  pdf01.setFontColor(\"#0000AA\");\n  pdf01.createTable(7);\n  pdf01.setTableCellWidths(10, 40, 10, 10, 10, 10, 10);\n\n  pdf01.setCellBorder(\"none\");\n  pdf01.setCellBorder(\"left\");\n  pdf01.setCellBorder(\"top\");\n  pdf01.setCellBorder(\"bottom\");\n  pdf01.setAlignment(\"left\");\n  pdf01.addCellText(\"CODIGO\", \"#EEEEEE\");\n\n  pdf01.setCellBorder(\"left\");\n  pdf01.setCellBorder(\"bottom\");\n  pdf01.setCellBorder(\"top\");\n  pdf01.addCellText(\"DESCRIPCION\", \"#EEEEEE\");\n  pdf01.setAlignment(\"right\");\n  pdf01.addCellText(\"BULTOS\", \"#EEEEEE\");\n  pdf01.addCellText(\"K/U\", \"#EEEEEE\");\n  pdf01.addCellText(\"T.CANT\", \"#EEEEEE\");\n  pdf01.addCellText(\"IMPORTE\", \"#EEEEEE\");\n\n  pdf01.setCellBorder(\"left\");\n  pdf01.setCellBorder(\"right\");\n  pdf01.setCellBorder(\"bottom\");\n  pdf01.setCellBorder(\"top\");\n  pdf01.addCellText(\"TOTAL\", \"#EEEEEE\");\n  pdf01.addTable();\n\n  pdf01.endHeader();\n\n  // FIN CABECERA\n\n  // INICIO PIE\n  pdf01.beginFooter();\n  pdf01.createTable(1);\n  pdf01.setTableWidth(418);\n  pdf01.setCellBorder(\"none\");\n  pdf01.addCellImage(\"logo_pie_pdf.png\", 600, 70);\n  pdf01.setFont(\"courier\");\n  pdf01.setAlignment(\"center\");\n  pdf01.setFontSize(10);\n  pdf01.setFontStyle(\"normal\");\n  pdf01.setFontColor(\"#FFFFFF\");\n  var pagina = pdf01.getCurrentPage();\n  pdf01.addCellText(\"PAG: \" + pagina);\n  //Esto slo funcionar en el pie de pgina.\n  //pdf01.ShowPageNumber, 300, 10\n  //pdf01.addTable();\n  pdf01.addTableSetXY(88, 104);\n  pdf01.endFooter();\n  // FIN PIE\n\n  pdf01.open();\n  ui.updateWaitDialog(\"Generando PDF...\", 20);\n  pdf01.newLine();\n\n  //**************************************************************\n  // Muestra una rejilla de ayuda para posicionar cosas en el PDF\n  //**************************************************************\n  if (createGrid == 1) {\n    showGridDebug(pdf01);\n  }\n\n  //pdf01.NewLine\n\n  pdf01.setAlignment(\"left\");\n  pdf01.setFontSize(9);\n  pdf01.setFontColor(\"#000000\");\n  pdf01.setCellBorder(\"none\");\n  //set coll=this.contents(\"DetallesFactura\")\n  //se hace fijo para no tener que adjuntar una base de datos con el ejemplo.\n  var i = 0;\n  //coll.loadall\n  ui.updateWaitDialog(\"Generando PDF...\", 40);\n  //BULTOSTOTAL=0\n  //for i=0 to coll.count-1\n  for (i = 0; i < 59; i++) {\n    //set obj=coll(i)\n    pdf01.createTable(7);\n    pdf01.setTableCellWidths(10, 40, 10, 10, 10, 10, 10);\n    pdf01.setCellBorder(\"none\");\n    //if i=coll.count-1 then\n    if (i == 59 || pdf01.getVerticalPosition() <= 130) {\n      //Si es el ultimo registro ponemos la linea inferior\n      pdf01.setCellBorder(\"left\");\n      pdf01.setAlignment(\"left\");\n      pdf01.setCellBorder(\"bottom\");\n      pdf01.addCellText(\"000\" + i.toString());\n      pdf01.setCellBorder(\"none\");\n      pdf01.setCellBorder(\"left\");\n      pdf01.setCellBorder(\"bottom\");\n      pdf01.addCellText(\"Pollo asado\");\n      pdf01.setAlignment(\"right\");\n      pdf01.addCellText(\"2.00\");\n      pdf01.addCellText(\"1.00\");\n      pdf01.addCellText(\"2.33\");\n      pdf01.addCellText(\"4.66\");\n      pdf01.setCellBorder(\"none\");\n      pdf01.setCellBorder(\"left\");\n      pdf01.setCellBorder(\"bottom\");\n      pdf01.setCellBorder(\"right\");\n      pdf01.addCellText(\"4.66\");\n      if (pdf01.getVerticalPosition() < 130) {\n        pdf01.newPage();\n      }\n    } else {\n      pdf01.setCellBorder(\"left\");\n      pdf01.setAlignment(\"left\");\n      pdf01.addCellText(\"000\" + i.toString());\n      //pdf01.setCellBorder(\"none\"\n      //pdf01.setCellBorder(\"left\"\n      pdf01.addCellText(\n        \"Pollo asado al vaco\" + pdf01.getVerticalPosition().toString()\n      );\n      pdf01.setAlignment(\"right\");\n      pdf01.addCellText(\"2.00\");\n      pdf01.addCellText(\"1.00\");\n      pdf01.addCellText(\"2.33\");\n      pdf01.addCellText(\"4.66\");\n\n      pdf01.setCellBorder(\"none\");\n      pdf01.setCellBorder(\"left\");\n      pdf01.setCellBorder(\"right\");\n\n      pdf01.addCellText(\"4.66\");\n    }\n    //BULTOSTOTAL=BULTOSTOTAL + coll(i)(\"MAP_CANTIDAD\")\n    pdf01.addTable();\n  }\n  ui.updateWaitDialog(\"Generando PDF...\", 90);\n  //obj = null;\n  //coll = null;\n\n  pdf01.setFontSize(7);\n  pdf01.setFontStyle(\"normal\");\n  pdf01.setFontColor(\"#000000\");\n  pdf01.addTextLine(\" \");\n  pdf01.addTextLine(\" \");\n  pdf01.addTextLine(\" \");\n  pdf01.addTextLine(\n    \"Declaro pelo presente documento que os artigos adquiridos a XXXXXX. para su expediiao que se descreve neste documento sero agravados mo destino pelo I.V.A. dada a minha condiao de sujeto pasivo do I.V.A. em Portugal\"\n  );\n  pdf01.setFontSize(12);\n  pdf01.setFontStyle(\"bold\");\n  pdf01.addTextLine(\" \");\n  pdf01.addText(\"EXENTO DE IVA \");\n  pdf01.setFontSize(8);\n  pdf01.setFontStyle(\"bold\");\n  pdf01.addText(\"Art. 25 de la Ley del IVA\");\n  pdf01.setFontSize(8);\n  pdf01.setFontStyle(\"normal\");\n  pdf01.addText(\"           FORMA DE PAGO: \");\n  pdf01.setFontSize(12);\n  pdf01.setFontStyle(\"bold\");\n  pdf01.addTextLine(\"Efectivo\");\n\n  pdf01.setFont(\"courier\");\n  pdf01.setFontSize(9);\n  pdf01.setFontStyle(\"normal\");\n  pdf01.setFontColor(\"#0000AA\");\n  pdf01.addText(\"BULTOS: 60\");\n\n  pdf01.setFontSize(12);\n  pdf01.setFontColor(\"#0000AA\");\n  pdf01.addTextSetX(\"TOTAL FACTURA: XXX.XX ?\", 350);\n\n  pdf01.close();\n  ui.updateWaitDialog(\"Generando PDF...\", 100);\n\n  //Si queremos abrir el PDF una vez generado.\n  var a = await ui.msgBox(\"ABRIR PDF?\", \"PDF GENERADO\", 4);\n  if (a == 6) {\n    //Si queremos abrir el PDF una vez generado.\n    pdf01.launchPDF();\n  }\n\n  //pdf01.DecryptPDF \"/mnt/sdcard/xone/testpdf01.pdf\", \"/mnt/sdcard/xone/testpdf01decrypt.pdf\", \"1234\"\n}\n\nfunction getStrFill(stProp, stRelleno, nChar) {\n  var stCad = \"\";\n  //Aqu obtenemos el valor del title del TL\n  if (stProp.length < nChar) {\n    nChar = (nChar - stProp.length) * 2;\n    stCad = stRelleno.repeat(nChar - 1);\n  }\n\n  stCad = stProp + stCad;\n  return stCad;\n}\n\n//Devolvemos \"true\"  \"false\" como cadena segn est marcado  no el check.\nfunction getBoolStr(stProp) {\n  if (self[stProp] == 1) {\n    return \"true\";\n  } else {\n    return \"false\";\n  }\n}\n\nfunction getEmptyFromNull(dataObject) {\n  return dataObject == null ? \"\" : dataObject;\n}\n\n//Para mayor simplicidad, todas las diferentes lneas son tablas, que nos permiten alinear el texto ms facilmente.\n//El documento es una grilla cuyo punto 0,0 es la ESQUINA INFERIOR IZQUIERDA.\n//Para mejor desarrollo, activar showGridDebug(pdf)\n//addNewLine(Pdf01) Aade una tabla de una lnea vaca y sin bordes\n\nvar pdfGlobal;\n\nasync function GenerarPDFChecks(nameFile, pdf, createGrid) {\n  var i = 0;\n  //Creamos el PDF, borramos si existe ya el fichero, le indicamos el nombre y la encriptacin a utilizar\n  //CreatePDF nameFile,pdf\n  try {\n    pdf.delete(nameFile);\n  } catch (e) {}\n\n  pdf.create(nameFile);\n  pdf.permissions(\"assembly\");\n  pdf.permissions(\"print\");\n  pdf.setEncryption(\"\", \"1234\", \"128bits\");\n\n  pdf.open();\n\n  pdf.setFont(\"gillsans.ttf\");\n  pdf.setFontStyle(\"normal\");\n  pdf.setAlignment(\"center\");\n  pdf.setFontColor(\"#000000\");\n  pdf.setFontSize(9);\n\n  //**************************************************************\n  // Muestra una rejilla de ayuda para posicionar cosas en el PDF\n  //**************************************************************\n  if (createGrid == 1) {\n    showGridDebug(pdf);\n  }\n\n  //**********************************\n  //       PRIMER RECUADRO\n  // TEXTO INSPECCION\n  // FSI-1.4 y V.1\n  // LOGO\n  // *********************************\n\n  pdf.createTable(3);\n  pdf.setTableWidth(415);\n  pdf.setTableCellWidths(90, 235, 90);\n  pdf.addCellText(\n    (String.fromCharCode(10) + String.fromCharCode(13)).repeat(3)\n  );\n\n  pdf.setFontStyle(\"bold\");\n  pdf.setFontColor(\"#FFFFFF\");\n  pdf.setFontSize(12);\n\n  pdf.addCellText(String.fromCharCode(10) + \"INSPECCION\", \"#000000\");\n  pdf.setFontSize(10);\n  pdf.setFontColor(\"#000000\");\n  pdf.addCellText(\n    \"FSI-1.4\" + String.fromCharCode(10) + String.fromCharCode(13) + \"V.1\"\n  );\n  pdf.addTable();\n\n  //Para dejar una separacin, usamos una tabla sin bordes con la letra ms o menos grande para haya ms o menos separacin\n  pdf.setFontSize(2);\n  addNewLine(pdf);\n  pdf.setFontSize(10);\n\n  //pdf.addRectangle(PosX, posY, Ancho, Alto, Grosor, ColorFondo, ColorLinea\n  //Para la lnea entre el FSI-1.4 y el V.1\n  pdf.addRectangle(408, 786, 99, 0, 1, \"#000000\", \"#000000\");\n\n  pdf.addImageSetXY(\"./icons/logo_xone.png\", 118, 770, 30, 30);\n\n  //**********************************\n  //      SEGUNDO RECUADRO\n  // Servicio, Inspector, Fecha, Hora\n  // Vigilantes asignados\n  // *********************************\n\n  pdf.setCellBorder(\"all\");\n  pdf.setFontSize(8);\n  pdf.setFontStyle(\"bold\");\n\n  //Tabla con el Servicio\n  pdf.setAlignment(\"left\");\n  pdf.createTable(2);\n  pdf.setTableWidth(415);\n  pdf.setTableCellWidths(60, 355);\n  pdf.addCellText(\"SERVICIO\");\n  pdf.addCellText(getEmptyFromNull(self.CODSERVICIO));\n  pdf.addTable();\n\n  //Tabla con el Inspector, fecha y hora\n  pdf.createTable(6);\n  pdf.setTableWidth(415);\n  pdf.setTableCellWidths(60, 178, 42, 60, 40, 35);\n  pdf.addCellText(\"INSPECTOR\");\n  pdf.setFontSize(7);\n  pdf.addCellText(getEmptyFromNull(self.MAP_USUARIO));\n  pdf.setFontSize(8);\n  pdf.addCellText(\"FECHA\");\n  pdf.addCellText(getDate(self.FECHA));\n  pdf.addCellText(\"HORA\");\n  pdf.addCellText(getEmptyFromNull(self.HORA));\n  pdf.addTable();\n\n  //Tabla con los vigilantes\n  pdf.createTable(2);\n  pdf.setTableWidth(415);\n  pdf.setTableCellWidths(60, 355);\n  pdf.addCellText(\n    \"V/S\" + String.fromCharCode(10) + String.fromCharCode(13) + \"ASIGNADOS\"\n  );\n  pdf.addCellText(\" \");\n  pdf.addTable();\n\n  //Tabla \"flotante\" con los vigilantes asignados\n  pdf.setCellBorder(\"all\");\n  pdf.setFontStyle(\"normal\");\n  pdf.setAlignment(\"left\");\n  pdf.setFontSize(10);\n  pdf.createTable(2);\n  pdf.setTableWidth(358);\n  pdf.setTableCellWidths(179, 179);\n  pdf.addCellText(\"abcdefghijklmnopqrstuvwxyz\"); //,\"#FF0000\"\n  pdf.addCellText(\"abcdefghijklmnopqrstuvwxyz\"); //,\"#00FF00\"\n  pdf.addCellText(\"abcdefghijklmnopqrstuvwxyz\"); //,\"#0000FF\"\n  pdf.addCellText(\"abcdefghijklmnopqrstuvwxyz\"); //,\"#FF0000\"\n\n  //pdf.addTableSetXY(149,727);\n  pdf.addTableSetXY(149, 736);\n\n  pdf.setFontSize(2);\n  addNewLine(pdf);\n\n  // *************************************\n  // *************************************\n  // *****************************\n  //  CONTROL DE DOCUMENTACION 1\n  // *****************************\n\n  //Nos quedamos con la posicin donde se pinta la tabla contenedora para luego pintar todos los checks\n  //relativos a sta posicin\n  var posY = pdf.getVerticalPosition() - 10;\n  var interlineado = 11;\n  pdf.setCellBorder(\"all\");\n  pdf.setFontSize(8);\n  pdf.setFontStyle(\"normal\");\n  pdf.setAlignment(\"left\");\n\n  pdf.createTable(1);\n  pdf.setTableWidth(750);\n  pdf.setFont(\"frutiger.ttf\");\n  //pdf.addCellText(this.fieldPropertyValue(\"MAP_ETQ01\",\"title\"),\"#EEEEEE\" //\"CONTROL DE DOCUMENTACIN\"\n  pdf.addCellText(\"CONTROL DE DOCUMENTACIN\", \"#EEEEEE\"); //\"CONTROL DE DOCUMENTACIN\"\n  pdf.addCellText(\n    (String.fromCharCode(10) + String.fromCharCode(13)).repeat(4)\n  );\n  pdf.addCellText(\n    (String.fromCharCode(10) + String.fromCharCode(13)).repeat(5)\n  );\n  pdf.addTable();\n\n  pdf.setFont(\"gillsans.ttf\");\n  pdf.setCellBorder(\"none\");\n  pdf.setFontSize(9);\n  pdf.setFontStyle(\"bold\");\n  pdf.createTable(8);\n\n  //***** IMPORTANTE ******\n  //Para poder poner una tabla\ten una posicin absoluta, hay que definir SetTableWidth\n  //y se le dice el ancho de la primera celda\n  //***********************\n  pdf.setTableWidth(414);\n  pdf.setTableCellWidths(220, 25, 25, 25, 79, 20, 20, 20);\n  pdf.setAlignment(\"center\");\n  pdf.addCellText(\" \"); //,\"#FF0000\"\n  pdf.addCellText(\"SI\"); //,\"#00FF00\"\n  pdf.addCellText(\"NO\"); //,\"#0000FF\"\n  pdf.addCellText(\"N/A*\"); //,\"#FF0000\"\n  pdf.addCellText(\" \"); //,\"#00FF00\"\n  pdf.addCellText(\"B\"); //,\"#0000FF\"\n  pdf.addCellText(\"M\"); //,\"#FF0000\"\n  pdf.addCellText(\"R\"); //,\"#00FF00\"\n\n  pdf.addTableSetXY(90, posY);\n\n  pdf.setFontStyle(\"normal\");\n  pdf.setAlignment(\"left\");\n  pdf.setFontColor(\"#000000\");\n  pdf.setFontSize(8);\n\n  for (i = 1; i <= 3; i++) {\n    i = parseInt(i);\n\n    pdf.createTable(2);\n\n    //***** IMPORTANTE ******\n    //Para poder poner una tabla\ten una posicin absoluta, hay que definir SetTableWidth\n    //y se le dice el ancho de la primera celda\n    //***********************\n\n    pdf.setTableWidth(380);\n    pdf.setTableCellWidths(380, 100);\n\n    //pdf.addCellText(getStrFill(this.fieldPropertyValue(\"MAP_ETQ01_\"+i,\"title\"),\".\",40)\n    pdf.addCellText(getStrFill(\"Lo que sea\", \".\", 40));\n    pdf.addCellText(\"ESTADO\");\n\n    posY = posY - interlineado;\n    pdf.addTableSetXY(90, posY);\n\n    pdf.addCheckboxSetXY(\n      \" \",\n      307,\n      posY - interlineado,\n      9,\n      \"check\",\n      getBoolStr(\"MAP_01_\" + i + \"_SI\"),\n      \"true\"\n    );\n    pdf.addCheckboxSetXY(\n      \" \",\n      331,\n      posY - interlineado,\n      9,\n      \"check\",\n      getBoolStr(\"MAP_01_\" + i + \"_NO\"),\n      \"true\"\n    );\n    pdf.addCheckboxSetXY(\n      \" \",\n      354,\n      posY - interlineado,\n      9,\n      \"check\",\n      getBoolStr(\"MAP_01_\" + i + \"_NA\"),\n      \"true\"\n    );\n\n    switch (self[\"ESTADO\" + i]) {\n      case \"BIEN\":\n        pdf.addCheckboxSetXY(\n          \" \",\n          452,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"true\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          471,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          490,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        break;\n      case \"MAL\":\n        pdf.addCheckboxSetXY(\n          \" \",\n          452,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          471,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"true\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          490,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        break;\n      case \"REGULAR\":\n        pdf.addCheckboxSetXY(\n          \" \",\n          452,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          471,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          490,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"true\",\n          \"true\"\n        );\n        break;\n      default:\n        pdf.addCheckboxSetXY(\n          \" \",\n          452,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          471,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          490,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        break;\n    }\n  }\n\n  // *****************************\n  //  CONTROL DE DOCUMENTACION 2\n  // *****************************\n\n  posY = posY - 6;\n\n  pdf.setFontStyle(\"normal\");\n  pdf.setAlignment(\"left\");\n  pdf.setFontColor(\"#000000\");\n  pdf.setFontSize(8);\n\n  for (i = 1; i <= 4; i++) {\n    //Hay 4 registros\n    i = parseInt(i);\n    pdf.createTable(3);\n\n    //***** IMPORTANTE ******\n    //Para poder poner una tabla\ten una posicin absoluta, hay que definir SetTableWidth\n    //y se le dice el ancho de la primera celda\n    //***********************\n\n    pdf.setTableWidth(414);\n    pdf.setTableCellWidths(402, 110, 78);\n\n    //pdf.addCellText(getStrFill(this.fieldPropertyValue(\"MAP_ETQ01_\"+cstr(i+3),\"title\"),\".\",40)\n    pdf.addCellText(getStrFill(\"Lo que sea 2\", \".\", 40));\n\n    switch (i.toString()) {\n      case \"1\":\n        pdf.addCellText(\"Fecha ltima revisin\");\n        if (getEmptyFromNull(self.FECHAUR4) == \"\") {\n          pdf.addCellText(\"__ / __ / ____\"); //,\"#0000FF\"\n        } else {\n          pdf.addCellText(getDate(self.FECHAUR4));\n        }\n        break;\n      case \"2\":\n        pdf.addCellText(\"Fecha ltima revisin\");\n        if (getEmptyFromNull(self.FECHAUR5) == \"\") {\n          pdf.addCellText(\"__ / __ / ____\"); //,\"#0000FF\"\n        } else {\n          pdf.addCellText(getDate(self.FECHAUR5));\n        }\n        break;\n      default:\n        pdf.addCellText(\"\");\n        pdf.addCellText(\"\");\n        break;\n    }\n\n    posY = posY - interlineado;\n    pdf.addTableSetXY(90, posY);\n\n    pdf.addCheckboxSetXY(\n      \" \",\n      307,\n      posY - interlineado,\n      9,\n      \"check\",\n      getBoolStr(\"MAP_01_\" + i + \"_SI\"),\n      \"true\"\n    );\n    pdf.addCheckboxSetXY(\n      \" \",\n      331,\n      posY - interlineado,\n      9,\n      \"check\",\n      getBoolStr(\"MAP_01_\" + i + \"_NO\"),\n      \"true\"\n    );\n    pdf.addCheckboxSetXY(\n      \" \",\n      354,\n      posY - interlineado,\n      9,\n      \"check\",\n      getBoolStr(\"MAP_01_\" + i + \"_NA\"),\n      \"true\"\n    );\n  }\n\n  // *****************************\n  // REVISION DE MEDIOS AUXILIARES\n  // *****************************\n\n  posY = pdf.getVerticalPosition() - 10;\n  interlineado = 12;\n\n  pdf.setCellBorder(\"all\");\n  pdf.setFontSize(8);\n  pdf.setFontStyle(\"normal\");\n  pdf.setAlignment(\"left\");\n\n  pdf.createTable(1);\n  pdf.setTableWidth(750);\n  pdf.setFont(\"frutiger.ttf\");\n  //pdf.addCellText( this.fieldPropertyValue(\"MAP_ETQ02\",\"title\"),\"#EEEEEE\" //\"REVISIN DE MEDIOS AUXILIARES\"\n  pdf.addCellText(\"REVISIN DE MEDIOS AUXILIARES\", \"#EEEEEE\"); //\"REVISIN DE MEDIOS AUXILIARES\"\n  pdf.addCellText(\n    (String.fromCharCode(10) + String.fromCharCode(13)).repeat(9)\n  );\n  pdf.addTable();\n\n  pdf.setFont(\"gillsans.ttf\");\n  pdf.setCellBorder(\"none\");\n  pdf.setFontSize(9);\n  pdf.setFontStyle(\"bold\");\n  pdf.setAlignment(\"center\");\n  pdf.createTable(4);\n  pdf.setTableWidth(414);\n  pdf.setTableCellWidths(324, 30, 30, 30);\n\n  pdf.addCellText(\"\"); //,\"#FF0000\"\n  pdf.addCellText(\"SI\"); //,\"#FF0000\"\n  pdf.addCellText(\"NO\"); //,\"#00FF00\"\n  pdf.addCellText(\"N/A*\"); //,\"#0000FF\"\n\n  pdf.addTableSetXY(90, posY);\n\n  pdf.setFontStyle(\"normal\");\n  pdf.setAlignment(\"left\");\n  pdf.setFontColor(\"#000000\");\n  pdf.setFontSize(9);\n\n  for (i = 1; i <= 6; i++) {\n    i = parseInt(i);\n    pdf.createTable(1);\n    pdf.setTableWidth(414);\n    //pdf.addCellText(getStrFill(this.fieldPropertyValue(\"MAP_ETQ02_\"+i,\"title\"),\".\",80)\n    pdf.addCellText(getStrFill(\"Lo que sea 3\", \".\", 80));\n    posY = posY - interlineado;\n    pdf.addTableSetXY(90, posY);\n    //pdf.addTable();\n\n    pdf.addCheckboxSetXY(\n      \" \",\n      425,\n      posY - interlineado,\n      9,\n      \"check\",\n      getBoolStr(\"MAP_02_\" + i + \"_SI\"),\n      \"true\"\n    );\n    pdf.addCheckboxSetXY(\n      \" \",\n      456,\n      posY - interlineado,\n      9,\n      \"check\",\n      getBoolStr(\"MAP_02_\" + i + \"_NO\"),\n      \"true\"\n    );\n    pdf.addCheckboxSetXY(\n      \" \",\n      485,\n      posY - interlineado,\n      9,\n      \"check\",\n      getBoolStr(\"MAP_02_\" + i + \"_NA\"),\n      \"true\"\n    );\n  }\n\n  // ********************************\n  // CUMPLIMIENTO CODIGO DEONTOLOGICO\n  // ********************************\n\n  posY = pdf.getVerticalPosition() - 10;\n  interlineado = 12;\n\n  pdf.setCellBorder(\"all\");\n  pdf.setFontSize(8);\n  pdf.setFontStyle(\"normal\");\n  pdf.setAlignment(\"left\");\n\n  pdf.createTable(1);\n  pdf.setTableWidth(750);\n  pdf.setFont(\"frutiger.ttf\");\n  //pdf.addCellText( this.fieldPropertyValue(\"MAP_ETQ03\",\"title\"),\"#EEEEEE\" //\"CUMPLIMIENTO DEONTOLGICO\"\n  pdf.addCellText(\"CUMPLIMIENTO DEONTOLGICO\", \"#EEEEEE\"); //\"CUMPLIMIENTO DEONTOLGICO\"\n  pdf.addCellText(\n    (String.fromCharCode(10) + String.fromCharCode(13)).repeat(3)\n  );\n  pdf.addTable();\n\n  pdf.setFont(\"gillsans.ttf\");\n  pdf.setCellBorder(\"none\");\n  pdf.setFontStyle(\"bold\");\n  pdf.setAlignment(\"center\");\n  pdf.setFontSize(9);\n  pdf.createTable(8);\n  pdf.setTableWidth(414);\n  pdf.setTableCellWidths(157, 20, 20, 20, 157, 20, 20, 20);\n  pdf.addCellText(\" \"); //,\"#FF0000\"\n  pdf.addCellText(\"B\"); //,\"#00FF00\"\n  pdf.addCellText(\"M\"); //,\"#0000FF\"\n  pdf.addCellText(\"R\"); //,\"#FF0000\"\n  pdf.addCellText(\" \"); //,\"#00FF00\"\n  pdf.addCellText(\"B\"); //,\"#0000FF\"\n  pdf.addCellText(\"M\"); //,\"#FF0000\"\n  pdf.addCellText(\"R\"); //,\"#00FF00\"\n\n  pdf.addTableSetXY(90, posY);\n\n  pdf.setFontStyle(\"normal\");\n  pdf.setAlignment(\"left\");\n  pdf.setFontColor(\"#000000\");\n  pdf.setFontSize(9);\n\n  var j;\n  for (i = 1; i <= 2; i++) {\n    //Son 4, pero al estar en 2 columnas los vamos a hacer de 2 en 2\n    i = parseInt(i);\n    j = parseInt(i * 2 + 2);\n    pdf.createTable(2);\n    //***** IMPORTANTE ******\n    //Para poder poner una tabla\ten una posicin absoluta, hay que definir SetTableWidth\n    //y se le dice el ancho de la primera celda\n    //***********************\n    pdf.setTableWidth(400);\n    pdf.setTableCellWidths(210, 190);\n\n    //ESTADO4, ESTADO5, ESTADO6 y ESTADO7\n    //pdf.addCellText(getStrFill(this.fieldPropertyValue(\"ESTADO\"+cstr(i*2+2),\"title\"),\".\",34)\n    pdf.addCellText(getStrFill(\"Aa\", \".\", 34));\n    //pdf.addCellText(getStrFill(this.fieldPropertyValue(\"ESTADO\"+cstr(i*2+3),\"title\"),\".\",34)\n    pdf.addCellText(getStrFill(\"Bb\", \".\", 34));\n\n    posY = posY - interlineado;\n    pdf.addTableSetXY(96, posY);\n\n    switch (self[\"ESTADO\" + j.toString()]) {\n      case \"BIEN\":\n        pdf.addCheckboxSetXY(\n          \" \",\n          245,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"true\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          264,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          283,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        break;\n      case \"MAL\":\n        pdf.addCheckboxSetXY(\n          \" \",\n          245,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          264,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"true\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          283,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        break;\n      case \"REGULAR\":\n        pdf.addCheckboxSetXY(\n          \" \",\n          245,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          264,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          283,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"true\",\n          \"true\"\n        );\n        break;\n      default:\n        pdf.addCheckboxSetXY(\n          \" \",\n          245,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          264,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          283,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        break;\n    }\n\n    j++;\n\n    switch (self[\"ESTADO\" + j.toString()]) {\n      case \"BIEN\":\n        pdf.addCheckboxSetXY(\n          \" \",\n          452,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"true\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          471,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          490,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        break;\n      case \"MAL\":\n        pdf.addCheckboxSetXY(\n          \" \",\n          452,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          471,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"true\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          490,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        break;\n      case \"REGULAR\":\n        pdf.addCheckboxSetXY(\n          \" \",\n          452,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          471,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          490,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"true\",\n          \"true\"\n        );\n        break;\n      default:\n        pdf.addCheckboxSetXY(\n          \" \",\n          452,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          471,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          490,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        break;\n    }\n  }\n\n  // ****************************\n  //     CONTROL OPERACIONAL\n  // ****************************\n\n  posY = pdf.getVerticalPosition() - 10;\n  interlineado = 12;\n\n  pdf.setCellBorder(\"all\");\n  pdf.setFontSize(8);\n  pdf.setFontStyle(\"normal\");\n  pdf.setAlignment(\"left\");\n\n  pdf.createTable(1);\n  pdf.setTableWidth(750);\n  pdf.setFont(\"frutiger.ttf\");\n  //pdf.addCellText(this.fieldPropertyValue(\"MAP_ETQ04\",\"title\"),\"#EEEEEE\" //\"CONTROL OPERACIONAL\"\n  pdf.addCellText(\"CONTROL OPERACIONAL\", \"#EEEEEE\"); //\"CONTROL OPERACIONAL\"\n  pdf.addCellText(\n    (String.fromCharCode(10) + String.fromCharCode(13)).repeat(12)\n  );\n  pdf.addTable();\n\n  pdf.setFont(\"gillsans.ttf\");\n  pdf.setCellBorder(\"none\");\n  pdf.setFontStyle(\"bold\");\n  pdf.setAlignment(\"center\");\n  pdf.setFontSize(9);\n  pdf.createTable(4);\n  pdf.setTableWidth(414);\n  pdf.setTableCellWidths(324, 30, 30, 30);\n  pdf.addCellText(\"\"); //,\"#FF0000\"\n  pdf.addCellText(\"SI\"); //,\"#FF0000\"\n  pdf.addCellText(\"NO\"); //,\"#00FF00\"\n  pdf.addCellText(\"N/A*\"); //,\"#0000FF\"\n\n  pdf.addTableSetXY(90, posY);\n\n  pdf.setFontStyle(\"normal\");\n  pdf.setAlignment(\"left\");\n  pdf.setFontColor(\"#000000\");\n  pdf.setFontSize(9);\n\n  for (i = 1; i <= 8; i++) {\n    i = parseInt(i);\n    pdf.createTable(1);\n    pdf.setTableWidth(414);\n\n    //pdf.addCellText(getStrFill(this.fieldPropertyValue(\"MAP_ETQ04_\"+i,\"title\"),\".\",80)\n    pdf.addCellText(getStrFill(\"Lo que sea 4\", \".\", 80));\n    posY = posY - interlineado;\n    pdf.addTableSetXY(90, posY);\n\n    pdf.addCheckboxSetXY(\n      \" \",\n      425,\n      posY - interlineado,\n      9,\n      \"check\",\n      getBoolStr(\"MAP_04_\" + i + \"_SI\"),\n      \"true\"\n    );\n    pdf.addCheckboxSetXY(\n      \" \",\n      456,\n      posY - interlineado,\n      9,\n      \"check\",\n      getBoolStr(\"MAP_04_\" + i + \"_NO\"),\n      \"true\"\n    );\n    pdf.addCheckboxSetXY(\n      \" \",\n      485,\n      posY - interlineado,\n      9,\n      \"check\",\n      getBoolStr(\"MAP_04_\" + i + \"_NA\"),\n      \"true\"\n    );\n  }\n\n  // *******************************\n  // EVALUACION EFICACIA Y FORMACION\n  // *******************************\n\n  posY = pdf.getVerticalPosition() - 9;\n  interlineado = 12;\n\n  pdf.setCellBorder(\"all\");\n  pdf.setFontSize(8);\n  pdf.setFontStyle(\"normal\");\n  pdf.setAlignment(\"left\");\n  pdf.createTable(1);\n  pdf.setTableWidth(750);\n  pdf.setFont(\"frutiger.ttf\");\n  //pdf.addCellText( this.fieldPropertyValue(\"MAP_ETQ05\",\"title\"),\"#EEEEEE\" //\"EVALUACIN EFICACIA Y FORMACIN\"\n  pdf.addCellText(\"EVALUACIN EFICACIA Y FORMACIN\", \"#EEEEEE\"); //\"EVALUACIN EFICACIA Y FORMACIN\"\n  pdf.addCellText(\n    (String.fromCharCode(10) + String.fromCharCode(13)).repeat(3)\n  );\n  pdf.addTable();\n\n  pdf.setFont(\"gillsans.ttf\");\n  pdf.setCellBorder(\"none\");\n  pdf.setFontStyle(\"bold\");\n  pdf.setAlignment(\"center\");\n  pdf.setFontSize(9);\n  pdf.createTable(4);\n  pdf.setTableWidth(414);\n  pdf.setTableCellWidths(324, 30, 30, 30);\n  pdf.addCellText(\"\"); //,\"#FF0000\"\n  pdf.addCellText(\"MB\"); //,\"#FF0000\"\n  pdf.addCellText(\"B\"); //,\"#00FF00\"\n  pdf.addCellText(\"R\"); //,\"#0000FF\"\n\n  pdf.addTableSetXY(90, posY);\n\n  pdf.setFontStyle(\"normal\");\n  pdf.setAlignment(\"left\");\n  pdf.setFontColor(\"#000000\");\n  pdf.setFontSize(9);\n\n  for (i = 8; i <= 9; i++) {\n    //ESTADO8 y ESTADO9\n    i = parseInt(i);\n    pdf.createTable(1);\n    pdf.setTableWidth(414);\n    //pdf.addCellText(getStrFill(this.fieldPropertyValue(\"ESTADO\"+i,\"title\"),\".\",80)\n    pdf.addCellText(getStrFill(\"Lo que sea 5\", \".\", 80));\n    posY = posY - interlineado;\n    pdf.addTableSetXY(90, posY);\n\n    switch (self[\"ESTADO\" + i]) {\n      case \"MUY BIEN\":\n        pdf.addCheckboxSetXY(\n          \" \",\n          425,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"true\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          456,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          485,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        break;\n      case \"BIEN\":\n        pdf.addCheckboxSetXY(\n          \" \",\n          425,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          456,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"true\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          485,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        break;\n      case \"REGULAR\":\n        pdf.addCheckboxSetXY(\n          \" \",\n          425,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          456,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          485,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"true\",\n          \"true\"\n        );\n        break;\n      default:\n        pdf.addCheckboxSetXY(\n          \" \",\n          425,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          456,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        pdf.addCheckboxSetXY(\n          \" \",\n          485,\n          posY - interlineado,\n          9,\n          \"check\",\n          \"false\",\n          \"true\"\n        );\n        break;\n    }\n  }\n\n  // *****************************\n  //  INSTRUCCIONES DE EMERGENCIA\n  // *****************************\n\n  posY = pdf.getVerticalPosition() - 10;\n  interlineado = 12;\n\n  pdf.setCellBorder(\"all\");\n  pdf.setFontSize(8);\n  pdf.setFontStyle(\"normal\");\n  pdf.setAlignment(\"left\");\n  pdf.createTable(1);\n  pdf.setTableWidth(750);\n  pdf.setFont(\"frutiger.ttf\");\n  //pdf.addCellText( this.fieldPropertyValue(\"MAP_ETQ06\",\"title\"),\"#EEEEEE\" //\"INSTRUCCIONES DE EMERGENCIA\"\n  pdf.addCellText(\"INSTRUCCIONES DE EMERGENCIA\", \"#EEEEEE\"); //\"INSTRUCCIONES DE EMERGENCIA\"\n  pdf.addCellText(\n    (String.fromCharCode(10) + String.fromCharCode(13)).repeat(6)\n  );\n  pdf.addTable();\n\n  pdf.setFont(\"gillsans.ttf\");\n  pdf.setCellBorder(\"none\");\n  pdf.setFontSize(9);\n  pdf.setFontStyle(\"bold\");\n  pdf.setAlignment(\"center\");\n  pdf.createTable(3);\n  pdf.setTableWidth(414);\n  pdf.setTableCellWidths(334, 40, 40);\n  pdf.addCellText(\"\"); //,\"#FF0000\"\n  pdf.addCellText(\"SI\"); //,\"#00FF00\"\n  pdf.addCellText(\"NO\"); //,\"#0000FF\"\n\n  pdf.addTableSetXY(90, posY);\n\n  pdf.setFontStyle(\"normal\");\n  pdf.setAlignment(\"left\");\n  pdf.setFontColor(\"#000000\");\n  pdf.setFontSize(9);\n\n  for (i = 1; i <= 4; i++) {\n    i = parseInt(i);\n    pdf.createTable(1);\n    pdf.setTableWidth(414);\n    //pdf.addCellText(getStrFill(this.fieldPropertyValue(\"MAP_ETQ06_\"+i,\"title\"),\".\",80)\n    pdf.addCellText(getStrFill(\"Lo que sea 6\", \".\", 80));\n    posY = posY - interlineado;\n    pdf.addTableSetXY(90, posY);\n\n    pdf.addCheckboxSetXY(\n      \" \",\n      440,\n      posY - interlineado,\n      9,\n      \"check\",\n      getBoolStr(\"MAP_06_\" + i + \"_SI\"),\n      \"true\"\n    );\n    pdf.addCheckboxSetXY(\n      \" \",\n      480,\n      posY - interlineado,\n      9,\n      \"check\",\n      getBoolStr(\"MAP_06_\" + i + \"_NO\"),\n      \"true\"\n    );\n  }\n\n  // *****************************\n  //    PREVENCION DE RIESGOS\n  // *****************************\n\n  posY = pdf.getVerticalPosition() - 11;\n  interlineado = 12;\n\n  pdf.setCellBorder(\"all\");\n  pdf.setFontSize(8);\n  pdf.setFontStyle(\"normal\");\n  pdf.setAlignment(\"left\");\n\n  pdf.createTable(1);\n  pdf.setTableWidth(750);\n  pdf.setFont(\"frutiger.ttf\");\n  //pdf.addCellText( this.fieldPropertyValue(\"MAP_ETQ07\",\"title\"),\"#EEEEEE\" //\"PREVENCIN DE RIESGOS\"\n  pdf.addCellText(\"PREVENCIN DE RIESGOS\", \"#EEEEEE\"); //\"PREVENCIN DE RIESGOS\"\n  pdf.addCellText(\n    (String.fromCharCode(10) + String.fromCharCode(13)).repeat(11)\n  );\n  pdf.addTable();\n\n  pdf.setFont(\"gillsans.ttf\");\n  pdf.setCellBorder(\"none\");\n  pdf.setFontStyle(\"bold\");\n  pdf.setAlignment(\"center\");\n  pdf.setFontSize(9);\n  pdf.createTable(4);\n  pdf.setTableWidth(414);\n  pdf.setTableCellWidths(351, 18, 20, 25);\n  pdf.addCellText(\"\"); //,\"#FF0000\"\n  pdf.addCellText(\"SI\"); //,\"#00FF00\"\n  pdf.addCellText(\"NO\"); //,\"#0000FF\"\n  pdf.addCellText(\"N/A*\"); //,\"#FF0000\"\n\n  pdf.addTableSetXY(90, posY);\n\n  pdf.setFontStyle(\"normal\");\n  pdf.setAlignment(\"left\");\n  pdf.setFontColor(\"#000000\");\n  pdf.setFontSize(9);\n  for (i = 1; i <= 6; i++) {\n    i = parseInt(i);\n\n    pdf.createTable(1);\n    pdf.setTableWidth(414);\n\n    var texto = \"\";\n\n    switch (i.toString()) {\n      case \"1\":\n        pdf.addCellText(\n          \"Existe en el Servicio la evaluacin de riesgos y la planificacin de actividad preventiva?\"\n        );\n        posY = posY - interlineado;\n        pdf.addTableSetXY(90, posY);\n        pdf.createTable(1);\n        pdf.setTableWidth(414);\n        texto =\n          \"Se evidencian las Firmas de Entrega de dichos documentos por los Trabajadores?\";\n        break;\n      case \"2\":\n        texto =\n          self.fieldPropertyValue(\"MAP_ETQ07_2\", \"title\") +\n          \" \" +\n          self.fieldPropertyValue(\"MAP_ETQ07_21\", \"title\");\n        break;\n      case \"6\":\n        texto =\n          self.fieldPropertyValue(\"MAP_ETQ07_6\", \"title\") +\n          \" \" +\n          self.fieldPropertyValue(\"MAP_ETQ07_61\", \"title\");\n        break;\n      default:\n        texto =\n          \"Se evidencian las Firmas de Entrega de dichos documentos por los Trabajadores?\";\n        break;\n    }\n\n    pdf.addCellText(getStrFill(texto, \".\", 85));\n\n    posY = posY - interlineado;\n    pdf.addTableSetXY(90, posY);\n\n    pdf.addCheckboxSetXY(\n      \" \",\n      445,\n      posY - interlineado,\n      9,\n      \"check\",\n      getBoolStr(\"MAP_07_\" + i + \"_SI\"),\n      \"true\"\n    );\n    pdf.addCheckboxSetXY(\n      \" \",\n      466,\n      posY - interlineado,\n      9,\n      \"check\",\n      getBoolStr(\"MAP_07_\" + i + \"_NO\"),\n      \"true\"\n    );\n    pdf.addCheckboxSetXY(\n      \" \",\n      487,\n      posY - interlineado,\n      9,\n      \"check\",\n      getBoolStr(\"MAP_07_\" + i + \"_NA\"),\n      \"true\"\n    );\n  }\n\n  pdf.setFontSize(8);\n  pdf.setCellBorder(\"none\");\n  pdf.createTable(2);\n  pdf.setTableWidth(410);\n  pdf.setTableCellWidths(40, 380);\n  pdf.addCellText(\" \");\n  pdf.addCellText(\"*N/A no aplicable\"); //,\"#00FF00\"\n\n  pdf.addTable();\n\n  // *****************************\n  //            FIRMAS\n  // *****************************\n\n  pdf.setCellBorder(\"all\");\n  pdf.setFontSize(9);\n  pdf.setFontStyle(\"bold\");\n  pdf.setAlignment(\"left\");\n  pdf.createTable(3);\n  pdf.setTableCellWidths(220, 220, 220);\n  pdf.addCellText(\n    \"Firma Inspector\" +\n      String.fromCharCode(10) +\n      String.fromCharCode(13) +\n      String.fromCharCode(10) +\n      String.fromCharCode(13) +\n      String.fromCharCode(10) +\n      String.fromCharCode(13) +\n      String.fromCharCode(10) +\n      String.fromCharCode(13)\n  );\n  pdf.addCellText(\n    \"Firma Jefe de Equipo/R. Turno\" +\n      String.fromCharCode(10) +\n      String.fromCharCode(13) +\n      String.fromCharCode(10) +\n      String.fromCharCode(13) +\n      String.fromCharCode(10) +\n      String.fromCharCode(13) +\n      String.fromCharCode(10) +\n      String.fromCharCode(13)\n  );\n  pdf.addCellText(\n    \"Firma Jefe de Servicio/Delegado\" +\n      String.fromCharCode(10) +\n      String.fromCharCode(13) +\n      String.fromCharCode(10) +\n      String.fromCharCode(13) +\n      String.fromCharCode(10) +\n      String.fromCharCode(13) +\n      String.fromCharCode(10) +\n      String.fromCharCode(13)\n  );\n\n  pdf.addTable();\n\n  //Si no especificamos una ruta para el fichero de imagen, lo busca en files.\n  if (getEmptyFromNull(self.FIRMA1).length > 0) {\n    pdf.addImageSetXY(getEmptyFromNull(self.FIRMA1), 125, 32, 50, 50);\n  }\n\n  if (getEmptyFromNull(self.FIRMA2).length > 0) {\n    pdf.addImageSetXY(getEmptyFromNull(self.FIRMA2), 265, 32, 50, 50);\n  }\n\n  if (getEmptyFromNull(self.FIRMA3).length > 0) {\n    pdf.addImageSetXY(getEmptyFromNull(self.FIRMA3), 410, 32, 50, 50);\n  }\n\n  pdf.close();\n  //Si queremos abrir el PDF una vez generado.\n  var a = await ui.msgBox(\"ABRIR PDF?\", \"PDF GENERADO\", 4);\n  if (a == 6) {\n    //Si queremos abrir el PDF una vez generado.\n    pdf.launchPDF();\n  }\n}\n\nfunction setTextStyle(Pdf01, stfont, ststyle, stalign, stsize, stcolor) {\n  //Pdf01.setFont(stfont\n  Pdf01.setFont(\"Roboto-Regular.ttf\");\n  Pdf01.setFontStyle(ststyle);\n  Pdf01.setAlignment(stalign);\n  Pdf01.setFontColor(stcolor);\n\n  //if stsize=10 then stsize=11\n  Pdf01.setFontSize(stsize);\n}\n\n//Para mayor simplicidad, todas las diferentes lneas son tablas, que nos permiten alinear el texto ms facilmente.\n//El documento es una grilla cuyo punto 0,0 es la ESQUINA INFERIOR IZQUIERDA.\n//Para mejor desarrollo, activar showGridDebug(pdf)\n//addNewLine(Pdf01) Aade una tabla de una lnea vaca y sin bordes\n\nasync function GenerarPDF3(nameFile, pdf, createGrid) {\n  //Creamos el PDF, borramos si existe ya el fichero, le indicamos el nombre y la encriptacin a utilizar\n  //CreatePDF nameFile,pdf\n  try {\n    pdf.delete(nameFile);\n  } catch (e) {}\n\n  pdf.create(nameFile);\n  pdf.permissions(\"assembly\");\n  pdf.permissions(\"print\");\n  pdf.setEncryption(\"\", \"1234\", \"128bits\");\n\n  pdf.open();\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"center\", 14, \"#000000\");\n\n  //pdf.setFont(\"gillsans.ttf\"\n  //pdf.setFontStyle(\"normal\"\n  //pdf.setAlignment(\"center\"\n  //pdf.setFontColor(\"#000000\"\n  //pdf.setFontSize(normal\n\n  //**************************************************************\n  // Muestra una rejilla de ayuda para posicionar cosas en el PDF\n  //**************************************************************\n  if (createGrid == 1) {\n    showGridDebug(pdf);\n  }\n\n  //**********************************\n  //\tINICIALIZAMOS VALORES\n  //**********************************\n\n  var margenIzq = 46;\n  var margenDcho = 546;\n  var margenSup = 810;\n\n  //**********************************\n  //       CABECERA\n  // LOGO\t\tTITULO\n  // *********************************\n\n  //**********************************\n  //       \tSOLICITUD\n  // *********************************\n  margenSup = margenSup - 70; //Bajamos 70\n  pdf.createTable(1); //Num columnas\n  pdf.setCellBorder(\"none\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(100);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"bold\", \"center\", 14, \"#000000\");\n  pdf.addCellText(\"SOLICITUD\", \"#FFFFFF\");\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"center\", 10, \"#000000\");\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  //Para dejar una separacin, usamos una tabla sin bordes con la letra ms o menos grande para haya ms o menos separacin\n  //\tpdf.setFontSize(2\n  //\taddNewLine(pdf)\n  //\tpdf.setFontSize(10\n\n  //**********************************\n  //       \tACTIVO FISICO\n  // *********************************\n  //Primero hacemos una tabla con 2 columnas y luego hacemos otra con 2 filas ms adelante para ponerla sobre la segunda columna\n\n  margenSup = margenSup - 20; //Bajamos 20\n\n  pdf.createTable(1); //Num columnas\n  pdf.setCellBorder(\"all\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(100);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 12, \"#000000\");\n  pdf.addCellText(\"ACTIVO FISICO\", \"#CCCCCC\");\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"center\", 10, \"#000000\");\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  //Ahora la tabla con las 2 filas de la segunda columna\n  margenSup = margenSup - 16; //Bajamos\n\n  pdf.createTable(1); //Num columnas\n  pdf.setCellBorder(\"all\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(100);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 10, \"#000000\");\n  pdf.addCellText(\" Denominacin: \" + \" \");\n  pdf.addCellText(\" Codigo Identificacin (KKS): \" + \" \");\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\tlo ponemos 100 ms adelante para que salga en la segunda columna.\n\n  //**********************************\n  //SOLICITANTE Y EJECUTOR\n  //**********************************\n\n  margenSup = margenSup - 28; //Bajamos\n\n  pdf.createTable(2); //Num columnas\n  pdf.setCellBorder(\"all\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(50, 50);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 10, \"#000000\");\n  pdf.addCellText(\n    \" Solicitante (Nombre y Area):\" +\n      String.fromCharCode(13) +\n      \" \" +\n      \" \" +\n      String.fromCharCode(13).repeat(1)\n  );\n  pdf.addCellText(\" Ejecutor (Nombre):\" + String.fromCharCode(13) + \" \" + \" \");\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  //**********************************\n  //ALCANCE ORDEN y ALCANCE OPERACION\n  //**********************************\n\n  margenSup = margenSup - 34; //Bajamos\n\n  //tabla vaca para poder dejar el espacio fijo\n  pdf.createTable(1); //Num columnas\n  pdf.setCellBorder(\"all\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(100);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 12, \"#000000\");\n  pdf.addCellText(\"ALCANCE ORDEN\", \"#CCCCCC\");\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 9, \"#000000\");\n  pdf.addCellText(String.fromCharCode(13).repeat(5));\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 12, \"#000000\");\n  pdf.addCellText(\"ALCANCE OPERACION\", \"#CCCCCC\");\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 9, \"#000000\");\n  pdf.addCellText(String.fromCharCode(13).repeat(5));\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  margenSup = margenSup - 15; //Bajamos solo un poco para dejar el titulo\n  //otra tabla en la misma posicin para poner el texto\n  pdf.createTable(1); //Num columnas\n  pdf.setCellBorder(\"none\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(100);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 9);\n  pdf.addCellText(\" \");\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  margenSup = margenSup - 75;\n  //otra tabla en la misma posicin para poner el texto\n  pdf.createTable(1); //Num columnas\n  pdf.setCellBorder(\"none\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(100);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 9);\n  pdf.addCellText(\" \");\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  //**********************************\n  //FECHAS\n  //**********************************\n\n  margenSup = margenSup - 58; //Bajamos\n\n  pdf.createTable(2); //Num columnas\n  pdf.setCellBorder(\"all\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(50, 50);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 10, \"#000000\");\n  pdf.addCellText(\" Fecha Requerida: \" + \" \");\n  pdf.addCellText(\" Duracin prevista: \" + \" \");\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  //**********************************\n  // PROCEDIMIENTO ASOCIADO\n  //**********************************\n\n  margenSup = margenSup - 14; //Bajamos\n\n  pdf.createTable(1); //Num columnas\n  pdf.setCellBorder(\"all\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(100);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 9, \"#000000\");\n  pdf.addCellText(\n    \" PROCEDIMIENTO ASOCIADO: \" + \" \" + String.fromCharCode(13) + \" \" + \" \"\n  );\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  //**********************************\n  // TRABAJO CON RIESGO ESPECIAL\n  //**********************************\n  margenSup = margenSup - 22; //Bajamos\n\n  pdf.createTable(2); //Num columnas\n  pdf.setCellBorder(\"all\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(80, 20);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 12, \"#000000\");\n  pdf.addCellText(\"TRABAJO CON RIESGO ESPECIAL\", \"#CCCCCC\");\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 10, \"#000000\");\n  pdf.addCellText(\" \".repeat(9) + \"SI\" + \" \".repeat(11) + \"NO\");\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 412,\n    margenSup - 13,\n    10,\n    \"check\",\n    \"true\",\n    \"true\"\n  );\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 451,\n    margenSup - 13,\n    10,\n    \"check\",\n    \"false\",\n    \"true\"\n  );\n\n  margenSup = margenSup - 16; //Bajamos\n\n  pdf.createTable(3); //Num columnas\n  pdf.setCellBorder(\"all\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(34, 33, 33);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 10, \"#000000\");\n  pdf.addCellText(\" \".repeat(7) + \"Elctrico\");\n  pdf.addCellText(\" \".repeat(7) + \"Trabajos en altura\");\n  pdf.addCellText(\" \".repeat(7) + \"Trabajos en zanjas\");\n\n  pdf.addCellText(\" \".repeat(7) + \"Espacios confinados\");\n  pdf.addCellText(\" \".repeat(7) + \"Presencia de gas\");\n  pdf.addCellText(\" \".repeat(7) + \"\");\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 6,\n    margenSup - 12,\n    10,\n    \"check\",\n    \"true\",\n    \"true\"\n  ); //CHECK Electrico\n\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 176,\n    margenSup - 12,\n    10,\n    \"check\",\n    \"true\",\n    \"true\"\n  ); //CHECK Trabajos en altura\n\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 342,\n    margenSup - 12,\n    10,\n    \"check\",\n    \"true\",\n    \"true\"\n  ); //CHECK Trabajos en zanjas\n\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 6,\n    margenSup - 26,\n    10,\n    \"check\",\n    \"true\",\n    \"true\"\n  ); //CHECK Espacios confinados\n\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 176,\n    margenSup - 26,\n    10,\n    \"check\",\n    \"true\",\n    \"true\"\n  ); //CHECK Presencia de gas\n\n  //pdf.addCheckboxSetXY(\" \", margenIzq+342, margenSup-26 , 10, \"check\", \"false\", \"true\" //CHECK pa luego\n\n  //**********************************\n  //Observaciones, precauciones...\n  //**********************************\n  margenSup = margenSup - 28; //Bajamos\n\n  pdf.createTable(1); //Num columnas\n  pdf.setCellBorder(\"all\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(100);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 10, \"#000000\");\n  pdf.addCellText(\n    \" Observaciones, precauciones y proteccin adicionales: \" +\n      String.fromCharCode(13) +\n      \" \" +\n      \" \" +\n      String.fromCharCode(13)\n  );\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  //**********************************\n  //NOTA\n  //**********************************\n  margenSup = margenSup - 45; //Bajamos\n\n  pdf.createTable(1); //Num columnas\n  pdf.setCellBorder(\"none\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(100);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"center\", 9, \"#FF0000\");\n  pdf.addCellText(\n    \"NOTA: SI SE MODIFICAN O AMPLIAN LAS ACTIVIDADES DESCRITAS EN EL ALCANCE DEL TRABAJO SER NECESARIO REVISAR ESTE PERMISO ANTES DE CONTINUAR CON LOS TRABAJOS\"\n  );\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  //**********************************\n  // REQUERIMIENTOS\n  //**********************************\n  margenSup = margenSup - 34; //Bajamos\n\n  pdf.createTable(1); //Num columnas\n  pdf.setCellBorder(\"all\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(100);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 12, \"#000000\");\n  pdf.addCellText(\"REQUERIMIENTOS\", \"#CCCCCC\");\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 10, \"#000000\");\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  //**********************************\n  //Descargo y Pruebas\n  //**********************************\n  margenSup = margenSup - 16; //Bajamos\n\n  pdf.createTable(4); //Num columnas\n  pdf.setCellBorder(\"all\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(20, 30, 20, 30);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 10, \"#000000\");\n  pdf.addCellText(\" DESCARGO\");\n  pdf.addCellText(\" \".repeat(7) + \"SI\" + \" \".repeat(11) + \"NO\");\n  pdf.addCellText(\" PRUEBAS\");\n  pdf.addCellText(\" \".repeat(7) + \"SI\" + \" \".repeat(11) + \"NO\");\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 110,\n    margenSup - 12,\n    10,\n    \"check\",\n    \"true\",\n    \"true\"\n  ); //CHECK SI DESCARGO\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 150,\n    margenSup - 12,\n    10,\n    \"check\",\n    \"false\",\n    \"true\"\n  ); //CHECK NO DESCARGO\n\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 360,\n    margenSup - 12,\n    10,\n    \"check\",\n    \"true\",\n    \"true\"\n  ); //CHECK SI PRUEBAS\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 400,\n    margenSup - 12,\n    10,\n    \"check\",\n    \"false\",\n    \"true\"\n  ); //CHECK NO PRUEBAS\n\n  //**********************************\n  //Observaciones\n  //**********************************\n  margenSup = margenSup - 14; //Bajamos\n\n  pdf.createTable(1); //Num columnas\n  pdf.setCellBorder(\"all\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(100);\n\n  pdf.addCellText(\" Observaciones:\" + String.fromCharCode(13).repeat(5));\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  margenSup = margenSup - 13; //Bajamos\n\n  pdf.createTable(1); //Num columnas\n  pdf.setCellBorder(\"none\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(100);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 9, \"#000000\");\n  pdf.addCellText(\" \" + \" \");\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  //********************************************************************\n  // CONDICIONES DEL SISTEMA REQUERIDAS POR MANTENIMIENTO\n  //********************************************************************\n  margenSup = margenSup - 51; //Bajamos\n\n  pdf.createTable(2); //Num columnas\n  pdf.setCellBorder(\"all\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(80, 20);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 12, \"#000000\");\n  pdf.addCellText(\n    \"CONDICIONES DEL SISTEMA REQUERIDAS POR MANTENIMIENTO\",\n    \"#CCCCCC\"\n  );\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 10, \"#000000\");\n  pdf.addCellText(\" \".repeat(8) + \"SI\" + \" \".repeat(11) + \"NO\");\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 412,\n    margenSup - 13,\n    10,\n    \"check\",\n    \"true\",\n    \"true\"\n  ); //CHECK SI\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 451,\n    margenSup - 13,\n    10,\n    \"check\",\n    \"false\",\n    \"true\"\n  ); //CHECK NO\n\n  margenSup = margenSup - 16; //Bajamos\n\n  pdf.createTable(3); //Num columnas\n  pdf.setCellBorder(\"all\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(34, 33, 33);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 10, \"#000000\");\n  pdf.addCellText(\" \".repeat(7) + \"Drenado\");\n  pdf.addCellText(\" \".repeat(7) + \"Despresurizado\");\n  pdf.addCellText(\" \".repeat(7) + \"Bloqueado Mecnicamente\");\n\n  pdf.addCellText(\" \".repeat(7) + \"Barrido\");\n  pdf.addCellText(\" \".repeat(7) + \"Inertizado\");\n  pdf.addCellText(\" \".repeat(7) + \"Bloqueado Elctricamente\");\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 6,\n    margenSup - 12,\n    10,\n    \"check\",\n    \"true\",\n    \"true\"\n  ); //CHECK Drenado\n\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 176,\n    margenSup - 12,\n    10,\n    \"check\",\n    \"true\",\n    \"true\"\n  ); //CHECK Despresurizado\n\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 342,\n    margenSup - 12,\n    10,\n    \"check\",\n    \"true\",\n    \"true\"\n  ); //CHECK Bloqueado Mecnicamente\n\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 6,\n    margenSup - 26,\n    10,\n    \"check\",\n    \"true\",\n    \"true\"\n  ); //CHECK Barrido\n\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 176,\n    margenSup - 26,\n    10,\n    \"check\",\n    \"true\",\n    \"true\"\n  ); //CHECK Inertizado\n\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 342,\n    margenSup - 26,\n    10,\n    \"check\",\n    \"true\",\n    \"true\"\n  ); //CHECK Bloqueado Elctricamente\n\n  //**********************************\n  //Observaciones\n  //**********************************\n  margenSup = margenSup - 28; //Bajamos\n\n  pdf.createTable(1); //Num columnas\n  pdf.setCellBorder(\"all\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(100);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 10);\n  pdf.addCellText(\n    \" Observaciones, precauciones y proteccin adicionales: \" +\n      String.fromCharCode(13).repeat(5)\n  );\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  margenSup = margenSup - 13; //Bajamos\n\n  pdf.createTable(1); //Num columnas\n  pdf.setCellBorder(\"none\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(100);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 9, \"#000000\");\n  pdf.addCellText(\" \" + \" \");\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  //********************************************************************\n  // ENTREGA DEL SISTEMA EN LAS CONDICIONES REQUERIDAS\n  //********************************************************************\n  margenSup = margenSup - 51; //Bajamos\n\n  pdf.createTable(2); //Num columnas\n  pdf.setCellBorder(\"all\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(80, 20);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 12, \"#000000\");\n  pdf.addCellText(\n    \"ENTREGA DEL SISTEMA EN LAS CONDICIONES REQUERIDAS\",\n    \"#CCCCCC\"\n  );\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 10, \"#000000\");\n  pdf.addCellText(\" \".repeat(9) + \"SI\" + \" \".repeat(11) + \"NO\");\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 412,\n    margenSup - 13,\n    10,\n    \"check\",\n    \"true\",\n    \"true\"\n  ); //CHECK SI\n  pdf.addCheckboxSetXY(\n    \" \",\n    margenIzq + 451,\n    margenSup - 13,\n    10,\n    \"check\",\n    \"false\",\n    \"true\"\n  ); //CHECK NO\n\n  //**********************************\n  //Observaciones\n  //**********************************\n  margenSup = margenSup - 16; //Bajamos\n\n  pdf.createTable(1); //Num columnas\n  pdf.setCellBorder(\"all\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(100);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 10);\n  pdf.addCellText(\" Observaciones: \" + String.fromCharCode(13).repeat(5));\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  margenSup = margenSup - 13; //Bajamos\n\n  pdf.createTable(1); //Num columnas\n  pdf.setCellBorder(\"none\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(100);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 9, \"#000000\");\n  pdf.addCellText(\" \" + \" \");\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  //************************************************************\t\t******************************************\n  //************************************************************\t\t******************************************\n\n  //    \t\t\t\t\t\tPonemos celdas vacas para pasar a la hoja siguiente\n\n  //************************************************************\t\t******************************************\n  // ***********************************************************\t\t******************************************\n\n  pdf.createTable(1);\n  pdf.setCellBorder(\"none\");\n  pdf.addCellText(\" \" + String.fromCharCode(13).repeat(85));\n  pdf.addTable();\n\n  //**********************************\n  //       CABECERA 2\n  // LOGO\t\tTITULO\n  // *********************************\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"center\", 14, \"#000000\");\n\n  margenIzq = 46;\n  margenDcho = 546;\n  margenSup = 810;\n\n  //Esta tabla al pintarse no actualiza pdf.GetVerticalPosition porque se pinta \"flotando\" encima del documento\n  //El alto de las celdas viene determinado por su contenido, si queremos ms alto poner ms String.fromCharCode(10)+String.fromCharCode(13)\n  pdf.createTable(3); //Num columnas\n\n  // Muy importante, a la hora de hacer una tabla posicionada de forma absoluta\n  // es necesario definir previamente el ancho de la tabla.\n  pdf.setCellBorder(\"all\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(20, 55, 25); //La suma debe ser 100, pues son porcentajes\n  pdf.addCellText(String.fromCharCode(10).repeat(3));\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"bold\", \"center\", 16, \"#000000\");\n  pdf.addCellText(\n    String.fromCharCode(13) + \"Central Termosolar \" + \" \",\n    \"#FFFFFF\"\n  );\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"center\", 10, \"#000000\");\n  pdf.addCellText(\n    String.fromCharCode(13) +\n      \"MECANICO\" +\n      String.fromCharCode(13).repeat(2) +\n      \"N OT: 4065833  -  0010\",\n    \"#99FF99\"\n  );\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  //Para la lnea entre el puesto de trabajo y el numero de OT\n  //pdf.addRectangle(EjeX, EjeY, Long, 0, 1, \"ColorIni\", \"ColorFin\"\n  pdf.addRectangle(421, 780, 125, 0, 1, \"#000000\", \"#000000\");\n\n  //**********************************\n  //       \tFIRMAS\n  // *********************************\n  margenSup = margenSup - 90; //Bajamos\n\n  pdf.createTable(2); //Num columnas\n  pdf.setCellBorder(\"all\");\n  pdf.setTableWidth(500);\n  pdf.setTableCellWidths(50, 50);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 12, \"#000000\");\n  pdf.addCellText(\"FIRMAS DE APERTURA\", \"#CCCCCC\");\n  pdf.addCellText(\"CONFORME\", \"#CCCCCC\");\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 8, \"#000000\");\n\n  pdf.addCellText(\n    String.fromCharCode(13).repeat(10) + \" Ejecutor / Nombre / Fecha / Hora\"\n  );\n\n  pdf.addCellText(\n    String.fromCharCode(13).repeat(10) +\n      \" Supervisor de turno / Nombre / Fecha / Hora\"\n  );\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 12, \"#000000\");\n  pdf.addCellText(\"TRABAJO FINALIZADO\", \"#CCCCCC\");\n  pdf.addCellText(\"CONFORME\", \"#CCCCCC\");\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 8, \"#000000\");\n\n  pdf.addCellText(\n    String.fromCharCode(13).repeat(10) + \" Ejecutor / Nombre / Fecha / Hora\"\n  );\n\n  pdf.addCellText(\n    String.fromCharCode(13).repeat(10) +\n      \" Supervisor de turno / Nombre / Fecha / Hora\"\n  );\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  //**********************************\n  //       TEXTO PIE FINAL\n  // *********************************\n  //margenSup = margenSup - 190 //Bajamos\n\n  //pdf.createTable(1  //Num columnas\n  //pdf.setCellBorder(\"none\"\n  //pdf.setTableWidth(500\n  //pdf.setTableCellWidths(100\n\n  //setTextStyle(pdf,\"gillsans.ttf\",\"normal\",\"center\",12,\"#000000\"\n  //pdf.addCellText(\"TELEFONO SALA CONTROL MAN1\"+String.fromCharCode(13)+String.fromCharCode(13)+\"682 127 278\"\n\n  //pdf.addTableSetXY(margenIzq, margenSup\t//EjeX, EjeY\n\n  pdf.close();\n\n  //Si queremos abrir el PDF una vez generado.\n  var a = await ui.msgBox(\"ABRIR PDF?\", \"PDF GENERADO\", 4);\n  if (a == 6) {\n    //Si queremos abrir el PDF una vez generado.\n    pdf.launchPDF();\n  }\n}\n\n//Para mayor simplicidad, todas las diferentes lneas son tablas, que nos permiten alinear el texto ms facilmente.\n//El documento es una grilla cuyo punto 0,0 es la ESQUINA INFERIOR IZQUIERDA.\n//Para mejor desarrollo, activar showGridDebug(pdf)\n//addNewLine(Pdf01) Aade una tabla de una lnea vaca y sin bordes\n\nasync function GenerarPDF3Apaisado(nameFile, pdf, createGrid) {\n  var cDesca, objDesca;\n\n  //Creamos el PDF, borramos si existe ya el fichero, le indicamos el nombre y la encriptacin a utilizar\n  //CreatePDF nameFile,pdf\n  try {\n    pdf.delete(nameFile);\n  } catch (e) {}\n\n  pdf.create(nameFile, 865, 600);\n  pdf.permissions(\"assembly\");\n  pdf.permissions(\"print\");\n  pdf.setEncryption(\"\", \"1234\", \"128bits\");\n\n  pdf.open();\n\n  //**************************************************************\n  // Muestra una rejilla de ayuda para posicionar cosas en el PDF\n  //**************************************************************\n  if (createGrid == 1) {\n    showGridDebug(pdf);\n  }\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"center\", 14, \"#000000\");\n\n  //pdf.setFont(\"gillsans.ttf\"\n  //pdf.setFontStyle(\"normal\"\n  //pdf.setAlignment(\"center\"\n  //pdf.setFontColor(\"#000000\"\n  //pdf.setFontSize(normal\n\n  //**********************************\n  //\tINICIALIZAMOS VALORES\n  //**********************************\n\n  var margenIzq = 20;\n  var margenDcho = 845;\n  var margenSup = 600; //es apaisado\n\n  //**********************************\n  //       CABECERA\n  // LOGO\t\tTITULO\n  // *********************************\n\n  //Esta tabla al pintarse no actualiza pdf.GetVerticalPosition porque se pinta \"flotando\" encima del documento\n  //El alto de las celdas viene determinado por su contenido, si queremos ms alto poner ms String.fromCharCode(10)+String.fromCharCode(13)\n  margenSup = margenSup - 25; //Bajamos\n  pdf.createTable(3); //Num columnas\n  pdf.setCellBorder(\"none\");\n\n  // Muy importante, a la hora de hacer una tabla posicionada de forma absoluta\n  // es necesario definir previamente el ancho de la tabla.\n  pdf.setTableWidth(825);\n  pdf.setTableCellWidths(10, 80, 10); //La suma debe ser 100, pues son porcentajes\n  pdf.addCellText(String.fromCharCode(10).repeat(3));\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"bold\", \"center\", 16, \"#000000\");\n  pdf.addCellText(\n    String.fromCharCode(13) + \"Central Termosolar \" + \" \",\n    \"#FFFFFF\"\n  );\n\n  pdf.addCellText(\" \");\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  //Para la lnea entre el puesto de trabajo y el numero de OT\n  //pdf.addRectangle(EjeX, EjeY, Long, 0, 1, \"ColorIni\", \"ColorFin\"\n  //pdf.addRectangle(421, 780, 125, 0, 1, \"#000000\", \"#000000\"\n\n  //**********************************\n  //       Cajas bajo cabecera\n  // *********************************\n  //N Permiso\n  margenSup = margenSup - 70; //Bajamos\n  pdf.createTable(12); //Num columnas\n  pdf.setTableWidth(825);\n  pdf.setTableCellWidths(8, 1, 12, 17, 1, 35, 6, 1, 6, 6, 1, 6);\n\n  pdf.setCellBorder(\"none\");\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"right\", 9, \"#000000\");\n  pdf.addCellText(\"N Permiso\");\n  pdf.addCellText(\" \");\n\n  pdf.setCellBorder(\"all\");\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 9, \"#000000\");\n  pdf.addCellText(\" \" + \" - \" + \" \");\n\n  pdf.setCellBorder(\"none\");\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"right\", 9, \"#000000\");\n  pdf.addCellText(\"Supervisor de Turno / Fecha\");\n  pdf.addCellText(\" \");\n\n  pdf.setCellBorder(\"all\");\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"left\", 9, \"#000000\");\n  pdf.addCellText(\"Nombre del tio con los apellidos y la fecha\");\n\n  pdf.setCellBorder(\"none\");\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"right\", 9, \"#000000\");\n  pdf.addCellText(\"Caja\");\n  pdf.addCellText(\" \");\n\n  pdf.setCellBorder(\"all\");\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"center\", 9, \"#000000\");\n  pdf.addCellText(\" \");\n\n  pdf.setCellBorder(\"none\");\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"right\", 9, \"#000000\");\n  pdf.addCellText(\"Unidad\");\n  pdf.addCellText(\" \");\n\n  pdf.setCellBorder(\"all\");\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"center\", 9, \"#000000\");\n  pdf.addCellText(\" \");\n\n  pdf.addTableSetXY(20, margenSup); //EjeX, EjeY\n\n  //**********************************\n  //       Cabeceras content\n  // *********************************\n  margenSup = margenSup - 23; //Bajamos\n  pdf.createTable(3); //Num columnas\n  pdf.setTableWidth(825);\n  pdf.setTableCellWidths(39, 42, 19);\n  setTextStyle(pdf, \"gillsans.ttf\", \"bold\", \"center\", 10, \"#000000\");\n  pdf.setCellBorder(\"none\");\n  pdf.addCellText(\" \");\n  pdf.setCellBorder(\"all\");\n  pdf.addCellText(\"Secuencia Ejecucin y pruebas\");\n  pdf.addCellText(\"Secuencia de reposicin\");\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  margenSup = margenSup - 14; //Bajamos\n  pdf.createTable(7); //Num columnas\n  pdf.setTableWidth(825);\n  pdf.setTableCellWidths(39, 15, 9, 9, 9, 9, 10);\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"center\", 8, \"#000000\");\n  pdf.setCellBorder(\"none\");\n  pdf.addCellText(\" \");\n  pdf.setCellBorder(\"all\");\n  pdf.addCellText(\"COLOCACIN\");\n  pdf.addCellText(\"PREPARACIN\" + String.fromCharCode(13) + \"PARA PRUEBA\");\n  pdf.addCellText(\"VUELTA A\" + String.fromCharCode(13) + \"DESCARGO\");\n  pdf.addCellText(\"PREPARACIN\" + String.fromCharCode(13) + \"PARA PRUEBA\");\n  pdf.addCellText(\"LEVANTAMIENTO\");\n  pdf.addCellText(\"SI NO ES POSIBLE\" + String.fromCharCode(13) + \"REPONER\");\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  margenSup = margenSup - 20; //Bajamos\n  pdf.createTable(9); //Num columnas\n  pdf.setTableWidth(825);\n  pdf.setTableCellWidths(12, 4, 23, 15, 9, 9, 9, 9, 10);\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"center\", 8, \"#000000\");\n  pdf.setCellBorder(\"all\");\n  pdf.addCellText(\"N Total Tarjetas\");\n  pdf.addCellText(\" \");\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"center\", 7, \"#000000\");\n  pdf.addCellText(\" \");\n  pdf.addCellText(\"Posicin en descargo\");\n  pdf.addCellText(\"Posicin en 1 prueba\");\n  pdf.addCellText(\"Posicin en descargo\");\n  pdf.addCellText(\"Posicin en 2 prueba\");\n  pdf.addCellText(\"Posicin reposicin\");\n  pdf.addCellText(\"Reposicin pendiente\");\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  //**********************************\n  //       \tContent Datos\n  // *********************************\n  margenSup = margenSup - 12; //Bajamos\n  pdf.createTable(16); //Num columnas\n  pdf.setCellBorder(\"all\");\n  pdf.setTableWidth(825);\n  pdf.setTableCellWidths(4, 12, 23, 4, 6, 5, 4, 5, 4, 5, 4, 5, 4, 5, 5, 5);\n\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"center\", 9, \"#000000\");\n  pdf.addCellText(\"N\" + String.fromCharCode(13) + \"Tarjeta\");\n  pdf.addCellText(String.fromCharCode(13) + \"KKS\");\n  pdf.addCellText(String.fromCharCode(13) + \"DESCRIPCIN\");\n  pdf.addCellText(\"N\" + String.fromCharCode(13) + \"Orden\");\n  pdf.addCellText(\"N\" + String.fromCharCode(13) + \"Candado\");\n  pdf.addCellText(String.fromCharCode(13) + \"Estado\");\n  pdf.addCellText(\"N\" + String.fromCharCode(13) + \"Orden\");\n  pdf.addCellText(String.fromCharCode(13) + \"Estado\");\n  pdf.addCellText(\"N\" + String.fromCharCode(13) + \"Orden\");\n  pdf.addCellText(String.fromCharCode(13) + \"Estado\");\n  pdf.addCellText(\"N\" + String.fromCharCode(13) + \"Orden\");\n  pdf.addCellText(String.fromCharCode(13) + \"Estado\");\n  pdf.addCellText(\"N\" + String.fromCharCode(13) + \"Orden\");\n  pdf.addCellText(String.fromCharCode(13) + \"Estado\");\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"center\", 7, \"#000000\");\n  pdf.addCellText(\"Otros\" + String.fromCharCode(13) + \"Descargos\");\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"center\", 9, \"#000000\");\n  pdf.addCellText(String.fromCharCode(13) + \"Estado\");\n\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  //**********************************\n  //       \tFIRMAS\n  // *********************************\n  margenSup = 140; //Bajamos\n  pdf.createTable(7); //Num columnas\n  pdf.setTableWidth(825);\n  pdf.setTableCellWidths(39, 15, 9, 9, 9, 9, 10);\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"right\", 9, \"#000000\");\n  pdf.setCellBorder(\"all\");\n\n  pdf.addCellText(\n    \"NOMBRE Y FIRMA DEL OPERADOR\" +\n      String.fromCharCode(13).repeat(2) +\n      \"FECHA Y HORA\"\n  );\n  pdf.addCellText(\" \");\n  pdf.addCellText(\" \");\n  pdf.addCellText(\" \");\n  pdf.addCellText(\" \");\n  pdf.addCellText(\" \");\n  pdf.addCellText(\" \");\n\n  pdf.addCellText(\n    \"NOMBRE Y FIRMA DEL SUPERVISOR DE TURNO\" +\n      String.fromCharCode(13).repeat(2) +\n      \"FECHA Y HORA\"\n  );\n  pdf.addCellText(\" \");\n  pdf.addCellText(\" \");\n  pdf.addCellText(\" \");\n  pdf.addCellText(\" \");\n  pdf.addCellText(\" \");\n  pdf.addCellText(\" \");\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  margenSup = margenSup - 80; //Bajamos\n  pdf.createTable(7); //Num columnas\n  pdf.setTableWidth(825);\n  pdf.setTableCellWidths(39, 15, 9, 9, 9, 9, 10);\n  setTextStyle(pdf, \"gillsans.ttf\", \"normal\", \"center\", 8, \"#000000\");\n  pdf.setCellBorder(\"none\");\n  pdf.addCellText(\" \");\n  pdf.setCellBorder(\"all\");\n  pdf.addCellText(\"COLOCACIN\");\n  pdf.addCellText(\"PREPARACIN\" + String.fromCharCode(13) + \"PARA PRUEBA\");\n  pdf.addCellText(\"VUELTA A\" + String.fromCharCode(13) + \"DESCARGO\");\n  pdf.addCellText(\"PREPARACIN\" + String.fromCharCode(13) + \"PARA PRUEBA\");\n  pdf.addCellText(\"LEVANTAMIENTO\");\n  pdf.addCellText(\"SI NO ES POSIBLE\" + String.fromCharCode(13) + \"REPONER\");\n  pdf.addTableSetXY(margenIzq, margenSup); //EjeX, EjeY\n\n  pdf.close();\n  //Si queremos abrir el PDF una vez generado.\n  var a = await ui.msgBox(\"ABRIR PDF?\", \"PDF GENERADO\", 4);\n  if (a == 6) {\n    //Si queremos abrir el PDF una vez generado.\n    pdf.launchPDF();\n  }\n}\n\nfunction setLanguage(lang) {\n  switch (lang) {\n    case \"es-ES\":\n      self.setFieldPropertyValue(\n        \"MAP_IDIOMA\",\n        \"title\",\n        \"Seleccione un idioma: \"\n      );\n      self.setFieldPropertyValue(\"MAP_LABEL\", \"title\", \"Etiqueta: \");\n      self.setFieldPropertyValue(\"MAP_TEXT\", \"title\", \"Texto: \");\n      self.setFieldPropertyValue(\"MAP_PASSWORD\", \"title\", \"Contrasea: \");\n      self.setFieldPropertyValue(\"MAP_TEXTAREA\", \"title\", \"Multilnea: \");\n      self.setFieldPropertyValue(\"MAP_NUMBER\", \"title\", \"Nmero: \");\n      self.setFieldPropertyValue(\"MAP_DECIMAL\", \"title\", \"N. Decimal: \");\n      self.setFieldPropertyValue(\"MAP_NUMTEXT\", \"title\", \"Nmero-Texto: \");\n      self.setFieldPropertyValue(\"MAP_DECTEXT\", \"title\", \"Decimal-Texto: \");\n      self.setFieldPropertyValue(\"MAP_DATE\", \"title\", \"Fecha: \");\n      self.setFieldPropertyValue(\"MAP_HOUR\", \"title\", \"Hora: \");\n      self.setFieldPropertyValue(\"MAP_TELEFONO\", \"title\", \"Telfono: \");\n      self.setFieldPropertyValue(\n        \"MAP_CHECKBOX\",\n        \"title\",\n        \"Casilla de Verificacion (0/1): \"\n      );\n      self.setFieldPropertyValue(\"TIPOIDENTIFICADOR\", \"title\", \"Combo: \");\n      self.setFieldPropertyValue(\"TIPOIDENTIFICADOR2\", \"title\", \"Lupa: \");\n      self.setFieldPropertyValue(\"MAP_TEXTAT\", \"title\", \"Adjunto: \");\n      self.setFieldPropertyValue(\n        \"MAP_BT_EJEMPLO\",\n        \"title\",\n        \"Ejemplo de titulo\"\n      );\n      break;\n    case \"en-US\":\n      self.setFieldPropertyValue(\"MAP_IDIOMA\", \"title\", \"Select a language: \");\n      self.setFieldPropertyValue(\"MAP_LABEL\", \"title\", \"Tag: \");\n      self.setFieldPropertyValue(\"MAP_TEXT\", \"title\", \"Text: \");\n      self.setFieldPropertyValue(\"MAP_PASSWORD\", \"title\", \"Password: \");\n      self.setFieldPropertyValue(\"MAP_TEXTAREA\", \"title\", \"Multiline: \");\n      self.setFieldPropertyValue(\"MAP_NUMBER\", \"title\", \"Number: \");\n      self.setFieldPropertyValue(\"MAP_DECIMAL\", \"title\", \"N. Decimal: \");\n      self.setFieldPropertyValue(\"MAP_NUMTEXT\", \"title\", \"Number-Text: \");\n      self.setFieldPropertyValue(\"MAP_DECTEXT\", \"title\", \"Decimal-Text: \");\n      self.setFieldPropertyValue(\"MAP_DATE\", \"title\", \"Date: \");\n      self.setFieldPropertyValue(\"MAP_HOUR\", \"title\", \"Time: \");\n      self.setFieldPropertyValue(\"MAP_TELEFONO\", \"title\", \"Phone: \");\n      self.setFieldPropertyValue(\"MAP_CHECKBOX\", \"title\", \"Checkbox (0/1): \");\n      self.setFieldPropertyValue(\"TIPOIDENTIFICADOR\", \"title\", \"Combo: \");\n      self.setFieldPropertyValue(\"TIPOIDENTIFICADOR2\", \"title\", \"Magnifier: \");\n      self.setFieldPropertyValue(\"MAP_TEXTAT\", \"title\", \"Attachment: \");\n      self.setFieldPropertyValue(\"MAP_BT_EJEMPLO\", \"title\", \"Attachment: \");\n      break;\n    case \"pt-PT\":\n      self.setFieldPropertyValue(\n        \"MAP_IDIOMA\",\n        \"title\",\n        \"Selecionar um idioma: \"\n      );\n      self.setFieldPropertyValue(\"MAP_LABEL\", \"title\", \"Etiqueta: \");\n      self.setFieldPropertyValue(\"MAP_TEXT\", \"title\", \"Texto: \");\n      self.setFieldPropertyValue(\"MAP_PASSWORD\", \"title\", \"Senha: \");\n      self.setFieldPropertyValue(\"MAP_TEXTAREA\", \"title\", \"Multilina: \");\n      self.setFieldPropertyValue(\"MAP_NUMBER\", \"title\", \"Nmero: \");\n      self.setFieldPropertyValue(\"MAP_DECIMAL\", \"title\", \"N. Decimal: \");\n      self.setFieldPropertyValue(\"MAP_NUMTEXT\", \"title\", \"Nmero-Texto: \");\n      self.setFieldPropertyValue(\"MAP_DECTEXT\", \"title\", \"Decimal-Texto: \");\n      self.setFieldPropertyValue(\"MAP_DATE\", \"title\", \"Data: \");\n      self.setFieldPropertyValue(\"MAP_HOUR\", \"title\", \"Hora: \");\n      self.setFieldPropertyValue(\"MAP_TELEFONO\", \"title\", \"Telfono: \");\n      self.setFieldPropertyValue(\n        \"MAP_CHECKBOX\",\n        \"title\",\n        \"Caixa de verificao (0/1): \"\n      );\n      self.setFieldPropertyValue(\"TIPOIDENTIFICADOR\", \"title\", \"Combo: \");\n      self.setFieldPropertyValue(\"TIPOIDENTIFICADOR2\", \"title\", \"Lupa: \");\n      self.setFieldPropertyValue(\"MAP_TEXTAT\", \"title\", \"Anexo: \");\n      self.setFieldPropertyValue(\"MAP_BT_EJEMPLO\", \"title\", \"Attachment: \");\n      break;\n    case \"ru\":\n      self.setFieldPropertyValue(\"MAP_IDIOMA\", \"title\", \"  : \");\n      self.setFieldPropertyValue(\"MAP_LABEL\", \"title\", \": \");\n      self.setFieldPropertyValue(\"MAP_TEXT\", \"title\", \": \");\n      self.setFieldPropertyValue(\"MAP_PASSWORD\", \"title\", \": \");\n      self.setFieldPropertyValue(\"MAP_TEXTAREA\", \"title\", \": \");\n      self.setFieldPropertyValue(\"MAP_NUMBER\", \"title\", \": \");\n      self.setFieldPropertyValue(\"MAP_DECIMAL\", \"title\", \"N. : \");\n      self.setFieldPropertyValue(\"MAP_NUMTEXT\", \"title\", \"-: \");\n      self.setFieldPropertyValue(\"MAP_DECTEXT\", \"title\", \"-: \");\n      self.setFieldPropertyValue(\"MAP_DATE\", \"title\", \": \");\n      self.setFieldPropertyValue(\"MAP_HOUR\", \"title\", \": \");\n      self.setFieldPropertyValue(\"MAP_TELEFONO\", \"title\", \": \");\n      self.setFieldPropertyValue(\"MAP_CHECKBOX\", \"title\", \" (0/1): \");\n      self.setFieldPropertyValue(\"TIPOIDENTIFICADOR\", \"title\", \"Combo: \");\n      self.setFieldPropertyValue(\n        \"TIPOIDENTIFICADOR2\",\n        \"title\",\n        \" : \"\n      );\n      self.setFieldPropertyValue(\"MAP_TEXTAT\", \"title\", \": \");\n      self.setFieldPropertyValue(\"MAP_BT_EJEMPLO\", \"title\", \" \");\n      break;\n  }\n}\n\nfunction DevolverIframeVideoYoutube(sUrlYoutube, objeto) {\n  if (sUrlYoutube == \"\") {\n    ui.showToast(\"Error, URL de youtube invlida\");\n    return \"\";\n  }\n  var longitud = sUrlYoutube.length;\n  var urlIndice = sUrlYoutube.indexOf(\"watch?v=\", 1);\n  if (urlIndice != -1) {\n    //Es una URL completa. Parseamos y sacamos el cdigo.\n    if (urlIndice >= longitud) {\n      //ui.ShowToast \"Error, URL de youtube invlida\", \"Error\", 0\n      return \"\";\n    }\n    sUrlYoutube = sUrlYoutube.substring(urlIndice + 8, longitud);\n    //Vemos si hay ms parmetros despus del cdigo del vdeo,\n    //para ignorarlos.\n    var urlIndiceSiguenteParametro = sUrlYoutube.indexOf(\"&\", 1);\n    if (urlIndiceSiguenteParametro > -1) {\n      //No hay parmetros, cogemos desde aqu hasta el final nos vale.\n      //}else{\n      //Hay parmetros. La posicin del primer parmetro la hemos calculado\n      //a partir del InStr, as que se la sumamos para coger la posicin\n      //en la cadena completa.\n      sUrlYoutube = sUrlYoutube.substring(1, urlIndiceSiguenteParametro - 1);\n    }\n    //objeto(\"MAP_IMG_FIJACAPITULO\")=\"https://www.youtube.com/embed/\" + sUrlYoutube + \"?rel=0&autoplay=1\"\n    //objeto.MAP_IMG_FIJACAPITULO = sUrlYoutube;\n    //Concatenamos el iframe.\n    return (\n      \"<iframe id='video' type='text/html' width='100%' height='100%' src='https://www.youtube.com/embed/\" +\n      sUrlYoutube +\n      \"?rel=0&autoplay=0' frameborder='0'/>\"\n    );\n  } else {\n    //objeto.MAP_IMG_FIJACAPITULO = sUrlYoutube;\n    return (\n      \"<iframe id='video' type='text/html' width='100%' height='100%' src='\" +\n      sUrlYoutube +\n      \"?rel=0&autoplay=0' frameborder='0'/>\"\n    );\n  }\n}\n\nfunction doRegisterNewFingerprint() {\n  var params = {\n    onSuccess: function(result) {\n      var sPublicKey = result.getPublicKey();\n      if (user.PUBLICKEY != sPublicKey) {\n        user.PUBLICKEY = sPublicKey;\n        user.save();\n        ui.showToast(\n          \"Autenticacin por huella dactilar habilitada para usuario \" +\n            user.LOGIN\n        );\n        appData.failWithMessage(-11888, \"##EXIT##\");\n      } else {\n        ui.showToast(\"Ya est registrado!\");\n        appData.failWithMessage(-11888, \"##EXIT##\");\n      }\n    },\n    onFailure: function(nError, sErrorMessage) {\n      if (nError == undefined) {\n        if (\n          ui.msgBox(\n            \"Huella no registrada. Aada una nueva en los ajustes de seguridad del dispositivo , Quiere hacerlo ahora?\",\n            \"Informacin!\",\n            4\n          ) == 6\n        ) {\n          fingerprintManager.launchFingerprintSettings();\n        }\n      } else {\n        ui.showToast(\n          \"Error huella dactilar.\\nCdigo: \" +\n            nError +\n            \"\\nMensaje: \" +\n            sErrorMessage\n        );\n      }\n    },\n  };\n  fingerprintManager.setCallback(params);\n  fingerprintManager.listen();\n  ui.showToast(\"Pase su dedo por el lector de huellas dactilares\");\n}\n\nfunction doRegisterNewFingerprintIOS() {\n  var params = {\n    onSuccess: function(result) {\n      var sPublicKey = result.getPublicKey();\n      if (user.PUBLICKEY != sPublicKey) {\n        user.PUBLICKEY = sPublicKey;\n        user.save();\n        ui.showToast(\n          \"Autenticacin por huella dactilar habilitada para usuario \" +\n            user.LOGIN\n        );\n      } else {\n        ui.showToast(\"Ya est registrado!\");\n      }\n    },\n    onFailure: function(nError, sErrorMessage) {\n      //if (nError == undefined) {\n      //\tif(ui.msgBox(\"Huella no registrada. Aada una nueva en los ajustes de seguridad del dispositivo , Quiere hacerlo ahora?\",\"Informacin!\",4) == 6 ){\n      //\t    fingerprintManager.launchFingerprintSettings();\n      //\t}\n      //} else {\n      ui.showToast(\n        \"Error huella dactilar.\\nCdigo: \" +\n          nError +\n          \"\\nMensaje: \" +\n          sErrorMessage\n      );\n      //}\n    },\n  };\n  fingerprintManager.setCallback(params);\n  fingerprintManager.launch();\n}\n\nfunction doFingerprintAuth() {\n  var params = {\n    onSuccess: function(result) {\n      var sPublicKey = result.getPublicKey();\n      var obj = getUserByPublicKey(sPublicKey);\n      if (obj == null) {\n        ui.showToast(\"Huella no asignada a ningun usuario.\");\n        fingerprintManager.listen();\n      } else {\n        fingerprintManager.stopListening();\n        hacerLogin(obj.LOGIN, obj.PWD);\n      }\n    },\n    onFailure: function(nError, sErrorMessage) {\n      if (nError == undefined) {\n        ui.showToast(\n          \"Huella no registrada. Entre en la aplicacion y asigne la huella al usuario.\"\n        );\n      } else {\n        ui.showToast(\n          \"Error huella dactilar.\\nCdigo: \" +\n            nError +\n            \"\\nMensaje: \" +\n            sErrorMessage\n        );\n      }\n      if (nError === 10) {\n        // Cancelado por el usuario\n        fingerprintManager.stopListening();\n      } else {\n        fingerprintManager.listen();\n      }\n    },\n  };\n  fingerprintManager.setCallback(params);\n  fingerprintManager.listen();\n}\n\nfunction doFingerprintAuthIOS() {\n  var params = {\n    onSuccess: function(result) {\n      var sPublicKey = result.getPublicKey();\n      var obj = getUserByPublicKey(sPublicKey);\n      if (obj == null) {\n        ui.showToast(\"Huella no asignada a ningun usuario.\");\n      } else {\n        hacerLogin(obj.LOGIN, obj.PWD);\n      }\n    },\n    onFailure: function(nError, sErrorMessage) {\n      if (nError == undefined) {\n        ui.showToast(\n          \"Huella no registrada. Entre en la aplicacion y asigne la huella al usuario.\"\n        );\n      } else {\n        ui.showToast(\n          \"Error huella dactilar.\\nCdigo: \" +\n            nError +\n            \"\\nMensaje: \" +\n            sErrorMessage\n        );\n      }\n    },\n  };\n  fingerprintManager.setCallback(params);\n  fingerprintManager.launch();\n}\n\nasync function hacerLogin(usuario, contrasenna) {\n  var collUser = await appData.getCollection(\"Usuarios\");\n  var objUser = await collUser.findObject(\"LOGIN='\" + usuario.toString() + \"'\");\n  if (objUser !== undefined && objUser != null) {\n    if (objUser.PWD == contrasenna) {\n      self[\"MAP_T_ERROR\"] = \"\";\n      ui.refresh(\"MAP_T_ERROR\");\n      await doLogin(usuario, contrasenna);\n    } else {\n      self[\"MAP_T_ERROR\"] = \"Usuario o contrasea incorrectos.\";\n      ui.refresh(\"MAP_T_ERROR,frmError\");\n    }\n  } else {\n    self[\"MAP_T_ERROR\"] = \"Usuario o contrasea incorrectos.\";\n    ui.refresh(\"MAP_T_ERROR,frmError\");\n  }\n}\n\nfunction getOS() {\n  return appData.getGlobalMacro(\"##DEVICE_OS##\");\n}\n\nasync function doLogin(user, pass) {\n  var params = {\n    userName: user,\n    password: pass,\n    entryPoint: \"Menu\",\n\n    // Opcional\n    //onLoginSuccessful: function() {\n    //    ui.showToast(\"Login OK!\");\n    //},\n\n    // Opcional\n    //onLoginFailed: function() {\n    //    ui.showToast(\"Login failed!\");\n    //}\n  };\n  await appData.login(params);\n}\n\nasync function getUserByPublicKey(sPublicKey) {\n  var collUsuarios = await appData.getCollection(\"Usuarios\");\n  return await collUsuarios.findObject(\"PUBLICKEY = '\" + sPublicKey + \"'\");\n}\n\nfunction testReplica() {\n  var sResult = replica.testConnection();\n  ui.showToast(\"Connection: \" + sResult);\n\n  sResult = replica.testAuthentication();\n  ui.showToast(\"Authentication: \" + sResult);\n}\n\nfunction doDRCamera() {\n  var obj = self;\n\n  ui.startCamera({\n    width: 640,\n    onSuccess: function(imgFile) {\n      obj.setFieldPropertyValue(\"DIBUJO\", \"img\", imgFile);\n      ui.refresh();\n    },\n    onCancelled: function() {},\n  });\n}\n\n/***\n *\n * Code from eventos.js\n *\n ***/\n\n// Por script\nasync function jstestClick(e) {\n  var c;\n  if (e.data.msg) {\n    await ui.msgBox(\n      e.target + \": \" + e.data.msg,\n      e.data.title + \" \" + e.data.collName,\n      0\n    );\n    if (e.data.collName != null) {\n      if (e.data.collName.length > 0) {\n        c = await appData.getCollection(e.data.collName);\n      }\n    }\n  } else {\n    await ui.msgBox(\"Abre el objeto \" + e.data, \"Titulo\", 0);\n    if (e.data != null) {\n      if (e.data.length > 0) {\n        c = await appData.getCollection(e.data);\n      }\n    }\n  }\n  var obj = await c.createObject();\n  c.addItem(obj);\n  appData.pushValue(obj);\n}\n\n//manejar errores del tipo WEB\nfunction handleError(e) {\n  //if (e.messageLevel == \"ERROR\") {\n  //    ui.msgBox(\"Nivel: \" + e.messageLevel + \"\\nMensaje: \" + e.message + \"\\nLnea: \" + e.lineNumber + \"\\nID fuente: \" + e.sourceId, \"Error WebView\", 0);\n  //}\n}\n\nfunction eventoOnTextChanged(evento) {\n  //ui.showToast(\"onTextChanged! target: \" + evento.target + \"\\nObjItem: \" + evento.objItem + \"\\nTecla pulsada: \" + evento.keyPressed + \"\\noldText: \" + evento.oldText + \"\\nnewText: \" + evento.newText);\n  self[\"MAP_DESCRIPCIONEVENTO\"] =\n    \"onTextChanged! target: \" +\n    evento.target +\n    \"\\nObjItem: \" +\n    evento.objItem +\n    \"\\nTecla pulsada: \" +\n    evento.keyPressed +\n    \"\\noldText: \" +\n    evento.oldText +\n    \"\\nnewText: \" +\n    evento.newText;\n  ui.getView(self).refresh(\"MAP_DESCRIPCIONEVENTO\");\n}\n\nasync function FiltraMarcados(e) {\n  self.MAP_BUSCAR_TEXT = e.newText;\n  await self.executeNode(\"applyfilter\");\n}\n\nfunction eventoOnFocusChanged(evento) {\n  //ui.showToast(\"onFocusChanged! target: \" + evento.target + \"\\nObjItem: \" + evento.objItem + \"\\nTiene foco: \" + evento.isFocused);\n  self.MAP_DESCRIPCIONEVENTO =\n    \"onFocusChanged! target: \" +\n    evento.target +\n    \"\\nObjItem: \" +\n    evento.objItem +\n    \"\\nTiene foco: \" +\n    evento.isFocused;\n  ui.getView(self).refresh(\"MAP_DESCRIPCIONEVENTO\");\n}\n\nfunction eventoOnFocusChanged3(evento) {\n  self.MAP_DESCRIPCIONEVENTO3 =\n    \"onFocusChanged! target: \" +\n    evento.target +\n    \"\\nObjItem: \" +\n    evento.objItem +\n    \"\\nTiene foco: \" +\n    evento.isFocused;\n  ui.getView(self).refresh(\"MAP_DESCRIPCIONEVENTO3\");\n}\n\n// Por attributo en el nodo\nasync function jstestClickNode(e, data) {\n  var c;\n  if (data.msg) {\n    await ui.msgBox(\n      e.target + \": \" + data.msg,\n      data.title + \" \" + data.collName,\n      0\n    );\n    c = await appData.getCollection(data.collName);\n  } else {\n    await ui.msgBox(\"Abre el objeto \" + data, \"Titulo\", 0);\n    c = await appData.getCollection(data);\n  }\n  var obj = await c.createObject();\n  c.addItem(obj);\n  appData.pushValue(obj);\n}\nfunction scrollArrow(e, miparam) {\n  if (miparam == 1) {\n    if (e.dy <= 10 && self.MAP_VALORVER == 1) {\n      self.MAP_VALORVER = 0;\n      ui.getView(self).refresh(\"frmblotante\");\n    } else if (e.dy > 10 && self.MAP_VALORVER == 0) {\n      self.MAP_VALORVER = 1;\n      ui.getView(self).refresh(\"frmblotante\");\n    }\n  } else {\n    if (e.dy <= 10 && self.MAP_ATTSHOWOVERSCROLL == 1) {\n      self.MAP_ATTSHOWOVERSCROLL = 0;\n      ui.getView(self).refresh(\"attfroverscroll\");\n    } else if (e.dy > 10 && self.MAP_ATTSHOWOVERSCROLL == 0) {\n      self.MAP_ATTSHOWOVERSCROLL = 1;\n      ui.getView(self).refresh(\"attfroverscroll\");\n    }\n  }\n}\n\n// Esta funcion es llamada por el evento sys-message de la coleccin empresas\nasync function sysMessage(codigo, message) {\n  var cadena = \"\";\n  switch (codigo) {\n    case 1000:\n      cadena =\n        \" Actualizacin descargndose (un mensaje por cada actualizacin).\";\n      break;\n\n    case 1001:\n      cadena = \" Actualizacin aplicada (un mensaje por cada actualizacin).\";\n      break;\n\n    case 1002:\n      cadena =\n        \" Se han aplicado todas las actualizaciones (al comprobar las actualizaciones puede haber ms de una, ste se invoca al aplicar todas).\";\n      break;\n\n    case 1003:\n      /* Provisionamiento seguro. */\n      /* Declarar el nodo sys-message requiere que este caso lo controle el programador,\n\t\t\t/* es responsabilidad del programador limpiar la cola de rplica y cerrar la aplicacin.\n\t\t\t/* ************************ */\n\n      await ui.msgBox(\n        \"Advertencia, se ha programado una actualizacin de base de datos. Se van a replicar todos los datos y se cerrar la aplicacin.\",\n        \"Mensaje\",\n        0\n      );\n      var bResult = replica.processReplicatorQueue(liveResponse);\n      if (bResult) {\n        //ui.msgBox(\"Cola de salida del replicador procesada correctamente. Cerrando aplicacin.\", \"Mensaje\", 0);\n        appData.failWithMessage(-11888, \"##EXITAPP##\");\n      } else {\n        ui.showToast(\"Error al procesar la cola de salida\");\n        //Ojo, hay que volver a intentarlo  hacer una repetitiva, tenemos que replicar lo que haya en el disposivo antes de salir.\n      }\n      break;\n  }\n}\n\n/***\n *\n * Code from funciones_perifericos.js\n *\n ***/\n\nasync function EnviarMail(adjunto) {\n  var men = \"\";\n  if (self.MAP_CORREO.length === 0)\n    men = \"Es obligatorio indicar el correo de destino\";\n\n  if (self.MAP_ASUNTO.length === 0 && men.length === 0)\n    men = \"Es obligatorio indicar el asunto del correo\";\n\n  if (self.MAP_CUERPO.length === 0 && men.length === 0)\n    men = \"Es obligatorio indicar el cuerpo del correo\";\n\n  if (men.length === 0) {\n    if (adjunto === \"NO\") {\n      var ok = await ui.msgBox(\"Desea adjuntar un fichero?\", \"Aviso\", 4);\n      if (ok === 6) {\n        self.MAP_VISIBLE = 1;\n        ui.refresh(\"MAP_TEXTAT,boton0,boton1\");\n      } else {\n        ui.sendMail(\n          self.MAP_CORREO,\n          \"direccion_con_copia@xone.es\",\n          self.MAP_ASUNTO,\n          self.MAP_CUERPO,\n          \"\"\n        );\n      }\n    } else {\n      if (self.MAP_TEXTAT.length === 0)\n        await ui.msgBox(\n          \"Error: Es Obligatorio indicar el fichero adjunto\",\n          \"AVISO\",\n          0\n        );\n      else\n        ui.sendMail(\n          self.MAP_CORREO,\n          \"direccion_con_copia@xone.es\",\n          self.MAP_ASUNTO,\n          self.MAP_CUERPO,\n          self.MAP_TEXTAT\n        );\n    }\n  } else {\n    await ui.msgBox(\"Error: \" + men, \"AVISO\", 0);\n  }\n}\n\nasync function CodigoBarras() {\n  var men = \"\";\n  if (self.MAP_TIPOCB.length === 0)\n    men = \"Es obligatorio indicar el tipo de codigo de barras a leer\";\n\n  if (self.MAP_CHECKBOX1 === 0 && self.MAP_CHECKBOX2 === 0)\n    men = \"Es obligatorio indicar la aplicacion a utilizar\";\n\n  if (men.length === 0) {\n    if (self.MAP_CHECKBOX1 === 1) ui.startScanner(\"\", self.MAP_TIPOCB, \"\");\n    else ui.startScanner(\"quickmark\", self.MAP_TIPOCB, \"\");\n  } else {\n    await ui.msgBox(\"Error: \" + men, \"AVISO\", 0);\n  }\n}\n\n/***\n *\n * Code from funcionesCamara.js\n *\n ***/\n\nfunction takePicture() {\n  let control = getControl(\"MAP_CAMERA\");\n  if (!control) {\n    return;\n  }\n  var params = {\n    filename: \"test.jpg\",\n    saveToGallery: true,\n    width: 360,\n    height: 360,\n    onFinished: function(sFileName) {\n      if (!sFileName) {\n        ui.showToast(\"Error de cmara\");\n      } else {\n        ui.showToast(\"Abriendo nueva foto...\");\n        ui.openFile(sFileName);\n      }\n    },\n  };\n  control.takePicture(params);\n}\n\nfunction record() {\n  let control = getControl(\"MAP_CAMERA\");\n  if (!control) {\n    return;\n  }\n\n  var currentObj = self;\n  let params = {\n    quality: self.MAP_CAMERA_QUALITY,\n    maxDuration: 10000, // Milisegundos\n    //maxFileSize : 10485760, // Bytes\n    withMicAudio: true,\n    onFinished: function(sFileName) {\n      self.MAP_RECORDING = 0;\n      ui.refresh(\n        \"MAP_START_RECORDING,MAP_STOP_RECORDING,MAP_START_PREVIEW,MAP_STOP_PREVIEW\"\n      );\n      if (!sFileName) {\n        ui.showToast(\"Error de cmara\");\n      } else {\n        ui.showToast(\"Nuevo vdeo...\");\n        ui.openFile(sFileName);\n      }\n    },\n  };\n  control.record(params);\n  self.MAP_RECORDING = 1;\n  ui.refresh(\n    \"MAP_START_RECORDING,MAP_STOP_RECORDING,MAP_START_PREVIEW,MAP_STOP_PREVIEW\"\n  );\n}\n\nfunction stopRecording() {\n  let control = getControl(\"MAP_CAMERA\");\n  if (!control) {\n    return;\n  }\n  control.stopRecording();\n}\n\nfunction startPreview() {\n  let control = getControl(\"MAP_CAMERA\");\n  if (!control) {\n    return;\n  }\n  control.startPreview();\n}\n\nfunction stopPreview() {\n  let control = getControl(\"MAP_CAMERA\");\n  if (!control) {\n    return;\n  }\n  control.stopPreview();\n}\n\nfunction isOpened() {\n  let control = getControl(\"MAP_CAMERA\");\n  if (!control) {\n    return;\n  }\n  let bOpened = control.isCameraOpened();\n  ui.showToast(\"Abierta: \" + bOpened);\n}\n\nfunction isAutoFocus() {\n  let control = getControl(\"MAP_CAMERA\");\n  if (!control) {\n    return;\n  }\n  let bAutoFocus = control.isAutoFocus();\n  ui.showToast(\"Autofoco: \" + bAutoFocus);\n}\n\nasync function getSupportedAspectRatios() {\n  let control = getControl(\"MAP_CAMERA\");\n  if (!control) {\n    return;\n  }\n  let allAspectRatios = control.getSupportedAspectRatios();\n  let sMessage = \"Relaciones de aspecto soportadas: \";\n  for (let i = 0; i < allAspectRatios.length; i++) {\n    sMessage = sMessage + \"\\n\" + allAspectRatios[i];\n  }\n  await ui.msgBox(sMessage, \"Mensaje\", 0);\n}\n\nfunction doSetOnCodeScanned() {\n  let control = getControl(\"MAP_CAMERA\");\n  if (!control) {\n    return;\n  }\n  control.setOnCodeScanned(function(evento) {\n    let nResult = ui.msgBox(\n      \"Valor: \" + evento.data + \"\\nTipo: \" + evento.type,\n      \"Cdigo OK?\",\n      4\n    );\n    if (nResult == 6) {\n      return true;\n    } else {\n      return false;\n    }\n  });\n}\n\n/**\n * Modifica el comportamiento de flash de la cmara.\n *\n * Valores posibles:\n * 1) on: Siempre encendido al tomar una foto\n * 2) off: Siempre apagado al tomar una foto\n * 3) torch: Siempre encendido\n * 4) auto: Encendido o apagado al tomar una foto dependiendo de lo que diga el\n * sensor de luz\n * 5) red_eye: Encendido o apagado al tomar una foto dependiendo de lo que diga\n * el sensor de luz, en un modo especial que reduce los ojos rojos\n */\nfunction doSetFlashMode(sFlashMode) {\n  let control = getControl(\"MAP_CAMERA\");\n  if (!control) {\n    return;\n  }\n  control.setFlashMode(sFlashMode);\n}\n\nfunction doToggleFlashMode() {\n  let control = getControl(\"MAP_CAMERA\");\n  if (!control) {\n    return;\n  }\n  let sFlashMode = control.getFlashMode();\n  if (sFlashMode == \"on\") {\n    control.setFlashMode(\"off\");\n    self.setFieldPropertyValue(\"MAP_TOGGLE_FLASH_MODE\", \"img\", \"flash-off.png\");\n  } else if (sFlashMode == \"off\") {\n    control.setFlashMode(\"auto\");\n    self.setFieldPropertyValue(\n      \"MAP_TOGGLE_FLASH_MODE\",\n      \"img\",\n      \"flash-auto.png\"\n    );\n  } else if (sFlashMode == \"auto\") {\n    control.setFlashMode(\"torch\");\n    self.setFieldPropertyValue(\n      \"MAP_TOGGLE_FLASH_MODE\",\n      \"img\",\n      \"flash-torch.png\"\n    );\n  } else if (sFlashMode == \"torch\") {\n    control.setFlashMode(\"on\");\n    self.setFieldPropertyValue(\"MAP_TOGGLE_FLASH_MODE\", \"img\", \"flash-on.png\");\n  }\n  ui.refresh(\"MAP_TOGGLE_FLASH_MODE\");\n}\n\nfunction doToggleCamera() {\n  let control = getControl(\"MAP_CAMERA\");\n  if (!control) {\n    return;\n  }\n  let sCamera = control.getCamera();\n  if (sCamera == \"front\") {\n    control.setCamera(\"back\");\n  } else if (sCamera == \"back\") {\n    control.setCamera(\"front\");\n  }\n}\n\nfunction doToggleAutoFocus() {\n  let control = getControl(\"MAP_CAMERA\");\n  if (!control) {\n    return;\n  }\n  control.setAutoFocus(!control.isAutoFocus());\n}\n","import { computed, watch } from \"@vue/runtime-core\";\nimport { XoneDataObject } from \"./appData/core/XoneDataObject\";\nimport AppDataHandler from \"./AppDataHandler\";\n\nclass XoneViewsHandler {\n\t/**\n\t * _instance\n\t * @type {XoneViewsHandler}\n\t */\n\tstatic _instance;\n\n\t/**\n\t * views\n\t * @type {Map<string, XoneView>}\n\t */\n\tviewsMap = new Map();\n\n\tconstructor() {\n\t\tif (XoneViewsHandler._instance) return XoneViewsHandler._instance;\n\t\tXoneViewsHandler._instance = this;\n\t}\n\n\t/**\n\t * Add View\n\t * @param {XoneView} xoneView\n\t */\n\taddView(xoneView) {\n\t\tthis.viewsMap.set(xoneView.getXoneDataObject().getHashId(), xoneView);\n\t}\n\n\t/**\n\t * Get View\n\t * @param {XoneDataObject} xoneDataObject\n\t * @returns {XoneView}\n\t */\n\tgetView(xoneDataObject) {\n\t\treturn this.viewsMap.has(xoneDataObject.getHashId()) ? this.viewsMap.get(xoneDataObject.getHashId()) : null;\n\t}\n\n\t/**\n\t * cleanRemovedViews\n\t */\n\tcleanRemovedViews() {\n\t\tconst xoneHashIds = computed(() => AppDataHandler.getBreadcrumbs().map((e) => e.xoneHashId));\n\t\twatch(\n\t\t\t() => xoneHashIds.value.length,\n\t\t\t() =>\n\t\t\t\tArray.from(this.viewsMap.keys()).forEach((e) => {\n\t\t\t\t\tif (!xoneHashIds.value.includes(e)) this.viewsMap.delete(e);\n\t\t\t\t})\n\t\t);\n\t}\n}\n\n/**\n * @type {XoneViewsHandler}\n */\nconst xoneViewsHandler = new XoneViewsHandler();\n\n// Monitorice and clean removed views\nPromise.resolve().then(() => xoneViewsHandler.cleanRemovedViews());\n\nexport const getView = (/** @type {XoneDataObject} */ xoneDataObject) => xoneViewsHandler.getView(xoneDataObject);\n\nexport class XoneView {\n\t/**\n\t * bindedEvents\n\t * @type {Array<object>}\n\t */\n\t_bindedEvents = [];\n\n\t/**\n\t * @type {XoneDataObject}\n\t */\n\t_xoneDataObject;\n\n\t/**\n\t * constructor\n\t * @param {XoneDataObject} xoneDataObject\n\t */\n\tconstructor(xoneDataObject) {\n\t\tthis._xoneDataObject = xoneDataObject;\n\t\txoneViewsHandler.addView(this);\n\t}\n\n\tget bindedEvents() {\n\t\treturn this._bindedEvents;\n\t}\n\n\t/**\n\t * addControl\n\t * @param {XoneControl} control\n\t */\n\taddControl(control) {\n\t\tthis[control.name] = control;\n\t}\n\n\tgetXoneDataObject() {\n\t\treturn this._xoneDataObject;\n\t}\n\n\t/**\n\t * Bind event\n\t * @param  {...string} Args\n\t */\n\tbind(...Args) {\n\t\tif (!Args || Args.length < 3) return console.error(\"Error calling bind method. You need 3 arguments at least.\");\n\n\t\tlet bindedEvent = this._bindedEvents.find((e) => e.field === Args[0] && e.eventName === Args[1].toString().toLowerCase());\n\n\t\tif (!bindedEvent)\n\t\t\tbindedEvent = {\n\t\t\t\tfieldName: Args[0],\n\t\t\t\teventName: Args[1].toString().toLowerCase(),\n\t\t\t};\n\n\t\tif (Args.length === 3) bindedEvent.action = Args[2];\n\t\telse {\n\t\t\tbindedEvent.params = Args[2];\n\t\t\tbindedEvent.action = Args[3];\n\t\t}\n\n\t\t// Add event bind\n\t\tthis._bindedEvents.push(bindedEvent);\n\t}\n\n\t/**\n\t * exit current view\n\t */\n\texit() {\n\t\tAppDataHandler.clearBreadcrumbsFromXoneHashId(this._xoneDataObject[\"_XoneHashId\"]);\n\t}\n\n\t/**\n\t * Refresh\n\t * @param  {...any} Props\n\t */\n\trefresh(...Props) {\n\t\tconst props = Props.length === 1 ? Props[0].toString().split(\",\") : Props;\n\t\tprops.forEach((/** @type {*} */ e) => {\n\t\t\tif (this[e]?.refresh) this[e].refresh();\n\t\t});\n\t\tif (Props.length === 0)\n\t\t\tObject.values(this).forEach((e) => {\n\t\t\t\tif (!e) return;\n\t\t\t\tif (e.refresh) e.refresh();\n\t\t\t});\n\t}\n\n\t/**\n\t * Refresh All\n\t */\n\trefreshAll() {\n\t\tthis.refresh();\n\t}\n\n\t/**\n\t * refreshValue\n\t * @param {*} Props\n\t */\n\trefreshValue = (Props) => {\n\t\tthis.refresh(Props);\n\t};\n}\n\nexport class XoneControl {\n\t/**\n\t * @type {string}\n\t */\n\tname;\n\n\t/**\n\t * @type {HTMLElement}\n\t */\n\telement;\n\n\trefresh = () => {};\n\n\trefreshValue = () => {};\n\n\t/**\n\t * constructor\n\t * @param {string} name\n\t * @param {HTMLElement} [element]\n\t */\n\tconstructor(name, element = null) {\n\t\tthis.name = name;\n\n\t\twhile (element && !element.classList.contains(\"xone-prop\") && !element.classList.contains(\"xone-frame\")) element = element.parentElement;\n\n\t\tthis.element = element;\n\t}\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SelectedControl.vue?vue&type=style&index=0&id=19398d98&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Input.vue?vue&type=style&index=0&id=6d5764e8&scoped=true&lang=css\"","import { Exception } from \"../../Exceptions/Exception\";\nimport IDataOptions from \"../../Interfaces/IDataOptions\";\nimport IResultSet from \"../../Interfaces/IResultSet\";\nimport { SqlParser } from \"../../Parsers/SQL/SqlParser\";\nimport NumberUtils from \"../../Utils/NumberUtils\";\nimport ObjUtils from \"../../Utils/ObjUtils\";\nimport StringUtils from \"../../Utils/StringUtils\";\nimport TextUtils from \"../../Utils/TextUtils\";\nimport XoneGPSConnection from \"./XoneGPSConnection\";\n\nexport default class XoneGPSResulset implements IResultSet {\n\tprivate m_stringData = [\"Valor prueba texto\", \"Texto corto\", \"0002346\", \"Otro texto\", \"Un texto mas largo de prueba\", \"Mas texto\"];\n\tprivate m_nIterate: number;\n\tprivate m_parsed: SqlParser;\n\tprivate m_maxRows = 100;\n\tprivate m_data: any;\n\tprivate m_options: IDataOptions;\n\tprivate m_keys = [];\n\tprivate m_connection: XoneGPSConnection;\n\tprivate m_sentence: string;\n\t/**\n\t *\n\t */\n\tconstructor(connection?: XoneGPSConnection, Sentence?: string, options?: IDataOptions) {\n\t\tthis.m_connection = connection;\n\t\tthis.m_nIterate = -1;\n\t\tthis.m_sentence = Sentence;\n\t\tthis.m_options = options;\n\t\tthis.m_data = [];\n\t\tthis.m_maxRows = this.m_data.length;\n\t\tthis.m_keys = [];\n\t\t// this.m_parsed=new SqlParser(\"ROWID\");\n\t\t// this.m_parsed.ParseSqlString(strCmd)\n\t}\n\n\tpublic async populate(options?: IDataOptions): Promise<IResultSet> {\n\t\tvar result = await this.m_connection.fetchDataAsync(this.m_sentence, options || this.m_options);\n\t\tif (result.hasError == true) {\n\t\t\tthrow new Exception(result.err);\n\t\t}\n\t\tthis.m_data = Array.isArray(result.data) ? result.data : [];\n\t\tthis.m_maxRows = this.m_data.length;\n\t\tthis.m_keys = this.m_maxRows == 0 ? [] : Object.keys(this.m_data[0]);\n\t\treturn this;\n\t}\n\n\tisResultset: boolean = true;\n\n\tgetBytes(fld: string): number[] {\n\t\treturn null;\n\t}\n\tgetColumnCount(): number {\n\t\treturn this.m_maxRows == 0 ? 0 : this.m_keys.length;\n\t}\n\tgetColumnTypes(): number[] {\n\t\treturn [1, 2, 3, 4, 5, 6, 7, 8];\n\t}\n\tgetColumnName(ordinal: number): string {\n\t\treturn this.m_maxRows == 0 ? 0 : this.m_keys[ordinal];\n\t}\n\tgetData() {\n\t\treturn this.m_data;\n\t}\n\tclose(): void {\n\t\tthis.m_nIterate = -1;\n\t\tthis.m_data = null;\n\t\tthis.m_maxRows = 0;\n\t}\n\n\tprivate resolverField(fld: string | number): string {\n\t\tif (typeof fld == \"number\") return this.m_keys[fld as number];\n\t\treturn fld as string;\n\t}\n\n\tgetValue(fld: string | number, nType: number) {\n\t\tswitch (nType) {\n\t\t\tcase 0: // Numero\n\t\t\t\treturn NumberUtils.SafeToInt(this.m_data[this.m_nIterate][this.resolverField(fld)]);\n\t\t\tcase 2:\n\t\t\t\treturn NumberUtils.SafeToDouble(this.m_data[this.m_nIterate][this.resolverField(fld)]);\n\t\t\tcase 3:\n\t\t\t\treturn ObjUtils.SafeToDate(this.m_data[this.m_nIterate][this.resolverField(fld)]);\n\t\t\tdefault:\n\t\t\t\treturn StringUtils.SafeToString(this.m_data[this.m_nIterate][this.resolverField(fld)]);\n\t\t}\n\t}\n\tgetString(fld: string | number): string {\n\t\treturn this.getValue(fld, 1) as string;\n\t}\n\tgetInt(fld: string): number {\n\t\treturn this.getValue(fld, 0) as number;\n\t}\n\tgetDate(fld: string): Date {\n\t\treturn this.getValue(fld, 3) as Date;\n\t}\n\n\tprivate get PageLen() {\n\t\treturn this.m_options?.page?.length || -1;\n\t}\n\n\tprivate get PageCache() {\n\t\treturn this.m_options?.page?.cache || -1;\n\t}\n\n\tpublic async next(): Promise<boolean> {\n\t\t// if (this.PageLen > 0) {\n\t\t//     if (this.PageCache > 0) {\n\n\t\t//     } else {\n\t\t//         await this.populate();\n\t\t//     }\n\t\t// }\n\t\treturn ++this.m_nIterate < this.m_maxRows;\n\t}\n\n\tpublic async EOF(): Promise<boolean> {\n\t\treturn this.m_nIterate >= this.m_maxRows;\n\t}\n\tpublic async moveTo(position: number): Promise<boolean> {\n\t\treturn position == this.m_maxRows || (this.m_nIterate = position) == this.m_maxRows;\n\t}\n}\n","import { resolve } from \"path\";\nimport Hashtable from \"../../Collections/HashMap/Hashtable\";\nimport IConnection from \"../../Interfaces/IConnection\";\nimport IDataOptions from \"../../Interfaces/IDataOptions\";\nimport IResultSet from \"../../Interfaces/IResultSet\";\nimport { SqlParser } from \"../../Parsers/SQL/SqlParser\";\nimport ObjUtils from \"../../Utils/ObjUtils\";\nimport XoneGPSResulset from \"./XoneGPSResulset\";\n\nexport default class XoneGPSConnection implements IConnection {\n\n    private readonly m_sentence = \"Select STATUS,LATITUD,LONGITUD,ALTITUD,RUMBO,FGPS,HGPS,VELOCIDAD,SATELITES from GPS\";\n\n    /**\n     *\n     */\n    constructor() {\n        let a = 1;\n\n    }\n\n    private getTestResult() {\n        return {\n            hasError: false,\n            data: [\n                {\n                    ID:1,STATUS:1,LATITUD:38.886524,LONGITUD: -7.003800,ALTITUD:Math.floor(Math.random() * (1000 - 1)) + 1,RUMBO:Math.floor(Math.random() * (360 - 1)) + 1,FGPS: new Date(),HGPS: ObjUtils.SafeToHours(),VELOCIDAD:Math.floor(Math.random() * (200 - 1)) + 1,SATELITES:Math.floor(Math.random() * (8 - 1)) + 1\n                }\n            ]\n        }\n    }\n\n    async countAsync(Sentence: any, ...args: any[]): Promise<IResultSet> {\n        return await new Promise(resolve => 10);\n    }\n\n\n    /**\n     * Este es el lugar donde hay que llenar los datos del GPS, se supone que es lo que lo devuelve asincrono\n     * Alejandro debe completar esta funcion\n     * @param Sentence \n     * @param data \n     */\n    async fetchDataAsync(Sentence?: any, data?: any): Promise<any> {\n        return this.getTestResult();\n    }\n\n    async executeQueryAsync(Sentence: any, ...args): Promise<IResultSet> {\n        // var parser = new SqlParser(\"ROWID\");\n        // parser.ParseSqlString(Sentence as string);\n        // var data: IDataOptions = {\n        //     action: \"select\",\n        //     where: parser.GetWhereSentence(),\n        //     sort: parser.getOrderBySentence()\n        //     //page: args.length>2?args[2]:{}\n        // };\n        // data = { ...data, ...args[0] };\n        var rs = new XoneGPSResulset(this, Sentence);\n        return await rs.populate();\n    }\n\n    executeUpdateAsync(Sentence: any): Promise<number> {\n        throw new Error(\"Method not implemented.\");\n    }\n\n    async executeNonQuery(data?: any): Promise<any> {\n        return {\n            hasError: false,\n            data: [{\n                result: 1\n            }]\n        }\n    }\n\n    async executeAsync(Sentence: any, MaxRows: number, ...args): Promise<any> {\n        return await this.executeNonQuery();\n    }\n\n\n    executeQuery(Sentence: any): IResultSet {\n        return new XoneGPSResulset(this, this.m_sentence);\n    }\n\n    createStatement() {\n        throw new Error(\"Method not implemented.\");\n    }\n    isClosed(): boolean {\n        throw new Error(\"Method not implemented.\");\n    }\n    commit() {\n        throw new Error(\"Method not implemented.\");\n    }\n    beginTrans(): void {\n        throw new Error(\"Method not implemented.\");\n    }\n    rollback(): void {\n        throw new Error(\"Method not implemented.\");\n    }\n    execute(parameter: any, MaxRows: number) {\n        throw new Error(\"Method not implemented.\");\n    }\n    executeUpdate(sql: string): number;\n    executeUpdate(Sentence: any): number;\n    executeUpdate(Sentence: any): number {\n        throw new Error(\"Method not implemented.\");\n    }\n    executeOperation(OperType: number, tableName: string, values: any, whereClause: string): number {\n        throw new Error(\"Method not implemented.\");\n    }\n    getDBMS(): string {\n        throw new Error(\"Method not implemented.\");\n    }\n    outerJoinsSupported(): boolean {\n        throw new Error(\"Method not implemented.\");\n    }\n    acceptsParsedSentences(): boolean {\n        throw new Error(\"Method not implemented.\");\n    }\n    acceptsEmptyQueries(): boolean {\n        throw new Error(\"Method not implemented.\");\n    }\n    LastRowsAffected(): number {\n        throw new Error(\"Method not implemented.\");\n    }\n    LastInsertedRowId(): number {\n        throw new Error(\"Method not implemented.\");\n    }\n    cancelProcesses(flags: number): number {\n        throw new Error(\"Method not implemented.\");\n    }\n    setCryptoData(cryptoData: Hashtable<string, Object>): void {\n        throw new Error(\"Method not implemented.\");\n    }\n    getCryptoData(): Hashtable<string, Object> {\n        throw new Error(\"Method not implemented.\");\n    }\n    cryptoSupported(): boolean {\n        throw new Error(\"Method not implemented.\");\n    }\n    getTokenFromAuth(login: string, pass: string): string {\n        throw new Error(\"Method not implemented.\");\n    }\n\n}","import IConnection from \"../../Interfaces/IConnection\";\nimport IFieldProperties from \"../../Interfaces/IField\";\nimport IResultSet from \"../../Interfaces/IResultSet\";\nimport IXoneApp from \"../../Interfaces/IXoneApp\";\nimport { SqlParser } from \"../../Parsers/SQL/SqlParser\";\nimport { Guid } from \"../../Utils/Guid\";\nimport XoneConnectionData from \"../XoneConnectionData\";\nimport XoneGPSConnection from \"./XoneGPSConnection\";\n\nexport default class XoneGPSConnectionData extends XoneConnectionData {\n\n\n    private m_context: any;\n    private m_nSessionIdCounter: any;\n    private m_nLastInsertedId: any;\n    private m_nLastRecordsAffected: any;\n    private m_strLastInsertedTable: any;\n    private m_stmt: {};\n    private m_connection: XoneGPSConnection;\n    /**\n     * Crea una conexin a base de datos\n     *\n     * @param Name  Nombre de la conexin.\n     * @param Owner Aplicacin a la cual pertenece esta conexin.\n     */\n    constructor(context: any, Name: string, Owner: IXoneApp) {\n        super(Name, Owner);\n        this.m_context = context;\n        this.m_connection = null;\n        // K11101001: Utilizar SESSIONID numrico para mejorar el rendimiento de la maquinaria.\n        // this.m_nSessionIdCounter = new AtomicLong(0);\n        // // A14011501: Optimizaciones para obtener claves numricas de conexiones sqlite y dems.\n        // this.m_nLastInsertedId = new ThreadLocal<>();\n        // this.m_nLastRecordsAffected = new ThreadLocal<>();\n        // this.m_strLastInsertedTable = new ThreadLocal<>();\n        // // TODO ADD TAG\n        // // Nos creamos el holder para el statement...\n        // this.m_stmt = {}; // new ThreadLocal<>();\n    }\n\n    /**\n     * TRUE si el DBMS soporta la sintaxis TOP x\n     *\n     * @return Esta funcin posiblemente no se redefina en esta plataforma.\n     */\n    public TopAllowed(): boolean {\n        return false;\n    }\n\n    /**\n     * TRUE si el DBMS soporta la sintaxis LIMIT x\n     *\n     * @return Mirar arriba plis.\n     */\n    public LimitAllowed(): boolean {\n        return false;\n    }\n\n    /**\n     * TRUE si la conexin tiene caracteres para escapear cadenas de caracteres.\n     *\n     * @return Devuelve TRUE si hay caracteres en la lista para sustituir.\n     */\n    public HasEscapeChars(): boolean {\n        return false;\n    }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Devuelve TRUE si la conexin acepta sentencias SQL parseadas para su ejecucin o para queries.\n     *\n     * @return\n     */\n    public acceptsParsedSentences(): boolean {\n        return false;\n    }\n\n    public acceptsEmptyQueries(): boolean {\n        return false;\n    }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Devuelve TRUE si la conexin permite recuperar un ID autonumrico dado un ROWID.\n     *\n     * @return\n     */\n    public retrievesAutonumericKeys(): boolean {\n        return false;\n    }\n\n\n    /**\n     * Obtiene una conexin fsica a la fuente de datos que encapsula esta clase. Es de obligatoria redefinicin por los derivados de esta clase.\n     *\n     * @return Devuelve una nueva conexin de datos (o la misma si solo se emplea una)\n     * @throws Exception\n     */\n    public GetNewConnection(ReadOnly: boolean): IConnection {\n        //require(\"./XoneGPSConnection\");\n        return this.m_connection = new XoneGPSConnection();\n    }\n\n\n    public GetCurrentConnection(ReadOnly: boolean = false): IConnection {\n        if (this.m_connection !== null)\n            return this.m_connection;\n        return this.GetNewConnection(ReadOnly);\n    }\n    /**\n     * Crea un conjunto de datos sin conexin original. Para ello crea una local y la devuelve como\n     * parte del conjunto que la cierra cuando lo cierran a l\n     *\n     * @param Sentence Sentencia SQL que se ejecuta para obtener el conjunto de datos.\n     * @return Devuelve un conjunto de datos o NULL si algo falla.\n     * @throws Exception\n     */\n    /// public CreateRecordset(Sentence:string): IResultSet {\n    //     return this.CreateRecordset(null, Sentence);\n    // }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Ejecuta una sentencia SQL parseada que devuelve datos.\n     *\n     * @param Sentence\n     * @return\n     * @throws Exception\n     */\n    /// public CreateRecordset(Sentence:any): IResultSet{\n    //     return this.CreateRecordset(null, Sentence);\n    // }\n\n    /**\n     * Crea un objeto de acceso a datos (recordset) para leer los datos de un objeto\n     *\n     * @param Connection Conexin que se quiere usar para abrir la fuente de datos. NULL para crear una local y usarla solamente para esta funcin.\n     * @param Sentence   Setencia SQL (SELECT) que se quiere ejecutar para abrir la fuente de datos.\n     * @param MaxRows    Mximo de registros para no usar el que tiene por defecto la clase.\n     * @return Devuelve el conjunto de datos creado o NULL si algo falla.\n     * @throws Exception\n     */\n    /// public abstract CreateRecordset(Connection Connection, String Sentence, int MaxRows): IResultSet;\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Esta implementacin permite la ejecucin de sentencias SQL parseadas con anterioridad.\n     *\n     * @param Connection\n     * @param Sentence\n     * @param MaxRows\n     * @return\n     * @throws Exception\n     */\n    /// public abstract ResultSet CreateRecordset(Connection: IConnection | string, ...args?:any) throws Exception;\n\n    /*\n     * TODO ADD TAG 17042014: Luis Un recordset a partir de la clase de parametros\n     */\n    public CreateRecordset(Connection: IConnection | string, ...args: any): IResultSet {\n        if (typeof Connection == 'string') {\n            return this.GetCurrentConnection().executeQuery(Connection as string);\n        }\n        return null;\n    }\n\n    public async CreateRecordsetAsync(Connection: string | IConnection, ...args: any): Promise<IResultSet> {\n        try {\n            if (typeof Connection == 'string') {\n                let cn = this.GetCurrentConnection();\n                return await cn.executeQueryAsync(Connection as string, ...args);\n            }\n        } catch (ex) {\n            console.error(ex);\n        }\n        return null;\n    }\n\n\n    /**\n     * Crea un objeto de acceso a datos (recordset) para leer los datos de un objeto\n     *\n     * @param Connection Conexin que se quiere usar para abrir la fuente de datos. NULL para crear una local y usarla solamente para esta funcin.\n     * @param Sentence   Setencia SQL (SELECT) que se quiere ejecutar para abrir la fuente de datos.\n     * @return Devuelve el conjunto de datos creado o NULL si algo falla.\n     * @throws Exception\n     */\n    //public abstract ResultSet CreateRecordset(Connection Connection, String Sentence) throws Exception;\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Ejecuta una sentencia SQL parseada que devuelve datos.\n     *\n     * @param conn\n     * @param Sentence\n     * @return\n     * @throws Exception\n     */\n    /// public abstract ResultSet CreateRecordset(Connection conn, SqlParser Sentence) throws Exception;\n\n    /**\n     * Ejecuta una sentencia SQL dentro de la conexin que manipula este objeto. No lleva conexin fsica como parmetro porque crea una temporal, trabaja con ella y la cierra.\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado.\n     *\n     * @param Sentence Sentencia SQL que se quiere ejecutar.\n     * @return Devuelve TRUE si la ejecucin de la sentencia SQL es correcta.\n     * @throws Exception\n     */\n    // public ExecuteSqlString(Sentence: string): any {\n    //     return ExecuteSqlString(null, Sentence, true);\n    // }\n\n    /**\n     * A10090601:\tIncluir el mecanismo de rplica selectiva por colecciones a la maquinaria.\n     * Ejecuta un SQL sin replicar\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado.\n     */\n    // public Object ExecuteLocalSqlString(String Sentence) throws Exception {\n    //     return ExecuteSqlString(null, Sentence, false);\n    // }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Ejecuta una sentencia SQL parseada con rplica.\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado.\n     *\n     * @param Sentence\n     * @return\n     * @throws Exception\n     */\n    // public Object ExecuteParsedSql(SqlParser Sentence) throws Exception {\n    //     return ExecuteParsedSql(null, Sentence, true);\n    // }\n\n    /**\n     * Ejecuta una sentencia SQL dentro de la conexin que manipula este objeto.\n     * A10090601:\tIncluir el mecanismo de rplica selectiva por colecciones a la maquinaria.\n     * Un parmetro para decir si replica.\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado\n     *\n     * @param Connection Conexin de datos que se quiere usar para ejecutar la sentencia. NULL para crear una temporal, ejecutar la sentencia y cerrarla.\n     * @param Sentence   Sentencia SQL que se va a ejecutar.\n     * @param Replicate  TRUE si replica.\n     * @return Devuelve TRUE si la sentencia se ejecuta correctamente.\n     * @throws SQLException\n     * @throws Exception\n     */\n    public ExecuteSqlString(Connection: IConnection | string, Sentence?: string, Replicate?: boolean): any {\n        return {};\n    }\n\n    /*\n     * TODO ADD TAG 17042014: Luis Un recordset a partir de la clase de parametros\n     */\n    public async CountAsync(Connection: IConnection | string, ...args: any): Promise<IResultSet> {\n        if (typeof Connection == 'string') {\n            return await this.GetCurrentConnection().countAsync(Connection as string, ...args);\n        }\n        return null;\n    }\n\n    public async ExecuteSqlStringAsync(Connection: IConnection | string, Sentence?: SqlParser | string, Replicate?: boolean, ...args): Promise<any> {\n        return await this.GetCurrentConnection().executeAsync(Sentence, 100, ...args);\n    }\n\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Esta implementacin opcional permite ejecutar una sentencia SQL parseada en vez de una cadena SQL.\n     * <p>\n     * K11092601: ExecuteSqlString y similares deben devolver un objeto, que puede ser ResultSet.\n     * Cambiar el tipo de resultado.\n     *\n     * @param Connection\n     * @param Sentence\n     * @param Replicate\n     * @return\n     * @throws SQLException\n     * @throws Exception\n     */\n    public ExecuteParsedSql(Connection: IConnection | string, Sentence?: SqlParser | string, Replicate?: boolean): any {\n        return {};\n    }\n\n    public async ExecuteParsedSqlAsync(Connection: string | IConnection, Sentence?: string | SqlParser, Replicate?: boolean, ...args: any[]): Promise<any> {\n        throw new Error(\"Method not implemented.\");\n    }\n\n    /**\n     * Reemplaza el valor del operador especfico dentro de la cadena SQL que se pasa como parmetro.\n     *\n     * @param Collection Coleccin con la que se est trabajando.\n     * @param Sentence   Sentencia SQL o cadena en la cual se quiere sustituir el operador.\n     * @param OperName   Nombre del operador que se quiere sustituir.\n     * @return Devuelve la sentencia original con el operador sustituido.\n     * @throws Exception\n     */\n    public ReplaceCustomOper(Collection: IFieldProperties, Sentence: string, OperName: string): string {\n        return Sentence;\n    }\n\n    /**\n     * Inserta una sentencia TOP dentro del SQL que se pasa como parmetro. Colocada aqu para mantener compatibilidad de interfaces\n     * pero no se implementar en esta plataforma.\n     *\n     * @param Sentence Sentencia SQL que se quiere modificar.\n     * @param Rows     Cantidad de filas que se quiere limitar en el TOP x o LIMIT x\n     * @return La misma sentencia pasada como parmetro.\n     */\n    public InsertTop(Sentence: string, Rows: number): string {\n        return Sentence;\n    }\n\n    /**\n     * Dado un nombre de campo lo formatea usando los caracteres de inicio y fin de campo.\n     *\n     * @param FieldName Nombre del campo a formatear.\n     * @return Devuelve el nombre del campo encerrado en sus secuencias de inicio y fin de campo.\n     */\n    public QuoteFieldName(FieldName: string): string {\n        return FieldName;\n    }\n\n    /**\n     * Dado un nombre de tabla u otro tipo de objeto de base de datos, lo devuelve formateado con su prefijo si este est definido.\n     *\n     * @param ObjectName Nombre de tabla u objeto en general de la base de datos para arreglar con el prefijo.\n     * @return Devuelve el nombre de objeto ya desarrollado con su prefijo si aplica.\n     */\n    // public String FixObjectName(String ObjectName):string {\n    //     return FixObjectName(ObjectName, null);\n    // }\n\n\n\n    /**\n     * Dada una cadena sustituye los caracteres para los cuales se hayan definido secuencias de escape por dichas secuencias.\n     *\n     * @param Value Cadena en la cual se van a sustituir los caracteres por secuencias de escape.\n     * @return Devuelve la cadena original con los caracteres sustituidos por sus secuencias de escape.\n     */\n    public EscapeString(Value: string): string {\n        if (Value.startsWith('\\''))\n            return Value;\n        return `\\'${Value}\\'`;\n    }\n\n    /**\n     * Genera un ROWID para la conexin actual. Emplea los criterios de nmero de tabla, MID, DBID, etc.\n     *\n     * @param TableName Nombre de la tabla para la cual se quiere generar el ROWID.\n     * @return Devuelve un ROWID respetando los valores de rplica y el tamao del campo ROWID.\n     */\n    //public GenerateRowId(TableName:string):string {return Guid.create().toString();}\n\n    /**\n     * Desarrolla el valor de un objeto y lo devuelve como cadena lista para insertar en un SQL o un filtro\n     *\n     * @param Value Valor que se quiere desarrollar. Se usar la mscara de fecha de la conexin.\n     * @return CAdena representando el valor del objeto para escribir en una sentencia SQL o un filtro de datos.\n     */\n    // public DevelopObjectValue(Value:any):string {\n    //     return DevelopObjectValue(Value, true);\n    // }\n\n    /**\n     * Esta funcin se emplea para cerrar conexiones locales si es que las tiene. No necesariamente tiene por qu\n     * usarse para terminar la clase, simplemente cuando se quiera cerrar o destruir los objetos locales.\n     */\n    public Terminate(): void { }\n\n    /**\n     * Si el DBMS soporta left outer joins\n     */\n    public IsOuterJoinSupported(): boolean { return false; }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Devuelve una clave numrica dada una tabla y un ROWID. Permite abstraer la obtencin de la clave autonumrica\n     * en conexiones que no son offline.\n     *\n     * @param TableName\n     * @param RowIdFieldName\n     * @return\n     * @throws Exception\n     */\n    public RetrieveNumericKey(TableName: string, KeyName: string, RowIdFieldName: string, RowId: string): number { return 0; }\n\n    /**\n     * A11092601: Modificaciones para mejorar el soporte de conexiones remotas y dems.\n     * Esta funcin permite calcular si un ROWID es nico dentro de la conexin de datos.\n     *\n     * @param tableName\n     * @param RowID\n     * @return\n     * @throws Exception\n     */\n    public isUniqueRowID(tableName: string, RowID: string): boolean { return true; }\n\n    // A11120701: Mecanismo para exponer el DBMS de una conexin.\n    // Expone el tipo de DBMS que tiene debajo esta conexin. Obligatorio implementar.\n    public getDbmsTag(): string { return \"test\" };\n}","export const UI_ATTRIBUTES = {\n\tcoll: {\n\t\tcellEvenColor: \"cell-even-color\",\n\t\tcellOddColor: \"cell-odd-color\",\n\t\tcellSelectedBgColor: \"cell-selected-bgcolor\",\n\t\tgroupSwipe: \"group-swipe\",\n\t\tloadAll: \"loadall\",\n\t\tname: \"name\",\n\t\tnoTab: \"notab\",\n\t\ttabBgColor: \"tab-bgcolor\",\n\t\ttabBPadding: \"tab-bpadding\",\n\t\ttabFontSize: \"tab-fontsize\",\n\t\ttabForecolor: \"tab-forecolor\",\n\t\ttabLPadding: \"tab-lpadding\",\n\t\ttabRPadding: \"tab-rpadding\",\n\t\ttabSelectedForecolor: \"tab-selected-forecolor\",\n\t\ttabTPadding: \"tab-tpadding\",\n\t},\n\tgroup: {\n\t\talign: \"align\",\n\t\tbgColor: \"bgcolor\",\n\t\tbMargin: \"bmargin\",\n\t\tborderCornerRadius: \"border-corner-radius\",\n\t\tbPadding: \"bpadding\",\n\t\tdrawerOrientation: \"drawer-orientation\",\n\t\televation: \"elevation\",\n\t\tfixed: \"fixed\",\n\t\tforeColor: \"forecolor\",\n\t\theight: \"height\",\n\t\tid: \"id\",\n\t\timage: { value: [\"imgbk\", \"img\", \"image\", \"path\"] },\n\t\tkeepAspectRatio: \"keep-aspect-ratio\",\n\t\tlMargin: \"lmargin\",\n\t\tlPadding: \"lpadding\",\n\t\tname: \"name\",\n\t\tonFocus: \"onfocus\",\n\t\torientation: \"orientation\",\n\t\trMargin: \"rmargin\",\n\t\trPadding: \"rpadding\",\n\t\ttMargin: \"tmargin\",\n\t\ttPadding: \"tpadding\",\n\t\twidth: \"width\",\n\t},\n\tframe: {\n\t\talign: \"align\",\n\t\tanimationIn: \"animation-in\",\n\t\tanimationOut: \"animation-out\",\n\t\tbgColor: \"bgcolor\",\n\t\tbMargin: \"bmargin\",\n\t\tborderColor: \"border-color\",\n\t\tborderCornerRadius: \"border-corner-radius\",\n\t\tborderWidth: \"border-width\",\n\t\tbPadding: \"bpadding\",\n\t\tdisableVisible: \"disablevisible\",\n\t\televation: \"elevation\",\n\t\tfloating: \"floating\",\n\t\tforeColor: \"forecolor\",\n\t\tframebox: \"framebox\",\n\t\theight: \"height\",\n\t\thref: \"href\",\n\t\timage: { value: [\"imgbk\", \"img\", \"image\", \"path\"] },\n\t\tkeepAspectRatio: \"keep-aspect-ratio\",\n\t\tleft: \"left\",\n\t\tlMargin: \"lmargin\",\n\t\tlPadding: \"lpadding\",\n\t\tmapCol: \"mapcol\",\n\t\tmapFld: \"mapfld\",\n\t\tname: \"name\",\n\t\tnewLine: \"newline\",\n\t\tonClick: \"onclick\",\n\t\tonScroll: \"onscroll\",\n\t\trMargin: \"rmargin\",\n\t\trPadding: \"rpadding\",\n\t\tscroll: \"scroll\",\n\t\tscrollOrientation: \"scroll-orientation\",\n\t\ttMargin: \"tmargin\",\n\t\ttop: \"top\",\n\t\ttPadding: \"tpadding\",\n\t\tviewMode: \"viewmode\",\n\t\twidth: \"width\",\n\t\twrap: \"wrap\",\n\t},\n\tprop: {\n\t\talign: \"align\",\n\t\tautosave: \"autosave\",\n\t\tautoslideDelay: \"autoslide-delay\",\n\t\tbgColor: \"bgcolor\",\n\t\tbMargin: \"bmargin\",\n\t\tborderColor: \"border-color\",\n\t\tborderCornerRadius: \"border-corner-radius\",\n\t\tborderWidth: \"border-width\",\n\t\tbPadding: \"bpadding\",\n\t\tbreadcrumbFontSize: { value: [\"breadcrumb-fontsize\", \"breadcumb-fontsize\"] },\n\t\tbreadcrumbForeColor: { value: [\"breadcrumb-forecolor\", \"breadcumb-forecolor\"] },\n\t\tbreadcrumbSelectedFontSize: { value: [\"breadcrumb-selected-fontsize\", \"breadcumb-selected-fontsize\"] },\n\t\tbreadcrumbSelectedForeColor: { value: [\"breadcrumb-selected-forecolor\", \"breadcumb-selected-forecolor\"] },\n\t\tbuttonOption: \"button-option\",\n\t\tcalendarViewMode: \"calendar-viewmode\",\n\t\tcellBgColor: \"cell-bgcolor\",\n\t\tcellBorderColor: \"cell-border-color\",\n\t\tcellEvenColor: \"cell-even-color\",\n\t\tcellForeColor: \"cell-forecolor\",\n\t\tcellOddColor: \"cell-odd-color\",\n\t\tcellOtherMonthBgColor: \"cell-other-month-bgcolor\",\n\t\tcellSelectedBgColor: \"cell-selected-bgcolor\",\n\t\tcellSelectedBorderColor: \"cell-selected-border-color\",\n\t\tcellSelectedForeColor: \"cell-selected-forecolor\",\n\t\tcheckType: \"check-type\",\n\t\tcontents: \"contents\",\n\t\tdisableEdit: \"disableedit\",\n\t\tdisableVisible: \"disablevisible\",\n\t\teditInRow: \"edit-inrow\",\n\t\televation: \"elevation\",\n\t\tfieldSize: \"fieldsize\",\n\t\tfixedText: \"fixed-text\",\n\t\tfloating: \"floating\",\n\t\tfloatingTooltip: \"floating-tooltip\",\n\t\tfluidLoad: \"fluid-load\",\n\t\tfontBold: \"fontbold\",\n\t\tfontSize: \"fontsize\",\n\t\tforeColor: \"forecolor\",\n\t\tgalleryColumns: \"gallery-columns\",\n\t\theight: \"height\",\n\t\thref: \"href\",\n\t\timage: { value: [\"img\", \"image\", \"path\", \"imgbk\"] },\n\t\timgChecked: \"img-checked\",\n\t\timgCheckedDisabled: \"img-checked-disabled\",\n\t\timgHeight: \"img-height\",\n\t\timgUnchecked: \"img-unchecked\",\n\t\timgUncheckedDisabled: \"img-unchecked-disabled\",\n\t\timgWidth: \"img-width\",\n\t\tkeepAspectRatio: \"keep-aspect-ratio\",\n\t\tlabelBox: \"labelbox\",\n\t\tlabelwidth: \"labelwidth\",\n\t\tleft: \"left\",\n\t\tlines: \"lines\",\n\t\tlinkedField: \"linkedfield\",\n\t\tlinkedTo: \"linkedto\",\n\t\tlMargin: \"lmargin\",\n\t\tlocked: \"locked\",\n\t\tlPadding: \"lpadding\",\n\t\tmask: \"mask\",\n\t\tmethod: \"method\",\n\t\tname: \"name\",\n\t\tnewLine: \"newline\",\n\t\tonClick: \"onclick\",\n\t\tonEditorAction: \"oneditoraction\",\n\t\tonFocusChanged: \"onfocuschanged\",\n\t\tonScroll: \"onscroll\",\n\t\tonTextChanged: \"ontextchanged\",\n\t\tpaginationSize: \"pagination-size\",\n\t\tpostOnchange: \"postonchange\",\n\t\tradioGroup: \"radio-group\",\n\t\treadOnly: \"readonly\",\n\t\trMargin: \"rmargin\",\n\t\trowsPerPage: \"rows-per-page\",\n\t\trPadding: \"rpadding\",\n\t\tshowInline: \"showinline\",\n\t\tshowInlineKeyboard: \"showinline-keyboard\",\n\t\tsize: \"size\",\n\t\ttextAlign: \"text-align\",\n\t\ttextBgColor: \"text-bgcolor\",\n\t\ttextBgColorDisabled: \"text-bgcolor-disabled\",\n\t\ttextBorder: \"text-border\",\n\t\ttextBorderBottom: \"text-border-bottom\",\n\t\ttextBorderLeft: \"text-border-left\",\n\t\ttextBorderRight: \"text-border-right\",\n\t\ttextBorderTop: \"text-border-top\",\n\t\ttextFontSize: \"text-fontsize\",\n\t\ttextForeColor: { value: [\"text-forecolor\", \"textfore-color\"] },\n\t\ttextForeColorDisabled: \"text-forecolor-disabled\",\n\t\ttitle: { value: [\"title\", \"caption\"] },\n\t\ttMargin: \"tmargin\",\n\t\ttooltip: \"tooltip\",\n\t\ttooltipColor: { value: [\"expanded-hint-color\", \"floating-tooltip-color\"] },\n\t\ttooltipForecolor: \"tooltip-forecolor\",\n\t\ttop: \"top\",\n\t\ttPadding: \"tpadding\",\n\t\ttype: \"type\",\n\t\tviewMode: \"viewmode\",\n\t\tvisible: \"visible\",\n\t\tweekdaysLongname: \"weekdays-longname\",\n\t\twidth: \"width\",\n\t\twrap: \"wrap\",\n\t},\n};\nexport const COLOR_ATTRIBUTES = [\n\t\"borderColor\",\n\t\"bgColor\",\n\t\"cellBgColor\",\n\t\"cellBorderColor\",\n\t\"cellForeColor\",\n\t\"cellOtherMonthBgColor\",\n\t\"cellSelectedBgColor\",\n\t\"cellSelectedBorderColor\",\n\t\"cellSelectedForeColor\",\n\t\"foreColor\",\n\t\"textBgColor\",\n\t\"textBgColorDisabled\",\n\t\"textForeColor\",\n\t\"textForeColorDisabled\",\n];\nexport const FAST_ATTR_RESOLVER = (() => {\n\tconst obj = {};\n\tconst fetchFastAttrResolver = ([normalized, original]) => {\n\t\tif (typeof normalized === \"object\" && normalized.value) normalized = normalized.value[0];\n\t\tif (typeof original === \"object\" && original.value) return original.value.forEach((e) => (obj[e] = normalized));\n\t\tobj[original] = normalized;\n\t};\n\tObject.entries(UI_ATTRIBUTES.coll).forEach(fetchFastAttrResolver);\n\tObject.entries(UI_ATTRIBUTES.frame).forEach(fetchFastAttrResolver);\n\tObject.entries(UI_ATTRIBUTES.prop).forEach(fetchFastAttrResolver);\n\treturn obj;\n})();\n//# sourceMappingURL=UIAttributes.js.map\n//# sourceMappingURL=UIAttributes.js.map\n\n//# sourceMappingURL=UIAttributes.js.map\n","import { XoneDataCollection } from \"../core/XoneDataCollection\";\nimport { XoneDataObject } from \"../core/XoneDataObject\";\nimport IFieldProperties from \"../Interfaces/IField\";\nimport NumberUtils from \"../Utils/NumberUtils\";\nimport ObjUtils from \"../Utils/ObjUtils\";\nimport StringUtils from \"../Utils/StringUtils\";\nimport TextUtils from \"../Utils/TextUtils\";\nimport { Utils } from \"../Utils/Utils\";\nimport XmlNode from \"../Xml/JSONImpl/XmlNode\";\nimport XmlNodeList from \"../Xml/JSONImpl/XmlNodeList\";\nimport { UI_ATTRIBUTES, COLOR_ATTRIBUTES, FAST_ATTR_RESOLVER } from \"./UIAttributes\";\n\nexport default class UITransform {\n\tprivate static m_fastResolver = {};\n\n\t//#region Transformaciones para el UI PWA\n\tpublic static getLayout(Source: IFieldProperties, parent: XmlNode, visibility: number) {\n\t\tlet result = <any>{ attributes: this.getPropAttributes(Source, parent) };\n\t\tif (parent.hasChildNodes()) {\n\t\t\tlet type = Object.prototype.hasOwnProperty.call(UI_ATTRIBUTES, parent.getName()) ? \"controls\" : \"others\";\n\t\t\tresult[type] = [];\n\t\t\tparent\n\t\t\t\t.getChildren()\n\t\t\t\t.forEach(\n\t\t\t\t\t(element) =>\n\t\t\t\t\t\t(!element.getName().equalsIgnoreCase(Utils.PROP_NAME) ||\n\t\t\t\t\t\t\t(NumberUtils.SafeToInt(\n\t\t\t\t\t\t\t\tSource.NodePropertyValue(Utils.PROP_NAME, element.getAttrValue(Utils.PROP_ATTR_NAME), Utils.PROP_ATTR_VISIBLE),\n\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t) &\n\t\t\t\t\t\t\t\tvisibility) >\n\t\t\t\t\t\t\t\t0) &&\n\t\t\t\t\t\tresult[type].push(this.getLayout(Source, element, visibility))\n\t\t\t\t);\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic static async getLayoutAsync(Source: IFieldProperties, parent: XmlNode, visibility: number) {\n\t\tlet result = <any>{ attributes: this.getPropAttributes(Source, parent) };\n\t\tif (parent.hasChildNodes()) {\n\t\t\tlet type = Object.prototype.hasOwnProperty.call(UI_ATTRIBUTES, parent.getName()) ? \"controls\" : \"others\";\n\t\t\tresult[type] = [];\n\t\t\tfor (const element of parent.getChildren()) {\n\t\t\t\t(!element.getName().equalsIgnoreCase(Utils.PROP_NAME) ||\n\t\t\t\t\t(NumberUtils.SafeToInt(Source.NodePropertyValue(Utils.PROP_NAME, element.getAttrValue(Utils.PROP_ATTR_NAME), Utils.PROP_ATTR_VISIBLE), 1) &\n\t\t\t\t\t\tvisibility) >\n\t\t\t\t\t\t0) &&\n\t\t\t\t\tresult[type].push(this.getLayout(Source, element, visibility));\n\t\t\t\tawait new Promise<void>((resolve) => setTimeout(() => resolve(), 1));\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic static getPropAttributes(Source: IFieldProperties, Value: string | XmlNode, type: string = Utils.PROP_NAME): any {\n\t\tlet node: XmlNode;\n\t\tlet PropName: string;\n\t\tif (typeof Value == \"string\") {\n\t\t\tnode = Source.getNode(type, Utils.PROP_ATTR_NAME, Value);\n\t\t\tPropName = Value;\n\t\t} else {\n\t\t\tnode = Value as XmlNode;\n\t\t\tPropName = node.getAttrValue(Utils.PROP_ATTR_NAME);\n\t\t\ttype = node.getName();\n\t\t}\n\t\tlet isPropNode = type.equalsIgnoreCase(Utils.PROP_NAME);\n\t\tif (ObjUtils.IsNothing(node)) return {};\n\t\tlet result = <any>{ node: type };\n\t\tfor (const key in UI_ATTRIBUTES[type]) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(UI_ATTRIBUTES[type], key)) {\n\t\t\t\tconst element = UI_ATTRIBUTES[type][key];\n\t\t\t\ttry {\n\t\t\t\t\tconst AttrValue = this.developValue(Source, isPropNode, type, PropName, element); //\n\t\t\t\t\tif (!TextUtils.isEmpty(AttrValue)) {\n\t\t\t\t\t\tresult[key] = this.normailzeWebAttribute(key, AttrValue);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic static developValue(Source: IFieldProperties, isPropNode: boolean, PropType: string, PropName: string, element: any): any {\n\t\tif (typeof element == \"string\") return this.getValue(Source, isPropNode, PropType, PropName, element);\n\t\tlet retDefault = this.evaluateMacro(Source, \"default\" in element ? element[\"default\"] : \"\");\n\t\tlet retValue = \"\";\n\t\tif (\"value\" in element) {\n\t\t\tif (Array.isArray(element[\"value\"])) {\n\t\t\t\tretValue = this.getArrayValue(Source, isPropNode, PropType, PropName, element[\"value\"]);\n\t\t\t} else {\n\t\t\t\tretValue = this.getValue(Source, isPropNode, PropType, PropName, element[\"value\"]);\n\t\t\t}\n\t\t}\n\t\treturn TextUtils.isEmpty(retValue) ? retDefault : retValue;\n\t}\n\n\tprivate static getArrayValue(Source: IFieldProperties, isPropNode: boolean, PropType: string, PropName: string, element: Array<string>) {\n\t\tlet retValue = \"\";\n\t\tfor (let i = 0; i < element.length && TextUtils.isEmpty((retValue = this.getValue(Source, isPropNode, PropType, PropName, element[i]))); i++) {\n\t\t\t// if (!TextUtils.isEmpty(retValue=this.getValue(Source,node,PropType,PropName,element[i])))\n\t\t\t//   break;\n\t\t}\n\t\treturn retValue;\n\t}\n\n\tprivate static getValue(Source: IFieldProperties, isPropNode: boolean, PropType: string, PropName: string, AttrName: any) {\n\t\treturn isPropNode ? Source.FieldPropertyValue(PropName, AttrName) : Source.NodePropertyValue(PropType, PropName, AttrName);\n\t}\n\n\tprivate static normalizeWebColor(value: string): string {\n\t\tif (!value.startsWith(\"##\") && value.startsWith(\"#\") && value.length > 7) {\n\t\t\treturn \"#\" + value.substr(value.length - 6, 6) + value.substr(1, value.length - 7).padStart(2, \"0\");\n\t\t}\n\t\treturn value;\n\t}\n\n\tprivate static normailzeWebAttribute(AttrName: string, value: string): string {\n\t\tif (COLOR_ATTRIBUTES.indexOf(AttrName) >= 0) {\n\t\t\treturn this.normalizeWebColor(value);\n\t\t}\n\t\treturn value;\n\t}\n\tprivate static evaluateMacro(Source: IFieldProperties, macro: string) {\n\t\tif (!macro.startsWith(\"##\")) return macro;\n\t\tif (macro.equals(\"##COMPANYCOLOR##\")) return Source.getOwnerApp().getAppNode().attrs.companycolor || Utils.DEFAULT_BGCOLOR;\n\t\tif (macro.equals(\"##COMPANYFORECOLOR##\")) return Source.getOwnerApp().getAppNode().attrs.forecolor || Utils.DEFAULT_FORECOLOR;\n\t\treturn macro;\n\t}\n\t//#endregion\n\n\t//#region FieldPropertyValue\n\n\tprivate static resolvedAttrName(AttrName: string): string {\n\t\tif (FAST_ATTR_RESOLVER.hasOwnProperty(AttrName)) return FAST_ATTR_RESOLVER[AttrName];\n\t\treturn AttrName;\n\t}\n\n\tpublic static setLayoutFieldPropertyValue(value: any, node: string, name: string, attrXoneName: string, attrValue: string): boolean {\n\t\tconst attrs = value?.attributes;\n\t\tconst attrName = UITransform.resolvedAttrName(attrXoneName);\n\t\tif (attrs && attrs.node == node && attrs.name == name) {\n\t\t\tif (attrs.hasOwnProperty(attrName)) attrs[attrName] = attrValue;\n\t\t\telse {\n\t\t\t\t// TODO: Luis esto ver con alejandro como se agrega una nueva\n\t\t\t\tattrs[attrName] = attrValue;\n\t\t\t}\n\t\t\treturn true;\n\t\t} else if (value?.controls && Array.isArray(value.controls)) {\n\t\t\tfor (let index = 0; index < value.controls.length; index++) {\n\t\t\t\tif (UITransform.setLayoutFieldPropertyValue(value.controls[index], node, name, attrXoneName, attrValue)) return true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\t//#endregion\n}\n","import { Exception } from \"../Exceptions/Exception\";\nimport IllegalArgumentException from \"../Exceptions/IllegalArgumentException\";\nimport StringBuilder from \"./StringBuilder\";\nimport StringUtils from \"./StringUtils\";\nimport TextUtils from \"./TextUtils\";\n\n\nexport class Utils {\n    public static DEFAULT_BGCOLOR = \"#FFB22C1B\";\n    public static DEFAULT_FORECOLOR = \"#FF000000\";\n    public static FAIL_EXITAPP = \"##EXITAPP##\";\n    public static FAIL_EXIT = \"##EXIT##\";\n    public static FAIL_LOGIN = \"##LOGIN_START##\";\n\n    public static MACRO_LOGIN_START = Utils.FAIL_LOGIN;\n    public static MACRO_LOGIN_USERCOLL = \"##LOGIN_USERCOLL##\";\n    public static MACRO_LOGIN_NEWUSER = \"##LOGIN_NEWUSER##\";\n    public static MACRO_LOGIN_NEWPASS = \"##LOGIN_NEWPASS##\";\n    public static MACRO_LOGIN_COLL_OBJECT_INDEX = \"##LOGIN_COLL_OBJECT_INDEX##\";\n    public static MACRO_STARTREPLICA = \"##STARTREPLICA##\";\n    public static TAG_DATABASE_LOG = \"XOneDatabase\";\n    public static PROP_ATTR_EMBED = \"embed\";\n\n    static isDebuggable(m_context: any): boolean {\n        return false;\n    }\n\n    // Valores por defecto\n    public static PROP_DEFAULT_FIELDSIZE = 14;\n    public static PROP_DEFAULT_LABELWIDTH = 10;\n    public static PROP_DEFAULT_CONTENTLINES = 10;\n    public static TRUE_VALUE = \"true\";\n    public static FALSE_VALUE = \"false\";\n    public static DEFAUT_FILES_PATH = \"files/\";\n    public static DATE_SEPARATOR = \"/\";\n    public static HOUR_SEPARATOR = \":\";\n    public static DANISH_HOUR_SEPARATOR = \"\\\\.\";\n\n    // Valores para los lastexcuted app\n    public static LAST_EXECUTED_APP_FILE_NAME = \"lastexecuted.ini\";\n    public static LAST_EXECUTED_APP_FIELD_NAME = \"appname\";\n    public static LAST_EXECUTED_USER_FIELD_NAME = \"user\";\n\n    public static LICENSE_FIELD_NAME = \"License\";\n    public static SERVER_FIELD_NAME = \"ServerADDR\";\n\n    static TAG_FRAMEWORK = \"XOneFramewrok\";\n    static TAG_MAPPINGFILE = \"mappings\";\n    static TAG_APPNODE = \"app.xml\";\n    static EMPTY_STRING = \"\";\n    static PROP_NAME = \"prop\";\n    static PROP_ATTR_FRAME = \"frame\";\n    static PROP_ATTR_CONTENTNAME = \"contents\";\n    static PROP_ATTR_GROUP = \"group\";\n    static PROP_ATTR_NAME = \"name\";\n    static PROP_ATTR_VISIBLE = \"visible\";\n    static PROP_ATTR_TITLE = \"title\";\n    static PROP_ATTR_INDEX: string = \"index\";\n    static PROP_ATTR_TYPE = \"type\";\n\n    // Mascaras de bits\n    public static MASK_EDIT_VISIBLE = 1;\n    public static MASK_LIST_VISIBLE = 2;\n    public static MASK_CONTENT_VISIBLE = 4;\n    public static MASK_DROPDOWN_VISIBLE = 8;\n    // Macros\n    public static MACRO_DEFAULT = \"##DEFAULT##\";\n    public static MACRO_TAG = \"##\";\n\n    // Cadenas de la coleccin\n    public static COLL_COLLPROPS = \"collprops\";\n    public static COLL_COLL = \"coll\";\n    public static COLL_LOGIN_COLL = \"login-coll\";\n    public static COLL_LOGOFF_COLL = \"logoff-coll\";\n    public static PLATFORM_NAME = \"platform\";\n\n    public static DebugLog(tag: string, text: string) {\n\n    }\n\n    public static formatKey(nodeName: string, defaultAttr: string, defaultAttrValue: string): string {\n        return \"##\" + nodeName + \"##\" + defaultAttr + \"##\" + defaultAttrValue + \"##\";\n    }\n\n    public static CheckNullParameters(sFunctionName: string, ...FunctionParams: any) {\n        if (FunctionParams == null) {\n            throw new IllegalArgumentException(\"Error de ejecucin. Faltan parmetros para '\" + sFunctionName + \"'\");\n        }\n    }\n\n    public static CheckIncorrectParamCount(sFunctionName: string, FunctionParams: Object[], nExpectedCount) {\n        if (FunctionParams == null) {\n            if (nExpectedCount == 0) {\n                return;\n            }\n            throw new IllegalArgumentException(\"Error de ejecucin. Nmero incorrecto de parmetros para '\" + sFunctionName + \"'\");\n        }\n        if (FunctionParams.length != nExpectedCount) {\n            throw new IllegalArgumentException(\"Error de ejecucin. Nmero incorrecto de parmetros para '\" + sFunctionName + \"'\");\n        }\n    }\n\n    public static CheckIncorrectParamRange(sFunctionName: string, FunctionParams: Object[], nMinimumParameterCount: number, nMaximumParameterCount: number): void {\n        if (FunctionParams == null) {\n            if (nMinimumParameterCount == 0) {\n                return;\n            }\n            throw new IllegalArgumentException(\"Error de ejecucin. Nmero incorrecto de parmetros para '\" + sFunctionName + \"'\");\n        }\n        if (FunctionParams.length < nMinimumParameterCount) {\n            throw new IllegalArgumentException(\"Error de ejecucin. Nmero incorrecto de parmetros para '\" + sFunctionName + \"'\");\n        }\n        if (FunctionParams.length > nMaximumParameterCount && nMaximumParameterCount != -1) {\n            throw new IllegalArgumentException(\"Error de ejecucin. Nmero incorrecto de parmetros para '\" + sFunctionName + \"'\");\n        }\n    }\n\n    public static setLastAppExecutedField(m_context: any, sUserName: string, arg2: string) {\n        // TODO: Luis buscar un mecanismo para persistir datos en el navegador\n    }\n\n    public static getThrowableMessage(t: Exception): string {\n        if (t == null) {\n            return Utils.EMPTY_STRING;\n        }\n        let sExceptionMessage = t.getClass().getSimpleName();\n        let sMessage = t.getMessage();\n        if (!TextUtils.isEmpty(sMessage)) {\n            sExceptionMessage = sExceptionMessage + \"(): \" + sMessage;\n        }\n        return sExceptionMessage;\n    }\n\n\n}\n","import \"../Extensions/Extensions\";\nimport { XoneDataCollection } from \"./XoneDataCollection\";\nimport Hashtable from \"../Collections/HashMap/Hashtable\";\nimport TextUtils from \"../Utils/TextUtils\";\nimport { Utils } from \"../Utils/Utils\";\nimport { IFileManager } from \"../Interfaces/IFileManager\";\nimport IMessageHolder from \"../Interfaces/IMessageHolder\";\nimport XoneMessageHolder from \"./Localization/XoneMessageHolder\";\nimport IXoneObject from \"../Interfaces/IXoneObject\";\nimport IXoneAttributes from \"../Interfaces/IXoneAttributes\";\nimport IXoneApp from \"../Interfaces/IXoneApp\";\nimport XoneConnectionData from \"../Connection/XoneConnectionData\";\nimport ObjectDeveloper from \"../Utils/ObjectDeveloper\";\nimport StringBuilder from \"../Utils/StringBuilder\";\nimport StringUtils from \"../Utils/StringUtils\";\nimport { XoneDataObject } from \"./XoneDataObject\";\nimport IXmlDocument from \"../Interfaces/IXmlDocument\";\n//import DotNetJSONDocument from \"../Xml/JSONImpl/DotNetJSONDocument\";\nimport ConnectionStringUtils from \"../Utils/ConnectionStringUtils\";\nimport IllegalArgumentException from \"../Exceptions/IllegalArgumentException\";\nimport { Exception } from \"../Exceptions/Exception\";\nimport IllegalStateException from \"../Exceptions/IllegalStateException\";\nimport XmlUtils from \"../Utils/XmlUtils\";\nimport XOneJavascript from \"../XoneScripts/XOneJavascript\";\nimport ScriptContext from \"../XoneScripts/ScriptContext\";\nimport { XoneMessageKeys } from \"../Exceptions/XoneMessageKeys\";\nimport IUserCredentialValidator from \"../Interfaces/IUserCredentialValidator\";\nimport XoneUser from \"./XoneUser\";\nimport XmlNode from \"../Xml/JSONImpl/XmlNode\";\nimport XoneGenericException from \"../Exceptions/XoneGenericException\";\nimport { createVerify } from \"crypto\";\nimport NullPointerException from \"../Exceptions/NullPointerException\";\nimport XoneCssParser from \"./CSS/XoneCssParser\";\nimport XoneCssRule from \"./CSS/XoneCssRule\";\nimport XmlDocument from \"../Xml/JSONImpl/XmlDocument\";\nimport NumberUtils from \"../Utils/NumberUtils\";\nimport IXoneFileLoader from \"../Interfaces/IXoneFileLoader\";\nimport FileLoaderNodeJS from \"../Manager/FileLoaderNodeJS\";\nimport FileLoaderBrowser from \"../Manager/FileLoaderBrowser\";\nimport Vector from \"../Collections/Vector\";\nimport { XoneError } from \"./XoneError\";\nimport XoneWebCoreConnectionData from \"../Connection/WebCore/XoneWebCoreConnectionData\";\nimport { connect } from \"http2\";\n\nexport class XoneApplication implements IXoneApp {\n\t// Solo para identificar que una instancia es la aplicacion\n\tpublic get isApplication(): boolean {\n\t\treturn true;\n\t}\n\n\tprivate _objectID: symbol;\n\tprivate m_PushExit: boolean;\n\tprivate m_lstConnections: Hashtable<string, XoneConnectionData>;\n\tprivate m_objectDeveloper: ObjectDeveloper;\n\tprivate m_lstSysCollNames: Hashtable<string, string>;\n\tprivate m_strAppName: string;\n\tprivate m_lstQualifyCaches: Hashtable<string, Hashtable<string, string>>;\n\tprivate m_strConsole: StringBuilder;\n\tprivate m_lstParamStack: any[];\n\tprivate m_lstGlobalMacros: Hashtable<string, any>;\n\tprivate m_nDebugPort: number;\n\tprivate m_dbgLocker: Object;\n\tprivate m_lstCssList: Array<XoneCssParser>;\n\tprivate m_lstCollPropUndefinedValues: Hashtable<string, string[]>;\n\tprivate m_lstConditionCssList: Hashtable<string, Array<XoneCssParser>>;\n\tprivate m_strFixedVisualCondition: string;\n\tprivate m_strVisualConditions: string;\n\tprivate bIsCharWidthCompatibility: boolean;\n\tprivate bIsImageValuePriorized: boolean;\n\tprivate m_lstOpenColls: XoneDataCollection[];\n\tprivate m_bLoadLayouts: boolean;\n\tprivate m_bSelectiveReplication: boolean;\n\tprivate m_lstVisualCondDescriptors: Hashtable<string, string[]>;\n\tprivate m_lstCachedScripts: Hashtable<string, StringBuilder>;\n\tprivate m_globalItems: Hashtable<string, any>;\n\tprivate m_user: XoneDataObject;\n\tprivate m_lstCollections: Hashtable<string, XoneDataCollection> = new Hashtable<string, XoneDataCollection>();\n\tprivate m_lstCollPropValueCaches = new Hashtable<string, Hashtable<string, Hashtable<string, Hashtable<string, string>>>>();\n\t/**\n\t * K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t */\n\tprivate m_bCacheAttrValues = true; // TRUE si se cachean los atributos...\n\t/**\n\t * O13080801: Mecanismo de optimizacin para la gestin de controles visuales y atributos.\n\t * Lista con los atributos que varan porque tienen macros.\n\t */\n\tprotected m_lstEvaluatedAttributes: Hashtable<string, Array<string>>;\n\n\tprivate m_jsonConfigFile;\n\tprivate m_strAppPath: string;\n\tprivate m_fileManager: IFileManager;\n\tprivate m_messages: IMessageHolder;\n\tprotected m_company: IXoneObject;\n\tprivate m_strEntIdOwner: string;\n\tprivate m_strUserIdColl: string;\n\tprivate m_strEntIdLevel: string;\n\tprivate m_strEntIdColl: string;\n\tprivate m_currency: IXoneObject;\n\tprivate m_strFilesPath: string;\n\tprivate m_nVersionMapping: number;\n\tprivate m_xmlConfigFile: XmlNode;\n\tprivate m_context: any;\n\tprivate m_nMasterMid: number;\n\tprivate m_strDatemask: string;\n\tprivate m_bIsReplicating: boolean;\n\tprivate m_strPlatform: string;\n\tprivate m_nOperIdLength: number;\n\tprivate m_nRowIdLength: number;\n\tprivate mapLoginCollections: Hashtable<string, string>;\n\tprivate mapEntryPointCollections: Hashtable<string, string>;\n\tprivate sOverridenEntryPointCollection: string;\n\tprivate m_strEntTable: any;\n\tprivate m_strEntPk: any;\n\tprivate m_nEntPkType: number;\n\tprivate m_ui: any;\n\tprivate m_bHasStylesheets: boolean;\n\tprivate m_xmlAppNode: XmlNode;\n\tprivate m_strDefaultLanguage: string;\n\tprivate m_nScriptOptimizationLevel: number;\n\tprivate m_bLogMemoryUsage: boolean;\n\tprivate m_bSqlProfilerMode: boolean;\n\tprivate m_bDebug: boolean;\n\tprivate mIsEncryptFiles: any;\n\tprivate m_loader: IXoneFileLoader;\n\tprivate m_lstCollExceptions: Array<string>;\n\tprivate m_lstPropExceptions: Array<string>;\n\tprivate m_error: Array<XoneError>;\n\tprivate __SCRIPT_WRAPPERASYNC: any;\n\tprivate m_bExternalEntIdColl: boolean;\n\tprivate m_bExternalEntIdLevel: any;\n\tprivate m_bExternalEntIdOwner: any;\n\n\t/**\n\t *\n\t */\n\tconstructor() {\n\t\tUtils.DebugLog(Utils.TAG_FRAMEWORK, \"A new AppData is being instantiated.\");\n\t\tthis.m_strPlatform = \"web\";\n\t\t// En principio sera el que se pase desde fuera... si no viene ninguno seremos nosotros\n\t\tthis._objectID = Symbol(\"XoneApplication\");\n\t\t// if (null ==(m_loader =FileLoader))\n\t\t// \tm_loader =this;\n\t\t// m_context=context;\n\t\t// A13080702: Adicionar el PushValueAndExit de la mollejada para propagar a los dems.\n\t\tthis.m_PushExit = false;\n\t\t// A11081001: Implementacin de CreateObject y su infraestructura para crear objetos en scripts.\n\t\t// m_factory =Factory;\n\t\t// Y ahora inicializar el resto de variables.\n\t\t// Por defecto donde est la DLL...\n\t\t//////m_strAppPath = Path.GetDirectoryName(Assembly.GetExecutingAssembly().CodeBase).Replace(\"file:\\\\\", \"\");\n\t\tthis.m_strAppName = \"XOne Android  Application\";\n\t\t// La lista de conexiones\n\t\tthis.m_lstConnections = new Hashtable<string, XoneConnectionData>();\n\t\t// Por defecto tenemos todas las colecciones de la aplicacin\n\t\t//////m_strCollectionFilter = \"//mp:collprops/mp:coll\";\n\t\t// Crear la lista de colecciones\n\t\tthis.m_lstCollections = new Hashtable<string, XoneDataCollection>();\n\t\t// Crear la lista de nombres de colecciones de sistema\n\t\tthis.m_lstSysCollNames = new Hashtable<string, string>();\n\t\t// Crear la lista de caches de cualificacin de campos\n\t\tthis.m_lstQualifyCaches = new Hashtable<string, Hashtable<string, string>>();\n\t\t// Crear el desarrollador de objetos\n\t\tthis.m_objectDeveloper = new ObjectDeveloper();\n\t\t// Datemask por defecto\n\t\t// TODO SACAR EL DATEMASK DEL DISPOSITIVO O COGER UNO POR DEFECTO\n\t\t//////m_strDatemask = CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern.ToLower();\n\t\t// Inicializa la consola con una cadena vaca\n\t\t// O11042501: Utilizar un StringBuilder para la consola de AppData.\n\t\t// En realidad usamos un string builder vaco.\n\t\tthis.m_strConsole = new StringBuilder();\n\t\t// Inicializa el stack de parmetros pra PushValue y PopValue\n\t\tthis.m_lstParamStack = new Array();\n\t\t// TODO COGER EL DATEMASK DEL SISTEMA\n\t\t//////m_strSysDatemask = StringUtils.NormalizeDateMask(CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern);\n\t\t// Crear el error para mantener la compatibilidad con versiones anteriores\n\t\t//m_error = new ThreadLocal<>();\n\t\t//m_currentContext = new ThreadLocal<>();\n\t\t//\n\t\t// Implementacin de la maquinaria de scripting\n\t\t// Objetos propios usados para que esta clase se comporte como un scripting host.\n\t\t//m_classTypeInfoList = new Hashtable<>();\n\t\t// M11011001:\tIncluir macros globales y evaluacin de dichas macros para IMEI y dems.\n\t\t// Macros globales para sustituir en los SQLs y dems\n\t\tthis.m_lstGlobalMacros = new Hashtable<string, any>();\n\t\t// A10051901:   Componentes de depuracin y modificacin de maquinaria XOne para depurar.\n\t\t// Inicializar el puerto de depuracin con un valor por defecto.\n\t\tthis.m_nDebugPort = 7797;\n\t\t// Por defecto la maquinaria se estar ejecutando, claro.\n\t\t// m_smState =new Semaphore(1);\n\t\t// K12060701: Modificaciones para permitir multithreading en los scripts y depuracin.\n\t\t// Ahora esto es a nivel de threads\n\t\t//////m_state = EngineDebugState.Running;\n\t\tthis.m_dbgLocker = new Object(); // Esto lo vamos a usar para sincronizar los threads.\n\t\t// m_lstDebugContexts = new ArrayList<>();\n\t\t// m_debugCtx = new ThreadLocal<>();\n\t\t// m_debugCtx.set(new CXoneDebugContext(CXoneDebugContext.MAIN_THREAD_NAME));\n\t\t// getDebugContext().setState(EngineDebugState.Running);\n\t\t// m_lstDebugContexts.add(getDebugContext());\n\t\t// // Crea la lista con las definiciones de puntos de ruptura.\n\t\t// m_lstBreakpointLists = new ArrayList<>();\n\t\t// // F11051803: Modificaciones para solucionar problemas de depuracin en la maquinaria.\n\t\t// // Con dos cojines.. inicializamos a cero...\n\t\t// m_aiScriptDepth =new AtomicInteger(0);\n\t\t// ////m_aiScriptDepth.set(0);\n\t\t// // M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\tthis.m_messages = new XoneMessageHolder(\"EN\");\n\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t// Crear la lista de CSS y dems cositas necesarias para que funcione.\n\t\tthis.m_lstCssList = new Array<any>();\n\t\tthis.m_lstCollPropUndefinedValues = new Hashtable<string, Array<string>>();\n\t\t// M11072901: Modificaciones al mecanismo de CSS para adaptarse a condiciones visuales.\n\t\t// Lista para almacenar las hojas por condiciones de ejecucin.\n\t\tthis.m_lstConditionCssList = new Hashtable<string, Array<XoneCssParser>>();\n\t\tthis.m_strFixedVisualCondition = this.m_strVisualConditions = \"\";\n\t\t// M11111701: Proteccin de colecciones abiertas por error en scripts.\n\t\tthis.m_lstOpenColls = new Array<XoneDataCollection>();\n\t\t// Para ala compatibilidad con las otras plataformas\n\t\tthis.bIsCharWidthCompatibility = false;\n\t\tthis.bIsImageValuePriorized = false;\n\t\t// O13030601: Optimizaciones en la bsqueda de CSS para atributos.\n\t\t// Crear la lista de condiciones visuales parseadas\n\t\tthis.m_lstVisualCondDescriptors = new Hashtable<string, Array<string>>();\n\t\t// O13061901: Cachear los scripts que no estn en ficheros include.\n\t\t// Lista de scripts parseados que no son includes\n\t\tthis.m_lstCachedScripts = new Hashtable<string, StringBuilder>();\n\t\t// A13080701: Permitir objetos globales de script adicionados desde fuera.\n\t\tthis.m_globalItems = new Hashtable<string, any>();\n\t\t// TODO ADD TAG\n\t\t// Por defecto mantenemos esta banderilla a true porque asumimos que la va a usar\n\t\t// un framework que la necesita. Se puede poner a false a nivel de aplicacin.\n\t\tthis.m_bLoadLayouts = true;\n\t\t//this.m_lstRunningThreads.clear();\n\t\tthis.m_nOperIdLength = 150;\n\t\tthis.m_nRowIdLength = 100;\n\t\tthis.m_lstCollExceptions = XoneApplication.getCollExceptions();\n\t\tthis.m_lstPropExceptions = XoneApplication.getPropExceptions();\n\t\tthis.m_error = new Array<XoneError>();\n\t\tthis.m_isBrowser = !(typeof global !== \"undefined\" && {}.toString.call(global) == \"[object global]\");\n\t\tif (this.isBrowser) {\n\t\t\tthis.m_loader = new FileLoaderBrowser();\n\t\t} else {\n\t\t\tthis.m_loader = new FileLoaderNodeJS();\n\t\t}\n\t\t// if (this.m_isBrowser)\n\t\t//     Object.defineProperty(window,\"appData\", {\n\t\t//         value:this\n\t\t//     });\n\t\t// else\n\t\t//     Object.defineProperty(global,\"appData\", {\n\t\t//         value:this\n\t\t//     });\n\t}\n\n\tprivate static getCollExceptions(): Array<string> {\n\t\treturn Array.from([\"connection\", \"objname\", \"updateobj\", \"progid\", \"stringkey\", \"loadall\", \"withopen\", \"idfieldname\", \"useextdata\"]);\n\t}\n\n\tprivate static getPropExceptions(): Array<string> {\n\t\treturn Array.from([\"mapcol\", \"mapfld\", \"bit\", \"formula\", \"name\", \"group\", \"frame\", \"type\", \"linkedto\", \"linkedfield\"]);\n\t}\n\n\tgetSysDatemask(): string {\n\t\treturn \"ymd\";\n\t}\n\n\tisDebugMode(): boolean {\n\t\treturn false;\n\t}\n\n\taddEvaluatedAttributesList(sCollectionName: any, sKey: string) {\n\t\tif (this.m_lstEvaluatedAttributes == null) {\n\t\t\tthis.m_lstEvaluatedAttributes = new Hashtable<string, Array<string>>();\n\t\t}\n\t\tif (!this.m_lstEvaluatedAttributes.containsKey(sCollectionName)) {\n\t\t\tthis.m_lstEvaluatedAttributes.put(sCollectionName, new Array<string>());\n\t\t}\n\t\tthis.m_lstEvaluatedAttributes.get(sCollectionName).push(sKey);\n\t}\n\n\tGetWeekDayName(n: number): any {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tcurrentContext(): any {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\n\tprivate m_isBrowser: boolean;\n\n\tpublic get isBrowser(): boolean {\n\t\treturn this.m_isBrowser;\n\t}\n\n\t// M11111701: Proteccin de colecciones abiertas por error en scripts.\n\t// Una nueva coleccin abierta\n\tpublic AddOpenColl(Collection: XoneDataCollection): void {\n\t\tif (!this.m_lstOpenColls.contains(Collection)) this.m_lstOpenColls.push(Collection);\n\t}\n\n\t// M11111701: Proteccin de colecciones abiertas por error en scripts.\n\t// Elimina la coleccin de la lista de colecciones abiertas\n\tpublic RemoveOpenColl(Collection: XoneDataCollection): void {\n\t\tif (this.m_lstOpenColls.contains(Collection)) this.m_lstOpenColls.remove(Collection);\n\t}\n\n\tpublic exports = <any>{};\n\n\t// public RunScript(strFunctionName: any, strLang: string, strScript: string, ctx: ScriptContext,...Arguments): any {\n\t//     __SCRIPT_WRAPPER(this,this.m_ui,ctx.getObjectHost(),strScript, Arguments);\n\t//     // Object.defineProperties(global, {\n\t//     //     \"self\" : {\n\t//     //         value : ctx.getObjectHost(),\n\t//     //         writable : false,\n\t//     //         enumerable : false,\n\t//     //         configurable : true\n\t//     //     },\n\t//     //     \"selfColl\" : {\n\t//     //         value : ctx.getCollectionHost(),\n\t//     //         writable : false,\n\t//     //         enumerable : false,\n\t//     //         configurable : true\n\t//     //     }\n\t//     // });\n\t//     // require(\"../Code/LoginColl.js\");\n\t//     // // let obj=Object.setPrototypeOf(this.exports.LoginColl_JSWRAPPER,this.exports.__XONE_ISOLATE);\n\t//     // // let b=Object.create(obj);\n\t//     // this.__extends(this.exports.LoginColl_JSWRAPPER,this.exports.__XONE_ISOLATE);\n\t//     // let execContext=new this.exports.__XONE_ISOLATE(ctx.getObjectHost());\n\t//     // let a=execContext.calcular();\n\t//     // this.exports[\"LoginColl_JSWRAPPER\"][\"create\"].call(ctx.getObjectHost());\n\t// }\n\n\tpublic async RunScriptAsyncNOFunc(strFunctionName: any, strLang: string, strScript: string, ctx: ScriptContext, ...Arguments): Promise<any> {\n\t\t// let f=require(\"../xone/source/scripts/__LoginColl__.js\");\n\t\t// let g=require(\"../xone/source/scripts/__SCRIPT_WRAPPER__.js\");\n\t\t// f={...f,...g};\n\t\t// var c=new f.__SCRIPT_WRAPPERASYNC(this, this.m_ui, ctx.getObjectHost(), \"LoginColl_create_1\", Arguments);\n\t\t// f[\"LoginColl_create_1\"]();\n\t\tlet s = \"(async () => {\\n\" + strScript + \"\\n})()\";\n\t\tconsole.log(\"FunctionCall: \", strFunctionName);\n\t\tconsole.log(\"Script: \", s);\n\t\tawait this.__SCRIPT_WRAPPERASYNC(this, this.getUser(), this.m_ui, ctx.getObjectHost(), ctx.getCollectionHost(), s, Arguments);\n\t\treturn true;\n\t\t// Object.defineProperties(global, {\n\t\t//     \"self\" : {\n\t\t//         value : ctx.getObjectHost(),\n\t\t//         writable : false,\n\t\t//         enumerable : false,\n\t\t//         configurable : true\n\t\t//     },\n\t\t//     \"selfColl\" : {\n\t\t//         value : ctx.getCollectionHost(),\n\t\t//         writable : false,\n\t\t//         enumerable : false,\n\t\t//         configurable : true\n\t\t//     }\n\t\t// });\n\t\t// require(\"../Code/LoginColl.js\");\n\t\t// // let obj=Object.setPrototypeOf(this.exports.LoginColl_JSWRAPPER,this.exports.__XONE_ISOLATE);\n\t\t// // let b=Object.create(obj);\n\t\t// this.__extends(this.exports.LoginColl_JSWRAPPER,this.exports.__XONE_ISOLATE);\n\t\t// let execContext=new this.exports.__XONE_ISOLATE(ctx.getObjectHost());\n\t\t// let a=execContext.calcular();\n\t\t// this.exports[\"LoginColl_JSWRAPPER\"][\"create\"].call(ctx.getObjectHost());\n\t}\n\n\tpublic async RunScriptAsync(\n\t\tstrFunctionName: any,\n\t\tstrLang: string,\n\t\tstrScript: string,\n\t\tctx: ScriptContext,\n\t\tArguments,\n\t\targsName,\n\t\targsValue\n\t): Promise<any> {\n\t\t// let f=require(\"../xone/source/scripts/__LoginColl__.js\");\n\t\t// let g=require(\"../xone/source/scripts/__SCRIPT_WRAPPER__.js\");\n\t\t// f={...f,...g};\n\t\t// var c=new f.__SCRIPT_WRAPPERASYNC(this, this.m_ui, ctx.getObjectHost(), \"LoginColl_create_1\", Arguments);\n\t\t// f[\"LoginColl_create_1\"]();\n\t\tlet s = \"(async () => {\\n\" + strScript + \"\\n})()\";\n\t\tconsole.log(\"FunctionCall: \", strFunctionName);\n\t\tconsole.log(\"Script: \", s);\n\t\tawait this.__SCRIPT_WRAPPERASYNC(this, this.m_ui, ctx.getObjectHost(), ctx.getCollectionHost(), this.getUser(), strScript, argsValue);\n\t\treturn true;\n\t\t// Object.defineProperties(global, {\n\t\t//     \"self\" : {\n\t\t//         value : ctx.getObjectHost(),\n\t\t//         writable : false,\n\t\t//         enumerable : false,\n\t\t//         configurable : true\n\t\t//     },\n\t\t//     \"selfColl\" : {\n\t\t//         value : ctx.getCollectionHost(),\n\t\t//         writable : false,\n\t\t//         enumerable : false,\n\t\t//         configurable : true\n\t\t//     }\n\t\t// });\n\t\t// require(\"../Code/LoginColl.js\");\n\t\t// // let obj=Object.setPrototypeOf(this.exports.LoginColl_JSWRAPPER,this.exports.__XONE_ISOLATE);\n\t\t// // let b=Object.create(obj);\n\t\t// this.__extends(this.exports.LoginColl_JSWRAPPER,this.exports.__XONE_ISOLATE);\n\t\t// let execContext=new this.exports.__XONE_ISOLATE(ctx.getObjectHost());\n\t\t// let a=execContext.calcular();\n\t\t// this.exports[\"LoginColl_JSWRAPPER\"][\"create\"].call(ctx.getObjectHost());\n\t}\n\n\tprivate __extendStatics(d, b) {\n\t\treturn (\n\t\t\tObject.setPrototypeOf ||\n\t\t\t({ __proto__: [] } instanceof Array &&\n\t\t\t\tfunction (d, b) {\n\t\t\t\t\td.__proto__ = b;\n\t\t\t\t}) ||\n\t\t\tfunction (d, b) {\n\t\t\t\tfor (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t\t\t}\n\t\t);\n\t}\n\n\tprivate __extends(d, b) {\n\t\tObject.setPrototypeOf(d, b);\n\t\t// function __() { this.constructor = d; }\n\t\t// d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t}\n\t// let __extends = (this && this.__extends) || (function () {\n\t//     var extendStatics = function (d, b) {\n\t//         extendStatics = Object.setPrototypeOf ||\n\t//             ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t//             function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t//         return extendStatics(d, b);\n\t//     };\n\t//     return function (d, b) {\n\t//         extendStatics(d, b);\n\t//         function __() { this.constructor = d; }\n\t//         d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t//     };\n\t// })();\n\n\tgetDefaultLanguage(): string {\n\t\treturn \"javascript\";\n\t}\n\tm_bIsReady: boolean;\n\tm_strObjectPrefix: string;\n\tgetPlatform(): string {\n\t\treturn this.m_strPlatform;\n\t}\n\tGetClassName(strProgId: any): string {\n\t\treturn strProgId;\n\t}\n\tCheckClassName(strClassName: string): string {\n\t\treturn strClassName;\n\t}\n\n\tgetIdColl(): string {\n\t\tthrow new Error(\"Method not implemented.\");\n\t}\n\tgetCurrentCompany(): XoneDataObject {\n\t\treturn this.getCurrentEnterprise() as XoneDataObject;\n\t}\n\n\tpublic getUserIdColl(): string {\n\t\treturn this.m_strUserIdColl;\n\t}\n\n\tpublic getUser(): IXoneObject {\n\t\treturn this.m_user;\n\t}\n\n\tpublic getCurrency(): IXoneObject {\n\t\treturn this.m_currency;\n\t}\n\n\tpublic getEntIdLevel(): string {\n\t\treturn this.m_strEntIdLevel;\n\t}\n\n\tpublic getEntIdColl(): string {\n\t\treturn this.m_strEntIdColl;\n\t}\n\n\tpublic getEntIdOwner(): string {\n\t\treturn this.m_strEntIdOwner;\n\t}\n\n\tpublic getUserInterface() {\n\t\t// Devolver el UI\n\t\treturn this.m_ui;\n\t}\n\n\t/**\n\t * Asigna valor al objeto que se usar para gestionar el UI de la aplicacin.\n\t * @param value\t\tNuevo objeto de UI de la aplicacin.\n\t * @throws XoneGenericException\n\t */\n\tpublic setUserInterface(value: any) {\n\t\tthis.m_ui = value;\n\t}\n\n\t/**\n\t * Adiciona una conexin de datos a la lista interna de conexiones\n\t * @param Connection\t\t\tConexin que se quiere adicionar a la lista.\n\t * @return\t\t\t\t\t\tTRUE si la conexin se ha aadido correctamente.\n\t */\n\tprivate AddConnection(Connection: XoneConnectionData): boolean {\n\t\t// Adicionar la conexin a la lista\n\t\t// F10080902: Cuando se adiciona una conexin, verificar si es nula.\n\t\t// Aqu habr que comprobar si es nula, claro\n\t\tif (Connection != null) this.m_lstConnections.put(Connection.getName(), Connection);\n\t\treturn true;\n\t}\n\n\t/**\n\t * Crea una conexin de datos. Las conexiones pueden ser de base de datos, remotas, etc.\n\t * @param NodeData\t\t\t\tNodo XML para construir la conexin, la cual saca de aqu sus datos. Si se pasa NULL se crea una conexin principal.\n\t * @return\t\t\t\t\t\tDevuelve la nueva conexin recin creada o NULL si algo falla.\n\t */\n\tprivate CreateConnection(NodeData: XmlNode): XoneConnectionData {\n\t\tlet strName: string = null;\n\t\tlet cn: XoneConnectionData = null;\n\t\t//\n\t\t// Si no viene nodo, estamos creando la central\n\t\tif (NodeData != null) strName = NodeData.getAttrValue(Utils.PROP_ATTR_NAME);\n\t\tif (StringUtils.IsEmptyString(strName)) strName = XoneConnectionData.MAIN_CONNECTION;\n\t\t// Buscar qu conexin es la que tenemos que crear, para ello posiblemente haya\n\t\t// que parsear la cadena de conexin para sacar las caractersticas de la conexin\n\t\tif (NodeData == null) {\n\t\t\tcn = new XoneWebCoreConnectionData(this.m_context, strName, this); // TODO: Esto es el real XoneDbConnectionData(m_context, strName, this);\n\n\t\t\t/*\n\t\t\t * TODO ADD TAG 04/05/2015 Juan Carlos:\n\t\t\t * Aplicando estos nuevos atributos del license.ini.\n\t\t\t */\n\t\t\tif (strName.localeCompare(XoneConnectionData.MAIN_CONNECTION) == 0) {\n\t\t\t\tcn.setOperIdLength(this.m_nOperIdLength);\n\t\t\t\tcn.setRowIdLength(this.m_nRowIdLength);\n\t\t\t}\n\t\t} else {\n\t\t\t// Tenemos que averiguar qu tipo de conexin es\n\t\t\t// A11022301:\tFunciones, clases y dems necesarias para trabajar con conexiones remotas.\n\t\t\t// Analizar la cadena de conexin.\n\t\t\tconst strConnString = NodeData.getAttrValue(\"connstring\");\n\n\t\t\t//Juan Carlos. Errores en el parseo de la cadena de conexin. Lo cambio.\n\t\t\tconst parsedConnectionString = ConnectionStringUtils.parseConnectionString(strConnString);\n\t\t\tlet strProvider = parsedConnectionString.get(\"provider\");\n\t\t\tif (!TextUtils.isEmpty(strProvider)) {\n\t\t\t\tif (strProvider.compareToIgnoreCase(\"cgsoft remote provider\") == 0 || strProvider.compareToIgnoreCase(\"xone remote provider\") == 0) {\n\t\t\t\t\tlet strProgID = parsedConnectionString.get(\"progid\");\n\t\t\t\t\tif (strProgID.compareToIgnoreCase(\"CGSSocketCE.ConnectCE\") == 0) {\n\t\t\t\t\t\tlet GPSConnectionData = require(\"../Connection/GPSConnection/XoneGPSConnectionData\");\n\t\t\t\t\t\tcn = new GPSConnectionData.default(this.m_context, strName, this);\n\t\t\t\t\t} else if (strProgID.compareToIgnoreCase(\"CGSRSS.CProxy\") == 0) {\n\t\t\t\t\t\t//cn = new CXoneRSSConnectionData(strName, this,this.m_context);\n\t\t\t\t\t} else if (strProgID.compareToIgnoreCase(\"CGSProxy.CProxy\") == 0) {\n\t\t\t\t\t\t//cn = new CXoneRemoteConnectionData(strName, this);\n\t\t\t\t\t} else if (strProgID.indexOf(\"JSONConnection\") >= 0) {\n\t\t\t\t\t\tlet JSONConnectionData = require(\"../Connection/JSONConnection/XoneJSONConnectionData\");\n\t\t\t\t\t\tcn = new JSONConnectionData.default(this.m_context, strName, this);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//cn = new CXoneReflectionConnectionData(strProgID,strName, this, this.m_context);\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (cn != null && this.m_user != null) {\n\t\t\t\t\t\t\t\tcn.addExtendedProperty(\"xoneuser\", this.m_user.GetRawStringField(\"LOGIN\"));\n\t\t\t\t\t\t\t\tcn.addExtendedProperty(\"xonepass\", this.m_user.GetRawStringField(\"PWD\"));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\tex.printStackTrace();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (cn == null) {\n\t\t\t\t\tcn = new XoneWebCoreConnectionData(this.m_context, strName, this); // TODO: Esto es el real new CXoneRemoteConnectionData (strName, this);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 12/01/2018 Juan Carlos\n\t\t\t// Alguien se olvid de leer y asignar el atributo datemask del <connection>.\n\t\t\tif (cn != null) {\n\t\t\t\tconst sDateMask = NodeData.getAttrValue(\"datemask\");\n\t\t\t\tif (!TextUtils.isEmpty(sDateMask)) {\n\t\t\t\t\tcn.setDatemask(sDateMask);\n\t\t\t\t}\n\t\t\t\t// Tag 23041801 Luis Para poder agregar en la conexion a traves de atributos el rowidfieldname y el sqlfieldname\n\t\t\t\tconst sRowidFieldName = NodeData.getAttrValue(\"rowidfieldname\");\n\t\t\t\tif (!TextUtils.isEmpty(sRowidFieldName)) {\n\t\t\t\t\tcn.setRowIdFieldName(sRowidFieldName);\n\t\t\t\t}\n\t\t\t\tconst sSqlFieldName = NodeData.getAttrValue(\"sqlfieldname\");\n\t\t\t\tif (!TextUtils.isEmpty(sSqlFieldName)) {\n\t\t\t\t\tcn.setSqlFieldName(sSqlFieldName);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Si no hemos creado ninguna, la creamos ahora...\n\t\t\tif (cn == null) cn = new XoneWebCoreConnectionData(this.m_context, strName, this); // TODO: Esto es el real XoneDbConnectionData(this.m_context, strName, this);\n\t\t} // Tenemos que averiguar qu tipo de conexin es\n\t\t// Pasar el nodo de datos a la conexin para que se busque la vida\n\t\t// A11111101: Soportar plataformas a nivel de nodos de conexin.\n\t\t// Asignar la plataforma\n\t\tcn.SetPlatform(this.m_strPlatform);\n\t\tcn.setNodeData(NodeData);\n\t\t// Si es la conexin principal, le pasamos el IsReplicating de la aplicacin\n\t\tif (cn.getName().equals(XoneConnectionData.MAIN_CONNECTION)) {\n\t\t\t// Pasarle las cosas que histricamente estaban a nivel de aplicacin\n\t\t\tcn.setIsReplicating(this.m_bIsReplicating);\n\t\t\tcn.setDatemask(this.m_strDatemask);\n\t\t} // Pasarle las cosas que histricamente estaban a nivel de aplicacin\n\t\t// TODO ADD TAG\n\t\t// Verificar que tenga datemask...\n\t\tif (StringUtils.IsEmptyString(cn.getDatemask())) {\n\t\t\t// Poner la de la aplicacin\n\t\t\tcn.setDatemask(this.m_strDatemask);\n\t\t} // Poner la de la aplicacin\n\t\t// Si es la conexin principal, comprobar si hay InitMasterData anterior\n\t\tif (cn.getName().equals(XoneConnectionData.MAIN_CONNECTION)) {\n\t\t\t// Setear los datos\n\t\t\tif (this.m_nMasterMid > 0) {\n\t\t\t\t// Tiene valores\n\t\t\t\tcn.setMID(this.m_nMasterMid);\n\t\t\t\tcn.setDBID(this.m_nMasterMid);\n\t\t\t\tcn.setIsReplicating(true);\n\t\t\t} // Tiene valores\n\t\t} // Setear los datos\n\t\treturn cn;\n\t}\n\n\tLoadConnection(Data: XmlNode): boolean {\n\t\tconst cn = this.CreateConnection(Data);\n\t\tif (cn == null) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this.AddConnection(cn);\n\t}\n\n\tpublic getConnection(ConnectionName: string = null): XoneConnectionData {\n\t\tlet strName = ConnectionName;\n\t\tif (StringUtils.IsEmptyString(ConnectionName)) strName = XoneConnectionData.MAIN_CONNECTION;\n\t\t// Buscar la conexin en la lista\n\t\tif (!this.m_lstConnections.containsKey(strName)) return null;\n\t\t// Devolverla\n\t\treturn this.m_lstConnections.get(strName);\n\t}\n\n\tpublic async login(...FunctionParams: any): Promise<XoneDataObject> {\n\t\tconst sFunctionName = \"Login\";\n\t\tUtils.CheckNullParameters(sFunctionName, FunctionParams);\n\t\tUtils.CheckIncorrectParamCount(sFunctionName, FunctionParams, 1);\n\t\tconst jsObject = FunctionParams[0];\n\t\tconst sUserName = StringUtils.SafeToString(jsObject[\"userName\"], null);\n\t\tconst sPassword = StringUtils.SafeToString(jsObject[\"password\"], null);\n\t\tconst bIsGoogleSignOn = StringUtils.ParseBoolValue(jsObject[\"isGoogleSignOn\"], false);\n\t\tconst sEntryPointCollection = StringUtils.SafeToString(jsObject[\"entryPoint\"], this.getEntryPointCollection(this.getCurrentVisualConditions()));\n\t\tconst onLoginSuccessful = jsObject[\"onLoginSuccessful\"];\n\t\tconst onLoginFailed = jsObject[\"onLoginFailed\"];\n\t\tconst onLoginCallResults = jsObject[\"onLoginCallResults\"];\n\t\t// amiyares 20/08/2021: Agregamos opcin de ignorar entry point\n        const ignoreEntryPoint = jsObject[\"ignoreEntryPoint\"];\n\t\tif (!bIsGoogleSignOn) {\n\t\t\tif (sUserName == null) {\n\t\t\t\tthrow new IllegalArgumentException(sFunctionName + \"(): Null user name parameter\");\n\t\t\t}\n\t\t\tif (sPassword == null) {\n\t\t\t\tthrow new IllegalArgumentException(sFunctionName + \"(): Null password parameter\");\n\t\t\t}\n\t\t}\n        if (!ignoreEntryPoint) {\n\t\t\tif (TextUtils.isEmpty(sEntryPointCollection)) {\n\t\t\t\tthrow new IllegalArgumentException(sFunctionName + \"(): Empty entry point parameter\");\n\t\t\t}\n\t\t\tconst dataCollEntryPoint = await this.getCollection(sEntryPointCollection);\n\t\t\tif (dataCollEntryPoint == null) {\n\t\t\t\tthrow new IllegalArgumentException(sFunctionName + \"(): Entry point collection \" + sEntryPointCollection + \" not found\");\n\t\t\t}\n\t\t\tthis.setOverridenEntryPoint(sEntryPointCollection);\n\t\t}\n\t\tconst user = this.getUser();\n\t\tif (user != null) {\n\t\t\tUtils.DebugLog(Utils.TAG_FRAMEWORK, sFunctionName + \"(): User is already logged in\");\n\t\t}\n\t\t// if (bIsGoogleSignOn) {\n\t\t//     IStartActivityForResult lastEditView = app.getLastEditView();\n\t\t//     if (lastEditView == null) {\n\t\t//         throw new IllegalStateException(sFunctionName + \"(): No edit view is visible, cannot perform Google Sign In\");\n\t\t//     }\n\t\t//     GoogleSignInTask gsoTask = new GoogleSignInTask(lastEditView);\n\t\t//     GoogleSignInAccount result = gsoTask.get();\n\t\t//     sUserName = result.getEmail();\n\t\t//     if (onLoginCallResults != null) {\n\t\t//         HashMap<String, Object> mapRuntimeObjects = getXOneScriptObjects();\n\t\t//         XOneJavascript.run(m_context, onLoginCallResults, mapRuntimeObjects, gsoTask);\n\t\t//         return;\n\t\t//     }\n\t\t// }\n\t\ttry {\n\t\t\tlet loggedUser = await this.logonUser(sUserName, sPassword, Utils.EMPTY_STRING);\n\t\t\t// ca.then(async (loggedUser)=>{\n\t\t\tlet loginException: Exception = null;\n\t\t\tlet ctx = new ScriptContext(null);\n\t\t\tconst mapRuntimeObjects = await this.getXOneScriptObjects(ctx);\n\t\t\tif (loggedUser != null) {\n\t\t\t\tUtils.setLastAppExecutedField(this.m_context, sUserName, this.m_strAppName + \"##\" + Utils.LAST_EXECUTED_USER_FIELD_NAME);\n\t\t\t\tif (onLoginSuccessful != null) {\n\t\t\t\t\tXOneJavascript.run(this, onLoginSuccessful, ctx, mapRuntimeObjects);\n\t\t\t\t}\n\t\t\t\tif (ignoreEntryPoint) return loggedUser;\n\t\t\t\tthis.m_ui.launchEntryPoint();\n\t\t\t} else if (onLoginFailed != null) {\n\t\t\t\tlet sMessage;\n\t\t\t\tif (loginException != null) {\n\t\t\t\t\tsMessage = Utils.getThrowableMessage(loginException);\n\t\t\t\t} else {\n\t\t\t\t\tsMessage = \"Login failed\";\n\t\t\t\t}\n\t\t\t\t//XOneJavascript.run(onLoginFailed, sMessage);\n\t\t\t\tawait XOneJavascript.runAsync(this, onLoginFailed, ctx, mapRuntimeObjects, null, sMessage);\n\t\t\t}\n\t\t\treturn loggedUser;\n\t\t} catch (ex) {\n\t\t\tconsole.log(ex);\n\t\t\tonLoginFailed?.call(); // Alejandro 19/05/2021\n\t\t\treturn null;\n\t\t}\n\t\t// let loginException: Exception = null;\n\t\t// let loggedUser:XoneDataObject;\n\t\t// try {\n\t\t//     loggedUser =await this.logonUser(sUserName, sPassword, Utils.EMPTY_STRING);\n\t\t// } catch (ex) {\n\t\t//     loginException = ex;\n\t\t//     loggedUser = null;\n\t\t// }\n\t\t// return loggedUser;\n\t}\n\n\tprivate async getXOneScriptObjects(scriptContext?: ScriptContext): Promise<Hashtable<String, Object>> {\n\t\tconst mapRuntimeObjects = new Hashtable<String, Object>();\n\t\tmapRuntimeObjects.put(\"appData\", this);\n\t\tlet injectJavaObject = this.getUserInterface();\n\t\tif (injectJavaObject != null) {\n\t\t\tmapRuntimeObjects.put(\"ui\", injectJavaObject);\n\t\t}\n\t\tif (this.m_user != null) {\n\t\t\tmapRuntimeObjects.put(\"user\", this.m_user);\n\t\t}\n\t\t//mapRuntimeObjects.put(\"err\", this.getError());\n\t\tif (scriptContext != null) {\n\t\t\tinjectJavaObject = scriptContext.getObjectHost();\n\t\t\tif (injectJavaObject != null) {\n\t\t\t\tmapRuntimeObjects.put(\"self\", injectJavaObject);\n\t\t\t}\n\t\t\tinjectJavaObject = await scriptContext.getCollectionHost();\n\t\t\tif (injectJavaObject != null) {\n\t\t\t\tmapRuntimeObjects.put(\"selfDataColl\", injectJavaObject);\n\t\t\t}\n\t\t\tlet params = scriptContext.GetParams();\n\t\t\tif (params != null) {\n\t\t\t\tlet paramsNames = null;\n\t\t\t\twhile ((paramsNames = params.next()) != null) {\n\t\t\t\t\tmapRuntimeObjects.put(paramsNames.value[0], paramsNames.value[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn mapRuntimeObjects;\n\t}\n\n\tpublic async logonUser(UserName: string, Password: string, errorMessage: string, silentMode: boolean = false): Promise<XoneDataObject> {\n\t\t// Primero buscamos la coleccin de usuarios... el nombre se puede cambiar\n\t\t// en el nodo de inicializacin\n\t\tlet usercol = await this.getSysCollection(\"Usuarios\");\n\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\tif (usercol == null)\n\t\t\t////throw new Exception(\"No se encuentra la coleccin de usuarios para buscar el usuario que se ha pedido conectar.\");\n\t\t\t// A12080601: Incluir un mensaje de error personalizado en LogonUser.\n\t\t\tthrow new Exception(this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_APP_LOGONNOUSERCOLL, errorMessage));\n\t\t// TODO: Luis Esto es lo unico que se me ocurre para que no espere Authentication las llamadas online\n\t\t// if (usercol.getConnection() instanceof CXoneReflectionConnectionData)\n\t\t// \tusercol.getConnection().addExtendedProperty(\"logincall\", \"true\");\n\t\t// Buscamos el usuario que nos piden\n\t\tconst objuser = (await usercol.get(\"LOGIN\", UserName)) as XoneUser;\n\t\tusercol.getConnection().removeExtendedProperty(\"logincall\");\n\t\tif (objuser == null) {\n\t\t\t// Error\n\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y dems cosas.\n\t\t\t////throw new Exception(\"No se encuentra el usuario con LOGIN='\" + UserName + \"' para cargarlo.\");\n\t\t\t// A12080601: Incluir un mensaje de error personalizado en LogonUser.\n\t\t\tlet s = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_APP_LOGONUSERNOTFOUND, errorMessage);\n\t\t\ts = s.replace(\"{0}\", UserName);\n\t\t\tthrow new Exception(s);\n\t\t} // Error\n\t\t// Si el objeto implementa la interfaz adecuada, usarla\n\t\tif (!silentMode) {\n\t\t\t// TODO: Luis Para modo silencioso, sin pass\n\t\t\tlet validator: IUserCredentialValidator = null;\n\t\t\tif (Object.prototype.hasOwnProperty.call(objuser, \"ValidateUserCredentials\")) validator = objuser;\n\t\t\tif (validator != null) {\n\t\t\t\t// Efectuar la validacin\n\t\t\t\tlet objparams = [Password];\n\t\t\t\tif (!validator.ValidateUserCredentials(objparams)) return null;\n\t\t\t} // Efectuar la validacin\n\t\t\telse {\n\t\t\t\t// Verificar la clave... en esta implementacin es comparar y nada mais\n\t\t\t\tlet strUserPwd: string = objuser.get(\"PWD\") as string;\n\t\t\t\tif (StringUtils.IsEmptyString(Password)) {\n\t\t\t\t\t// La del usuario debera ser vaca tambin\n\t\t\t\t\tif (!StringUtils.IsEmptyString(strUserPwd)) return null; // Error\n\t\t\t\t} // La del usuario debera ser vaca tambin\n\t\t\t\telse {\n\t\t\t\t\t// Comparar\n\t\t\t\t\tif (!Password.equals(strUserPwd)) return null;\n\t\t\t\t} // Comparar\n\t\t\t} // Verificar la clave... en esta implementacin es comparar y nada mais\n\t\t}\n\t\t// Al menos el usuario est bien... ahora buscar la empresa...\n\t\tthis.m_user = objuser;\n\t\t// if (usercol.getConnection() instanceof CXoneReflectionConnectionData) {\n\t\t// \ttry {\n\t\t// \t\tif (this.m_user!=null) {\n\t\t// \t\t\tusercol.getConnection().addExtendedProperty(\"xoneuser\",this.m_user.GetRawStringField(\"LOGIN\"));\n\t\t// \t\t\tusercol.getConnection().addExtendedProperty(\"xonepass\",this.m_user.GetRawStringField(\"PWD\"));\n\t\t// \t\t}\n\t\t// \t} catch (e) {\n\t\t// \t\te.printStackTrace();\n\t\t// \t}\n\t\t// }\n\t\tlet objcomp = await objuser.ObjectItem(\"IDEMPRESA\");\n\t\tif (objcomp == null) return objuser;\n\t\t// Cargar la empresa\n\t\tthis.LoadCompanyData(objcomp);\n\t\treturn objuser;\n\t}\n\n\tprotected GetSysCollName(SysName: string): string {\n\t\t// Si no est en lista, es que no se ha traducido, luego es el que se ha pasado\n\t\tif (!this.m_lstSysCollNames.containsKey(SysName)) return SysName;\n\t\t// De lo contrario, devolvemos el traducido\n\t\treturn this.m_lstSysCollNames.get(SysName);\n\t}\n\n\tpublic async getSysCollection(CollName: string): Promise<XoneDataCollection> {\n\t\treturn await this.getCollection(this.GetSysCollName(CollName));\n\t}\n\n\tpublic addLoginCollection(loginCollection: XmlNode, loginCollectionDefault: string): void {\n\t\tif (this.mapLoginCollections == null) {\n\t\t\tthis.mapLoginCollections = new Hashtable<string, string>();\n\t\t}\n\t\tXmlUtils.getValuesByConditions(this.mapLoginCollections, loginCollection, loginCollectionDefault);\n\t}\n\n\tpublic getLoginCollectionName(condition: string): string {\n\t\tif (!StringUtils.IsEmptyString(condition)) {\n\t\t\tlet lst = this.getCurrentVisualConditionsDescriptors();\n\t\t\tfor (let s in lst) {\n\t\t\t\tif (this.mapLoginCollections.containsKey(s)) {\n\t\t\t\t\treturn this.mapLoginCollections.get(s);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t/// ALEJANDRO FG - APRENDIENDO - 22/02/2017\n\t\t// He cambiado el orden para que si esta definido el nuevo modo , pues este prevalezca sobre el viejo,\n\t\t// tal y como hace el entrypoint\n\t\tif (this.mapLoginCollections.containsKey(Utils.MACRO_DEFAULT)) {\n\t\t\tlet sLoginColl = this.mapLoginCollections.get(Utils.MACRO_DEFAULT);\n\t\t\tif (!TextUtils.isEmpty(sLoginColl)) {\n\t\t\t\treturn sLoginColl;\n\t\t\t}\n\t\t}\n\n\t\tlet loginCollNode = this.getConfigFile()\n\t\t\t.SelectSingleNode(Utils.COLL_COLLPROPS)\n\t\t\t.SelectSingleNode(Utils.COLL_COLL, Utils.COLL_LOGIN_COLL, Utils.TRUE_VALUE);\n\t\tif (loginCollNode != null) {\n\t\t\treturn loginCollNode.getAttrValue(Utils.PROP_ATTR_NAME);\n\t\t}\n\t\treturn null;\n\t}\n\n\t// ADD Tag Luis Ahora puede haber varios entrypoint en dependencia de las condiciones como en el style\n\n\tpublic addEntryPointCollection(entryPointCollection: XmlNode, entryPointDefault: string): void {\n\t\tif (this.mapEntryPointCollections == null) {\n\t\t\tthis.mapEntryPointCollections = new Hashtable<string, string>();\n\t\t}\n\t\tXmlUtils.getValuesByConditions(this.mapEntryPointCollections, entryPointCollection, entryPointDefault);\n\t}\n\n\tpublic getEntryPointCollection(sCondition: string) {\n\t\tif (!TextUtils.isEmpty(this.sOverridenEntryPointCollection)) {\n\t\t\treturn this.sOverridenEntryPointCollection;\n\t\t}\n\t\tif (!StringUtils.IsEmptyString(sCondition)) {\n\t\t\tlet lstVisualConditions = this.getCurrentVisualConditionsDescriptors();\n\t\t\tfor (let sVisualCondition in lstVisualConditions) {\n\t\t\t\tif (this.mapEntryPointCollections.containsKey(sVisualCondition)) {\n\t\t\t\t\treturn this.mapEntryPointCollections.get(sVisualCondition);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.mapEntryPointCollections.containsKey(Utils.MACRO_DEFAULT)) {\n\t\t\treturn this.mapEntryPointCollections.get(Utils.MACRO_DEFAULT);\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic setOverridenEntryPoint(sEntryPointCollection: string): void {\n\t\tthis.sOverridenEntryPointCollection = sEntryPointCollection;\n\t}\n\n\tpublic logout(...FunctionParams): void {\n\t\tconst sFunctionName = \"Logout\";\n\t\tconst user = this.getUser();\n\t\tif (user == null) {\n\t\t\tthrow new IllegalStateException(sFunctionName + \"(): User is not logged in\");\n\t\t}\n\t\tconst userCollection = user.getOwnerCollection();\n\t\tif (userCollection != null) {\n\t\t\tuserCollection.Clear();\n\t\t}\n\t\tthis.m_user = null;\n\t\tthis.clearCompanyData();\n\t\t// TODO: ver como se hace esto\n\t\t// IXoneAndroidApp app = getAndroidApp();\n\t\t// if (app != null) {\n\t\t//     app.returnToLogin();\n\t\t// }\n\t}\n\n\tasync IniciarApp(codePath: string, scriptWrapper: any, fileManager: IFileManager, connString?: string): Promise<void> {\n\t\tthis.setAppPath(codePath);\n\t\tthis.__SCRIPT_WRAPPERASYNC = scriptWrapper;\n\t\tthis.m_fileManager = fileManager;\n\t\tconst appXml = await fileManager.readFileAsync(this.m_strAppPath + \"/\" + Utils.TAG_APPNODE);\n\t\tthis.m_jsonConfigFile = await fileManager.readFileAsync(this.m_strAppPath + \"/\" + Utils.TAG_MAPPINGFILE + \".xne\");\n\t\tthis.LoadConfigFile(this.m_strAppPath, appXml, this.m_jsonConfigFile, true, 2);\n\t\tthis.Initialize(connString);\n\t}\n\n\t/**\n\t * Inicializa la aplicacion. Se le pasa una cadena de conexion para pasarle a la conexion principal de la aplicacion. Si la conexion principal no existe, la crea.\n\t * @param ConnString\t\t\tCadena de conexion para pasarle a la conexion principal. Si ya tenoa una voa nodo APP, se sustituye por esta.\n\t * @return\t\t\t\t\t\tDevuelve TRUE si la inicializacion es correcta. FALSE si falla algo que no dispare excepciones.\n\t * @throws Exception\n\t */\n\tpublic Initialize(ConnString: string = Utils.EMPTY_STRING): boolean {\n\t\t// Crear un wrapper de UI si no lo han puesto ya\n\t\tif (this.m_ui == null)\n\t\t\tthis.m_ui = {\n\t\t\t\tstartReplica: function () {},\n\t\t\t\tshowToast: function (...args) {},\n\t\t\t\tlaunchEntryPoint: function (...args) {},\n\t\t\t\tmsgBox: function (...args) {},\n\t\t\t\tstartGps: function (...args) {},\n\t\t\t}; // new XoneUserInterface (this);\n\n\t\t// Buscamos la conexion principal\n\t\tlet mainConn: XoneConnectionData = this.getConnection();\n\n\t\tif (mainConn == null) {\n\t\t\t// Adicionar la nueva\n\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y demos cosas.\n\t\t\tif (null == (mainConn = this.CreateConnection(null)))\n\t\t\t\t////throw new Exception(\"No se puede crear la conexion principal. Posiblemente haya un problema de memoria.\");\n\t\t\t\tthrow new XoneGenericException(\n\t\t\t\t\t-9000,\n\t\t\t\t\tthis.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_APP_CANNOTCREATEMAINCONN, \"Cannot create main connection. Possible cause: memory error.\")\n\t\t\t\t);\n\t\t\tmainConn.setConnString(ConnString);\n\t\t\t// Si hay prefijo definido, lo ponemos ahora\n\t\t\tif (!StringUtils.IsEmptyString(this.m_strObjectPrefix)) mainConn.setPrefix(this.m_strObjectPrefix);\n\t\t\tthis.AddConnection(mainConn);\n\t\t} // Adicionar la nueva\n\t\telse {\n\t\t\t// Si no tiene cadena de conexion, ponerla\n\t\t\tif (StringUtils.IsEmptyString(mainConn.getConnString())) mainConn.setConnString(ConnString);\n\t\t} // Si no tiene cadena de conexion, ponerla\n\t\t// Solamente pedir una conexion fosica... si falla es que hay problemas de inicializacion\n\t\tlet conn = mainConn.GetNewConnection(true);\n\t\tif (conn == null) {\n\t\t\t// Error\n\t\t\t// M11051201: Mecanismo para soporte multilenguaje en los componentes y demos cosas.\n\t\t\t////throw new Exception(\"No se puede abrir una conexion para '\" + mainConn.getConnString() + \"'\");\n\t\t\tlet s = this.m_messages.GetMessage(XoneMessageKeys.SYS_MSG_APP_OPENCONNERROR, \"Cannot open connection. ConnString='{0}'\");\n\t\t\ts = s.replace(\"{0}\", mainConn.getConnString());\n\t\t\tthrow new XoneGenericException(-9001, s);\n\t\t} // Error\n\t\t// Cerrar la conexion\n\t\t//////conn.close();\n\t\t// TODO ADD TAG Moviendo el loadinclude\n\t\t// Inicializacion completada...\n\t\treturn (this.m_bIsReady = true);\n\t}\n\n\tpublic LoadConfigFile(executionPath: string, appSource: any, Source: any, useTranslation: boolean, version: number): IXmlDocument {\n\t\t// A14102301: Incroporacin de un mecanismo de control de integridad para desarrollos.\n\t\t// Si estamos en este modo, el mappings tiene que cuadrar... si no, pal carajo...\n\t\t// Solo si la maquinaria se ha activado\n\t\t// if (m_checker != null && !m_checker.checkFileIntegrity(executionPath, m_strAppPath)) {\n\t\t//     return null;\n\t\t// }\n\t\t// Ahora se debe guardar la version con la que se esta trabajando que se usara en las colecciones al cargarla\n\t\tthis.m_nVersionMapping = version;\n\t\tlet doc = XmlDocument.getInstance();\n\t\tdoc.Deserialize(null, executionPath, Source, useTranslation);\n\t\tthis.m_xmlConfigFile = doc.getRootNode();\n\t\t//require(\"../Code/scripts/funciones.js\");\n\t\t// Luis: El nodo app, en el mundo nuevo\n\t\t// puede venir en un archivo externo\n\t\t// En ese caso lo mas seguro es que ya lo tengamos cargado\n\t\tif (appSource != null) {\n\t\t\tif (!this.LoadAppFile(executionPath, appSource, useTranslation)) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else if (!this.LoadAppNode(this.m_xmlConfigFile.SelectSingleNode(\"app\"))) {\n\t\t\treturn null;\n\t\t}\n\t\t// // Los include ahora aqui\n\t\t// // Cargar los ficheros include que estn a nivel global (a nivel de coleccin) y\n\t\t// // almacenarlos en las listas correspondientes...\n\t\t// if (m_lstIncludeFiles == null) {\n\t\t//     if (!LoadIncludeFiles(m_xmlAppNode)) {\n\t\t//         throw new XoneGenericException(-11015, \"Cannot load script files. Check include node.\");\n\t\t//     }\n\t\t// }\n\t\t// LoadSecurityConfigFiles(m_xmlAppNode, executionPath, useTranslation);\n\t\t// // 20/09/2019\n\t\t// LoadAppMachineLearningFile();\n\t\t// Completo\n\t\treturn doc;\n\t}\n\n\t/**\n\t * Carga el fichero app.xml que es el nuevo formato de integrar las cosas de la app\n\t * @param Source\t\t\t\tStream del cual se leern los datos del fichero mappings. El framework tendr que buscarse la vida para abrirlo.\n\t * @return\t\t\t\t\t\tDevuelve TRUE si la carga del mappings ha sido correcta.\n\t * @throws Exception\n\t */\n\tpublic LoadAppFile(executionPath: string, Source: any, useTranslation: boolean): boolean {\n\t\t// A14102301: Incorporacin de un mecanismo de control de integridad para desarrollos.\n\t\t// Si estamos en este modo, el mappings tiene que cuadrar... si no, pal carajo...\n\t\t// TODO: Luis para mas adelante\n\t\t// if (m_checker !=null)\n\t\t// {// Solo si la maquinaria se ha activado\n\t\t//     if (!m_checker.checkFileIntegrity(executionPath, m_strAppPath))\n\t\t//         return false;\n\t\t// }// Solo si la maquinaria se ha activado\n\t\t//LittleEndianDataInputStream s =new LittleEndianDataInputStream(Source);\n\t\t//XmlDocument doc =new XmlDocument();\n\t\tlet xmlDocument: IXmlDocument = XmlDocument.getInstance();\n\t\txmlDocument.Deserialize(null, executionPath, Source, useTranslation);\n\n\t\t/*\n\t\t * 26/02/2018 Juan Carlos\n\t\t * Al convertir algunos proyectos con el Cloud Studio, el nodo app puede ser la raz\n\t\t * directamente. Eso no lo veo mal pero esto no lo tena en cuenta.\n\t\t */\n\t\tlet rootNode = xmlDocument.getRootNode();\n\t\tthis.m_xmlAppNode = rootNode.SelectSingleNode(\"app\");\n\t\tif (this.m_xmlAppNode == null) {\n\t\t\tif (rootNode.getName().equals(\"app\")) {\n\t\t\t\tthis.m_xmlAppNode = rootNode;\n\t\t\t}\n\t\t}\n\n\t\t// Luis: El nodo app, en el mundo nuevo\n\t\t// puede venir en un archivo externo\n\t\t// En ese caso lo mas seguro es que ya lo tengamos cargado\n\t\treturn this.LoadAppNode(this.m_xmlAppNode);\n\t}\n\n\t/**\n\t *  Busca el nodo app dentro del fichero mappings y carga su contenido\n\t * @throws Exception\n\t */\n\tprivate LoadAppNode(xapp: XmlNode): boolean {\n\t\t// De entrada si no hay mappings, no podemos hacer nada\n\t\t//if (m_xmlConfigFile == null)\n\t\t//    return false;\n\t\t//XmlNode xapp = m_xmlConfigFile.SelectSingleNode(\"app\");\n\t\tif (xapp == null) return true; // No tenemos nodo app\n\t\t// A10120301:\tModificaciones para guardar y exponer el nodo app para uso del framework.\n\t\t// Guardamos aqu el nodo por lo que pueda ser...\n\t\tthis.m_xmlAppNode = xapp;\n\t\tthis.m_xmlAppNode.getAttrValue(\"version\");\n\t\t// Buscar el nombre de la aplicacin si es que viene\n\t\tlet str = XmlUtils.getNodeAttr(xapp, \"name\");\n\t\tif (!StringUtils.IsEmptyString(str)) this.m_strAppName = str;\n\n\t\tthis.m_strDefaultLanguage = StringUtils.SafeToString(XmlUtils.getNodeAttr(xapp, \"default-language\"), \"VBScript\");\n\n\t\t// A12042503: Mecanismo para registrar un modo debug global en la aplicacin.\n\t\tthis.m_bDebug = StringUtils.ParseBoolValue(XmlUtils.getNodeAttr(xapp, \"debug\"), false);\n\n\t\t// 26/06/2018\n\t\tthis.m_bSqlProfilerMode = StringUtils.ParseBoolValue(XmlUtils.getNodeAttr(xapp, \"sql-profiler\"), false);\n\n\t\t/*\n\t\t * 05/07/2017\n\t\t * Dejar esto permanentemente ralentizaba un cojn algunas aplicaciones en el framework\n\t\t * debug, le hago un atributo y lo desactivo por defecto.\n\t\t */\n\t\tthis.m_bLogMemoryUsage = StringUtils.ParseBoolValue(XmlUtils.getNodeAttr(xapp, \"log-memory-usage\"), false);\n\n\t\tlet sScriptOptimizationLevel = XmlUtils.getNodeAttr(xapp, \"script-optimization-level\");\n\t\tif (TextUtils.isEmpty(sScriptOptimizationLevel)) {\n\t\t\tif (Utils.isDebuggable(this.m_context)) {\n\t\t\t\tthis.m_nScriptOptimizationLevel = -1;\n\t\t\t} else {\n\t\t\t\tthis.m_nScriptOptimizationLevel = 9;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.m_nScriptOptimizationLevel = NumberUtils.SafeToInt(sScriptOptimizationLevel, 9);\n\t\t}\n\n\t\t// Filtramos valores invlidos\n\t\tif (this.m_nScriptOptimizationLevel < -1) {\n\t\t\tthis.m_nScriptOptimizationLevel = -1;\n\t\t} else if (this.m_nScriptOptimizationLevel > 13) {\n\t\t\tthis.m_nScriptOptimizationLevel = 13;\n\t\t}\n\n\t\t// TODO: Luis esto en web no tiene sentido, solo lo dejo como referencia\n\t\t// let sMaxDexFiles = XmlUtils.getNodeAttr(xapp, \"max-dex-files\");\n\t\t// this.m_nMaxDexFiles = NumberUtils.SafeToInt(sMaxDexFiles);\n\n\t\t// M09072901:\tPermitir que se puedan traducir los joins a formato where en blackberry\n\t\t// Leer aqu si hay que traducir los joins o no\n\t\t// En principio en BB esto hay que hacerlo siempre, por lo que el valor por defecto es TRUE\n\t\t// TODO SI ESTO HACE FALTA LO USAREMOS ALGN DA\n\t\t////str =XmlUtils.GetNodeAttr(xapp, \"xlat-joins\");\n\t\t////if (!StringUtils.IsEmptyString(str))\n\t\t////\tm_bTranslateJoins =StringUtils.ParseBoolValue(str, true);\n\t\t// Buscar las conexiones que haya declaradas dentro del nodo de aplicacin\n\t\t// F13022106: Sacar la versin de la aplicacin del nodo app al cargarlo. Setear macro global.\n\t\t// Versin de la aplicacin\n\t\tif (StringUtils.IsEmptyString((str = XmlUtils.getNodeAttr(xapp, \"version\")))) str = \"1.0\";\n\t\tthis.setGlobalMacro(\"##VERSION##\", str);\n\t\t// Buscar las conexiones que haya declaradas dentro del nodo de aplicacin\n\t\tlet xcns = xapp.SelectNodes(\"connection\");\n\t\tlet cn: XoneConnectionData;\n\t\tfor (let i = 0; i < xcns.count(); i++) {\n\t\t\t// Cada definicin\n\t\t\tlet xc = xcns.get(i);\n\t\t\tcn = this.CreateConnection(xc);\n\t\t\tif (cn != null) this.AddConnection(cn);\n\t\t} // Cada definicin\n\t\tif (!StringUtils.IsEmptyString((str = XmlUtils.getNodeAttr(xapp, \"prefix\")))) {\n\t\t\t// Ponerle prefijo a la conexin principal\n\t\t\tif (null == (cn = this.getConnection())) {\n\t\t\t\t// No existe la principal, crearla\n\t\t\t\tif (null == (cn = this.CreateConnection(null))) return false;\n\t\t\t\tthis.AddConnection(cn);\n\t\t\t} // No existe la principal, crearla\n\t\t\t// Ponerle el prefijo\n\t\t\tcn.setPrefix(str);\n\t\t} // Ponerle prefijo a la conexin principal\n\t\t// A12021601: Permitir que una conexin incluya el selective-replication en su declaracin.\n\t\t// SelectiveReplication a nivel de nodo app para iniciar la aplicacin.\n\t\t// TODO: Luis Ver si esto es necesario mas adelante\n\t\t//setSelectiveReplication (StringUtils.ParseBoolValue (xapp.getAttrValue (\"selective-replication\"), false));\n\t\t// Cargar los nombres de colecciones de sistema que se cambien\n\t\txcns = xapp.SelectNodes(\"syscoll-name\");\n\t\tfor (let i = 0; i < xcns.count(); i++) {\n\t\t\t// Los nodos indican sustituciones de nombres de colecciones de sistema\n\t\t\tlet xn = xcns.get(i);\n\t\t\tlet strSysName = XmlUtils.getNodeAttr(xn, \"system-name\");\n\t\t\tlet strCollName = XmlUtils.getNodeAttr(xn, \"collection-name\");\n\t\t\tif (!StringUtils.IsEmptyString(strSysName) && !StringUtils.IsEmptyString(strCollName)) this.m_lstSysCollNames.put(strSysName, strCollName);\n\t\t} // Los nodos indican sustituciones de nombres de colecciones de sistema\n\t\t// A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t\t// Cargar los CSS que haya definidos en la aplicacin\n\t\txcns = xapp.SelectNodes(\"style\");\n\t\tfor (let i = 0; i < xcns.count(); i++) {\n\t\t\t// Cada CSS lo adicionamos a la lista\n\t\t\tlet xn = xcns.get(i);\n\n\t\t\t//TODO ADD TAG Juan Carlos, respetar el atributo encoding en los CSS.\n\t\t\tlet strCharsetEncoding = xn.getAttrValue(\"encoding\");\n\n\t\t\tlet strName = xn.getAttrValue(\"url\");\n\t\t\t// M11072901: Modificaciones al mecanismo de CSS para adaptarse a condiciones visuales.\n\t\t\t// La condicin de carga.\n\t\t\tlet strCondition = xn.getAttrValue(\"conditions\");\n\n\t\t\t/*\n\t\t\t * 27/07/2018\n\t\t\t * Nuevo atributo strict-mode que obliga a tener un CSS bien formado. Sirve para avisar\n\t\t\t * de errores gordos como la falta de un punto y coma (esto provocaba que se le dieran\n\t\t\t * valores errneos al framework). Se deja por defecto a false porque hay muchas apps\n\t\t\t * que ya dependen del comportamiento antiguo, que dejaba pasar CSSs rotos.\n\t\t\t *\n\t\t\t * Usar este atributo tambin requiere escapear como en la web los dos puntos si se\n\t\t\t * usan como valor de un atributo en CSS, pues se usa como separador.\n\t\t\t * Por ejemplo, title:Hola:Mundo; debe escribirse como title:Hola\\:Mundo;\n\t\t\t */\n\t\t\tlet bStrictMode = StringUtils.ParseBoolValue(xn.getAttrValue(\"strict-mode\"), false);\n\t\t\t// A14102301: Incorporacin de un mecanismo de control de integridad para desarrollos.\n\t\t\t// Verificar el fichero si es que vale la cosa\n\t\t\t// TODO: Luis ver si esto es necesario\n\t\t\t// if (m_checker !=null)\n\t\t\t// {// Verificar\n\t\t\t//     if (!m_checker.checkFileIntegrity(strName, this.m_strAppPath))\n\t\t\t//         return false;\n\t\t\t// }// Verificar\n\t\t\tlet css = this.LoadAndSaveNewCssFile(strName, strCharsetEncoding, bStrictMode);\n\t\t\t// TODO: Luis ver si esto del cacheado aqui tiene sentido\n\t\t\t// File fUnparsedCss = new File(m_loader.getIncludeFilePath(strName, mIsEncryptFiles));\n\t\t\t// File fCachedCss = new File(GetCachedCssDirectory(), strName);\n\t\t\t// XoneCssParser css;\n\t\t\t// if (!fCachedCss.exists()) {\n\t\t\t//     // No hay CSS serializado en disco, parsearlo por primera vez y guardarlo.\n\t\t\t//     css = LoadAndSaveNewCssFile(fUnparsedCss, fCachedCss, strName, strCharsetEncoding, bStrictMode);\n\t\t\t// } else {\n\t\t\t//     try {\n\t\t\t//         // Restauramos el CSS.\n\t\t\t//         PersistableBundleCompat bundle = PersistableBundleCompat.restoreFromBinaryFile(fCachedCss, XoneCssParser.PARCELABLE_VERSION);\n\t\t\t//         String sCachedCssCrc = bundle.getString(XoneCssParser.BUNDLE_KEY_CRC);\n\t\t\t//         String sUnparsedCssCrc = Utils.getFileChecksum(fUnparsedCss, \"crc\", false);\n\t\t\t//         if (TextUtils.equals(sCachedCssCrc, sUnparsedCssCrc)) {\n\t\t\t//             // El checksum del original no ha cambiado. Devolverlo tal cual.\n\t\t\t//             css = bundle.getParcelable(XoneCssParser.BUNDLE_KEY_DATA);\n\t\t\t//             if (css.isStrictMode() != bStrictMode) {\n\t\t\t//                 /*\n\t\t\t//                  * El cacheado tena strict-mode pero el nodo dice que no o viceversa.\n\t\t\t//                  * Volver a parsear.\n\t\t\t//                  */\n\t\t\t//                 css = LoadAndSaveNewCssFile(fUnparsedCss, fCachedCss, strName, strCharsetEncoding, bStrictMode);\n\t\t\t//             }\n\t\t\t//         } else {\n\t\t\t//             // El checksum del original es distinto. Parsearlo de nuevo y guardarlo.\n\t\t\t//             css = LoadAndSaveNewCssFile(fUnparsedCss, fCachedCss, strName, strCharsetEncoding, bStrictMode);\n\t\t\t//         }\n\t\t\t//     } catch (CssParseException ex) {\n\t\t\t//         throw ex;\n\t\t\t//     } catch (Exception ex) {\n\t\t\t//         /*\n\t\t\t//          * Error al deserializar el fichero. La versin del fichero que espera este\n\t\t\t//          * framework es distinta a la guardada. Borramos el cacheado y reintentamos\n\t\t\t//          * parseo. Podra ocurrir tambin si se ha actualizado el SO. Eso en particular\n\t\t\t//          * nunca lo he visto ocurrir.\n\t\t\t//          */\n\t\t\t//         ex.printStackTrace();\n\t\t\t//         if (!fCachedCss.delete()) {\n\t\t\t//             throw new IOException(\"Cannot delete cached CSS file!\");\n\t\t\t//         }\n\t\t\t//         css = LoadAndSaveNewCssFile(fUnparsedCss, fCachedCss, strName, strCharsetEncoding, bStrictMode);\n\t\t\t//     }\n\t\t\t// }\n\t\t\t// Adicionar a la lista (si aplica, claro)\n\t\t\tif (StringUtils.IsEmptyString(strCondition)) {\n\t\t\t\tthis.m_lstCssList.push(css);\n\t\t\t} else {\n\t\t\t\t// De lo contrario tiene condicin\n\t\t\t\t// M11072901: Modificaciones al mecanismo de CSS para adaptarse a condiciones visuales.\n\t\t\t\tlet list = this.m_lstConditionCssList.get(strCondition);\n\t\t\t\tif (list == null) {\n\t\t\t\t\t// Crear y adicionar\n\t\t\t\t\tlist = new Array<XoneCssParser>();\n\t\t\t\t\tthis.m_lstConditionCssList.put(strCondition, list);\n\t\t\t\t}\n\t\t\t\tlist.push(css);\n\t\t\t}\n\t\t\t// En cualquiera de los casos tenemos CSS\n\t\t\tthis.m_bHasStylesheets = true;\n\t\t}\n\t\tthis.addEntryPointCollection(this.m_xmlAppNode.selectSingleNode(\"entry-point\"), this.m_xmlAppNode.getAttrValue(\"entry-point\"));\n\t\tthis.addLoginCollection(this.m_xmlAppNode.selectSingleNode(\"login-coll\"), this.m_xmlAppNode.getAttrValue(\"login-coll\"));\n\t\t// Completo\n\t\treturn true;\n\t}\n\n\tprivate LoadAndSaveNewCssFile(strName: string, strCharsetEncoding: string, bStrictMode: boolean): XoneCssParser {\n\t\treturn this.LoadNewCssFile(strName, strCharsetEncoding, bStrictMode);\n\t\t// PersistableBundleCompat bundle = new PersistableBundleCompat();\n\t\t// String sUnparsedCssCrc = Utils.getFileChecksum(fUnparsedCss, \"crc\", false);\n\t\t// bundle.putString(XoneCssParser.BUNDLE_KEY_CRC, sUnparsedCssCrc);\n\t\t// bundle.putParcelable(XoneCssParser.BUNDLE_KEY_DATA, css);\n\t\t// bundle.saveToBinaryFile(fCachedCss, XoneCssParser.PARCELABLE_VERSION);\n\t\t// return css;\n\t}\n\n\tprivate LoadNewCssFile(strName: string, strCharsetEncoding: string, bStrictMode: boolean): XoneCssParser {\n\t\tlet is = this.m_loader.LoadFile(this.getSourcePath(strName), this.mIsEncryptFiles);\n\t\tif (is == null) {\n\t\t\tthrow new XoneGenericException(-100, \"File not Found: \" + strName);\n\t\t}\n\t\ttry {\n\t\t\treturn new XoneCssParser(strName, is, strCharsetEncoding, bStrictMode);\n\t\t} catch (e) {\n\t\t\t/*\n\t\t\t * Juan Carlos\n\t\t\t * Cambio el mensaje. Esto puede no ser un error de sintaxis, y si no lo es puede\n\t\t\t * confundir al programador.\n\t\t\t */\n\t\t\tlet sMessage = Utils.getThrowableMessage(e);\n\t\t\tthrow new XoneGenericException(-100, e, \"Error loading CSS file: \" + strName + \"\\r\\n\" + sMessage);\n\t\t}\n\t}\n\n\tpublic async getCollection(name: string): Promise<XoneDataCollection> {\n\t\tif (TextUtils.isEmpty(name)) {\n\t\t\t//throw new IllegalArgumentException(\"Empty collection name argument in appData.getCollection()\");\n\t\t}\n\t\t//let a=import(CollName)\n\t\t// Si la tiene en lista, la devuelve tal cual...\n\t\tif (this.m_lstCollections.containsKey(name)) {\n\t\t\tlet dataCollection = this.m_lstCollections.get(name);\n\t\t\tif (dataCollection == null) {\n\t\t\t\tUtils.DebugLog(\n\t\t\t\t\tUtils.TAG_FRAMEWORK,\n\t\t\t\t\t\"AppData.GetCollection(): Collection list contains a key for \" + name + \" but it is null. AppData hashCode: \" + this.hashCode()\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn dataCollection;\n\t\t}\n\t\t// Si no la tiene, intenta cargarla\n\t\treturn await this.LoadCollection(name);\n\t}\n\n\tpublic async LoadCollection(CollName: string): Promise<XoneDataCollection> {\n\t\t// Si tiene definido un filtro de collprops, aplicarlo para buscar la coleccion en el mappings\n\t\tlet xc = null;\n\t\t// Dentro de la lista de colecciones, buscar la que nos interesa\n\t\t// Buscar el collprops\n\t\t// F11081101: Si se pide GetCollection sin haber cargado el mappings hay mooa.\n\t\t// Si el mappings es null entonces nos explotamos...\n\t\tif (this.m_xmlConfigFile == null) {\n\t\t\tif (TextUtils.isEmpty(CollName)) {\n\t\t\t\tUtils.DebugLog(\n\t\t\t\t\tUtils.TAG_FRAMEWORK,\n\t\t\t\t\t\"AppData.LoadCollection(): Error loading collection, empty collection name parameter, mappings xml object is null. AppData hashCode: \"\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tUtils.DebugLog(\n\t\t\t\t\tUtils.TAG_FRAMEWORK,\n\t\t\t\t\t\"AppData.LoadCollection(): Error loading collection \" + CollName + \", mappings xml object is null. AppData hashCode: \" + this.hashCode()\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\t// const collProps = this.m_xmlConfigFile.SelectSingleNode(\"collprops\"); // this.m_jsonConfigFile.xml?.collprops;\n\t\t// if (collProps !== null)\n\t\t//     xc = collProps.coll?.find( x=> x[\"@name\"]===CollName);\n\n\t\tconst collProps = this.m_xmlConfigFile.SelectSingleNode(\"collprops\");\n\t\tif (collProps != null) xc = collProps.SelectSingleNode(\"coll\", \"name\", CollName);\n\t\tlet result = null;\n\t\tlet version = 2;\n\t\tif (xc == null) {\n\t\t\t// No se encuentra la coleccion\n\t\t\t// F11051802: No se pueden incluir referencias nulas en un hashtable.\n\t\t\t// this.m_lstCollections.put(CollName, null);\n\t\t\t// A12062601: Modificar el picaoto para no tener que incluir la coleccion en el mappings.\n\t\t\t// Tratamos de buscarla fuera como Collname.xml\n\t\t\tresult = await this.LoadExternalCollection(CollName);\n\t\t\tif (null == result) {\n\t\t\t\tUtils.DebugLog(\n\t\t\t\t\tUtils.TAG_FRAMEWORK,\n\t\t\t\t\t\"AppData.LoadCollection(): Collection \" + CollName + \" not found as an external file. AppData hashCode: \" + this.hashCode()\n\t\t\t\t);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\txc = result.second;\n\t\t\tversion = result.first;\n\t\t} // No se encuentra la coleccion\n\t\t// Ahora tenemos que construir la coleccion\n\t\tif (this.m_lstCollections.containsKey(CollName)) return this.m_lstCollections.get(CollName);\n\t\tconst coll = new XoneDataCollection(this, xc, version);\n\t\t// Incluirla en la lista y devolverla\n\t\tthis.m_lstCollections.put(CollName, coll);\n\t\t// Si no se pueden cargar los datos bosicos, nos largamos\n\t\tif (!(await coll.Load())) {\n\t\t\tthis.m_lstCollections.delete(CollName);\n\t\t\tUtils.DebugLog(\n\t\t\t\tUtils.TAG_FRAMEWORK,\n\t\t\t\t\"AppData.LoadCollection(): Collection \" + CollName + \" found but DataCollection.Load() failed. AppData hashCode: \" + this.hashCode()\n\t\t\t);\n\t\t\treturn null;\n\t\t}\n\t\treturn coll;\n\t}\n\n\tprivate async LoadExternalCollection(name: string): Promise<any> {\n\t\tvar file = await this.m_fileManager.readFileAsync(this.m_strAppPath + \"/\" + name + \".xne\");\n\t\tconst doc = XmlDocument.getInstance();\n\t\tdoc.Deserialize(null, this.m_strAppPath, file, true);\n\t\tlet node;\n\t\tif (!(node = doc.getRootNode())?.getName().equals(\"coll\")) node = doc.getRootNode().SelectSingleNode(\"coll\");\n\t\treturn { first: 2, second: node }; //JSON.parse(file.toString())};\n\t}\n\n\tpublic hashCode(): string {\n\t\treturn this._objectID.toString();\n\t}\n\n\tpublic getCompany(): IXoneObject {\n\t\treturn this.m_company;\n\t}\n\n\tpublic GetCollPropValueCache(CollName: string, NodeType: string = \"coll\", NodeName: string = \"values\"): Hashtable<string, any> {\n\t\tif (!this.m_bCacheAttrValues) return null;\n\t\tlet collCache: Hashtable<string, Hashtable<string, Hashtable<string, string>>>;\n\n\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\t// Esto puede ser problemtico si hay mltiples accesos\n\t\t//synchronized (this.m_lstCollPropValueCaches)\n\t\t{\n\t\t\tif (TextUtils.isEmpty(CollName)) {\n\t\t\t\t/*\n\t\t\t\t * 09/07/2018 Juan Carlos\n\t\t\t\t * Esto puede ocurrir por accidente y no es recuperable, as que mejor lanzar una\n\t\t\t\t * excepcin clara.\n\t\t\t\t */\n\t\t\t\tthrow new Exception(\"Empty collection name parameter passed to GetCollPropValueCache\");\n\t\t\t}\n\t\t\tif (!this.m_lstCollPropValueCaches.containsKey(CollName)) {\n\t\t\t\t// No existe\n\t\t\t\tcollCache = new Hashtable<string, Hashtable<string, Hashtable<string, string>>>();\n\t\t\t\tthis.m_lstCollPropValueCaches.put(CollName, collCache);\n\t\t\t} // No existe\n\t\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\t\t// Quitamos el else y cogemos siempre el que haya.... fuera nuestro o no...\n\t\t\tcollCache = this.m_lstCollPropValueCaches.get(CollName);\n\t\t}\n\t\t// Ahora buscamos la coleccin de tipos de nodo\n\t\tlet nodeTypeCache: Hashtable<string, Hashtable<string, string>>;\n\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\t//synchronized (collCache)\n\t\t{\n\t\t\tif (!collCache.containsKey(NodeType)) {\n\t\t\t\t// No existe\n\t\t\t\tnodeTypeCache = new Hashtable<string, Hashtable<string, string>>();\n\t\t\t\tcollCache.put(NodeType, nodeTypeCache);\n\t\t\t} // No existe\n\t\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\t\t// Quitamos el else y cogemos el que haya... que haber tiene que haber...\n\t\t\tnodeTypeCache = collCache.get(NodeType);\n\t\t}\n\t\t// Ahora el nombre del nodo\n\t\tlet nodeNameCache: Hashtable<string, string>;\n\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\t//synchronized (nodeTypeCache)\n\t\t{\n\t\t\tif (TextUtils.isEmpty(NodeName)) {\n\t\t\t\t/*\n\t\t\t\t * 09/07/2018 Juan Carlos\n\t\t\t\t * Esto puede ocurrir por accidente y no es recuperable, as que mejor lanzar una\n\t\t\t\t * excepcin clara.\n\t\t\t\t */\n\t\t\t\tthrow new NullPointerException(\"Empty node name parameter passed to GetCollPropValueCache\");\n\t\t\t}\n\t\t\tif (!nodeTypeCache.containsKey(NodeName)) {\n\t\t\t\t// No existe\n\t\t\t\tnodeNameCache = new Hashtable<string, string>();\n\t\t\t\tnodeTypeCache.put(NodeName, nodeNameCache);\n\t\t\t} // No existe\n\t\t\t// F13022103: La gestin de caches de atributos debe tener en cuenta la concurrencia.\n\t\t\t// Quitamos el else y cogemos el que haya sea de quien sea\n\t\t\tnodeNameCache = nodeTypeCache.get(NodeName);\n\t\t}\n\t\t// Finalmente devolvemos lo que sea\n\t\treturn nodeNameCache;\n\t}\n\n\tGetCollPropUndefinedValues(CollName: string) {\n\t\t// K12050901: Permitir activar o desactivar las caches de valores de atributos.\n\t\tif (!this.m_bCacheAttrValues) return null;\n\t\tif (this.m_lstCollPropUndefinedValues == null) {\n\t\t\treturn null;\n\t\t}\n\t\tif (this.m_lstCollPropUndefinedValues.containsKey(CollName)) return this.m_lstCollPropUndefinedValues.get(CollName);\n\t\tlet cache = new Array<string>();\n\t\tthis.m_lstCollPropUndefinedValues.put(CollName, cache);\n\t\treturn cache;\n\t}\n\n\tpublic getMessageHolder(): IMessageHolder {\n\t\treturn this.m_messages;\n\t}\n\n\tpublic getConfigFile(): XmlNode {\n\t\treturn this.m_xmlConfigFile;\n\t}\n\t/**\n\t * O13030601: Optimizaciones en la bsqueda de CSS para atributos.\n\t * Pica la cadenilla de condiciones visuales y le hace un trabajillo de acondicionamiento para\n\t * que no haya que parsear las cadenas en cada llamada.\n\t */\n\tprivate ParseVisualConditions(): void {\n\t\t// Lo primero es ver si ya esta condicin est seteada\n\t\tconst strTmp = this.m_strVisualConditions.trim();\n\t\tif (StringUtils.IsEmptyString(strTmp)) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.m_lstVisualCondDescriptors.containsKey(strTmp)) {\n\t\t\treturn;\n\t\t}\n\t\t// De lo contrario hay que parsear...\n\t\tconst parts = this.m_strVisualConditions.split(\":\");\n\t\t// Y ahora con esto hay que hacer combinaciones vlidas...\n\t\tlet nStart = 0,\n\t\t\tnEnd = parts.length - 1;\n\t\tconst lstCombinations = new Array<string>();\n\t\twhile (nStart <= nEnd) {\n\t\t\tthis.CreateVisualCombinations(parts, nStart++, nEnd--, lstCombinations);\n\t\t}\n\t\tthis.m_lstVisualCondDescriptors.put(strTmp, lstCombinations);\n\t}\n\n\t/// <summary>\n\t/// O13030601: Optimizaciones en la bsqueda de CSS para atributos.\n\t/// Dada una lista de partes de condiciones visuales arma combinaciones vlidas para buscar CSS dentro de las listas\n\t/// de condiciones visuales que se cargaron al inicio de la aplicacin.\n\t/// </summary>\n\t/// <param name=\"Parts\">Arreglo de cadenas con los pedazos que forman la combinacin a analizar.</param>\n\t/// <param name=\"StartIndex\">Indice (0-based) en el cual se comienza a armar la combinacin.</param>\n\t/// <param name=\"EndIndex\">Indice (0-based) en el que termina la combinacin.</param>\n\t/// <param name=\"Destination\">Lista en la que se colocan las combinaciones.</param>\n\tprivate CreateVisualCombinations(Parts: string[], StartIndex: number, EndIndex: number, Destination: Array<string>) {\n\t\t// Lo primero es quitar por el final\n\t\tlet sb: StringBuilder;\n\t\t// Caso especial... si son iguales es solo ese\n\t\tif (StartIndex == EndIndex) {\n\t\t\t// Uno y nos vamos\n\t\t\tif (!Destination.contains(Parts[StartIndex])) Destination.push(Parts[StartIndex]);\n\t\t\treturn;\n\t\t} // Uno y nos vamos\n\t\tlet nStart = StartIndex,\n\t\t\tnEnd = EndIndex;\n\t\t// La segunda vuelta la damos de atrs palantre...\n\t\twhile (nEnd >= StartIndex) {\n\t\t\t// Primera vuelta\n\t\t\tsb = new StringBuilder();\n\t\t\tfor (let i = nEnd; i >= StartIndex; i--) {\n\t\t\t\t// Adicionar\n\t\t\t\tif (!sb.isEmpty()) sb.insert(0, \":\");\n\t\t\t\tsb.insert(0, Parts[i]);\n\t\t\t} // Adicionar\n\t\t\tlet sTmp = Utils.EMPTY_STRING;\n\t\t\tif (!Destination.contains((sTmp = sb.toString()))) Destination.push(sTmp);\n\t\t\tnEnd--;\n\t\t} // Primera vuelta\n\t\twhile (nStart <= EndIndex) {\n\t\t\t// Segunda vuelta\n\t\t\tsb = new StringBuilder();\n\t\t\tfor (let i = nStart; i <= EndIndex; i++) {\n\t\t\t\t// Componer\n\t\t\t\tif (!sb.isEmpty()) sb.append(\":\");\n\t\t\t\tsb.append(Parts[i]);\n\t\t\t} // Componer\n\t\t\tlet sTmp = Utils.EMPTY_STRING;\n\t\t\tif (!Destination.contains((sTmp = sb.toString()))) Destination.push(sTmp);\n\t\t\tnStart++;\n\t\t} // Segunda vuelta\n\t}\n\n\tpublic setVisualConditions(Value: string, IsFixed: boolean): void {\n\t\tconst strValue: string = Value || Utils.EMPTY_STRING;\n\n\t\tif (IsFixed) this.m_strFixedVisualCondition = this.m_strVisualConditions = strValue;\n\t\telse this.m_strVisualConditions = this.m_strFixedVisualCondition + \":\" + strValue;\n\t\t// Limpiar las caches de atributillos\n\t\tthis.m_lstCollPropValueCaches.clear();\n\t\tthis.m_lstCollPropUndefinedValues.clear();\n\t\t// F13061907: Limpieza de caches de atributos a nivel de objeto en caso de tenerlas.\n\t\t// Limpiar las caches locales de los objetos.\n\t\tthis.m_lstCollections.values().forEach((coll) => {\n\t\t\t// TODO: Limpiar la cache de cadaobjeto\n\t\t\tfor (var i = 0; i < coll.getCount(); i++) coll.get(i).then((value) => value.ClearCaches());\n\t\t});\n\t\t// while (enm.hasMoreElements())\n\t\t// {// Recorrer y limpiar\n\t\t// \tString key =enm.nextElement();\n\t\t//     XoneDataCollection c =this.m_lstCollections.get(key);\n\t\t//     for (long i = 0; i < c.getCount(); i++)\n\t\t//         c.get(i).ClearCaches();\n\t\t// }// Recorrer y limpiar\n\t\t// O13030601: Optimizaciones en la bsqueda de CSS para atributos.\n\t\t// Ahora nos parseamos las condiciones visuales que haya para usarlas as.\n\t\tthis.ParseVisualConditions();\n\t}\n\n\t/**\n\t * ADD TAG Luis\n\t * Leer el visual conditions\n\t *\n\t * @return\n\t */\n\tpublic getCurrentVisualConditions(): string {\n\t\treturn this.m_strVisualConditions;\n\t}\n\n\tpublic getVisualConditionsDescriptors(): Hashtable<String, Array<String>> {\n\t\treturn this.m_lstVisualCondDescriptors;\n\t}\n\n\tpublic getCurrentVisualConditionsDescriptors(): Array<string> {\n\t\tif (this.m_lstVisualCondDescriptors.containsKey(this.m_strVisualConditions)) {\n\t\t\treturn this.m_lstVisualCondDescriptors.get(this.m_strVisualConditions);\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic getAppPath(): string {\n\t\treturn this.m_strAppPath;\n\t}\n\n\tpublic getSourcePath(FileName: string): string {\n\t\treturn this.m_strAppPath + \"/\" + FileName;\n\t}\n\n\tpublic setAppPath(value: string): void {\n\t\tthis.m_strAppPath = this.m_strFilesPath = value;\n\t\t// A12051002: Agregar FilesPath a la aplicacin para manejarlo en los scripts.\n\t\t// Calcular FilePath...\n\t\tif (!this.m_strFilesPath.endsWith(\"/\")) this.m_strFilesPath += \"/\";\n\t\tthis.m_strFilesPath += Utils.DEFAUT_FILES_PATH;\n\t}\n\n\tpublic setApplicationName(value: string): void {\n\t\tthis.m_strAppName = value;\n\t}\n\n\t// M2021022001: Luis Vamos a setear condiciones visuales con las macros para no hacer el trabajo dos veces\n\tprivate updateVisualConditionsFromMacro(MacroName: string, MacroValue: any) {\n\t\tswitch (MacroName) {\n\t\t\tcase \"##CURRENT_ORIENTATION##\":\n\t\t\t\tthis.setVisualConditions(MacroValue, false);\n\t\t\t\tbreak;\n\t\t\tcase \"##CURRENT_SIZE##\":\n\t\t\t\tthis.setVisualConditions(MacroValue, false);\n\t\t\t\tbreak;\n\t\t\tcase \"##DEVICE_OS##\":\n\t\t\t\tthis.setVisualConditions(MacroValue, true);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t// M11011001:\tIncluir macros globales y evaluacin de dichas macros para IMEI y dems.\n\t// Funciones para obtener y setear una macro global\n\tpublic setGlobalMacro(MacroName: string, MacroValue: any) {\n\t\tif (this.m_lstGlobalMacros == null) this.m_lstGlobalMacros = new Hashtable<string, any>();\n\t\tthis.m_lstGlobalMacros.put(MacroName, MacroValue);\n\t\tthis.updateVisualConditionsFromMacro(MacroName, MacroValue);\n\t}\n\n\t/// M11011001:\tIncluir macros globales y evaluacin de dichas macros para IMEI y dems.\n\t// Devuelve el valor de una macro global\n\tpublic getGlobalMacro(MacroName: string): any {\n\t\tif (this.m_lstGlobalMacros == null) return null;\n\t\t// Si no est en lista, NULL patrs\n\t\tif (!this.m_lstGlobalMacros.containsKey(MacroName)) return null;\n\t\treturn this.m_lstGlobalMacros.get(MacroName);\n\t}\n\n\tpublic GetAllGlobalMacros(): Hashtable<string, any> {\n\t\tlet mapCopy = new Hashtable<string, any>();\n\t\tif (this.m_lstGlobalMacros == null || this.m_lstGlobalMacros.length <= 0) {\n\t\t\treturn mapCopy;\n\t\t}\n\t\tthis.m_lstGlobalMacros.entrySet().forEach((entry) => mapCopy.put(entry[0], entry[1]));\n\t\t// Set<Entry<String, String>> entries = m_lstGlobalMacros.entrySet();\n\t\t// for (Entry<String, String> entry : entries) {\n\t\t//     String sKey = entry.getKey();\n\t\t//     String sValue = entry.getValue();\n\t\t//     mapCopy.put(sKey, sValue);\n\t\t// }\n\t\treturn mapCopy;\n\t}\n\n\t/**\n\t *  Carga los datos de la empresa actual\n\t *  @param Company\t\t\t\tEmpresa que se quiere setear como activa.\n\t *  @return\t\t\t\t\t\tDevuelve TRUE si los datos de la empresa se cargan correctamente.\n\t */\n\tprotected LoadCompanyData(Company: IXoneObject): void {\n\t\t//\n\t\t// Estas acciones solamente tienen sentido en caso de que el manejo sea interno\n\t\t// Si el programador lo esto manipulando desde fuera, no deben tocarse sus datos\n\t\t// Por eso son los dos IFES que vienen debajo...\n\t\t// Si haboa otra empresa tenemos que soltarla. Ya se vero mos\n\t\t// alante por quo...\n\t\tif (!this.m_bExternalEntIdColl) this.m_strEntIdColl = null;\n\n\t\tif (!this.m_bExternalEntIdLevel) this.m_strEntIdLevel = null; // Cadena de empresas por encima y al nivel de esta\n\t\t//\n\t\tif (!this.m_bExternalEntIdOwner) this.m_strEntIdOwner = null; // Empresa propietaria\n\n\t\tif ((this.m_company = Company) != null) {\n\t\t\t// Algo tiene\n\t\t\tthis.m_strEntTable = Company.getObjectName();\n\t\t\tthis.m_strEntPk = Company.getIdFieldName();\n\t\t\t// K11010501:\tModificaciones para la version 1.5 de Android.\n\t\t\tthis.m_nEntPkType = StringUtils.ParseBoolValue(Company.getOwnerCollection().CollPropertyValue(\"stringkey\"), false) ? 1 : 0;\n\t\t\t//\n\t\t\t// Prepara la cadenilla con las empresas que conforman el\n\t\t\t// grupo de esta empresa y sus hijos\n\t\t\t// Generar las cadenas que se usaron para los filtros\n\t\t\tif (!this.m_bExternalEntIdColl) this.m_strEntIdColl = this.GenerateEntIdColl(this.m_company.GetObjectIdString(true));\n\t\t\t//\n\t\t\t// Prepara la cadena con las empresas que eston al mismo nivel que esta\n\t\t\t// y las que eston por encima\n\t\t\tif (!this.m_bExternalEntIdLevel) this.m_strEntIdLevel = this.GenerateEntIdLevel(this.m_company.GetObjectIdString(true));\n\t\t\t//\n\t\t\tif (!this.m_bExternalEntIdOwner) this.m_strEntIdOwner = this.GenerateEntIdOwner();\n\t\t} // Algo tiene\n\t\t// Almacenar la empresa\n\t\tthis.m_company = Company;\n\t\t// Sacar la moneda de la empresa\n\t\t//this.m_currency = this.m_company.ObjectItem(\"IDMONEDA\");\n\t\t// Seoalar en la empresa el ID del usuario a la forma antigua...\n\t\tif (this.m_user != null) this.m_company.put(\"MAP_IDCURRENTUSER\", this.m_user.getId());\n\t\t// Completo\n\t}\n\tGenerateEntIdOwner(): string {\n\t\treturn Utils.EMPTY_STRING;\n\t}\n\tGenerateEntIdLevel(arg0: string): string {\n\t\treturn this.m_company.get(\"ID\");\n\t}\n\tGenerateEntIdColl(arg0: string): string {\n\t\treturn this.m_company.get(\"ID\");\n\t}\n\n\t/**\n\t * Elimina la empresa actual.\n\t */\n\tprivate clearCompanyData() {\n\t\tthis.m_strEntIdColl = null;\n\t\tthis.m_strEntIdLevel = null;\n\t\tthis.m_strEntIdOwner = null;\n\t\tthis.m_company = null;\n\t\tthis.m_strEntTable = null;\n\t\tthis.m_strEntPk = null;\n\t\tthis.m_nEntPkType = 0;\n\t\tthis.m_currency = null;\n\t}\n\n\t/// Evala la macro cuyo nombre se pasa como parmetro.\n\t/// <param name=\"MacroName\">Nombre de la macro que se quiere evaluar.</param>\n\tpublic EvaluateMacro(MacroName: string): string {\n\t\tconst FunctionName = \"XoneApplication::EvaluateMacro\";\n\t\tif (this.m_lstGlobalMacros.containsKey(MacroName)) return this.m_lstGlobalMacros.get(MacroName);\n\t\tif (MacroName.startsWith(\"##USER_\")) return !this.m_user ? \"\" : this.m_user.ReplaceFieldValueMacros(MacroName, \"##USER_\");\n\t\tif (MacroName.equals(\"##ENTID##\")) return !this.m_company ? \"0\" : StringUtils.SafeToString(this.m_company.get(\"ID\"));\n\t\tif (MacroName.startsWith(\"##ENT_\")) return !this.m_company ? \"\" : this.m_company.ReplaceFieldValueMacros(MacroName, \"##ENT_\", false);\n\n\t\t//\n\t\t// Habr que mirar otros...\n\t\treturn MacroName;\n\t}\n\n\t// M11011001:\tIncluir macros globales y evaluacin de dichas macros para IMEI y dems.\n\t// Para sustituir macros globales\n\tpublic PrepareSqlString(Sentence: string): string {\n\t\t// Pos eso... si no tiene macros, pa qu revisar\n\t\tif (!Sentence.contains(\"##\")) return Sentence;\n\t\tthis.m_lstGlobalMacros.entries.forEach((value, key) => (Sentence = Sentence.replace(key, value)));\n\t\t// Enumeration<String> enm =this.m_lstGlobalMacros.keys();\n\t\t// String strTmp =Sentence;\n\t\t// while (enm.hasMoreElements())\n\t\t// {// Revisar cada una\n\t\t// \tString strName;\n\t\t// \tString strValue;\n\t\t// \tstrName =enm.nextElement();\n\t\t// \tstrValue =m_lstGlobalMacros.get(strName);\n\t\t// \tstrTmp =strTmp.replaceAll(strName, strValue);\n\t\t// }// Revisar cada una\n\t\t// Una vez terminado, devolver lo que sea\n\t\t// De lo contrario, la cadena con las sustituciones\n\t\treturn this.PrepareUserMacrosSqlString(Sentence);\n\t}\n\n\t// TODO: Luis\n\tpublic PrepareUserMacrosSqlString(Sentence: string): string {\n\t\t// Pos eso... si no tiene macros, pa qu revisar\n\t\tif (!Sentence.contains(\"##USER_\")) return Sentence;\n\t\ttry {\n\t\t\treturn this.m_user.ReplaceFieldValueMacros(Sentence, \"##USER_\");\n\t\t} catch (e) {\n\t\t\treturn Sentence;\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @param FileName\n\t * @param ClassName\n\t * @return\n\t */\n\tpublic FindStylesheetByFileAndClassName(FileName: string, ClassName: string): XoneCssRule {\n\t\tlet lstCssParsers = new Array<XoneCssParser>();\n\t\tthis.m_lstCssList.forEach((cssParser) => {\n\t\t\tlet sName = cssParser.getName();\n\t\t\tif (FileName.compareTo(sName) == 0) {\n\t\t\t\tlstCssParsers.push(cssParser);\n\t\t\t}\n\t\t});\n\t\t// for (let cssParser in this.m_lstCssList) {\n\t\t//     let sName = cssParser.getName();\n\t\t//     if (FileName.compareTo(sName) == 0) {\n\t\t//         lstCssParsers.add(cssParser);\n\t\t//     }\n\t\t// }\n\t\treturn this.FindStylesheetByClassNameList(ClassName, lstCssParsers);\n\t}\n\n\t/**\n\t * A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t * Obtiene una hoja de estilo basado en el nombre de clase que se pasa. Las hojas de estilo ltimas\n\t * redefinen a las primeras, por lo que la bsqueda empieza de atrs hacia adelante.\n\t * Opera recursivamente para aquellos estilos que tengan herencia.\n\t *\n\t * @param ClassName\t\tSelector de clase para buscar el estilo\n\t * @param AttrName\t\tNombre del atributo cuyo valor se quiere obtener.\n\t * @return\t\t\t\tDevuelve un estilo que contenga este atributo o NULL.\n\t */\n\tpublic FindStylesheetByClassName(ClassName: string, AttrName: string): XoneCssRule {\n\t\t// O12060701: Excepciones en la gestin de atributos para no buscarlos en los CSS.\n\t\t// Las excepciones no las buscamos\n\t\tif (ClassName.startsWith(\"coll.\") || ClassName.equals(\"coll\")) {\n\t\t\t// Coleccin\n\t\t\tif (this.m_lstCollExceptions.contains(AttrName)) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else if (ClassName.startsWith(\"prop.\") || ClassName.equals(\"prop\")) {\n\t\t\t// Prop\n\t\t\tif (this.m_lstPropExceptions.contains(AttrName)) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\tlet lstCssParsers: Array<XoneCssParser>;\n\t\tlet css: XoneCssRule;\n\t\t// M11072901: Modificaciones al mecanismo de CSS para adaptarse a condiciones visuales.\n\t\t// Lo primero que tenemos que hacer es ver si tenemos condiciones visuales. En este\n\t\t// caso tendremos que buscar primero en la lista apropiada.\n\t\tif (!StringUtils.IsEmptyString(this.m_strVisualConditions)) {\n\t\t\t// Buscar en esta lista\n\t\t\tif (this.m_lstConditionCssList != null && this.m_lstConditionCssList.length > 0) {\n\t\t\t\tlet str = this.m_strVisualConditions.trim();\n\t\t\t\tlet lstDescriptors = this.m_lstVisualCondDescriptors.get(str);\n\t\t\t\tif (lstDescriptors == null) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tfor (let index = 0; index < lstDescriptors.length; index++) {\n\t\t\t\t\tconst sDescriptor = lstDescriptors[index];\n\t\t\t\t\tif (this.m_lstConditionCssList.containsKey(sDescriptor)) {\n\t\t\t\t\t\t// Si encontramos lo que sea, nos vamos\n\t\t\t\t\t\tlstCssParsers = this.m_lstConditionCssList.get(sDescriptor);\n\t\t\t\t\t\tif (null != (css = this.FindStylesheetByClassAttrList(ClassName, AttrName, lstCssParsers))) {\n\t\t\t\t\t\t\treturn css;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Si llegamos aqu es que no hay condiciones visuales o que no han redefinido nada\n\t\tcss = this.FindStylesheetByClassAttrList(ClassName, AttrName, this.m_lstCssList);\n\t\treturn css;\n\t}\n\n\tprotected FindStylesheetByClassAttrList(ClassName: string, AttrName: string, listCss: Array<XoneCssParser>): XoneCssRule {\n\t\tif (listCss == null) {\n\t\t\treturn null;\n\t\t}\n\t\tlet k = listCss.length;\n\t\twhile (k > 0) {\n\t\t\t// Empezamos por el finalll\n\t\t\tk--;\n\t\t\tlet css = listCss[k];\n\t\t\tlet rule = css.getRuleBySelector(ClassName);\n\t\t\tif (rule != null) {\n\t\t\t\t// Bueno... al menos existe\n\t\t\t\tif (rule.contains(AttrName)) return rule;\n\t\t\t\t// De lo contrario puede que sea hija de otro que s lo implemente\n\t\t\t\tif (rule.contains(\"extends\")) {\n\t\t\t\t\t// Ver cul es la base\n\t\t\t\t\tlet strBase = rule.getRuleValue(\"extends\");\n\t\t\t\t\tlet base = this.FindStylesheetByClassName(strBase, AttrName);\n\t\t\t\t\tif (base != null) return base;\n\t\t\t\t} // Ver cul es la base\n\t\t\t} // Bueno... al menos existe\n\t\t} // Empezamos por el finalll\n\t\t// Estoooo no lo tenemos o no hay stylesheets.\n\t\treturn null;\n\t}\n\n\tprotected FindStylesheetByClassNameList(ClassName: string, CssList: Array<XoneCssParser>): XoneCssRule {\n\t\tlet k = CssList.length;\n\t\twhile (k > 0) {\n\t\t\tk--;\n\t\t\tlet css = CssList[k];\n\t\t\tlet rule = css.getRuleBySelector(ClassName);\n\t\t\tif (rule != null) {\n\t\t\t\treturn rule;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t * A11070701: Introduccin de los CSS en la maquinaria para poder parametrizar el mappings.\n\t *\n\t * @return\t\tTRUE si en la aplicacin hay al menos un CSS cargado.\n\t */\n\tpublic hasStylesheets(): boolean {\n\t\t// M11072901: Modificaciones al mecanismo de CSS para adaptarse a condiciones visuales.\n\t\t// Ahora tenemos el valor cacheado.\n\t\treturn this.m_bHasStylesheets;\n\t}\n\n\t/**\n\t * Devuelve la lista de cualificacin de campos de la coleccin cuyo nombre se pasa como parmetro.\n\t * @param CollName\t\tNombre de la coleccin cuya lista de cualificacin se quiere obtener.\n\t * @return\t\t\t\tDevuelve una tabla de cache para la coleccin cuyo nombre se pasa como parmetro.\n\t */\n\tpublic GetQualifyCache(CollName: string): Hashtable<string, string> {\n\t\t// Si ya la tiene, devolverla\n\t\tif (this.m_lstQualifyCaches.containsKey(CollName)) return this.m_lstQualifyCaches.get(CollName);\n\t\t// De lo contrario crearla\n\t\tlet cache = new Hashtable<string, string>();\n\t\tthis.m_lstQualifyCaches.put(CollName, cache);\n\t\treturn cache;\n\t}\n\n\t/**\n\t * F09052004:\tModificacin de las interfaces para implementar manejo de errores.\n\t * Implementacin de la funcin para registrar el error de ejecucin a nivel de script.\n\t * Se utiliza la variable de error XOne para almacenar estos datos.\n\t */\n\tpublic RegisterError(Code: number, Description: string): void {\n\t\t// K12060701: Modificaciones para permitir multithreading en los scripts y depuracin.\n\t\t// Gestionar las variables de error a nivel de thread\n\t\tlet error = this.getError();\n\t\tif (error == null) {\n\t\t\treturn;\n\t\t}\n\t\terror.setNumber(Code);\n\t\terror.setDescription(Description);\n\t\terror.setFailedSql(null);\n\t}\n\n\t/**\n\t * @return\t\t\tExpone el objeto de error de esta aplicacin\n\t */\n\tpublic getError(): XoneError {\n\t\t// K12060701: Modificaciones para permitir multithreading en los scripts y depuracin.\n\t\t// Para gestionar esto de manera que sea independiente para cada thread.\n\t\tif (this.m_error == null) {\n\t\t\treturn null;\n\t\t}\n\t\tlet error = this.m_error.pop();\n\t\tif (error == null) {\n\t\t\t// Lo creamos ahora\n\t\t\terror = new XoneError();\n\t\t\tthis.m_error.push(error);\n\t\t} // Lo creamos ahora\n\t\treturn error;\n\t}\n\n\tpublic ContainsError(): boolean {\n\t\tif (this.m_error == null) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this.m_error.length > 0;\n\t}\n\n\tpublic getAppNode(): XmlNode {\n\t\treturn this.m_xmlAppNode;\n\t}\n\n\tbind() {}\n\n\tcreateCollection(Name: string, SourceNode: XmlNode = null, version: number) {\n\t\tlet strCollName = Name;\n\t\tif (StringUtils.IsEmptyString(strCollName) && SourceNode) strCollName = SourceNode.getAttrValue(Utils.PROP_ATTR_NAME);\n\t\tif (StringUtils.IsEmptyString(strCollName)) return null;\n\t\t// Crearla siempre... si ya hay otra habr que machacarla\n\t\tlet coll: XoneDataCollection;\n\t\tif (this.m_lstCollections.containsKey(strCollName)) {\n\t\t\t// Existe\n\t\t\tcoll = this.m_lstCollections.get(strCollName);\n\t\t\tthis.m_lstCollections.delete(strCollName);\n\t\t} // Existe\n\t\tlet collProps = this.m_xmlConfigFile.SelectSingleNode(Utils.COLL_COLLPROPS);\n\t\tif (collProps == null) return null;\n\t\t// Buscamos el nodo en cuestin, si existe tendremos que reemplazarlo...\n\t\tlet oldNode = collProps.SelectSingleNode(Utils.COLL_COLL, Utils.PROP_ATTR_NAME, strCollName);\n\t\tif (oldNode != null) collProps.replaceChild(oldNode, SourceNode);\n\t\telse collProps.addChild(SourceNode, SourceNode.getName(), Utils.PROP_ATTR_NAME, strCollName);\n\t\t// Ahora tenemos que construir la coleccin\n\t\tcoll = new XoneDataCollection(this, SourceNode, version);\n\t\t// Si no se pueden cargar los datos bsicos, nos largamos\n\t\tif (!coll.Load()) return null;\n\t\t// Incluirla en la lista y devolverla\n\t\tthis.m_lstCollections.put(strCollName, coll);\n\t\treturn coll;\n\t}\n\n\t/**\n\t * @return\t\t\tDevuelve TRUE si la aplicacin tiene activa la rplica selectiva (solo modifican la cola las colecciones marcadas)\n\t */\n\tpublic getSelectiveReplication(): boolean {\n\t\treturn this.m_bSelectiveReplication;\n\t}\n\n\t/**\n\t * Asigna valor a la bandera que indica si la aplicacin tiene activa la rplica selectiva.\n\t * @param value\t\tTRUE para habilitar la rplica selectiva, FALSE para usar rplica normal (todo replica)\n\t */\n\tpublic setSelectiveReplication(value: boolean) {\n\t\tthis.m_bSelectiveReplication = value;\n\t}\n\n\tcreateObject(sClassId: string) {\n\t\t// TODO: Luis esto son los creadores de objetos\n\t\treturn {};\n\t}\n\n\tdecryptString(value: string) {}\n\n\tencryptString(value: string) {}\n\n\terror() {}\n\n\texecuteSql(sql: string) {}\n\n\tfailWithMessage(Code: number, Message: string) {\n\t\t/// K12060701: Modificaciones para permitir multithreading en los scripts y depuracin.\n\t\t// Las variables de error van por threads.\n\t\tswitch (Message) {\n\t\t\tcase Utils.FAIL_EXITAPP:\n\t\t\t\tthis.getUserInterface().exitApp();\n\t\t\t\tbreak;\n\t\t\tcase Utils.FAIL_EXIT:\n\t\t\t\tthis.getUserInterface().exit();\n\t\t\t\tbreak;\n\t\t\tcase Utils.FAIL_LOGIN:\n\t\t\t\tthis.getUserInterface().login();\n\t\t\t\tbreak;\n\t\t\tcase Utils.MACRO_STARTREPLICA:\n\t\t\t\tthis.getUserInterface().startReplica();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlet error = this.getError();\n\t\t\t\terror.setNumber(Code);\n\t\t\t\terror.setDescription(Message);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tgetAllowedEnterprises() {}\n\n\tgetAllowedUsers() {}\n\n\tpublic getCollectionCount(): number {\n\t\treturn this.m_lstCollections.length;\n\t}\n\n\tgetConnString() {}\n\n\tpublic getCurrentEnterprise(): IXoneObject {\n\t\treturn this.m_company;\n\t}\n\n\tgetFilesPath() {\n\t\treturn this.m_strFilesPath;\n\t}\n\n\tgetReplicationId() {}\n\n\tgetReservedObject() {}\n\n\tisReplicating() {}\n\n\tpopValue() {}\n\n\tpushValue(objData: object) {\n\t\tthis.m_ui.openEditView(objData);\n\t}\n\n\tpushValueAndExit(objData: object) {}\n\n\tregisterPush() {}\n\n\tsafeRound(value: number) {}\n\n\tsetConnString(param0) {}\n\n\tsetIsReplicating(booleano) {}\n\n\tvariantToString(param0) {}\n\n\twriteConsoleString(param0) {}\n}\n","import IXoneApp from \"../Interfaces/IXoneApp.js\";\nimport { __SCRIPT_WRAPPER,__SCRIPT_WRAPPERASYNC } from \"../xone/source/scripts/__SCRIPT_WRAPPER__.js\";\nimport ScriptContext from \"./ScriptContext.js\";\n\nexport default class XOneJavascript {\n    public static run(appData: IXoneApp, script: any, ctx: ScriptContext, mapRuntimeObjects: any,Arguments?:any, sMessage: string=\"\") {\n        __SCRIPT_WRAPPER(appData,appData.getUserInterface(),ctx.getObjectHost(),script,Arguments);\n    }\n\n    public static async runAsync(appData: IXoneApp, script: any, ctx: ScriptContext, mapRuntimeObjects: any,Arguments?:any, sMessage: string=\"\") {\n        return __SCRIPT_WRAPPERASYNC(appData,appData.getUserInterface(),ctx.getObjectHost(),script,Arguments);\n    }\n\n}","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ChartPie.vue?vue&type=style&index=0&id=6dd6073e&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Container.vue?vue&type=style&index=0&id=40b03d14&scoped=true&lang=css\""],"sourceRoot":""}