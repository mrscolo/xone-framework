<?xml version="1.0" encoding="utf-8"?>
<coll name="EspecialChat" title="" filter="" sort="" special="true">
  <group name="HEADER" id="10" class="groupfixed_header" />
  <frame group="10" name="frmtitulo_header" class="frmsuperior" bgcolor="#ff0000" />
  <prop group="10" frame="frmtitulo_header" name="MAP_SALIR" type="B" class="btvolversuper" lmargin="0" newline="false" />
  <prop group="10" frame="frmtitulo_header" name="MAP_COLORACTIVO" type="T" visible="0" />
  <group name="GrupoChats" id="1" height="1160p" />
  <frame group="1" name="frmTotal" height="100%" width="100%" />
  <frame group="1" frame="frmTotal" name="frmsuperiortitulo" width="100%" height="96p" tmargin="0" />
  <prop group="1" frame="frmsuperiortitulo" name="MAP_TITULO" type="TL" title="Chats" fontbold="true" forecolor="#333333" width="528p" height="100%" lmargin="96p" align="center" />
  <prop group="1" frame="frmsuperiortitulo" name="MAP_NUEVO_CHAT" img="icon_new_chat.png" type="B" title="Nuevo chat" labelwidth="0" width="96p" height="96p" tmargin="-6p" newline="false" method="ExecuteNode(AccionesChatEspecial('nuevochat'))" />
  <prop group="1" frame="frmTotal" name="MAP_SPACE2" visible="7" type="TL" width="720p" height="3p" size="255" bgcolor="#cccccc" title=" " />
  <frame group="1" frame="frmTotal" name="frmInfoCentral" height="1061p" width="100%" />
  <prop group="1" frame="frmInfoCentral" name="Chat" contents="Chat" viewmode="recyclerview" bgcolor="#ffffff" type="Z" width="100%" height="100%" tmargin="0" lmargin="0" rmargin="0" bmargin="0" />
  <contents name="Chat" src="Chat" />
  <frame group="1" name="frmnuevochat" animation-in-delay="250" animation-out-delay="250" animation-in="##RIGHT_IN##" animation-out="##LEFT_OUT##" disablevisible="MAP_VERFLOTANTE=0" bgcolor="#ffffff" modal="true" floating="true" top="0" left="0" width="100%" height="100%" />
  <prop group="1" frame="frmnuevochat" name="MAP_BUSCAR_USUARIO_BOTON" img="icon_search.png" locked="true" type="B" visible="1" lmargin="48p" tmargin="24p" bmargin="24p" height="48p" width="48p" />
  <prop group="1" frame="frmnuevochat" name="MAP_BUSCAR_USUARIO" ontextchanged="javascript:AccionesChatEspecial('textoU',e);" class="buscadorListadoUsuarios" type="T" visible="1" newline="false" />
  <prop group="1" frame="frmnuevochat" name="MAP_SPACE" visible="7" type="TL" width="720p" height="3p" size="255" bgcolor="#cccccc" title=" " />
  <prop group="1" frame="frmnuevochat" name="@nUsuarios" contents="nUsuarios" mask="31" viewmode="recyclerview" type="Z" visible="1" width="100%" bgcolor="#ffffff" height="1061p" lmargin="0" tmargin="0" />
  <contents name="nUsuarios" src="UsuariosChat" filter="ID&lt;&gt;##USERID##" />
  <group name="grupoChatear" id="2" height="1160p" />
  <frame group="2" name="frmtitulo" width="100%" height="120p" bgcolor="#ffffff" align="center" />
  <prop group="2" frame="frmtitulo" name="MAP_BTVOLVER" method="ExecuteNode(onback)" lmargin="0" tmargin="0" type="B" width="60p" height="120p" img="icon_back.png" visible="1" />
  <prop group="2" frame="frmtitulo" name="MAP_BTVERGENTE" type="B" visible="1" img="##FLD_MAP_IMGTIPO##" labelwidth="0" lmargin="10p" rmargin="10p" tmargin="20p" bmargin="20p" width="80p" height="80p" newline="false" />
  <prop group="2" frame="frmtitulo" name="MAP_CHATTITULO" text-align="center|left" text-forecolor-disabled="#333333" fontbold="true" type="T" visible="1" labelwidth="0" width="470p" height="120p" locked="true" newline="false" />
  <prop group="2" frame="frmtitulo" name="MAP_BTLLAMADA" img="icon_phone.png" method="executenode(AccionesChatEspecial('llamada'))" bgcolor="#000000" type="B" visible="1" labelwidth="0" lmargin="0" rmargin="10p" tmargin="20p" bmargin="20p" width="80p" height="80p" newline="false" />
  <prop group="2" name="MAP_SPACE3" visible="7" type="TL" width="720p" height="3p" size="255" bgcolor="#cccccc" title=" " />
  <frame group="2" name="frmChatear" tmargin="0" lmargin="0" width="100%" height="937p" imgbk="##FLD_MAP_FOTO_FONDO##" />
  <frame group="2" frame="frmChatear" name="frmContent" tmargin="0" lmargin="0" width="100%" height="937p" />
  <prop group="2" frame="frmContent" name="Chatear" bgcolor="#00000000" contents="Chatear" tmargin="0" lmargin="0" edit-inrow="true" type="Z" width="100%" height="100%" />
  <contents name="Chatear" src="Chatear" filter="IDCHAT=##FLD_MAP_CHATSEL##" />
  <prop group="2" name="MAP_SPACE4" visible="7" type="TL" width="720p" height="3p" size="255" bgcolor="#cccccc" title=" " />
  <frame group="2" name="frmMenuW" bgcolor="#ffffff" align="center" width="100%" height="100p" Ximgbk="chatear.png" />
  <frame group="2" frame="frmMenuW" name="frmNormal" disablevisible="MAP_RECORDON=1" />
  <prop group="2" frame="frmNormal" name="MAP_ADDOTHER" img="icon_more.png" lmargin="0" tmargin="0" type="B" width="100p" height="100p" visible="1" />
  <prop group="2" frame="frmNormal" name="MAP_TITLE" lmargin="0" onfocuschanged="javascript:AccionesChatEspecial('foco',e);" labelwidth="0" lines="1" fixed-lines="true" tpadding="10p" bpadding="10p" lpadding="10p" rpadding="10p" text-border="true" border-corner-radius="20" ontextchanged="javascript:AccionesChatEspecial('textoChange',e);" type="T" visible="1" text-bgcolor="#f1f1f1" newline="false" width="424p" height="80p" tmargin="10p" bmargin="10p" />
  <prop group="2" frame="frmNormal" name="MAP_ADDFOTO" method="executenode(AccionesChatEspecial('fotoabrir'))" img="icon_camera.png" lmargin="0" tmargin="0" type="B" width="100p" height="100p" newline="false" visible="1" disablevisible="MAP_SHOWADDTEXT=1" />
  <prop group="2" frame="frmNormal" name="MAP_ADDRECORD" disableedit="MAP_RECORDON=1" method="executenode(AccionesChatEspecial('voz'))" img="icon_microphone.png" lmargin="0" tmargin="0" type="B" width="100p" height="100p" newline="false" visible="1" disablevisible="MAP_SHOWADDTEXT=1" />
  <frame group="2" frame="frmMenuW" name="frmRecording" disablevisible="MAP_RECORDON=0" newline="false" />
  <prop group="2" frame="frmRecording" name="MAP_ADDRECORD_ON" locked="true" img="icon_microphone_recordon.png" lmargin="0" tmargin="0" type="B" width="100p" height="100p" newline="false" visible="1" />
  <prop group="2" frame="frmRecording" name="MAP_TIMERECORD" locked="true" lmargin="0" tmargin="0" type="T" labelwidth="0" width="100p" height="100p" visible="1" newline="false" />
  <prop group="2" frame="frmRecording" name="MAP_CANCELRECORD" title="Cancelar" method="executenode(AccionesChatEspecial('voz'))" lmargin="0" tmargin="0" newline="false" type="B" labelwidth="1" width="424p" height="100p" bgcolor="#00000000" forecolor="#ff0000" visible="1" />
  <prop group="2" frame="frmMenuW" name="MAP_ADDTEXT" method="executenode(AccionesChatEspecial('enviar'))" img="icon_send.png" lmargin="0" tmargin="0" type="B" width="100p" height="100p" newline="false" visible="1" disablevisible="MAP_SHOWADDTEXT=0" />
  <prop group="2" frame="frmMenuW" name="MAP_BANDERA" type="N" visible="0" />
  <prop group="2" frame="frmMenuW" name="MAP_ADJUNTO" type="T" visible="0" />
  <prop group="2" frame="frmMenuW" name="MAP_ENVIARDATO" type="T" visible="0" />
  <frame group="2" name="frmMenuW2" align="center" width="100%" height="200p" disablevisible="MAP_ESPACIO=0" />
  <prop group="2" frame="frmMenuW2" name="MAP_ESPACIO" type="N" visible="1" text-bgcolor="#0000ff" text-forecolor="#000000" lmargin="10p" width="430p" locked="true" />
  <group name="invisibles" id="3" />
  <prop group="3" name="MAP_GRUPOSEL" type="T" visible="0" />
  <prop group="3" name="MAP_VERFLOTANTE" type="N" visible="0" />
  <prop group="3" name="MAP_USERLOGIN" type="N" visible="0" />
  <prop group="3" name="MAP_RECORDON" type="N" visible="0" />
  <prop group="3" name="MAP_PHONE" type="T" visible="0" />
  <prop group="3" name="MAP_INDICESEL" type="N" visible="0" />
  <prop group="3" name="MAP_IDCHATSEL" type="T" visible="0" />
  <prop group="3" name="MAP_CCUSUARIO" type="T" visible="0" />
  <prop group="3" name="MAP_IMGTIPO" type="T" visible="0" />
  <prop group="3" name="MAP_SHOWADDTEXT" type="N" visible="0" />
  <prop group="3" name="MAP_TIPO" type="N" visible="0" />
  <prop group="3" name="MAP_FOTO" type="T" visible="0" />
  <prop group="3" name="MAP_VOZGRABADA" type="T" visible="0" />
  <prop group="3" name="MAP_FOTO_FONDO" type="T" visible="0" />
  <onrecordfinished>
    <action name="runscript">
      <script language="javascript">
				// AQUI TENGO QU3E GUARDAR EL MENSAJE EN EL CHAT
				// 0 UNA VEZ, 1 DOS VECES.-1 INDEFINIDAMENTE
				// ui.playSoundAndVibrate(self.MAP_VOZGRABADA.toString(),"",0);
              </script>
    </action>
  </onrecordfinished>
  <onSetTime refresh="false" show-wait-dialog="false">
    <action name="runscript">
      <script language="javascript">
                setTimeRecording("MAP_TIMERECORD");
            </script>
    </action>
  </onSetTime>
  <before-edit show-wait-dialog="false" refresh="false">
    <action name="runscript">
      <script language="javascript">
                inicializeChats();
            </script>
    </action>
  </before-edit>
  <after-edit show-wait-dialog="false" refresh="false">
    <action name="runscript">
      <script language="javascript">
                lockContents(["Chat","nUsuarios","Chatear"]);
            </script>
    </action>
  </after-edit>
  <onSetBackground refresh="false" show-wait-dialog="false">
    <action name="runscript">
      <param name="parametro" />
      <script language="javascript">
                if(self.MAP_GRUPOSEL==2){
                    if(self.MAP_FOTO_FONDO=="fondo_chat.png"){
                        self.MAP_FOTO_FONDO = "fondo_chat2.png";
                    }else{
                        self.MAP_FOTO_FONDO = "fondo_chat.png";
                    }
                    ui.executeActionAfterDelay("onSetBackground", 60);
                    ui.refresh("frmChatear");
                }
            </script>
    </action>
  </onSetBackground>
  <AccionesChatEspecial show-wait-dialog="false" refresh="false">
    <action name="runscript">
      <param name="parametro" />
      <script language="javascript">
                AccionesChatEspecial(parametro,null);
            </script>
    </action>
  </AccionesChatEspecial>
  <abrirDrawer show-wait-dialog="false" refresh="false">
    <action name="runscript">
      <param name="grupo" />
      <script language="javascript">
                if (grupo!=999) {
                    self.MAP_GRUPOSEL=grupo;
                    ui.refresh("MAP_GRUPOSEL");
                }
                irGrupo(grupo);
                if (grupo==2) {
                    // ui.executeActionAfterDelay("onSetBackground", 60);
                    fillMessagesContent(self.getContents("Chatear"),1,25);
                    ui.refresh("Chatear");
                }
            </script>
    </action>
  </abrirDrawer>
  <onback show-wait-dialog="false" refresh="false">
    <action name="runscript">
      <script language="javascript">
                salir();
            </script>
    </action>
  </onback>
  <onchange>
    <field name="MAP_FOTO">
      <action name="runscript">
        <script language="javascript">
			    	AccionesChatEspecial('enviar');
				</script>
      </action>
    </field>
    <field name="MAP_ADJUNTO">
      <action name="runscript">
        <script language="javascript">
			    	AccionesChatEspecial('adjuntoguardar',e);
				</script>
      </action>
    </field>
  </onchange>
</coll>