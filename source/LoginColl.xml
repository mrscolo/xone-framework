<?xml version="1.0" encoding="utf-8"?>
<coll name="LoginColl" title="" notab="true" editmask="0" screen-orientation="portrait" special="true" login-coll="true">
  <group name="Login" id="1" />
  <frame group="1" name="frmGeneral" width="100%" height="100%" imgbk="FondoLogin.png" align="center" />
  <frame group="1" frame="frmGeneral" name="frm1" bgcolor="#95FFFFFF" align="center" border-corner-radius="20" />
  <prop group="1" frame="frm1" name="MAP_ENTRAR_SINGLOG" method="executeNode(click-entrar(1))" type="B" border-corner-radius="20" title="ENTRAR SIN LOGUEARSE" border-color="#00000000" forecolor="#333333" bgcolor="#81F781" width="500p" class="btnButton" tmargin="50p" lmargin="50p" rmargin="50p" />
  <frame group="1" frame="frm1" name="frmUser" bgcolor="#ffffff" tmargin="90p" />
  <prop group="1" frame="frmUser" name="MAP_USER" floating-tooltip="true" type="T" lmargin="0" lpadding="20p" height="100p" text-border="false" class="classT" width="500p" visible="1" title="" labelwidth="0" tooltip="Usuario" text-bgcolor="#00000000" forecolor="#333333" />
  <frame group="1" frame="frm1" name="frmPwd" bgcolor="#ffffff" tmargin="10p" />
  <prop group="1" frame="frmPwd" name="MAP_PASSWORD" floating-tooltip="true" type="X" lmargin="0" lpadding="20p" height="100p" text-border="false" class="classT" width="500p" visible="1" title="" labelwidth="0" tooltip="Contrase침a" text-bgcolor="#00000000" forecolor="#333333" />
  <prop group="1" frame="frm1" name="MAP_ENTRAR_LOG" method="executeNode(click-entrar(0))" type="B" tmargin="100p" border-corner-radius="20" title="LOGUEARSE" class="btnButton" border-color="#00000000" forecolor="#333333" bgcolor="yellow" width="500p" lmargin="0" />
  <prop group="1" frame="frm1" name="MAP_CANCEL" method="executeNode(salir)" type="B" border-corner-radius="20" title="SALIR" class="btnButton" border-color="#00000000" forecolor="#FFFFFF" bgcolor="#ff0000" width="500p" lmargin="0" />
  <prop group="1" frame="frm1" name="MAP_BT_HUELLA" method="executeNode(aceptarHuella)" type="B" bgcolor="#F7F7F7" width="127p" height="127p" img="huelladactilar_black.png" border-corner-radius="20" title=" " class="btnButton" border-color="#00000000" forecolor="#FFFFFF" lmargin="0" disablevisible="MAP_HUELLADACTILAR=0" />
  <prop group="1" frame="frm1" name="MAP_HUELLADACTILAR" visible="0" type="N" />
  <prop group="1" frame="frm1" name="MAP_VERSIONAPP" type="TL" title="Version App: ##VERSION## " forecolor="black" labelbox="false" class="xnLightColorReadOnly" align="center" visible="1" width="500p" height="80p" tmargin="160p" bmargin="50p" />
  <permissions>
    <permission name="external-storage" />
    <permission name="phone" />
    <permission name="camera" />
    <permission name="location" />
    <permission name="calendar" />
    <permission name="contacts" />
    <permission name="microphone" />
  </permissions>
  <onback>
    <action name="runscript">
      <script language="javascript">
        		appData.failWithMessage(-11888, "##EXIT##");
        </script>
    </action>
  </onback>
  <create>
    <action name="runscript">
      <script language="javascript">
			self.MAP_USUARIO=self.ownerCollection.getVariables("##LOGIN_LASTUSER##");
	  </script>
    </action>
    <action name="runscript">
      <script language="javascript"> 
                var aceptar=0;
                self.MAP_HUELLADACTILAR = 0;
				
				// if (fingerprintManager.isHardwareAvailable()){
    // 				if (fingerprintManager.hasEnrolledFingerprints()){
    // 				    // para activar huella dactilar hay que poner esto a 1
    // 				    self.MAP_HUELLADACTILAR = 1;
    				    
    // 				    self.MAP_HUELLADACTILAR = 0;
				// 		doFingerprintAuth();  
    // 				}  
    // 				else{
    // 				    aceptar=ui.msgBox("Desea configurar la huella dactilar?","Mensaje",1);
    // 				    if (aceptar==1){
    // 				        fingerprintManager.launchFingerprintSettings();
    // 				    }else{
    // 				        self.MAP_HUELLADACTILAR = 0;
    // 				    }
    // 				}
				// }
				
    			self.MAP_HUELLADACTILAR = 0;
            </script>
    </action>
  </create>
  <aceptarHuella>
    <action name="runscript">
      <script language="javascript">
                if(getOS() == "IOS"){
    		        doFingerprintAuthIOS();    
    			}
    		</script>
    </action>
  </aceptarHuella>
  <click-entrar>
    <action name="runscript">
      <param name="autoLogin" />
      <script language="javascript">
            var err = false;
            if(autoLogin == 1){
                self.MAP_USER = "admin";
                self.MAP_PASSWORD = "";
            }else{
                if(self.MAP_USER.length == 0){
                    err = true;
                    ui.msgBox("Debe rellenar el usuario","Informaci칩n",0);
                }
                //else if(self.MAP_PASSWORD.length == 0){
                //    err = true;
                //    ui.msgBox("Debe rellenar la Contrase침a","Informaci칩n",0);
                //} 
            }
            if(!err){
		        doLoginNew();
            }
		</script>
    </action>
  </click-entrar>
  <click-cancelar>
    <action name="runscript">
      <script language="javascript">
        	self.executeNode("onback");
		</script>
    </action>
  </click-cancelar>
  <login-fail>
    <action name="runscript">
      <script language="javascript">
			var v_err=self.getVariables("##LOGIN_ERRORDESCRIPTION##");
			appData.failWithMessage(-8100,"Error: "+v_err);
		</script>
    </action>
  </login-fail>
  <salir>
    <action name="runscript">
      <script language="javascript">
            exit();
		</script>
    </action>
  </salir>
</coll>