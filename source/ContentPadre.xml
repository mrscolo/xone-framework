<?xml version="1.0" encoding="iso-8859-15"?>
<coll name="ContentPadre" title="mapaDatos" edit-inrow="false" loadall="true" cell-odd-colorx="#FFFFFF" cell-even-colorx="#F2F2F2" userawsql="true" sql="select t1.*,t1.ICON as MAP_ICON, (select count(ID) from gen_mapa_datos where IDPADRE = t1.ID) as MAP_COUNT from ##PREF##mapa_datos t1 WHERE IFNULL(IDPADRE,0)=0" objname="mapa_datos" updateobj="mapa_datos" progid="ASData.CASBasicDataObj">
  <platform name="web" sql-parser="false" sql="EXPLOTA BRUTALMENTE!!!!!!!!!!!!!! select t1.*,t1.ICON as MAP_ICON,CONCAT('[',(select count(ID) from gen_mapa_datos where IDPADRE = t1.ID),']') as MAP_COUNT from ##PREF##mapa_datos t1" />
  <group name="General" id="1" />
  <frame group="1" name="frmG" width="100%" bgcolor="#ffffff" />
  <prop group="1" frame="frmG" name="MAP_ICON" type="IMG" lmargin="20p" tmargin="20p" width="80p" height="80p" visible="4" bmargin="20p" />
  <platform conditions=" " newline="true" width="100%" />
  <platform conditions=" " newline="true" width="100%" />
  <prop group="1" frame="frmG" name="NOMBRE" type="T" textfont-bold="true" class="classgrid" align="left|center" width="490p" height="80p" newline="false" tmargin="20p" bmargin="20p" />
  <prop group="1" frame="frmG" name="MAP_COUNT" type="T" text-forecolor="#666666" textfont-size="5" class="classgrid" align="left|center" width="110p" height="80p" newline="false" tmargin="20p" bmargin="20p" />
  <prop group="1" name="ContentHijo" title="ContentHijo" type="Z" visible="1" contents="ContentHijo" />
  <contents name="ContentHijo" src="ContentHijo" filter="IDPADRE=##FLD_ID##" />
  <onexpand refresh="false">
    <action name="runscript">
      <script language="javascript">
				// self.MAP_ICON = "add.png";
				ui.refreshContentRow("ContentPadre", self.getOwnerCollection().getObjectIndex(self));
			</script>
    </action>
  </onexpand>
  <oncollapse refresh="false">
    <action name="runscript">
      <script language="javascript">
				// self.MAP_ICON = "minus.png";
				ui.refreshContentRow("ContentPadre", self.getOwnerCollection().getObjectIndex(self));
			</script>
    </action>
  </oncollapse>
</coll>